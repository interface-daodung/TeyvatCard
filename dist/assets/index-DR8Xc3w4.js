(function(){const z=document.createElement("link").relList;if(z&&z.supports&&z.supports("modulepreload"))return;for(const it of document.querySelectorAll('link[rel="modulepreload"]'))j(it);new MutationObserver(it=>{for(const ht of it)if(ht.type==="childList")for(const C of ht.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&j(C)}).observe(document,{childList:!0,subtree:!0});function W(it){const ht={};return it.integrity&&(ht.integrity=it.integrity),it.referrerPolicy&&(ht.referrerPolicy=it.referrerPolicy),it.crossOrigin==="use-credentials"?ht.credentials="include":it.crossOrigin==="anonymous"?ht.credentials="omit":ht.credentials="same-origin",ht}function j(it){if(it.ep)return;it.ep=!0;const ht=W(it);fetch(it.href,ht)}})();function V1(Bt){return Bt&&Bt.__esModule&&Object.prototype.hasOwnProperty.call(Bt,"default")?Bt.default:Bt}var rd={exports:{}},$W=rd.exports,A1;function KW(){return A1||(A1=1,(function(Bt,z){(function(j,it){Bt.exports=it()})($W,()=>(()=>{var W={50792:(C=>{var R=Object.prototype.hasOwnProperty,s="~";function g(){}Object.create&&(g.prototype=Object.create(null),new g().__proto__||(s=!1));function y(r,o,d){this.fn=r,this.context=o,this.once=d||!1}function u(r,o,d,a,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new y(d,a||r,f),c=s?s+o:o;return r._events[c]?r._events[c].fn?r._events[c]=[r._events[c],v]:r._events[c].push(v):(r._events[c]=v,r._eventsCount++),r}function l(r,o){--r._eventsCount===0?r._events=new g:delete r._events[o]}function h(){this._events=new g,this._eventsCount=0}h.prototype.eventNames=function(){var o=[],d,a;if(this._eventsCount===0)return o;for(a in d=this._events)R.call(d,a)&&o.push(s?a.slice(1):a);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(d)):o},h.prototype.listeners=function(o){var d=s?s+o:o,a=this._events[d];if(!a)return[];if(a.fn)return[a.fn];for(var f=0,v=a.length,c=new Array(v);f<v;f++)c[f]=a[f].fn;return c},h.prototype.listenerCount=function(o){var d=s?s+o:o,a=this._events[d];return a?a.fn?1:a.length:0},h.prototype.emit=function(o,d,a,f,v,c){var p=s?s+o:o;if(!this._events[p])return!1;var m=this._events[p],T=arguments.length,E,P;if(m.fn){switch(m.once&&this.removeListener(o,m.fn,void 0,!0),T){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,a),!0;case 4:return m.fn.call(m.context,d,a,f),!0;case 5:return m.fn.call(m.context,d,a,f,v),!0;case 6:return m.fn.call(m.context,d,a,f,v,c),!0}for(P=1,E=new Array(T-1);P<T;P++)E[P-1]=arguments[P];m.fn.apply(m.context,E)}else{var w=m.length,A;for(P=0;P<w;P++)switch(m[P].once&&this.removeListener(o,m[P].fn,void 0,!0),T){case 1:m[P].fn.call(m[P].context);break;case 2:m[P].fn.call(m[P].context,d);break;case 3:m[P].fn.call(m[P].context,d,a);break;case 4:m[P].fn.call(m[P].context,d,a,f);break;default:if(!E)for(A=1,E=new Array(T-1);A<T;A++)E[A-1]=arguments[A];m[P].fn.apply(m[P].context,E)}}return!0},h.prototype.on=function(o,d,a){return u(this,o,d,a,!1)},h.prototype.once=function(o,d,a){return u(this,o,d,a,!0)},h.prototype.removeListener=function(o,d,a,f){var v=s?s+o:o;if(!this._events[v])return this;if(!d)return l(this,v),this;var c=this._events[v];if(c.fn)c.fn===d&&(!f||c.once)&&(!a||c.context===a)&&l(this,v);else{for(var p=0,m=[],T=c.length;p<T;p++)(c[p].fn!==d||f&&!c[p].once||a&&c[p].context!==a)&&m.push(c[p]);m.length?this._events[v]=m.length===1?m[0]:m:l(this,v)}return this},h.prototype.removeAllListeners=function(o){var d;return o?(d=s?s+o:o,this._events[d]&&l(this,d)):(this._events=new g,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=s,h.EventEmitter=h,C.exports=h}),11517:((C,R,s)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(38829),y=function(u,l,h,r){for(var o=u[0],d=1;d<u.length;d++){var a=u[d];g(a,o,l,h,r),o=a}return u};C.exports=y}),80318:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o){return g(u,"angle",l,h,r,o)};C.exports=y}),60757:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){for(var u=0;u<s.length;u++){var l=s[u];g.call(y,l)}return s};C.exports=R}),69927:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){y===void 0&&(y=0);for(var u=y;u<s.length;u++){var l=s[u],h=!0;for(var r in g)l[r]!==g[r]&&(h=!1);if(h)return l}return null};C.exports=R}),32265:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){y===void 0&&(y=0);for(var u=s.length-1;u>=y;u--){var l=s[u],h=!0;for(var r in g)l[r]!==g[r]&&(h=!1);if(h)return l}return null};C.exports=R}),94420:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(11879),y=s(60461),u=s(95540),l=s(29747),h=s(41481),r=new h({sys:{queueDepthSort:l,events:{once:l}}},0,0,1,1).setOrigin(0,0),o=function(d,a){a===void 0&&(a={});var f=a.hasOwnProperty("width"),v=a.hasOwnProperty("height"),c=u(a,"width",-1),p=u(a,"height",-1),m=u(a,"cellWidth",1),T=u(a,"cellHeight",m),E=u(a,"position",y.TOP_LEFT),P=u(a,"x",0),w=u(a,"y",0),A=0,b=0,O=c*m,I=p*T;r.setPosition(P,w),r.setSize(m,T);for(var D=0;D<d.length;D++)if(g(d[D],r,E),f&&c===-1)r.x+=m;else if(v&&p===-1)r.y+=T;else if(v&&!f){if(b+=T,r.y+=T,b===I&&(b=0,A+=m,r.y=w,r.x+=m,A===O))break}else if(A+=m,r.x+=m,A===O&&(A=0,b+=T,r.x=P,r.y+=T,b===I))break;return d};C.exports=o}),41721:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o){return g(u,"alpha",l,h,r,o)};C.exports=y}),67285:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o){return g(u,"x",l,h,r,o)};C.exports=y}),9074:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o,d,a){return h==null&&(h=l),g(u,"x",l,r,d,a),g(u,"y",h,o,d,a)};C.exports=y}),75222:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o){return g(u,"y",l,h,r,o)};C.exports=y}),22983:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y===void 0&&(y=0),u===void 0&&(u=6.28);for(var l=y,h=(u-y)/s.length,r=g.x,o=g.y,d=g.radius,a=0;a<s.length;a++)s[a].x=r+d*Math.cos(l),s[a].y=o+d*Math.sin(l),l+=h;return s};C.exports=R}),95253:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y===void 0&&(y=0),u===void 0&&(u=6.28);for(var l=y,h=(u-y)/s.length,r=g.width/2,o=g.height/2,d=0;d<s.length;d++)s[d].x=g.x+r*Math.cos(l),s[d].y=g.y+o*Math.sin(l),l+=h;return s};C.exports=R}),88505:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(15258),y=s(26708),u=function(l,h,r){var o;r?o=y(h,r,l.length):o=g(h,l.length);for(var d=0;d<l.length;d++){var a=l[d],f=o[d];a.x=f.x,a.y=f.y}return l};C.exports=u}),41346:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(14649),y=s(86003),u=s(49498),l=function(h,r,o){o===void 0&&(o=0);var d=g(r,!1,h.length);o>0?y(d,o):o<0&&u(d,Math.abs(o));for(var a=0;a<h.length;a++)h[a].x=d[a].x,h[a].y=d[a].y;return h};C.exports=l}),11575:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(84993),y=function(u,l,h){var r=g({x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2},h),o=g({x1:l.x2,y1:l.y2,x2:l.x3,y2:l.y3},h),d=g({x1:l.x3,y1:l.y3,x2:l.x1,y2:l.y1},h);r.pop(),o.pop(),d.pop(),r=r.concat(o,d);for(var a=r.length/u.length,f=0,v=0;v<u.length;v++){var c=u[v],p=r[Math.floor(f)];c.x=p.x,c.y=p.y,f+=a}return u};C.exports=y}),29953:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){for(var u=0;u<s.length;u++){var l=s[u];l.anims&&l.anims.play(g,y)}return s};C.exports=R}),66979:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=1);var r,o=0,d=s.length;if(h===1)for(r=l;r<d;r++)s[r][g]+=y+o*u,o++;else for(r=l;r>=0;r--)s[r][g]+=y+o*u,o++;return s};C.exports=R}),43967:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=1);var r,o=0,d=s.length;if(h===1)for(r=l;r<d;r++)s[r][g]=y+o*u,o++;else for(r=l;r>=0;r--)s[r][g]=y+o*u,o++;return s};C.exports=R}),88926:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(28176),y=function(u,l){for(var h=0;h<u.length;h++)g(l,u[h]);return u};C.exports=y}),33286:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(24820),y=function(u,l){for(var h=0;h<u.length;h++)g(l,u[h]);return u};C.exports=y}),96e3:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65822),y=function(u,l){for(var h=0;h<u.length;h++)g(l,u[h]);return u};C.exports=y}),28789:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26597),y=function(u,l){for(var h=0;h<u.length;h++)g(l,u[h]);return u};C.exports=y}),97154:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(90260),y=function(u,l){for(var h=0;h<u.length;h++)g(l,u[h]);return u};C.exports=y}),20510:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o){return g(u,"rotation",l,h,r,o)};C.exports=y}),91051:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(1163),y=s(20339),u=function(l,h,r){for(var o=h.x,d=h.y,a=0;a<l.length;a++){var f=l[a];g(f,o,d,r,Math.max(1,y(f.x,f.y,o,d)))}return l};C.exports=u}),76332:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(1163),y=function(u,l,h,r){var o=l.x,d=l.y;if(r===0)return u;for(var a=0;a<u.length;a++)g(u[a],o,d,h,r);return u};C.exports=y}),61619:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o){return g(u,"scaleX",l,h,r,o)};C.exports=y}),94868:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o,d,a){return h==null&&(h=l),g(u,"scaleX",l,r,d,a),g(u,"scaleY",h,o,d,a)};C.exports=y}),95532:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66979),y=function(u,l,h,r,o){return g(u,"scaleY",l,h,r,o)};C.exports=y}),8689:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"alpha",l,h,r,o)};C.exports=y}),2645:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r){return g(u,"blendMode",l,0,h,r)};C.exports=y}),32372:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"depth",l,h,r,o)};C.exports=y}),85373:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){for(var u=0;u<s.length;u++)s[u].setInteractive(g,y);return s};C.exports=R}),81583:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o,d,a){return h==null&&(h=l),g(u,"originX",l,r,d,a),g(u,"originY",h,o,d,a),u.forEach(function(f){f.updateDisplayOrigin()}),u};C.exports=y}),79939:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"rotation",l,h,r,o)};C.exports=y}),2699:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o,d,a){return h==null&&(h=l),g(u,"scaleX",l,r,d,a),g(u,"scaleY",h,o,d,a)};C.exports=y}),98739:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"scaleX",l,h,r,o)};C.exports=y}),98476:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"scaleY",l,h,r,o)};C.exports=y}),6207:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o,d,a){return h==null&&(h=l),g(u,"scrollFactorX",l,r,d,a),g(u,"scrollFactorY",h,o,d,a)};C.exports=y}),6607:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"scrollFactorX",l,h,r,o)};C.exports=y}),72248:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"scrollFactorY",l,h,r,o)};C.exports=y}),14036:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l){for(var h=0;h<s.length;h++)s[h].setTint(g,y,u,l);return s};C.exports=R}),50159:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r){return g(u,"visible",l,0,h,r)};C.exports=y}),77597:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"x",l,h,r,o)};C.exports=y}),83194:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o,d,a){return h==null&&(h=l),g(u,"x",l,r,d,a),g(u,"y",h,o,d,a)};C.exports=y}),67678:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43967),y=function(u,l,h,r,o){return g(u,"y",l,h,r,o)};C.exports=y}),35850:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o){r===void 0&&(r=0),o===void 0&&(o=new g);var d,a,f=u.length;if(f===1)d=u[0].x,a=u[0].y,u[0].x=l,u[0].y=h;else{var v=1,c=0;r===0&&(c=f-1,v=f-2),d=u[c].x,a=u[c].y,u[c].x=l,u[c].y=h;for(var p=0;p<f;p++)if(!(v>=f||v===-1)){var m=u[v],T=m.x,E=m.y;m.x=d,m.y=a,d=T,a=E,r===0?v--:v++}}return o.x=d,o.y=a,o};C.exports=y}),8628:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(33680),y=function(u){return g(u)};C.exports=y}),21837:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7602),y=function(u,l,h,r,o){o===void 0&&(o=!1);var d=Math.abs(r-h)/u.length,a;if(o)for(a=0;a<u.length;a++)u[a][l]+=g(a*d,h,r);else for(a=0;a<u.length;a++)u[a][l]=g(a*d,h,r);return u};C.exports=y}),21910:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(54261),y=function(u,l,h,r,o){o===void 0&&(o=!1);var d=Math.abs(r-h)/u.length,a;if(o)for(a=0;a<u.length;a++)u[a][l]+=g(a*d,h,r);else for(a=0;a<u.length;a++)u[a][l]=g(a*d,h,r);return u};C.exports=y}),62054:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l){if(l===void 0&&(l=!1),s.length===0)return s;if(s.length===1)return l?s[0][g]+=(u+y)/2:s[0][g]=(u+y)/2,s;var h=Math.abs(u-y)/(s.length-1),r;if(l)for(r=0;r<s.length;r++)s[r][g]+=r*h+y;else for(r=0;r<s.length;r++)s[r][g]=r*h+y;return s};C.exports=R}),79815:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){for(var g=0;g<s.length;g++)s[g].visible=!s[g].visible;return s};C.exports=R}),39665:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(15994),y=function(u,l,h){h===void 0&&(h=0);for(var r=0;r<u.length;r++){var o=u[r];o.x=g(o.x,l.left-h,l.right+h),o.y=g(o.y,l.top-h,l.bottom+h)}return u};C.exports=y}),61061:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={AlignTo:s(11517),Angle:s(80318),Call:s(60757),GetFirst:s(69927),GetLast:s(32265),GridAlign:s(94420),IncAlpha:s(41721),IncX:s(67285),IncXY:s(9074),IncY:s(75222),PlaceOnCircle:s(22983),PlaceOnEllipse:s(95253),PlaceOnLine:s(88505),PlaceOnRectangle:s(41346),PlaceOnTriangle:s(11575),PlayAnimation:s(29953),PropertyValueInc:s(66979),PropertyValueSet:s(43967),RandomCircle:s(88926),RandomEllipse:s(33286),RandomLine:s(96e3),RandomRectangle:s(28789),RandomTriangle:s(97154),Rotate:s(20510),RotateAround:s(91051),RotateAroundDistance:s(76332),ScaleX:s(61619),ScaleXY:s(94868),ScaleY:s(95532),SetAlpha:s(8689),SetBlendMode:s(2645),SetDepth:s(32372),SetHitArea:s(85373),SetOrigin:s(81583),SetRotation:s(79939),SetScale:s(2699),SetScaleX:s(98739),SetScaleY:s(98476),SetScrollFactor:s(6207),SetScrollFactorX:s(6607),SetScrollFactorY:s(72248),SetTint:s(14036),SetVisible:s(50159),SetX:s(77597),SetXY:s(83194),SetY:s(67678),ShiftPosition:s(35850),Shuffle:s(8628),SmootherStep:s(21910),SmoothStep:s(21837),Spread:s(62054),ToggleVisible:s(79815),WrapInRectangle:s(39665)}}),42099:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(74943),l=s(81957),h=s(41138),r=s(35154),o=s(90126),d=new y({initialize:function(f,v,c){this.manager=f,this.key=v,this.type="frame",this.frames=this.getFrames(f.textureManager,r(c,"frames",[]),r(c,"defaultTextureKey",null),r(c,"sortFrames",!0)),this.frameRate=r(c,"frameRate",null),this.duration=r(c,"duration",null),this.msPerFrame,this.skipMissedFrames=r(c,"skipMissedFrames",!0),this.delay=r(c,"delay",0),this.repeat=r(c,"repeat",0),this.repeatDelay=r(c,"repeatDelay",0),this.yoyo=r(c,"yoyo",!1),this.showBeforeDelay=r(c,"showBeforeDelay",!1),this.showOnStart=r(c,"showOnStart",!1),this.hideOnComplete=r(c,"hideOnComplete",!1),this.randomFrame=r(c,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(u.PAUSE_ALL,this.pause,this),this.manager.on(u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(a,f,v,c){v===null&&c===null?(a.frameRate=24,a.duration=24/f*1e3):v&&c===null?(a.duration=v,a.frameRate=f/(v/1e3)):(a.frameRate=c,a.duration=f/c*1e3),a.msPerFrame=1e3/a.frameRate},addFrame:function(a){return this.addFrameAt(this.frames.length,a)},addFrameAt:function(a,f){var v=this.getFrames(this.manager.textureManager,f);if(v.length>0){if(a===0)this.frames=v.concat(this.frames);else if(a===this.frames.length)this.frames=this.frames.concat(v);else{var c=this.frames.slice(0,a),p=this.frames.slice(a);this.frames=c.concat(v,p)}this.updateFrameSequence()}return this},checkFrame:function(a){return a>=0&&a<this.frames.length},getFirstTick:function(a){a.accumulator=0,a.nextTick=a.currentFrame.duration?a.currentFrame.duration:a.msPerFrame},getFrameAt:function(a){return this.frames[a]},getFrames:function(a,f,v,c){c===void 0&&(c=!0);var p=[],m,T,E=1,P,w;if(typeof f=="string"){if(w=f,!a.exists(w))return console.warn('Texture "%s" not found',w),p;var A=a.get(w),b=A.getFrameNames();c&&o(b),f=[],b.forEach(function(N){f.push({key:w,frame:N})})}if(!Array.isArray(f)||f.length===0)return p;for(P=0;P<f.length;P++){var O=f[P],I=r(O,"key",v);if(I){var D=r(O,"frame",0),B=a.getFrame(I,D);if(!B){console.warn('Texture "%s" not found',I);continue}T=new h(I,D,E,B),T.duration=r(O,"duration",0),T.isFirst=!m,m&&(m.nextFrame=T,T.prevFrame=m),p.push(T),m=T,E++}}if(p.length>0){T.isLast=!0,T.nextFrame=p[0],p[0].prevFrame=T;var k=1/(p.length-1);for(P=0;P<p.length;P++)p[P].progress=P*k}return p},getNextTick:function(a){a.accumulator-=a.nextTick,a.nextTick=a.currentFrame.duration?a.currentFrame.duration:a.msPerFrame},getFrameByProgress:function(a){return a=g(a,0,1),l(a,this.frames,"progress")},nextFrame:function(a){var f=a.currentFrame;f.isLast?a.yoyo?this.handleYoyoFrame(a,!1):a.repeatCounter>0?a.inReverse&&a.forward?a.forward=!1:this.repeatAnimation(a):a.complete():this.updateAndGetNextTick(a,f.nextFrame)},handleYoyoFrame:function(a,f){if(f||(f=!1),a.inReverse===!f&&a.repeatCounter>0){(a.repeatDelay===0||a.pendingRepeat)&&(a.forward=f),this.repeatAnimation(a);return}if(a.inReverse!==f&&a.repeatCounter===0){a.complete();return}a.forward=f;var v=f?a.currentFrame.nextFrame:a.currentFrame.prevFrame;this.updateAndGetNextTick(a,v)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(a){var f=a.currentFrame;f.isFirst?a.yoyo?this.handleYoyoFrame(a,!0):a.repeatCounter>0?a.inReverse&&!a.forward?this.repeatAnimation(a):(a.forward=!0,this.repeatAnimation(a)):a.complete():this.updateAndGetNextTick(a,f.prevFrame)},updateAndGetNextTick:function(a,f){a.setCurrentFrame(f),this.getNextTick(a)},removeFrame:function(a){var f=this.frames.indexOf(a);return f!==-1&&this.removeFrameAt(f),this},removeFrameAt:function(a){return this.frames.splice(a,1),this.updateFrameSequence(),this},repeatAnimation:function(a){if(a._pendingStop===2){if(a._pendingStopValue===0)return a.stop();a._pendingStopValue--}a.repeatDelay>0&&!a.pendingRepeat?(a.pendingRepeat=!0,a.accumulator-=a.nextTick,a.nextTick+=a.repeatDelay):(a.repeatCounter--,a.forward?a.setCurrentFrame(a.currentFrame.nextFrame):a.setCurrentFrame(a.currentFrame.prevFrame),a.isPlaying&&(this.getNextTick(a),a.handleRepeat()))},toJSON:function(){var a={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(f){a.frames.push(f.toJSON())}),a},updateFrameSequence:function(){for(var a=this.frames.length,f=1/(a-1),v,c=0;c<a;c++)v=this.frames[c],v.index=c+1,v.isFirst=!1,v.isLast=!1,v.progress=c*f,c===0?(v.isFirst=!0,a===1?(v.isLast=!0,v.nextFrame=v,v.prevFrame=v):(v.isLast=!1,v.prevFrame=this.frames[a-1],v.nextFrame=this.frames[c+1])):c===a-1&&a>1?(v.isLast=!0,v.prevFrame=this.frames[a-2],v.nextFrame=this.frames[0]):a>1&&(v.prevFrame=this.frames[c-1],v.nextFrame=this.frames[c+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(u.PAUSE_ALL,this.pause,this),this.manager.off(u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var a=0;a<this.frames.length;a++)this.frames[a].destroy();this.frames=[],this.manager=null}});C.exports=d}),41138:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r,o,d){d===void 0&&(d=!1),this.textureKey=l,this.textureFrame=h,this.index=r,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});C.exports=y}),60848:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(42099),y=s(83419),u=s(90330),l=s(50792),h=s(74943),r=s(8443),o=s(95540),d=s(35154),a=s(36383),f=s(20283),v=s(41836),c=new y({Extends:l,initialize:function(m){l.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new u,this.mixes=new u,this.paused=!1,this.name="AnimationManager",m.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(p,m,T){var E=this.anims,P=this.mixes,w=typeof p=="string"?p:p.key,A=typeof m=="string"?m:m.key;if(E.has(w)&&E.has(A)){var b=P.get(w);b||(b={}),b[A]=T,P.set(w,b)}return this},removeMix:function(p,m){var T=this.mixes,E=typeof p=="string"?p:p.key,P=T.get(E);if(P)if(m){var w=typeof m=="string"?m:m.key;P.hasOwnProperty(w)&&delete P[w]}else m||T.delete(E);return this},getMix:function(p,m){var T=this.mixes,E=typeof p=="string"?p:p.key,P=typeof m=="string"?m:m.key,w=T.get(E);return w&&w.hasOwnProperty(P)?w[P]:0},add:function(p,m){return this.anims.has(p)?(console.warn("Animation key exists: "+p),this):(m.key=p,this.anims.set(p,m),this.emit(h.ADD_ANIMATION,p,m),this)},exists:function(p){return this.anims.has(p)},createFromAseprite:function(p,m,T){var E=[],P=this.game.cache.json.get(p);if(!P)return console.warn("No Aseprite data found for: "+p),E;var w=this,A=d(P,"meta",null),b=d(P,"frames",null);if(A&&b){var O=d(A,"frameTags",[]);O.forEach(function(I){var D=[],B=o(I,"name",null),k=o(I,"from",0),N=o(I,"to",0),H=o(I,"direction","forward");if(B&&(!m||m&&m.indexOf(B)>-1)){for(var $=0,J=k;J<=N;J++){var q=J.toString(),Y=b[q];if(Y){var K=o(Y,"duration",a.MAX_SAFE_INTEGER);D.push({key:p,frame:q,duration:K}),$+=K}}H==="reverse"&&(D=D.reverse());var V={key:B,frames:D,duration:$,yoyo:H==="pingpong"},U;T?T.anims&&(U=T.anims.create(V)):U=w.create(V),U&&E.push(U)}})}return E},create:function(p){var m=p.key,T=!1;return m&&(T=this.get(m),T?console.warn("AnimationManager key already exists: "+m):(T=new g(this,m,p),this.anims.set(m,T),this.emit(h.ADD_ANIMATION,m,T))),T},fromJSON:function(p,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof p=="string"&&(p=JSON.parse(p));var T=[];if(p.hasOwnProperty("anims")&&Array.isArray(p.anims)){for(var E=0;E<p.anims.length;E++)T.push(this.create(p.anims[E]));p.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=p.globalTimeScale)}else p.hasOwnProperty("key")&&p.type==="frame"&&T.push(this.create(p));return T},generateFrameNames:function(p,m){var T=d(m,"prefix",""),E=d(m,"start",0),P=d(m,"end",0),w=d(m,"suffix",""),A=d(m,"zeroPad",0),b=d(m,"outputArray",[]),O=d(m,"frames",!1);if(!this.textureManager.exists(p))return console.warn('Texture "%s" not found',p),b;var I=this.textureManager.get(p);if(!I)return b;var D;if(m)for(O||(O=f(E,P)),D=0;D<O.length;D++){var B=T+v(O[D],A,"0",1)+w;I.has(B)?b.push({key:p,frame:B}):console.warn('Frame "%s" not found in texture "%s"',B,p)}else for(O=I.getFrameNames(),D=0;D<O.length;D++)b.push({key:p,frame:O[D]});return b},generateFrameNumbers:function(p,m){var T=d(m,"start",0),E=d(m,"end",-1),P=d(m,"first",!1),w=d(m,"outputArray",[]),A=d(m,"frames",!1);if(!this.textureManager.exists(p))return console.warn('Texture "%s" not found',p),w;var b=this.textureManager.get(p);if(!b)return w;P&&b.has(P)&&w.push({key:p,frame:P}),A||(E===-1&&(E=b.frameTotal-2),A=f(T,E));for(var O=0;O<A.length;O++){var I=A[O];b.has(I)?w.push({key:p,frame:I}):console.warn('Frame "%s" not found in texture "%s"',I,p)}return w},get:function(p){return this.anims.get(p)},getAnimsFromTexture:function(p){for(var m=this.textureManager.get(p),T=m.key,E=this.anims.getArray(),P=[],w=0;w<E.length;w++)for(var A=E[w],b=A.frames,O=0;O<b.length;O++)if(b[O].textureKey===T){P.push(A.key);break}return P},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(p,m){Array.isArray(m)||(m=[m]);for(var T=0;T<m.length;T++)m[T].anims.play(p);return this},staggerPlay:function(p,m,T,E){T===void 0&&(T=0),E===void 0&&(E=!0),Array.isArray(m)||(m=[m]);var P=m.length;E||P--;for(var w=0;w<m.length;w++){var A=T<0?Math.abs(T)*(P-w):T*w;m[w].anims.playAfterDelay(p,A)}return this},remove:function(p){var m=this.get(p);return m&&(this.emit(h.REMOVE_ANIMATION,p,m),this.anims.delete(p),this.removeMix(p)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(p){var m={anims:[],globalTimeScale:this.globalTimeScale};return p!==void 0&&p!==""?m.anims.push(this.anims.get(p).toJSON()):this.anims.each(function(T,E){m.anims.push(E.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});C.exports=c}),9674:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(42099),y=s(30976),u=s(83419),l=s(90330),h=s(74943),r=s(95540),o=new u({initialize:function(a){this.parent=a,this.animationManager=a.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(d){var a=this.parent;if(d===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,a;Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++){var v=d[f];this.nextAnim?this.nextAnimsQueue.push(v):this.nextAnim=v}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(d){this.isPlaying&&this.stop();var a=this.animationManager,f=typeof d=="string"?d:r(d,"key",null),v=this.exists(f)?this.get(f):a.get(f);if(!v)console.warn("Missing animation: "+f);else{this.currentAnim=v;var c=v.getTotalFrames(),p=r(d,"frameRate",v.frameRate),m=r(d,"duration",v.duration);v.calculateDuration(this,c,m,p),this.delay=r(d,"delay",v.delay),this.repeat=r(d,"repeat",v.repeat),this.repeatDelay=r(d,"repeatDelay",v.repeatDelay),this.yoyo=r(d,"yoyo",v.yoyo),this.showBeforeDelay=r(d,"showBeforeDelay",v.showBeforeDelay),this.showOnStart=r(d,"showOnStart",v.showOnStart),this.hideOnComplete=r(d,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=r(d,"skipMissedFrames",v.skipMissedFrames),this.randomFrame=r(d,"randomFrame",v.randomFrame),this.timeScale=r(d,"timeScale",this.timeScale);var T=r(d,"startFrame",0);T>c&&(T=0),this.randomFrame&&(T=y(0,c-1));var E=v.frames[T];T===0&&!this.forward&&(E=v.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(d){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),d!==void 0&&this.setCurrentFrame(d),this.parent},resume:function(d){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),d!==void 0&&this.setCurrentFrame(d),this.parent},playAfterDelay:function(d,a){if(!this.isPlaying)this.delayCounter=a,this.play(d,!0);else{var f=this.nextAnim,v=this.nextAnimsQueue;f&&v.unshift(f),this.nextAnim=d,this._pendingStop=1,this._pendingStopValue=a}return this.parent},playAfterRepeat:function(d,a){if(a===void 0&&(a=1),!this.isPlaying)this.play(d);else{var f=this.nextAnim,v=this.nextAnimsQueue;f&&v.unshift(f),this.repeatCounter!==-1&&a>this.repeatCounter&&(a=this.repeatCounter),this.nextAnim=d,this._pendingStop=2,this._pendingStopValue=a}return this.parent},play:function(d,a){a===void 0&&(a=!1);var f=this.currentAnim,v=this.parent,c=typeof d=="string"?d:d.key;if(a&&this.isPlaying&&f.key===c)return v;if(f&&this.isPlaying){var p=this.animationManager.getMix(f.key,d);if(p>0)return this.playAfterDelay(d,p)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d)},playReverse:function(d,a){a===void 0&&(a=!1);var f=typeof d=="string"?d:d.key;return a&&this.isPlaying&&this.currentAnim.key===f?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d))},startAnimation:function(d){this.load(d);var a=this.currentAnim,f=this.parent;return a&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,a.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),f},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(d,a){var f=this.currentAnim;if(f){var v=this.currentFrame,c=this.parent,p=v.textureFrame;c.emit(d,f,v,c,p),a&&c.emit(a+f.key,f,v,c,p)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var d=this.currentFrame;if(!d)return 0;var a=d.progress;return this.inReverse&&(a*=-1),a},setProgress:function(d){return this.forward||(d=1-d),this.setCurrentFrame(this.currentAnim.getFrameByProgress(d)),this.parent},setRepeat:function(d){return this.repeatCounter=d===-1?Number.MAX_VALUE:d,this.parent},globalRemove:function(d,a){a===void 0&&(a=this.currentAnim),this.isPlaying&&a.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(d,a){d===void 0&&(d=!1),a===void 0&&(a=!1);var f=this.currentAnim,v=this.parent;return f?(a&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),f.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!d,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(f.frames[0]),this.parent):v},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(d)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(d)}return this.parent},stopAfterDelay:function(d){return this._pendingStop=1,this._pendingStopValue=d,this.parent},stopAfterRepeat:function(d){return d===void 0&&(d=1),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=d,this.parent},stopOnFrame:function(d){return this._pendingStop=3,this._pendingStopValue=d,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(d,a){var f=this.currentAnim;if(!(!this.isPlaying||!f||f.paused)){if(this.accumulator+=a*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=a,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?f.nextFrame(this):f.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var v=0;do this.forward?f.nextFrame(this):f.previousFrame(this),v++;while(this.isPlaying&&this.accumulator>this.nextTick&&v<60)}}},setCurrentFrame:function(d){var a=this.parent;return this.currentFrame=d,a.texture=d.frame.texture,a.frame=d.frame,a.isCropped&&a.frame.updateCropUVs(a._crop,a.flipX,a.flipY),d.setAlpha&&(a.alpha=d.alpha),a.setSizeToFrame(),a._originComponent&&(d.frame.customPivot?a.setOrigin(d.frame.pivotX,d.frame.pivotY):a.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===d&&this.stop()),a},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(d){return this.anims?this.anims.get(d):null},exists:function(d){return this.anims?this.anims.has(d):!1},create:function(d){var a=d.key,f=!1;return a&&(f=this.get(a),f?console.warn("Animation key already exists: "+a):(f=new g(this,a,d),this.anims||(this.anims=new l),this.anims.set(a,f))),f},createFromAseprite:function(d,a){return this.animationManager.createFromAseprite(d,a,this.parent)},generateFrameNames:function(d,a){return this.animationManager.generateFrameNames(d,a)},generateFrameNumbers:function(d,a){return this.animationManager.generateFrameNumbers(d,a)},remove:function(d){var a=this.get(d);return a&&(this.currentAnim===a&&this.stop(),this.anims.delete(d)),a},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});C.exports=o}),57090:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="add"}),25312:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="animationcomplete"}),89580:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="animationcomplete-"}),52860:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="animationrepeat"}),63850:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="animationrestart"}),99085:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="animationstart"}),28087:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="animationstop"}),1794:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="animationupdate"}),52562:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pauseall"}),57953:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="remove"}),68339:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resumeall"}),74943:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ADD_ANIMATION:s(57090),ANIMATION_COMPLETE:s(25312),ANIMATION_COMPLETE_KEY:s(89580),ANIMATION_REPEAT:s(52860),ANIMATION_RESTART:s(63850),ANIMATION_START:s(99085),ANIMATION_STOP:s(28087),ANIMATION_UPDATE:s(1794),PAUSE_ALL:s(52562),REMOVE_ANIMATION:s(57953),RESUME_ALL:s(68339)}}),60421:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Animation:s(42099),AnimationFrame:s(41138),AnimationManager:s(60848),AnimationState:s(9674),Events:s(74943)}}),2161:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(90330),u=s(50792),l=s(24736),h=new g({initialize:function(){this.entries=new y,this.events=new u},add:function(r,o){return this.entries.set(r,o),this.events.emit(l.ADD,this,r,o),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var o=this.get(r);return o&&(this.entries.delete(r),this.events.emit(l.REMOVE,this,r,o.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});C.exports=h}),24047:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2161),y=s(83419),u=s(8443),l=new y({initialize:function(r){this.game=r,this.binary=new g,this.bitmapFont=new g,this.json=new g,this.physics=new g,this.shader=new g,this.audio=new g,this.video=new g,this.text=new g,this.html=new g,this.obj=new g,this.tilemap=new g,this.xml=new g,this.custom={},this.game.events.once(u.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new g),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<h.length;r++)this[h[r]].destroy(),this[h[r]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});C.exports=l}),51464:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="add"}),59261:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="remove"}),24736:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ADD:s(51464),REMOVE:s(59261)}}),83388:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BaseCache:s(2161),CacheManager:s(24047),Events:s(24736)}}),71911:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(39506),l=s(50792),h=s(19715),r=s(87841),o=s(61340),d=s(80333),a=s(26099),f=new g({Extends:l,Mixins:[y.AlphaSingle,y.Visible],initialize:function(c,p,m,T){c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=0),T===void 0&&(T=0),l.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=c,this._y=p,this._width=m,this._height=T,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new o,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new a(m/2,T/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(v){this.renderList.push(v)},setOrigin:function(v,c){return v===void 0&&(v=.5),c===void 0&&(c=v),this.originX=v,this.originY=c,this},getScroll:function(v,c,p){p===void 0&&(p=new a);var m=this.width*.5,T=this.height*.5;return p.x=v-m,p.y=c-T,this.useBounds&&(p.x=this.clampX(p.x),p.y=this.clampY(p.y)),p},centerOnX:function(v){var c=this.width*.5;return this.midPoint.x=v,this.scrollX=v-c,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(v){var c=this.height*.5;return this.midPoint.y=v,this.scrollY=v-c,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(v,c){return this.centerOnX(v),this.centerOnY(c),this},centerToBounds:function(){if(this.useBounds){var v=this._bounds,c=this.width*.5,p=this.height*.5;this.midPoint.set(v.centerX,v.centerY),this.scrollX=v.centerX-c,this.scrollY=v.centerY-p}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(v){if(this.disableCull)return v;var c=this.matrix.matrix,p=c[0],m=c[1],T=c[2],E=c[3],P=p*E-m*T;if(!P)return v;var w=c[4],A=c[5],b=this.scrollX,O=this.scrollY,I=this.width,D=this.height,B=this.y,k=B+D,N=this.x,H=N+I,$=this.culledObjects,J=v.length;P=1/P,$.length=0;for(var q=0;q<J;++q){var Y=v[q];if(!Y.hasOwnProperty("width")||Y.parentContainer){$.push(Y);continue}var K=Y.width,V=Y.height,U=Y.x-b*Y.scrollFactorX-K*Y.originX,Z=Y.y-O*Y.scrollFactorY-V*Y.originY,et=U*p+Z*T+w,st=U*m+Z*E+A,rt=(U+K)*p+(Z+V)*T+w,at=(U+K)*m+(Z+V)*E+A;rt>N&&et<H&&at>B&&st<k&&$.push(Y)}return $},getWorldPoint:function(v,c,p){p===void 0&&(p=new a);var m=this.matrix.matrix,T=m[0],E=m[1],P=m[2],w=m[3],A=m[4],b=m[5],O=T*w-E*P;if(!O)return p.x=v,p.y=c,p;O=1/O;var I=w*O,D=-E*O,B=-P*O,k=T*O,N=(P*b-w*A)*O,H=(E*A-T*b)*O,$=Math.cos(this.rotation),J=Math.sin(this.rotation),q=this.zoomX,Y=this.zoomY,K=this.scrollX,V=this.scrollY,U=v+(K*$-V*J)*q,Z=c+(K*J+V*$)*Y;return p.x=U*I+Z*B+N,p.y=U*D+Z*k+H,p},ignore:function(v){var c=this.id;Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var m=v[p];Array.isArray(m)?this.ignore(m):m.isParent?this.ignore(m.getChildren()):m.cameraFilter|=c}return this},clampX:function(v){var c=this._bounds,p=this.displayWidth,m=c.x+(p-this.width)/2,T=Math.max(m,m+c.width-p);return v<m?v=m:v>T&&(v=T),v},clampY:function(v){var c=this._bounds,p=this.displayHeight,m=c.y+(p-this.height)/2,T=Math.max(m,m+c.height-p);return v<m?v=m:v>T&&(v=T),v},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(v){return v===void 0&&(v=0),this.rotation=u(v),this},setBackgroundColor:function(v){return v===void 0&&(v="rgba(0,0,0,0)"),this.backgroundColor=d(v),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(v,c,p,m,T){return T===void 0&&(T=!1),this._bounds.setTo(v,c,p,m),this.dirty=!0,this.useBounds=!0,T?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(v){v===void 0&&(v=new r);var c=this._bounds;return v.setTo(c.x,c.y,c.width,c.height),v},setName:function(v){return v===void 0&&(v=""),this.name=v,this},setPosition:function(v,c){return c===void 0&&(c=v),this.x=v,this.y=c,this},setRotation:function(v){return v===void 0&&(v=0),this.rotation=v,this},setRoundPixels:function(v){return this.roundPixels=v,this},setScene:function(v,c){c===void 0&&(c=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=v,this.isSceneCamera=c;var p=v.sys;return this.sceneManager=p.game.scene,this.scaleManager=p.scale,this.cameraManager=p.cameras,this.updateSystem(),this},setScroll:function(v,c){return c===void 0&&(c=v),this.scrollX=v,this.scrollY=c,this},setSize:function(v,c){return c===void 0&&(c=v),this.width=v,this.height=c,this},setViewport:function(v,c,p,m){return this.x=v,this.y=c,this.width=p,this.height=m,this},setZoom:function(v,c){return v===void 0&&(v=1),c===void 0&&(c=v),v===0&&(v=.001),c===0&&(c=.001),this.zoomX=v,this.zoomY=c,this},setMask:function(v,c){return c===void 0&&(c=!0),this.mask=v,this._maskCamera=c?this.cameraManager.default:this,this},clearMask:function(v){return v===void 0&&(v=!1),v&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var v={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(v.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),v},update:function(){},setIsSceneCamera:function(v){return this.isSceneCamera=v,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var v=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,c=this.sceneManager;v&&!this._customViewport?c.customViewports++:!v&&this._customViewport&&c.customViewports--,this.dirty=!0,this._customViewport=v}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(v){this._x=v,this.updateSystem()}},y:{get:function(){return this._y},set:function(v){this._y=v,this.updateSystem()}},width:{get:function(){return this._width},set:function(v){this._width=v,this.updateSystem()}},height:{get:function(){return this._height},set:function(v){this._height=v,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(v){v!==this._scrollX&&(this._scrollX=v,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(v){v!==this._scrollY&&(this._scrollY=v,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(v){this._zoomX=v,this._zoomY=v,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(v){this._zoomX=v,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(v){this._zoomY=v,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});C.exports=f}),38058:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(71911),y=s(67502),u=s(45319),l=s(83419),h=s(31401),r=s(20052),o=s(19715),d=s(28915),a=s(87841),f=s(26099),v=new l({Extends:g,Mixins:[h.PostPipeline],initialize:function(p,m,T,E){g.call(this,p,m,T,E),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null},setDeadzone:function(c,p){if(c===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=c,this.deadzone.height=p):this.deadzone=new a(0,0,c,p),this._follow){var m=this.width/2,T=this.height/2,E=this._follow.x-this.followOffset.x,P=this._follow.y-this.followOffset.y;this.midPoint.set(E,P),this.scrollX=E-m,this.scrollY=P-T}y(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(c,p,m,T,E,P){return this.fadeEffect.start(!1,c,p,m,T,!0,E,P)},fadeOut:function(c,p,m,T,E,P){return this.fadeEffect.start(!0,c,p,m,T,!0,E,P)},fadeFrom:function(c,p,m,T,E,P,w){return this.fadeEffect.start(!1,c,p,m,T,E,P,w)},fade:function(c,p,m,T,E,P,w){return this.fadeEffect.start(!0,c,p,m,T,E,P,w)},flash:function(c,p,m,T,E,P,w){return this.flashEffect.start(c,p,m,T,E,P,w)},shake:function(c,p,m,T,E){return this.shakeEffect.start(c,p,m,T,E)},pan:function(c,p,m,T,E,P,w){return this.panEffect.start(c,p,m,T,E,P,w)},rotateTo:function(c,p,m,T,E,P,w){return this.rotateToEffect.start(c,p,m,T,E,P,w)},zoomTo:function(c,p,m,T,E,P){return this.zoomEffect.start(c,p,m,T,E,P)},preRender:function(){this.renderList.length=0;var c=this.width,p=this.height,m=c*.5,T=p*.5,E=this.zoomX,P=this.zoomY,w=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(E)&&Number.isInteger(P);var A=c*this.originX,b=p*this.originY,O=this._follow,I=this.deadzone,D=this.scrollX,B=this.scrollY;I&&y(I,this.midPoint.x,this.midPoint.y);var k=!1;if(O&&!this.panEffect.isRunning){var N=this.lerp,H=O.x-this.followOffset.x,$=O.y-this.followOffset.y;I?(H<I.x?D=d(D,D-(I.x-H),N.x):H>I.right&&(D=d(D,D+(H-I.right),N.x)),$<I.y?B=d(B,B-(I.y-$),N.y):$>I.bottom&&(B=d(B,B+($-I.bottom),N.y))):(D=d(D,H-A,N.x),B=d(B,$-b,N.y)),k=!0}this.roundPixels&&(D=Math.floor(D),B=Math.floor(B)),this.useBounds&&(D=this.clampX(D),B=this.clampY(B)),this.scrollX=D,this.scrollY=B;var J=D+m,q=B+T;this.midPoint.set(J,q);var Y=Math.floor(c/E+.5),K=Math.floor(p/P+.5),V=Math.floor(J-Y/2+.5),U=Math.floor(q-K/2+.5);this.worldView.setTo(V,U,Y,K),w.applyITRS(Math.floor(this.x+A+.5),Math.floor(this.y+b+.5),this.rotation,E,P),w.translate(-A,-b),this.shakeEffect.preRender(),k&&this.emit(o.FOLLOW_UPDATE,this,O)},setLerp:function(c,p){return c===void 0&&(c=1),p===void 0&&(p=c),this.lerp.set(c,p),this},setFollowOffset:function(c,p){return c===void 0&&(c=0),p===void 0&&(p=0),this.followOffset.set(c,p),this},startFollow:function(c,p,m,T,E,P){p===void 0&&(p=!1),m===void 0&&(m=1),T===void 0&&(T=m),E===void 0&&(E=0),P===void 0&&(P=E),this._follow=c,this.roundPixels=p,m=u(m,0,1),T=u(T,0,1),this.lerp.set(m,T),this.followOffset.set(E,P);var w=this.width/2,A=this.height/2,b=c.x-E,O=c.y-P;return this.midPoint.set(b,O),this.scrollX=b-w,this.scrollY=O-A,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(c,p){this.visible&&(this.rotateToEffect.update(c,p),this.panEffect.update(c,p),this.zoomEffect.update(c,p),this.shakeEffect.update(c,p),this.flashEffect.update(c,p),this.fadeEffect.update(c,p))},destroy:function(){this.resetFX(),g.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});C.exports=v}),32743:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(38058),y=s(83419),u=s(95540),l=s(37277),h=s(37303),r=s(97480),o=s(44594),d=new y({initialize:function(f){this.scene=f,this.systems=f.sys,this.roundPixels=f.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,f.sys.events.once(o.BOOT,this.boot,this),f.sys.events.on(o.START,this.start,this)},boot:function(){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new g(0,0,a.scale.width,a.scale.height).setScene(this.scene),a.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){if(!this.main){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0]}var f=this.systems.events;f.on(o.UPDATE,this.update,this),f.once(o.SHUTDOWN,this.shutdown,this)},add:function(a,f,v,c,p,m){a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=this.scene.sys.scale.width),c===void 0&&(c=this.scene.sys.scale.height),p===void 0&&(p=!1),m===void 0&&(m="");var T=new g(a,f,v,c);return T.setName(m),T.setScene(this.scene),T.setRoundPixels(this.roundPixels),T.id=this.getNextID(),this.cameras.push(T),p&&(this.main=T),T},addExisting:function(a,f){f===void 0&&(f=!1);var v=this.cameras.indexOf(a);return v===-1?(a.id=this.getNextID(),a.setRoundPixels(this.roundPixels),this.cameras.push(a),f&&(this.main=a),a):null},getNextID:function(){for(var a=this.cameras,f=1,v=0;v<32;v++){for(var c=!1,p=0;p<a.length;p++){var m=a[p];if(m&&m.id===f){c=!0;continue}}if(c)f=f<<1;else return f}return 0},getTotal:function(a){a===void 0&&(a=!1);for(var f=0,v=this.cameras,c=0;c<v.length;c++){var p=v[c];(!a||a&&p.visible)&&f++}return f},fromJSON:function(a){Array.isArray(a)||(a=[a]);for(var f=this.scene.sys.scale.width,v=this.scene.sys.scale.height,c=0;c<a.length;c++){var p=a[c],m=u(p,"x",0),T=u(p,"y",0),E=u(p,"width",f),P=u(p,"height",v),w=this.add(m,T,E,P);w.name=u(p,"name",""),w.zoom=u(p,"zoom",1),w.rotation=u(p,"rotation",0),w.scrollX=u(p,"scrollX",0),w.scrollY=u(p,"scrollY",0),w.roundPixels=u(p,"roundPixels",!1),w.visible=u(p,"visible",!0);var A=u(p,"backgroundColor",!1);A&&w.setBackgroundColor(A);var b=u(p,"bounds",null);if(b){var O=u(b,"x",0),I=u(b,"y",0),D=u(b,"width",f),B=u(b,"height",v);w.setBounds(O,I,D,B)}}return this},getCamera:function(a){for(var f=this.cameras,v=0;v<f.length;v++)if(f[v].name===a)return f[v];return null},getCamerasBelowPointer:function(a){for(var f=this.cameras,v=a.x,c=a.y,p=[],m=0;m<f.length;m++){var T=f[m];T.visible&&T.inputEnabled&&h(T,v,c)&&p.unshift(T)}return p},remove:function(a,f){f===void 0&&(f=!0),Array.isArray(a)||(a=[a]);for(var v=0,c=this.cameras,p=0;p<a.length;p++){var m=c.indexOf(a[p]);m!==-1&&(f?c[m].destroy():c[m].renderList=[],c.splice(m,1),v++)}return!this.main&&c[0]&&(this.main=c[0]),v},render:function(a,f){for(var v=this.scene,c=this.cameras,p=0;p<c.length;p++){var m=c[p];if(m.visible&&m.alpha>0){m.preRender();var T=this.getVisibleChildren(f.getChildren(),m);a.render(v,T,m)}}},getVisibleChildren:function(a,f){return a.filter(function(v){return v.willRender(f)})},resetAll:function(){for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(a,f){for(var v=0;v<this.cameras.length;v++)this.cameras[v].update(a,f)},onResize:function(a,f,v,c,p){for(var m=0;m<this.cameras.length;m++){var T=this.cameras[m];T._x===0&&T._y===0&&T._width===c&&T._height===p&&T.setSize(f.width,f.height)}},resize:function(a,f){for(var v=0;v<this.cameras.length;v++)this.cameras[v].setSize(a,f)},shutdown:function(){this.main=void 0;for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();this.cameras=[];var f=this.systems.events;f.off(o.UPDATE,this.update,this),f.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(o.START,this.start,this),this.systems.events.off(o.DESTROY,this.destroy,this),this.systems.game.scale.off(r.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});l.register("CameraManager",d,"cameras"),C.exports=d}),5020:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(19715),l=new y({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,r,o,d,a,f,v,c){if(h===void 0&&(h=!0),r===void 0&&(r=1e3),o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=!1),v===void 0&&(v=null),c===void 0&&(c=this.camera.scene),!f&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=h,this.progress=0,this.red=o,this.green=d,this.blue=a,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=c;var p=h?u.FADE_OUT_START:u.FADE_IN_START;return this.camera.emit(p,this.camera,this,r,o,d,a),this.camera},update:function(h,r){this.isRunning&&(this._elapsed+=r,this.progress=g(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera,d=this.red/255,a=this.green/255,f=this.blue/255;return h.drawFillRect(o.x,o.y,o.width,o.height,r(f,a,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?u.FADE_OUT_COMPLETE:u.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});C.exports=l}),10662:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(19715),l=new y({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(h,r,o,d,a,f,v){return h===void 0&&(h=250),r===void 0&&(r=255),o===void 0&&(o=255),d===void 0&&(d=255),a===void 0&&(a=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),!a&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=r,this.green=o,this.blue=d,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(u.FLASH_START,this.camera,this,h,r,o,d),this.camera)},update:function(h,r){this.isRunning&&(this._elapsed+=r,this.progress=g(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning)return!1;var o=this.camera,d=this.red/255,a=this.green/255,f=this.blue/255;return h.drawFillRect(o.x,o.y,o.width,o.height,r(f,a,d,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});C.exports=l}),20359:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(62640),l=s(19715),h=s(26099),r=new y({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,d,a,f,v,c,p){a===void 0&&(a=1e3),f===void 0&&(f=u.Linear),v===void 0&&(v=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene);var m=this.camera;return!v&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source.set(m.scrollX,m.scrollY),this.destination.set(o,d),m.getScroll(o,d,this.current),typeof f=="string"&&u.hasOwnProperty(f)?this.ease=u[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(l.PAN_START,this.camera,this,a,o,d)),m},update:function(o,d){if(this.isRunning){this._elapsed+=d;var a=g(this._elapsed/this.duration,0,1);this.progress=a;var f=this.camera;if(this._elapsed<this.duration){var v=this.ease(a);f.getScroll(this.destination.x,this.destination.y,this.current);var c=this.source.x+(this.current.x-this.source.x)*v,p=this.source.y+(this.current.y-this.source.y)*v;f.setScroll(c,p),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,a,c,p)}else f.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,a,f.scrollX,f.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});C.exports=r}),34208:((C,R,s)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var g=s(45319),y=s(83419),u=s(19715),l=s(62640),h=new y({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,o,d,a,f,v,c){d===void 0&&(d=1e3),a===void 0&&(a=l.Linear),f===void 0&&(f=!1),v===void 0&&(v=null),c===void 0&&(c=this.camera.scene),o===void 0&&(o=!1),this.shortestPath=o;var p=r;r<0?(p=-1*r,this.clockwise=!1):this.clockwise=!0;var m=360*Math.PI/180;p=p-Math.floor(p/m)*m;var T=this.camera;if(!f&&this.isRunning)return T;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=T.rotation,this.destination=p,typeof a=="string"&&l.hasOwnProperty(a)?this.ease=l[a]:typeof a=="function"&&(this.ease=a),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=c,this.shortestPath){var E=0,P=0;this.destination>this.source?E=Math.abs(this.destination-this.source):E=Math.abs(this.destination+m)-this.source,this.source>this.destination?P=Math.abs(this.source-this.destination):P=Math.abs(this.source+m)-this.destination,E<P?this.clockwise=!0:E>P&&(this.clockwise=!1)}return this.camera.emit(u.ROTATE_START,this.camera,this,d,p),T},update:function(r,o){if(this.isRunning){this._elapsed+=o;var d=g(this._elapsed/this.duration,0,1);this.progress=d;var a=this.camera;if(this._elapsed<this.duration){var f=this.ease(d);this.current=a.rotation;var v=0,c=360*Math.PI/180,p=this.destination,m=this.current;this.clockwise===!1&&(p=this.current,m=this.destination),p>=m?v=Math.abs(p-m):v=Math.abs(p+c)-m;var T=0;this.clockwise?T=a.rotation+v*f:T=a.rotation-v*f,a.rotation=T,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,d,T)}else a.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});C.exports=h}),30330:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(19715),l=s(26099),h=new y({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.intensity=new l,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,o,d,a,f){return r===void 0&&(r=100),o===void 0&&(o=.05),d===void 0&&(d=!1),a===void 0&&(a=null),f===void 0&&(f=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof o=="number"?this.intensity.set(o):this.intensity.set(o.x,o.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=a,this._onUpdateScope=f,this.camera.emit(u.SHAKE_START,this.camera,this,r,o),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,o){if(this.isRunning)if(this._elapsed+=o,this.progress=g(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,a=this.camera.width,f=this.camera.height,v=this.camera.zoom;this._offsetX=(Math.random()*d.x*a*2-d.x*a)*v,this._offsetY=(Math.random()*d.y*f*2-d.y*f)*v,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});C.exports=h}),45641:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(62640),l=s(19715),h=new y({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,o,d,a,f,v){o===void 0&&(o=1e3),d===void 0&&(d=u.Linear),a===void 0&&(a=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene);var c=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source=c.zoom,this.destination=r,typeof d=="string"&&u.hasOwnProperty(d)?this.ease=u[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(l.ZOOM_START,this.camera,this,o,r)),c},update:function(r,o){this.isRunning&&(this._elapsed+=o,this.progress=g(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});C.exports=h}),20052:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Fade:s(5020),Flash:s(10662),Pan:s(20359),Shake:s(30330),RotateTo:s(34208),Zoom:s(45641)}}),16438:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="cameradestroy"}),32726:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerafadeincomplete"}),87807:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerafadeinstart"}),45917:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerafadeoutcomplete"}),95666:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerafadeoutstart"}),47056:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="cameraflashcomplete"}),91261:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="cameraflashstart"}),45047:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="followupdate"}),81927:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerapancomplete"}),74264:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerapanstart"}),54419:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="postrender"}),79330:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="prerender"}),93183:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerarotatecomplete"}),80112:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerarotatestart"}),62252:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerashakecomplete"}),86017:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerashakestart"}),539:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerazoomcomplete"}),51892:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="camerazoomstart"}),19715:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={DESTROY:s(16438),FADE_IN_COMPLETE:s(32726),FADE_IN_START:s(87807),FADE_OUT_COMPLETE:s(45917),FADE_OUT_START:s(95666),FLASH_COMPLETE:s(47056),FLASH_START:s(91261),FOLLOW_UPDATE:s(45047),PAN_COMPLETE:s(81927),PAN_START:s(74264),POST_RENDER:s(54419),PRE_RENDER:s(79330),ROTATE_COMPLETE:s(93183),ROTATE_START:s(80112),SHAKE_COMPLETE:s(62252),SHAKE_START:s(86017),ZOOM_COMPLETE:s(539),ZOOM_START:s(51892)}}),87969:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Camera:s(38058),BaseCamera:s(71911),CameraManager:s(32743),Effects:s(20052),Events:s(19715)}}),63091:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(35154),u=new g({initialize:function(h){this.camera=y(h,"camera",null),this.left=y(h,"left",null),this.right=y(h,"right",null),this.up=y(h,"up",null),this.down=y(h,"down",null),this.zoomIn=y(h,"zoomIn",null),this.zoomOut=y(h,"zoomOut",null),this.zoomSpeed=y(h,"zoomSpeed",.01),this.minZoom=y(h,"minZoom",.001),this.maxZoom=y(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=y(h,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=y(h,"speed.x",0),this.speedY=y(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(this.active){l===void 0&&(l=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*l|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*l|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*l|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*l|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});C.exports=u}),58818:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(35154),u=new g({initialize:function(h){this.camera=y(h,"camera",null),this.left=y(h,"left",null),this.right=y(h,"right",null),this.up=y(h,"up",null),this.down=y(h,"down",null),this.zoomIn=y(h,"zoomIn",null),this.zoomOut=y(h,"zoomOut",null),this.zoomSpeed=y(h,"zoomSpeed",.01),this.minZoom=y(h,"minZoom",.001),this.maxZoom=y(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=y(h,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=y(h,"acceleration.x",0),this.accelY=y(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var o=y(h,"drag",null);typeof o=="number"?(this.dragX=o,this.dragY=o):(this.dragX=y(h,"drag.x",0),this.dragY=y(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var d=y(h,"maxSpeed",null);typeof d=="number"?(this.maxSpeedX=d,this.maxSpeedY=d):(this.maxSpeedX=y(h,"maxSpeed.x",0),this.maxSpeedY=y(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(this.active){l===void 0&&(l=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*l,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*l,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*l,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*l,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*l|0),this._speedY!==0&&(h.scrollY-=this._speedY*l|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});C.exports=u}),38865:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={FixedKeyControl:s(63091),SmoothedKeyControl:s(58818)}}),26638:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Controls:s(38865),Scene2D:s(87969)}}),8054:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={VERSION:"3.87",LOG_VERSION:"v387",BlendModes:s(10312),ScaleModes:s(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};C.exports=g}),69547:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(8054),u=s(42363),l=s(82264),h=s(95540),r=s(35154),o=s(41212),d=s(29747),a=s(75508),f=s(36060),v=s(80333),c=new g({initialize:function(m){m===void 0&&(m={});var T=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],E="#ffffff",P=r(m,"scale",null);this.width=r(P,"width",1024,m),this.height=r(P,"height",768,m),this.zoom=r(P,"zoom",1,m),this.parent=r(P,"parent",void 0,m),this.scaleMode=r(P,P?"mode":"scaleMode",0,m),this.expandParent=r(P,"expandParent",!0,m),this.autoRound=r(P,"autoRound",!1,m),this.autoCenter=r(P,"autoCenter",0,m),this.resizeInterval=r(P,"resizeInterval",500,m),this.fullscreenTarget=r(P,"fullscreenTarget",null,m),this.minWidth=r(P,"min.width",0,m),this.maxWidth=r(P,"max.width",0,m),this.minHeight=r(P,"min.height",0,m),this.maxHeight=r(P,"max.height",0,m),this.snapWidth=r(P,"snap.width",0,m),this.snapHeight=r(P,"snap.height",0,m),this.renderType=r(m,"type",y.AUTO),this.canvas=r(m,"canvas",null),this.context=r(m,"context",null),this.canvasStyle=r(m,"canvasStyle",null),this.customEnvironment=r(m,"customEnvironment",!1),this.sceneConfig=r(m,"scene",null),this.seed=r(m,"seed",[(Date.now()*Math.random()).toString()]),a.RND=new a.RandomDataGenerator(this.seed),this.gameTitle=r(m,"title",""),this.gameURL=r(m,"url","https://phaser.io/"+y.LOG_VERSION),this.gameVersion=r(m,"version",""),this.autoFocus=r(m,"autoFocus",!0),this.stableSort=r(m,"stableSort",-1),this.stableSort===-1&&(this.stableSort=l.browser.es2019?1:0),l.features.stableSort=this.stableSort,this.domCreateContainer=r(m,"dom.createContainer",!1),this.domPointerEvents=r(m,"dom.pointerEvents","none"),this.inputKeyboard=r(m,"input.keyboard",!0),this.inputKeyboardEventTarget=r(m,"input.keyboard.target",window),this.inputKeyboardCapture=r(m,"input.keyboard.capture",[]),this.inputMouse=r(m,"input.mouse",!0),this.inputMouseEventTarget=r(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=r(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=r(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=r(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=r(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=r(m,"input.touch",l.input.touch),this.inputTouchEventTarget=r(m,"input.touch.target",null),this.inputTouchCapture=r(m,"input.touch.capture",!0),this.inputActivePointers=r(m,"input.activePointers",1),this.inputSmoothFactor=r(m,"input.smoothFactor",0),this.inputWindowEvents=r(m,"input.windowEvents",!0),this.inputGamepad=r(m,"input.gamepad",!1),this.inputGamepadEventTarget=r(m,"input.gamepad.target",window),this.disableContextMenu=r(m,"disableContextMenu",!1),this.audio=r(m,"audio",{}),this.hideBanner=r(m,"banner",null)===!1,this.hidePhaser=r(m,"banner.hidePhaser",!1),this.bannerTextColor=r(m,"banner.text",E),this.bannerBackgroundColor=r(m,"banner.background",T),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=r(m,"fps",null),this.disablePreFX=r(m,"disablePreFX",!1),this.disablePostFX=r(m,"disablePostFX",!1);var w=r(m,"render",null);this.pipeline=r(w,"pipeline",null,m),this.autoMobilePipeline=r(w,"autoMobilePipeline",!0,m),this.defaultPipeline=r(w,"defaultPipeline",f.MULTI_PIPELINE,m),this.antialias=r(w,"antialias",!0,m),this.antialiasGL=r(w,"antialiasGL",!0,m),this.mipmapFilter=r(w,"mipmapFilter","",m),this.desynchronized=r(w,"desynchronized",!1,m),this.roundPixels=r(w,"roundPixels",!1,m),this.pixelArt=r(w,"pixelArt",this.zoom!==1,m),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=r(w,"transparent",!1,m),this.clearBeforeRender=r(w,"clearBeforeRender",!0,m),this.preserveDrawingBuffer=r(w,"preserveDrawingBuffer",!1,m),this.premultipliedAlpha=r(w,"premultipliedAlpha",!0,m),this.failIfMajorPerformanceCaveat=r(w,"failIfMajorPerformanceCaveat",!1,m),this.powerPreference=r(w,"powerPreference","default",m),this.batchSize=r(w,"batchSize",4096,m),this.maxTextures=r(w,"maxTextures",-1,m),this.maxLights=r(w,"maxLights",10,m);var A=r(m,"backgroundColor",0);this.backgroundColor=v(A),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=r(m,"callbacks.preBoot",d),this.postBoot=r(m,"callbacks.postBoot",d),this.physics=r(m,"physics",{}),this.defaultPhysicsSystem=r(this.physics,"default",!1),this.loaderBaseURL=r(m,"loader.baseURL",""),this.loaderPath=r(m,"loader.path",""),this.loaderMaxParallelDownloads=r(m,"loader.maxParallelDownloads",l.os.android?6:32),this.loaderCrossOrigin=r(m,"loader.crossOrigin",void 0),this.loaderResponseType=r(m,"loader.responseType",""),this.loaderAsync=r(m,"loader.async",!0),this.loaderUser=r(m,"loader.user",""),this.loaderPassword=r(m,"loader.password",""),this.loaderTimeout=r(m,"loader.timeout",0),this.loaderMaxRetries=r(m,"loader.maxRetries",2),this.loaderWithCredentials=r(m,"loader.withCredentials",!1),this.loaderImageLoadType=r(m,"loader.imageLoadType","XHR"),this.loaderLocalScheme=r(m,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=r(m,"fx.glow.quality",.1),this.glowFXDistance=r(m,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var b=r(m,"plugins",null),O=u.DefaultScene;b&&(Array.isArray(b)?this.defaultPlugins=b:o(b)&&(this.installGlobalPlugins=h(b,"global",[]),this.installScenePlugins=h(b,"scene",[]),Array.isArray(b.default)?O=b.default:Array.isArray(b.defaultMerge)&&(O=O.concat(b.defaultMerge)))),this.defaultPlugins=O;var I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=r(m,"images.default",I+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=r(m,"images.missing",I+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=r(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=y.WEBGL:window.FORCE_CANVAS&&(this.renderType=y.CANVAS))}});C.exports=c}),86054:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20623),y=s(27919),u=s(8054),l=s(89357),h=function(r){var o=r.config;if((o.customEnvironment||o.canvas)&&o.renderType===u.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!o.customEnvironment&&!o.canvas&&o.renderType!==u.HEADLESS)if(o.renderType===u.AUTO&&(o.renderType=l.webGL?u.WEBGL:u.CANVAS),o.renderType===u.WEBGL){if(!l.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(o.renderType===u.CANVAS){if(!l.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+o.renderType);o.antialias||y.disableSmoothing();var d=r.scale.baseSize,a=d.width,f=d.height;if(o.canvas?(r.canvas=o.canvas,r.canvas.width=a,r.canvas.height=f):r.canvas=y.create(r,a,f,o.renderType),o.canvasStyle&&(r.canvas.style=o.canvasStyle),o.antialias||g.setCrisp(r.canvas),o.renderType!==u.HEADLESS){var v,c;v=s(68627),c=s(74797),o.renderType===u.WEBGL?r.renderer=new c(r):(r.renderer=new v(r),r.context=r.renderer.gameContext)}};C.exports=h}),96391:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(8054),y=function(u){var l=u.config;if(!l.hideBanner){var h="WebGL";l.renderType===g.CANVAS?h="Canvas":l.renderType===g.HEADLESS&&(h="Headless");var r=l.audio,o=u.device.audio,d;if(o.webAudio&&!r.disableWebAudio?d="Web Audio":r.noAudio||!o.webAudio&&!o.audioData?d="No Audio":d="HTML5 Audio",u.device.browser.ie)window.console&&console.log("Phaser v"+g.VERSION+" / https://phaser.io");else{var a="",f=[a];if(Array.isArray(l.bannerBackgroundColor)){var v;l.bannerBackgroundColor.forEach(function(p){a=a.concat("%c "),f.push("background: "+p),v=p}),f[f.length-1]="color: "+l.bannerTextColor+"; background: "+v}else a=a.concat("%c "),f.push("color: "+l.bannerTextColor+"; background: "+l.bannerBackgroundColor);f.push("background: transparent"),l.gameTitle&&(a=a.concat(l.gameTitle),l.gameVersion&&(a=a.concat(" v"+l.gameVersion)),l.hidePhaser||(a=a.concat(" / ")));var c="";l.hidePhaser||(a=a.concat("Phaser v"+g.VERSION+c+" ("+h+" | "+d+")")),a=a.concat(" %c "+l.gameURL),f[0]=a,console.log.apply(console,f)}}};C.exports=y}),50127:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40366),y=s(60848),u=s(24047),l=s(27919),h=s(83419),r=s(69547),o=s(83719),d=s(86054),a=s(45893),f=s(96391),v=s(82264),c=s(57264),p=s(50792),m=s(8443),T=s(7003),E=s(37277),P=s(77332),w=s(76531),A=s(60903),b=s(69442),O=s(17130),I=s(65898),D=s(51085),B=s(14747),k=new h({initialize:function(H){this.config=new r(H),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new p,this.anims=new y(this),this.textures=new O(this),this.cache=new u(this),this.registry=new a(this,new p),this.input=new T(this,this.config),this.scene=new A(this,this.config.sceneConfig),this.device=v,this.scale=new w(this,this.config),this.sound=null,this.sound=B.create(this),this.loop=new I(this,this.config.fps),this.plugins=new P(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,c(this.boot.bind(this))},boot:function(){if(!E.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),o(this),f(this),g(this.canvas,this.config.parent),this.textures.once(b.READY,this.texturesReady,this),this.events.emit(m.BOOT)},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),D(this);var N=this.events;N.on(m.HIDDEN,this.onHidden,this),N.on(m.VISIBLE,this.onVisible,this),N.on(m.BLUR,this.onBlur,this),N.on(m.FOCUS,this.onFocus,this)},step:function(N,H){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var $=this.events;$.emit(m.PRE_STEP,N,H),$.emit(m.STEP,N,H),this.scene.update(N,H),$.emit(m.POST_STEP,N,H);var J=this.renderer;J.preRender(),$.emit(m.PRE_RENDER,J,N,H),this.scene.render(J),J.postRender(),$.emit(m.POST_RENDER,J,N,H)}},headlessStep:function(N,H){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var $=this.events;$.emit(m.PRE_STEP,N,H),$.emit(m.STEP,N,H),this.scene.update(N,H),$.emit(m.POST_STEP,N,H),this.scene.isProcessing=!1,$.emit(m.PRE_RENDER,null,N,H),$.emit(m.POST_RENDER,null,N,H)}},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},pause:function(){var N=this.isPaused;this.isPaused=!0,N||this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME,this.loop.pauseDuration)},resume:function(){var N=this.isPaused;this.isPaused=!1,N&&this.events.emit(m.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(N,H){H===void 0&&(H=!1),this.pendingDestroy=!0,this.removeCanvas=N,this.noReturn=H},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(l.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});C.exports=k}),65898:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(35154),u=s(29747),l=s(43092),h=new g({initialize:function(o,d){this.game=o,this.raf=new l,this.started=!1,this.running=!1,this.minFps=y(d,"min",5),this.targetFps=y(d,"target",60),this.fpsLimit=y(d,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=u,this.forceSetTimeOut=y(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=y(d,"deltaHistory",10),this.panicMax=y(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=y(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=Math.min(this._target,this.deltaHistory[o]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r;var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target)},smoothDelta:function(r){var o=this.deltaIndex,d=this.deltaHistory,a=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,r=Math.min(r,this._target)),r>this._min&&(r=d[o],r=Math.min(r,this._min)),d[o]=r,this.deltaIndex++,this.deltaIndex>=a&&(this.deltaIndex=0);for(var f=0,v=0;v<a;v++)f+=d[v];return f/=a,f},updateFPS:function(r){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0},stepLimitFPS:function(r){this.now=r;var o=Math.max(0,r-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta+=o,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(r,this.delta),this.delta=0),this.lastTime=r,this.frame++},step:function(r){this.now=r;var o=Math.max(0,r-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta=o,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.callback(r,o),this.lastTime=r,this.frame++},tick:function(){var r=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(r):this.step(r)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){r===void 0&&(r=!1);var o=window.performance.now();if(!this.running){r&&(this.startTime+=-this.lastTime+(this.lastTime+o));var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=o+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});C.exports=h}),51085:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(8443),y=function(u){var l,h=u.events;if(document.hidden!==void 0)l="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},l=d+"visibilitychange")})}var o=function(d){document.hidden||d.type==="pause"?h.emit(g.HIDDEN):h.emit(g.VISIBLE)};l&&document.addEventListener(l,o,!1),window.onblur=function(){h.emit(g.BLUR)},window.onfocus=function(){h.emit(g.FOCUS)},window.focus&&u.config.autoFocus&&window.focus()};C.exports=y}),97217:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="blur"}),47548:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="boot"}),19814:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="contextlost"}),68446:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="destroy"}),41700:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="focus"}),25432:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="hidden"}),65942:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pause"}),59211:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="postrender"}),47789:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="poststep"}),39066:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="prerender"}),460:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="prestep"}),16175:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="ready"}),42331:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resume"}),11966:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="step"}),32969:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="systemready"}),94830:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="visible"}),8443:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BLUR:s(97217),BOOT:s(47548),CONTEXT_LOST:s(19814),DESTROY:s(68446),FOCUS:s(41700),HIDDEN:s(25432),PAUSE:s(65942),POST_RENDER:s(59211),POST_STEP:s(47789),PRE_RENDER:s(39066),PRE_STEP:s(460),READY:s(16175),RESUME:s(42331),STEP:s(11966),SYSTEM_READY:s(32969),VISIBLE:s(94830)}}),42857:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Config:s(69547),CreateRenderer:s(86054),DebugHeader:s(96391),Events:s(8443),TimeStep:s(65898),VisibilityHandler:s(51085)}}),99584:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(5290),y=s(27919),u=s(35154),l=function(h){var r=u(h,"data",[]),o=u(h,"canvas",null),d=u(h,"palette",g),a=u(h,"pixelWidth",1),f=u(h,"pixelHeight",a),v=u(h,"resizeCanvas",!0),c=u(h,"clearCanvas",!0),p=u(h,"preRender",null),m=u(h,"postRender",null),T=Math.floor(Math.abs(r[0].length*a)),E=Math.floor(Math.abs(r.length*f));o||(o=y.create2D(this,T,E),v=!1,c=!1),v&&(o.width=T,o.height=E);var P=o.getContext("2d",{willReadFrequently:!0});c&&P.clearRect(0,0,T,E),p&&p(o,P);for(var w=0;w<r.length;w++)for(var A=r[w],b=0;b<A.length;b++){var O=A[b];O!=="."&&O!==" "&&(P.fillStyle=d[O],P.fillRect(b*a,w*f,a,f))}return m&&m(o,P),o};C.exports=l}),15822:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={GenerateTexture:s(99584),Palettes:s(57763)}}),5290:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}}),23816:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}}),9866:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}}),77552:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}}),92259:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}}),57763:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ARNE16:s(5290),C64:s(23816),CGA:s(9866),JMP:s(77552),MSX:s(92259)}}),46728:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(36316),u=s(80021),l=s(26099),h=new g({Extends:u,initialize:function(o,d,a,f){u.call(this,"CubicBezierCurve"),Array.isArray(o)&&(f=new l(o[6],o[7]),a=new l(o[4],o[5]),d=new l(o[2],o[3]),o=new l(o[0],o[1])),this.p0=o,this.p1=d,this.p2=a,this.p3=f},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){o===void 0&&(o=new l);var d=this.p0,a=this.p1,f=this.p2,v=this.p3;return o.set(y(r,d.x,a.x,f.x,v.x),y(r,d.y,a.y,f.y,v.y))},draw:function(r,o){o===void 0&&(o=32);var d=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var a=1;a<d.length;a++)r.lineTo(d[a].x,d[a].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(r){var o=r.points,d=new l(o[0],o[1]),a=new l(o[2],o[3]),f=new l(o[4],o[5]),v=new l(o[6],o[7]);return new h(d,a,f,v)},C.exports=h}),80021:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(19217),u=s(87841),l=s(26099),h=new g({initialize:function(o){this.type=o,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new l,this._tmpVec2B=new l},draw:function(r,o){return o===void 0&&(o=32),r.strokePoints(this.getPoints(o))},getBounds:function(r,o){r||(r=new u),o===void 0&&(o=16);var d=this.getLength();o>d&&(o=d/2);var a=Math.max(1,Math.round(d/o));return y(this.getSpacedPoints(a),r)},getDistancePoints:function(r){var o=this.getLength(),d=Math.max(1,o/r);return this.getSpacedPoints(d)},getEndPoint:function(r){return r===void 0&&(r=new l),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o=[],d,a=this.getPoint(0,this._tmpVec2A),f=0;o.push(0);for(var v=1;v<=r;v++)d=this.getPoint(v/r,this._tmpVec2B),f+=d.distance(a),o.push(f),a.copy(d);return this.cacheArcLengths=o,o},getPointAt:function(r,o){var d=this.getUtoTmapping(r);return this.getPoint(d,o)},getPoints:function(r,o,d){d===void 0&&(d=[]),r||(o?r=this.getLength()/o:r=this.defaultDivisions);for(var a=0;a<=r;a++)d.push(this.getPoint(a/r));return d},getRandomPoint:function(r){return r===void 0&&(r=new l),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,o,d){d===void 0&&(d=[]),r||(o?r=this.getLength()/o:r=this.defaultDivisions);for(var a=0;a<=r;a++){var f=this.getUtoTmapping(a/r,null,r);d.push(this.getPoint(f))}return d},getStartPoint:function(r){return r===void 0&&(r=new l),this.getPointAt(0,r)},getTangent:function(r,o){o===void 0&&(o=new l);var d=1e-4,a=r-d,f=r+d;return a<0&&(a=0),f>1&&(f=1),this.getPoint(a,this._tmpVec2A),this.getPoint(f,o),o.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,o){var d=this.getUtoTmapping(r);return this.getTangent(d,o)},getTFromDistance:function(r,o){return r<=0?0:this.getUtoTmapping(0,r,o)},getUtoTmapping:function(r,o,d){var a=this.getLengths(d),f=0,v=a.length,c;o?c=Math.min(o,a[v-1]):c=r*a[v-1];for(var p=0,m=v-1,T;p<=m;)if(f=Math.floor(p+(m-p)/2),T=a[f]-c,T<0)p=f+1;else if(T>0)m=f-1;else{m=f;break}if(f=m,a[f]===c)return f/(v-1);var E=a[f],P=a[f+1],w=P-E,A=(c-E)/w;return(f+A)/(v-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});C.exports=h}),73825:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(80021),u=s(39506),l=s(35154),h=s(43396),r=s(26099),o=new g({Extends:y,initialize:function(a,f,v,c,p,m,T,E){if(typeof a=="object"){var P=a;a=l(P,"x",0),f=l(P,"y",0),v=l(P,"xRadius",0),c=l(P,"yRadius",v),p=l(P,"startAngle",0),m=l(P,"endAngle",360),T=l(P,"clockwise",!1),E=l(P,"rotation",0)}else c===void 0&&(c=v),p===void 0&&(p=0),m===void 0&&(m=360),T===void 0&&(T=!1),E===void 0&&(E=0);y.call(this,"EllipseCurve"),this.p0=new r(a,f),this._xRadius=v,this._yRadius=c,this._startAngle=u(p),this._endAngle=u(m),this._clockwise=T,this._rotation=u(E)},getStartPoint:function(d){return d===void 0&&(d=new r),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,a){a===void 0&&(a=new r);for(var f=Math.PI*2,v=this._endAngle-this._startAngle,c=Math.abs(v)<Number.EPSILON;v<0;)v+=f;for(;v>f;)v-=f;v<Number.EPSILON&&(c?v=0:v=f),this._clockwise&&!c&&(v===f?v=-f:v=v-f);var p=this._startAngle+d*v,m=this.p0.x+this._xRadius*Math.cos(p),T=this.p0.y+this._yRadius*Math.sin(p);if(this._rotation!==0){var E=Math.cos(this._rotation),P=Math.sin(this._rotation),w=m-this.p0.x,A=T-this.p0.y;m=w*E-A*P+this.p0.x,T=w*P+A*E+this.p0.y}return a.set(m,T)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return h(this._startAngle)},set:function(d){this._startAngle=u(d)}},endAngle:{get:function(){return h(this._endAngle)},set:function(d){this._endAngle=u(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return h(this._rotation)},set:function(d){this._rotation=u(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});o.fromJSON=function(d){return new o(d)},C.exports=o}),33951:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(80021),u=s(19217),l=s(87841),h=s(26099),r=new g({Extends:y,initialize:function(d,a){y.call(this,"LineCurve"),Array.isArray(d)&&(a=new h(d[2],d[3]),d=new h(d[0],d[1])),this.p0=d,this.p1=a,this.arcLengthDivisions=1},getBounds:function(o){return o===void 0&&(o=new l),u([this.p0,this.p1],o)},getStartPoint:function(o){return o===void 0&&(o=new h),o.copy(this.p0)},getResolution:function(o){return o===void 0&&(o=1),o},getPoint:function(o,d){return d===void 0&&(d=new h),o===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(o).add(this.p0),d)},getPointAt:function(o,d){return this.getPoint(o,d)},getTangent:function(o,d){return d===void 0&&(d=new h),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(o,d,a){var f;if(d){var v=this.getLengths(a),c=v[v.length-1],p=Math.min(d,c);f=p/c}else f=o;return f},draw:function(o){return o.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(o){var d=o.points,a=new h(d[0],d[1]),f=new h(d[2],d[3]);return new r(a,f)},C.exports=r}),14744:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(80021),u=s(32112),l=s(26099),h=new g({Extends:y,initialize:function(o,d,a){y.call(this,"QuadraticBezierCurve"),Array.isArray(o)&&(a=new l(o[4],o[5]),d=new l(o[2],o[3]),o=new l(o[0],o[1])),this.p0=o,this.p1=d,this.p2=a},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){o===void 0&&(o=new l);var d=this.p0,a=this.p1,f=this.p2;return o.set(u(r,d.x,a.x,f.x),u(r,d.y,a.y,f.y))},draw:function(r,o){o===void 0&&(o=32);var d=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var a=1;a<d.length;a++)r.lineTo(d[a].x,d[a].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(r){var o=r.points,d=new l(o[0],o[1]),a=new l(o[2],o[3]),f=new l(o[4],o[5]);return new h(d,a,f)},C.exports=h}),42534:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87842),y=s(83419),u=s(80021),l=s(26099),h=new y({Extends:u,initialize:function(o){o===void 0&&(o=[]),u.call(this,"SplineCurve"),this.points=[],this.addPoints(o)},addPoints:function(r){for(var o=0;o<r.length;o++){var d=new l;typeof r[o]=="number"?(d.x=r[o],d.y=r[o+1],o++):Array.isArray(r[o])?(d.x=r[o][0],d.y=r[o][1]):(d.x=r[o].x,d.y=r[o].y),this.points.push(d)}return this},addPoint:function(r,o){var d=new l(r,o);return this.points.push(d),d},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,o){o===void 0&&(o=new l);var d=this.points,a=(d.length-1)*r,f=Math.floor(a),v=a-f,c=d[f===0?f:f-1],p=d[f],m=d[f>d.length-2?d.length-1:f+1],T=d[f>d.length-3?d.length-1:f+2];return o.set(g(v,c.x,p.x,m.x,T.x),g(v,c.y,p.y,m.y,T.y))},toJSON:function(){for(var r=[],o=0;o<this.points.length;o++)r.push(this.points[o].x),r.push(this.points[o].y);return{type:this.type,points:r}}});h.fromJSON=function(r){return new h(r.points)},C.exports=h}),25410:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Path:s(46669),MoveTo:s(68618),CubicBezier:s(46728),Curve:s(80021),Ellipse:s(73825),Line:s(33951),QuadraticBezier:s(14744),Spline:s(42534)}}),68618:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(26099),u=new g({initialize:function(h,r){this.active=!1,this.p0=new y(h,r)},getPoint:function(l,h){return h===void 0&&(h=new y),h.copy(this.p0)},getPointAt:function(l,h){return this.getPoint(l,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});C.exports=u}),46669:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(46728),u=s(73825),l=s(39429),h=s(33951),r=s(68618),o=s(14744),d=s(87841),a=s(42534),f=s(26099),v=s(36383),c=new g({initialize:function(m,T){m===void 0&&(m=0),T===void 0&&(T=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,typeof m=="object"?this.fromJSON(m):this.startPoint.set(m,T)},add:function(p){return this.curves.push(p),this},circleTo:function(p,m,T){return m===void 0&&(m=!1),this.ellipseTo(p,p,0,360,m,T)},closePath:function(){var p=this.curves[0].getPoint(0),m=this.curves[this.curves.length-1].getPoint(1);return p.equals(m)||this.curves.push(new h(m,p)),this},cubicBezierTo:function(p,m,T,E,P,w){var A=this.getEndPoint(),b,O,I;return p instanceof f?(b=p,O=m,I=T):(b=new f(T,E),O=new f(P,w),I=new f(p,m)),this.add(new y(A,b,O,I))},quadraticBezierTo:function(p,m,T,E){var P=this.getEndPoint(),w,A;return p instanceof f?(w=p,A=m):(w=new f(T,E),A=new f(p,m)),this.add(new o(P,w,A))},draw:function(p,m){for(var T=0;T<this.curves.length;T++){var E=this.curves[T];E.active&&E.draw(p,m)}return p},ellipseTo:function(p,m,T,E,P,w){var A=new u(0,0,p,m,T,E,P,w),b=this.getEndPoint(this._tmpVec2A),O=A.getStartPoint(this._tmpVec2B);return b.subtract(O),A.x=b.x,A.y=b.y,this.add(A)},fromJSON:function(p){this.curves=[],this.cacheLengths=[],this.startPoint.set(p.x,p.y),this.autoClose=p.autoClose;for(var m=0;m<p.curves.length;m++){var T=p.curves[m];switch(T.type){case"LineCurve":this.add(h.fromJSON(T));break;case"EllipseCurve":this.add(u.fromJSON(T));break;case"SplineCurve":this.add(a.fromJSON(T));break;case"CubicBezierCurve":this.add(y.fromJSON(T));break;case"QuadraticBezierCurve":this.add(o.fromJSON(T));break}}return this},getBounds:function(p,m){p===void 0&&(p=new d),m===void 0&&(m=16),p.x=Number.MAX_VALUE,p.y=Number.MAX_VALUE;for(var T=new d,E=v.MIN_SAFE_INTEGER,P=v.MIN_SAFE_INTEGER,w=0;w<this.curves.length;w++){var A=this.curves[w];A.active&&(A.getBounds(T,m),p.x=Math.min(p.x,T.x),p.y=Math.min(p.y,T.y),E=Math.max(E,T.right),P=Math.max(P,T.bottom))}return p.right=E,p.bottom=P,p},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var p=[],m=0,T=0;T<this.curves.length;T++)m+=this.curves[T].getLength(),p.push(m);return this.cacheLengths=p,p},getCurveAt:function(p){for(var m=p*this.getLength(),T=this.getCurveLengths(),E=0;E<T.length;){if(T[E]>=m)return this.curves[E];E++}return null},getEndPoint:function(p){return p===void 0&&(p=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,p):p.copy(this.startPoint),p},getLength:function(){var p=this.getCurveLengths();return p[p.length-1]},getPoint:function(p,m){m===void 0&&(m=new f);for(var T=p*this.getLength(),E=this.getCurveLengths(),P=0;P<E.length;){if(E[P]>=T){var w=E[P]-T,A=this.curves[P],b=A.getLength(),O=b===0?0:1-w/b;return A.getPointAt(O,m)}P++}return null},getPoints:function(p,m){!p&&!m&&(p=this.defaultDivisions);for(var T=[],E,P=0;P<this.curves.length;P++){var w=this.curves[P];if(w.active)for(var A=w.getResolution(p),b=w.getPoints(A,m),O=0;O<b.length;O++){var I=b[O];E&&E.equals(I)||(T.push(I),E=I)}}return this.autoClose&&T.length>1&&!T[T.length-1].equals(T[0])&&T.push(T[0]),T},getRandomPoint:function(p){return p===void 0&&(p=new f),this.getPoint(Math.random(),p)},getSpacedPoints:function(p){p===void 0&&(p=40);for(var m=[],T=0;T<=p;T++)m.push(this.getPoint(T/p));return this.autoClose&&m.push(m[0]),m},getStartPoint:function(p){return p===void 0&&(p=new f),p.copy(this.startPoint)},getTangent:function(p,m){m===void 0&&(m=new f);for(var T=p*this.getLength(),E=this.getCurveLengths(),P=0;P<E.length;){if(E[P]>=T){var w=E[P]-T,A=this.curves[P],b=A.getLength(),O=b===0?0:1-w/b;return A.getTangentAt(O,m)}P++}return null},lineTo:function(p,m){p instanceof f?this._tmpVec2B.copy(p):typeof p=="object"?this._tmpVec2B.setFromObject(p):this._tmpVec2B.set(p,m);var T=this.getEndPoint(this._tmpVec2A);return this.add(new h([T.x,T.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(p){return p.unshift(this.getEndPoint()),this.add(new a(p))},moveTo:function(p,m){return p instanceof f?this.add(new r(p.x,p.y)):this.add(new r(p,m))},toJSON:function(){for(var p=[],m=0;m<this.curves.length;m++)p.push(this.curves[m].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:p}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});l.register("path",function(p,m){return new c(p,m)}),C.exports=c}),45893:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(24882),u=new g({initialize:function(h,r){this.parent=h,this.events=r,r||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(y.DESTROY,this.destroy,this)},get:function(l){var h=this.list;if(Array.isArray(l)){for(var r=[],o=0;o<l.length;o++)r.push(h[l[o]]);return r}else return h[l]},getAll:function(){var l={};for(var h in this.list)this.list.hasOwnProperty(h)&&(l[h]=this.list[h]);return l},query:function(l){var h={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(l)&&(h[r]=this.list[r]);return h},set:function(l,h){if(this._frozen)return this;if(typeof l=="string")return this.setValue(l,h);for(var r in l)this.setValue(r,l[r]);return this},inc:function(l,h){if(this._frozen)return this;h===void 0&&(h=1);var r=this.get(l);return r===void 0&&(r=0),this.set(l,r+h),this},toggle:function(l){return this._frozen?this:(this.set(l,!this.get(l)),this)},setValue:function(l,h){if(this._frozen)return this;if(this.has(l))this.values[l]=h;else{var r=this,o=this.list,d=this.events,a=this.parent;Object.defineProperty(this.values,l,{enumerable:!0,configurable:!0,get:function(){return o[l]},set:function(f){if(!r._frozen){var v=o[l];o[l]=f,d.emit(y.CHANGE_DATA,a,l,f,v),d.emit(y.CHANGE_DATA_KEY+l,a,f,v)}}}),o[l]=h,d.emit(y.SET_DATA,a,l,h)}return this},each:function(l,h){for(var r=[this.parent,null,void 0],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var d in this.list)r[1]=d,r[2]=this.list[d],l.apply(h,r);return this},merge:function(l,h){h===void 0&&(h=!0);for(var r in l)l.hasOwnProperty(r)&&(h||!h&&!this.has(r))&&this.setValue(r,l[r]);return this},remove:function(l){if(this._frozen)return this;if(Array.isArray(l))for(var h=0;h<l.length;h++)this.removeValue(l[h]);else return this.removeValue(l);return this},removeValue:function(l){if(this.has(l)){var h=this.list[l];delete this.list[l],delete this.values[l],this.events.emit(y.REMOVE_DATA,this.parent,l,h)}return this},pop:function(l){var h=void 0;return!this._frozen&&this.has(l)&&(h=this.list[l],delete this.list[l],delete this.values[l],this.events.emit(y.REMOVE_DATA,this.parent,l,h)),h},has:function(l){return this.list.hasOwnProperty(l)},setFreeze:function(l){return this._frozen=l,this},reset:function(){for(var l in this.list)delete this.list[l],delete this.values[l];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(y.CHANGE_DATA),this.events.off(y.SET_DATA),this.events.off(y.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(l){this._frozen=!!l}},count:{get:function(){var l=0;for(var h in this.list)this.list[h]!==void 0&&l++;return l}}});C.exports=u}),63646:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(45893),u=s(37277),l=s(44594),h=new g({Extends:y,initialize:function(o){y.call(this,o,o.sys.events),this.scene=o,this.systems=o.sys,o.sys.events.once(l.BOOT,this.boot,this),o.sys.events.on(l.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){y.prototype.destroy.call(this),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});u.register("DataManagerPlugin",h,"data"),C.exports=h}),10700:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="changedata"}),93608:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="changedata-"}),60883:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="destroy"}),69780:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="removedata"}),22166:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="setdata"}),24882:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={CHANGE_DATA:s(10700),CHANGE_DATA_KEY:s(93608),DESTROY:s(60883),REMOVE_DATA:s(69780),SET_DATA:s(22166)}}),44965:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={DataManager:s(45893),DataManagerPlugin:s(63646),Events:s(24882)}}),7098:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(84148),y={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function u(){if(typeof importScripts=="function")return y;y.audioData=!!window.Audio,y.webAudio=!!(window.AudioContext||window.webkitAudioContext);var l=document.createElement("audio"),h=!!l.canPlayType;try{if(h){var r=function(a,f){var v=l.canPlayType("audio/"+a).replace(/^no$/,"");return f?!!(v||l.canPlayType("audio/"+f).replace(/^no$/,"")):!!v};if(y.ogg=r('ogg; codecs="vorbis"'),y.opus=r('ogg; codecs="opus"',"opus"),y.mp3=r("mpeg"),y.wav=r("wav"),y.m4a=r("x-m4a"),y.aac=r("aac"),y.flac=r("flac","x-flac"),y.webm=r('webm; codecs="vorbis"'),l.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(g.edge)y.dolby=!0;else if(g.safari&&g.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),d=parseInt(RegExp.$2,10);(o===10&&d>=11||o>10)&&(y.dolby=!0)}}}}catch{}return y}C.exports=u()}),84148:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25892),y={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function u(){var l=navigator.userAgent;return/Edg\/\d+/.test(l)?(y.edge=!0,y.es2019=!0):/OPR/.test(l)?(y.opera=!0,y.es2019=!0):/Chrome\/(\d+)/.test(l)&&!g.windowsPhone?(y.chrome=!0,y.chromeVersion=parseInt(RegExp.$1,10),y.es2019=y.chromeVersion>69):/Firefox\D+(\d+)/.test(l)?(y.firefox=!0,y.firefoxVersion=parseInt(RegExp.$1,10),y.es2019=y.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(l)&&g.iOS?(y.mobileSafari=!0,y.es2019=!0):/MSIE (\d+\.\d+);/.test(l)?(y.ie=!0,y.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(l)&&!g.windowsPhone?(y.safari=!0,y.safariVersion=parseInt(RegExp.$1,10),y.es2019=y.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(l)&&(y.ie=!0,y.trident=!0,y.tridentVersion=parseInt(RegExp.$1,10),y.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(l)&&(y.silk=!0),y}C.exports=u()}),89289:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(27919),y={supportInverseAlpha:!1,supportNewBlendModes:!1};function u(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",o="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var a=new Image;a.onload=function(){var f=g.create2D(a,6),v=f.getContext("2d",{willReadFrequently:!0});if(v.globalCompositeOperation="multiply",v.drawImage(d,0,0),v.drawImage(a,2,0),!v.getImageData(2,0,1,1))return!1;var c=v.getImageData(2,0,1,1).data;g.remove(a),y.supportNewBlendModes=c[0]===255&&c[1]===0&&c[2]===0},a.src=r+"/wCKxvRF"+o},d.src=r+"AP804Oa6"+o,!1}function l(){var r=g.create2D(this,2),o=r.getContext("2d",{willReadFrequently:!0});o.fillStyle="rgba(10, 20, 30, 0.5)",o.fillRect(0,0,1,1);var d=o.getImageData(0,0,1,1);if(d===null)return!1;o.putImageData(d,1,0);var a=o.getImageData(1,0,1,1),f=a.data[0]===d.data[0]&&a.data[1]===d.data[1]&&a.data[2]===d.data[2]&&a.data[3]===d.data[3];return g.remove(this),f}function h(){return typeof importScripts!="function"&&document!==void 0&&(y.supportNewBlendModes=u(),y.supportInverseAlpha=l()),y}C.exports=h()}),89357:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25892),y=s(84148),u=s(27919),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var o=new ArrayBuffer(4),d=new Uint8Array(o),a=new Uint32Array(o);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,a[0]===3569595041?!0:a[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return l;l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch{l.localStorage=!1}l.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,l.fileSystem=!!window.requestFileSystem;var o=!1,d=function(){if(window.WebGLRenderingContext)try{var a=u.createWebGL(this),f=a.getContext("webgl")||a.getContext("experimental-webgl"),v=u.create2D(this),c=v.getContext("2d",{willReadFrequently:!0}),p=c.createImageData(1,1);return o=p.data instanceof Uint8ClampedArray,u.remove(a),u.remove(v),!!f}catch{return!1}return!1};return l.webGL=d(),l.worker=!!window.Worker,l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,y.firefox&&y.firefoxVersion<21&&(l.getUserMedia=!1),!g.iOS&&(y.ie||y.firefox||y.chrome)&&(l.canvasBitBltShift=!0),(y.safari||y.mobileSafari)&&(l.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(l.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(l.littleEndian=h()),l.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&l.littleEndian!==null&&o,l}C.exports=r()}),91639:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={available:!1,cancel:"",keyboard:!1,request:""};function s(){if(typeof importScripts=="function")return R;var g,y="Fullscreen",u="FullScreen",l=["request"+y,"request"+u,"webkitRequest"+y,"webkitRequest"+u,"msRequest"+y,"msRequest"+u,"mozRequest"+u,"mozRequest"+y];for(g=0;g<l.length;g++)if(document.documentElement[l[g]]){R.available=!0,R.request=l[g];break}var h=["cancel"+u,"exit"+y,"webkitCancel"+u,"webkitExit"+y,"msCancel"+u,"msExit"+y,"mozCancel"+u,"mozExit"+y];if(R.available){for(g=0;g<h.length;g++)if(document[h[g]]){R.cancel=h[g];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(R.keyboard=!0),Object.defineProperty(R,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),R}C.exports=s()}),31784:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(84148),y={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function u(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(y.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(y.mspointer=!0),navigator.getGamepads&&(y.gamepads=!0),"onwheel"in window||g.ie&&"WheelEvent"in window?y.wheelEvent="wheel":"onmousewheel"in window?y.wheelEvent="mousewheel":g.firefox&&"MouseScrollEvent"in window&&(y.wheelEvent="DOMMouseScroll")),y}C.exports=u()}),25892:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function s(){if(typeof importScripts=="function")return R;var g=navigator.userAgent;/Windows/.test(g)?R.windows=!0:/Mac OS/.test(g)&&!/like Mac OS/.test(g)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(R.iOS=!0,R.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),R.iOSVersion=parseInt(RegExp.$1,10)):R.macOS=!0:/Android/.test(g)?R.android=!0:/Linux/.test(g)?R.linux=!0:/iP[ao]d|iPhone/i.test(g)?(R.iOS=!0,navigator.appVersion.match(/OS (\d+)/),R.iOSVersion=parseInt(RegExp.$1,10),R.iPhone=g.toLowerCase().indexOf("iphone")!==-1,R.iPad=g.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(g)||/\bKF[A-Z][A-Z]+/.test(g)||/Silk.*Mobile Safari/.test(g)?R.kindle=!0:/CrOS/.test(g)&&(R.chromeOS=!0),(/Windows Phone/i.test(g)||/IEMobile/i.test(g))&&(R.android=!1,R.iOS=!1,R.macOS=!1,R.windows=!0,R.windowsPhone=!0);var y=/Silk/.test(g);return(R.windows||R.macOS||R.linux&&!y||R.chromeOS)&&(R.desktop=!0),(R.windowsPhone||/Windows NT/i.test(g)&&/Touch/i.test(g))&&(R.desktop=!1),navigator.standalone&&(R.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(R.cordova=!0),window.ejecta!==void 0&&(R.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(R.node=!0),R.node&&typeof process.versions=="object"&&(R.nodeWebkit=!!process.versions["node-webkit"],R.electron=!!process.versions.electron),/Crosswalk/.test(g)&&(R.crosswalk=!0),R.pixelRatio=window.devicePixelRatio||1,R}C.exports=s()}),43267:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function u(){if(typeof importScripts=="function")return y;var l=document.createElement("video"),h=!!l.canPlayType,r=/^no$/;try{h&&(l.canPlayType('video/ogg; codecs="theora"').replace(r,"")&&(y.ogg=!0),l.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,"")&&(y.h264=!0,y.mp4=!0),l.canPlayType("video/x-m4v").replace(r,"")&&(y.m4v=!0),l.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,"")&&(y.webm=!0),l.canPlayType('video/webm; codecs="vp9"').replace(r,"")&&(y.vp9=!0),l.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,"")&&(y.hls=!0))}catch{}return l.parentNode&&l.parentNode.removeChild(l),y.getVideoURL=function(o){Array.isArray(o)||(o=[o]);for(var d=0;d<o.length;d++){var a=g(o[d],"url",o[d]);if(a.indexOf("blob:")===0)return{url:a,type:""};var f;if(a.indexOf("data:")===0?f=a.split(",")[0].match(/\/(.*?);/):f=a.match(/\.([a-zA-Z0-9]+)($|\?)/),f=g(o[d],"type",f?f[1]:"").toLowerCase(),y[f])return{url:a,type:f}}return null},y}C.exports=u()}),82264:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={os:s(25892),browser:s(84148),features:s(89357),input:s(31784),audio:s(7098),video:s(43267),fullscreen:s(91639),canvasFeatures:s(89289)}}),89422:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new Float32Array(20),u=new g({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(l){return this._matrix.set(l),this._dirty=!0,this},reset:function(){var l=this._matrix;return l.fill(0),l[0]=1,l[6]=1,l[12]=1,l[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var l=this._data;return this._dirty&&(l.set(this._matrix),l[4]/=255,l[9]/=255,l[14]/=255,l[19]/=255,this._dirty=!1),l},brightness:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],h)},saturate:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l*2/3+1,o=(r-1)*-.5;return this.multiply([r,o,o,0,0,o,r,o,0,0,o,o,r,0,0,0,0,0,1,0],h)},desaturate:function(l){return l===void 0&&(l=!1),this.saturate(-1,l)},hue:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1),l=l/180*Math.PI;var r=Math.cos(l),o=Math.sin(l),d=.213,a=.715,f=.072;return this.multiply([d+r*(1-d)+o*-d,a+r*-a+o*-a,f+r*-f+o*(1-f),0,0,d+r*-d+o*.143,a+r*(1-a)+o*.14,f+r*-f+o*-.283,0,0,d+r*-d+o*-.787,a+r*-a+o*a,f+r*(1-f)+o*f,0,0,0,0,0,1,0],h)},grayscale:function(l,h){return l===void 0&&(l=1),h===void 0&&(h=!1),this.saturate(-l,h)},blackWhite:function(l){return l===void 0&&(l=!1),this.multiply(u.BLACK_WHITE,l)},contrast:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l+1,o=-.5*(r-1);return this.multiply([r,0,0,0,o,0,r,0,0,o,0,0,r,0,o,0,0,0,1,0],h)},negative:function(l){return l===void 0&&(l=!1),this.multiply(u.NEGATIVE,l)},desaturateLuminance:function(l){return l===void 0&&(l=!1),this.multiply(u.DESATURATE_LUMINANCE,l)},sepia:function(l){return l===void 0&&(l=!1),this.multiply(u.SEPIA,l)},night:function(l,h){return l===void 0&&(l=.1),h===void 0&&(h=!1),this.multiply([l*-2,-l,0,0,0,-l,0,l,0,0,0,l,l*2,0,0,0,0,0,1,0],h)},lsd:function(l){return l===void 0&&(l=!1),this.multiply(u.LSD,l)},brown:function(l){return l===void 0&&(l=!1),this.multiply(u.BROWN,l)},vintagePinhole:function(l){return l===void 0&&(l=!1),this.multiply(u.VINTAGE,l)},kodachrome:function(l){return l===void 0&&(l=!1),this.multiply(u.KODACHROME,l)},technicolor:function(l){return l===void 0&&(l=!1),this.multiply(u.TECHNICOLOR,l)},polaroid:function(l){return l===void 0&&(l=!1),this.multiply(u.POLAROID,l)},shiftToBGR:function(l){return l===void 0&&(l=!1),this.multiply(u.SHIFT_BGR,l)},multiply:function(l,h){h===void 0&&(h=!1),h||this.reset();var r=this._matrix,o=y;return o.set(r),r.set([o[0]*l[0]+o[1]*l[5]+o[2]*l[10]+o[3]*l[15],o[0]*l[1]+o[1]*l[6]+o[2]*l[11]+o[3]*l[16],o[0]*l[2]+o[1]*l[7]+o[2]*l[12]+o[3]*l[17],o[0]*l[3]+o[1]*l[8]+o[2]*l[13]+o[3]*l[18],o[0]*l[4]+o[1]*l[9]+o[2]*l[14]+o[3]*l[19]+o[4],o[5]*l[0]+o[6]*l[5]+o[7]*l[10]+o[8]*l[15],o[5]*l[1]+o[6]*l[6]+o[7]*l[11]+o[8]*l[16],o[5]*l[2]+o[6]*l[7]+o[7]*l[12]+o[8]*l[17],o[5]*l[3]+o[6]*l[8]+o[7]*l[13]+o[8]*l[18],o[5]*l[4]+o[6]*l[9]+o[7]*l[14]+o[8]*l[19]+o[9],o[10]*l[0]+o[11]*l[5]+o[12]*l[10]+o[13]*l[15],o[10]*l[1]+o[11]*l[6]+o[12]*l[11]+o[13]*l[16],o[10]*l[2]+o[11]*l[7]+o[12]*l[12]+o[13]*l[17],o[10]*l[3]+o[11]*l[8]+o[12]*l[13]+o[13]*l[18],o[10]*l[4]+o[11]*l[9]+o[12]*l[14]+o[13]*l[19]+o[14],o[15]*l[0]+o[16]*l[5]+o[17]*l[10]+o[18]*l[15],o[15]*l[1]+o[16]*l[6]+o[17]*l[11]+o[18]*l[16],o[15]*l[2]+o[16]*l[7]+o[17]*l[12]+o[18]*l[17],o[15]*l[3]+o[16]*l[8]+o[17]*l[13]+o[18]*l[18],o[15]*l[4]+o[16]*l[9]+o[17]*l[14]+o[18]*l[19]+o[19]]),this._dirty=!0,this}});u.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],u.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],u.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],u.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],u.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],u.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],u.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],u.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],u.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],u.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],u.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],C.exports=u}),51767:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(29747),u=new g({initialize:function(h,r,o){this._rgb=[0,0,0],this.onChangeCallback=y,this.dirty=!1,this.set(h,r,o)},set:function(l,h,r){return l===void 0&&(l=0),h===void 0&&(h=0),r===void 0&&(r=0),this._rgb=[l,h,r],this.onChange(),this},equals:function(l,h,r){var o=this._rgb;return o[0]===l&&o[1]===h&&o[2]===r},onChange:function(){this.dirty=!0;var l=this._rgb;this.onChangeCallback.call(this,l[0],l[1],l[2])},r:{get:function(){return this._rgb[0]},set:function(l){this._rgb[0]=l,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(l){this._rgb[1]=l,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(l){this._rgb[2]=l,this.onChange()}},destroy:function(){this.onChangeCallback=null}});C.exports=u}),60461:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};C.exports=R}),54312:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(35893),u=s(86327),l=s(88417),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)+d),u(r,g(o)+a),r};C.exports=h}),46768:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(26541),u=s(86327),l=s(385),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)-d),u(r,g(o)+a),r};C.exports=h}),35827:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(54380),u=s(86327),l=s(40136),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)+d),u(r,g(o)+a),r};C.exports=h}),46871:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66786),y=s(35893),u=s(7702),l=function(h,r,o,d){return o===void 0&&(o=0),d===void 0&&(d=0),g(h,y(r)+o,u(r)+d),h};C.exports=l}),5198:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7702),y=s(26541),u=s(20786),l=s(385),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)-d),u(r,g(o)+a),r};C.exports=h}),11879:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(60461),y=[];y[g.BOTTOM_CENTER]=s(54312),y[g.BOTTOM_LEFT]=s(46768),y[g.BOTTOM_RIGHT]=s(35827),y[g.CENTER]=s(46871),y[g.LEFT_CENTER]=s(5198),y[g.RIGHT_CENTER]=s(80503),y[g.TOP_CENTER]=s(89698),y[g.TOP_LEFT]=s(922),y[g.TOP_RIGHT]=s(21373),y[g.LEFT_BOTTOM]=y[g.BOTTOM_LEFT],y[g.LEFT_TOP]=y[g.TOP_LEFT],y[g.RIGHT_BOTTOM]=y[g.BOTTOM_RIGHT],y[g.RIGHT_TOP]=y[g.TOP_RIGHT];var u=function(l,h,r,o,d){return y[r](l,h,o,d)};C.exports=u}),80503:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7702),y=s(54380),u=s(20786),l=s(40136),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)+d),u(r,g(o)+a),r};C.exports=h}),89698:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35893),y=s(17717),u=s(88417),l=s(66737),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),u(r,g(o)+d),l(r,y(o)-a),r};C.exports=h}),922:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26541),y=s(17717),u=s(385),l=s(66737),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),u(r,g(o)-d),l(r,y(o)-a),r};C.exports=h}),21373:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(54380),y=s(17717),u=s(40136),l=s(66737),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),u(r,g(o)+d),l(r,y(o)-a),r};C.exports=h}),91660:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BottomCenter:s(54312),BottomLeft:s(46768),BottomRight:s(35827),Center:s(46871),LeftCenter:s(5198),QuickSet:s(11879),RightCenter:s(80503),TopCenter:s(89698),TopLeft:s(922),TopRight:s(21373)}}),71926:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(60461),y=s(79291),u={In:s(91660),To:s(16694)};u=y(!1,u,g),C.exports=u}),21578:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(35893),u=s(88417),l=s(66737),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),u(r,y(o)+d),l(r,g(o)+a),r};C.exports=h}),10210:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(26541),u=s(385),l=s(66737),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),u(r,y(o)-d),l(r,g(o)+a),r};C.exports=h}),82341:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(54380),u=s(40136),l=s(66737),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),u(r,y(o)+d),l(r,g(o)+a),r};C.exports=h}),87958:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(26541),u=s(86327),l=s(40136),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)-d),u(r,g(o)+a),r};C.exports=h}),40080:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7702),y=s(26541),u=s(20786),l=s(40136),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)-d),u(r,g(o)+a),r};C.exports=h}),88466:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26541),y=s(17717),u=s(40136),l=s(66737),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),u(r,g(o)-d),l(r,y(o)-a),r};C.exports=h}),38829:((C,R,s)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(60461),y=[];y[g.BOTTOM_CENTER]=s(21578),y[g.BOTTOM_LEFT]=s(10210),y[g.BOTTOM_RIGHT]=s(82341),y[g.LEFT_BOTTOM]=s(87958),y[g.LEFT_CENTER]=s(40080),y[g.LEFT_TOP]=s(88466),y[g.RIGHT_BOTTOM]=s(19211),y[g.RIGHT_CENTER]=s(34609),y[g.RIGHT_TOP]=s(48741),y[g.TOP_CENTER]=s(49440),y[g.TOP_LEFT]=s(81288),y[g.TOP_RIGHT]=s(61323);var u=function(l,h,r,o,d){return y[r](l,h,o,d)};C.exports=u}),19211:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(54380),u=s(86327),l=s(385),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)+d),u(r,g(o)+a),r};C.exports=h}),34609:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7702),y=s(54380),u=s(20786),l=s(385),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,y(o)+d),u(r,g(o)+a),r};C.exports=h}),48741:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(54380),y=s(17717),u=s(385),l=s(66737),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),u(r,g(o)+d),l(r,y(o)-a),r};C.exports=h}),49440:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35893),y=s(17717),u=s(86327),l=s(88417),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,g(o)+d),u(r,y(o)-a),r};C.exports=h}),81288:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26541),y=s(17717),u=s(86327),l=s(385),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,g(o)-d),u(r,y(o)-a),r};C.exports=h}),61323:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(54380),y=s(17717),u=s(86327),l=s(40136),h=function(r,o,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(r,g(o)+d),u(r,y(o)-a),r};C.exports=h}),16694:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BottomCenter:s(21578),BottomLeft:s(10210),BottomRight:s(82341),LeftBottom:s(87958),LeftCenter:s(40080),LeftTop:s(88466),QuickSet:s(38829),RightBottom:s(19211),RightCenter:s(34609),RightTop:s(48741),TopCenter:s(49440),TopLeft:s(81288),TopRight:s(61323)}}),66786:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(88417),y=s(20786),u=function(l,h,r){return g(l,h),y(l,r)};C.exports=u}),62235:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.y+s.height-s.height*s.originY};C.exports=R}),72873:((C,R,s)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62235),y=s(26541),u=s(54380),l=s(17717),h=s(87841),r=function(o,d){d===void 0&&(d=new h);var a=y(o),f=l(o);return d.x=a,d.y=f,d.width=u(o)-a,d.height=g(o)-f,d};C.exports=r}),35893:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.x-s.width*s.originX+s.width*.5};C.exports=R}),7702:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.y-s.height*s.originY+s.height*.5};C.exports=R}),26541:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.x-s.width*s.originX};C.exports=R}),87431:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.width*s.originX};C.exports=R}),46928:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.height*s.originY};C.exports=R}),54380:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.x+s.width-s.width*s.originX};C.exports=R}),17717:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.y-s.height*s.originY};C.exports=R}),86327:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.y=g-s.height+s.height*s.originY,s};C.exports=R}),88417:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.width*s.originX;return s.x=g+y-s.width*.5,s};C.exports=R}),20786:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.height*s.originY;return s.y=g+y-s.height*.5,s};C.exports=R}),385:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x=g+s.width*s.originX,s};C.exports=R}),40136:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x=g-s.width+s.width*s.originX,s};C.exports=R}),66737:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.y=g+s.height*s.originY,s};C.exports=R}),58724:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={CenterOn:s(66786),GetBottom:s(62235),GetBounds:s(72873),GetCenterX:s(35893),GetCenterY:s(7702),GetLeft:s(26541),GetOffsetX:s(87431),GetOffsetY:s(46928),GetRight:s(54380),GetTop:s(17717),SetBottom:s(86327),SetCenterX:s(88417),SetCenterY:s(20786),SetLeft:s(385),SetRight:s(40136),SetTop:s(66737)}}),20623:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setCrisp:function(s){var g=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return g.forEach(function(y){s.style["image-rendering"]=y}),s.style.msInterpolationMode="nearest-neighbor",s},setBicubic:function(s){return s.style["image-rendering"]="auto",s.style.msInterpolationMode="bicubic",s}};C.exports=R}),27919:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(8054),y=s(68703),u=[],l=!1,h=function(){var r=function(T,E,P,w,A){E===void 0&&(E=1),P===void 0&&(P=1),w===void 0&&(w=g.CANVAS),A===void 0&&(A=!1);var b,O=a(w);return O===null?(O={parent:T,canvas:document.createElement("canvas"),type:w},w===g.CANVAS&&u.push(O),b=O.canvas):(O.parent=T,b=O.canvas),A&&(O.parent=b),b.width=E,b.height=P,l&&w===g.CANVAS&&y.disable(b.getContext("2d",{willReadFrequently:!1})),b},o=function(T,E,P){return r(T,E,P,g.CANVAS)},d=function(T,E,P){return r(T,E,P,g.WEBGL)},a=function(T){if(T===void 0&&(T=g.CANVAS),T===g.WEBGL)return null;for(var E=0;E<u.length;E++){var P=u[E];if(!P.parent&&P.type===T)return P}return null},f=function(T){var E=T instanceof HTMLCanvasElement;u.forEach(function(P){(E&&P.canvas===T||!E&&P.parent===T)&&(P.parent=null,P.canvas.width=1,P.canvas.height=1)})},v=function(){var T=0;return u.forEach(function(E){E.parent&&T++}),T},c=function(){return u.length-v()},p=function(){l=!0},m=function(){l=!1};return{create2D:o,create:r,createWebGL:d,disableSmoothing:p,enableSmoothing:m,first:a,free:c,pool:u,remove:f,total:v}};C.exports=h()}),68703:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R="",s=function(){var g=function(h){for(var r=["i","webkitI","msI","mozI","oI"],o=0;o<r.length;o++){var d=r[o]+"mageSmoothingEnabled";if(d in h)return d}return null},y=function(h){return R===""&&(R=g(h)),R&&(h[R]=!0),h},u=function(h){return R===""&&(R=g(h)),R&&(h[R]=!1),h},l=function(h){return R!==null?h[R]:null};return{disable:u,enable:y,getPrefix:g,isEnabled:l}};C.exports=s()}),65208:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g="none"),s.style.msTouchAction=g,s.style["ms-touch-action"]=g,s.style["touch-action"]=g,s};C.exports=R}),91610:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g="none");var y=["-webkit-","-khtml-","-moz-","-ms-",""];return y.forEach(function(u){s.style[u+"user-select"]=g}),s.style["-webkit-touch-callout"]=g,s.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",s};C.exports=R}),26253:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={CanvasInterpolation:s(20623),CanvasPool:s(27919),Smoothing:s(68703),TouchAction:s(65208),UserSelect:s(91610)}}),40987:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(37589),u=s(1e3),l=s(7537),h=s(87837),r=new g({initialize:function(d,a,f,v){d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,a,f,v)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(o,d,a,f,v){return f===void 0&&(f=255),v===void 0&&(v=!0),this._locked=!0,this.red=o,this.green=d,this.blue=a,this.alpha=f,this._locked=!1,this.update(v)},setGLTo:function(o,d,a,f){return f===void 0&&(f=1),this._locked=!0,this.redGL=o,this.greenGL=d,this.blueGL=a,this.alphaGL=f,this._locked=!1,this.update(!0)},setFromRGB:function(o){return this._locked=!0,this.red=o.r,this.green=o.g,this.blue=o.b,o.hasOwnProperty("a")&&(this.alpha=o.a),this._locked=!1,this.update(!0)},setFromHSV:function(o,d,a){return l(o,d,a,this)},update:function(o){if(o===void 0&&(o=!1),this._locked)return this;var d=this.r,a=this.g,f=this.b,v=this.a;return this._color=y(d,a,f),this._color32=u(d,a,f,v),this._rgba="rgba("+d+","+a+","+f+","+v/255+")",o&&h(d,a,f,this),this},updateHSV:function(){var o=this.r,d=this.g,a=this.b;return h(o,d,a,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(o){return this.setTo(o,o,o)},random:function(o,d){o===void 0&&(o=0),d===void 0&&(d=255);var a=Math.floor(o+Math.random()*(d-o)),f=Math.floor(o+Math.random()*(d-o)),v=Math.floor(o+Math.random()*(d-o));return this.setTo(a,f,v)},randomGray:function(o,d){o===void 0&&(o=0),d===void 0&&(d=255);var a=Math.floor(o+Math.random()*(d-o));return this.setTo(a,a,a)},saturate:function(o){return this.s+=o/100,this},desaturate:function(o){return this.s-=o/100,this},lighten:function(o){return this.v+=o/100,this},darken:function(o){return this.v-=o/100,this},brighten:function(o){var d=this.r,a=this.g,f=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(o/100)))),a=Math.max(0,Math.min(255,a-Math.round(255*-(o/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(o/100)))),this.setTo(d,a,f)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(o){this.gl[0]=Math.min(Math.abs(o),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(o){this.gl[1]=Math.min(Math.abs(o),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(o){this.gl[2]=Math.min(Math.abs(o),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(o){this.gl[3]=Math.min(Math.abs(o),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(o){o=Math.floor(Math.abs(o)),this.r=Math.min(o,255),this.gl[0]=o/255,this.update(!0)}},green:{get:function(){return this.g},set:function(o){o=Math.floor(Math.abs(o)),this.g=Math.min(o,255),this.gl[1]=o/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(o){o=Math.floor(Math.abs(o)),this.b=Math.min(o,255),this.gl[2]=o/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(o){o=Math.floor(Math.abs(o)),this.a=Math.min(o,255),this.gl[3]=o/255,this.update()}},h:{get:function(){return this._h},set:function(o){this._h=o,l(o,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(o){this._s=o,l(this._h,o,this._v,this)}},v:{get:function(){return this._v},set:function(o){this._v=o,l(this._h,this._s,o,this)}}});C.exports=r}),92728:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37589),y=function(u){u===void 0&&(u=1024);var l=[],h=255,r,o=255,d=0,a=0;for(r=0;r<=h;r++)l.push({r:o,g:r,b:a,color:g(o,r,a)});for(d=255,r=h;r>=0;r--)l.push({r,g:d,b:a,color:g(r,d,a)});for(o=0,r=0;r<=h;r++,d--)l.push({r:o,g:d,b:r,color:g(o,d,r)});for(d=0,a=255,r=0;r<=h;r++,a--,o++)l.push({r:o,g:d,b:a,color:g(o,d,a)});if(u===1024)return l;var f=[],v=0,c=1024/u;for(r=0;r<u;r++)f.push(l[Math.floor(v)]),v+=c;return f};C.exports=y}),91588:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g={r:s>>16&255,g:s>>8&255,b:s&255,a:255};return s>16777215&&(g.a=s>>>24),g};C.exports=R}),62957:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=s.toString(16);return g.length===1?"0"+g:g};C.exports=R}),37589:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s<<16|g<<8|y};C.exports=R}),1e3:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){return u<<24|s<<16|g<<8|y};C.exports=R}),62183:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40987),y=s(89528),u=function(l,h,r){var o=r,d=r,a=r;if(h!==0){var f=r<.5?r*(1+h):r+h-r*h,v=2*r-f;o=y(v,f,l+1/3),d=y(v,f,l),a=y(v,f,l-1/3)}var c=new g;return c.setGLTo(o,d,a,1)};C.exports=u}),27939:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7537),y=function(u,l){u===void 0&&(u=1),l===void 0&&(l=1);for(var h=[],r=0;r<=359;r++)h.push(g(r/359,u,l));return h};C.exports=y}),7537:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37589);function y(l,h,r,o){var d=(l+h*6)%6,a=Math.min(d,4-d,1);return Math.round(255*(o-o*r*Math.max(0,a)))}var u=function(l,h,r,o){h===void 0&&(h=1),r===void 0&&(r=1);var d=y(5,l,h,r),a=y(3,l,h,r),f=y(1,l,h,r);return o?o.setTo?o.setTo(d,a,f,o.alpha,!0):(o.r=d,o.g=a,o.b=f,o.color=g(d,a,f),o):{r:d,g:a,b:f,color:g(d,a,f)}};C.exports=u}),70238:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40987),y=function(u){var l=new g;u=u.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,f,v,c){return f+f+v+v+c+c});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);if(h){var r=parseInt(h[1],16),o=parseInt(h[2],16),d=parseInt(h[3],16);l.setTo(r,o,d)}return l};C.exports=y}),89528:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?s+(g-s)*6*y:y<.5?g:y<.6666666666666666?s+(g-s)*(.6666666666666666-y)*6:s};C.exports=R}),30100:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40987),y=s(90664),u=function(l){var h=y(l);return new g(h.r,h.g,h.b,h.a)};C.exports=u}),90664:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s>16777215?{a:s>>>24,r:s>>16&255,g:s>>8&255,b:s&255}:{a:255,r:s>>16&255,g:s>>8&255,b:s&255}};C.exports=R}),13699:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(28915),y=function(h,r,o,d,a,f,v,c){v===void 0&&(v=100),c===void 0&&(c=0);var p=c/v;return{r:g(h,d,p),g:g(r,a,p),b:g(o,f,p)}},u=function(h,r,o,d){return o===void 0&&(o=100),d===void 0&&(d=0),y(h.r,h.g,h.b,r.r,r.g,r.b,o,d)},l=function(h,r,o,d,a,f){return a===void 0&&(a=100),f===void 0&&(f=0),y(h.r,h.g,h.b,r,o,d,a,f)};C.exports={RGBWithRGB:y,ColorWithRGB:l,ColorWithColor:u}}),68957:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40987),y=function(u){return new g(u.r,u.g,u.b,u.a)};C.exports=y}),87388:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40987),y=function(u){var l=new g,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(u.toLowerCase());if(h){var r=parseInt(h[1],10),o=parseInt(h[2],10),d=parseInt(h[3],10),a=h[4]!==void 0?parseFloat(h[4]):1;l.setTo(r,o,d,a*255)}return l};C.exports=y}),87837:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){u===void 0&&(u={h:0,s:0,v:0}),s/=255,g/=255,y/=255;var l=Math.min(s,g,y),h=Math.max(s,g,y),r=h-l,o=0,d=h===0?0:r/h,a=h;return h!==l&&(h===s?o=(g-y)/r+(g<y?6:0):h===g?o=(y-s)/r+2:h===y&&(o=(s-g)/r+4),o/=6),u.hasOwnProperty("_h")?(u._h=o,u._s=d,u._v=a):(u.h=o,u.s=d,u.v=a),u};C.exports=R}),75723:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62957),y=function(u,l,h,r,o){return r===void 0&&(r=255),o===void 0&&(o="#"),o==="#"?"#"+((1<<24)+(u<<16)+(l<<8)+h).toString(16).slice(1,7):"0x"+g(r)+g(u)+g(l)+g(h)};C.exports=y}),85386:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(30976),y=s(40987),u=function(l,h){return l===void 0&&(l=0),h===void 0&&(h=255),new y(g(l,h),g(l,h),g(l,h))};C.exports=u}),80333:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70238),y=s(30100),u=s(68957),l=s(87388),h=function(r){var o=typeof r;switch(o){case"string":return r.substr(0,3).toLowerCase()==="rgb"?l(r):g(r);case"number":return y(r);case"object":return u(r)}};C.exports=h}),3956:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40987);g.ColorSpectrum=s(92728),g.ColorToRGBA=s(91588),g.ComponentToHex=s(62957),g.GetColor=s(37589),g.GetColor32=s(1e3),g.HexStringToColor=s(70238),g.HSLToColor=s(62183),g.HSVColorWheel=s(27939),g.HSVToRGB=s(7537),g.HueToComponent=s(89528),g.IntegerToColor=s(30100),g.IntegerToRGB=s(90664),g.Interpolate=s(13699),g.ObjectToColor=s(68957),g.RandomRGB=s(85386),g.RGBStringToColor=s(87388),g.RGBToHSV=s(87837),g.RGBToString=s(75723),g.ValueToColor=s(80333),C.exports=g}),27460:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Align:s(71926),BaseShader:s(73894),Bounds:s(58724),Canvas:s(26253),Color:s(3956),ColorMatrix:s(89422),Masks:s(69781),RGB:s(51767)}}),6858:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(39429),u=new g({initialize:function(h,r,o,d,a,f){r||(r=h.sys.make.image({x:o,y:d,key:a,frame:f,add:!1})),this.bitmapMask=r,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(l){this.bitmapMask=l},preRenderWebGL:function(l,h,r){l.pipelines.BITMAPMASK_PIPELINE.beginMask(this,h,r)},postRenderWebGL:function(l,h,r){l.pipelines.BITMAPMASK_PIPELINE.endMask(this,h,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});y.register("bitmapMask",function(l,h,r,o,d){return new u(this.scene,l,h,r,o,d)}),C.exports=u}),80661:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(u){return this.geometryMask=u,this},setInvertAlpha:function(u){return u===void 0&&(u=!0),this.invertAlpha=u,this},preRenderWebGL:function(u,l,h){var r=u.gl;u.flush(),u.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),u.maskCount=0),u.currentCameraMask.mask!==this&&(u.currentMask.mask=this),u.maskStack.push({mask:this,camera:h}),this.applyStencil(u,h,!0),u.maskCount++},applyStencil:function(u,l,h){var r=u.gl,o=this.geometryMask,d=u.maskCount,a=255;r.colorMask(!1,!1,!1,!1),h?(r.stencilFunc(r.EQUAL,d,a),r.stencilOp(r.KEEP,r.KEEP,r.INCR),d++):(r.stencilFunc(r.EQUAL,d+1,a),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),this.level=d,o.renderWebGL(u,o,l),u.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.invertAlpha?r.stencilFunc(r.NOTEQUAL,d,a):r.stencilFunc(r.EQUAL,d,a)},postRenderWebGL:function(u){var l=u.gl;u.maskStack.pop(),u.maskCount--,u.flush();var h=u.currentMask;if(u.maskStack.length===0)h.mask=null,l.disable(l.STENCIL_TEST);else{var r=u.maskStack[u.maskStack.length-1];r.mask.applyStencil(u,r.camera,!1),u.currentCameraMask.mask!==r.mask?(h.mask=r.mask,h.camera=r.camera):h.mask=null}},preRenderCanvas:function(u,l,h){var r=this.geometryMask;u.currentContext.save(),r.renderCanvas(u,r,h,null,null,!0),u.currentContext.clip()},postRenderCanvas:function(u){u.currentContext.restore()},destroy:function(){this.geometryMask=null}});C.exports=y}),69781:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BitmapMask:s(6858),GeometryMask:s(80661)}}),73894:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r,o){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),o===void 0&&(o=null),this.key=l,this.fragmentSrc=h,this.vertexSrc=r,this.uniforms=o}});C.exports=y}),40366:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y;if(g)typeof g=="string"?y=document.getElementById(g):typeof g=="object"&&g.nodeType===1&&(y=g);else if(s.parentElement||g===null)return s;return y||(y=document.body),y.appendChild(s),s};C.exports=R}),83719:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40366),y=function(u){var l=u.config;if(!(!l.parent||!l.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+u.scale.width+"px;","height: "+u.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+l.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),u.domContainer=h,g(h,l.parent)}};C.exports=y}),57264:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25892),y=function(u){if(document.readyState==="complete"||document.readyState==="interactive"){u();return}var l=function(){document.removeEventListener("deviceready",l,!0),document.removeEventListener("DOMContentLoaded",l,!0),window.removeEventListener("load",l,!0),u()};document.body?g.cordova?document.addEventListener("deviceready",l,!1):(document.addEventListener("DOMContentLoaded",l,!0),window.addEventListener("load",l,!0)):window.setTimeout(l,20)};C.exports=y}),57811:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){if(!s)return window.innerHeight;var g=Math.abs(window.orientation),y={w:0,h:0},u=document.createElement("div");return u.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(u),y.w=g===90?u.offsetHeight:window.innerWidth,y.h=g===90?window.innerWidth:u.offsetHeight,document.documentElement.removeChild(u),u=null,Math.abs(window.orientation)!==90?y.h:y.w};C.exports=R}),45818:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(13560),y=function(u,l){var h=window.screen,r=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?g.ORIENTATION.PORTRAIT:g.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return g.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return g.ORIENTATION.LANDSCAPE}else return l>u?g.ORIENTATION.PORTRAIT:g.ORIENTATION.LANDSCAPE};C.exports=y}),74403:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g;return s!==""&&(typeof s=="string"?g=document.getElementById(s):s&&s.nodeType===1&&(g=s)),g||(g=document.body),g};C.exports=R}),56836:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g="";try{if(window.DOMParser){var y=new DOMParser;g=y.parseFromString(s,"text/xml")}else g=new ActiveXObject("Microsoft.XMLDOM"),g.loadXML(s)}catch{g=null}return!g||!g.documentElement||g.getElementsByTagName("parsererror").length?null:g};C.exports=R}),35846:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){s.parentNode&&s.parentNode.removeChild(s)};C.exports=R}),43092:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(29747),u=new g({initialize:function(){this.isRunning=!1,this.callback=y,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var h=this;this.step=function r(o){h.callback(o),h.isRunning&&(h.timeOutID=window.requestAnimationFrame(r))},this.stepTimeout=function r(){h.isRunning&&(h.timeOutID=window.setTimeout(r,h.delay)),h.callback(window.performance.now())}},start:function(l,h,r){this.isRunning||(this.callback=l,this.isSetTimeOut=h,this.delay=r,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=y}});C.exports=u}),84902:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={AddToDOM:s(40366),DOMContentLoaded:s(57264),GetInnerHeight:s(57811),GetScreenOrientation:s(45818),GetTarget:s(74403),ParseXML:s(56836),RemoveFromDOM:s(35846),RequestAnimationFrame:s(43092)};C.exports=g}),47565:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50792),u=s(37277),l=new g({Extends:y,initialize:function(){y.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});u.register("EventEmitter",l,"events"),C.exports=l}),93055:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={EventEmitter:s(47565)}}),20122:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o){o===void 0&&(o=1),y.call(this,u.BARREL,r),this.amount=o}});C.exports=l}),32251:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f,v,c){d===void 0&&(d=1),a===void 0&&(a=1),f===void 0&&(f=1),v===void 0&&(v=1),c===void 0&&(c=4),y.call(this,u.BLOOM,r),this.steps=c,this.offsetX=d,this.offsetY=a,this.blurStrength=f,this.strength=v,this.glcolor=[1,1,1],o!=null&&(this.color=o)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});C.exports=l}),9047:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f,v,c){o===void 0&&(o=0),d===void 0&&(d=2),a===void 0&&(a=2),f===void 0&&(f=1),c===void 0&&(c=4),y.call(this,u.BLUR,r),this.quality=o,this.x=d,this.y=a,this.steps=c,this.strength=f,this.glcolor=[1,1,1],v!=null&&(this.color=v)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});C.exports=l}),27885:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f,v,c,p){o===void 0&&(o=.5),d===void 0&&(d=1),a===void 0&&(a=.2),f===void 0&&(f=!1),v===void 0&&(v=1),c===void 0&&(c=1),p===void 0&&(p=1),y.call(this,u.BOKEH,r),this.radius=o,this.amount=d,this.contrast=a,this.isTiltShift=f,this.strength=p,this.blurX=v,this.blurY=c}});C.exports=l}),12578:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f,v){o===void 0&&(o=8),f===void 0&&(f=1),v===void 0&&(v=.005),y.call(this,u.CIRCLE,r),this.scale=f,this.feather=v,this.thickness=o,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],d!=null&&(this.color=d),a!=null&&(this.backgroundColor=a)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}},backgroundColor:{get:function(){var h=this.glcolor2;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor2;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(h){this.glcolor2[3]=h}}});C.exports=l}),15802:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(89422),u=s(14811),l=new g({Extends:y,initialize:function(r){y.call(this),this.type=u.COLOR_MATRIX,this.gameObject=r,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});C.exports=l}),72898:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h){this.type=l,this.gameObject=h,this.active=!0},setActive:function(u){return this.active=u,this},destroy:function(){this.gameObject=null,this.active=!1}});C.exports=y}),44553:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a){o===void 0&&(o="__WHITE"),d===void 0&&(d=.005),a===void 0&&(a=.005),y.call(this,u.DISPLACEMENT,r),this.x=d,this.y=a,this.glTexture,this.setTexture(o)},setTexture:function(h){var r=this.gameObject.scene.sys.textures.getFrame(h);return r&&(this.glTexture=r.glTexture),this}});C.exports=l}),68531:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f){d===void 0&&(d=4),a===void 0&&(a=0),f===void 0&&(f=!1),y.call(this,u.GLOW,r),this.outerStrength=d,this.innerStrength=a,this.knockout=f,this.glcolor=[1,1,1,1],o!==void 0&&(this.color=o)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});C.exports=l}),37102:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f,v,c,p,m){a===void 0&&(a=.2),f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=1),m===void 0&&(m=0),y.call(this,u.GRADIENT,r),this.alpha=a,this.size=m,this.fromX=f,this.fromY=v,this.toX=c,this.toY=p,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],o!=null&&(this.color1=o),d!=null&&(this.color2=d)},color1:{get:function(){var h=this.glcolor1;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var r=this.glcolor1;r[0]=h>>16&255,r[1]=h>>8&255,r[2]=h&255}},color2:{get:function(){var h=this.glcolor2;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var r=this.glcolor2;r[0]=h>>16&255,r[1]=h>>8&255,r[2]=h&255}}});C.exports=l}),86886:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o){o===void 0&&(o=1),y.call(this,u.PIXELATE,r),this.amount=o}});C.exports=l}),92322:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f,v,c,p){o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a=.1),f===void 0&&(f=1),c===void 0&&(c=6),p===void 0&&(p=1),y.call(this,u.SHADOW,r),this.x=o,this.y=d,this.decay=a,this.power=f,this.glcolor=[0,0,0,1],this.samples=c,this.intensity=p,v!==void 0&&(this.color=v)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});C.exports=l}),39563:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f){o===void 0&&(o=.5),d===void 0&&(d=.5),a===void 0&&(a=3),f===void 0&&(f=!1),y.call(this,u.SHINE,r),this.speed=o,this.lineWidth=d,this.gradient=a,this.reveal=f}});C.exports=l}),56448:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f){o===void 0&&(o=.5),d===void 0&&(d=.5),a===void 0&&(a=.5),f===void 0&&(f=.5),y.call(this,u.VIGNETTE,r),this.x=o,this.y=d,this.radius=a,this.strength=f}});C.exports=l}),38433:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72898),u=s(14811),l=new g({Extends:y,initialize:function(r,o,d,a,f){o===void 0&&(o=.1),d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=!1),y.call(this,u.WIPE,r),this.progress=0,this.wipeWidth=o,this.direction=d,this.axis=a,this.reveal=f}});C.exports=l}),14811:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};C.exports=R}),66064:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(79291),y=s(14811),u={Barrel:s(20122),Controller:s(72898),Bloom:s(32251),Blur:s(9047),Bokeh:s(27885),Circle:s(12578),ColorMatrix:s(15802),Displacement:s(44553),Glow:s(68531),Gradient:s(37102),Pixelate:s(86886),Shadow:s(92322),Shine:s(39563),Vignette:s(56448),Wipe:s(38433)};u=g(!1,u,y),C.exports=u}),25305:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10312),y=s(23568),u=function(l,h,r){h.x=y(r,"x",0),h.y=y(r,"y",0),h.depth=y(r,"depth",0),h.flipX=y(r,"flipX",!1),h.flipY=y(r,"flipY",!1);var o=y(r,"scale",null);typeof o=="number"?h.setScale(o):o!==null&&(h.scaleX=y(o,"x",1),h.scaleY=y(o,"y",1));var d=y(r,"scrollFactor",null);typeof d=="number"?h.setScrollFactor(d):d!==null&&(h.scrollFactorX=y(d,"x",1),h.scrollFactorY=y(d,"y",1)),h.rotation=y(r,"rotation",0);var a=y(r,"angle",null);a!==null&&(h.angle=a),h.alpha=y(r,"alpha",1);var f=y(r,"origin",null);if(typeof f=="number")h.setOrigin(f);else if(f!==null){var v=y(f,"x",.5),c=y(f,"y",.5);h.setOrigin(v,c)}h.blendMode=y(r,"blendMode",g.NORMAL),h.visible=y(r,"visible",!0);var p=y(r,"add",!0);return p&&l.sys.displayList.add(h),h.preUpdate&&l.sys.updateList.add(h),h};C.exports=u}),13059:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(23568),y=function(u,l){var h=g(l,"anims",null);if(h===null)return u;if(typeof h=="string")u.anims.play(h);else if(typeof h=="object"){var r=u.anims,o=g(h,"key",void 0);if(o){var d=g(h,"startFrame",void 0),a=g(h,"delay",0),f=g(h,"repeat",0),v=g(h,"repeatDelay",0),c=g(h,"yoyo",!1),p=g(h,"play",!1),m=g(h,"delayedPlay",0),T={key:o,delay:a,repeat:f,repeatDelay:v,yoyo:c,startFrame:d};p?r.play(T):m>0?r.playAfterDelay(T,m):r.load(T)}}return u};C.exports=y}),8050:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(73162),u=s(37277),l=s(51708),h=s(44594),r=s(19186),o=new g({Extends:y,initialize:function(a){y.call(this,a),this.sortChildrenFlag=!1,this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.parentContainer&&d.parentContainer.remove(d),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(l.ADDED_TO_SCENE,d,this.scene),this.events.emit(h.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(l.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,a){return d._depth-a._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list;d.length;)d[0].destroy(!0);this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});u.register("DisplayList",o,"displayList"),C.exports=o}),95643:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(53774),u=s(45893),l=s(50792),h=s(51708),r=s(44594),o=new g({Extends:l,initialize:function(a,f){l.call(this),this.scene=a,this.displayList=null,this.type=f,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),a.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(d,a){return this.data||(this.data=new u(this)),this.data.set(d,a),this},incData:function(d,a){return this.data||(this.data=new u(this)),this.data.inc(d,a),this},toggleData:function(d){return this.data||(this.data=new u(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new u(this)),this.data.get(d)},setInteractive:function(d,a,f){return this.scene.sys.input.enable(this,d,a,f),this},disableInteractive:function(d){return d===void 0&&(d=!1),this.scene.sys.input.disable(this,d),this},removeInteractive:function(d){return d===void 0&&(d=!1),this.scene.sys.input.clear(this),d&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return y(this)},willRender:function(d){var a=this.displayList&&this.displayList.active?this.displayList.willRender(d):!0;return!(!a||o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,a=this.parentContainer,f=[];a&&(f.unshift(a.getIndex(d)),d=a,a.parentContainer);)a=a.parentContainer;return this.displayList?f.unshift(this.displayList.getIndex(d)):f.unshift(this.scene.sys.displayList.getIndex(d)),f},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),d.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d&&d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var d=null;return this.parentContainer?d=this.parentContainer.list:this.displayList&&(d=this.displayList.list),d},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});o.RENDER_MASK=15,C.exports=o}),44603:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(37277),u=s(44594),l=new g({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,r){l.prototype.hasOwnProperty(h)||(l.prototype[h]=r)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},y.register("GameObjectCreator",l,"make"),C.exports=l}),39429:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(37277),u=s(44594),l=new g({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,r){l.prototype.hasOwnProperty(h)||(l.prototype[h]=r)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},y.register("GameObjectFactory",l,"add"),C.exports=l}),91296:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(61340),y=new g,u=new g,l=new g,h={camera:y,sprite:u,calc:l},r=function(o,d,a){var f=y,v=u,c=l;return v.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),f.copyFrom(d.matrix),a?(f.multiplyWithOffset(a,-d.scrollX*o.scrollFactorX,-d.scrollY*o.scrollFactorY),v.e=o.x,v.f=o.y):(v.e-=d.scrollX*o.scrollFactorX,v.f-=d.scrollY*o.scrollFactorY),f.multiply(v,c),h};C.exports=r}),45027:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(25774),u=s(37277),l=s(44594),h=new g({Extends:y,initialize:function(o){y.call(this),this.checkQueue=!0,this.scene=o,this.systems=o.sys,o.sys.events.once(l.BOOT,this.boot,this),o.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(l.PRE_UPDATE,this.update,this),r.on(l.UPDATE,this.sceneUpdate,this),r.once(l.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,o){for(var d=this._active,a=d.length,f=0;f<a;f++){var v=d[f];v.active&&v.preUpdate.call(v,r,o)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var o=this.systems.events;o.off(l.PRE_UPDATE,this.update,this),o.off(l.UPDATE,this.sceneUpdate,this),o.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});u.register("UpdateList",h,"updateList"),C.exports=h}),3217:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l,h,r,o,d,a,f,v,c,p,m){var T=y.x-g.displayOriginX+l,E=y.y-g.displayOriginY+h,P=T+y.w,w=E+y.h,A=r.a,b=r.b,O=r.c,I=r.d,D=r.e,B=r.f,k=T*A+E*O+D,N=T*b+E*I+B,H=T*A+w*O+D,$=T*b+w*I+B,J=P*A+w*O+D,q=P*b+w*I+B,Y=P*A+E*O+D,K=P*b+E*I+B;o&&(k=Math.round(k),N=Math.round(N),H=Math.round(H),$=Math.round($),J=Math.round(J),q=Math.round(q),Y=Math.round(Y),K=Math.round(K)),s.batchQuad(g,k,N,H,$,J,q,Y,K,u.u0,u.v0,u.u1,u.v1,d,a,f,v,c,p,m)};C.exports=R}),53048:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){if(y===void 0&&(y=!1),u===void 0)return u={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},u;var l=s.text,h=l.length,r=s.maxWidth,o=s.wordWrapCharCode,d=Number.MAX_VALUE,a=Number.MAX_VALUE,f=0,v=0,c=s.fontData.chars,p=s.fontData.lineHeight,m=s.letterSpacing,T=s.lineSpacing,E=0,P=0,w=0,A=null,b=s._align,O=0,I=0,D=s.fontSize/s.fontData.size,B=D*s.scaleX,k=D*s.scaleY,N=null,H=0,$=[],J=Number.MAX_VALUE,q=0,Y=0,K=0,V,U,Z,et=[],st=[],rt=null,at=function(fe,Le){for(var $t=0,he=0;he<fe.length;he++){var Gt=fe.charCodeAt(he),ve=Le.chars[Gt];ve&&($t+=ve.xAdvance)}return $t*B};if(r>0){Z=l.split(`
`);var ut=[];for(V=0;V<Z.length;V++){var vt=Z[V],pt="",gt="",yt="",mt="";for(U=0;U<vt.length;U++)if(w=vt.charCodeAt(U),pt+=vt[U],w===o||U===vt.length-1){mt=yt+pt;var Tt=at(mt,s.fontData);Tt<=r?yt=mt:(gt=gt.slice(0,-1),gt+=(gt?`
`:"")+yt,yt=pt),pt=""}gt=gt.slice(0,-1),gt+=(gt?`
`:"")+yt,ut.push(gt)}l=ut.join(`
`),u.wrappedText=l,h=l.length}var At=0;for(V=0;V<h;V++){if(w=l.charCodeAt(V),w===10){rt!==null&&(et.push({word:rt.word,i:rt.i,x:rt.x*B,y:rt.y*k,w:rt.w*B,h:rt.h*k}),rt=null),N=null,$[Y]=K,K>q&&(q=K),K<J&&(J=K),Y++,K=0,E=0,P=(p+T)*Y;continue}if(A=c[w],!!A){if(O=E,I=P,N!==null){var Rt=A.kerning[H];O+=Rt!==void 0?Rt:0}d>O&&(d=O),a>I&&(a=I);var Lt=O+A.xAdvance,Ct=I+p;f<Lt&&(f=Lt),v<Ct&&(v=Ct);var Et=A.xOffset+A.xAdvance+(Rt!==void 0?Rt:0);w===o?rt!==null&&(et.push({word:rt.word,i:rt.i,x:rt.x*B,y:rt.y*k,w:rt.w*B,h:rt.h*k}),rt=null):(rt===null&&(rt={word:"",i:At,x:E,y:P,w:0,h:p}),rt.word=rt.word.concat(l[V]),rt.w+=Et),st.push({i:At,idx:V,char:l[V],code:w,x:(A.xOffset+O)*D,y:(A.yOffset+P)*D,w:A.width*D,h:A.height*D,t:P*D,r:Lt*D,b:p*D,line:Y,glyph:A}),E+=A.xAdvance+m+(Rt!==void 0?Rt:0),N=A,H=w,K=Lt*D,At++}}if(rt!==null&&et.push({word:rt.word,i:rt.i,x:rt.x*B,y:rt.y*k,w:rt.w*B,h:rt.h*k}),$[Y]=K,K>q&&(q=K),K<J&&(J=K),b>0)for(var Mt=0;Mt<st.length;Mt++){var zt=st[Mt];if(b===1){var Zt=(q-$[zt.line])/2;zt.x+=Zt,zt.r+=Zt}else if(b===2){var oe=q-$[zt.line];zt.x+=oe,zt.r+=oe}}var Qt=u.local,jt=u.global;return Z=u.lines,Qt.x=d*D,Qt.y=a*D,Qt.width=f*D,Qt.height=v*D,jt.x=s.x-s._displayOriginX+d*B,jt.y=s.y-s._displayOriginY+a*k,jt.width=f*B,jt.height=v*k,Z.shortest=J,Z.longest=q,Z.lengths=$,g&&(Qt.x=Math.ceil(Qt.x),Qt.y=Math.ceil(Qt.y),Qt.width=Math.ceil(Qt.width),Qt.height=Math.ceil(Qt.height),jt.x=Math.ceil(jt.x),jt.y=Math.ceil(jt.y),jt.width=Math.ceil(jt.width),jt.height=Math.ceil(jt.height),Z.shortest=Math.ceil(J),Z.longest=Math.ceil(q)),y&&(s._displayOriginX=s.originX*Qt.width,s._displayOriginY=s.originY*Qt.height,jt.x=s.x-s._displayOriginX*s.scaleX,jt.y=s.y-s._displayOriginY*s.scaleY,g&&(jt.x=Math.ceil(jt.x),jt.y=Math.ceil(jt.y))),u.words=et,u.characters=st,u.lines.height=p,u.scale=D,u.scaleX=s.scaleX,u.scaleY=s.scaleY,u};C.exports=R}),61327:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(21859),y=function(u,l,h,r,o,d,a){var f=u.sys.textures.get(h),v=f.get(r),c=u.sys.cache.xml.get(o);if(v&&c){var p=g(c,v,d,a,f);return u.sys.cache.bitmapFont.add(l,{data:p,texture:h,frame:r,fromAtlas:!0}),!0}else return!1};C.exports=y}),6925:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35154),y=function(u,l){var h=l.width,r=l.height,o=Math.floor(h/2),d=Math.floor(r/2),a=g(l,"chars","");if(a!==""){var f=g(l,"image",""),v=u.sys.textures.getFrame(f),c=v.cutX,p=v.cutY,m=v.source.width,T=v.source.height,E=g(l,"offset.x",0),P=g(l,"offset.y",0),w=g(l,"spacing.x",0),A=g(l,"spacing.y",0),b=g(l,"lineSpacing",0),O=g(l,"charsPerRow",null);O===null&&(O=m/h,O>a.length&&(O=a.length));for(var I=E,D=P,B={retroFont:!0,font:f,size:h,lineHeight:r+b,chars:{}},k=0,N=0;N<a.length;N++){var H=a.charCodeAt(N),$=(c+I)/m,J=(p+D)/T,q=(c+I+h)/m,Y=(p+D+r)/T;B.chars[H]={x:I,y:D,width:h,height:r,centerX:o,centerY:d,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:$,v0:J,u1:q,v1:Y},k++,k===O?(k=0,I=E,D+=r+A):I+=h+w}var K={data:B,frame:null,texture:f};return K}};C.exports=y}),21859:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function R(g,y){return parseInt(g.getAttribute(y),10)}var s=function(g,y,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0);var r=y.cutX,o=y.cutY,d=y.source.width,a=y.source.height,f=y.sourceIndex,v={},c=g.getElementsByTagName("info")[0],p=g.getElementsByTagName("common")[0];v.font=c.getAttribute("face"),v.size=R(c,"size"),v.lineHeight=R(p,"lineHeight")+l,v.chars={};var m=g.getElementsByTagName("char"),T=y!==void 0&&y.trimmed;if(T)var E=y.height,P=y.width;for(var w=0;w<m.length;w++){var A=m[w],b=R(A,"id"),O=String.fromCharCode(b),I=R(A,"x"),D=R(A,"y"),B=R(A,"width"),k=R(A,"height");T&&(I<P&&(P=I),D<E&&(E=D)),T&&E!==0&&P!==0&&(I-=y.x,D-=y.y);var N=(r+I)/d,H=(o+D)/a,$=(r+I+B)/d,J=(o+D+k)/a;if(v.chars[b]={x:I,y:D,width:B,height:k,centerX:Math.floor(B/2),centerY:Math.floor(k/2),xOffset:R(A,"xoffset"),yOffset:R(A,"yoffset"),xAdvance:R(A,"xadvance")+u,data:{},kerning:{},u0:N,v0:H,u1:$,v1:J},h&&B!==0&&k!==0){var q=h.add(O,f,I,D,B,k);q&&q.setUVs(B,k,N,H,$,J)}}var Y=g.getElementsByTagName("kerning");for(w=0;w<Y.length;w++){var K=Y[w],V=R(K,"first"),U=R(K,"second"),Z=R(K,"amount");v.chars[U].kerning[V]=Z}return v};C.exports=s}),196:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87662),y=s(79291),u={Parse:s(6925)};u=y(!1,u,g),C.exports=u}),87662:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};C.exports=R}),2638:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(22186),y=s(83419),u=s(12310),l=new y({Extends:g,Mixins:[u],initialize:function(r,o,d,a,f,v,c){g.call(this,r,o,d,a,f,v,c),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,r){return this.cropWidth=h,this.cropHeight=r,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});C.exports=l}),86741:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20926),y=function(u,l,h,r){var o=l._text,d=o.length,a=u.currentContext;if(!(d===0||!g(u,a,l,h,r))){h.addToRenderList(l);var f=l.fromAtlas?l.frame:l.texture.frames.__BASE,v=l.displayCallback,c=l.callbackData,p=l.fontData.chars,m=l.fontData.lineHeight,T=l._letterSpacing,E=0,P=0,w=0,A=null,b=0,O=0,I=0,D=0,B=0,k=0,N=null,H=0,$=l.frame.source.image,J=f.cutX,q=f.cutY,Y=0,K=0,V=l._fontSize/l.fontData.size,U=l._align,Z=0,et=0;l.getTextBounds(!1);var st=l._bounds.lines;U===1?et=(st.longest-st.lengths[0])/2:U===2&&(et=st.longest-st.lengths[0]),a.translate(-l.displayOriginX,-l.displayOriginY);var rt=h.roundPixels;l.cropWidth>0&&l.cropHeight>0&&(a.beginPath(),a.rect(0,0,l.cropWidth,l.cropHeight),a.clip());for(var at=0;at<d;at++){if(K=V,Y=0,w=o.charCodeAt(at),w===10){Z++,U===1?et=(st.longest-st.lengths[Z])/2:U===2&&(et=st.longest-st.lengths[Z]),E=0,P+=m,N=null;continue}if(A=p[w],!!A){if(b=J+A.x,O=q+A.y,I=A.width,D=A.height,B=A.xOffset+E-l.scrollX,k=A.yOffset+P-l.scrollY,N!==null){var ut=A.kerning[H];B+=ut!==void 0?ut:0}if(v){c.index=at,c.charCode=w,c.x=B,c.y=k,c.scale=K,c.rotation=Y,c.data=A.data;var vt=v(c);B=vt.x,k=vt.y,K=vt.scale,Y=vt.rotation}B*=K,k*=K,B+=et,E+=A.xAdvance+T+(ut!==void 0?ut:0),N=A,H=w,!(I===0||D===0||w===32)&&(rt&&(B=Math.round(B),k=Math.round(k)),a.save(),a.translate(B,k),a.rotate(Y),a.scale(K,K),a.drawImage($,b,O,I,D,0,0,I,D),a.restore())}}a.restore()}};C.exports=y}),11164:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2638),y=s(25305),u=s(44603),l=s(23568);u.register("dynamicBitmapText",function(h,r){h===void 0&&(h={});var o=l(h,"font",""),d=l(h,"text",""),a=l(h,"size",!1),f=new g(this.scene,0,0,o,d,a);return r!==void 0&&(h.add=r),y(this.scene,f,h),f})}),72566:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2638),y=s(39429);y.register("dynamicBitmapText",function(u,l,h,r,o){return this.displayList.add(new g(this.scene,u,l,h,r,o))})}),12310:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(73482),u=s(86741),C.exports={renderWebGL:y,renderCanvas:u}}),73482:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(61340),u=s(70554),l=new y,h=function(r,o,d,a){var f=o.text,v=f.length;if(v!==0){d.addToRenderList(o);var c=r.pipelines.set(o.pipeline,o),p=g(o,d,a);r.pipelines.preBatch(o);var m=p.sprite,T=p.calc,E=l,P=o.cropWidth>0||o.cropHeight>0;P&&(c.flush(),r.pushScissor(T.tx,T.ty,o.cropWidth*T.scaleX,o.cropHeight*T.scaleY));var w=o.frame,A=w.glTexture,b=o.tintFill,O=u.getTintAppendFloatAlpha(o.tintTopLeft,d.alpha*o._alphaTL),I=u.getTintAppendFloatAlpha(o.tintTopRight,d.alpha*o._alphaTR),D=u.getTintAppendFloatAlpha(o.tintBottomLeft,d.alpha*o._alphaBL),B=u.getTintAppendFloatAlpha(o.tintBottomRight,d.alpha*o._alphaBR),k=c.setGameObject(o),N=0,H=0,$=0,J=0,q=o.letterSpacing,Y,K=0,V=0,U,Z=o.scrollX,et=o.scrollY,st=o.fontData,rt=st.chars,at=st.lineHeight,ut=o.fontSize/st.size,vt=0,pt=o._align,gt=0,yt=0,mt=o.getTextBounds(!1);o.maxWidth>0&&(f=mt.wrappedText,v=f.length);var Tt=o._bounds.lines;pt===1?yt=(Tt.longest-Tt.lengths[0])/2:pt===2&&(yt=Tt.longest-Tt.lengths[0]);for(var At=d.roundPixels,Rt=o.displayCallback,Lt=o.callbackData,Ct=0;Ct<v;Ct++){if($=f.charCodeAt(Ct),$===10){gt++,pt===1?yt=(Tt.longest-Tt.lengths[gt])/2:pt===2&&(yt=Tt.longest-Tt.lengths[gt]),N=0,H+=at,U=null;continue}if(Y=rt[$],!!Y){K=Y.width,V=Y.height;var Et=Y.xOffset+N-Z,Mt=Y.yOffset+H-et;if(U!==null){var zt=Y.kerning[J]||0;Et+=zt,N+=zt}if(N+=Y.xAdvance+q,U=Y,J=$,!(K===0||V===0||$===32)){if(ut=o.fontSize/o.fontData.size,vt=0,Rt){Lt.color=0,Lt.tint.topLeft=O,Lt.tint.topRight=I,Lt.tint.bottomLeft=D,Lt.tint.bottomRight=B,Lt.index=Ct,Lt.charCode=$,Lt.x=Et,Lt.y=Mt,Lt.scale=ut,Lt.rotation=vt,Lt.data=Y.data;var Zt=Rt(Lt);Et=Zt.x,Mt=Zt.y,ut=Zt.scale,vt=Zt.rotation,Zt.color?(O=Zt.color,I=Zt.color,D=Zt.color,B=Zt.color):(O=Zt.tint.topLeft,I=Zt.tint.topRight,D=Zt.tint.bottomLeft,B=Zt.tint.bottomRight),O=u.getTintAppendFloatAlpha(O,d.alpha*o._alphaTL),I=u.getTintAppendFloatAlpha(I,d.alpha*o._alphaTR),D=u.getTintAppendFloatAlpha(D,d.alpha*o._alphaBL),B=u.getTintAppendFloatAlpha(B,d.alpha*o._alphaBR)}Et*=ut,Mt*=ut,Et-=o.displayOriginX,Mt-=o.displayOriginY,Et+=yt,E.applyITRS(Et,Mt,vt,ut,ut),T.multiply(E,m);var oe=Y.u0,Qt=Y.v0,jt=Y.u1,fe=Y.v1,Le=K,$t=V,he=m.e,Gt=m.f,ve=$t*m.c+m.e,Li=$t*m.d+m.f,hs=Le*m.a+$t*m.c+m.e,Ls=Le*m.b+$t*m.d+m.f,bs=Le*m.a+m.e,li=Le*m.b+m.f;At&&(he=Math.round(he),Gt=Math.round(Gt),ve=Math.round(ve),Li=Math.round(Li),hs=Math.round(hs),Ls=Math.round(Ls),bs=Math.round(bs),li=Math.round(li)),c.shouldFlush(6)&&(c.flush(),k=c.setGameObject(o)),c.batchQuad(o,he,Gt,ve,Li,hs,Ls,bs,li,oe,Qt,jt,fe,O,I,D,B,b,A,k)}}}P&&(c.flush(),r.popScissor()),r.pipelines.postBatch(o)}};C.exports=h}),22186:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(45319),u=s(31401),l=s(95643),h=s(53048),r=s(61327),o=s(21859),d=s(87841),a=s(18658),f=new g({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,a],initialize:function(c,p,m,T,E,P,w){E===void 0&&(E=""),w===void 0&&(w=0),l.call(this,c,"BitmapText"),this.font=T;var A=this.scene.sys.cache.bitmapFont.get(T);if(!A)throw new Error("Invalid BitmapText key: "+T);this.fontData=A.data,this._text="",this._fontSize=P||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=w,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=A.fromAtlas,this.setTexture(A.texture,A.frame),this.setPosition(p,m),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(E)},setLeftAlign:function(){return this._align=f.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=f.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=f.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(v){return this._fontSize=v,this._dirty=!0,this},setLetterSpacing:function(v){return v===void 0&&(v=0),this._letterSpacing=v,this._dirty=!0,this},setLineSpacing:function(v){return v===void 0&&(v=0),this.lineSpacing=v,this},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this.text&&(this._text=v.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(v,c,p,m){return v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=.5),this.dropShadowX=v,this.dropShadowY=c,this.dropShadowColor=p,this.dropShadowAlpha=m,this},setCharacterTint:function(v,c,p,m,T,E,P){v===void 0&&(v=0),c===void 0&&(c=1),p===void 0&&(p=!1),m===void 0&&(m=-1),T===void 0&&(T=m,E=m,P=m);var w=this.text.length;c===-1&&(c=w),v<0&&(v=w+v),v=y(v,0,w-1);for(var A=y(v+c,v,w),b=this.charColors,O=v;O<A;O++){var I=b[O];if(m===-1)b[O]=null;else{var D=p?1:0;I?(I.tintEffect=D,I.tintTL=m,I.tintTR=T,I.tintBL=E,I.tintBR=P):b[O]={tintEffect:D,tintTL:m,tintTR:T,tintBL:E,tintBR:P}}}return this},setWordTint:function(v,c,p,m,T,E,P){c===void 0&&(c=1);for(var w=this.getTextBounds(),A=w.words,b=typeof v=="number",O=0,I=0;I<A.length;I++){var D=A[I];if((b&&I===v||!b&&D.word===v)&&(this.setCharacterTint(D.i,D.word.length,p,m,T,E,P),O++,O===c))return this}return this},getTextBounds:function(v){var c=this._bounds;return(this._dirty||v||this.scaleX!==c.scaleX||this.scaleY!==c.scaleY)&&(h(this,v,!0,c),this._dirty=!1),c},getCharacterAt:function(v,c,p){for(var m=this.getLocalPoint(v,c,null,p),T=this.getTextBounds(),E=T.characters,P=new d,w=0;w<E.length;w++){var A=E[w];if(P.setTo(A.x,A.t,A.r-A.x,A.b),P.contains(m.x,m.y))return A}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(v,c,p){c===void 0&&(c=this._fontSize),p===void 0&&(p=this._align);var m=this.scene.sys.cache.bitmapFont.get(v);return m&&(this.font=v,this.fontData=m.data,this._fontSize=c,this._align=p,this.fromAtlas=m.fromAtlas===!0,this.setTexture(m.texture,m.frame),h(this,!1,!0,this._bounds)),this},setMaxWidth:function(v,c){return this._maxWidth=v,this._dirty=!0,c!==void 0&&(this.wordWrapCharCode=c),this},align:{set:function(v){this._align=v,this._dirty=!0},get:function(){return this._align}},text:{set:function(v){this.setText(v)},get:function(){return this._text}},fontSize:{set:function(v){this._fontSize=v,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(v){this._letterSpacing=v,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(v){this._lineSpacing=v,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(v){this._maxWidth=v,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var v=u.ToJSON(this),c={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return v.data=c,v},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});f.ALIGN_LEFT=0,f.ALIGN_CENTER=1,f.ALIGN_RIGHT=2,f.ParseFromAtlas=r,f.ParseXMLBitmapFont=o,C.exports=f}),37289:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20926),y=function(u,l,h,r){var o=l._text,d=o.length,a=u.currentContext;if(!(d===0||!g(u,a,l,h,r))){h.addToRenderList(l);var f=l.fromAtlas?l.frame:l.texture.frames.__BASE,v=l.fontData.chars,c=l.fontData.lineHeight,p=l._letterSpacing,m=l._lineSpacing,T=0,E=0,P=0,w=null,A=0,b=0,O=0,I=0,D=0,B=0,k=null,N=0,H=f.source.image,$=f.cutX,J=f.cutY,q=l._fontSize/l.fontData.size,Y=l._align,K=0,V=0,U=l.getTextBounds(!1);l.maxWidth>0&&(o=U.wrappedText,d=o.length);var Z=l._bounds.lines;Y===1?V=(Z.longest-Z.lengths[0])/2:Y===2&&(V=Z.longest-Z.lengths[0]),a.translate(-l.displayOriginX,-l.displayOriginY);for(var et=h.roundPixels,st=0;st<d;st++){if(P=o.charCodeAt(st),P===10){K++,Y===1?V=(Z.longest-Z.lengths[K])/2:Y===2&&(V=Z.longest-Z.lengths[K]),T=0,E+=c+m,k=null;continue}if(w=v[P],!!w){if(A=$+w.x,b=J+w.y,O=w.width,I=w.height,D=w.xOffset+T,B=w.yOffset+E,k!==null){var rt=w.kerning[N];D+=rt!==void 0?rt:0}D*=q,B*=q,D+=V,T+=w.xAdvance+p+(rt!==void 0?rt:0),k=w,N=P,!(O===0||I===0||P===32)&&(et&&(D=Math.round(D),B=Math.round(B)),a.save(),a.translate(D,B),a.scale(q,q),a.drawImage(H,A,b,O,I,0,0,O,I),a.restore())}}a.restore()}};C.exports=y}),57336:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(22186),y=s(25305),u=s(44603),l=s(23568),h=s(35154);u.register("bitmapText",function(r,o){r===void 0&&(r={});var d=h(r,"font",""),a=l(r,"text",""),f=l(r,"size",!1),v=h(r,"align",0),c=new g(this.scene,0,0,d,a,f,v);return o!==void 0&&(r.add=o),y(this.scene,c,r),c})}),34914:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(22186),y=s(39429);y.register("bitmapText",function(u,l,h,r,o,d){return this.displayList.add(new g(this.scene,u,l,h,r,o,d))})}),18658:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(33590),u=s(37289),C.exports={renderWebGL:y,renderCanvas:u}}),33590:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(3217),y=s(91296),u=s(70554),l=function(h,r,o,d){var a=r._text,f=a.length;if(f!==0){o.addToRenderList(r);var v=h.pipelines.set(r.pipeline,r),c=y(r,o,d).calc;h.pipelines.preBatch(r);var p=o.roundPixels,m=o.alpha,T=r.charColors,E=r.tintFill,P=u.getTintAppendFloatAlpha,w=P(r.tintTopLeft,m*r._alphaTL),A=P(r.tintTopRight,m*r._alphaTR),b=P(r.tintBottomLeft,m*r._alphaBL),O=P(r.tintBottomRight,m*r._alphaBR),I=r.frame.glTexture,D=v.setGameObject(r),B=r.getTextBounds(!1),k,N,H,$=B.characters,J=r.dropShadowX,q=r.dropShadowY,Y=J!==0||q!==0;if(Y){var K=r.dropShadowColor,V=r.dropShadowAlpha,U=P(K,m*V*r._alphaTL),Z=P(K,m*V*r._alphaTR),et=P(K,m*V*r._alphaBL),st=P(K,m*V*r._alphaBR);for(k=0;k<$.length;k++)N=$[k],H=N.glyph,!(N.code===32||H.width===0||H.height===0)&&g(v,r,N,H,J,q,c,p,U,Z,et,st,1,I,D)}for(k=0;k<$.length;k++)if(N=$[k],H=N.glyph,!(N.code===32||H.width===0||H.height===0))if(v.shouldFlush(6)&&(v.flush(),D=v.setGameObject(r)),T[N.i]){var rt=T[N.i],at=rt.tintEffect,ut=P(rt.tintTL,m*r._alphaTL),vt=P(rt.tintTR,m*r._alphaTR),pt=P(rt.tintBL,m*r._alphaBL),gt=P(rt.tintBR,m*r._alphaBR);g(v,r,N,H,0,0,c,p,ut,vt,pt,gt,at,I,D)}else g(v,r,N,H,0,0,c,p,w,A,b,O,E,I,D);h.pipelines.postBatch(r)}};C.exports=l}),6107:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(48011),y=s(46590),u=s(83419),l=s(31401),h=s(4327),r=s(95643),o=s(73162),d=new u({Extends:r,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,g],initialize:function(f,v,c,p,m){r.call(this,f,"Blitter"),this.setTexture(p,m),this.setPosition(v,c),this.initPipeline(),this.initPostPipeline(),this.children=new o,this.renderList=[],this.dirty=!1},create:function(a,f,v,c,p){c===void 0&&(c=!0),p===void 0&&(p=this.children.length),v===void 0?v=this.frame:v instanceof h||(v=this.texture.get(v));var m=new y(this,a,f,v,c);return this.children.addAt(m,p,!1),this.dirty=!0,m},createFromCallback:function(a,f,v,c){for(var p=this.createMultiple(f,v,c),m=0;m<p.length;m++){var T=p[m];a.call(this,T,m)}return p},createMultiple:function(a,f,v){f===void 0&&(f=this.frame.name),v===void 0&&(v=!0),Array.isArray(f)||(f=[f]);var c=[],p=this;return f.forEach(function(m){for(var T=0;T<a;T++)c.push(p.create(0,0,m,v))}),c},childCanRender:function(a){return a.visible&&a.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});C.exports=d}),72396:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=g.getRenderList();if(l.length!==0){var h=s.currentContext,r=y.alpha*g.alpha;if(r!==0){y.addToRenderList(g),h.globalCompositeOperation=s.blendModes[g.blendMode],h.imageSmoothingEnabled=!g.frame.source.scaleMode;var o=g.x-y.scrollX*g.scrollFactorX,d=g.y-y.scrollY*g.scrollFactorY;h.save(),u&&u.copyToContext(h);for(var a=y.roundPixels,f=0;f<l.length;f++){var v=l[f],c=v.flipX||v.flipY,p=v.frame,m=p.canvasData,T=p.x,E=p.y,P=1,w=1,A=v.alpha*r;A!==0&&(h.globalAlpha=A,c?(v.flipX&&(P=-1,T-=m.width),v.flipY&&(w=-1,E-=m.height),m.width>0&&m.height>0&&(h.save(),h.translate(v.x+o,v.y+d),h.scale(P,w),h.drawImage(p.source.image,m.x,m.y,m.width,m.height,T,E,m.width,m.height),h.restore())):(a&&(T=Math.round(T),E=Math.round(E)),m.width>0&&m.height>0&&h.drawImage(p.source.image,m.x,m.y,m.width,m.height,T+v.x+o,E+v.y+d,m.width,m.height)))}h.restore()}}};C.exports=R}),9403:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(6107),y=s(25305),u=s(44603),l=s(23568);u.register("blitter",function(h,r){h===void 0&&(h={});var o=l(h,"key",null),d=l(h,"frame",null),a=new g(this.scene,0,0,o,d);return r!==void 0&&(h.add=r),y(this.scene,a,h),a})}),12709:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(6107),y=s(39429);y.register("blitter",function(u,l,h,r){return this.displayList.add(new g(this.scene,u,l,h,r))})}),48011:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(99485),u=s(72396),C.exports={renderWebGL:y,renderCanvas:u}}),99485:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(61340),y=s(70554),u=new g,l=function(h,r,o,d){var a=r.getRenderList(),f=o.alpha*r.alpha;if(!(a.length===0||f===0)){o.addToRenderList(r);var v=h.pipelines.set(this.pipeline,r),c=o.scrollX*r.scrollFactorX,p=o.scrollY*r.scrollFactorY,m=u.copyFrom(o.matrix);d&&(m.multiplyWithOffset(d,-c,-p),c=0,p=0);var T=r.x-c,E=r.y-p,P=-1,w=!1,A=o.roundPixels;h.pipelines.preBatch(r);for(var b=0;b<a.length;b++){var O=a[b],I=O.frame,D=O.alpha*f;if(D!==0){var B=I.width,k=I.height,N=T+O.x+I.x,H=E+O.y+I.y;O.flipX&&(B*=-1,N+=I.width),O.flipY&&(k*=-1,H+=I.height);var $=m.setQuad(N,H,N+B,H+k,A),J=y.getTintAppendFloatAlpha(O.tint,D);if(I.sourceIndex!==P){var q=v.setGameObject(r,I);P=I.sourceIndex}v.batchQuad(r,$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],I.u0,I.v0,I.u1,I.v1,J,J,J,J,w,I.glTexture,q)&&(P=-1)}}h.pipelines.postBatch(r)}};C.exports=l}),46590:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(4327),u=new g({initialize:function(h,r,o,d,a){this.parent=h,this.x=r,this.y=o,this.frame=d,this.data={},this.tint=16777215,this._visible=a,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(l){return l===void 0?this.frame=this.parent.frame:l instanceof y&&l.texture===this.parent.texture?this.frame=l:this.frame=this.parent.texture.get(l),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(l,h,r){return this.x=l,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(l,h){return this.x=l,this.y=h,this},setFlipX:function(l){return this.flipX=l,this},setFlipY:function(l){return this.flipY=l,this},setFlip:function(l,h){return this.flipX=l,this.flipY=h,this},setVisible:function(l){return this.visible=l,this},setAlpha:function(l){return this.alpha=l,this},setTint:function(l){return this.tint=l,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(l){this.parent.dirty|=this._visible!==l,this._visible=l}},alpha:{get:function(){return this._alpha},set:function(l){this.parent.dirty|=this._alpha>0!=l>0,this._alpha=l}}});C.exports=u}),16005:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=2,u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l,h,r,o){return l===void 0&&(l=1),h===void 0?this.alpha=l:(this._alphaTL=g(l,0,1),this._alphaTR=g(h,0,1),this._alphaBL=g(r,0,1),this._alphaBR=g(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(l){var h=g(l,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~y:this.renderFlags|=y}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(l){var h=g(l,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=y)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(l){var h=g(l,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=y)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(l){var h=g(l,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=y)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(l){var h=g(l,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=y)}}};C.exports=u}),88509:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=2,u={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l){return l===void 0&&(l=1),this.alpha=l,this},alpha:{get:function(){return this._alpha},set:function(l){var h=g(l,0,1);this._alpha=h,h===0?this.renderFlags&=~y:this.renderFlags|=y}}};C.exports=u}),90065:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10312),y={_blendMode:g.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(u){typeof u=="string"&&(u=g[u]),u|=0,u>=-1&&(this._blendMode=u)}},setBlendMode:function(u){return this.blendMode=u,this}};C.exports=y}),94215:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,g){return this.width=s,this.height=g,this},setDisplaySize:function(s,g){return this.displayWidth=s,this.displayHeight=g,this}};C.exports=R}),61683:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={texture:null,frame:null,isCropped:!1,setCrop:function(s,g,y,u){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,g,y,u,this.flipX,this.flipY);else{var l=s;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};C.exports=R}),89272:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37105),y={_depth:0,depth:{get:function(){return this._depth},set:function(u){this.displayList&&this.displayList.queueDepthSort(),this._depth=u}},setDepth:function(u){return u===void 0&&(u=0),this.depth=u,this},setToTop:function(){var u=this.getDisplayList();return u&&g.BringToTop(u,this),this},setToBack:function(){var u=this.getDisplayList();return u&&g.SendToBack(u,this),this},setAbove:function(u){var l=this.getDisplayList();return l&&u&&g.MoveAbove(l,this,u),this},setBelow:function(u){var l=this.getDisplayList();return l&&u&&g.MoveBelow(l,this,u),this}};C.exports=y}),47059:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(66064),u=s(19133),l=new g({initialize:function(r,o){this.gameObject=r,this.isPost=o,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(h){return h===void 0&&(h=0),this.padding=h,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(h){if(!this.isPost){var r=this.gameObject.scene.sys.renderer;r&&r.pipelines?(this.gameObject.pipeline=r.pipelines.FX_PIPELINE,h!==void 0&&(this.padding=h),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var h=this.list,r=0;r<h.length;r++)h[r].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(h){var r;if(this.isPost){var o=this.gameObject.getPostPipeline(String(h.type));for(Array.isArray(o)||(o=[o]),r=0;r<o.length;r++){var d=o[r];if(d.controller===h){this.gameObject.removePostPipeline(d),h.destroy();break}}}else{var a=this.list;for(r=0;r<a.length;r++)a[r]===h&&(u(a,r),h.destroy())}return this.gameObject},disable:function(h){return h===void 0&&(h=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,h&&this.clear(),this.gameObject},add:function(h,r){if(this.isPost){var o=String(h.type);this.gameObject.setPostPipeline(o,r);var d=this.gameObject.getPostPipeline(o);if(d)return Array.isArray(d)&&(d=d.pop()),d&&(d.controller=h),h}else return this.enabled||this.enable(),this.list.push(h),h},addGlow:function(h,r,o,d,a,f){return this.add(new y.Glow(this.gameObject,h,r,o,d),{quality:a,distance:f})},addShadow:function(h,r,o,d,a,f,v){return this.add(new y.Shadow(this.gameObject,h,r,o,d,a,f,v))},addPixelate:function(h){return this.add(new y.Pixelate(this.gameObject,h))},addVignette:function(h,r,o,d){return this.add(new y.Vignette(this.gameObject,h,r,o,d))},addShine:function(h,r,o,d){return this.add(new y.Shine(this.gameObject,h,r,o,d))},addBlur:function(h,r,o,d,a,f){return this.add(new y.Blur(this.gameObject,h,r,o,d,a,f))},addGradient:function(h,r,o,d,a,f,v,c){return this.add(new y.Gradient(this.gameObject,h,r,o,d,a,f,v,c))},addBloom:function(h,r,o,d,a,f){return this.add(new y.Bloom(this.gameObject,h,r,o,d,a,f))},addColorMatrix:function(){return this.add(new y.ColorMatrix(this.gameObject))},addCircle:function(h,r,o,d,a){return this.add(new y.Circle(this.gameObject,h,r,o,d,a))},addBarrel:function(h){return this.add(new y.Barrel(this.gameObject,h))},addDisplacement:function(h,r,o){return this.add(new y.Displacement(this.gameObject,h,r,o))},addWipe:function(h,r,o){return this.add(new y.Wipe(this.gameObject,h,r,o))},addReveal:function(h,r,o){return this.add(new y.Wipe(this.gameObject,h,r,o,!0))},addBokeh:function(h,r,o){return this.add(new y.Bokeh(this.gameObject,h,r,o))},addTiltShift:function(h,r,o,d,a,f){return this.add(new y.Bokeh(this.gameObject,h,r,o,!0,d,a,f))},destroy:function(){this.clear(),this.gameObject=null}});C.exports=l}),54434:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,g){return this.flipX=s,this.flipY=g,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};C.exports=R}),8004:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=s(11520),u=s(26099),l={prepareBoundsOutput:function(h,r){if(r===void 0&&(r=!1),this.rotation!==0&&y(h,this.x,this.y,this.rotation),r&&this.parentContainer){var o=this.parentContainer.getBoundsTransformMatrix();o.transformPoint(h.x,h.y,h)}return h},getCenter:function(h,r){return h===void 0&&(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getTopLeft:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopCenter:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopRight:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getLeftCenter:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getRightCenter:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getBottomLeft:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomCenter:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomRight:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBounds:function(h){h===void 0&&(h=new g);var r,o,d,a,f,v,c,p;if(this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),m.transformPoint(h.x,h.y,h),r=h.x,o=h.y,this.getTopRight(h),m.transformPoint(h.x,h.y,h),d=h.x,a=h.y,this.getBottomLeft(h),m.transformPoint(h.x,h.y,h),f=h.x,v=h.y,this.getBottomRight(h),m.transformPoint(h.x,h.y,h),c=h.x,p=h.y}else this.getTopLeft(h),r=h.x,o=h.y,this.getTopRight(h),d=h.x,a=h.y,this.getBottomLeft(h),f=h.x,v=h.y,this.getBottomRight(h),c=h.x,p=h.y;return h.x=Math.min(r,d,f,c),h.y=Math.min(o,a,v,p),h.width=Math.max(r,d,f,c)-h.x,h.height=Math.max(o,a,v,p)-h.y,h}};C.exports=l}),8573:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(6858),y=s(80661),u={mask:null,setMask:function(l){return this.mask=l,this},clearMask:function(l){return l===void 0&&(l=!1),l&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(l,h,r,o,d){return l===void 0&&(this.texture||this.shader||this.geom)&&(l=this),new g(this.scene,l,h,r,o,d)},createGeometryMask:function(l){return l===void 0&&(this.type==="Graphics"||this.geom)&&(l=this),new y(this.scene,l)}};C.exports=u}),27387:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(s){this._displayOriginX=s,this.originX=s/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(s){this._displayOriginY=s,this.originY=s/this.height}},setOrigin:function(s,g){return s===void 0&&(s=.5),g===void 0&&(g=s),this.originX=s,this.originY=g,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(s,g){return s===void 0&&(s=0),g===void 0&&(g=s),this.displayOriginX=s,this.displayOriginY=g,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};C.exports=R}),37640:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39506),y=s(57355),u=s(35154),l=s(86353),h=s(26099),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function(o,d){d===void 0&&(d=this.pathConfig);var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this.path=o,d&&this.startFollow(d),this},setRotateToPath:function(o,d){return d===void 0&&(d=0),this.rotateToPath=o,this.pathRotationOffset=d,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,d){o===void 0&&(o={}),d===void 0&&(d=0);var a=this.pathTween;a&&a.isPlaying()&&a.stop(),typeof o=="number"&&(o={duration:o}),o.from=u(o,"from",0),o.to=u(o,"to",1);var f=y(o,"positionOnPath",!1);this.rotateToPath=y(o,"rotateToPath",!1),this.pathRotationOffset=u(o,"rotationOffset",0);var v=u(o,"startAt",d);if(v&&(o.onStart=function(p){var m=p.data[0];m.progress=v,m.elapsed=m.duration*v;var T=m.ease(m.progress);m.current=m.start+(m.end-m.start)*T,m.setTargetValue()}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),o.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),f&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath){var c=this.path.getPoint(.1);this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+g(this.pathRotationOffset)}return this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o&&o.data){var d=o.data[0],a=this.pathDelta,f=this.pathVector;if(a.copy(f).negate(),d.state===l.COMPLETE){this.path.getPoint(d.end,f),a.add(f),f.add(this.pathOffset),this.setPosition(f.x,f.y);return}else if(d.state!==l.PLAYING_FORWARD&&d.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),f),a.add(f),f.add(this.pathOffset);var v=this.x,c=this.y;this.setPosition(f.x,f.y);var p=this.x-v,m=this.y-c;if(p===0&&m===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(m,p)+g(this.pathRotationOffset))}}};C.exports=r}),72699:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62644),y={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(u){this.pipelineData={};var l=this.scene.sys.renderer;if(!l)return!1;var h=l.pipelines;if(h){u===void 0&&(u=h.default);var r=h.get(u);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(u,l,h){var r=this.scene.sys.renderer;if(!r)return this;var o=r.pipelines;if(o){var d=o.get(u);d&&(this.pipeline=d),l&&(this.pipelineData=h?g(l):l)}return this},setPipelineData:function(u,l){var h=this.pipelineData;return l===void 0?delete h[u]:h[u]=l,this},resetPipeline:function(u){return u===void 0&&(u=!1),this.pipeline=this.defaultPipeline,u&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};C.exports=y}),17581:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62644),y=s(47059),u=s(19133),l={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(h){this.postPipelines=[],this.postPipelineData={},this.postFX=new y(this,!0),h&&(this.preFX=new y(this,!1))},setPostPipeline:function(h,r,o){var d=this.scene.sys.renderer;if(!d)return this;var a=d.pipelines;if(a){Array.isArray(h)||(h=[h]);for(var f=0;f<h.length;f++){var v=a.getPostPipeline(h[f],this,r);v&&this.postPipelines.push(v)}r&&(this.postPipelineData=o?g(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(h,r){var o=this.postPipelineData;return r===void 0?delete o[h]:o[h]=r,this},getPostPipeline:function(h){for(var r=typeof h=="string",o=this.postPipelines,d=[],a=0;a<o.length;a++){var f=o[a];(r&&f.name===h||!r&&f instanceof h)&&d.push(f)}return d.length===1?d[0]:d},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var r=this.postPipelines,o=0;o<r.length;o++)r[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.postPipelineData={})},removePostPipeline:function(h){for(var r=typeof h=="string",o=this.postPipelines,d=o.length-1;d>=0;d--){var a=o[d];(r&&a.name===h||!r&&a===h)&&(a.destroy(),u(o,d))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};C.exports=l}),80227:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(s,g){return g===void 0&&(g=s),this.scrollFactorX=s,this.scrollFactorY=g,this}};C.exports=R}),16736:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(s){this.scaleX=s/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(s){this.scaleY=s/this.frame.realHeight}},setSizeToFrame:function(s){s||(s=this.frame),this.width=s.realWidth,this.height=s.realHeight;var g=this.input;return g&&!g.customHitArea&&(g.hitArea.width=this.width,g.hitArea.height=this.height),this},setSize:function(s,g){return this.width=s,this.height=g,this},setDisplaySize:function(s,g){return this.displayWidth=s,this.displayHeight=g,this}};C.exports=R}),37726:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(4327),y=8,u={texture:null,frame:null,isCropped:!1,setTexture:function(l,h,r,o){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h,r,o)},setFrame:function(l,h,r){return h===void 0&&(h=!0),r===void 0&&(r=!0),l instanceof g?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~y:this.renderFlags|=y,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};C.exports=u}),79812:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(4327),y=8,u={texture:null,frame:null,isCropped:!1,setCrop:function(l,h,r,o){if(l===void 0)this.isCropped=!1;else if(this.frame){if(typeof l=="number")this.frame.setCropUVs(this._crop,l,h,r,o,this.flipX,this.flipY);else{var d=l;this.frame.setCropUVs(this._crop,d.x,d.y,d.width,d.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(l,h){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h)},setFrame:function(l,h,r){return h===void 0&&(h=!0),r===void 0&&(r=!0),l instanceof g?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~y:this.renderFlags|=y,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};C.exports=u}),27472:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(s,g,y,u){return s===void 0&&(s=16777215),g===void 0&&(g=s,y=s,u=s),this.tintTopLeft=s,this.tintTopRight=g,this.tintBottomLeft=y,this.tintBottomRight=u,this.tintFill=!1,this},setTintFill:function(s,g,y,u){return this.setTint(s,g,y,u),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(s){this.setTint(s,s,s,s)}},isTinted:{get:function(){var s=16777215;return this.tintFill||this.tintTopLeft!==s||this.tintTopRight!==s||this.tintBottomLeft!==s||this.tintBottomRight!==s}}};C.exports=R}),53774:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g={name:s.name,type:s.type,x:s.x,y:s.y,depth:s.depth,scale:{x:s.scaleX,y:s.scaleY},origin:{x:s.originX,y:s.originY},flipX:s.flipX,flipY:s.flipY,rotation:s.rotation,alpha:s.alpha,visible:s.visible,blendMode:s.blendMode,textureKey:"",frameKey:"",data:{}};return s.texture&&(g.textureKey=s.texture.key,g.frameKey=s.frame.name),g};C.exports=R}),16901:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=s(61340),u=s(85955),l=s(86554),h=s(30954),r=s(26099),o=4,d={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(a){this._scaleX=a,this._scaleY=a,a===0?this.renderFlags&=~o:this.renderFlags|=o}},scaleX:{get:function(){return this._scaleX},set:function(a){this._scaleX=a,a===0?this.renderFlags&=~o:this._scaleY!==0&&(this.renderFlags|=o)}},scaleY:{get:function(){return this._scaleY},set:function(a){this._scaleY=a,a===0?this.renderFlags&=~o:this._scaleX!==0&&(this.renderFlags|=o)}},angle:{get:function(){return h(this._rotation*g.RAD_TO_DEG)},set:function(a){this.rotation=h(a)*g.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(a){this._rotation=l(a)}},setPosition:function(a,f,v,c){return a===void 0&&(a=0),f===void 0&&(f=a),v===void 0&&(v=0),c===void 0&&(c=0),this.x=a,this.y=f,this.z=v,this.w=c,this},copyPosition:function(a){return a.x!==void 0&&(this.x=a.x),a.y!==void 0&&(this.y=a.y),a.z!==void 0&&(this.z=a.z),a.w!==void 0&&(this.w=a.w),this},setRandomPosition:function(a,f,v,c){return a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=this.scene.sys.scale.width),c===void 0&&(c=this.scene.sys.scale.height),this.x=a+Math.random()*v,this.y=f+Math.random()*c,this},setRotation:function(a){return a===void 0&&(a=0),this.rotation=a,this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,this},setScale:function(a,f){return a===void 0&&(a=1),f===void 0&&(f=a),this.scaleX=a,this.scaleY=f,this},setX:function(a){return a===void 0&&(a=0),this.x=a,this},setY:function(a){return a===void 0&&(a=0),this.y=a,this},setZ:function(a){return a===void 0&&(a=0),this.z=a,this},setW:function(a){return a===void 0&&(a=0),this.w=a,this},getLocalTransformMatrix:function(a){return a===void 0&&(a=new y),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(a,f){a===void 0&&(a=new y);var v=this.parentContainer;if(!v)return this.getLocalTransformMatrix(a);for(f||(f=new y),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);v;)f.applyITRS(v.x,v.y,v._rotation,v._scaleX,v._scaleY),f.multiply(a,a),v=v.parentContainer;return a},getLocalPoint:function(a,f,v,c){v||(v=new r),c||(c=this.scene.sys.cameras.main);var p=c.scrollX,m=c.scrollY,T=a+p*this.scrollFactorX-p,E=f+m*this.scrollFactorY-m;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(T,E,v):u(T,E,this.x,this.y,this.rotation,this.scaleX,this.scaleY,v),this._originComponent&&(v.x+=this._displayOriginX,v.y+=this._displayOriginY),v},getParentRotation:function(){for(var a=0,f=this.parentContainer;f;)a+=f.rotation,f=f.parentContainer;return a}};C.exports=d}),61340:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(36383),u=s(26099),l=new g({initialize:function(r,o,d,a,f,v){r===void 0&&(r=1),o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a=1),f===void 0&&(f=0),v===void 0&&(v=0),this.matrix=new Float32Array([r,o,d,a,f,v,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,r=h[0],o=h[1],d=h[2],a=h[3];return r||o?o>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):d||a?y.TAU-(a>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,r){var o=this.matrix;return o[4]=o[0]*h+o[2]*r+o[4],o[5]=o[1]*h+o[3]*r+o[5],this},scale:function(h,r){var o=this.matrix;return o[0]*=h,o[1]*=h,o[2]*=r,o[3]*=r,this},rotate:function(h){var r=Math.sin(h),o=Math.cos(h),d=this.matrix,a=d[0],f=d[1],v=d[2],c=d[3];return d[0]=a*o+v*r,d[1]=f*o+c*r,d[2]=a*-r+v*o,d[3]=f*-r+c*o,this},multiply:function(h,r){var o=this.matrix,d=h.matrix,a=o[0],f=o[1],v=o[2],c=o[3],p=o[4],m=o[5],T=d[0],E=d[1],P=d[2],w=d[3],A=d[4],b=d[5],O=r===void 0?o:r.matrix;return O[0]=T*a+E*v,O[1]=T*f+E*c,O[2]=P*a+w*v,O[3]=P*f+w*c,O[4]=A*a+b*v+p,O[5]=A*f+b*c+m,O},multiplyWithOffset:function(h,r,o){var d=this.matrix,a=h.matrix,f=d[0],v=d[1],c=d[2],p=d[3],m=d[4],T=d[5],E=r*f+o*c+m,P=r*v+o*p+T,w=a[0],A=a[1],b=a[2],O=a[3],I=a[4],D=a[5];return d[0]=w*f+A*c,d[1]=w*v+A*p,d[2]=b*f+O*c,d[3]=b*v+O*p,d[4]=I*f+D*c+E,d[5]=I*v+D*p+P,this},transform:function(h,r,o,d,a,f){var v=this.matrix,c=v[0],p=v[1],m=v[2],T=v[3],E=v[4],P=v[5];return v[0]=h*c+r*m,v[1]=h*p+r*T,v[2]=o*c+d*m,v[3]=o*p+d*T,v[4]=a*c+f*m+E,v[5]=a*p+f*T+P,this},transformPoint:function(h,r,o){o===void 0&&(o={x:0,y:0});var d=this.matrix,a=d[0],f=d[1],v=d[2],c=d[3],p=d[4],m=d[5];return o.x=h*a+r*v+p,o.y=h*f+r*c+m,o},invert:function(){var h=this.matrix,r=h[0],o=h[1],d=h[2],a=h[3],f=h[4],v=h[5],c=r*a-o*d;return h[0]=a/c,h[1]=-o/c,h[2]=-d/c,h[3]=r/c,h[4]=(d*v-a*f)/c,h[5]=-(r*v-o*f)/c,this},copyFrom:function(h){var r=this.matrix;return r[0]=h.a,r[1]=h.b,r[2]=h.c,r[3]=h.d,r[4]=h.e,r[5]=h.f,this},copyFromArray:function(h){var r=this.matrix;return r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=h[3],r[4]=h[4],r[5]=h[5],this},copyToContext:function(h){var r=this.matrix;return h.transform(r[0],r[1],r[2],r[3],r[4],r[5]),h},setToContext:function(h){return h.setTransform(this),h},copyToArray:function(h){var r=this.matrix;return h===void 0?h=[r[0],r[1],r[2],r[3],r[4],r[5]]:(h[0]=r[0],h[1]=r[1],h[2]=r[2],h[3]=r[3],h[4]=r[4],h[5]=r[5]),h},setTransform:function(h,r,o,d,a,f){var v=this.matrix;return v[0]=h,v[1]=r,v[2]=o,v[3]=d,v[4]=a,v[5]=f,this},decomposeMatrix:function(){var h=this.decomposedMatrix,r=this.matrix,o=r[0],d=r[1],a=r[2],f=r[3],v=o*f-d*a;if(h.translateX=r[4],h.translateY=r[5],o||d){var c=Math.sqrt(o*o+d*d);h.rotation=d>0?Math.acos(o/c):-Math.acos(o/c),h.scaleX=c,h.scaleY=v/c}else if(a||f){var p=Math.sqrt(a*a+f*f);h.rotation=Math.PI*.5-(f>0?Math.acos(-a/p):-Math.acos(a/p)),h.scaleX=v/p,h.scaleY=p}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,r,o,d,a){var f=this.matrix,v=Math.sin(o),c=Math.cos(o);return f[4]=h,f[5]=r,f[0]=c*d,f[1]=v*d,f[2]=-v*a,f[3]=c*a,this},applyInverse:function(h,r,o){o===void 0&&(o=new u);var d=this.matrix,a=d[0],f=d[1],v=d[2],c=d[3],p=d[4],m=d[5],T=1/(a*c+v*-f);return o.x=c*T*h+-v*T*r+(m*v-p*c)*T,o.y=a*T*r+-f*T*h+(-m*a+p*f)*T,o},setQuad:function(h,r,o,d,a,f){a===void 0&&(a=!1),f===void 0&&(f=this.quad);var v=this.matrix,c=v[0],p=v[1],m=v[2],T=v[3],E=v[4],P=v[5],w=h*c+r*m+E,A=h*p+r*T+P,b=h*c+d*m+E,O=h*p+d*T+P,I=o*c+d*m+E,D=o*p+d*T+P,B=o*c+r*m+E,k=o*p+r*T+P;if(a){var N=Math.floor(w+.5),H=Math.floor(A+.5),$=N-w,J=H-A;f[0]=N,f[1]=H,f[2]=b+$,f[3]=O+J,f[4]=I+$,f[5]=D+J,f[6]=B+$,f[7]=k+J}else f[0]=w,f[1]=A,f[2]=b,f[3]=O,f[4]=I,f[5]=D,f[6]=B,f[7]=k;return f},getX:function(h,r){return h*this.a+r*this.c+this.e},getY:function(h,r){return h*this.b+r*this.d+this.f},getXRound:function(h,r,o){var d=this.getX(h,r);return o&&(d=Math.floor(d+.5)),d},getYRound:function(h,r,o){var d=this.getY(h,r);return o&&(d=Math.floor(d+.5)),d},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});C.exports=l}),59715:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(g){g?(this._visible=!0,this.renderFlags|=R):(this._visible=!1,this.renderFlags&=~R)}},setVisible:function(g){return this.visible=g,this}};C.exports=s}),31401:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Alpha:s(16005),AlphaSingle:s(88509),BlendMode:s(90065),ComputedSize:s(94215),Crop:s(61683),Depth:s(89272),Flip:s(54434),FX:s(47059),GetBounds:s(8004),Mask:s(8573),Origin:s(27387),PathFollower:s(37640),Pipeline:s(72699),PostPipeline:s(17581),ScrollFactor:s(80227),Size:s(16736),Texture:s(37726),TextureCrop:s(79812),Tint:s(27472),ToJSON:s(53774),Transform:s(16901),TransformMatrix:s(61340),Visible:s(59715)}}),31559:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37105),y=s(10312),u=s(83419),l=s(31401),h=s(51708),r=s(95643),o=s(87841),d=s(29959),a=s(36899),f=s(26099),v=new l.TransformMatrix,c=new u({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.PostPipeline,l.Transform,l.Visible,d],initialize:function(m,T,E,P){r.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(T,E),this.setBlendMode(y.SKIP_CHECK),P&&this.add(P)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(p){return p===void 0&&(p=!0),this.exclusive=p,this},getBounds:function(p){if(p===void 0&&(p=new o),p.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),T=m.transformPoint(this.x,this.y);p.setTo(T.x,T.y,0,0)}if(this.list.length>0){var E=this.list,P=new o,w=!1;p.setEmpty();for(var A=0;A<E.length;A++){var b=E[A];b.getBounds&&(b.getBounds(P),w?a(P,p,p):(p.setTo(P.x,P.y,P.width,P.height),w=!0))}}return p},addHandler:function(p){p.once(h.DESTROY,this.onChildDestroyed,this),this.exclusive&&(p.parentContainer&&p.parentContainer.remove(p),p.parentContainer=this,p.removeFromDisplayList(),p.addedToScene())},removeHandler:function(p){p.off(h.DESTROY,this.remove,this),this.exclusive&&(p.parentContainer=null,p.removedFromScene(),p.addToDisplayList())},pointToContainer:function(p,m){m===void 0&&(m=new f),this.parentContainer?this.parentContainer.pointToContainer(p,m):(m.x=p.x,m.y=p.y);var T=v;return T.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),T.invert(),T.transformPoint(p.x,p.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(v,this.localTransform)},add:function(p){return g.Add(this.list,p,this.maxSize,this.addHandler,this),this},addAt:function(p,m){return g.AddAt(this.list,p,m,this.maxSize,this.addHandler,this),this},getAt:function(p){return this.list[p]},getIndex:function(p){return this.list.indexOf(p)},sort:function(p,m){return p?(m===void 0&&(m=function(T,E){return T[p]-E[p]}),g.StableSort(this.list,m),this):this},getByName:function(p){return g.GetFirst(this.list,"name",p)},getRandom:function(p,m){return g.GetRandom(this.list,p,m)},getFirst:function(p,m,T,E){return g.GetFirst(this.list,p,m,T,E)},getAll:function(p,m,T,E){return g.GetAll(this.list,p,m,T,E)},count:function(p,m,T,E){return g.CountAllMatching(this.list,p,m,T,E)},swap:function(p,m){return g.Swap(this.list,p,m),this},moveTo:function(p,m){return g.MoveTo(this.list,p,m),this},moveAbove:function(p,m){return g.MoveAbove(this.list,p,m),this},moveBelow:function(p,m){return g.MoveBelow(this.list,p,m),this},remove:function(p,m){var T=g.Remove(this.list,p,this.removeHandler,this);if(m&&T){Array.isArray(T)||(T=[T]);for(var E=0;E<T.length;E++)T[E].destroy()}return this},removeAt:function(p,m){var T=g.RemoveAt(this.list,p,this.removeHandler,this);return m&&T&&T.destroy(),this},removeBetween:function(p,m,T){var E=g.RemoveBetween(this.list,p,m,this.removeHandler,this);if(T)for(var P=0;P<E.length;P++)E[P].destroy();return this},removeAll:function(p){var m=this.list;if(p){for(var T=0;T<m.length;T++)m[T]&&m[T].scene&&(m[T].off(h.DESTROY,this.onChildDestroyed,this),m[T].destroy());this.list=[]}else g.RemoveBetween(m,0,m.length,this.removeHandler,this);return this},bringToTop:function(p){return g.BringToTop(this.list,p),this},sendToBack:function(p){return g.SendToBack(this.list,p),this},moveUp:function(p){return g.MoveUp(this.list,p),this},moveDown:function(p){return g.MoveDown(this.list,p),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return g.Shuffle(this.list),this},replace:function(p,m,T){var E=g.Replace(this.list,p,m);return E&&(this.addHandler(m),this.removeHandler(p),T&&p.destroy()),this},exists:function(p){return this.list.indexOf(p)>-1},setAll:function(p,m,T,E){return g.SetAll(this.list,p,m,T,E),this},each:function(p,m){var T=[null],E,P=this.list.slice(),w=P.length;for(E=2;E<arguments.length;E++)T.push(arguments[E]);for(E=0;E<w;E++)T[0]=P[E],p.apply(m,T);return this},iterate:function(p,m){var T=[null],E;for(E=2;E<arguments.length;E++)T.push(arguments[E]);for(E=0;E<this.list.length;E++)T[0]=this.list[E],p.apply(m,T);return this},setScrollFactor:function(p,m,T){return m===void 0&&(m=p),T===void 0&&(T=!1),this.scrollFactorX=p,this.scrollFactorY=m,T&&(g.SetAll(this.list,"scrollFactorX",p),g.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(p){g.Remove(this.list,p),this.exclusive&&(p.parentContainer=null,p.removedFromScene())}});C.exports=c}),53584:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y.addToRenderList(g);var l=g.list;if(l.length!==0){var h=g.localTransform;u?(h.loadIdentity(),h.multiply(u),h.translate(g.x,g.y),h.rotate(g.rotation),h.scale(g.scaleX,g.scaleY)):h.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY);var r=g.blendMode!==-1;r||s.setBlendMode(0);var o=g._alpha,d=g.scrollFactorX,a=g.scrollFactorY;g.mask&&g.mask.preRenderCanvas(s,null,y);for(var f=0;f<l.length;f++){var v=l[f];if(v.willRender(y)){var c=v.alpha,p=v.scrollFactorX,m=v.scrollFactorY;!r&&v.blendMode!==s.currentBlendMode&&s.setBlendMode(v.blendMode),v.setScrollFactor(p*d,m*a),v.setAlpha(c*o),v.renderCanvas(s,v,y,h),v.setAlpha(c),v.setScrollFactor(p,m)}}g.mask&&g.mask.postRenderCanvas(s)}};C.exports=R}),77143:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(31559),u=s(44603),l=s(23568),h=s(95540);u.register("container",function(r,o){r===void 0&&(r={});var d=l(r,"x",0),a=l(r,"y",0),f=h(r,"children",null),v=new y(this.scene,d,a,f);return o!==void 0&&(r.add=o),g(this.scene,v,r),v})}),24961:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(31559),y=s(39429);y.register("container",function(u,l,h){return this.displayList.add(new g(this.scene,u,l,h))})}),29959:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(72249),u=s(53584),C.exports={renderWebGL:y,renderCanvas:u}}),72249:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y.addToRenderList(g);var l=g.list,h=l.length;if(h!==0){var r=g.localTransform;u?(r.loadIdentity(),r.multiply(u),r.translate(g.x,g.y),r.rotate(g.rotation),r.scale(g.scaleX,g.scaleY)):r.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY),s.pipelines.preBatch(g);var o=g.blendMode!==-1;o||s.setBlendMode(0);for(var d=g.alpha,a=g.scrollFactorX,f=g.scrollFactorY,v=0;v<h;v++){var c=l[v];if(c.willRender(y)){var p,m,T,E;if(c.alphaTopLeft!==void 0)p=c.alphaTopLeft,m=c.alphaTopRight,T=c.alphaBottomLeft,E=c.alphaBottomRight;else{var P=c.alpha;p=P,m=P,T=P,E=P}var w=c.scrollFactorX,A=c.scrollFactorY;!o&&c.blendMode!==s.currentBlendMode&&s.setBlendMode(c.blendMode);var b=c.mask;b&&b.preRenderWebGL(s,c,y);var O=c.type;O!==s.currentType&&(s.newType=!0,s.currentType=O),s.nextTypeMatch=v<h-1?l[v+1].type===s.currentType:!1,c.setScrollFactor(w*a,A*f),c.setAlpha(p*d,m*d,T*d,E*d),c.renderWebGL(s,c,y,r,g),c.setAlpha(p,m,T,E),c.setScrollFactor(w,A),b&&b.postRenderWebGL(s,y),s.newType=!1}}s.pipelines.postBatch(g)}};C.exports=R}),47407:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}),3069:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(441),l=s(95643),h=s(41212),r=s(35846),o=s(44594),d=s(61369),a=new g({Extends:l,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Origin,y.ScrollFactor,y.Transform,y.Visible,u],initialize:function(v,c,p,m,T,E){l.call(this,v,"DOMElement"),this.parent=v.sys.game.domContainer,this.cache=v.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(c,p),typeof m=="string"?m[0]==="#"?this.setElement(m.substr(1),T,E):this.createElement(m,T,E):m&&this.setElement(m,T,E),v.sys.events.on(o.SLEEP,this.handleSceneEvent,this),v.sys.events.on(o.WAKE,this.handleSceneEvent,this),v.sys.events.on(o.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(f){var v=this.node,c=v.style;v&&(c.display=f.settings.visible?"block":"none")},setSkew:function(f,v){return f===void 0&&(f=0),v===void 0&&(v=f),this.skewX=f,this.skewY=v,this},setPerspective:function(f){return this.parent.style.perspective=f+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(f){this.parent.style.perspective=f+"px"}},addListener:function(f){if(this.node){f=f.split(" ");for(var v=0;v<f.length;v++)this.node.addEventListener(f[v],this.handler,!1)}return this},removeListener:function(f){if(this.node){f=f.split(" ");for(var v=0;v<f.length;v++)this.node.removeEventListener(f[v],this.handler)}return this},dispatchNativeEvent:function(f){this.emit(f.type,f)},createElement:function(f,v,c){return this.setElement(document.createElement(f),v,c)},setElement:function(f,v,c){this.removeElement();var p;if(typeof f=="string"?(f[0]==="#"&&(f=f.substr(1)),p=document.getElementById(f)):typeof f=="object"&&f.nodeType===1&&(p=f),!p)return this;if(this.node=p,v&&h(v))for(var m in v)p.style[m]=v[m];else typeof v=="string"&&(p.style=v);return p.style.zIndex="0",p.style.display="inline",p.style.position="absolute",p.phaser=this,this.parent&&this.parent.appendChild(p),c&&(p.innerText=c),this.updateSize()},createFromCache:function(f,v){var c=this.cache.get(f);return c&&this.createFromHTML(c,v),this},createFromHTML:function(f,v){v===void 0&&(v="div"),this.removeElement();var c=document.createElement(v);return this.node=c,c.style.zIndex="0",c.style.display="inline",c.style.position="absolute",c.phaser=this,this.parent&&this.parent.appendChild(c),c.innerHTML=f,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var f=this.node,v=f.getBoundingClientRect();return this.width=f.clientWidth,this.height=f.clientHeight,this.displayWidth=v.width||0,this.displayHeight=v.height||0,this},getChildByProperty:function(f,v){if(this.node){for(var c=this.node.querySelectorAll("*"),p=0;p<c.length;p++)if(c[p][f]===v)return c[p]}return null},getChildByID:function(f){return this.getChildByProperty("id",f)},getChildByName:function(f){return this.getChildByProperty("name",f)},setClassName:function(f){return this.node&&(this.node.className=f,this.updateSize()),this},setText:function(f){return this.node&&(this.node.innerText=f,this.updateSize()),this},setHTML:function(f){return this.node&&(this.node.innerHTML=f,this.updateSize()),this},preRender:function(){var f=this.parentContainer,v=this.node;v&&f&&!f.willRender()&&(v.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(o.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(o.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(o.PRE_RENDER,this.preRender,this)}});C.exports=a}),49381:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(47407),y=s(95643),u=s(61340),l=new u,h=new u,r=new u,o=function(d,a,f,v){if(a.node){var c=a.node.style,p=a.scene.sys.settings;if(!c||!p.visible||y.RENDER_MASK!==a.renderFlags||a.cameraFilter!==0&&a.cameraFilter&f.id||a.parentContainer&&!a.parentContainer.willRender()){c.display="none";return}var m=a.parentContainer,T=f.alpha*a.alpha;m&&(T*=m.alpha);var E=l,P=h,w=r,A=0,b=0,O="0%",I="0%";v?(A=a.width*a.scaleX*a.originX,b=a.height*a.scaleY*a.originY,P.applyITRS(a.x-A,a.y-b,a.rotation,a.scaleX,a.scaleY),E.copyFrom(f.matrix),E.multiplyWithOffset(v,-f.scrollX*a.scrollFactorX,-f.scrollY*a.scrollFactorY),P.e=a.x-A,P.f=a.y-b,E.multiply(P,w)):(A=a.width*a.originX,b=a.height*a.originY,P.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),E.copyFrom(f.matrix),O=100*a.originX+"%",I=100*a.originY+"%",P.e-=f.scrollX*a.scrollFactorX,P.f-=f.scrollY*a.scrollFactorY,E.multiply(P,w),w.e-=A,w.f-=b),a.transformOnly||(c.display="block",c.opacity=T,c.zIndex=a._depth,c.pointerEvents=a.pointerEvents,c.mixBlendMode=g[a._blendMode]),c.transform=w.getCSSMatrix()+" skew("+a.skewX+"rad, "+a.skewY+"rad) rotate3d("+a.rotate3d.x+","+a.rotate3d.y+","+a.rotate3d.z+","+a.rotate3d.w+a.rotate3dAngle+")",c.transformOrigin=O+" "+I}};C.exports=o}),2611:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(3069),y=s(39429);y.register("dom",function(u,l,h,r,o){var d=new g(this.scene,u,l,h,r,o);return this.displayList.add(d),d})}),441:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(49381),u=s(49381),C.exports={renderWebGL:y,renderCanvas:u}}),62980:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="addedtoscene"}),41337:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="destroy"}),44947:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="removedfromscene"}),49358:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="complete"}),35163:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="created"}),97249:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="error"}),19483:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="locked"}),56059:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="loop"}),26772:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="metadata"}),64437:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="playing"}),83411:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="play"}),75780:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="seeked"}),67799:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="seeking"}),63500:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="stalled"}),55541:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="stop"}),53208:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="textureready"}),4992:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="unlocked"}),12:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="unsupported"}),51708:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ADDED_TO_SCENE:s(62980),DESTROY:s(41337),REMOVED_FROM_SCENE:s(44947),VIDEO_COMPLETE:s(49358),VIDEO_CREATED:s(35163),VIDEO_ERROR:s(97249),VIDEO_LOCKED:s(19483),VIDEO_LOOP:s(56059),VIDEO_METADATA:s(26772),VIDEO_PLAY:s(83411),VIDEO_PLAYING:s(64437),VIDEO_SEEKED:s(75780),VIDEO_SEEKING:s(67799),VIDEO_STALLED:s(63500),VIDEO_STOP:s(55541),VIDEO_TEXTURE:s(53208),VIDEO_UNLOCKED:s(4992),VIDEO_UNSUPPORTED:s(12)}}),42421:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(95643),l=s(64993),h=new g({Extends:u,Mixins:[y.Alpha,y.BlendMode,y.Depth,y.Flip,y.Origin,y.ScrollFactor,y.Size,y.Texture,y.Tint,y.Transform,y.Visible,l],initialize:function(o){u.call(this,o,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});C.exports=h}),70217:(()=>{}),56315:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(42421),y=s(39429);y.register("extern",function(){var u=new g(this.scene);return this.displayList.add(u),u})}),64993:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(80287),u=s(70217),C.exports={renderWebGL:y,renderCanvas:u}}),80287:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=function(u,l,h,r){u.pipelines.clear();var o=g(l,h,r).calc;l.render.call(l,u,h,o),u.pipelines.rebind()};C.exports=y}),85592:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}}),43831:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(71911),y=s(83419),u=s(85592),l=s(31401),h=s(8497),r=s(95643),o=s(95540),d=s(35154),a=s(36383),f=s(84503),v=new y({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.Transform,l.Visible,l.ScrollFactor,f],initialize:function(p,m){var T=d(m,"x",0),E=d(m,"y",0);r.call(this,p,"Graphics"),this.setPosition(T,E),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(m)},setDefaultStyles:function(c){return d(c,"lineStyle",null)&&(this.defaultStrokeWidth=d(c,"lineStyle.width",1),this.defaultStrokeColor=d(c,"lineStyle.color",16777215),this.defaultStrokeAlpha=d(c,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),d(c,"fillStyle",null)&&(this.defaultFillColor=d(c,"fillStyle.color",16777215),this.defaultFillAlpha=d(c,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(c,p,m){return m===void 0&&(m=1),this.commandBuffer.push(u.LINE_STYLE,c,p,m),this._lineWidth=c,this},fillStyle:function(c,p){return p===void 0&&(p=1),this.commandBuffer.push(u.FILL_STYLE,c,p),this},fillGradientStyle:function(c,p,m,T,E,P,w,A){return E===void 0&&(E=1),P===void 0&&(P=E),w===void 0&&(w=E),A===void 0&&(A=E),this.commandBuffer.push(u.GRADIENT_FILL_STYLE,E,P,w,A,c,p,m,T),this},lineGradientStyle:function(c,p,m,T,E,P){return P===void 0&&(P=1),this.commandBuffer.push(u.GRADIENT_LINE_STYLE,c,P,p,m,T,E),this},beginPath:function(){return this.commandBuffer.push(u.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(u.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(u.FILL_PATH),this},fill:function(){return this.commandBuffer.push(u.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(u.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(u.STROKE_PATH),this},fillCircleShape:function(c){return this.fillCircle(c.x,c.y,c.radius)},strokeCircleShape:function(c){return this.strokeCircle(c.x,c.y,c.radius)},fillCircle:function(c,p,m){return this.beginPath(),this.arc(c,p,m,0,a.PI2),this.fillPath(),this},strokeCircle:function(c,p,m){return this.beginPath(),this.arc(c,p,m,0,a.PI2),this.strokePath(),this},fillRectShape:function(c){return this.fillRect(c.x,c.y,c.width,c.height)},strokeRectShape:function(c){return this.strokeRect(c.x,c.y,c.width,c.height)},fillRect:function(c,p,m,T){return this.commandBuffer.push(u.FILL_RECT,c,p,m,T),this},strokeRect:function(c,p,m,T){var E=this._lineWidth/2,P=c-E,w=c+E;return this.beginPath(),this.moveTo(c,p),this.lineTo(c,p+T),this.strokePath(),this.beginPath(),this.moveTo(c+m,p),this.lineTo(c+m,p+T),this.strokePath(),this.beginPath(),this.moveTo(P,p),this.lineTo(w+m,p),this.strokePath(),this.beginPath(),this.moveTo(P,p+T),this.lineTo(w+m,p+T),this.strokePath(),this},fillRoundedRect:function(c,p,m,T,E){E===void 0&&(E=20);var P=E,w=E,A=E,b=E;typeof E!="number"&&(P=o(E,"tl",20),w=o(E,"tr",20),A=o(E,"bl",20),b=o(E,"br",20));var O=P>=0,I=w>=0,D=A>=0,B=b>=0;return P=Math.abs(P),w=Math.abs(w),A=Math.abs(A),b=Math.abs(b),this.beginPath(),this.moveTo(c+P,p),this.lineTo(c+m-w,p),I?this.arc(c+m-w,p+w,w,-a.TAU,0):this.arc(c+m,p,w,Math.PI,a.TAU,!0),this.lineTo(c+m,p+T-b),B?this.arc(c+m-b,p+T-b,b,0,a.TAU):this.arc(c+m,p+T,b,-a.TAU,Math.PI,!0),this.lineTo(c+A,p+T),D?this.arc(c+A,p+T-A,A,a.TAU,Math.PI):this.arc(c,p+T,A,0,-a.TAU,!0),this.lineTo(c,p+P),O?this.arc(c+P,p+P,P,-Math.PI,-a.TAU):this.arc(c,p,P,a.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(c,p,m,T,E){E===void 0&&(E=20);var P=E,w=E,A=E,b=E,O=Math.min(m,T)/2;typeof E!="number"&&(P=o(E,"tl",20),w=o(E,"tr",20),A=o(E,"bl",20),b=o(E,"br",20));var I=P>=0,D=w>=0,B=A>=0,k=b>=0;return P=Math.min(Math.abs(P),O),w=Math.min(Math.abs(w),O),A=Math.min(Math.abs(A),O),b=Math.min(Math.abs(b),O),this.beginPath(),this.moveTo(c+P,p),this.lineTo(c+m-w,p),this.moveTo(c+m-w,p),D?this.arc(c+m-w,p+w,w,-a.TAU,0):this.arc(c+m,p,w,Math.PI,a.TAU,!0),this.lineTo(c+m,p+T-b),this.moveTo(c+m,p+T-b),k?this.arc(c+m-b,p+T-b,b,0,a.TAU):this.arc(c+m,p+T,b,-a.TAU,Math.PI,!0),this.lineTo(c+A,p+T),this.moveTo(c+A,p+T),B?this.arc(c+A,p+T-A,A,a.TAU,Math.PI):this.arc(c,p+T,A,0,-a.TAU,!0),this.lineTo(c,p+P),this.moveTo(c,p+P),I?this.arc(c+P,p+P,P,-Math.PI,-a.TAU):this.arc(c,p,P,a.TAU,0,!0),this.strokePath(),this},fillPointShape:function(c,p){return this.fillPoint(c.x,c.y,p)},fillPoint:function(c,p,m){return!m||m<1?m=1:(c-=m/2,p-=m/2),this.commandBuffer.push(u.FILL_RECT,c,p,m,m),this},fillTriangleShape:function(c){return this.fillTriangle(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)},strokeTriangleShape:function(c){return this.strokeTriangle(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)},fillTriangle:function(c,p,m,T,E,P){return this.commandBuffer.push(u.FILL_TRIANGLE,c,p,m,T,E,P),this},strokeTriangle:function(c,p,m,T,E,P){return this.commandBuffer.push(u.STROKE_TRIANGLE,c,p,m,T,E,P),this},strokeLineShape:function(c){return this.lineBetween(c.x1,c.y1,c.x2,c.y2)},lineBetween:function(c,p,m,T){return this.beginPath(),this.moveTo(c,p),this.lineTo(m,T),this.strokePath(),this},lineTo:function(c,p){return this.commandBuffer.push(u.LINE_TO,c,p),this},moveTo:function(c,p){return this.commandBuffer.push(u.MOVE_TO,c,p),this},strokePoints:function(c,p,m,T){p===void 0&&(p=!1),m===void 0&&(m=!1),T===void 0&&(T=c.length),this.beginPath(),this.moveTo(c[0].x,c[0].y);for(var E=1;E<T;E++)this.lineTo(c[E].x,c[E].y);return p&&this.lineTo(c[0].x,c[0].y),m&&this.closePath(),this.strokePath(),this},fillPoints:function(c,p,m,T){p===void 0&&(p=!1),m===void 0&&(m=!1),T===void 0&&(T=c.length),this.beginPath(),this.moveTo(c[0].x,c[0].y);for(var E=1;E<T;E++)this.lineTo(c[E].x,c[E].y);return p&&this.lineTo(c[0].x,c[0].y),m&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(c,p){p===void 0&&(p=32);var m=c.getPoints(p);return this.strokePoints(m,!0)},strokeEllipse:function(c,p,m,T,E){E===void 0&&(E=32);var P=new h(c,p,m,T),w=P.getPoints(E);return this.strokePoints(w,!0)},fillEllipseShape:function(c,p){p===void 0&&(p=32);var m=c.getPoints(p);return this.fillPoints(m,!0)},fillEllipse:function(c,p,m,T,E){E===void 0&&(E=32);var P=new h(c,p,m,T),w=P.getPoints(E);return this.fillPoints(w,!0)},arc:function(c,p,m,T,E,P,w){return P===void 0&&(P=!1),w===void 0&&(w=0),this.commandBuffer.push(u.ARC,c,p,m,T,E,P,w),this},slice:function(c,p,m,T,E,P,w){return P===void 0&&(P=!1),w===void 0&&(w=0),this.commandBuffer.push(u.BEGIN_PATH),this.commandBuffer.push(u.MOVE_TO,c,p),this.commandBuffer.push(u.ARC,c,p,m,T,E,P,w),this.commandBuffer.push(u.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(u.SAVE),this},restore:function(){return this.commandBuffer.push(u.RESTORE),this},translateCanvas:function(c,p){return this.commandBuffer.push(u.TRANSLATE,c,p),this},scaleCanvas:function(c,p){return this.commandBuffer.push(u.SCALE,c,p),this},rotateCanvas:function(c){return this.commandBuffer.push(u.ROTATE,c),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(c,p,m){var T=this.scene.sys,E=T.game.renderer;p===void 0&&(p=T.scale.width),m===void 0&&(m=T.scale.height),v.TargetCamera.setScene(this.scene),v.TargetCamera.setViewport(0,0,p,m),v.TargetCamera.scrollX=this.x,v.TargetCamera.scrollY=this.y;var P,w,A={willReadFrequently:!0};if(typeof c=="string")if(T.textures.exists(c)){P=T.textures.get(c);var b=P.getSourceImage();b instanceof HTMLCanvasElement&&(w=b.getContext("2d",A))}else P=T.textures.createCanvas(c,p,m),w=P.getSourceImage().getContext("2d",A);else c instanceof HTMLCanvasElement&&(w=c.getContext("2d",A));return w&&(this.renderCanvas(E,this,v.TargetCamera,null,w,!1),P&&P.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});v.TargetCamera=new g,C.exports=v}),32768:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(85592),y=s(20926),u=function(l,h,r,o,d,a){var f=h.commandBuffer,v=f.length,c=d||l.currentContext;if(!(v===0||!y(l,c,h,r,o))){r.addToRenderList(h);var p=1,m=1,T=0,E=0,P=1,w=0,A=0,b=0;c.beginPath();for(var O=0;O<v;++O){var I=f[O];switch(I){case g.ARC:c.arc(f[O+1],f[O+2],f[O+3],f[O+4],f[O+5],f[O+6]),O+=7;break;case g.LINE_STYLE:P=f[O+1],T=f[O+2],p=f[O+3],w=(T&16711680)>>>16,A=(T&65280)>>>8,b=T&255,c.strokeStyle="rgba("+w+","+A+","+b+","+p+")",c.lineWidth=P,O+=3;break;case g.FILL_STYLE:E=f[O+1],m=f[O+2],w=(E&16711680)>>>16,A=(E&65280)>>>8,b=E&255,c.fillStyle="rgba("+w+","+A+","+b+","+m+")",O+=2;break;case g.BEGIN_PATH:c.beginPath();break;case g.CLOSE_PATH:c.closePath();break;case g.FILL_PATH:a||c.fill();break;case g.STROKE_PATH:a||c.stroke();break;case g.FILL_RECT:a?c.rect(f[O+1],f[O+2],f[O+3],f[O+4]):c.fillRect(f[O+1],f[O+2],f[O+3],f[O+4]),O+=4;break;case g.FILL_TRIANGLE:c.beginPath(),c.moveTo(f[O+1],f[O+2]),c.lineTo(f[O+3],f[O+4]),c.lineTo(f[O+5],f[O+6]),c.closePath(),a||c.fill(),O+=6;break;case g.STROKE_TRIANGLE:c.beginPath(),c.moveTo(f[O+1],f[O+2]),c.lineTo(f[O+3],f[O+4]),c.lineTo(f[O+5],f[O+6]),c.closePath(),a||c.stroke(),O+=6;break;case g.LINE_TO:c.lineTo(f[O+1],f[O+2]),O+=2;break;case g.MOVE_TO:c.moveTo(f[O+1],f[O+2]),O+=2;break;case g.LINE_FX_TO:c.lineTo(f[O+1],f[O+2]),O+=5;break;case g.MOVE_FX_TO:c.moveTo(f[O+1],f[O+2]),O+=5;break;case g.SAVE:c.save();break;case g.RESTORE:c.restore();break;case g.TRANSLATE:c.translate(f[O+1],f[O+2]),O+=2;break;case g.SCALE:c.scale(f[O+1],f[O+2]),O+=2;break;case g.ROTATE:c.rotate(f[O+1]),O+=1;break;case g.GRADIENT_FILL_STYLE:O+=5;break;case g.GRADIENT_LINE_STYLE:O+=6;break}}c.restore()}};C.exports=u}),87079:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(44603),y=s(43831);g.register("graphics",function(u,l){u===void 0&&(u={}),l!==void 0&&(u.add=l);var h=new y(this.scene,u);return u.add&&this.scene.sys.displayList.add(h),h})}),1201:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43831),y=s(39429);y.register("graphics",function(u){return this.displayList.add(new g(this.scene,u))})}),84503:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(77545),u=s(32768),u=s(32768),C.exports={renderWebGL:y,renderCanvas:u}}),77545:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(85592),y=s(91296),u=s(61340),l=s(70554),h=function(f,v,c){this.x=f,this.y=v,this.width=c},r=function(f,v,c){this.points=[],this.pointsLength=1,this.points[0]=new h(f,v,c)},o=[],d=new u,a=function(f,v,c,p){if(v.commandBuffer.length!==0){c.addToRenderList(v);var m=f.pipelines.set(v.pipeline,v);f.pipelines.preBatch(v);for(var T=y(v,c,p).calc,E=d.loadIdentity(),P=v.commandBuffer,w=c.alpha*v.alpha,A=1,b=m.fillTint,O=m.strokeTint,I=0,D=0,B=0,k=.01,N=Math.PI*2,H,$=[],J=0,q=!0,Y=null,K=l.getTintAppendFloatAlpha,V=0;V<P.length;V++)switch(H=P[V],H){case g.BEGIN_PATH:{$.length=0,Y=null,q=!0;break}case g.CLOSE_PATH:{q=!1,Y&&Y.points.length&&Y.points.push(Y.points[0]);break}case g.FILL_PATH:{for(J=0;J<$.length;J++)m.batchFillPath($[J].points,E,T);break}case g.STROKE_PATH:{for(J=0;J<$.length;J++)m.batchStrokePath($[J].points,A,q,E,T);break}case g.LINE_STYLE:{A=P[++V];var U=P[++V],Z=P[++V]*w,et=K(U,Z);O.TL=et,O.TR=et,O.BL=et,O.BR=et;break}case g.FILL_STYLE:{var st=P[++V],rt=P[++V]*w,at=K(st,rt);b.TL=at,b.TR=at,b.BL=at,b.BR=at;break}case g.GRADIENT_FILL_STYLE:{var ut=P[++V]*w,vt=P[++V]*w,pt=P[++V]*w,gt=P[++V]*w;b.TL=K(P[++V],ut),b.TR=K(P[++V],vt),b.BL=K(P[++V],pt),b.BR=K(P[++V],gt);break}case g.GRADIENT_LINE_STYLE:{A=P[++V];var yt=P[++V]*w;O.TL=K(P[++V],yt),O.TR=K(P[++V],yt),O.BL=K(P[++V],yt),O.BR=K(P[++V],yt);break}case g.ARC:{var mt=0,Tt=P[++V],At=P[++V],Rt=P[++V],Lt=P[++V],Ct=P[++V],Et=P[++V],Mt=P[++V];for(Ct-=Lt,Et?Ct<-N?Ct=-N:Ct>0&&(Ct=-N+Ct%N):Ct>N?Ct=N:Ct<0&&(Ct=N+Ct%N),Y===null&&(Y=new r(Tt+Math.cos(Lt)*Rt,At+Math.sin(Lt)*Rt,A),$.push(Y),mt+=k);mt<1+Mt;)B=Ct*mt+Lt,I=Tt+Math.cos(B)*Rt,D=At+Math.sin(B)*Rt,Y.points.push(new h(I,D,A)),mt+=k;B=Ct+Lt,I=Tt+Math.cos(B)*Rt,D=At+Math.sin(B)*Rt,Y.points.push(new h(I,D,A));break}case g.FILL_RECT:{m.batchFillRect(P[++V],P[++V],P[++V],P[++V],E,T);break}case g.FILL_TRIANGLE:{m.batchFillTriangle(P[++V],P[++V],P[++V],P[++V],P[++V],P[++V],E,T);break}case g.STROKE_TRIANGLE:{m.batchStrokeTriangle(P[++V],P[++V],P[++V],P[++V],P[++V],P[++V],A,E,T);break}case g.LINE_TO:{Y!==null?Y.points.push(new h(P[++V],P[++V],A)):(Y=new r(P[++V],P[++V],A),$.push(Y));break}case g.MOVE_TO:{Y=new r(P[++V],P[++V],A),$.push(Y);break}case g.SAVE:{o.push(E.copyToArray());break}case g.RESTORE:{E.copyFromArray(o.pop());break}case g.TRANSLATE:{Tt=P[++V],At=P[++V],E.translate(Tt,At);break}case g.SCALE:{Tt=P[++V],At=P[++V],E.scale(Tt,At);break}case g.ROTATE:{E.rotate(P[++V]);break}}f.pipelines.postBatch(v)}};C.exports=a}),26479:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(61061),y=s(83419),u=s(51708),l=s(50792),h=s(46710),r=s(95540),o=s(35154),d=s(97022),a=s(41212),f=s(88492),v=s(35072),c=s(68287),p=new y({Extends:l,initialize:function(T,E,P){l.call(this),P?E&&!Array.isArray(E)&&(E=[E]):Array.isArray(E)?a(E[0])&&(P=E,E=null):a(E)&&(P=E,E=null),this.scene=T,this.children=new v,this.isParent=!0,this.type="Group",this.classType=r(P,"classType",c),this.name=r(P,"name",""),this.active=r(P,"active",!0),this.maxSize=r(P,"maxSize",-1),this.defaultKey=r(P,"defaultKey",null),this.defaultFrame=r(P,"defaultFrame",null),this.runChildUpdate=r(P,"runChildUpdate",!1),this.createCallback=r(P,"createCallback",null),this.removeCallback=r(P,"removeCallback",null),this.createMultipleCallback=r(P,"createMultipleCallback",null),this.internalCreateCallback=r(P,"internalCreateCallback",null),this.internalRemoveCallback=r(P,"internalRemoveCallback",null),E&&this.addMultiple(E),P&&this.createMultiple(P),this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,T,E,P,w,A){if(m===void 0&&(m=0),T===void 0&&(T=0),E===void 0&&(E=this.defaultKey),P===void 0&&(P=this.defaultFrame),w===void 0&&(w=!0),A===void 0&&(A=!0),this.isFull())return null;var b=new this.classType(this.scene,m,T,E,P);return b.addToDisplayList(this.scene.sys.displayList),b.addToUpdateList(),b.visible=w,b.setActive(A),this.add(b),b},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var T=[];if(m[0].key)for(var E=0;E<m.length;E++){var P=this.createFromConfig(m[E]);T=T.concat(P)}return T},createFromConfig:function(m){if(this.isFull())return[];this.classType=r(m,"classType",this.classType);var T=r(m,"key",void 0),E=r(m,"frame",null),P=r(m,"visible",!0),w=r(m,"active",!0),A=[];if(T===void 0)return A;Array.isArray(T)||(T=[T]),Array.isArray(E)||(E=[E]);var b=r(m,"repeat",0),O=r(m,"randomKey",!1),I=r(m,"randomFrame",!1),D=r(m,"yoyo",!1),B=r(m,"quantity",!1),k=r(m,"frameQuantity",1),N=r(m,"max",0),H=f(T,E,{max:N,qty:B||k,random:O,randomB:I,repeat:b,yoyo:D});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback),m.internalCreateCallback&&(this.internalCreateCallback=m.internalCreateCallback),m.internalRemoveCallback&&(this.internalRemoveCallback=m.internalRemoveCallback);for(var $=0;$<H.length;$++){var J=this.create(0,0,H[$].a,H[$].b,P,w);if(!J)break;A.push(J)}if(d(m,"setXY")){var q=o(m,"setXY.x",0),Y=o(m,"setXY.y",0),K=o(m,"setXY.stepX",0),V=o(m,"setXY.stepY",0);g.SetXY(A,q,Y,K,V)}if(d(m,"setRotation")){var U=o(m,"setRotation.value",0),Z=o(m,"setRotation.step",0);g.SetRotation(A,U,Z)}if(d(m,"setScale")){var et=o(m,"setScale.x",1),st=o(m,"setScale.y",et),rt=o(m,"setScale.stepX",0),at=o(m,"setScale.stepY",0);g.SetScale(A,et,st,rt,at)}if(d(m,"setOrigin")){var ut=o(m,"setOrigin.x",.5),vt=o(m,"setOrigin.y",ut),pt=o(m,"setOrigin.stepX",0),gt=o(m,"setOrigin.stepY",0);g.SetOrigin(A,ut,vt,pt,gt)}if(d(m,"setAlpha")){var yt=o(m,"setAlpha.value",1),mt=o(m,"setAlpha.step",0);g.SetAlpha(A,yt,mt)}if(d(m,"setDepth")){var Tt=o(m,"setDepth.value",0),At=o(m,"setDepth.step",0);g.SetDepth(A,Tt,At)}if(d(m,"setScrollFactor")){var Rt=o(m,"setScrollFactor.x",1),Lt=o(m,"setScrollFactor.y",Rt),Ct=o(m,"setScrollFactor.stepX",0),Et=o(m,"setScrollFactor.stepY",0);g.SetScrollFactor(A,Rt,Lt,Ct,Et)}var Mt=r(m,"hitArea",null),zt=r(m,"hitAreaCallback",null);Mt&&g.SetHitArea(A,Mt,zt);var Zt=r(m,"gridAlign",!1);return Zt&&g.GridAlign(A,Zt),this.createMultipleCallback&&this.createMultipleCallback.call(this,A),A},preUpdate:function(m,T){if(!(!this.runChildUpdate||this.children.size===0))for(var E=this.children.entries.slice(),P=0;P<E.length;P++){var w=E[P];w.active&&w.update(m,T)}},add:function(m,T){return T===void 0&&(T=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),T&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(u.DESTROY,this.remove,this),this)},addMultiple:function(m,T){if(T===void 0&&(T=!1),Array.isArray(m))for(var E=0;E<m.length;E++)this.add(m[E],T);return this},remove:function(m,T,E){return T===void 0&&(T=!1),E===void 0&&(E=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(u.DESTROY,this.remove,this),E?m.destroy():T&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,T){m===void 0&&(m=!1),T===void 0&&(T=!1);for(var E=this.children,P=0;P<E.size;P++){var w=E.entries[P];w.off(u.DESTROY,this.remove,this),T?w.destroy():m&&(w.removeFromDisplayList(),w.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,T,E,P){return h(this.children.entries,m,T,E,P)},getFirst:function(m,T,E,P,w,A,b){return this.getHandler(!0,1,m,T,E,P,w,A,b)},getFirstNth:function(m,T,E,P,w,A,b,O){return this.getHandler(!0,m,T,E,P,w,A,b,O)},getLast:function(m,T,E,P,w,A,b){return this.getHandler(!1,1,m,T,E,P,w,A,b)},getLastNth:function(m,T,E,P,w,A,b,O){return this.getHandler(!1,m,T,E,P,w,A,b,O)},getHandler:function(m,T,E,P,w,A,b,O,I){E===void 0&&(E=!1),P===void 0&&(P=!1);var D,B,k=0,N=this.children.entries;if(m)for(B=0;B<N.length;B++)if(D=N[B],D.active===E){if(k++,k===T)break}else D=null;else for(B=N.length-1;B>=0;B--)if(D=N[B],D.active===E){if(k++,k===T)break}else D=null;return D?(typeof w=="number"&&(D.x=w),typeof A=="number"&&(D.y=A),D):P?this.create(w,A,b,O,I):null},get:function(m,T,E,P,w){return this.getFirst(!1,!0,m,T,E,P,w)},getFirstAlive:function(m,T,E,P,w,A){return this.getFirst(!0,m,T,E,P,w,A)},getFirstDead:function(m,T,E,P,w,A){return this.getFirst(!1,m,T,E,P,w,A)},playAnimation:function(m,T){return g.PlayAnimation(this.children.entries,m,T),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var T=0,E=0;E<this.children.size;E++)this.children.entries[E].active===m&&T++;return T},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),T=this.maxSize===-1?999999999999:this.maxSize;return T-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,T,E,P,w){return g.PropertyValueSet(this.children.entries,m,T,E,P,w),this},propertyValueInc:function(m,T,E,P,w){return g.PropertyValueInc(this.children.entries,m,T,E,P,w),this},setX:function(m,T){return g.SetX(this.children.entries,m,T),this},setY:function(m,T){return g.SetY(this.children.entries,m,T),this},setXY:function(m,T,E,P){return g.SetXY(this.children.entries,m,T,E,P),this},incX:function(m,T){return g.IncX(this.children.entries,m,T),this},incY:function(m,T){return g.IncY(this.children.entries,m,T),this},incXY:function(m,T,E,P){return g.IncXY(this.children.entries,m,T,E,P),this},shiftPosition:function(m,T,E){return g.ShiftPosition(this.children.entries,m,T,E),this},angle:function(m,T){return g.Angle(this.children.entries,m,T),this},rotate:function(m,T){return g.Rotate(this.children.entries,m,T),this},rotateAround:function(m,T){return g.RotateAround(this.children.entries,m,T),this},rotateAroundDistance:function(m,T,E){return g.RotateAroundDistance(this.children.entries,m,T,E),this},setAlpha:function(m,T){return g.SetAlpha(this.children.entries,m,T),this},setTint:function(m,T,E,P){return g.SetTint(this.children.entries,m,T,E,P),this},setOrigin:function(m,T,E,P){return g.SetOrigin(this.children.entries,m,T,E,P),this},scaleX:function(m,T){return g.ScaleX(this.children.entries,m,T),this},scaleY:function(m,T){return g.ScaleY(this.children.entries,m,T),this},scaleXY:function(m,T,E,P){return g.ScaleXY(this.children.entries,m,T,E,P),this},setDepth:function(m,T){return g.SetDepth(this.children.entries,m,T),this},setBlendMode:function(m){return g.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,T){return g.SetHitArea(this.children.entries,m,T),this},shuffle:function(){return g.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,T,E){return g.SetVisible(this.children.entries,m,T,E),this},toggleVisible:function(){return g.ToggleVisible(this.children.entries),this},destroy:function(m,T){m===void 0&&(m=!1),T===void 0&&(T=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(u.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(T,m),this.scene=void 0,this.children=void 0)}});C.exports=p}),94975:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(44603),y=s(26479);g.register("group",function(u){return new y(this.scene,null,u)})}),3385:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26479),y=s(39429);y.register("group",function(u,l){return this.updateList.add(new g(this.scene,u,l))})}),88571:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(95643),l=s(59819),h=new g({Extends:u,Mixins:[y.Alpha,y.BlendMode,y.Depth,y.Flip,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Size,y.TextureCrop,y.Tint,y.Transform,y.Visible,l],initialize:function(o,d,a,f,v){u.call(this,o,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,v),this.setPosition(d,a),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});C.exports=h}),40652:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y.addToRenderList(g),s.batchSprite(g,g.frame,y,u)};C.exports=R}),82459:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(88571);y.register("image",function(h,r){h===void 0&&(h={});var o=u(h,"key",null),d=u(h,"frame",null),a=new l(this.scene,0,0,o,d);return r!==void 0&&(h.add=r),g(this.scene,a,h),a})}),2117:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(88571),y=s(39429);y.register("image",function(u,l,h,r){return this.displayList.add(new g(this.scene,u,l,h,r))})}),59819:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(99517),u=s(40652),C.exports={renderWebGL:y,renderCanvas:u}}),99517:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y.addToRenderList(g),this.pipeline.batchSprite(g,y,u)};C.exports=R}),77856:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={Events:s(51708),DisplayList:s(8050),GameObjectCreator:s(44603),GameObjectFactory:s(39429),UpdateList:s(45027),Components:s(31401),GetCalcMatrix:s(91296),BuildGameObject:s(25305),BuildGameObjectAnimation:s(13059),GameObject:s(95643),BitmapText:s(22186),Blitter:s(6107),Bob:s(46590),Container:s(31559),DOMElement:s(3069),DynamicBitmapText:s(2638),Extern:s(42421),Graphics:s(43831),Group:s(26479),Image:s(88571),Layer:s(93595),Particles:s(18404),PathFollower:s(1159),RenderTexture:s(591),RetroFont:s(196),Rope:s(77757),Sprite:s(68287),Text:s(50171),GetTextSize:s(14220),MeasureText:s(79557),TextStyle:s(35762),TileSprite:s(20839),Zone:s(41481),Video:s(18471),Shape:s(17803),Arc:s(23629),Curve:s(89),Ellipse:s(19921),Grid:s(30479),IsoBox:s(61475),IsoTriangle:s(16933),Line:s(57847),Polygon:s(24949),Rectangle:s(74561),Star:s(55911),Triangle:s(36931),Factories:{Blitter:s(12709),Container:s(24961),DOMElement:s(2611),DynamicBitmapText:s(72566),Extern:s(56315),Graphics:s(1201),Group:s(3385),Image:s(2117),Layer:s(20005),Particles:s(676),PathFollower:s(90145),RenderTexture:s(60505),Rope:s(96819),Sprite:s(46409),StaticBitmapText:s(34914),Text:s(68005),TileSprite:s(91681),Zone:s(84175),Video:s(89025),Arc:s(42563),Curve:s(40511),Ellipse:s(1543),Grid:s(34137),IsoBox:s(3933),IsoTriangle:s(49803),Line:s(2481),Polygon:s(64827),Rectangle:s(87959),Star:s(93697),Triangle:s(45245)},Creators:{Blitter:s(9403),Container:s(77143),DynamicBitmapText:s(11164),Graphics:s(87079),Group:s(94975),Image:s(82459),Layer:s(25179),Particles:s(92730),RenderTexture:s(34495),Rope:s(26209),Sprite:s(15567),StaticBitmapText:s(57336),Text:s(71259),TileSprite:s(14167),Zone:s(95261),Video:s(11511)}};g.Shader=s(20071),g.Mesh=s(4703),g.NineSlice=s(28103),g.PointLight=s(80321),g.Plane=s(33663),g.Factories.Shader=s(74177),g.Factories.Mesh=s(9225),g.Factories.NineSlice=s(47521),g.Factories.PointLight=s(71255),g.Factories.Plane=s(30985),g.Creators.Shader=s(54935),g.Creators.Mesh=s(20527),g.Creators.NineSlice=s(28279),g.Creators.PointLight=s(39829),g.Creators.Plane=s(56015),g.Light=s(41432),g.LightsManager=s(61356),g.LightsPlugin=s(88992),C.exports=g}),93595:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10312),y=s(83419),u=s(31401),l=s(53774),h=s(45893),r=s(50792),o=s(51708),d=s(73162),a=s(33963),f=s(44594),v=s(19186),c=new y({Extends:d,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.PostPipeline,u.Visible,r,a],initialize:function(m,T){d.call(this,m),r.call(this),this.scene=m,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=m.sys,this.events=m.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(g.SKIP_CHECK),T&&this.add(T),m.sys.queueDepthSort()},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},setState:function(p){return this.state=p,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(p,m){return this.data||(this.data=new h(this)),this.data.set(p,m),this},incData:function(p,m){return this.data||(this.data=new h(this)),this.data.inc(p,m),this},toggleData:function(p){return this.data||(this.data=new h(this)),this.data.toggle(p),this},getData:function(p){return this.data||(this.data=new h(this)),this.data.get(p)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(p){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&p.id)},getIndexList:function(){for(var p=this,m=this.parentContainer,T=[];m&&(T.unshift(m.getIndex(p)),p=m,m.parentContainer);)m=m.parentContainer;return T.unshift(this.displayList.getIndex(p)),T},addChildCallback:function(p){var m=p.displayList;m&&m!==this&&p.removeFromDisplayList(),p.displayList||(this.queueDepthSort(),p.displayList=this,p.emit(o.ADDED_TO_SCENE,p,this.scene),this.events.emit(f.ADDED_TO_SCENE,p,this.scene))},removeChildCallback:function(p){this.queueDepthSort(),p.displayList=null,p.emit(o.REMOVED_FROM_SCENE,p,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,p,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(v(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(p,m){return p._depth-m._depth},getChildren:function(){return this.list},addToDisplayList:function(p){return p===void 0&&(p=this.scene.sys.displayList),this.displayList&&this.displayList!==p&&this.removeFromDisplayList(),p.exists(this)||(this.displayList=p,p.add(this,!0),p.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),p.events.emit(f.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var p=this.displayList||this.scene.sys.displayList;return p.exists(this)&&(p.remove(this,!0),p.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),p.events.emit(f.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(p){if(!(!this.scene||this.ignoreDestroy)){this.emit(o.DESTROY,this);for(var m=this.list;m.length;)m[0].destroy(p);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});C.exports=c}),2956:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=g.list;if(u.length!==0){g.depthSort();var l=g.blendMode!==-1;l||s.setBlendMode(0);var h=g._alpha;g.mask&&g.mask.preRenderCanvas(s,null,y);for(var r=0;r<u.length;r++){var o=u[r];if(o.willRender(y)){var d=o.alpha;!l&&o.blendMode!==s.currentBlendMode&&s.setBlendMode(o.blendMode),o.setAlpha(d*h),o.renderCanvas(s,o,y),o.setAlpha(d)}}g.mask&&g.mask.postRenderCanvas(s)}};C.exports=R}),25179:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(93595),u=s(44603),l=s(23568);u.register("layer",function(h,r){h===void 0&&(h={});var o=l(h,"children",null),d=new y(this.scene,o);return r!==void 0&&(h.add=r),g(this.scene,d,h),d})}),20005:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(93595),y=s(39429);y.register("layer",function(u){return this.displayList.add(new g(this.scene,u))})}),33963:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(15869),u=s(2956),C.exports={renderWebGL:y,renderCanvas:u}}),15869:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=g.list,l=u.length;if(l!==0){g.depthSort(),s.pipelines.preBatch(g);var h=g.blendMode!==-1;h||s.setBlendMode(0);for(var r=g.alpha,o=0;o<l;o++){var d=u[o];if(d.willRender(y)){var a,f,v,c;if(d.alphaTopLeft!==void 0)a=d.alphaTopLeft,f=d.alphaTopRight,v=d.alphaBottomLeft,c=d.alphaBottomRight;else{var p=d.alpha;a=p,f=p,v=p,c=p}!h&&d.blendMode!==s.currentBlendMode&&s.setBlendMode(d.blendMode);var m=d.mask;m&&m.preRenderWebGL(s,d,y);var T=d.type;T!==s.currentType&&(s.newType=!0,s.currentType=T),s.nextTypeMatch=o<l-1?u[o+1].type===s.currentType:!1,d.setAlpha(a*r,f*r,v*r,c*r),d.renderWebGL(s,d,y),d.setAlpha(a,f,v,c),m&&m.postRenderWebGL(s,y),s.newType=!1}}s.pipelines.postBatch(g)}};C.exports=R}),41432:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(96503),y=s(83419),u=s(31401),l=s(51767),h=s(70554),r=new y({Extends:g,Mixins:[u.Origin,u.ScrollFactor,u.Visible],initialize:function(d,a,f,v,c,p,m){g.call(this,d,a,f),this.color=new l(v,c,p),this.intensity=m,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(f)},displayWidth:{get:function(){return this.diameter},set:function(o){this.diameter=o}},displayHeight:{get:function(){return this.diameter},set:function(o){this.diameter=o}},width:{get:function(){return this.diameter},set:function(o){this.diameter=o}},height:{get:function(){return this.diameter},set:function(o){this.diameter=o}},willRender:function(o){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&o.id)},setColor:function(o){var d=h.getFloatsFromUintRGB(o);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(o){return this.intensity=o,this},setRadius:function(o){return this.radius=o,this}});r.RENDER_MASK=15,C.exports=r}),61356:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(81491),y=s(83419),u=s(20339),l=s(41432),h=s(80321),r=s(51767),o=s(19133),d=s(19186),a=s(70554),f=new y({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(v,c,p,m,T,E){return this.systems.displayList.add(new h(this.scene,v,c,p,m,T,E))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(v){for(var c=this.lights,p=v.worldView,m=[],T=0;T<c.length;T++){var E=c[T];E.willRender(v)&&g(E,p)&&m.push({light:E,distance:u(E.x,E.y,p.centerX,p.centerY)})}return m.length>this.maxLights&&(d(m,this.sortByDistance),m=m.slice(0,this.maxLights)),this.visibleLights=m.length,m},sortByDistance:function(v,c){return v.distance>=c.distance},setAmbientColor:function(v){var c=a.getFloatsFromUintRGB(v);return this.ambientColor.set(c[0],c[1],c[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(v,c,p,m,T){v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=128),m===void 0&&(m=16777215),T===void 0&&(T=1);var E=a.getFloatsFromUintRGB(m),P=new l(v,c,p,E[0],E[1],E[2],T);return this.lights.push(P),P},removeLight:function(v){var c=this.lights.indexOf(v);return c>=0&&o(this.lights,c),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});C.exports=f}),88992:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(61356),u=s(37277),l=s(44594),h=new g({Extends:y,initialize:function(o){this.scene=o,this.systems=o.sys,o.sys.settings.isBooted||o.sys.events.once(l.BOOT,this.boot,this),y.call(this)},boot:function(){var r=this.systems.events;r.on(l.SHUTDOWN,this.shutdown,this),r.on(l.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});u.register("LightsPlugin",h,"lights"),C.exports=h}),4703:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(39506),l=s(83997),h=s(95643),r=s(34684),o=s(92515),d=s(91296),a=s(37867),f=s(29807),v=s(43396),c=s(19186),p=s(25836),m=s(39318),T=new g({Extends:h,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Size,y.Texture,y.Transform,y.Visible,f],initialize:function(P,w,A,b,O,I,D,B,k,N,H,$){w===void 0&&(w=0),A===void 0&&(A=0),b===void 0&&(b="__WHITE"),h.call(this,P,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new p,this.modelScale=new p(1,1,1),this.modelRotation=new p,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new a,this.viewPosition=new p,this.viewMatrix=new a,this.projectionMatrix=new a,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var J=P.sys.renderer;this.setPosition(w,A),this.setTexture(b,O),this.setSize(J.width,J.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(J.width,J.height),I&&this.addVertices(I,D,B,k,N,H,$)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(E){return this.viewPosition.addScale(p.LEFT,E),this.dirtyCache[10]=1,this},panY:function(E){return this.viewPosition.y+=p.DOWN.y*E,this.dirtyCache[10]=1,this},panZ:function(E){return this.viewPosition.z+=E,this.dirtyCache[10]=1,this},setPerspective:function(E,P,w,A,b){return w===void 0&&(w=45),A===void 0&&(A=.01),b===void 0&&(b=1e3),this.fov=w,this.projectionMatrix.perspective(u(w),E/P,A,b),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(E,P,w,A){return E===void 0&&(E=this.scene.sys.renderer.getAspectRatio()),P===void 0&&(P=1),w===void 0&&(w=-1e3),A===void 0&&(A=1e3),this.fov=0,this.projectionMatrix.ortho(-E,E,-P,P,w,A),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(E){E.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(E,P,w,A,b,O,I,D,B){var k=this.scene.sys.cache.obj.get(E),N;return k&&(N=r(k,this,P,w,A,b,O,I,D,B)),(!N||N.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",E),this},sortByDepth:function(E,P){return E.depth-P.depth},depthSort:function(){return c(this.faces,this.sortByDepth),this},addVertex:function(E,P,w,A,b,O,I){var D=new m(E,P,w,A,b,O,I);return this.vertices.push(D),D},addFace:function(E,P,w){var A=new l(E,P,w);return this.faces.push(A),this.dirtyCache[9]=-1,A},addVertices:function(E,P,w,A,b,O,I){var D=o(E,P,w,A,b,O,I);return D?(this.faces=this.faces.concat(D.faces),this.vertices=this.vertices.concat(D.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(E){return this.faces[E]},hasFaceAt:function(E,P,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var A=d(this,w).calc,b=this.faces,O=0;O<b.length;O++){var I=b[O];if(I.contains(E,P,A))return!0}return!1},getFaceAt:function(E,P,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var A=d(this,w).calc,b=this.faces,O=[],I=0;I<b.length;I++){var D=b[I];D.contains(E,P,A)&&O.push(D)}return c(O,this.sortByDepth)},setDebug:function(E,P){return this.debugGraphic=E,!E&&!P?this.debugCallback=null:P?this.debugCallback=P:this.debugCallback=this.renderDebug,this},isDirty:function(){var E=this.modelPosition,P=this.modelRotation,w=this.modelScale,A=this.dirtyCache,b=E.x,O=E.y,I=E.z,D=P.x,B=P.y,k=P.z,N=w.x,H=w.y,$=w.z,J=this.getFaceCount(),q=A[0],Y=A[1],K=A[2],V=A[3],U=A[4],Z=A[5],et=A[6],st=A[7],rt=A[8],at=A[9];return A[0]=b,A[1]=O,A[2]=I,A[3]=D,A[4]=B,A[5]=k,A[6]=N,A[7]=H,A[8]=$,A[9]=J,q!==b||Y!==O||K!==I||V!==D||U!==B||Z!==k||et!==N||st!==H||rt!==$||at!==J},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var E=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!E[10]&&!this.isDirty())){var P=this.width,w=this.height,A=this.viewMatrix,b=this.viewPosition;E[10]&&(A.identity(),A.translate(b),A.invert(),E[10]=0);var O=this.transformMatrix;O.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var I=b.z,D=this.faces,B=0;B<D.length;B++)D[B].transformCoordinatesLocal(O,P,w,I);this.depthSort()}},renderDebug:function(E,P){for(var w=E.debugGraphic,A=0;A<P.length;A++){var b=P[A],O=b.vertex1.tx,I=b.vertex1.ty,D=b.vertex2.tx,B=b.vertex2.ty,k=b.vertex3.tx,N=b.vertex3.ty;w.strokeTriangle(O,I,D,B,k,N)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(E){E===void 0&&(E={});var P=(function(w,A,b){for(var O=this.faces,I=0;I<O.length;I++){var D=O[I];if(D.contains(A,b))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,E,P),this},setTint:function(E){E===void 0&&(E=16777215);for(var P=this.vertices,w=0;w<P.length;w++)P[w].color=E;return this},uvScroll:function(E,P){for(var w=this.faces,A=0;A<w.length;A++)w[A].scrollUV(E,P);return this},uvScale:function(E,P){for(var w=this.faces,A=0;A<w.length;A++)w[A].scaleUV(E,P);return this},tint:{set:function(E){this.setTint(E)}},rotateX:{get:function(){return v(this.modelRotation.x)},set:function(E){this.modelRotation.x=u(E)}},rotateY:{get:function(){return v(this.modelRotation.y)},set:function(E){this.modelRotation.y=u(E)}},rotateZ:{get:function(){return v(this.modelRotation.z)},set:function(E){this.modelRotation.z=u(E)}}});C.exports=T}),36488:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(){};C.exports=R}),20527:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(35154),h=s(4703);y.register("mesh",function(r,o){r===void 0&&(r={});var d=u(r,"key",null),a=u(r,"frame",null),f=l(r,"vertices",[]),v=l(r,"uvs",[]),c=l(r,"indicies",[]),p=l(r,"containsZ",!1),m=l(r,"normals",[]),T=l(r,"colors",16777215),E=l(r,"alphas",1),P=new h(this.scene,0,0,d,a,f,v,c,p,m,T,E);return o!==void 0&&(r.add=o),g(this.scene,P,r),P})}),9225:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(4703),y=s(39429);y.register("mesh",function(u,l,h,r,o,d,a,f,v,c,p){return this.displayList.add(new g(this.scene,u,l,h,r,o,d,a,f,v,c,p))})}),29807:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(48833),u=s(36488),C.exports={renderWebGL:y,renderCanvas:u}}),48833:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=function(u,l,h,r){var o=l.faces,d=o.length;if(d!==0){h.addToRenderList(l);var a=u.pipelines.set(l.pipeline,l),f=g(l,h,r).calc;u.pipelines.preBatch(l);for(var v=a.setGameObject(l),c=a.vertexViewF32,p=a.vertexViewU32,m=a.vertexCount*a.currentShader.vertexComponentCount-1,T=l.tintFill,E=[],P=l.debugCallback,w=f.a,A=f.b,b=f.c,O=f.d,I=f.e,D=f.f,B=l.viewPosition.z,k=l.hideCCW,N=h.roundPixels,H=h.alpha*l.alpha,$=0,J=0;J<d;J++){var q=o[J];q.isInView(h,k,B,H,w,A,b,O,I,D,N)&&(a.shouldFlush(3)&&(a.flush(),v=a.setGameObject(l),m=a.vertexCount*a.currentShader.vertexComponentCount-1),m=q.load(c,p,m,v,T),$++,a.vertexCount+=3,a.currentBatch.count=a.vertexCount-a.currentBatch.start,P&&E.push(q))}l.totalFrame+=$,P&&P.call(l,l,E),u.pipelines.postBatch(l)}};C.exports=y}),28103:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(95643),l=s(78023),h=s(39318),r=new g({Extends:u,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Texture,y.Transform,y.Visible,l],initialize:function(d,a,f,v,c,p,m,T,E,P,w){u.call(this,d,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var A=d.textures.getFrame(v,c);this.is3Slice=!P&&!w,A&&A.scale9&&(this.is3Slice=A.is3Slice);for(var b=this.is3Slice?18:54,O=0;O<b;O++)this.vertices.push(new h);this.setPosition(a,f),this.setTexture(v,c),this.setSlices(p,m,T,E,P,w,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(o,d,a,f,v,c,p){a===void 0&&(a=10),f===void 0&&(f=10),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=!1);var m=this.frame,T=!1;if(this.is3Slice&&p&&v!==0&&c!==0&&(T=!0),T)console.warn("Cannot change 9 slice to 3 slice");else{if(m&&m.scale9&&!p){var E=m.data.scale9Borders,P=E.x,w=E.y;a=P,f=m.width-E.w-P,v=w,c=m.height-E.h-w,o===void 0&&(o=m.width),d===void 0&&(d=m.height)}else o===void 0&&(o=256),d===void 0&&(d=256);this._width=o,this._height=d,this.leftWidth=a,this.rightWidth=f,this.topHeight=v,this.bottomHeight=c,this.is3Slice&&(d=m.height,this._height=d,this.topHeight=d,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var o=this.leftWidth,d=this.rightWidth,a=this.topHeight,f=this.bottomHeight,v=this.frame.width,c=this.frame.height;this.updateQuadUVs(0,0,0,o/v,a/c),this.updateQuadUVs(6,o/v,0,1-d/v,a/c),this.updateQuadUVs(12,1-d/v,0,1,a/c),this.is3Slice||(this.updateQuadUVs(18,0,a/c,o/v,1-f/c),this.updateQuadUVs(24,o/v,a/c,1-d/v,1-f/c),this.updateQuadUVs(30,1-d/v,a/c,1,1-f/c),this.updateQuadUVs(36,0,1-f/c,o/v,1),this.updateQuadUVs(42,o/v,1-f/c,1-d/v,1),this.updateQuadUVs(48,1-d/v,1-f/c,1,1))},updateVertices:function(){var o=this.leftWidth,d=this.rightWidth,a=this.topHeight,f=this.bottomHeight,v=this.width,c=this.height;this.updateQuad(0,-.5,.5,-.5+o/v,.5-a/c),this.updateQuad(6,-.5+o/v,.5,.5-d/v,.5-a/c),this.updateQuad(12,.5-d/v,.5,.5,.5-a/c),this.is3Slice||(this.updateQuad(18,-.5,.5-a/c,-.5+o/v,-.5+f/c),this.updateQuad(24,-.5+o/v,.5-a/c,.5-d/v,-.5+f/c),this.updateQuad(30,.5-d/v,.5-a/c,.5,-.5+f/c),this.updateQuad(36,-.5,-.5+f/c,-.5+o/v,-.5),this.updateQuad(42,-.5+o/v,-.5+f/c,.5-d/v,-.5),this.updateQuad(48,.5-d/v,-.5+f/c,.5,-.5))},updateQuad:function(o,d,a,f,v){var c=this.width,p=this.height,m=this.originX,T=this.originY,E=this.vertices;E[o+0].resize(d,a,c,p,m,T),E[o+1].resize(d,v,c,p,m,T),E[o+2].resize(f,a,c,p,m,T),E[o+3].resize(d,v,c,p,m,T),E[o+4].resize(f,v,c,p,m,T),E[o+5].resize(f,a,c,p,m,T)},updateQuadUVs:function(o,d,a,f,v){var c=this.vertices,p=this.frame,m=p.u0,T=p.v0,E=p.u1,P=p.v1;if(m!==0||E!==1){var w=E-m;d=m+d*w,f=m+f*w}if(T!==0||P!==1){var A=P-T;a=T+a*A,v=T+v*A}c[o+0].setUVs(d,a),c[o+1].setUVs(d,v),c[o+2].setUVs(f,a),c[o+3].setUVs(d,v),c[o+4].setUVs(f,v),c[o+5].setUVs(f,a)},clearTint:function(){return this.setTint(16777215),this},setTint:function(o){return o===void 0&&(o=16777215),this.tint=o,this.tintFill=!1,this},setTintFill:function(o){return this.setTint(o),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(o){this._width=Math.max(o,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(o){this.is3Slice||(this._height=Math.max(o,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}},setSize:function(o,d){this.width=o,this.height=d,this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setDisplaySize:function(o,d){return this.displayWidth=o,this.displayHeight=d,this},originX:{get:function(){return this._originX},set:function(o){this._originX=o,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(o){this._originY=o,this.updateVertices()}},setOrigin:function(o,d){return o===void 0&&(o=.5),d===void 0&&(d=o),this._originX=o,this._originY=d,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var o=this.frame.height;this._height=o,this.topHeight=o,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});C.exports=r}),28279:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(35154),h=s(28103);y.register("nineslice",function(r,o){r===void 0&&(r={});var d=u(r,"key",null),a=u(r,"frame",null),f=l(r,"width",256),v=l(r,"height",256),c=l(r,"leftWidth",10),p=l(r,"rightWidth",10),m=l(r,"topHeight",0),T=l(r,"bottomHeight",0),E=new h(this.scene,0,0,d,a,f,v,c,p,m,T);return o!==void 0&&(r.add=o),g(this.scene,E,r),E})}),47521:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(28103),y=s(39429);y.register("nineslice",function(u,l,h,r,o,d,a,f,v,c){return this.displayList.add(new g(this.scene,u,l,h,r,o,d,a,f,v,c))})}),78023:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(52230),C.exports={renderWebGL:y,renderCanvas:u}}),52230:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(70554),u=function(l,h,r,o){var d=h.vertices,a=d.length;if(a!==0){r.addToRenderList(h);var f=l.pipelines.set(h.pipeline,h),v=g(h,r,o,!1).calc;l.pipelines.preBatch(h);var c=f.setGameObject(h),p=f.vertexViewF32,m=f.vertexViewU32,T=f.vertexCount*f.currentShader.vertexComponentCount-1,E=r.roundPixels,P=h.tintFill,w=r.alpha*h.alpha,A=y.getTintAppendFloatAlpha(h.tint,w),b=f.vertexAvailable(),O=-1;b<a&&(O=b);for(var I=0;I<a;I++){var D=d[I];I===O&&(f.flush(),c=f.setGameObject(h),T=0),p[++T]=v.getXRound(D.vx,D.vy,E),p[++T]=v.getYRound(D.vx,D.vy,E),p[++T]=D.u,p[++T]=D.v,p[++T]=c,p[++T]=P,m[++T]=A,f.vertexCount++,f.currentBatch.count=f.vertexCount-f.currentBatch.start}l.pipelines.postBatch(h)}};C.exports=u}),76472:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(44777),u=s(37589),l=s(6113),h=s(91389),r=s(90664),o=new g({Extends:y,initialize:function(a){y.call(this,a,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var d=this.propertyValue,a=d,f=this.defaultEmit,v=this.defaultUpdate;if(this.method===9){this.start=d[0],this.ease=l("Linear"),this.interpolation=h("linear"),f=this.easedValueEmit,v=this.easeValueUpdate,a=d[0],this.active=!0;for(var c=0;c<d.length;c++){var p=r(d[c]);this.r.push(p.r),this.g.push(p.g),this.b.push(p.b)}}return this.onEmit=f,this.onUpdate=v,this.current=a,this},setEase:function(d){this.easeName=d,this.ease=l(d)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(d,a,f){var v=this.ease(f),c=this.interpolation(this.r,v),p=this.interpolation(this.g,v),m=this.interpolation(this.b,v),T=u(c,p,m);return this.current=T,T}});C.exports=o}),44777:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(30976),y=s(45319),u=s(83419),l=s(99472),h=s(6113),r=s(95540),o=s(91389),d=s(77720),a=s(15994),f=new u({initialize:function(c,p,m){m===void 0&&(m=!1),this.propertyKey=c,this.propertyValue=p,this.defaultValue=p,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=m,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(v,c){v===void 0&&(v={}),c&&(this.propertyKey=c),this.propertyValue=r(v,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(v){var c;switch(this.method){case 1:case 3:case 8:c=v;break;case 2:this.propertyValue.indexOf(v)>=0&&(c=v);break;case 4:var p=(this.end-this.start)/this.steps;c=d(v,p),this.counter=c;break;case 5:case 6:case 7:c=y(v,this.start,this.end);break;case 9:c=this.start[0];break}return this.current=c,this},getMethod:function(){var v=this.propertyValue;if(v===null)return 0;var c=typeof v;if(c==="number")return 1;if(Array.isArray(v))return 2;if(c==="function")return 3;if(c==="object"){if(this.hasBoth(v,"start","end"))return this.has(v,"steps")?4:5;if(this.hasBoth(v,"min","max"))return 6;if(this.has(v,"random"))return 7;if(this.hasEither(v,"onEmit","onUpdate"))return 8;if(this.hasEither(v,"values","interpolation"))return 9}return 0},setMethods:function(){var v=this.propertyValue,c=v,p=this.defaultEmit,m=this.defaultUpdate;switch(this.method){case 1:p=this.staticValueEmit;break;case 2:p=this.randomStaticValueEmit,c=v[0];break;case 3:this._onEmit=v,p=this.proxyEmit;break;case 4:this.start=v.start,this.end=v.end,this.steps=v.steps,this.counter=this.start,this.yoyo=this.has(v,"yoyo")?v.yoyo:!1,this.direction=0,p=this.steppedEmit,c=this.start;break;case 5:this.start=v.start,this.end=v.end;var T=this.has(v,"ease")?v.ease:"Linear";this.ease=h(T,v.easeParams),p=this.has(v,"random")&&v.random?this.randomRangedValueEmit:this.easedValueEmit,m=this.easeValueUpdate,c=this.start;break;case 6:this.start=v.min,this.end=v.max,p=this.has(v,"int")&&v.int?this.randomRangedIntEmit:this.randomRangedValueEmit,c=this.start;break;case 7:var E=v.random;Array.isArray(E)&&(this.start=E[0],this.end=E[1]),p=this.randomRangedIntEmit,c=this.start;break;case 8:this._onEmit=this.has(v,"onEmit")?v.onEmit:this.defaultEmit,this._onUpdate=this.has(v,"onUpdate")?v.onUpdate:this.defaultUpdate,p=this.proxyEmit,m=this.proxyUpdate;break;case 9:this.start=v.values;var P=this.has(v,"ease")?v.ease:"Linear";this.ease=h(P,v.easeParams),this.interpolation=o(v.interpolation),p=this.easedValueEmit,m=this.easeValueUpdate,c=this.start[0];break}return this.onEmit=p,this.onUpdate=m,this.current=c,this},has:function(v,c){return v.hasOwnProperty(c)},hasBoth:function(v,c,p){return v.hasOwnProperty(c)&&v.hasOwnProperty(p)},hasEither:function(v,c,p){return v.hasOwnProperty(c)||v.hasOwnProperty(p)},defaultEmit:function(v,c,p){return p},defaultUpdate:function(v,c,p,m){return m},proxyEmit:function(v,c,p){var m=this._onEmit(v,c,p);return this.current=m,m},proxyUpdate:function(v,c,p,m){var T=this._onUpdate(v,c,p,m);return this.current=T,T},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var v=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[v],this.current},randomRangedValueEmit:function(v,c){var p=l(this.start,this.end);return v&&v.data[c]&&(v.data[c].min=p,v.data[c].max=this.end),this.current=p,p},randomRangedIntEmit:function(v,c){var p=g(this.start,this.end);return v&&v.data[c]&&(v.data[c].min=p,v.data[c].max=this.end),this.current=p,p},steppedEmit:function(){var v=this.counter,c=v,p=(this.end-this.start)/this.steps;if(this.yoyo){var m;this.direction===0?(c+=p,c>=this.end&&(m=c-this.end,c=this.end-m,this.direction=1)):(c-=p,c<=this.start&&(m=this.start-c,c=this.start+m,this.direction=0)),this.counter=c}else this.counter=a(c+p,this.start,this.end);return this.current=v,v},easedValueEmit:function(v,c){if(v&&v.data[c]){var p=v.data[c];p.min=this.start,p.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(v,c,p){var m=v.data[c],T,E=this.ease(p);return this.interpolation?T=this.interpolation(this.start,E):T=(m.max-m.min)*E+m.min,this.current=T,T},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});C.exports=f}),24502:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=s(20286),l=new g({Extends:u,initialize:function(r,o,d,a,f){if(typeof r=="object"){var v=r;r=y(v,"x",0),o=y(v,"y",0),d=y(v,"power",0),a=y(v,"epsilon",100),f=y(v,"gravity",50)}else r===void 0&&(r=0),o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a=100),f===void 0&&(f=50);u.call(this,r,o,!0),this._gravity=f,this._power=d*f,this._epsilon=a*a},update:function(h,r){var o=this.x-h.x,d=this.y-h.y,a=o*o+d*d;if(a!==0){var f=Math.sqrt(a);a<this._epsilon&&(a=this._epsilon);var v=this._power*r/(a*f)*100;h.velocityX+=o*v,h.velocityY+=d*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var r=this.power;this._gravity=h,this.power=r}}});C.exports=l}),56480:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(9674),y=s(45319),u=s(83419),l=s(39506),h=s(87841),r=s(11520),o=s(26099),d=new u({initialize:function(f){this.emitter=f,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new o,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=f.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new g(this)),this.bounds=new h},emit:function(a,f,v,c,p,m){return this.emitter.emit(a,f,v,c,p,m)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(a,f){a===void 0&&(a=0),f===void 0&&(f=0),this.x=a,this.y=f},fire:function(a,f){var v=this.emitter,c=v.ops,p=v.getAnim();if(p?this.anims.play(p):(this.frame=v.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(v.getEmitZone(this),a===void 0?this.x+=c.x.onEmit(this,"x"):c.x.steps>0?this.x+=a+c.x.onEmit(this,"x"):this.x+=a,f===void 0?this.y+=c.y.onEmit(this,"y"):c.y.steps>0?this.y+=f+c.y.onEmit(this,"y"):this.y+=f,this.life=c.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=c.delay.onEmit(this,"delay"),this.holdCurrent=c.hold.onEmit(this,"hold"),this.scaleX=c.scaleX.onEmit(this,"scaleX"),this.scaleY=c.scaleY.active?c.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=c.rotate.onEmit(this,"rotate"),this.rotation=l(this.angle),v.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&v.getDeathZone(this))return this.lifeCurrent=0,!1;var m=c.speedX.onEmit(this,"speedX"),T=c.speedY.active?c.speedY.onEmit(this,"speedY"):m;if(v.radial){var E=l(c.angle.onEmit(this,"angle"));this.velocityX=Math.cos(E)*Math.abs(m),this.velocityY=Math.sin(E)*Math.abs(T)}else if(v.moveTo){var P=c.moveToX.onEmit(this,"moveToX"),w=c.moveToY.onEmit(this,"moveToY"),A=this.life/1e3;this.velocityX=(P-this.x)/A,this.velocityY=(w-this.y)/A}else this.velocityX=m,this.velocityY=T;return v.acceleration&&(this.accelerationX=c.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=c.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=c.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=c.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=c.bounce.onEmit(this,"bounce"),this.alpha=c.alpha.onEmit(this,"alpha"),c.color.active?this.tint=c.color.onEmit(this,"tint"):this.tint=c.tint.onEmit(this,"tint"),!0},update:function(a,f,v){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=a,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=a,!1;this.anims&&this.anims.update(0,a);var c=this.emitter,p=c.ops,m=1-this.lifeCurrent/this.life;if(this.lifeT=m,this.x=p.x.onUpdate(this,"x",m,this.x),this.y=p.y.onUpdate(this,"y",m,this.y),c.moveTo){var T=p.moveToX.onUpdate(this,"moveToX",m,c.moveToX),E=p.moveToY.onUpdate(this,"moveToY",m,c.moveToY),P=this.lifeCurrent/1e3;this.velocityX=(T-this.x)/P,this.velocityY=(E-this.y)/P}return this.computeVelocity(c,a,f,v,m),this.scaleX=p.scaleX.onUpdate(this,"scaleX",m,this.scaleX),p.scaleY.active?this.scaleY=p.scaleY.onUpdate(this,"scaleY",m,this.scaleY):this.scaleY=this.scaleX,this.angle=p.rotate.onUpdate(this,"rotate",m,this.angle),this.rotation=l(this.angle),c.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=y(p.alpha.onUpdate(this,"alpha",m,this.alpha),0,1),p.color.active?this.tint=p.color.onUpdate(this,"color",m,this.tint):this.tint=p.tint.onUpdate(this,"tint",m,this.tint),this.lifeCurrent-=a,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(a,f,v,c,p){var m=a.ops,T=this.velocityX,E=this.velocityY,P=m.accelerationX.onUpdate(this,"accelerationX",p,this.accelerationX),w=m.accelerationY.onUpdate(this,"accelerationY",p,this.accelerationY),A=m.maxVelocityX.onUpdate(this,"maxVelocityX",p,this.maxVelocityX),b=m.maxVelocityY.onUpdate(this,"maxVelocityY",p,this.maxVelocityY);this.bounce=m.bounce.onUpdate(this,"bounce",p,this.bounce),T+=a.gravityX*v+P*v,E+=a.gravityY*v+w*v,T=y(T,-A,A),E=y(E,-b,b),this.velocityX=T,this.velocityY=E,this.x+=T*v,this.y+=E*v,a.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var O=0;O<c.length;O++){var I=c[O];I.active&&I.update(this,f,v,p)}},setSizeToFrame:function(){},getBounds:function(a){a===void 0&&(a=this.emitter.getWorldTransformMatrix());var f=Math.abs(a.scaleX)*this.scaleX,v=Math.abs(a.scaleY)*this.scaleY,c=this.x,p=this.y,m=this.rotation,T=this.frame.width*f/2,E=this.frame.height*v/2,P=this.bounds,w=new o(c-T,p-E),A=new o(c+T,p-E),b=new o(c-T,p+E),O=new o(c+T,p+E);return m!==0&&(r(w,c,p,m),r(A,c,p,m),r(b,c,p,m),r(O,c,p,m)),a.transformPoint(w.x,w.y,w),a.transformPoint(A.x,A.y,A),a.transformPoint(b.x,b.y,b),a.transformPoint(O.x,O.y,O),P.x=Math.min(w.x,A.x,b.x,O.x),P.y=Math.min(w.y,A.y,b.y,O.y),P.width=Math.max(w.x,A.x,b.x,O.x)-P.x,P.height=Math.max(w.y,A.y,b.y,O.y)-P.y,P},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});C.exports=d}),69601:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(20286),u=s(87841),l=new g({Extends:y,initialize:function(r,o,d,a,f,v,c,p){f===void 0&&(f=!0),v===void 0&&(v=!0),c===void 0&&(c=!0),p===void 0&&(p=!0),y.call(this,r,o,!0),this.bounds=new u(r,o,d,a),this.collideLeft=f,this.collideRight=v,this.collideTop=c,this.collideBottom=p},update:function(h){var r=this.bounds,o=-h.bounce,d=h.worldPosition;d.x<r.x&&this.collideLeft?(h.x+=r.x-d.x,h.velocityX*=o):d.x>r.right&&this.collideRight&&(h.x-=d.x-r.right,h.velocityX*=o),d.y<r.y&&this.collideTop?(h.y+=r.y-d.y,h.velocityY*=o):d.y>r.bottom&&this.collideBottom&&(h.y-=d.y-r.bottom,h.velocityY*=o)}});C.exports=l}),31600:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(53774),l=s(43459),h=s(26388),r=s(19909),o=s(76472),d=s(44777),a=s(20696),f=s(95643),v=s(95540),c=s(26546),p=s(24502),m=s(1985),T=s(97022),E=s(86091),P=s(73162),w=s(20074),A=s(269),b=s(56480),O=s(69601),I=s(68875),D=s(87841),B=s(59996),k=s(72905),N=s(90668),H=s(19186),$=s(61340),J=s(26099),q=s(15994),Y=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],K=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],V=new g({Extends:f,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Texture,y.Transform,y.Visible,N],initialize:function(Z,et,st,rt,at){f.call(this,Z,"ParticleEmitter"),this.particleClass=b,this.config=null,this.ops={accelerationX:new d("accelerationX",0),accelerationY:new d("accelerationY",0),alpha:new d("alpha",1),angle:new d("angle",{min:0,max:360},!0),bounce:new d("bounce",0),color:new o("color"),delay:new d("delay",0,!0),hold:new d("hold",0,!0),lifespan:new d("lifespan",1e3,!0),maxVelocityX:new d("maxVelocityX",1e4),maxVelocityY:new d("maxVelocityY",1e4),moveToX:new d("moveToX",0),moveToY:new d("moveToY",0),quantity:new d("quantity",1,!0),rotate:new d("rotate",0),scaleX:new d("scaleX",1),scaleY:new d("scaleY",1),speedX:new d("speedX",0,!0),speedY:new d("speedY",0,!0),tint:new d("tint",16777215),x:new d("x",0),y:new d("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new J,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new $,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new P(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(et,st),this.setTexture(rt),at&&this.setConfig(at)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(U){if(!U)return this;this.config=U;var Z=0,et="",st=this.ops;for(Z=0;Z<K.length;Z++)et=K[Z],st[et].loadConfig(U);for(Z=0;Z<Y.length;Z++)et=Y[Z],T(U,et)&&(this[et]=v(U,et));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,T(U,"speed")&&(st.speedX.loadConfig(U,"speed"),st.speedY.active=!1),(m(U,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),T(U,"scale")&&(st.scaleX.loadConfig(U,"scale"),st.scaleY.active=!1),T(U,"callbackScope")){var rt=v(U,"callbackScope",null);this.emitCallbackScope=rt,this.deathCallbackScope=rt}if(T(U,"emitZone")&&this.addEmitZone(U.emitZone),T(U,"deathZone")&&this.addDeathZone(U.deathZone),T(U,"bounds")){var at=this.addParticleBounds(U.bounds);at.collideLeft=v(U,"collideLeft",!0),at.collideRight=v(U,"collideRight",!0),at.collideTop=v(U,"collideTop",!0),at.collideBottom=v(U,"collideBottom",!0)}return T(U,"followOffset")&&this.followOffset.setFromObject(v(U,"followOffset",0)),T(U,"texture")&&this.setTexture(U.texture),T(U,"frame")?this.setEmitterFrame(U.frame):T(U,"anim")&&this.setAnim(U.anim),T(U,"reserve")&&this.reserve(U.reserve),T(U,"advance")&&this.fastForward(U.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(a.START,this),this},updateConfig:function(U){return U&&(this.config?this.setConfig(A(this.config,U)):this.setConfig(U)),this},toJSON:function(){var U=u(this),Z=0,et="";for(Z=0;Z<Y.length;Z++)et=Y[Z],U[et]=this[et];var st=this.ops;for(Z=0;Z<K.length;Z++)et=K[Z],st[et]&&(U[et]=st[et].toJSON());return st.speedY.active||(delete U.speedX,U.speed=st.speedX.toJSON()),this.scaleX===this.scaleY&&(delete U.scaleX,delete U.scaleY,U.scale=st.scaleX.toJSON()),U},resetCounters:function(U,Z){var et=this.counters;et.fill(0),et[0]=U,Z&&(et[5]=1)},startFollow:function(U,Z,et,st){return Z===void 0&&(Z=0),et===void 0&&(et=0),st===void 0&&(st=!1),this.follow=U,this.followOffset.set(Z,et),this.trackVisible=st,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var U=this.frames,Z=U.length,et;return Z===1?et=U[0]:this.randomFrame?et=c(U):(et=U[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===Z&&(this.currentFrame=0))),this.texture.get(et)},setEmitterFrame:function(U,Z,et){Z===void 0&&(Z=!0),et===void 0&&(et=1),this.randomFrame=Z,this.frameQuantity=et,this.currentFrame=0;var st=typeof U;if(this.frames.length=0,Array.isArray(U))this.frames=this.frames.concat(U);else if(st==="string"||st==="number")this.frames.push(U);else if(st==="object"){var rt=U;U=v(rt,"frames",null),U&&(this.frames=this.frames.concat(U));var at=v(rt,"cycle",!1);this.randomFrame=!at,this.frameQuantity=v(rt,"quantity",et)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var U=this.anims,Z=U.length;if(Z===0)return null;if(Z===1)return U[0];if(this.randomAnim)return c(U);var et=U[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=q(this.currentAnim+1,0,Z)),et},setAnim:function(U,Z,et){Z===void 0&&(Z=!0),et===void 0&&(et=1),this.randomAnim=Z,this.animQuantity=et,this.currentAnim=0;var st=typeof U;if(this.anims.length=0,Array.isArray(U))this.anims=this.anims.concat(U);else if(st==="string")this.anims.push(U);else if(st==="object"){var rt=U;U=v(rt,"anims",null),U&&(this.anims=this.anims.concat(U));var at=v(rt,"cycle",!1);this.randomAnim=!at,this.animQuantity=v(rt,"quantity",et)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(U){return U===void 0&&(U=!0),this.radial=U,this},addParticleBounds:function(U,Z,et,st,rt,at,ut,vt){if(typeof U=="object"){var pt=U;U=pt.x,Z=pt.y,et=T(pt,"w")?pt.w:pt.width,st=T(pt,"h")?pt.h:pt.height}return this.addParticleProcessor(new O(U,Z,et,st,rt,at,ut,vt))},setParticleSpeed:function(U,Z){return Z===void 0&&(Z=U),this.ops.speedX.onChange(U),U===Z?this.ops.speedY.active=!1:this.ops.speedY.onChange(Z),this.radial=!0,this},setParticleScale:function(U,Z){return U===void 0&&(U=1),Z===void 0&&(Z=U),this.ops.scaleX.onChange(U),this.ops.scaleY.onChange(Z),this},setParticleGravity:function(U,Z){return this.gravityX=U,this.gravityY=Z,this},setParticleAlpha:function(U){return this.ops.alpha.onChange(U),this},setParticleTint:function(U){return this.ops.tint.onChange(U),this},setEmitterAngle:function(U){return this.ops.angle.onChange(U),this},setParticleLifespan:function(U){return this.ops.lifespan.onChange(U),this},setQuantity:function(U){return this.quantity=U,this},setFrequency:function(U,Z){return this.frequency=U,this.flowCounter=U>0?U:0,Z&&(this.quantity=Z),this},addDeathZone:function(U){Array.isArray(U)||(U=[U]);for(var Z,et=[],st=0;st<U.length;st++)if(Z=U[st],Z instanceof h)et.push(Z);else if(typeof Z.contains=="function")Z=new h(Z,!0),et.push(Z);else{var rt=v(Z,"type","onEnter"),at=v(Z,"source",null);if(at&&typeof at.contains=="function"){var ut=rt==="onEnter";Z=new h(at,ut),et.push(Z)}}return this.deathZones=this.deathZones.concat(et),et},removeDeathZone:function(U){return k(this.deathZones,U),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(U){Array.isArray(U)||(U=[U]);for(var Z,et=[],st=0;st<U.length;st++)if(Z=U[st],Z instanceof I||Z instanceof r)et.push(Z);else{var rt=v(Z,"source",null);if(rt){var at=v(Z,"type","random");if(at==="random"&&typeof rt.getRandomPoint=="function")Z=new I(rt),et.push(Z);else if(at==="edge"&&typeof rt.getPoints=="function"){var ut=v(Z,"quantity",1),vt=v(Z,"stepRate",0),pt=v(Z,"yoyo",!1),gt=v(Z,"seamless",!0),yt=v(Z,"total",-1);Z=new r(rt,ut,vt,pt,gt,yt),et.push(Z)}}}return this.emitZones=this.emitZones.concat(et),et},removeEmitZone:function(U){return k(this.emitZones,U),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(U){var Z=this.emitZones,et=Z.length;if(et!==0){var st=Z[this.zoneIndex];st.getPoint(U),st.total>-1&&(this.zoneTotal++,this.zoneTotal===st.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===et&&(this.zoneIndex=0)))}},getDeathZone:function(U){for(var Z=this.deathZones,et=0;et<Z.length;et++){var st=Z[et];if(st.willKill(U))return this.emit(a.DEATH_ZONE,this,U,st),!0}return!1},setEmitZone:function(U){var Z;return isFinite(U)?Z=U:Z=this.emitZones.indexOf(U),Z>=0&&(this.zoneIndex=Z),this},addParticleProcessor:function(U){return this.processors.exists(U)||(U.emitter&&U.emitter.removeParticleProcessor(U),this.processors.add(U),U.emitter=this),U},removeParticleProcessor:function(U){return this.processors.exists(U)&&(this.processors.remove(U,!0),U.emitter=null),U},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(U){return this.addParticleProcessor(new p(U))},reserve:function(U){var Z=this.dead;if(this.maxParticles>0){var et=this.getParticleCount();et+U>this.maxParticles&&(U=this.maxParticles-(et+U))}for(var st=0;st<U;st++)Z.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(U,Z){return U===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof U=="function"&&(this.emitCallback=U,Z&&(this.emitCallbackScope=Z)),this},onParticleDeath:function(U,Z){return U===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof U=="function"&&(this.deathCallback=U,Z&&(this.deathCallbackScope=Z)),this},killAll:function(){for(var U=this.dead,Z=this.alive;Z.length>0;)U.push(Z.pop());return this},forEachAlive:function(U,Z){for(var et=this.alive,st=et.length,rt=0;rt<st;rt++)U.call(Z,et[rt],this);return this},forEachDead:function(U,Z){for(var et=this.dead,st=et.length,rt=0;rt<st;rt++)U.call(Z,et[rt],this);return this},start:function(U,Z){return U===void 0&&(U=0),this.emitting||(U>0&&this.fastForward(U),this.emitting=!0,this.resetCounters(this.frequency,!0),Z!==void 0&&(this.duration=Math.abs(Z)),this.emit(a.START,this)),this},stop:function(U){return U===void 0&&(U=!1),this.emitting&&(this.emitting=!1,U&&this.killAll(),this.emit(a.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(U,Z){return U===void 0&&(U=""),Z===void 0&&(Z=this.true),this.sortProperty=U,this.sortOrderAsc=Z,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(U){return this.sortProperty!==""?U=this.depthSortCallback:U=null,this.sortCallback=U,this},depthSort:function(){return H(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(U,Z){var et=this.sortProperty;return this.sortOrderAsc?U[et]-Z[et]:Z[et]-U[et]},flow:function(U,Z,et){return Z===void 0&&(Z=1),this.emitting=!1,this.frequency=U,this.quantity=Z,et!==void 0&&(this.stopAfter=et),this.start()},explode:function(U,Z,et){this.frequency=-1,this.resetCounters(-1,!0);var st=this.emitParticle(U,Z,et);return this.emit(a.EXPLODE,this,st),st},emitParticleAt:function(U,Z,et){return this.emitParticle(et,U,Z)},emitParticle:function(U,Z,et){if(!this.atLimit()){U===void 0&&(U=this.ops.quantity.onEmit());for(var st=this.dead,rt=this.stopAfter,at=this.follow?this.follow.x+this.followOffset.x:Z,ut=this.follow?this.follow.y+this.followOffset.y:et,vt=0;vt<U;vt++){var pt=st.pop();if(pt||(pt=new this.particleClass(this)),pt.fire(at,ut)?(this.particleBringToTop?this.alive.push(pt):this.alive.unshift(pt),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,pt,this)):this.dead.push(pt),rt>0&&(this.stopCounter++,this.stopCounter>=rt)||this.atLimit())break}return pt}},fastForward:function(U,Z){Z===void 0&&(Z=1e3/60);var et=0;for(this.skipping=!0;et<Math.abs(U);)this.preUpdate(0,Z),et+=Z;return this.skipping=!1,this},preUpdate:function(U,Z){Z*=this.timeScale;var et=Z/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var st=this.getProcessors(),rt=this.alive,at=this.dead,ut=0,vt=[],pt=rt.length;for(ut=0;ut<pt;ut++){var gt=rt[ut];gt.update(Z,et,st)&&vt.push({index:ut,particle:gt})}if(pt=vt.length,pt>0){var yt=this.deathCallback,mt=this.deathCallbackScope;for(ut=pt-1;ut>=0;ut--){var Tt=vt[ut];rt.splice(Tt.index,1),at.push(Tt.particle),yt&&yt.call(mt,Tt.particle),Tt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&rt.length===0&&(this.completeFlag=0,this.emit(a.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=Z;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=Z,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(U){for(var Z=this.getWorldTransformMatrix(),et=this.alive,st=et.length,rt=[],at=0;at<st;at++){var ut=et[at];B(U,ut.getBounds(Z))&&rt.push(ut)}return rt},getBounds:function(U,Z,et,st){U===void 0&&(U=0),Z===void 0&&(Z=0),et===void 0&&(et=1e3/60),st===void 0&&(st=new D);var rt=this.getWorldTransformMatrix(),at,ut,vt=this.alive,pt=!1;if(st.setTo(0,0,0,0),Z>0){var gt=0;for(this.skipping=!0;gt<Math.abs(Z);){for(this.preUpdate(0,et),at=0;at<vt.length;at++)ut=vt[at].getBounds(rt),pt?w(st,ut):(pt=!0,l(ut,st));gt+=et}this.skipping=!1}else for(at=0;at<vt.length;at++)ut=vt[at].getBounds(rt),pt?w(st,ut):(pt=!0,l(ut,st));return U>0&&E(st,U,U),st},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(U){this.ops.x.onChange(U)}},particleY:{get:function(){return this.ops.y.current},set:function(U){this.ops.y.onChange(U)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(U){this.ops.accelerationX.onChange(U)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(U){this.ops.accelerationY.onChange(U)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(U){this.ops.maxVelocityX.onChange(U)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(U){this.ops.maxVelocityY.onChange(U)}},speed:{get:function(){return this.ops.speedX.current},set:function(U){this.ops.speedX.onChange(U),this.ops.speedY.onChange(U)}},speedX:{get:function(){return this.ops.speedX.current},set:function(U){this.ops.speedX.onChange(U)}},speedY:{get:function(){return this.ops.speedY.current},set:function(U){this.ops.speedY.onChange(U)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(U){this.ops.moveToX.onChange(U)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(U){this.ops.moveToY.onChange(U)}},bounce:{get:function(){return this.ops.bounce.current},set:function(U){this.ops.bounce.onChange(U)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(U){this.ops.scaleX.onChange(U)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(U){this.ops.scaleY.onChange(U)}},particleColor:{get:function(){return this.ops.color.current},set:function(U){this.ops.color.onChange(U)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(U){this.ops.color.setEase(U)}},particleTint:{get:function(){return this.ops.tint.current},set:function(U){this.ops.tint.onChange(U)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(U){this.ops.alpha.onChange(U)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(U){this.ops.lifespan.onChange(U)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(U){this.ops.angle.onChange(U)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(U){this.ops.rotate.onChange(U)}},quantity:{get:function(){return this.ops.quantity.current},set:function(U){this.ops.quantity.onChange(U)}},delay:{get:function(){return this.ops.delay.current},set:function(U){this.ops.delay.onChange(U)}},hold:{get:function(){return this.ops.hold.current},set:function(U){this.ops.hold.onChange(U)}},flowCounter:{get:function(){return this.counters[0]},set:function(U){this.counters[0]=U}},frameCounter:{get:function(){return this.counters[1]},set:function(U){this.counters[1]=U}},animCounter:{get:function(){return this.counters[2]},set:function(U){this.counters[2]=U}},elapsed:{get:function(){return this.counters[3]},set:function(U){this.counters[3]=U}},stopCounter:{get:function(){return this.counters[4]},set:function(U){this.counters[4]=U}},completeFlag:{get:function(){return this.counters[5]},set:function(U){this.counters[5]=U}},zoneIndex:{get:function(){return this.counters[6]},set:function(U){this.counters[6]=U}},zoneTotal:{get:function(){return this.counters[7]},set:function(U){this.counters[7]=U}},currentFrame:{get:function(){return this.counters[8]},set:function(U){this.counters[8]=U}},currentAnim:{get:function(){return this.counters[9]},set:function(U){this.counters[9]=U}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var U,Z=this.ops;for(U=0;U<K.length;U++){var et=K[U];Z[et].destroy()}for(U=0;U<this.alive.length;U++)this.alive[U].destroy();for(U=0;U<this.dead.length;U++)this.dead[U].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});C.exports=V}),9871:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(59996),y=s(61340),u=new y,l=new y,h=new y,r=new y,o=function(d,a,f,v){var c=u,p=l,m=h,T=r;v?(T.loadIdentity(),T.multiply(v),T.translate(a.x,a.y),T.rotate(a.rotation),T.scale(a.scaleX,a.scaleY)):T.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var E=d.currentContext,P=f.roundPixels,w=f.alpha,A=a.alpha,b=a.alive,O=b.length,I=a.viewBounds;if(!(!a.visible||O===0||I&&!g(I,f.worldView))){a.sortCallback&&a.depthSort(),f.addToRenderList(a);var D=a.scrollFactorX,B=a.scrollFactorY;E.save(),E.globalCompositeOperation=d.blendModes[a.blendMode];for(var k=0;k<O;k++){var N=b[k],H=N.alpha*A*w;if(!(H<=0||N.scaleX===0||N.scaleY===0)){m.applyITRS(N.x,N.y,N.rotation,N.scaleX,N.scaleY),c.copyFrom(f.matrix),c.multiplyWithOffset(T,-f.scrollX*D,-f.scrollY*B),m.e=N.x,m.f=N.y,c.multiply(m,p);var $=N.frame,J=$.canvasData;if(J.width>0&&J.height>0){var q=-$.halfWidth,Y=-$.halfHeight;E.globalAlpha=H,E.save(),p.setToContext(E),P&&(q=Math.round(q),Y=Math.round(Y)),E.imageSmoothingEnabled=!$.source.scaleMode,E.drawImage($.source.image,J.x,J.y,J.width,J.height,q,Y,J.width,J.height),E.restore()}}}E.restore()}};C.exports=o}),92730:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(95540),h=s(31600);y.register("particles",function(r,o){r===void 0&&(r={});var d=u(r,"key",null),a=l(r,"config",null),f=new h(this.scene,0,0,d);return o!==void 0&&(r.add=o),g(this.scene,f,r),a&&f.setConfig(a),f})}),676:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(31600);g.register("particles",function(u,l,h,r){return u!==void 0&&typeof u=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new y(this.scene,u,l,h,r))})}),90668:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(21188),u=s(9871),C.exports={renderWebGL:y,renderCanvas:u}}),21188:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(59996),y=s(61340),u=s(70554),l=new y,h=new y,r=new y,o=new y,d=function(a,f,v,c){var p=a.pipelines.set(f.pipeline),m=l,T=h,E=r,P=o;c?(P.loadIdentity(),P.multiply(c),P.translate(f.x,f.y),P.rotate(f.rotation),P.scale(f.scaleX,f.scaleY)):P.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var w=u.getTintAppendFloatAlpha,A=v.alpha,b=f.alpha;a.pipelines.preBatch(f);var O=f.alive,I=O.length,D=f.viewBounds;if(!(I===0||D&&!g(D,v.worldView))){f.sortCallback&&f.depthSort(),v.addToRenderList(f),m.copyFrom(v.matrix),m.multiplyWithOffset(P,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),a.setBlendMode(f.blendMode),f.mask&&(f.mask.preRenderWebGL(a,f,v),a.pipelines.set(f.pipeline));for(var B=f.tintFill,k,N,H=0;H<I;H++){var $=O[H],J=$.alpha*b*A;if(!(J<=0||$.scaleX===0||$.scaleY===0)){E.applyITRS($.x,$.y,$.rotation,$.scaleX,$.scaleY),E.e=$.x,E.f=$.y,m.multiply(E,T);var q=$.frame;q.glTexture!==N&&(N=q.glTexture,k=p.setGameObject(f,q));var Y=-q.halfWidth,K=-q.halfHeight,V=T.setQuad(Y,K,Y+q.width,K+q.height),U=w($.tint,J);p.shouldFlush(6)&&(p.flush(),k=p.setGameObject(f,q)),p.batchQuad(f,V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],q.u0,q.v0,q.u1,q.v1,U,U,U,U,B,N,k)}}f.mask&&f.mask.postRenderWebGL(a,v),a.pipelines.postBatch(f)}};C.exports=d}),20286:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r){l===void 0&&(l=0),h===void 0&&(h=0),r===void 0&&(r=!0),this.emitter,this.x=l,this.y=h,this.active=r},update:function(){},destroy:function(){this.emitter=null}});C.exports=y}),9774:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="complete"}),812:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="deathzone"}),30522:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="explode"}),96695:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="start"}),18677:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="stop"}),20696:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={COMPLETE:s(9774),DEATH_ZONE:s(812),EXPLODE:s(30522),START:s(96695),STOP:s(18677)}}),18404:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={EmitterColorOp:s(76472),EmitterOp:s(44777),Events:s(20696),GravityWell:s(24502),Particle:s(56480),ParticleBounds:s(69601),ParticleEmitter:s(31600),ParticleProcessor:s(20286),Zones:s(21024)}}),26388:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h){this.source=l,this.killOnEnter=h},willKill:function(u){var l=this.source.contains(u.x,u.y);return l&&this.killOnEnter||!l&&!this.killOnEnter}});C.exports=y}),19909:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r,o,d,a){o===void 0&&(o=!1),d===void 0&&(d=!0),a===void 0&&(a=-1),this.source=l,this.points=[],this.quantity=h,this.stepRate=r,this.yoyo=o,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.total=a,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var u=this.points[0],l=this.points[this.points.length-1];u.x===l.x&&u.y===l.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(u){return this.source=u,this.updateSource()},getPoint:function(u){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var l=this.points[this.counter];l&&(u.x=l.x,u.y=l.y)}});C.exports=y}),68875:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(26099),u=new g({initialize:function(h){this.source=h,this._tempVec=new y,this.total=-1},getPoint:function(l){var h=this._tempVec;this.source.getRandomPoint(h),l.x=h.x,l.y=h.y}});C.exports=u}),21024:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={DeathZone:s(26388),EdgeZone:s(19909),RandomZone:s(68875)}}),1159:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(68287),l=new g({Extends:u,Mixins:[y.PathFollower],initialize:function(r,o,d,a,f,v){u.call(this,r,d,a,f,v),this.path=o},preUpdate:function(h,r){this.anims.update(h,r),this.pathUpdate(h)}});C.exports=l}),90145:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(1159);g.register("follower",function(u,l,h,r,o){var d=new y(this.scene,u,l,h,r,o);return this.displayList.add(d),this.updateList.add(d),d})}),33663:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(9674),y=s(83419),u=s(48803),l=s(90664),h=s(4703),r=s(45650),o=new y({Extends:h,initialize:function(a,f,v,c,p,m,T,E){c||(c="__DEFAULT"),h.call(this,a,f,v,c,p),this.type="Plane",this.anims=new g(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(m,T,E),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(d,a,f){d===void 0&&(d=8),a===void 0&&(a=8),f===void 0&&(f=!1);var v=!1;return f&&(v=!0),this.gridWidth=d,this.gridHeight=a,this.isTiled=f,this.clear(),u({mesh:this,widthSegments:d,heightSegments:a,isOrtho:!1,tile:f,flipY:v}),this},setSizeToFrame:function(d){d===void 0&&(d=!0);var a=this.frame;if(this.setPerspective(this.width/a.width,this.height/a.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!d)return this;var f=this.gridWidth,v=this.gridHeight,c=this.vertices,p=a.u0,m=a.u1,T=a.v0,E=a.v1,P,w,A=0;if(this.isTiled)for(T=a.v1,E=a.v0,w=0;w<v;w++)for(P=0;P<f;P++)c[A++].setUVs(p,E),c[A++].setUVs(p,T),c[A++].setUVs(m,E),c[A++].setUVs(p,T),c[A++].setUVs(m,T),c[A++].setUVs(m,E);else{var b=f+1,O=v+1,I=m-p,D=E-T,B=[];for(w=0;w<O;w++)for(P=0;P<b;P++){var k=p+I*(P/f),N=T+D*(w/v);B.push(k,N)}for(w=0;w<v;w++)for(P=0;P<f;P++){var H=(P+b*w)*2,$=(P+b*(w+1))*2,J=(P+1+b*(w+1))*2,q=(P+1+b*w)*2;c[A++].setUVs(B[H],B[H+1]),c[A++].setUVs(B[$],B[$+1]),c[A++].setUVs(B[q],B[q+1]),c[A++].setUVs(B[$],B[$+1]),c[A++].setUVs(B[J],B[J+1]),c[A++].setUVs(B[q],B[q+1])}}return this},setViewHeight:function(d){d===void 0&&(d=this.frame.height);var a=this.fov*(Math.PI/180);this.viewPosition.z=this.height/d/Math.tan(a/2),this.dirtyCache[10]=1},createCheckerboard:function(d,a,f,v,c){d===void 0&&(d=16777215),a===void 0&&(a=255),f===void 0&&(f=255),v===void 0&&(v=255),c===void 0&&(c=128);for(var p=l(d),m=l(a),T=[],E=0;E<16;E++)for(var P=0;P<16;P++)E<8&&P<8||E>7&&P>7?T.push(p.r,p.g,p.b,f):T.push(m.r,m.g,m.b,v);var w=this.scene.sys.textures.addUint8Array(r(),new Uint8Array(T),16,16);return this.removeCheckerboard(),this.setTexture(w),this.setSizeToFrame(),this.setViewHeight(c),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(d,a){return this.anims.play(d,a)},playReverse:function(d,a){return this.anims.playReverse(d,a)},playAfterDelay:function(d,a){return this.anims.playAfterDelay(d,a)},playAfterRepeat:function(d,a){return this.anims.playAfterRepeat(d,a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(d){return this.anims.stopAfterDelay(d)},stopAfterRepeat:function(d){return this.anims.stopAfterRepeat(d)},stopOnFrame:function(d){return this.anims.stopOnFrame(d)},preUpdate:function(d,a){h.prototype.preUpdate.call(this,d,a),this.anims.update(d,a)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});C.exports=o}),56015:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(13059),u=s(44603),l=s(23568),h=s(35154),r=s(33663);u.register("plane",function(o,d){o===void 0&&(o={});var a=l(o,"key",null),f=l(o,"frame",null),v=h(o,"width",8),c=h(o,"height",8),p=h(o,"tile",!1),m=new r(this.scene,0,0,a,f,v,c,p);d!==void 0&&(o.add=d);var T=h(o,"checkerboard",null);if(T){var E=h(T,"color1",16777215),P=h(T,"color2",255),w=h(T,"alpha1",255),A=h(T,"alpha2",255),b=h(T,"height",128);m.createCheckerboard(E,P,w,A,b)}return g(this.scene,m,o),y(m,o),m})}),30985:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(33663),y=s(39429);y.register("plane",function(u,l,h,r,o,d,a){return this.displayList.add(new g(this.scene,u,l,h,r,o,d,a))})}),80321:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(95643),l=s(30100),h=s(36060),r=s(67277),o=new g({Extends:u,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Transform,y.Visible,r],initialize:function(a,f,v,c,p,m,T){c===void 0&&(c=16777215),p===void 0&&(p=128),m===void 0&&(m=1),T===void 0&&(T=.1),u.call(this,a,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(f,v),this.color=l(c),this.intensity=m,this.attenuation=T,this.width=p*2,this.height=p*2,this._radius=p},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});C.exports=o}),39829:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(80321);y.register("pointlight",function(h,r){h===void 0&&(h={});var o=u(h,"color",16777215),d=u(h,"radius",128),a=u(h,"intensity",1),f=u(h,"attenuation",.1),v=new l(this.scene,0,0,o,d,a,f);return r!==void 0&&(h.add=r),g(this.scene,v,h),v})}),71255:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(80321);g.register("pointlight",function(u,l,h,r,o,d){return this.displayList.add(new y(this.scene,u,l,h,r,o,d))})}),67277:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(57787),C.exports={renderWebGL:y,renderCanvas:u}}),57787:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=function(u,l,h,r){h.addToRenderList(l);var o=u.pipelines.set(l.pipeline),d=g(l,h,r).calc,a=l.width,f=l.height,v=-l._radius,c=-l._radius,p=v+a,m=c+f,T=d.getX(0,0),E=d.getY(0,0),P=d.getX(v,c),w=d.getY(v,c),A=d.getX(v,m),b=d.getY(v,m),O=d.getX(p,m),I=d.getY(p,m),D=d.getX(p,c),B=d.getY(p,c);u.pipelines.preBatch(l),o.batchPointLight(l,h,P,w,A,b,O,I,D,B,T,E),u.pipelines.postBatch(l)};C.exports=y}),591:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(81320),u=s(88571),l=new g({Extends:u,initialize:function(r,o,d,a,f){o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a=32),f===void 0&&(f=32);var v=new y(r.sys.textures,"",a,f);u.call(this,r,o,d,v),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(h,r){this.width=h,this.height=r,this.texture.setSize(h,r),this.updateDisplayOrigin();var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=h,o.hitArea.height=r),this},resize:function(h,r){return this.setSize(h,r),this},saveTexture:function(h){var r=this.texture;return r.key=h,r.manager.addDynamicTexture(r)&&(this._saved=!0),r},fill:function(h,r,o,d,a,f){return this.texture.fill(h,r,o,d,a,f),this},clear:function(){return this.texture.clear(),this},stamp:function(h,r,o,d,a){return this.texture.stamp(h,r,o,d,a),this},erase:function(h,r,o){return this.texture.erase(h,r,o),this},draw:function(h,r,o,d,a){return this.texture.draw(h,r,o,d,a),this},drawFrame:function(h,r,o,d,a,f){return this.texture.drawFrame(h,r,o,d,a,f),this},repeat:function(h,r,o,d,a,f,v,c,p){return this.texture.repeat(h,r,o,d,a,f,v,c,p),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(h,r,o,d,a){return this.texture.batchDraw(h,r,o,d,a),this},batchDrawFrame:function(h,r,o,d,a,f){return this.texture.batchDrawFrame(h,r,o,d,a,f),this},endDraw:function(h){return this.texture.endDraw(h),this},snapshotArea:function(h,r,o,d,a,f,v){return this.texture.snapshotArea(h,r,o,d,a,f,v),this},snapshot:function(h,r,o){return this.snapshotArea(0,0,this.width,this.height,h,r,o)},snapshotPixel:function(h,r,o){return this.snapshotArea(h,r,1,1,o,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});C.exports=l}),34495:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(591);y.register("renderTexture",function(h,r){h===void 0&&(h={});var o=u(h,"x",0),d=u(h,"y",0),a=u(h,"width",32),f=u(h,"height",32),v=new l(this.scene,o,d,a,f);return r!==void 0&&(h.add=r),g(this.scene,v,h),v})}),60505:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(591);g.register("renderTexture",function(u,l,h,r){return this.displayList.add(new y(this.scene,u,l,h,r))})}),77757:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(9674),y=s(83419),u=s(31401),l=s(95643),h=s(36060),r=s(38745),o=s(26099),d=new y({Extends:l,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Flip,u.Mask,u.Pipeline,u.PostPipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,r],initialize:function(f,v,c,p,m,T,E,P,w){p===void 0&&(p="__DEFAULT"),T===void 0&&(T=2),E===void 0&&(E=!0),l.call(this,f,"Rope"),this.anims=new g(this),this.points=T,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=p==="__DEFAULT",this.dirty=!1,this.horizontal=E,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(p,m),this.setPosition(v,c),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(T)&&this.resizeArrays(T.length),this.setPoints(T,P,w),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,f){var v=this.anims.currentFrame;this.anims.update(a,f),this.anims.currentFrame!==v&&(this.updateUVs(),this.updateVertices())},play:function(a,f,v){return this.anims.play(a,f,v),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(a,f,v){return a===void 0&&(a=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(a,f,v))},setVertical:function(a,f,v){return a===void 0&&(a=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(a,f,v)):this},setTintFill:function(a){return a===void 0&&(a=!1),this.tintFill=a,this},setAlphas:function(a,f){var v=this.points.length;if(v<1)return this;var c=this.alphas;a===void 0?a=[1]:!Array.isArray(a)&&f===void 0&&(a=[a]);var p,m=0;if(f!==void 0)for(p=0;p<v;p++)m=p*2,c[m]=a,c[m+1]=f;else if(a.length===v)for(p=0;p<v;p++)m=p*2,c[m]=a[p],c[m+1]=a[p];else{var T=a[0];for(p=0;p<v;p++)m=p*2,a.length>m&&(T=a[m]),c[m]=T,a.length>m+1&&(T=a[m+1]),c[m+1]=T}return this},setColors:function(a){var f=this.points.length;if(f<1)return this;var v=this.colors;a===void 0?a=[16777215]:Array.isArray(a)||(a=[a]);var c,p=0;if(a.length===f)for(c=0;c<f;c++)p=c*2,v[p]=a[c],v[p+1]=a[c];else{var m=a[0];for(c=0;c<f;c++)p=c*2,a.length>p&&(m=a[p]),v[p]=m,a.length>p+1&&(m=a[p+1]),v[p+1]=m}return this},setPoints:function(a,f,v){if(a===void 0&&(a=2),typeof a=="number"){var c=a;c<2&&(c=2),a=[];var p,m,T;if(this.horizontal)for(T=-this.frame.halfWidth,m=this.frame.width/(c-1),p=0;p<c;p++)a.push({x:T+p*m,y:0});else for(T=-this.frame.halfHeight,m=this.frame.height/(c-1),p=0;p<c;p++)a.push({x:0,y:T+p*m})}var E=a.length,P=this.points.length;return E<1?(console.warn("Rope: Not enough points given"),this):(E===1&&(a.unshift({x:0,y:0}),E++),P!==E&&this.resizeArrays(E),this.dirty=!0,this.points=a,this.updateUVs(),f!=null&&this.setColors(f),v!=null&&this.setAlphas(v),this)},updateUVs:function(){for(var a=this.uv,f=this.points.length,v=this.frame.u0,c=this.frame.v0,p=this.frame.u1,m=this.frame.v1,T=(p-v)/(f-1),E=(m-c)/(f-1),P=0;P<f;P++){var w=P*4,A,b,O,I;this.horizontal?(this._flipX?(A=p-P*T,O=p-P*T):(A=v+P*T,O=v+P*T),this._flipY?(b=m,I=c):(b=c,I=m)):(this._flipX?(A=v,O=p):(A=p,O=v),this._flipY?(b=m-P*E,I=m-P*E):(b=c+P*E,I=c+P*E)),a[w+0]=A,a[w+1]=b,a[w+2]=O,a[w+3]=I}return this},resizeArrays:function(a){var f=this.colors,v=this.alphas;this.vertices=new Float32Array(a*4),this.uv=new Float32Array(a*4),f=new Uint32Array(a*2),v=new Float32Array(a*2);for(var c=0;c<a*2;c++)f[c]=16777215,v[c]=1;return this.colors=f,this.alphas=v,this.dirty=!0,this},updateVertices:function(){var a=this._perp,f=this.points,v=this.vertices,c=f.length;if(this.dirty=!1,!(c<1)){for(var p,m=f[0],T=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,E=0;E<c;E++){var P=f[E],w=E*4;E<c-1?p=f[E+1]:p=P,a.x=p.y-m.y,a.y=-(p.x-m.x);var A=a.length();a.x/=A,a.y/=A,a.x*=T,a.y*=T,v[w]=P.x+a.x,v[w+1]=P.y+a.y,v[w+2]=P.x-a.x,v[w+3]=P.y-a.y,m=P}return this}},setDebug:function(a,f){return this.debugGraphic=a,!a&&!f?this.debugCallback=null:f?this.debugCallback=f:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(a,f,v){var c=a.debugGraphic,p=v[0],m=v[1],T=v[2],E=v[3];c.lineBetween(p,m,T,E);for(var P=4;P<f;P+=4){var w=v[P+0],A=v[P+1],b=v[P+2],O=v[P+3];c.lineBetween(p,m,w,A),c.lineBetween(T,E,b,O),c.lineBetween(T,E,w,A),c.lineBetween(w,A,b,O),p=w,m=A,T=b,E=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(a){return this._flipX=a,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(a){return this._flipY=a,this.updateUVs()}}});C.exports=d}),95262:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(){};C.exports=R}),26209:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(35154),h=s(77757);y.register("rope",function(r,o){r===void 0&&(r={});var d=u(r,"key",null),a=u(r,"frame",null),f=u(r,"horizontal",!0),v=l(r,"points",void 0),c=l(r,"colors",void 0),p=l(r,"alphas",void 0),m=new h(this.scene,0,0,d,a,v,f,c,p);return o!==void 0&&(r.add=o),g(this.scene,m,r),m})}),96819:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(77757),y=s(39429);y.register("rope",function(u,l,h,r,o,d,a,f){return this.displayList.add(new g(this.scene,u,l,h,r,o,d,a,f))})}),38745:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(20439),u=s(95262),C.exports={renderWebGL:y,renderCanvas:u}}),20439:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(70554),u=function(l,h,r,o){r.addToRenderList(h);var d=l.pipelines.set(h.pipeline,h),a=g(h,r,o).calc,f=h.vertices,v=h.uv,c=h.colors,p=h.alphas,m=h.alpha,T=y.getTintAppendFloatAlpha,E=r.roundPixels,P=f.length,w=Math.floor(P*.5);d.flush(),l.pipelines.preBatch(h);var A=d.setGameObject(h),b=d.vertexViewF32,O=d.vertexViewU32,I=d.vertexCount*d.currentShader.vertexComponentCount-1,D=0,B=h.tintFill;h.dirty&&h.updateVertices();for(var k=h.debugCallback,N=[],H=0;H<P;H+=2){var $=f[H+0],J=f[H+1],q=$*a.a+J*a.c+a.e,Y=$*a.b+J*a.d+a.f;E&&(q=Math.round(q),Y=Math.round(Y)),b[++I]=q,b[++I]=Y,b[++I]=v[H+0],b[++I]=v[H+1],b[++I]=A,b[++I]=B,O[++I]=T(c[D],r.alpha*(p[D]*m)),D++,k&&(N[H+0]=q,N[H+1]=Y)}k&&k.call(h,h,P,N),d.vertexCount+=w,d.currentBatch.count=d.vertexCount-d.currentBatch.start,l.pipelines.postBatch(h)};C.exports=u}),20071:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(95643),l=s(95540),h=s(79291),r=s(61622),o=s(25479),d=s(61340),a=s(95428),f=s(92503),v=new g({Extends:u,Mixins:[y.ComputedSize,y.Depth,y.GetBounds,y.Mask,y.Origin,y.ScrollFactor,y.Transform,y.Visible,o],initialize:function(p,m,T,E,P,w,A,b){T===void 0&&(T=0),E===void 0&&(E=0),P===void 0&&(P=128),w===void 0&&(w=128),u.call(this,p,"Shader"),this.blendMode=-1,this.shader;var O=p.sys.renderer;this.renderer=O,this.gl=O.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=O.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=O.width,this._rendererHeight=O.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(T,E),this.setSize(P,w),this.setOrigin(.5,.5),this.setShader(m,A,b),this.renderer.on(f.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(c){return this.renderToTexture?!0:!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setRenderToTexture:function(c,p){if(!this.renderToTexture){var m=this.width,T=this.height,E=this.renderer;this.glTexture=E.createTextureFromSource(null,m,T,0),this.framebuffer=E.createFramebuffer(m,T,this.glTexture,!1),this._rendererWidth=m,this._rendererHeight=T,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),c&&(this.texture=this.scene.sys.textures.addGLTexture(c,this.glTexture))}return this.shader&&(E.pipelines.clear(),this.load(),this.flush(),E.pipelines.rebind()),this},setShader:function(c,p,m){if(this.renderer.contextLost)return this._deferSetShader={key:c,textures:p,textureData:m},this;if(p===void 0&&(p=[]),typeof c=="string"){var T=this.scene.sys.cache.shader;if(!T.has(c))return console.warn("Shader missing: "+c),this;this.shader=T.get(c)}else this.shader=c;var E=this.gl,P=this.renderer;this.program&&P.deleteProgram(this.program);var w=P.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);E.uniformMatrix4fv(E.getUniformLocation(w.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),E.uniformMatrix4fv(E.getUniformLocation(w.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),E.uniform2f(E.getUniformLocation(w.webGLProgram,"uResolution"),this.width,this.height),this.program=w;var A=new Date,b={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[A.getFullYear(),A.getMonth(),A.getDate(),A.getHours()*60*60+A.getMinutes()*60+A.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,b):this.uniforms=b;for(var O=0;O<4;O++)p[O]&&this.setSampler2D("iChannel"+O,p[O],O,m);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(c){return this.pointer=c,this},projOrtho:function(c,p,m,T){if(this.renderer.contextLost){this._deferProjOrtho={left:c,right:p,bottom:m,top:T};return}var E=-1e3,P=1e3,w=1/(c-p),A=1/(m-T),b=1/(E-P),O=this.projectionMatrix;O[0]=-2*w,O[5]=-2*A,O[10]=2*b,O[12]=(c+p)*w,O[13]=(T+m)*A,O[14]=(P+E)*b;var I=this.program,D=this.gl,B=this.renderer;B.setProgram(I),D.uniformMatrix4fv(D.getUniformLocation(I.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=m},initUniforms:function(){var c=this.renderer.glFuncMap,p=this.program;this._textureCount=0;for(var m in this.uniforms){var T=this.uniforms[m],E=T.type,P=c[E];T.uniformLocation=this.renderer.createUniformLocation(p,m),E!=="sampler2D"&&(T.glMatrix=P.matrix,T.glValueLength=P.length,T.glFunc=P.func)}},setSampler2DBuffer:function(c,p,m,T,E,P){E===void 0&&(E=0),P===void 0&&(P={});var w=this.uniforms[c];return w.value=p,P.width=m,P.height=T,w.textureData=P,this._textureCount=E,this.initSampler2D(w),this},setSampler2D:function(c,p,m,T){m===void 0&&(m=0);var E=this.scene.sys.textures;if(E.exists(p)){var P=E.getFrame(p);if(P.glTexture&&P.glTexture.isRenderTexture)return this.setSampler2DBuffer(c,P.glTexture,P.width,P.height,m,T);var w=this.uniforms[c],A=P.source;w.textureKey=p,w.source=A.image,w.value=P.glTexture,A.isGLTexture&&(T||(T={}),T.width=A.width,T.height=A.height),T&&(w.textureData=T),this._textureCount=m,this.initSampler2D(w)}return this},setUniform:function(c,p){return r(this.uniforms,c,p),this},getUniform:function(c){return l(this.uniforms,c,null)},setChannel0:function(c,p){return this.setSampler2D("iChannel0",c,0,p)},setChannel1:function(c,p){return this.setSampler2D("iChannel1",c,1,p)},setChannel2:function(c,p){return this.setSampler2D("iChannel2",c,2,p)},setChannel3:function(c,p){return this.setSampler2D("iChannel3",c,3,p)},initSampler2D:function(c){if(c.value){var p=c.textureData;if(p&&!c.value.isRenderTexture){var m=this.gl,T=c.value,E=m[l(p,"magFilter","linear").toUpperCase()],P=m[l(p,"minFilter","linear").toUpperCase()],w=m[l(p,"wrapS","repeat").toUpperCase()],A=m[l(p,"wrapT","repeat").toUpperCase()],b=m[l(p,"format","rgba").toUpperCase()],O=l(p,"flipY",!1),I=l(p,"width",T.width),D=l(p,"height",T.height),B=l(p,"source",T.pixels);p.repeat&&(w=m.REPEAT,A=m.REPEAT),p.width&&(B=null),T.update(B,I,D,O,w,A,P,E,b)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var c=this.gl,p=this.uniforms,m,T,E,P,w,A=0;for(var b in p)m=p[b],E=m.glFunc,T=m.glValueLength,P=m.uniformLocation,w=m.value,w!==null&&(T===1?m.glMatrix?E.call(c,P.webGLUniformLocation,m.transpose,w):E.call(c,P.webGLUniformLocation,w):T===2?E.call(c,P.webGLUniformLocation,w.x,w.y):T===3?E.call(c,P.webGLUniformLocation,w.x,w.y,w.z):T===4?E.call(c,P.webGLUniformLocation,w.x,w.y,w.z,w.w):m.type==="sampler2D"&&(c.activeTexture(c.TEXTURE0+A),c.bindTexture(c.TEXTURE_2D,w.webGLTexture),c.uniform1i(P.webGLUniformLocation,A),A++))},load:function(c){var p=this.gl,m=this.width,T=this.height,E=this.renderer,P=this.program,w=this.viewMatrix;if(!this.renderToTexture){var A=-this._displayOriginX,b=-this._displayOriginY;w[0]=c[0],w[1]=c[1],w[4]=c[2],w[5]=c[3],w[8]=c[4],w[9]=c[5],w[12]=w[0]*A+w[4]*b,w[13]=w[1]*A+w[5]*b}p.useProgram(P.webGLProgram),p.uniformMatrix4fv(p.getUniformLocation(P.webGLProgram,"uViewMatrix"),!1,w),p.uniformMatrix4fv(p.getUniformLocation(P.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),p.uniform2f(p.getUniformLocation(P.webGLProgram,"uResolution"),this.width,this.height);var O=this.uniforms,I=O.resolution;I.value.x=m,I.value.y=T,O.time.value=E.game.loop.getDuration();var D=this.pointer;if(D){var B=O.mouse,k=D.x/m,N=1-D.y/T;B.value.x=k.toFixed(2),B.value.y=N.toFixed(2)}this.syncUniforms()},flush:function(){var c=this.width,p=this.height,m=this.program,T=this.gl,E=this.vertexBuffer,P=this.renderer,w=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(P.setFramebuffer(this.framebuffer),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT)),T.bindBuffer(T.ARRAY_BUFFER,E.webGLBuffer);var A=T.getAttribLocation(m.webGLProgram,"inPosition");A!==-1&&(T.enableVertexAttribArray(A),T.vertexAttribPointer(A,2,T.FLOAT,!1,w,0));var b=this.vertexViewF32;b[3]=p,b[4]=c,b[5]=p,b[8]=c,b[9]=p,b[10]=c;var O=6;T.bufferSubData(T.ARRAY_BUFFER,0,this.bytes.subarray(0,O*w)),T.drawArrays(T.TRIANGLES,0,O),this.renderToTexture&&P.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var c=this._deferSetShader.key,p=this._deferSetShader.textures,m=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(c,p,m)}if(this._deferProjOrtho!==null){var T=this._deferProjOrtho.left,E=this._deferProjOrtho.right,P=this._deferProjOrtho.bottom,w=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(T,E,P,w)}},preDestroy:function(){var c=this.renderer;c.off(f.RESTORE_WEBGL,this.onContextRestored,this),c.deleteProgram(this.program),c.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(c.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),a(this.uniforms,function(p){c.deleteUniformLocation(p.uniformLocation),p.uniformLocation=null})}});C.exports=v}),80464:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(){};C.exports=R}),54935:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(20071);y.register("shader",function(h,r){h===void 0&&(h={});var o=u(h,"key",null),d=u(h,"x",0),a=u(h,"y",0),f=u(h,"width",128),v=u(h,"height",128),c=new l(this.scene,o,d,a,f,v);return r!==void 0&&(h.add=r),g(this.scene,c,h),c})}),74177:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20071),y=s(39429);y.register("shader",function(u,l,h,r,o,d,a){return this.displayList.add(new g(this.scene,u,l,h,r,o,d,a))})}),25479:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(19257),u=s(80464),C.exports={renderWebGL:y,renderCanvas:u}}),19257:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=function(u,l,h,r){if(l.shader){if(h.addToRenderList(l),u.pipelines.clear(),l.renderToTexture)l.load(),l.flush();else{var o=g(l,h,r).calc;(u.width!==l._rendererWidth||u.height!==l._rendererHeight)&&l.projOrtho(0,u.width,u.height,0),l.load(o.matrix),l.flush()}u.pipelines.rebind()}};C.exports=y}),10441:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70554),y=function(u,l,h,r,o,d){for(var a=g.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*r),f=h.pathData,v=h.pathIndexes,c=0;c<v.length;c+=3){var p=v[c]*2,m=v[c+1]*2,T=v[c+2]*2,E=f[p+0]-o,P=f[p+1]-d,w=f[m+0]-o,A=f[m+1]-d,b=f[T+0]-o,O=f[T+1]-d,I=l.getX(E,P),D=l.getY(E,P),B=l.getX(w,A),k=l.getY(w,A),N=l.getX(b,O),H=l.getY(b,O);u.batchTri(h,I,D,B,k,N,H,0,0,1,1,a,a,a,2)}};C.exports=y}),65960:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=y||g.fillColor,h=u||g.fillAlpha,r=(l&16711680)>>>16,o=(l&65280)>>>8,d=l&255;s.fillStyle="rgba("+r+","+o+","+d+","+h+")"};C.exports=R}),75177:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=y||g.strokeColor,h=u||g.strokeAlpha,r=(l&16711680)>>>16,o=(l&65280)>>>8,d=l&255;s.strokeStyle="rgba("+r+","+o+","+d+","+h+")",s.lineWidth=g.lineWidth};C.exports=R}),17803:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(95643),l=s(23031),h=new g({Extends:u,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Transform,y.Visible],initialize:function(o,d,a){d===void 0&&(d="Shape"),u.call(this,o,d),this.geom=a,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new l,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(r,o){return o===void 0&&(o=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=o,this.isFilled=!0),this},setStrokeStyle:function(r,o,d){return d===void 0&&(d=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=o,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,o){return this.width=r,this.height=o,this},setDisplaySize:function(r,o){return this.displayWidth=r,this.displayHeight=o,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});C.exports=h}),34682:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70554),y=function(u,l,h,r,o){var d=u.strokeTint,a=g.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*h);d.TL=a,d.TR=a,d.BL=a,d.BR=a;var f=l.pathData,v=f.length-1,c=l.lineWidth,p=c/2,m=f[0]-r,T=f[1]-o;l.closePath||(v-=2);for(var E=2;E<v;E+=2){var P=f[E]-r,w=f[E+1]-o;u.batchLine(m,T,P,w,p,p,c,E-2,l.closePath?E===v-1:!1),m=P,T=w}};C.exports=y}),23629:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(13609),y=s(83419),u=s(39506),l=s(94811),h=s(96503),r=s(36383),o=s(17803),d=new y({Extends:o,Mixins:[g],initialize:function(f,v,c,p,m,T,E,P,w){v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=128),m===void 0&&(m=0),T===void 0&&(T=360),E===void 0&&(E=!1),o.call(this,f,"Arc",new h(0,0,p)),this._startAngle=m,this._endAngle=T,this._anticlockwise=E,this._iterations=.01,this.setPosition(v,c);var A=this.geom.radius*2;this.setSize(A,A),P!==void 0&&this.setFillStyle(P,w),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(a){this._iterations=a,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(a){this.geom.radius=a;var f=a*2;this.setSize(f,f),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(a){this._startAngle=a,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(a){this._endAngle=a,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(a){this._anticlockwise=a,this.updateData()}},setRadius:function(a){return this.radius=a,this},setIterations:function(a){return a===void 0&&(a=.01),this.iterations=a,this},setStartAngle:function(a,f){return this._startAngle=a,f!==void 0&&(this._anticlockwise=f),this.updateData()},setEndAngle:function(a,f){return this._endAngle=a,f!==void 0&&(this._anticlockwise=f),this.updateData()},updateData:function(){var a=this._iterations,f=a,v=this.geom.radius,c=u(this._startAngle),p=u(this._endAngle),m=this._anticlockwise,T=v,E=v;p-=c,m?p<-r.PI2?p=-r.PI2:p>0&&(p=-r.PI2+p%r.PI2):p>r.PI2?p=r.PI2:p<0&&(p=r.PI2+p%r.PI2);for(var P=[T+Math.cos(c)*v,E+Math.sin(c)*v],w;f<1;)w=p*f+c,P.push(T+Math.cos(w)*v,E+Math.sin(w)*v),f+=a;return w=p+c,P.push(T+Math.cos(w)*v,E+Math.sin(w)*v),P.push(T+Math.cos(c)*v,E+Math.sin(c)*v),this.pathIndexes=l(P),this.pathData=P,this}});C.exports=d}),42542:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39506),y=s(65960),u=s(75177),l=s(20926),h=function(r,o,d,a){d.addToRenderList(o);var f=r.currentContext;if(l(r,f,o,d,a)){var v=o.radius;f.beginPath(),f.arc(v-o.originX*(v*2),v-o.originY*(v*2),v,g(o._startAngle),g(o._endAngle),o.anticlockwise),o.closePath&&f.closePath(),o.isFilled&&(y(f,o),f.fill()),o.isStroked&&(u(f,o),f.stroke()),f.restore()}};C.exports=h}),42563:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(23629),y=s(39429);y.register("arc",function(u,l,h,r,o,d,a,f){return this.displayList.add(new g(this.scene,u,l,h,r,o,d,a,f))}),y.register("circle",function(u,l,h,r,o){return this.displayList.add(new g(this.scene,u,l,h,0,360,!1,r,o))})}),13609:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(41447),u=s(42542),C.exports={renderWebGL:y,renderCanvas:u}}),41447:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(10441),u=s(34682),l=function(h,r,o,d){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),f=g(r,o,d),v=a.calcMatrix.copyFrom(f.calc),c=r._displayOriginX,p=r._displayOriginY,m=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&y(a,v,r,m,c,p),r.isStroked&&u(a,r,m,c,p),h.pipelines.postBatch(r)};C.exports=l}),89:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(33141),u=s(94811),l=s(87841),h=s(17803),r=new g({Extends:h,Mixins:[y],initialize:function(d,a,f,v,c,p){a===void 0&&(a=0),f===void 0&&(f=0),h.call(this,d,"Curve",v),this._smoothness=32,this._curveBounds=new l,this.closePath=!1,this.setPosition(a,f),c!==void 0&&this.setFillStyle(c,p),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){var o=this._curveBounds,d=this._smoothness;this.geom.getBounds(o,d),this.setSize(o.width,o.height),this.updateDisplayOrigin();for(var a=[],f=this.geom.getPoints(d),v=0;v<f.length;v++)a.push(f[v].x,f[v].y);return a.push(f[0].x,f[0].y),this.pathIndexes=u(a),this.pathData=a,this}});C.exports=r}),3170:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(75177),u=s(20926),l=function(h,r,o,d){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,d)){var f=r._displayOriginX+r._curveBounds.x,v=r._displayOriginY+r._curveBounds.y,c=r.pathData,p=c.length-1,m=c[0]-f,T=c[1]-v;a.beginPath(),a.moveTo(m,T),r.closePath||(p-=2);for(var E=2;E<p;E+=2){var P=c[E]-f,w=c[E+1]-v;a.lineTo(P,w)}r.closePath&&a.closePath(),r.isFilled&&(g(a,r),a.fill()),r.isStroked&&(y(a,r),a.stroke()),a.restore()}};C.exports=l}),40511:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(89);g.register("curve",function(u,l,h,r,o){return this.displayList.add(new y(this.scene,u,l,h,r,o))})}),33141:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(53987),u=s(3170),C.exports={renderWebGL:y,renderCanvas:u}}),53987:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10441),y=s(91296),u=s(34682),l=function(h,r,o,d){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),f=y(r,o,d),v=a.calcMatrix.copyFrom(f.calc),c=r._displayOriginX+r._curveBounds.x,p=r._displayOriginY+r._curveBounds.y,m=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&g(a,v,r,m,c,p),r.isStroked&&u(a,r,m,c,p),h.pipelines.postBatch(r)};C.exports=l}),19921:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(94811),u=s(54205),l=s(8497),h=s(17803),r=new g({Extends:h,Mixins:[u],initialize:function(d,a,f,v,c,p,m){a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=128),c===void 0&&(c=128),h.call(this,d,"Ellipse",new l(v/2,c/2,v,c)),this._smoothness=64,this.setPosition(a,f),this.width=v,this.height=c,p!==void 0&&this.setFillStyle(p,m),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSize:function(o,d){return this.width=o,this.height=d,this.geom.setPosition(o/2,d/2),this.geom.setSize(o,d),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){for(var o=[],d=this.geom.getPoints(this._smoothness),a=0;a<d.length;a++)o.push(d[a].x,d[a].y);return o.push(d[0].x,d[0].y),this.pathIndexes=y(o),this.pathData=o,this}});C.exports=r}),7930:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(75177),u=s(20926),l=function(h,r,o,d){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,d)){var f=r._displayOriginX,v=r._displayOriginY,c=r.pathData,p=c.length-1,m=c[0]-f,T=c[1]-v;a.beginPath(),a.moveTo(m,T),r.closePath||(p-=2);for(var E=2;E<p;E+=2){var P=c[E]-f,w=c[E+1]-v;a.lineTo(P,w)}a.closePath(),r.isFilled&&(g(a,r),a.fill()),r.isStroked&&(y(a,r),a.stroke()),a.restore()}};C.exports=l}),1543:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(19921),y=s(39429);y.register("ellipse",function(u,l,h,r,o,d){return this.displayList.add(new g(this.scene,u,l,h,r,o,d))})}),54205:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(19467),u=s(7930),C.exports={renderWebGL:y,renderCanvas:u}}),19467:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10441),y=s(91296),u=s(34682),l=function(h,r,o,d){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),f=y(r,o,d),v=a.calcMatrix.copyFrom(f.calc),c=r._displayOriginX,p=r._displayOriginY,m=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&g(a,v,r,m,c,p),r.isStroked&&u(a,r,m,c,p),h.pipelines.postBatch(r)};C.exports=l}),30479:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(17803),u=s(26015),l=new g({Extends:y,Mixins:[u],initialize:function(r,o,d,a,f,v,c,p,m,T,E){o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a=128),f===void 0&&(f=128),v===void 0&&(v=32),c===void 0&&(c=32),y.call(this,r,"Grid",null),this.cellWidth=v,this.cellHeight=c,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(o,d),this.setSize(a,f),this.setFillStyle(p,m),T!==void 0&&this.setOutlineStyle(T,E),this.updateDisplayOrigin()},setFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=r,this.showOutline=!0),this}});C.exports=l}),49912:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(75177),u=s(20926),l=function(h,r,o,d){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,d)){var f=-r._displayOriginX,v=-r._displayOriginY,c=o.alpha*r.alpha,p=r.width,m=r.height,T=r.cellWidth,E=r.cellHeight,P=Math.ceil(p/T),w=Math.ceil(m/E),A=T,b=E,O=T-(P*T-p),I=E-(w*E-m),D=r.showCells,B=r.showAltCells,k=r.showOutline,N=0,H=0,$=0,J=0,q=0;if(k&&(A--,b--,O===T&&O--,I===E&&I--),D&&r.fillAlpha>0)for(g(a,r),H=0;H<w;H++)for(B&&($=H%2),N=0;N<P;N++){if(B&&$){$=0;continue}$++,J=N<P-1?A:O,q=H<w-1?b:I,a.fillRect(f+N*T,v+H*E,J,q)}if(B&&r.altFillAlpha>0)for(g(a,r,r.altFillColor,r.altFillAlpha*c),H=0;H<w;H++)for(B&&($=H%2),N=0;N<P;N++){if(B&&!$){$=1;continue}$=0,J=N<P-1?A:O,q=H<w-1?b:I,a.fillRect(f+N*T,v+H*E,J,q)}if(k&&r.outlineFillAlpha>0){for(y(a,r,r.outlineFillColor,r.outlineFillAlpha*c),N=1;N<P;N++){var Y=N*T;a.beginPath(),a.moveTo(Y+f,v),a.lineTo(Y+f,m+v),a.stroke()}for(H=1;H<w;H++){var K=H*E;a.beginPath(),a.moveTo(f,K+v),a.lineTo(f+p,K+v),a.stroke()}}a.restore()}};C.exports=l}),34137:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(30479);g.register("grid",function(u,l,h,r,o,d,a,f,v,c){return this.displayList.add(new y(this.scene,u,l,h,r,o,d,a,f,v,c))})}),26015:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(46161),u=s(49912),C.exports={renderWebGL:y,renderCanvas:u}}),46161:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(70554),u=function(l,h,r,o){r.addToRenderList(h);var d=l.pipelines.set(h.pipeline),a=g(h,r,o),f=d.calcMatrix.copyFrom(a.calc);f.translate(-h._displayOriginX,-h._displayOriginY);var v=r.alpha*h.alpha,c=h.width,p=h.height,m=h.cellWidth,T=h.cellHeight,E=Math.ceil(c/m),P=Math.ceil(p/T),w=m,A=T,b=m-(E*m-c),O=T-(P*T-p),I,D,B=h.showCells,k=h.showAltCells,N=h.showOutline,H=0,$=0,J=0,q=0,Y=0;if(N&&(w--,A--,b===m&&b--,O===T&&O--),l.pipelines.preBatch(h),B&&h.fillAlpha>0)for(I=d.fillTint,D=y.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*v),I.TL=D,I.TR=D,I.BL=D,I.BR=D,$=0;$<P;$++)for(k&&(J=$%2),H=0;H<E;H++){if(k&&J){J=0;continue}J++,q=H<E-1?w:b,Y=$<P-1?A:O,d.batchFillRect(H*m,$*T,q,Y)}if(k&&h.altFillAlpha>0)for(I=d.fillTint,D=y.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*v),I.TL=D,I.TR=D,I.BL=D,I.BR=D,$=0;$<P;$++)for(k&&(J=$%2),H=0;H<E;H++){if(k&&!J){J=1;continue}J=0,q=H<E-1?w:b,Y=$<P-1?A:O,d.batchFillRect(H*m,$*T,q,Y)}if(N&&h.outlineFillAlpha>0){var K=d.strokeTint,V=y.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*v);for(K.TL=V,K.TR=V,K.BL=V,K.BR=V,H=1;H<E;H++){var U=H*m;d.batchLine(U,0,U,p,1,1,1,0,!1)}for($=1;$<P;$++){var Z=$*T;d.batchLine(0,Z,c,Z,1,1,1,0,!1)}}l.pipelines.postBatch(h)};C.exports=u}),61475:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(99651),y=s(83419),u=s(17803),l=new y({Extends:u,Mixins:[g],initialize:function(r,o,d,a,f,v,c,p){o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a=48),f===void 0&&(f=32),v===void 0&&(v=15658734),c===void 0&&(c=10066329),p===void 0&&(p=13421772),u.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=v,this.fillLeft=c,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(o,d),this.setSize(a,f),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,r,o){return h===void 0&&(h=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),this.showTop=h,this.showLeft=r,this.showRight=o,this},setFillStyle:function(h,r,o){return this.fillTop=h,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});C.exports=l}),11508:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(20926),u=function(l,h,r,o){r.addToRenderList(h);var d=l.currentContext;if(y(l,d,h,r,o)&&h.isFilled){var a=h.width,f=h.height,v=a/2,c=a/h.projection;h.showTop&&(g(d,h,h.fillTop),d.beginPath(),d.moveTo(-v,-f),d.lineTo(0,-c-f),d.lineTo(v,-f),d.lineTo(v,-1),d.lineTo(0,c-1),d.lineTo(-v,-1),d.lineTo(-v,-f),d.fill()),h.showLeft&&(g(d,h,h.fillLeft),d.beginPath(),d.moveTo(-v,0),d.lineTo(0,c),d.lineTo(0,c-f),d.lineTo(-v,-f),d.lineTo(-v,0),d.fill()),h.showRight&&(g(d,h,h.fillRight),d.beginPath(),d.moveTo(v,0),d.lineTo(0,c),d.lineTo(0,c-f),d.lineTo(v,-f),d.lineTo(v,0),d.fill()),d.restore()}};C.exports=u}),3933:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(61475);g.register("isobox",function(u,l,h,r,o,d,a){return this.displayList.add(new y(this.scene,u,l,h,r,o,d,a))})}),99651:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(68149),u=s(11508),C.exports={renderWebGL:y,renderCanvas:u}}),68149:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(70554),u=function(l,h,r,o){r.addToRenderList(h);var d=l.pipelines.set(h.pipeline),a=g(h,r,o),f=d.calcMatrix.copyFrom(a.calc),v=h.width,c=h.height,p=v/2,m=v/h.projection,T=r.alpha*h.alpha;if(h.isFilled){var E,P,w,A,b,O,I,D,B;l.pipelines.preBatch(h),h.showTop&&(E=y.getTintAppendFloatAlpha(h.fillTop,T),P=f.getX(-p,-c),w=f.getY(-p,-c),A=f.getX(0,-m-c),b=f.getY(0,-m-c),O=f.getX(p,-c),I=f.getY(p,-c),D=f.getX(0,m-c),B=f.getY(0,m-c),d.batchQuad(h,P,w,A,b,O,I,D,B,0,0,1,1,E,E,E,E,2)),h.showLeft&&(E=y.getTintAppendFloatAlpha(h.fillLeft,T),P=f.getX(-p,0),w=f.getY(-p,0),A=f.getX(0,m),b=f.getY(0,m),O=f.getX(0,m-c),I=f.getY(0,m-c),D=f.getX(-p,-c),B=f.getY(-p,-c),d.batchQuad(h,P,w,A,b,O,I,D,B,0,0,1,1,E,E,E,E,2)),h.showRight&&(E=y.getTintAppendFloatAlpha(h.fillRight,T),P=f.getX(p,0),w=f.getY(p,0),A=f.getX(0,m),b=f.getY(0,m),O=f.getX(0,m-c),I=f.getY(0,m-c),D=f.getX(p,-c),B=f.getY(p,-c),d.batchQuad(h,P,w,A,b,O,I,D,B,0,0,1,1,E,E,E,E,2)),l.pipelines.postBatch(h)}};C.exports=u}),16933:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(60561),u=s(17803),l=new g({Extends:u,Mixins:[y],initialize:function(r,o,d,a,f,v,c,p,m){o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a=48),f===void 0&&(f=32),v===void 0&&(v=!1),c===void 0&&(c=15658734),p===void 0&&(p=10066329),m===void 0&&(m=13421772),u.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=c,this.fillLeft=p,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=v,this.isFilled=!0,this.setPosition(o,d),this.setSize(a,f),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,r,o){return h===void 0&&(h=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),this.showTop=h,this.showLeft=r,this.showRight=o,this},setFillStyle:function(h,r,o){return this.fillTop=h,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});C.exports=l}),79590:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(20926),u=function(l,h,r,o){r.addToRenderList(h);var d=l.currentContext;if(y(l,d,h,r,o)&&h.isFilled){var a=h.width,f=h.height,v=a/2,c=a/h.projection,p=h.isReversed;h.showTop&&p&&(g(d,h,h.fillTop),d.beginPath(),d.moveTo(-v,-f),d.lineTo(0,-c-f),d.lineTo(v,-f),d.lineTo(0,c-f),d.fill()),h.showLeft&&(g(d,h,h.fillLeft),d.beginPath(),p?(d.moveTo(-v,-f),d.lineTo(0,c),d.lineTo(0,c-f)):(d.moveTo(-v,0),d.lineTo(0,c),d.lineTo(0,c-f)),d.fill()),h.showRight&&(g(d,h,h.fillRight),d.beginPath(),p?(d.moveTo(v,-f),d.lineTo(0,c),d.lineTo(0,c-f)):(d.moveTo(v,0),d.lineTo(0,c),d.lineTo(0,c-f)),d.fill()),d.restore()}};C.exports=u}),49803:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(16933);g.register("isotriangle",function(u,l,h,r,o,d,a,f){return this.displayList.add(new y(this.scene,u,l,h,r,o,d,a,f))})}),60561:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(51503),u=s(79590),C.exports={renderWebGL:y,renderCanvas:u}}),51503:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(70554),u=function(l,h,r,o){r.addToRenderList(h);var d=l.pipelines.set(h.pipeline),a=g(h,r,o),f=d.calcMatrix.copyFrom(a.calc),v=h.width,c=h.height,p=v/2,m=v/h.projection,T=h.isReversed,E=r.alpha*h.alpha;if(h.isFilled){l.pipelines.preBatch(h);var P,w,A,b,O,I,D;if(h.showTop&&T){P=y.getTintAppendFloatAlpha(h.fillTop,E),w=f.getX(-p,-c),A=f.getY(-p,-c),b=f.getX(0,-m-c),O=f.getY(0,-m-c),I=f.getX(p,-c),D=f.getY(p,-c);var B=f.getX(0,m-c),k=f.getY(0,m-c);d.batchQuad(h,w,A,b,O,I,D,B,k,0,0,1,1,P,P,P,P,2)}h.showLeft&&(P=y.getTintAppendFloatAlpha(h.fillLeft,E),T?(w=f.getX(-p,-c),A=f.getY(-p,-c),b=f.getX(0,m),O=f.getY(0,m),I=f.getX(0,m-c),D=f.getY(0,m-c)):(w=f.getX(-p,0),A=f.getY(-p,0),b=f.getX(0,m),O=f.getY(0,m),I=f.getX(0,m-c),D=f.getY(0,m-c)),d.batchTri(h,w,A,b,O,I,D,0,0,1,1,P,P,P,2)),h.showRight&&(P=y.getTintAppendFloatAlpha(h.fillRight,E),T?(w=f.getX(p,-c),A=f.getY(p,-c),b=f.getX(0,m),O=f.getY(0,m),I=f.getX(0,m-c),D=f.getY(0,m-c)):(w=f.getX(p,0),A=f.getY(p,0),b=f.getX(0,m),O=f.getY(0,m),I=f.getX(0,m-c),D=f.getY(0,m-c)),d.batchTri(h,w,A,b,O,I,D,0,0,1,1,P,P,P,2)),l.pipelines.postBatch(h)}};C.exports=u}),57847:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(17803),u=s(23031),l=s(36823),h=new g({Extends:y,Mixins:[l],initialize:function(o,d,a,f,v,c,p,m,T){d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=128),p===void 0&&(p=0),y.call(this,o,"Line",new u(f,v,c,p));var E=Math.max(1,this.geom.right-this.geom.left),P=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,a),this.setSize(E,P),m!==void 0&&this.setStrokeStyle(1,m,T),this.updateDisplayOrigin()},setLineWidth:function(r,o){return o===void 0&&(o=r),this._startWidth=r,this._endWidth=o,this.lineWidth=r,this},setTo:function(r,o,d,a){return this.geom.setTo(r,o,d,a),this}});C.exports=h}),17440:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(75177),y=s(20926),u=function(l,h,r,o){r.addToRenderList(h);var d=l.currentContext;if(y(l,d,h,r,o)){var a=h._displayOriginX,f=h._displayOriginY;h.isStroked&&(g(d,h),d.beginPath(),d.moveTo(h.geom.x1-a,h.geom.y1-f),d.lineTo(h.geom.x2-a,h.geom.y2-f),d.stroke()),d.restore()}};C.exports=u}),2481:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(57847);g.register("line",function(u,l,h,r,o,d,a,f){return this.displayList.add(new y(this.scene,u,l,h,r,o,d,a,f))})}),36823:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(77385),u=s(17440),C.exports={renderWebGL:y,renderCanvas:u}}),77385:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(70554),u=function(l,h,r,o){r.addToRenderList(h);var d=l.pipelines.set(h.pipeline),a=g(h,r,o);d.calcMatrix.copyFrom(a.calc);var f=h._displayOriginX,v=h._displayOriginY,c=r.alpha*h.alpha;if(l.pipelines.preBatch(h),h.isStroked){var p=d.strokeTint,m=y.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*c);p.TL=m,p.TR=m,p.BL=m,p.BR=m,d.batchLine(h.geom.x1-f,h.geom.y1-v,h.geom.x2-f,h.geom.y2-v,h._startWidth/2,h._endWidth/2,1,0,!1,a.sprite,a.camera)}l.pipelines.postBatch(h)};C.exports=u}),24949:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(90273),y=s(83419),u=s(94811),l=s(13829),h=s(25717),r=s(17803),o=s(5469),d=new y({Extends:r,Mixins:[g],initialize:function(f,v,c,p,m,T){v===void 0&&(v=0),c===void 0&&(c=0),r.call(this,f,"Polygon",new h(p));var E=l(this.geom);this.setPosition(v,c),this.setSize(E.width,E.height),m!==void 0&&this.setFillStyle(m,T),this.updateDisplayOrigin(),this.updateData()},smooth:function(a){a===void 0&&(a=1);for(var f=0;f<a;f++)o(this.geom);return this.updateData()},setTo:function(a){this.geom.setTo(a);var f=l(this.geom);return this.setSize(f.width,f.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var a=[],f=this.geom.points,v=0;v<f.length;v++)a.push(f[v].x,f[v].y);return a.push(f[0].x,f[0].y),this.pathIndexes=u(a),this.pathData=a,this}});C.exports=d}),38710:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(75177),u=s(20926),l=function(h,r,o,d){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,d)){var f=r._displayOriginX,v=r._displayOriginY,c=r.pathData,p=c.length-1,m=c[0]-f,T=c[1]-v;a.beginPath(),a.moveTo(m,T),r.closePath||(p-=2);for(var E=2;E<p;E+=2){var P=c[E]-f,w=c[E+1]-v;a.lineTo(P,w)}r.closePath&&a.closePath(),r.isFilled&&(g(a,r),a.fill()),r.isStroked&&(y(a,r),a.stroke()),a.restore()}};C.exports=l}),64827:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(24949);g.register("polygon",function(u,l,h,r,o){return this.displayList.add(new y(this.scene,u,l,h,r,o))})}),90273:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(73695),u=s(38710),C.exports={renderWebGL:y,renderCanvas:u}}),73695:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10441),y=s(91296),u=s(34682),l=function(h,r,o,d){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),f=y(r,o,d),v=a.calcMatrix.copyFrom(f.calc),c=r._displayOriginX,p=r._displayOriginY,m=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&g(a,v,r,m,c,p),r.isStroked&&u(a,r,m,c,p),h.pipelines.postBatch(r)};C.exports=l}),74561:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(87841),u=s(17803),l=s(95597),h=new g({Extends:u,Mixins:[l],initialize:function(o,d,a,f,v,c,p){d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=128),v===void 0&&(v=128),u.call(this,o,"Rectangle",new y(0,0,f,v)),this.setPosition(d,a),this.setSize(f,v),c!==void 0&&this.setFillStyle(c,p),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,o){this.width=r,this.height=o,this.geom.setSize(r,o),this.updateData(),this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=r,d.hitArea.height=o),this},updateData:function(){var r=[],o=this.geom,d=this._tempLine;return o.getLineA(d),r.push(d.x1,d.y1,d.x2,d.y2),o.getLineB(d),r.push(d.x2,d.y2),o.getLineC(d),r.push(d.x2,d.y2),o.getLineD(d),r.push(d.x2,d.y2),this.pathData=r,this}});C.exports=h}),48682:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(75177),u=s(20926),l=function(h,r,o,d){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,d)){var f=r._displayOriginX,v=r._displayOriginY;r.isFilled&&(g(a,r),a.fillRect(-f,-v,r.width,r.height)),r.isStroked&&(y(a,r),a.beginPath(),a.rect(-f,-v,r.width,r.height),a.stroke()),a.restore()}};C.exports=l}),87959:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(74561);g.register("rectangle",function(u,l,h,r,o,d){return this.displayList.add(new y(this.scene,u,l,h,r,o,d))})}),95597:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(52059),u=s(48682),C.exports={renderWebGL:y,renderCanvas:u}}),52059:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(34682),u=s(70554),l=function(h,r,o,d){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),f=g(r,o,d);a.calcMatrix.copyFrom(f.calc);var v=r._displayOriginX,c=r._displayOriginY,p=o.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var m=a.fillTint,T=u.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*p);m.TL=T,m.TR=T,m.BL=T,m.BR=T,a.batchFillRect(-v,-c,r.width,r.height)}r.isStroked&&y(a,r,p,v,c),h.pipelines.postBatch(r)};C.exports=l}),55911:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(81991),y=s(83419),u=s(94811),l=s(17803),h=new y({Extends:l,Mixins:[g],initialize:function(o,d,a,f,v,c,p,m){d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=5),v===void 0&&(v=32),c===void 0&&(c=64),l.call(this,o,"Star",null),this._points=f,this._innerRadius=v,this._outerRadius=c,this.setPosition(d,a),this.setSize(c*2,c*2),p!==void 0&&this.setFillStyle(p,m),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],o=this._points,d=this._innerRadius,a=this._outerRadius,f=Math.PI/2*3,v=Math.PI/o,c=a,p=a;r.push(c,p+-a);for(var m=0;m<o;m++)r.push(c+Math.cos(f)*a,p+Math.sin(f)*a),f+=v,r.push(c+Math.cos(f)*d,p+Math.sin(f)*d),f+=v;return r.push(c,p+-a),this.pathIndexes=u(r),this.pathData=r,this}});C.exports=h}),64272:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(75177),u=s(20926),l=function(h,r,o,d){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,d)){var f=r._displayOriginX,v=r._displayOriginY,c=r.pathData,p=c.length-1,m=c[0]-f,T=c[1]-v;a.beginPath(),a.moveTo(m,T),r.closePath||(p-=2);for(var E=2;E<p;E+=2){var P=c[E]-f,w=c[E+1]-v;a.lineTo(P,w)}a.closePath(),r.isFilled&&(g(a,r),a.fill()),r.isStroked&&(y(a,r),a.stroke()),a.restore()}};C.exports=l}),93697:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(55911),y=s(39429);y.register("star",function(u,l,h,r,o,d,a){return this.displayList.add(new g(this.scene,u,l,h,r,o,d,a))})}),81991:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(57017),u=s(64272),C.exports={renderWebGL:y,renderCanvas:u}}),57017:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10441),y=s(91296),u=s(34682),l=function(h,r,o,d){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),f=y(r,o,d),v=a.calcMatrix.copyFrom(f.calc),c=r._displayOriginX,p=r._displayOriginY,m=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&g(a,v,r,m,c,p),r.isStroked&&u(a,r,m,c,p),h.pipelines.postBatch(r)};C.exports=l}),36931:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(17803),u=s(16483),l=s(96195),h=new g({Extends:y,Mixins:[l],initialize:function(o,d,a,f,v,c,p,m,T,E,P){d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=128),c===void 0&&(c=64),p===void 0&&(p=0),m===void 0&&(m=128),T===void 0&&(T=128),y.call(this,o,"Triangle",new u(f,v,c,p,m,T));var w=this.geom.right-this.geom.left,A=this.geom.bottom-this.geom.top;this.setPosition(d,a),this.setSize(w,A),E!==void 0&&this.setFillStyle(E,P),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,o,d,a,f,v){return this.geom.setTo(r,o,d,a,f,v),this.updateData()},updateData:function(){var r=[],o=this.geom,d=this._tempLine;return o.getLineA(d),r.push(d.x1,d.y1,d.x2,d.y2),o.getLineB(d),r.push(d.x2,d.y2),o.getLineC(d),r.push(d.x2,d.y2),this.pathData=r,this}});C.exports=h}),85172:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(65960),y=s(75177),u=s(20926),l=function(h,r,o,d){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,d)){var f=r._displayOriginX,v=r._displayOriginY,c=r.geom.x1-f,p=r.geom.y1-v,m=r.geom.x2-f,T=r.geom.y2-v,E=r.geom.x3-f,P=r.geom.y3-v;a.beginPath(),a.moveTo(c,p),a.lineTo(m,T),a.lineTo(E,P),a.closePath(),r.isFilled&&(g(a,r),a.fill()),r.isStroked&&(y(a,r),a.stroke()),a.restore()}};C.exports=l}),45245:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(36931);g.register("triangle",function(u,l,h,r,o,d,a,f,v,c){return this.displayList.add(new y(this.scene,u,l,h,r,o,d,a,f,v,c))})}),96195:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(83253),u=s(85172),C.exports={renderWebGL:y,renderCanvas:u}}),83253:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=s(34682),u=s(70554),l=function(h,r,o,d){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),f=g(r,o,d);a.calcMatrix.copyFrom(f.calc);var v=r._displayOriginX,c=r._displayOriginY,p=o.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var m=a.fillTint,T=u.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*p);m.TL=T,m.TR=T,m.BL=T,m.BR=T;var E=r.geom.x1-v,P=r.geom.y1-c,w=r.geom.x2-v,A=r.geom.y2-c,b=r.geom.x3-v,O=r.geom.y3-c;a.batchFillTriangle(E,P,w,A,b,O,f.sprite,f.camera)}r.isStroked&&y(a,r,p,v,c),h.pipelines.postBatch(r)};C.exports=l}),68287:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(9674),y=s(83419),u=s(31401),l=s(95643),h=s(92751),r=new y({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,h],initialize:function(d,a,f,v,c){l.call(this,d,"Sprite"),this._crop=this.resetCropObject(),this.anims=new g(this),this.setTexture(v,c),this.setPosition(a,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,d){this.anims.update(o,d)},play:function(o,d){return this.anims.play(o,d)},playReverse:function(o,d){return this.anims.playReverse(o,d)},playAfterDelay:function(o,d){return this.anims.playAfterDelay(o,d)},playAfterRepeat:function(o,d){return this.anims.playAfterRepeat(o,d)},chain:function(o){return this.anims.chain(o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(o){return this.anims.stopAfterDelay(o)},stopAfterRepeat:function(o){return this.anims.stopAfterRepeat(o)},stopOnFrame:function(o){return this.anims.stopOnFrame(o)},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});C.exports=r}),76552:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y.addToRenderList(g),s.batchSprite(g,g.frame,y,u)};C.exports=R}),15567:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(13059),u=s(44603),l=s(23568),h=s(68287);u.register("sprite",function(r,o){r===void 0&&(r={});var d=l(r,"key",null),a=l(r,"frame",null),f=new h(this.scene,0,0,d,a);return o!==void 0&&(r.add=o),g(this.scene,f,r),y(f,r),f})}),46409:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(68287);g.register("sprite",function(u,l,h,r){return this.displayList.add(new y(this.scene,u,l,h,r))})}),92751:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(9409),u=s(76552),C.exports={renderWebGL:y,renderCanvas:u}}),9409:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y.addToRenderList(g),g.pipeline.batchSprite(g,y,u)};C.exports=R}),14220:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=s.canvas,l=s.context,h=s.style,r=[],o=0,d=y.length;h.maxLines>0&&h.maxLines<y.length&&(d=h.maxLines),h.syncFont(u,l);for(var a=s.letterSpacing,f=0;f<d;f++){var v=h.strokeThickness;if(a===0)v+=l.measureText(y[f]).width;else{for(var c=y[f],p=0;p<c.length;p++)v+=l.measureText(c[p]).width;c.length>1&&(v+=a*(c.length-1))}h.wordWrap&&(v-=l.measureText(" ").width),r[f]=Math.ceil(v),o=Math.max(o,r[f])}var m=g.fontSize+h.strokeThickness,T=m*d,E=s.lineSpacing;return d>1&&(T+=E*(d-1)),{width:o,height:T,lines:d,lineWidths:r,lineSpacing:E,lineHeight:m}};C.exports=R}),79557:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(27919),y=function(u){var l=g.create(this),h=l.getContext("2d",{willReadFrequently:!0});u.syncFont(l,h);var r=h.measureText(u.testString);if("actualBoundingBoxAscent"in r){var o=r.actualBoundingBoxAscent,d=r.actualBoundingBoxDescent;return g.remove(l),{ascent:o,descent:d,fontSize:o+d}}var a=Math.ceil(r.width*u.baselineX),f=a,v=2*f;f=f*u.baselineY|0,l.width=a,l.height=v,h.fillStyle="#f00",h.fillRect(0,0,a,v),h.font=u._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(u.testString,0,f);var c={ascent:0,descent:0,fontSize:0},p=h.getImageData(0,0,a,v);if(!p)return c.ascent=f,c.descent=f+6,c.fontSize=c.ascent+c.descent,g.remove(l),c;var m=p.data,T=m.length,E=a*4,P,w,A=0,b=!1;for(P=0;P<f;P++){for(w=0;w<E;w+=4)if(m[A+w]!==255){b=!0;break}if(!b)A+=E;else break}for(c.ascent=f-P,A=T-E,b=!1,P=v;P>f;P--){for(w=0;w<E;w+=4)if(m[A+w]!==255){b=!0;break}if(!b)A-=E;else break}return c.descent=P-f,c.fontSize=c.ascent+c.descent,g.remove(l),c};C.exports=y}),50171:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(40366),y=s(27919),u=s(83419),l=s(31401),h=s(95643),r=s(14220),o=s(35154),d=s(35846),a=s(61771),f=s(35762),v=s(45650),c=new u({Extends:h,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,a],initialize:function(m,T,E,P,w){T===void 0&&(T=0),E===void 0&&(E=0),h.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(T,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=y.create(this),this.context,this.style=new f(this,w),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=v(),this.texture=m.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(P),w&&w.padding&&this.setPadding(w.padding),w&&w.lineSpacing&&this.setLineSpacing(w.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",g(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(p){var m=this.style;if(m.wordWrapCallback){var T=m.wordWrapCallback.call(m.wordWrapCallbackScope,p,this);return Array.isArray(T)&&(T=T.join(`
`)),T}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(p,this.context,this.style.wordWrapWidth):this.basicWordWrap(p,this.context,this.style.wordWrapWidth):p},advancedWordWrap:function(p,m,T){for(var E="",P=p.replace(/ +/gi," ").split(this.splitRegExp),w=P.length,A=0;A<w;A++){var b=P[A],O="";b=b.replace(/^ *|\s*$/gi,"");var I=m.measureText(b).width;if(I<T){E+=b+`
`;continue}for(var D=T,B=b.split(" "),k=0;k<B.length;k++){var N=B[k],H=N+" ",$=m.measureText(H).width;if($>D){if(k===0){for(var J=H;J.length&&(J=J.slice(0,-1),$=m.measureText(J).width,!($<=D)););if(!J.length)throw new Error("wordWrapWidth < a single character");var q=N.substr(J.length);B[k]=q,O+=J}var Y=B[k].length?k:k+1,K=B.slice(Y).join(" ").replace(/[ \n]*$/gi,"");P.splice(A+1,0,K),w=P.length;break}else O+=H,D-=$}E+=O.replace(/[ \n]*$/gi,"")+`
`}return E=E.replace(/[\s|\n]*$/gi,""),E},basicWordWrap:function(p,m,T){for(var E="",P=p.split(this.splitRegExp),w=P.length-1,A=m.measureText(" ").width,b=0;b<=w;b++){for(var O=T,I=P[b].split(" "),D=I.length-1,B=0;B<=D;B++){var k=I[B],N=m.measureText(k).width,H=N;B<D&&(H+=A),H>O&&B>0&&(E+=`
`,O=T),E+=k,B<D?(E+=" ",O-=H):O-=N}b<w&&(E+=`
`)}return E},getWrappedText:function(p){p===void 0&&(p=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(p);return m.split(this.splitRegExp)},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this._text&&(this._text=p.toString(),this.updateText()),this},appendText:function(p,m){m===void 0&&(m=!0),!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p=p.toString();var T=this._text.concat(m?`
`+p:p);return T!==this._text&&(this._text=T,this.updateText()),this},setStyle:function(p){return this.style.setStyle(p)},setFont:function(p){return this.style.setFont(p)},setFontFamily:function(p){return this.style.setFontFamily(p)},setFontSize:function(p){return this.style.setFontSize(p)},setFontStyle:function(p){return this.style.setFontStyle(p)},setFixedSize:function(p,m){return this.style.setFixedSize(p,m)},setBackgroundColor:function(p){return this.style.setBackgroundColor(p)},setFill:function(p){return this.style.setFill(p)},setColor:function(p){return this.style.setColor(p)},setStroke:function(p,m){return this.style.setStroke(p,m)},setShadow:function(p,m,T,E,P,w){return this.style.setShadow(p,m,T,E,P,w)},setShadowOffset:function(p,m){return this.style.setShadowOffset(p,m)},setShadowColor:function(p){return this.style.setShadowColor(p)},setShadowBlur:function(p){return this.style.setShadowBlur(p)},setShadowStroke:function(p){return this.style.setShadowStroke(p)},setShadowFill:function(p){return this.style.setShadowFill(p)},setWordWrapWidth:function(p,m){return this.style.setWordWrapWidth(p,m)},setWordWrapCallback:function(p,m){return this.style.setWordWrapCallback(p,m)},setAlign:function(p){return this.style.setAlign(p)},setResolution:function(p){return this.style.setResolution(p)},setLineSpacing:function(p){return this.lineSpacing=p,this.updateText()},setLetterSpacing:function(p){return this.letterSpacing=p,this.updateText()},setPadding:function(p,m,T,E){if(typeof p=="object"){var P=p,w=o(P,"x",null);w!==null?(p=w,T=w):(p=o(P,"left",0),T=o(P,"right",p));var A=o(P,"y",null);A!==null?(m=A,E=A):(m=o(P,"top",0),E=o(P,"bottom",m))}else p===void 0&&(p=0),m===void 0&&(m=p),T===void 0&&(T=p),E===void 0&&(E=m);return this.padding.left=p,this.padding.top=m,this.padding.right=T,this.padding.bottom=E,this.updateText()},setMaxLines:function(p){return this.style.setMaxLines(p)},setRTL:function(p){p===void 0&&(p=!0);var m=this.style;return m.rtl===p?this:(m.rtl=p,p?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",g(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),m.align==="left"?m.align="right":m.align==="right"&&(m.align="left"),this)},updateText:function(){var p=this.canvas,m=this.context,T=this.style,E=T.resolution,P=T.metrics;T.syncFont(p,m);var w=this._text;(T.wordWrapWidth||T.wordWrapCallback)&&(w=this.runWordWrap(this._text));var A=w.split(this.splitRegExp),b=r(this,P,A),O=this.padding,I;T.fixedWidth===0?(this.width=b.width+O.left+O.right,I=b.width):(this.width=T.fixedWidth,I=this.width-O.left-O.right,I<b.width&&(I=b.width)),T.fixedHeight===0?this.height=b.height+O.top+O.bottom:this.height=T.fixedHeight;var D=this.width,B=this.height;this.updateDisplayOrigin(),D*=E,B*=E,D=Math.max(D,1),B=Math.max(B,1),p.width!==D||p.height!==B?(p.width=D,p.height=B,this.frame.setSize(D,B),T.syncFont(p,m),T.rtl&&(m.direction="rtl")):m.clearRect(0,0,D,B),m.save(),m.scale(E,E),T.backgroundColor&&(m.fillStyle=T.backgroundColor,m.fillRect(0,0,D,B)),T.syncStyle(p,m),m.translate(O.left,O.top);for(var k,N,H=0;H<b.lines;H++){if(k=T.strokeThickness/2,N=T.strokeThickness/2+H*b.lineHeight+P.ascent,H>0&&(N+=b.lineSpacing*H),T.rtl)k=D-k-O.left-O.right;else if(T.align==="right")k+=I-b.lineWidths[H];else if(T.align==="center")k+=(I-b.lineWidths[H])/2;else if(T.align==="justify"){var $=.85;if(b.lineWidths[H]/b.width>=$){var J=b.width-b.lineWidths[H],q=m.measureText(" ").width,Y=A[H].trim(),K=Y.split(" ");J+=(A[H].length-Y.length)*q;for(var V=Math.floor(J/q),U=0;V>0;)K[U]+=" ",U=(U+1)%(K.length-1||1),--V;A[H]=K.join(" ")}}this.autoRound&&(k=Math.round(k),N=Math.round(N));var Z=this.letterSpacing;if(T.strokeThickness&&Z===0&&(T.syncShadow(m,T.shadowStroke),m.strokeText(A[H],k,N)),T.color)if(T.syncShadow(m,T.shadowFill),Z!==0)for(var et=0,st=A[H].split(""),rt=0;rt<st.length;rt++)T.strokeThickness&&(T.syncShadow(m,T.shadowStroke),m.strokeText(st[rt],k+et,N),T.syncShadow(m,T.shadowFill)),m.fillText(st[rt],k+et,N),et+=m.measureText(st[rt]).width+Z;else m.fillText(A[H],k,N)}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(p,this.frame.source.glTexture,!0));var at=this.input;return at&&!at.customHitArea&&(at.hitArea.width=this.width,at.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(p){this.setText(p)}},toJSON:function(){var p=l.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return p.data=m,p},preDestroy:function(){d(this.canvas),y.remove(this.canvas);var p=this.texture;p&&p.destroy()}});C.exports=c}),79724:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){g.width===0||g.height===0||(y.addToRenderList(g),s.batchSprite(g,g.frame,y,u))};C.exports=R}),71259:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(50171);y.register("text",function(h,r){h===void 0&&(h={});var o=u(h,"text",""),d=u(h,"style",null),a=u(h,"padding",null);a!==null&&(d.padding=a);var f=new l(this.scene,0,0,o,d);return r!==void 0&&(h.add=r),g(this.scene,f,h),f.autoRound=u(h,"autoRound",!0),f.resolution=u(h,"resolution",1),f})}),68005:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(50171),y=s(39429);y.register("text",function(u,l,h,r){return this.displayList.add(new g(this.scene,u,l,h,r))})}),61771:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(34397),u=s(79724),C.exports={renderWebGL:y,renderCanvas:u}}),35762:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23568),u=s(35154),l=s(79557),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new g({initialize:function(d,a){this.parent=d,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(a,!1,!0)},setStyle:function(o,d,a){d===void 0&&(d=!0),a===void 0&&(a=!1);for(var f in h){var v=a?h[f][1]:this[f];f==="wordWrapCallback"||f==="wordWrapCallbackScope"?this[f]=u(o,h[f][0],v):o&&f==="fontSize"&&typeof o.fontSize=="number"?this[f]=o.fontSize.toString()+"px":this[f]=y(o,h[f][0],v)}var c=u(o,"font",null);c!==null&&this.setFont(c,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var p=u(o,"fill",null);p!==null&&(this.color=p);var m=u(o,"metrics",!1);return m?this.metrics={ascent:u(m,"ascent",0),descent:u(m,"descent",0),fontSize:u(m,"fontSize",0)}:(d||!this.metrics)&&(this.metrics=l(this)),d?this.parent.updateText():this.parent},syncFont:function(o,d){d.font=this._font},syncStyle:function(o,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(o,d){d?(o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY,o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur):(o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor=0,o.shadowBlur=0)},update:function(o){return o&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=l(this)),this.parent.updateText()},setFont:function(o,d){d===void 0&&(d=!0);var a=o,f="",v="";if(typeof o!="string")a=u(o,"fontFamily","Courier"),f=u(o,"fontSize","16px"),v=u(o,"fontStyle","");else{var c=o.split(" "),p=0;v=c.length>2?c[p++]:"",f=c[p++]||"16px",a=c[p++]||"Courier"}return(a!==this.fontFamily||f!==this.fontSize||v!==this.fontStyle)&&(this.fontFamily=a,this.fontSize=f,this.fontStyle=v,d&&this.update(!0)),this.parent},setFontFamily:function(o){return this.fontFamily!==o&&(this.fontFamily=o,this.update(!0)),this.parent},setFontStyle:function(o){return this.fontStyle!==o&&(this.fontStyle=o,this.update(!0)),this.parent},setFontSize:function(o){return typeof o=="number"&&(o=o.toString()+"px"),this.fontSize!==o&&(this.fontSize=o,this.update(!0)),this.parent},setTestString:function(o){return this.testString=o,this.update(!0)},setFixedSize:function(o,d){return this.fixedWidth=o,this.fixedHeight=d,o&&(this.parent.width=o),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(o){return this.backgroundColor=o,this.update(!1)},setFill:function(o){return this.color=o,this.update(!1)},setColor:function(o){return this.color=o,this.update(!1)},setResolution:function(o){return this.resolution=o,this.update(!1)},setStroke:function(o,d){return d===void 0&&(d=this.strokeThickness),o===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==o||this.strokeThickness!==d)&&(this.stroke=o,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(o,d,a,f,v,c){return o===void 0&&(o=0),d===void 0&&(d=0),a===void 0&&(a="#000"),f===void 0&&(f=0),v===void 0&&(v=!1),c===void 0&&(c=!0),this.shadowOffsetX=o,this.shadowOffsetY=d,this.shadowColor=a,this.shadowBlur=f,this.shadowStroke=v,this.shadowFill=c,this.update(!1)},setShadowOffset:function(o,d){return o===void 0&&(o=0),d===void 0&&(d=o),this.shadowOffsetX=o,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(o){return o===void 0&&(o="#000"),this.shadowColor=o,this.update(!1)},setShadowBlur:function(o){return o===void 0&&(o=0),this.shadowBlur=o,this.update(!1)},setShadowStroke:function(o){return this.shadowStroke=o,this.update(!1)},setShadowFill:function(o){return this.shadowFill=o,this.update(!1)},setWordWrapWidth:function(o,d){return d===void 0&&(d=!1),this.wordWrapWidth=o,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(o,d){return d===void 0&&(d=null),this.wordWrapCallback=o,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(o){return o===void 0&&(o="left"),this.align=o,this.update(!1)},setMaxLines:function(o){return o===void 0&&(o=0),this.maxLines=o,this.update(!1)},getTextMetrics:function(){var o=this.metrics;return{ascent:o.ascent,descent:o.descent,fontSize:o.fontSize}},toJSON:function(){var o={};for(var d in h)o[d]=this[d];return o.metrics=this.getTextMetrics(),o},destroy:function(){this.parent=void 0}});C.exports=r}),34397:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70554),y=function(u,l,h,r){if(!(l.width===0||l.height===0)){h.addToRenderList(l);var o=l.frame,d=o.width,a=o.height,f=g.getTintAppendFloatAlpha,v=u.pipelines.set(l.pipeline,l),c=v.setTexture2D(o.glTexture,l);v.batchTexture(l,o.glTexture,d,a,l.x,l.y,d/l.style.resolution,a/l.style.resolution,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,d,a,f(l.tintTopLeft,h.alpha*l._alphaTL),f(l.tintTopRight,h.alpha*l._alphaTR),f(l.tintBottomLeft,h.alpha*l._alphaBL),f(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,0,0,h,r,!1,c)}};C.exports=y}),20839:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(27919),y=s(83419),u=s(31401),l=s(95643),h=s(98439),r=s(68703),o=s(56295),d=s(45650),a=s(26099),f=8,v=new y({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,o],initialize:function(p,m,T,E,P,w,A){var b=p.sys.renderer;l.call(this,p,"TileSprite");var O=p.sys.textures.get(w),I=O.get(A);I.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),O=p.sys.textures.get("__MISSING"),I=O.get()),O.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),O=p.sys.textures.get("__MISSING"),I=O.get()),!E||!P?(E=E||I.width,P=P||I.height):(E=Math.floor(E),P=Math.floor(P)),this._tilePosition=new a,this._tileScale=new a(1,1),this.dirty=!1,this.renderer=b,this.canvas=g.create(this,E,P),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=O,this.displayFrame=I,this._crop=this.resetCropObject(),this._textureKey=d(),this.texture=p.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=h(I.width),this.potHeight=h(I.height),this.fillCanvas=g.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(m,T),this.setSize(E,P),this.setFrame(A),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(c,p){return this.displayTexture=this.scene.sys.textures.get(c),this.setFrame(p)},setFrame:function(c){var p=this.displayTexture.get(c);return this.potWidth=h(p.width),this.potHeight=h(p.height),this.canvas.width=0,!p.cutWidth||!p.cutHeight?this.renderFlags&=~f:this.renderFlags|=f,this.displayFrame=p,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(c,p){return c!==void 0&&(this.tilePositionX=c),p!==void 0&&(this.tilePositionY=p),this},setTileScale:function(c,p){return c===void 0&&(c=this.tileScaleX),p===void 0&&(p=c),this.tileScaleX=c,this.tileScaleY=p,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var c=this.displayFrame;if(c.source.isRenderTexture||c.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var p=this.fillContext,m=this.fillCanvas,T=this.potWidth,E=this.potHeight;(!this.renderer||!this.renderer.gl)&&(T=c.cutWidth,E=c.cutHeight),p.clearRect(0,0,T,E),m.width=T,m.height=E,p.drawImage(c.source.image,c.cutX,c.cutY,c.cutWidth,c.cutHeight,0,0,T,E),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=p.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var c=this.canvas;if((c.width!==this.width||c.height!==this.height)&&(c.width=this.width,c.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var p=this.context;this.scene.sys.game.config.antialias||r.disable(p);var m=this._tileScale.x,T=this._tileScale.y,E=this._tilePosition.x,P=this._tilePosition.y;p.clearRect(0,0,this.width,this.height),p.save(),p.scale(m,T),p.translate(-E,-P),p.fillStyle=this.fillPattern,p.fillRect(E,P,this.width/m,this.height/T),p.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),g.remove(this.canvas),g.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var c=this.texture;c&&c.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(c){this._tilePosition.x=c,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(c){this._tilePosition.y=c,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(c){this._tileScale.x=c,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(c){this._tileScale.y=c,this.dirty=!0}}});C.exports=v}),46992:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){g.updateCanvas(),y.addToRenderList(g),s.batchSprite(g,g.frame,y,u)};C.exports=R}),14167:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(20839);y.register("tileSprite",function(h,r){h===void 0&&(h={});var o=u(h,"x",0),d=u(h,"y",0),a=u(h,"width",512),f=u(h,"height",512),v=u(h,"key",""),c=u(h,"frame",""),p=new l(this.scene,o,d,a,f,v,c);return r!==void 0&&(h.add=r),g(this.scene,p,h),p})}),91681:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20839),y=s(39429);y.register("tileSprite",function(u,l,h,r,o,d){return this.displayList.add(new g(this.scene,u,l,h,r,o,d))})}),56295:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(18553),u=s(46992),C.exports={renderWebGL:y,renderCanvas:u}}),18553:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70554),y=function(u,l,h,r){l.updateCanvas();var o=l.width,d=l.height;if(!(o===0||d===0)){h.addToRenderList(l);var a=g.getTintAppendFloatAlpha,f=u.pipelines.set(l.pipeline,l),v=f.setTexture2D(l.fillPattern,l);f.batchTexture(l,l.fillPattern,l.displayFrame.width*l.tileScaleX,l.displayFrame.height*l.tileScaleY,l.x,l.y,o,d,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.originX*o,l.originY*d,0,0,o,d,a(l.tintTopLeft,h.alpha*l._alphaTL),a(l.tintTopRight,h.alpha*l._alphaTR),a(l.tintBottomLeft,h.alpha*l._alphaBL),a(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,l.tilePositionX%l.displayFrame.width/l.displayFrame.width,l.tilePositionY%l.displayFrame.height/l.displayFrame.height,h,r,!1,v)}};C.exports=y}),18471:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(31401),l=s(51708),h=s(8443),r=s(95643),o=s(36383),d=s(14463),a=s(45650),f=s(10247),v=new y({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.TextureCrop,u.Tint,u.Transform,u.Visible,f],initialize:function(p,m,T,E){r.call(this,p,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=a(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var P=p.sys.game;this._device=P.device.video,this.setPosition(m,T),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),P.events.on(h.PAUSE,this.globalPause,this),P.events.on(h.RESUME,this.globalResume,this);var w=p.sys.sound;w&&w.on(d.GLOBAL_MUTE,this.globalMute,this),E&&this.load(E)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(c){var p=this.scene.sys.cache.video.get(c);return p?(this.cacheKey=c,this.loadHandler(p.url,p.noAudio,p.crossOrigin)):console.warn("No video in cache for key: "+c),this},changeSource:function(c,p,m,T,E){p===void 0&&(p=!0),m===void 0&&(m=!1),this.cacheKey!==c&&(this.load(c),p&&this.play(m,T,E))},getVideoKey:function(){return this.cacheKey},loadURL:function(c,p,m){p===void 0&&(p=!1);var T=this._device.getVideoURL(c);return T?(this.cacheKey="",this.loadHandler(T.url,p,m)):console.warn("No supported video format found for "+c),this},loadMediaStream:function(c,p,m){return this.loadHandler(null,p,m,c)},loadHandler:function(c,p,m,T){p||(p=!1);var E=this.video;if(E?(this.removeLoadEventHandlers(),this.stop()):(E=document.createElement("video"),E.controls=!1,E.setAttribute("playsinline","playsinline"),E.setAttribute("preload","auto"),E.setAttribute("disablePictureInPicture","true")),p?(E.muted=!0,E.defaultMuted=!0,E.setAttribute("autoplay","autoplay")):(E.muted=!1,E.defaultMuted=!1,E.removeAttribute("autoplay")),m?E.setAttribute("crossorigin",m):E.removeAttribute("crossorigin"),T)if("srcObject"in E)try{E.srcObject=T}catch(w){if(w.name!=="TypeError")throw w;E.src=URL.createObjectURL(T)}else E.src=URL.createObjectURL(T);else E.src=c;this.retry=0,this.video=E,this._playCalled=!1,E.load(),this.addLoadEventHandlers();var P=this.scene.sys.textures.get(this._key);return this.setTexture(P),this},requestVideoFrame:function(c,p){var m=this.video;if(m){var T=p.width,E=p.height,P=this.videoTexture,w=this.videoTextureSource,A=!P||w.source!==m;A?(this._codePaused=m.paused,this._codeMuted=m.muted,P?(w.source=m,w.width=T,w.height=E,P.get().setSize(T,E)):(P=this.scene.sys.textures.create(this._key,m,T,E),P.add("__BASE",0,0,0,T,E),this.setTexture(P),this.videoTexture=P,this.videoTextureSource=P.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(l.VIDEO_TEXTURE,this,P)),this.setSizeToFrame(),this.updateDisplayOrigin()):w.update(),this.isStalled=!1,this.metadata=p;var b=p.mediaTime;A&&(this._lastUpdate=b,this.emit(l.VIDEO_CREATED,this,T,E),this.frameReady||(this.frameReady=!0,this.emit(l.VIDEO_PLAY,this))),this._playingMarker?b>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.emit(l.VIDEO_LOOP,this)):(this.stop(!1),this.emit(l.VIDEO_COMPLETE,this))):b<this._lastUpdate&&this.emit(l.VIDEO_LOOP,this),this._lastUpdate=b,this._getFrame?(this.removeEventHandlers(),m.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(c,p,m){p===void 0&&(p=-1),m===void 0&&(m=o.MAX_SAFE_INTEGER);var T=this.video;return!T||this.isPlaying()?(T||console.warn("Video not loaded"),this):(c===void 0&&(c=T.loop),T.loop=c,this._markerIn=p,this._markerOut=m,this._playingMarker=p>-1&&m>p&&m<o.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=T.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var c=this.video;return!c||this.isPlaying()?(c||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=c.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var c=this.video;c&&(c.addEventListener("error",this._loadCallbackHandler),c.addEventListener("abort",this._loadCallbackHandler),c.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var c=this.video;c&&(c.removeEventListener("error",this._loadCallbackHandler),c.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var c=this.video;if(c){var p=this._callbacks;for(var m in p)c.addEventListener(m,p[m])}},removeEventHandlers:function(){var c=this.video;if(c){var p=this._callbacks;for(var m in p)c.removeEventListener(m,p[m])}},createPlayPromise:function(c){c===void 0&&(c=!0);var p=this.video,m=p.play();if(m!==void 0){var T=this.playSuccess.bind(this),E=this.playError.bind(this);if(!c){var P=this;E=function(){P.failedPlayAttempts++}}m.then(T).catch(E)}else p.addEventListener("playing",this._callbacks.legacy),c||this.failedPlayAttempts++},addMarker:function(c,p,m){return!isNaN(p)&&p>=0&&!isNaN(m)&&m>p&&(this.markers[c]=[p,m]),this},playMarker:function(c,p){var m=this.markers[c];return m&&this.play(p,m[0],m[1]),this},removeMarker:function(c){return delete this.markers[c],this},snapshot:function(c,p){return c===void 0&&(c=this.width),p===void 0&&(p=this.height),this.snapshotArea(0,0,this.width,this.height,c,p)},snapshotArea:function(c,p,m,T,E,P){c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=this.width),T===void 0&&(T=this.height),E===void 0&&(E=m),P===void 0&&(P=T);var w=this.video,A=this.snapshotTexture;return A?(A.setSize(E,P),w&&A.context.drawImage(w,c,p,m,T,0,0,E,P)):(A=this.scene.sys.textures.createCanvas(a(),E,P),this.snapshotTexture=A,w&&A.context.drawImage(w,c,p,m,T,0,0,E,P)),A.update()},saveSnapshotTexture:function(c){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,c):this.snapshotTexture=this.scene.sys.textures.createCanvas(c,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(l.VIDEO_UNLOCKED,this));var c=this.scene.sys.sound;c&&c.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(c){var p=c.name;p==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(l.VIDEO_LOCKED,this)):p==="NotSupportedError"?(this.stop(!1),this.emit(l.VIDEO_UNSUPPORTED,this,c)):(this.stop(!1),this.emit(l.VIDEO_ERROR,this,c))},legacyPlayHandler:function(){var c=this.video;c&&(this.playSuccess(),c.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(l.VIDEO_PLAYING,this)},loadErrorHandler:function(c){this.stop(!1),this.emit(l.VIDEO_ERROR,this,c)},metadataHandler:function(c){this.emit(l.VIDEO_METADATA,this,c)},setSizeToFrame:function(c){c||(c=this.frame),this.width=c.realWidth,this.height=c.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this},stalledHandler:function(c){this.isStalled=!0,this.emit(l.VIDEO_STALLED,this,c)},completeHandler:function(){this._playCalled=!1,this.emit(l.VIDEO_COMPLETE,this)},preUpdate:function(c,p){var m=this.video;!m||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=p,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(c){var p=this.video;if(p){var m=p.duration;if(m!==1/0&&!isNaN(m)){var T=m*c;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(c){var p=this.video;if(p){if(typeof c=="string"){var m=c[0],T=parseFloat(c.substr(1));m==="+"?c=p.currentTime+T:m==="-"&&(c=p.currentTime-T)}p.currentTime=c}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(l.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(l.VIDEO_SEEKED,this)},getProgress:function(){var c=this.video;if(c){var p=c.duration;if(p!==1/0&&!isNaN(p))return c.currentTime/p}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(c){c===void 0&&(c=!0),this._codeMuted=c;var p=this.video;return p&&(p.muted=this._systemMuted?!0:c),this},isMuted:function(){return this._codeMuted},globalMute:function(c,p){this._systemMuted=p;var m=this.video;m&&(m.muted=this._codeMuted?!0:p)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(c){c===void 0&&(c=!0);var p=this.video;return this._codePaused=c,p&&!p.ended&&(c?p.paused||(this.removeEventHandlers(),p.pause()):c||(this._playCalled?p.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(c){return c===void 0&&(c=1),this.video&&(this.video.volume=g(c,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(c){return this.video&&(this.video.playbackRate=c),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(c){return c===void 0&&(c=!0),this.video&&(this.video.loop=c),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(c,p){return p===void 0&&(p=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,c),this.videoTextureSource.setFlipY(p)),this._key=c,this.flipY=p,!!this.videoTexture},stop:function(c){c===void 0&&(c=!0);var p=this.video;return p&&(this.removeEventHandlers(),p.cancelVideoFrameCallback(this._rfvCallbackId),p.pause()),this.retry=0,this._playCalled=!1,c&&this.emit(l.VIDEO_STOP,this),this},removeVideoElement:function(){var c=this.video;if(c){for(c.parentNode&&c.parentNode.removeChild(c);c.hasChildNodes();)c.removeChild(c.firstChild);c.removeAttribute("autoplay"),c.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var c=this.scene.sys.game.events;c.off(h.PAUSE,this.globalPause,this),c.off(h.RESUME,this.globalResume,this);var p=this.scene.sys.sound;p&&p.off(d.GLOBAL_MUTE,this.globalMute,this)}});C.exports=v}),58352:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){g.videoTexture&&(y.addToRenderList(g),s.batchSprite(g,g.frame,y,u))};C.exports=R}),11511:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25305),y=s(44603),u=s(23568),l=s(18471);y.register("video",function(h,r){h===void 0&&(h={});var o=u(h,"key",null),d=new l(this.scene,0,0,o);return r!==void 0&&(h.add=r),g(this.scene,d,h),d})}),89025:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(18471),y=s(39429);y.register("video",function(u,l,h){return this.displayList.add(new g(this.scene,u,l,h))})}),10247:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(29849),u=s(58352),C.exports={renderWebGL:y,renderCanvas:u}}),29849:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){g.videoTexture&&(y.addToRenderList(g),g.pipeline.batchSprite(g,y,u))};C.exports=R}),41481:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10312),y=s(96503),u=s(87902),l=s(83419),h=s(31401),r=s(95643),o=s(87841),d=s(37303),a=new l({Extends:r,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(v,c,p,m,T){m===void 0&&(m=1),T===void 0&&(T=m),r.call(this,v,"Zone"),this.setPosition(c,p),this.width=m,this.height=T,this.blendMode=g.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(f){this.scaleX=f/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(f){this.scaleY=f/this.height}},setSize:function(f,v,c){c===void 0&&(c=!0),this.width=f,this.height=v,this.updateDisplayOrigin();var p=this.input;return c&&p&&!p.customHitArea&&(p.hitArea.width=f,p.hitArea.height=v),this},setDisplaySize:function(f,v){return this.displayWidth=f,this.displayHeight=v,this},setCircleDropZone:function(f){return this.setDropZone(new y(0,0,f),u)},setRectangleDropZone:function(f,v){return this.setDropZone(new o(0,0,f,v),d)},setDropZone:function(f,v){return this.input||this.setInteractive(f,v,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(f,v,c){c.addToRenderList(v)},renderWebGL:function(f,v,c){c.addToRenderList(v)}});C.exports=a}),95261:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(44603),y=s(23568),u=s(41481);g.register("zone",function(l){var h=y(l,"x",0),r=y(l,"y",0),o=y(l,"width",1),d=y(l,"height",o);return new u(this.scene,h,r,o,d)})}),84175:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(41481),y=s(39429);y.register("zone",function(u,l,h,r){return this.displayList.add(new g(this.scene,u,l,h,r))})}),95166:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.radius>0?Math.PI*s.radius*s.radius:0};C.exports=R}),96503:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(87902),u=s(26241),l=s(79124),h=s(23777),r=s(28176),o=new g({initialize:function(a,f,v){a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=0),this.type=h.CIRCLE,this.x=a,this.y=f,this._radius=v,this._diameter=v*2},contains:function(d,a){return y(this,d,a)},getPoint:function(d,a){return u(this,d,a)},getPoints:function(d,a,f){return l(this,d,a,f)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,a,f){return this.x=d,this.y=a,this._radius=f,this._diameter=f*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,a){return a===void 0&&(a=d),this.x=d,this.y=a,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});C.exports=o}),71562:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return 2*(Math.PI*s.radius)};C.exports=R}),92110:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l,h){return h===void 0&&(h=new g),h.x=u.x+u.radius*Math.cos(l),h.y=u.y+u.radius*Math.sin(l),h};C.exports=y}),42250:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(96503),y=function(u){return new g(u.x,u.y,u.radius)};C.exports=y}),87902:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(s.radius>0&&g>=s.left&&g<=s.right&&y>=s.top&&y<=s.bottom){var u=(s.x-g)*(s.x-g),l=(s.y-y)*(s.y-y);return u+l<=s.radius*s.radius}else return!1};C.exports=R}),5698:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87902),y=function(u,l){return g(u,l.x,l.y)};C.exports=y}),70588:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87902),y=function(u,l){return g(u,l.x,l.y)&&g(u,l.right,l.y)&&g(u,l.x,l.bottom)&&g(u,l.right,l.bottom)};C.exports=y}),26394:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g.setTo(s.x,s.y,s.radius)};C.exports=R}),76278:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x===g.x&&s.y===g.y&&s.radius===g.radius};C.exports=R}),2074:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=function(u,l){return l===void 0&&(l=new g),l.x=u.left,l.y=u.top,l.width=u.diameter,l.height=u.diameter,l};C.exports=y}),26241:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(92110),y=s(62945),u=s(36383),l=s(2141),h=function(r,o,d){d===void 0&&(d=new l);var a=y(o,0,u.PI2);return g(r,a,d)};C.exports=h}),79124:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(71562),y=s(92110),u=s(62945),l=s(36383),h=function(r,o,d,a){a===void 0&&(a=[]),!o&&d>0&&(o=g(r)/d);for(var f=0;f<o;f++){var v=u(f/o,0,l.PI2);a.push(y(r,v))}return a};C.exports=h}),50884:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s.x+=g,s.y+=y,s};C.exports=R}),39212:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x+=g.x,s.y+=g.y,s};C.exports=R}),28176:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){l===void 0&&(l=new g);var h=2*Math.PI*Math.random(),r=Math.random()+Math.random(),o=r>1?2-r:r,d=o*Math.cos(h),a=o*Math.sin(h);return l.x=u.x+d*u.radius,l.y=u.y+a*u.radius,l};C.exports=y}),88911:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(96503);g.Area=s(95166),g.Circumference=s(71562),g.CircumferencePoint=s(92110),g.Clone=s(42250),g.Contains=s(87902),g.ContainsPoint=s(5698),g.ContainsRect=s(70588),g.CopyFrom=s(26394),g.Equals=s(76278),g.GetBounds=s(2074),g.GetPoint=s(26241),g.GetPoints=s(79124),g.Offset=s(50884),g.OffsetPoint=s(39212),g.Random=s(28176),C.exports=g}),23777:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};C.exports=R}),78874:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.isEmpty()?0:s.getMajorRadius()*s.getMinorRadius()*Math.PI};C.exports=R}),92990:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=s.width/2,y=s.height/2,u=Math.pow(g-y,2)/Math.pow(g+y,2);return Math.PI*(g+y)*(1+3*u/(10+Math.sqrt(4-3*u)))};C.exports=R}),79522:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l,h){h===void 0&&(h=new g);var r=u.width/2,o=u.height/2;return h.x=u.x+r*Math.cos(l),h.y=u.y+o*Math.sin(l),h};C.exports=y}),58102:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(8497),y=function(u){return new g(u.x,u.y,u.width,u.height)};C.exports=y}),81154:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(s.width<=0||s.height<=0)return!1;var u=(g-s.x)/s.width,l=(y-s.y)/s.height;return u*=u,l*=l,u+l<.25};C.exports=R}),46662:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(81154),y=function(u,l){return g(u,l.x,l.y)};C.exports=y}),1632:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(81154),y=function(u,l){return g(u,l.x,l.y)&&g(u,l.right,l.y)&&g(u,l.x,l.bottom)&&g(u,l.right,l.bottom)};C.exports=y}),65534:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g.setTo(s.x,s.y,s.width,s.height)};C.exports=R}),8497:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(81154),u=s(90549),l=s(48320),h=s(23777),r=s(24820),o=new g({initialize:function(a,f,v,c){a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),this.type=h.ELLIPSE,this.x=a,this.y=f,this.width=v,this.height=c},contains:function(d,a){return y(this,d,a)},getPoint:function(d,a){return u(this,d,a)},getPoints:function(d,a,f){return l(this,d,a,f)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,a,f,v){return this.x=d,this.y=a,this.width=f,this.height=v,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,a){return a===void 0&&(a=d),this.x=d,this.y=a,this},setSize:function(d,a){return a===void 0&&(a=d),this.width=d,this.height=a,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});C.exports=o}),36146:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x===g.x&&s.y===g.y&&s.width===g.width&&s.height===g.height};C.exports=R}),23694:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=function(u,l){return l===void 0&&(l=new g),l.x=u.left,l.y=u.top,l.width=u.width,l.height=u.height,l};C.exports=y}),90549:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(79522),y=s(62945),u=s(36383),l=s(2141),h=function(r,o,d){d===void 0&&(d=new l);var a=y(o,0,u.PI2);return g(r,a,d)};C.exports=h}),48320:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(92990),y=s(79522),u=s(62945),l=s(36383),h=function(r,o,d,a){a===void 0&&(a=[]),!o&&d>0&&(o=g(r)/d);for(var f=0;f<o;f++){var v=u(f/o,0,l.PI2);a.push(y(r,v))}return a};C.exports=h}),73424:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s.x+=g,s.y+=y,s};C.exports=R}),44808:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x+=g.x,s.y+=g.y,s};C.exports=R}),24820:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){l===void 0&&(l=new g);var h=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return l.x=u.x+r*Math.cos(h)*u.width/2,l.y=u.y+r*Math.sin(h)*u.height/2,l};C.exports=y}),49203:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(8497);g.Area=s(78874),g.Circumference=s(92990),g.CircumferencePoint=s(79522),g.Clone=s(58102),g.Contains=s(81154),g.ContainsPoint=s(46662),g.ContainsRect=s(1632),g.CopyFrom=s(65534),g.Equals=s(36146),g.GetBounds=s(23694),g.GetPoint=s(90549),g.GetPoints=s(48320),g.Offset=s(73424),g.OffsetPoint=s(44808),g.Random=s(24820),C.exports=g}),55738:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(23777),y=s(79291),u={Circle:s(88911),Ellipse:s(49203),Intersects:s(91865),Line:s(2529),Mesh:s(73090),Point:s(43711),Polygon:s(58423),Rectangle:s(93232),Triangle:s(84435)};u=y(!1,u,g),C.exports=u}),2044:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20339),y=function(u,l){return g(u.x,u.y,l.x,l.y)<=u.radius+l.radius};C.exports=y}),81491:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=g.width/2,u=g.height/2,l=Math.abs(s.x-g.x-y),h=Math.abs(s.y-g.y-u),r=y+s.radius,o=u+s.radius;if(l>r||h>o)return!1;if(l<=y||h<=u)return!0;var d=l-y,a=h-u,f=d*d,v=a*a,c=s.radius*s.radius;return f+v<=c};C.exports=R}),63376:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=s(2044),u=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var o=l.x,d=l.y,a=l.radius,f=h.x,v=h.y,c=h.radius,p,m,T,E,P;if(d===v)P=(c*c-a*a-f*f+o*o)/(2*(o-f)),p=1,m=-2*v,T=f*f+P*P-2*f*P+v*v-c*c,E=m*m-4*p*T,E===0?r.push(new g(P,-m/(2*p))):E>0&&(r.push(new g(P,(-m+Math.sqrt(E))/(2*p))),r.push(new g(P,(-m-Math.sqrt(E))/(2*p))));else{var w=(o-f)/(d-v),A=(c*c-a*a-f*f+o*o-v*v+d*d)/(2*(d-v));p=w*w+1,m=2*d*w-2*A*w-2*o,T=o*o+d*d+A*A-a*a-2*d*A,E=m*m-4*p*T,E===0?(P=-m/(2*p),r.push(new g(P,A-P*w))):E>0&&(P=(-m+Math.sqrt(E))/(2*p),r.push(new g(P,A-P*w)),P=(-m-Math.sqrt(E))/(2*p),r.push(new g(P,A-P*w)))}}return r};C.exports=u}),97439:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(4042),y=s(81491),u=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var o=h.getLineA(),d=h.getLineB(),a=h.getLineC(),f=h.getLineD();g(o,l,r),g(d,l,r),g(a,l,r),g(f,l,r)}return r};C.exports=u}),4042:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=s(80462),u=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var o=l.x1,d=l.y1,a=l.x2,f=l.y2,v=h.x,c=h.y,p=h.radius,m=a-o,T=f-d,E=o-v,P=d-c,w=m*m+T*T,A=2*(m*E+T*P),b=E*E+P*P-p*p,O=A*A-4*w*b,I,D;if(O===0){var B=-A/(2*w);I=o+B*m,D=d+B*T,B>=0&&B<=1&&r.push(new g(I,D))}else if(O>0){var k=(-A-Math.sqrt(O))/(2*w);I=o+k*m,D=d+k*T,k>=0&&k<=1&&r.push(new g(I,D));var N=(-A+Math.sqrt(O))/(2*w);I=o+N*m,D=d+N*T,N>=0&&N<=1&&r.push(new g(I,D))}}return r};C.exports=u}),36100:((C,R,s)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25836),y=function(u,l,h,r){h===void 0&&(h=!1);var o=u.x1,d=u.y1,a=u.x2,f=u.y2,v=l.x1,c=l.y1,p=l.x2,m=l.y2,T=a-o,E=f-d,P=p-v,w=m-c,A=T*w-E*P;if(A===0)return null;var b,O,I;if(h){if(b=(T*(c-d)+E*(o-v))/(P*E-w*T),T!==0)O=(v+P*b-o)/T;else if(E!==0)O=(c+w*b-d)/E;else return null;if(O<0||b<0||b>1)return null;I=O}else{if(b=((v-o)*w-(c-d)*P)/A,O=((d-c)*T-(o-v)*E)/A,b<0||b>1||O<0||O>1)return null;I=b}return r===void 0&&(r=new g),r.set(o+T*I,d+E*I,I)};C.exports=y}),3073:((C,R,s)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36100),y=s(23031),u=s(25836),l=new y,h=new u,r=function(o,d,a,f){a===void 0&&(a=!1),f===void 0&&(f=new u);var v=!1;f.set(),h.set();for(var c=d[d.length-1],p=0;p<d.length;p++){var m=d[p];l.setTo(c.x,c.y,m.x,m.y),c=m,g(o,l,a,h)&&(!v||h.z<f.z)&&(f.copy(h),v=!0)}return v?f:null};C.exports=r}),56362:((C,R,s)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25836),y=s(61369),u=s(3073),l=new g,h=function(r,o,d,a){a===void 0&&(a=new y),Array.isArray(o)||(o=[o]);var f=!1;a.set(),l.set();for(var v=0;v<o.length;v++)u(r,o[v].points,d,l)&&(!f||l.z<a.z)&&(a.set(l.x,l.y,l.z,v),f=!0);return f?a:null};C.exports=h}),60646:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=s(76112),u=s(92773),l=function(h,r,o){if(o===void 0&&(o=[]),u(h,r))for(var d=r.getLineA(),a=r.getLineB(),f=r.getLineC(),v=r.getLineD(),c=[new g,new g,new g,new g],p=[y(d,h,c[0]),y(a,h,c[1]),y(f,h,c[2]),y(v,h,c[3])],m=0;m<4;m++)p[m]&&o.push(c[m]);return o};C.exports=l}),71147:((C,R,s)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(61369),y=s(56362),u=s(23031),l=new u;function h(d,a,f,v,c){var p=Math.cos(d),m=Math.sin(d);l.setTo(a,f,a+p,f+m);var T=y(l,v,!0);T&&c.push(new g(T.x,T.y,d,T.w))}function r(d,a){return d.z-a.z}var o=function(d,a,f){Array.isArray(f)||(f=[f]);for(var v=[],c=[],p=0;p<f.length;p++)for(var m=f[p].points,T=0;T<m.length;T++){var E=Math.atan2(m[T].y-a,m[T].x-d);c.indexOf(E)===-1&&(h(E,d,a,f,v),h(E-1e-5,d,a,f,v),h(E+1e-5,d,a,f,v),c.push(E))}return v.sort(r)};C.exports=o}),68389:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=s(59996),u=function(l,h,r){return r===void 0&&(r=new g),y(l,h)&&(r.x=Math.max(l.x,h.x),r.y=Math.max(l.y,h.y),r.width=Math.min(l.right,h.right)-r.x,r.height=Math.min(l.bottom,h.bottom)-r.y),r};C.exports=u}),52784:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(60646),y=s(59996),u=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var o=l.getLineA(),d=l.getLineB(),a=l.getLineC(),f=l.getLineD();g(o,h,r),g(d,h,r),g(a,h,r),g(f,h,r)}return r};C.exports=u}),26341:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(89265),y=s(60646),u=function(l,h,r){if(r===void 0&&(r=[]),g(l,h)){var o=h.getLineA(),d=h.getLineB(),a=h.getLineC();y(o,l,r),y(d,l,r),y(a,l,r)}return r};C.exports=u}),38720:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(4042),y=s(67636),u=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var o=l.getLineA(),d=l.getLineB(),a=l.getLineC();g(o,h,r),g(d,h,r),g(a,h,r)}return r};C.exports=u}),13882:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=s(2822),u=s(76112),l=function(h,r,o){if(o===void 0&&(o=[]),y(h,r))for(var d=h.getLineA(),a=h.getLineB(),f=h.getLineC(),v=[new g,new g,new g],c=[u(d,r,v[0]),u(a,r,v[1]),u(f,r,v[2])],p=0;p<3;p++)c[p]&&o.push(v[p]);return o};C.exports=l}),75636:((C,R,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(82944),y=s(13882),u=function(l,h,r){if(r===void 0&&(r=[]),g(l,h)){var o=h.getLineA(),d=h.getLineB(),a=h.getLineC();y(l,o,r),y(l,d,r),y(l,a,r)}return r};C.exports=u}),80462:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87902),y=s(2141),u=new y,l=function(h,r,o){if(o===void 0&&(o=u),g(r,h.x1,h.y1))return o.x=h.x1,o.y=h.y1,!0;if(g(r,h.x2,h.y2))return o.x=h.x2,o.y=h.y2,!0;var d=h.x2-h.x1,a=h.y2-h.y1,f=r.x-h.x1,v=r.y-h.y1,c=d*d+a*a,p=d,m=a;if(c>0){var T=(f*d+v*a)/c;p*=T,m*=T}o.x=h.x1+p,o.y=h.y1+m;var E=p*p+m*m;return E<=c&&p*d+m*a>=0&&g(r,o.x,o.y)};C.exports=l}),76112:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=s.x1,l=s.y1,h=s.x2,r=s.y2,o=g.x1,d=g.y1,a=g.x2,f=g.y2;if(u===h&&l===r||o===a&&d===f)return!1;var v=(f-d)*(h-u)-(a-o)*(r-l);if(v===0)return!1;var c=((a-o)*(l-d)-(f-d)*(u-o))/v,p=((h-u)*(l-d)-(r-l)*(u-o))/v;return c<0||c>1||p<0||p>1?!1:(y&&(y.x=u+c*(h-u),y.y=l+c*(r-l)),!0)};C.exports=R}),92773:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.x1,u=s.y1,l=s.x2,h=s.y2,r=g.x,o=g.y,d=g.right,a=g.bottom,f=0;if(y>=r&&y<=d&&u>=o&&u<=a||l>=r&&l<=d&&h>=o&&h<=a)return!0;if(y<r&&l>=r){if(f=u+(h-u)*(r-y)/(l-y),f>o&&f<=a)return!0}else if(y>d&&l<=d&&(f=u+(h-u)*(d-y)/(l-y),f>=o&&f<=a))return!0;if(u<o&&h>=o){if(f=y+(l-y)*(o-u)/(h-u),f>=r&&f<=d)return!0}else if(u>a&&h<=a&&(f=y+(l-y)*(a-u)/(h-u),f>=r&&f<=d))return!0;return!1};C.exports=R}),16204:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){y===void 0&&(y=1);var u=g.x1,l=g.y1,h=g.x2,r=g.y2,o=s.x,d=s.y,a=(h-u)*(h-u)+(r-l)*(r-l);if(a===0)return!1;var f=((o-u)*(h-u)+(d-l)*(r-l))/a;if(f<0)return Math.sqrt((u-o)*(u-o)+(l-d)*(l-d))<=y;if(f>=0&&f<=1){var v=((l-d)*(h-u)-(u-o)*(r-l))/a;return Math.abs(v)*Math.sqrt(a)<=y}else return Math.sqrt((h-o)*(h-o)+(r-d)*(r-d))<=y};C.exports=R}),14199:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(16204),y=function(u,l){if(!g(u,l))return!1;var h=Math.min(l.x1,l.x2),r=Math.max(l.x1,l.x2),o=Math.min(l.y1,l.y2),d=Math.max(l.y1,l.y2);return u.x>=h&&u.x<=r&&u.y>=o&&u.y<=d};C.exports=y}),59996:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.width<=0||s.height<=0||g.width<=0||g.height<=0?!1:!(s.right<g.x||s.bottom<g.y||s.x>g.right||s.y>g.bottom)};C.exports=R}),89265:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(76112),y=s(37303),u=s(48653),l=s(77493),h=function(r,o){if(o.left>r.right||o.right<r.left||o.top>r.bottom||o.bottom<r.top)return!1;var d=o.getLineA(),a=o.getLineB(),f=o.getLineC();if(y(r,d.x1,d.y1)||y(r,d.x2,d.y2)||y(r,a.x1,a.y1)||y(r,a.x2,a.y2)||y(r,f.x1,f.y1)||y(r,f.x2,f.y2))return!0;var v=r.getLineA(),c=r.getLineB(),p=r.getLineC(),m=r.getLineD();if(g(d,v)||g(d,c)||g(d,p)||g(d,m)||g(a,v)||g(a,c)||g(a,p)||g(a,m)||g(f,v)||g(f,c)||g(f,p)||g(f,m))return!0;var T=l(r),E=u(o,T,!0);return E.length>0};C.exports=h}),84411:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l,h){return h===void 0&&(h=0),!(g>s.right+h||y<s.left-h||u>s.bottom+h||l<s.top-h)};C.exports=R}),67636:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(80462),y=s(10690),u=function(l,h){return l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top?!1:!!(y(l,h.x,h.y)||g(l.getLineA(),h)||g(l.getLineB(),h)||g(l.getLineC(),h))};C.exports=u}),2822:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(76112),y=function(u,l){return!!(u.contains(l.x1,l.y1)||u.contains(l.x2,l.y2)||g(u.getLineA(),l)||g(u.getLineB(),l)||g(u.getLineC(),l))};C.exports=y}),82944:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(48653),y=s(71694),u=s(76112),l=function(h,r){if(h.left>r.right||h.right<r.left||h.top>r.bottom||h.bottom<r.top)return!1;var o=h.getLineA(),d=h.getLineB(),a=h.getLineC(),f=r.getLineA(),v=r.getLineB(),c=r.getLineC();if(u(o,f)||u(o,v)||u(o,c)||u(d,f)||u(d,v)||u(d,c)||u(a,f)||u(a,v)||u(a,c))return!0;var p=y(h),m=g(r,p,!0);return m.length>0||(p=y(r),m=g(h,p,!0),m.length>0)};C.exports=l}),91865:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={CircleToCircle:s(2044),CircleToRectangle:s(81491),GetCircleToCircle:s(63376),GetCircleToRectangle:s(97439),GetLineToCircle:s(4042),GetLineToLine:s(36100),GetLineToPoints:s(3073),GetLineToPolygon:s(56362),GetLineToRectangle:s(60646),GetRaysFromPointToPolygon:s(71147),GetRectangleIntersection:s(68389),GetRectangleToRectangle:s(52784),GetRectangleToTriangle:s(26341),GetTriangleToCircle:s(38720),GetTriangleToLine:s(13882),GetTriangleToTriangle:s(75636),LineToCircle:s(80462),LineToLine:s(76112),LineToRectangle:s(92773),PointToLine:s(16204),PointToLineSegment:s(14199),RectangleToRectangle:s(59996),RectangleToTriangle:s(89265),RectangleToValues:s(84411),TriangleToCircle:s(67636),TriangleToLine:s(2822),TriangleToTriangle:s(82944)}}),91938:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return Math.atan2(s.y2-s.y1,s.x2-s.x1)};C.exports=R}),84993:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){g===void 0&&(g=1),y===void 0&&(y=[]);var u=Math.round(s.x1),l=Math.round(s.y1),h=Math.round(s.x2),r=Math.round(s.y2),o=Math.abs(h-u),d=Math.abs(r-l),a=u<h?1:-1,f=l<r?1:-1,v=o-d;y.push({x:u,y:l});for(var c=1;!(u===h&&l===r);){var p=v<<1;p>-d&&(v-=d,u+=a),p<o&&(v+=o,l+=f),c%g===0&&y.push({x:u,y:l}),c++}return y};C.exports=R}),36469:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=g-(s.x1+s.x2)/2,l=y-(s.y1+s.y2)/2;return s.x1+=u,s.y1+=l,s.x2+=u,s.y2+=l,s};C.exports=R}),31116:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(23031),y=function(u){return new g(u.x1,u.y1,u.x2,u.y2)};C.exports=y}),59944:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g.setTo(s.x1,s.y1,s.x2,s.y2)};C.exports=R}),59220:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x1===g.x1&&s.y1===g.y1&&s.x2===g.x2&&s.y2===g.y2};C.exports=R}),78177:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35001),y=function(u,l,h){h===void 0&&(h=l);var r=g(u),o=u.x2-u.x1,d=u.y2-u.y1;return l&&(u.x1=u.x1-o/r*l,u.y1=u.y1-d/r*l),h&&(u.x2=u.x2+o/r*h,u.y2=u.y2+d/r*h),u};C.exports=y}),26708:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(52816),y=s(6113),u=s(2141),l=function(h,r,o,d,a){d===void 0&&(d=0),a===void 0&&(a=[]);var f=[],v=h.x1,c=h.y1,p=h.x2-v,m=h.y2-c,T=y(r,a),E,P,w=o-1;for(E=0;E<w;E++)P=T(E/w),f.push(new u(v+p*P,c+m*P));if(P=T(1),f.push(new u(v+p*P,c+m*P)),d>0){var A=f[0],b=[A];for(E=1;E<f.length-1;E++){var O=f[E];g(A,O)>=d&&(b.push(O),A=O)}var I=f[f.length-1];return g(A,I)<d&&b.pop(),b.push(I),b}else return f};C.exports=l}),32125:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){return l===void 0&&(l=new g),l.x=(u.x1+u.x2)/2,l.y=(u.y1+u.y2)/2,l};C.exports=y}),99569:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l,h){h===void 0&&(h=new g);var r=u.x1,o=u.y1,d=u.x2,a=u.y2,f=(d-r)*(d-r)+(a-o)*(a-o);if(f===0)return h;var v=((l.x-r)*(d-r)+(l.y-o)*(a-o))/f;return h.x=r+v*(d-r),h.y=o+v*(a-o),h};C.exports=y}),34638:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=s(91938),u=s(2141),l=function(h,r){r===void 0&&(r=new u);var o=y(h)-g.TAU;return r.x=Math.cos(o),r.y=Math.sin(o),r};C.exports=l}),13151:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l,h){return h===void 0&&(h=new g),h.x=u.x1+(u.x2-u.x1)*l,h.y=u.y1+(u.y2-u.y1)*l,h};C.exports=y}),15258:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35001),y=s(2141),u=function(l,h,r,o){o===void 0&&(o=[]),!h&&r>0&&(h=g(l)/r);for(var d=l.x1,a=l.y1,f=l.x2,v=l.y2,c=0;c<h;c++){var p=c/h,m=d+(f-d)*p,T=a+(v-a)*p;o.push(new y(m,T))}return o};C.exports=u}),26408:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.x1,u=s.y1,l=s.x2,h=s.y2,r=(l-y)*(l-y)+(h-u)*(h-u);if(r===0)return!1;var o=((u-g.y)*(l-y)-(y-g.x)*(h-u))/r;return Math.abs(o)*Math.sqrt(r)};C.exports=R}),98770:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return Math.abs(s.y1-s.y2)};C.exports=R}),35001:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};C.exports=R}),23031:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(13151),u=s(15258),l=s(23777),h=s(65822),r=s(26099),o=new g({initialize:function(a,f,v,c){a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),this.type=l.LINE,this.x1=a,this.y1=f,this.x2=v,this.y2=c},getPoint:function(d,a){return y(this,d,a)},getPoints:function(d,a,f){return u(this,d,a,f)},getRandomPoint:function(d){return h(this,d)},setTo:function(d,a,f,v){return d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=0),this.x1=d,this.y1=a,this.x2=f,this.y2=v,this},setFromObjects:function(d,a){return this.x1=d.x,this.y1=d.y,this.x2=a.x,this.y2=a.y,this},getPointA:function(d){return d===void 0&&(d=new r),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new r),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});C.exports=o}),64795:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=s(15994),u=s(91938),l=function(h){var r=u(h)-g.TAU;return y(r,-Math.PI,Math.PI)};C.exports=l}),52616:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=s(91938),u=function(l){return Math.cos(y(l)-g.TAU)};C.exports=u}),87231:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=s(91938),u=function(l){return Math.sin(y(l)-g.TAU)};C.exports=u}),89662:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s.x1+=g,s.y1+=y,s.x2+=g,s.y2+=y,s};C.exports=R}),71165:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return-((s.x2-s.x1)/(s.y2-s.y1))};C.exports=R}),65822:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){l===void 0&&(l=new g);var h=Math.random();return l.x=u.x1+h*(u.x2-u.x1),l.y=u.y1+h*(u.y2-u.y1),l};C.exports=y}),69777:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91938),y=s(64795),u=function(l,h){return 2*y(h)-Math.PI-g(l)};C.exports=u}),39706:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(64400),y=function(u,l){var h=(u.x1+u.x2)/2,r=(u.y1+u.y2)/2;return g(u,h,r,l)};C.exports=y}),82585:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(64400),y=function(u,l,h){return g(u,l.x,l.y,h)};C.exports=y}),64400:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=Math.cos(u),h=Math.sin(u),r=s.x1-g,o=s.y1-y;return s.x1=r*l-o*h+g,s.y1=r*h+o*l+y,r=s.x2-g,o=s.y2-y,s.x2=r*l-o*h+g,s.y2=r*h+o*l+y,s};C.exports=R}),62377:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l){return s.x1=g,s.y1=y,s.x2=g+Math.cos(u)*l,s.y2=y+Math.sin(u)*l,s};C.exports=R}),71366:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return(s.y2-s.y1)/(s.x2-s.x1)};C.exports=R}),10809:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return Math.abs(s.x1-s.x2)};C.exports=R}),2529:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(23031);g.Angle=s(91938),g.BresenhamPoints=s(84993),g.CenterOn=s(36469),g.Clone=s(31116),g.CopyFrom=s(59944),g.Equals=s(59220),g.Extend=s(78177),g.GetEasedPoints=s(26708),g.GetMidPoint=s(32125),g.GetNearestPoint=s(99569),g.GetNormal=s(34638),g.GetPoint=s(13151),g.GetPoints=s(15258),g.GetShortestDistance=s(26408),g.Height=s(98770),g.Length=s(35001),g.NormalAngle=s(64795),g.NormalX=s(52616),g.NormalY=s(87231),g.Offset=s(89662),g.PerpSlope=s(71165),g.Random=s(65822),g.ReflectAngle=s(69777),g.Rotate=s(39706),g.RotateAroundPoint=s(82585),g.RotateAroundXY=s(64400),g.SetToAngle=s(62377),g.Slope=s(71366),g.Width=s(10809),C.exports=g}),83997:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(87841),u=s(26099);function l(r,o,d,a){var f=r-d,v=o-a,c=f*f+v*v;return Math.sqrt(c)}var h=new g({initialize:function(o,d,a){this.vertex1=o,this.vertex2=d,this.vertex3=a,this.bounds=new y,this._inCenter=new u},getInCenter:function(r){r===void 0&&(r=!0);var o=this.vertex1,d=this.vertex2,a=this.vertex3,f,v,c,p,m,T;r?(f=o.x,v=o.y,c=d.x,p=d.y,m=a.x,T=a.y):(f=o.vx,v=o.vy,c=d.vx,p=d.vy,m=a.vx,T=a.vy);var E=l(m,T,c,p),P=l(f,v,m,T),w=l(c,p,f,v),A=E+P+w;return this._inCenter.set((f*E+c*P+m*w)/A,(v*E+p*P+T*w)/A)},contains:function(r,o,d){var a=this.vertex1,f=this.vertex2,v=this.vertex3,c=a.vx,p=a.vy,m=f.vx,T=f.vy,E=v.vx,P=v.vy;if(d){var w=d.a,A=d.b,b=d.c,O=d.d,I=d.e,D=d.f;c=a.vx*w+a.vy*b+I,p=a.vx*A+a.vy*O+D,m=f.vx*w+f.vy*b+I,T=f.vx*A+f.vy*O+D,E=v.vx*w+v.vy*b+I,P=v.vx*A+v.vy*O+D}var B=E-c,k=P-p,N=m-c,H=T-p,$=r-c,J=o-p,q=B*B+k*k,Y=B*N+k*H,K=B*$+k*J,V=N*N+H*H,U=N*$+H*J,Z=q*V-Y*Y,et=Z===0?0:1/Z,st=(V*K-Y*U)*et,rt=(q*U-Y*K)*et;return st>=0&&rt>=0&&st+rt<1},isCounterClockwise:function(r){var o=this.vertex1,d=this.vertex2,a=this.vertex3,f=(d.vx-o.vx)*(a.vy-o.vy)-(d.vy-o.vy)*(a.vx-o.vx);return r<=0?f>=0:f<0},load:function(r,o,d,a,f){return d=this.vertex1.load(r,o,d,a,f),d=this.vertex2.load(r,o,d,a,f),d=this.vertex3.load(r,o,d,a,f),d},transformCoordinatesLocal:function(r,o,d,a){return this.vertex1.transformCoordinatesLocal(r,o,d,a),this.vertex2.transformCoordinatesLocal(r,o,d,a),this.vertex3.transformCoordinatesLocal(r,o,d,a),this},updateBounds:function(){var r=this.vertex1,o=this.vertex2,d=this.vertex3,a=this.bounds;return a.x=Math.min(r.vx,o.vx,d.vx),a.y=Math.min(r.vy,o.vy,d.vy),a.width=Math.max(r.vx,o.vx,d.vx)-a.x,a.height=Math.max(r.vy,o.vy,d.vy)-a.y,this},isInView:function(r,o,d,a,f,v,c,p,m,T,E){this.update(a,f,v,c,p,m,T,E);var P=this.vertex1,w=this.vertex2,A=this.vertex3;if(P.ta<=0&&w.ta<=0&&A.ta<=0||o&&!this.isCounterClockwise(d))return!1;var b=this.bounds;b.x=Math.min(P.tx,w.tx,A.tx),b.y=Math.min(P.ty,w.ty,A.ty),b.width=Math.max(P.tx,w.tx,A.tx)-b.x,b.height=Math.max(P.ty,w.ty,A.ty)-b.y;var O=r.x+r.width,I=r.y+r.height;return b.width<=0||b.height<=0||r.width<=0||r.height<=0?!1:!(b.right<r.x||b.bottom<r.y||b.x>O||b.y>I)},scrollUV:function(r,o){return this.vertex1.scrollUV(r,o),this.vertex2.scrollUV(r,o),this.vertex3.scrollUV(r,o),this},scaleUV:function(r,o){return this.vertex1.scaleUV(r,o),this.vertex2.scaleUV(r,o),this.vertex3.scaleUV(r,o),this},setColor:function(r){return this.vertex1.color=r,this.vertex2.color=r,this.vertex3.color=r,this},update:function(r,o,d,a,f,v,c,p){return this.vertex1.update(o,d,a,f,v,c,p,r),this.vertex2.update(o,d,a,f,v,c,p,r),this.vertex3.update(o,d,a,f,v,c,p,r),this},translate:function(r,o){o===void 0&&(o=0);var d=this.vertex1,a=this.vertex2,f=this.vertex3;return d.x+=r,d.y+=o,a.x+=r,a.y+=o,f.x+=r,f.y+=o,this},x:{get:function(){return this.getInCenter().x},set:function(r){var o=this.getInCenter();this.translate(r-o.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var o=this.getInCenter();this.translate(0,r-o.y)}},alpha:{get:function(){var r=this.vertex1,o=this.vertex2,d=this.vertex3;return(r.alpha+o.alpha+d.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,o=this.vertex2,d=this.vertex3;return(r.vz+o.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});C.exports=h}),48803:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83997),y=s(95540),u=s(37867),l=s(25836),h=s(39318),r=new l,o=new l,d=new u,a=function(f){var v=y(f,"mesh"),c=y(f,"texture",null),p=y(f,"frame"),m=y(f,"width",1),T=y(f,"height",m),E=y(f,"widthSegments",1),P=y(f,"heightSegments",E),w=y(f,"x",0),A=y(f,"y",0),b=y(f,"z",0),O=y(f,"rotateX",0),I=y(f,"rotateY",0),D=y(f,"rotateZ",0),B=y(f,"zIsUp",!0),k=y(f,"isOrtho",v?v.dirtyCache[11]:!1),N=y(f,"colors",[16777215]),H=y(f,"alphas",[1]),$=y(f,"tile",!1),J=y(f,"flipY",!1),q=y(f,"width",null),Y={faces:[],verts:[]};r.set(w,A,b),o.set(O,I,D),d.fromRotationXYTranslation(o,r,B);var K;if(!c&&v)c=v.texture,p||(K=v.frame);else if(v&&typeof c=="string")c=v.scene.sys.textures.get(c);else if(!c)return Y;K||(K=c.get(p)),!q&&k&&c&&v&&(m=K.width/v.height,T=K.height/v.height);var V=m/2,U=T/2,Z=Math.floor(E),et=Math.floor(P),st=Z+1,rt=et+1,at=m/Z,ut=T/et,vt=[],pt=[],gt,yt,mt=0,Tt=1,At=0,Rt=1;K&&(mt=K.u0,Tt=K.u1,J?(At=K.v1,Rt=K.v0):(At=K.v0,Rt=K.v1));var Lt=Tt-mt,Ct=Rt-At;for(yt=0;yt<rt;yt++){var Et=yt*ut-U;for(gt=0;gt<st;gt++){var Mt=gt*at-V;pt.push(Mt,-Et);var zt=mt+Lt*(gt/Z),Zt=At+Ct*(yt/et);vt.push(zt,Zt)}}Array.isArray(N)||(N=[N]),Array.isArray(H)||(H=[H]);var oe=0,Qt=0;for(yt=0;yt<et;yt++)for(gt=0;gt<Z;gt++){var jt=(gt+st*yt)*2,fe=(gt+st*(yt+1))*2,Le=(gt+1+st*(yt+1))*2,$t=(gt+1+st*yt)*2,he=N[Qt],Gt=H[oe],ve=new h(pt[jt],pt[jt+1],0,vt[jt],vt[jt+1],he,Gt).transformMat4(d),Li=new h(pt[fe],pt[fe+1],0,vt[fe],vt[fe+1],he,Gt).transformMat4(d),hs=new h(pt[$t],pt[$t+1],0,vt[$t],vt[$t+1],he,Gt).transformMat4(d),Ls=new h(pt[fe],pt[fe+1],0,vt[fe],vt[fe+1],he,Gt).transformMat4(d),bs=new h(pt[Le],pt[Le+1],0,vt[Le],vt[Le+1],he,Gt).transformMat4(d),li=new h(pt[$t],pt[$t+1],0,vt[$t],vt[$t+1],he,Gt).transformMat4(d);$&&(ve.setUVs(mt,Rt),Li.setUVs(mt,At),hs.setUVs(Tt,Rt),Ls.setUVs(mt,At),bs.setUVs(Tt,At),li.setUVs(Tt,Rt)),Qt++,Qt===N.length&&(Qt=0),oe++,oe===H.length&&(oe=0),Y.verts.push(ve,Li,hs,Ls,bs,li),Y.faces.push(new g(ve,Li,hs),new g(Ls,bs,li))}return v&&(v.faces=v.faces.concat(Y.faces),v.vertices=v.vertices.concat(Y.verts)),Y};C.exports=a}),34684:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83997),y=s(37867),u=s(25836),l=s(39318),h=new u,r=new u,o=new y,d=function(a,f,v,c,p,m,T,E,P,w){v===void 0&&(v=1),c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=0),T===void 0&&(T=0),E===void 0&&(E=0),P===void 0&&(P=0),w===void 0&&(w=!0);var A={faces:[],verts:[]},b=a.materials;h.set(c,p,m),r.set(T,E,P),o.fromRotationXYTranslation(r,h,w);for(var O=0;O<a.models.length;O++)for(var I=a.models[O],D=I.vertices,B=I.textureCoords,k=I.faces,N=0;N<k.length;N++){var H=k[N],$=H.vertices[0],J=H.vertices[1],q=H.vertices[2],Y=D[$.vertexIndex],K=D[J.vertexIndex],V=D[q.vertexIndex],U=$.textureCoordsIndex,Z=J.textureCoordsIndex,et=q.textureCoordsIndex,st=U===-1?{u:0,v:1}:B[U],rt=Z===-1?{u:0,v:0}:B[Z],at=et===-1?{u:1,v:1}:B[et],ut=16777215;H.material!==""&&b[H.material]&&(ut=b[H.material]);var vt=new l(Y.x*v,Y.y*v,Y.z*v,st.u,st.v,ut).transformMat4(o),pt=new l(K.x*v,K.y*v,K.z*v,rt.u,rt.v,ut).transformMat4(o),gt=new l(V.x*v,V.y*v,V.z*v,at.u,at.v,ut).transformMat4(o);A.verts.push(vt,pt,gt),A.faces.push(new g(vt,pt,gt))}return f&&(f.faces=f.faces.concat(A.faces),f.vertices=f.vertices.concat(A.verts)),A};C.exports=d}),92515:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83997),y=s(39318),u=function(l,h,r,o,d,a,f,v){if(o===void 0&&(o=!1),a===void 0&&(a=16777215),f===void 0&&(f=1),v===void 0&&(v=!1),l.length!==h.length&&!o){console.warn("GenerateVerts: vertices and uvs count not equal");return}var c={faces:[],vertices:[]},p,m,T,E,P,w,A,b,O,I,D,B=o?3:2,k=Array.isArray(a),N=Array.isArray(f);if(Array.isArray(r)&&r.length>0)for(p=0;p<r.length;p++){var H=r[p],$=r[p]*2,J=r[p]*B;m=l[J],T=l[J+1],E=o?l[J+2]:0,P=h[$],w=h[$+1],v&&(w=1-w),A=k?a[H]:a,b=N?f[H]:f,O=0,I=0,D=0,d&&(O=d[J],I=d[J+1],D=o?d[J+2]:0),c.vertices.push(new y(m,T,E,P,w,A,b,O,I,D))}else{var q=0,Y=0;for(p=0;p<l.length;p+=B)m=l[p],T=l[p+1],E=o?l[p+2]:0,P=h[q],w=h[q+1],A=k?a[Y]:a,b=N?f[Y]:f,O=0,I=0,D=0,d&&(O=d[p],I=d[p+1],D=o?d[p+2]:0),c.vertices.push(new y(m,T,E,P,w,A,b,O,I,D)),q+=2,Y++}for(p=0;p<c.vertices.length;p+=3){var K=c.vertices[p],V=c.vertices[p+1],U=c.vertices[p+2];c.faces.push(new g(K,V,U))}return c};C.exports=u}),85048:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=!0,s="untitled",g="",y="";function u(m){var T=m.indexOf("#");return T>-1?m.substring(0,T):m}function l(m){return m.models.length===0&&m.models.push({faces:[],name:s,textureCoords:[],vertexNormals:[],vertices:[]}),g="",m.models[m.models.length-1]}function h(m,T){var E=m.length>=2?m[1]:s;T.models.push({faces:[],name:E,textureCoords:[],vertexNormals:[],vertices:[]}),g=""}function r(m){m.length===2&&(g=m[1])}function o(m,T){var E=m.length,P=E>=2?parseFloat(m[1]):0,w=E>=3?parseFloat(m[2]):0,A=E>=4?parseFloat(m[3]):0;l(T).vertices.push({x:P,y:w,z:A})}function d(m,T){var E=m.length,P=E>=2?parseFloat(m[1]):0,w=E>=3?parseFloat(m[2]):0,A=E>=4?parseFloat(m[3]):0;isNaN(P)&&(P=0),isNaN(w)&&(w=0),isNaN(A)&&(A=0),R&&(w=1-w),l(T).textureCoords.push({u:P,v:w,w:A})}function a(m,T){var E=m.length,P=E>=2?parseFloat(m[1]):0,w=E>=3?parseFloat(m[2]):0,A=E>=4?parseFloat(m[3]):0;l(T).vertexNormals.push({x:P,y:w,z:A})}function f(m,T){var E=m.length-1;if(!(E<3)){for(var P={group:g,material:y,vertices:[]},w=0;w<E;w++){var A=m[w+1],b=A.split("/"),O=b.length;if(!(O<1||O>3)){var I=0,D=0,B=0;I=parseInt(b[0],10),O>1&&b[1]!==""&&(D=parseInt(b[1],10)),O>2&&(B=parseInt(b[2],10)),I!==0&&(I<0&&(I=l(T).vertices.length+1+I),D-=1,I-=1,B-=1,P.vertices.push({textureCoordsIndex:D,vertexIndex:I,vertexNormalIndex:B}))}}l(T).faces.push(P)}}function v(m,T){m.length>=2&&T.materialLibraries.push(m[1])}function c(m){m.length>=2&&(y=m[1])}var p=function(m,T){T===void 0&&(T=!0),R=T;var E={materials:{},materialLibraries:[],models:[]};g="",y="";for(var P=m.split(`
`),w=0;w<P.length;w++){var A=u(P[w]),b=A.replace(/\s\s+/g," ").trim().split(" ");switch(b[0].toLowerCase()){case"o":h(b,E);break;case"g":r(b);break;case"v":o(b,E);break;case"vt":d(b,E);break;case"vn":a(b,E);break;case"f":f(b,E);break;case"mtllib":v(b,E);break;case"usemtl":c(b);break}}return E};C.exports=p}),61485:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37589),y=function(u){for(var l={},h=u.split(`
`),r="",o=0;o<h.length;o++){var d=h[o].trim();if(!(d.indexOf("#")===0||d==="")){var a=d.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":{r=a[1];break}case"kd":{var f=Math.floor(a[1]*255),v=a.length>=2?Math.floor(a[2]*255):f,c=a.length>=3?Math.floor(a[3]*255):f;l[r]=g(f,v,c);break}}}}return l};C.exports=y}),92570:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l,h;if(y===void 0&&u===void 0){var r=s.getInCenter();l=r.x,h=r.y}var o=Math.cos(g),d=Math.sin(g),a=s.vertex1,f=s.vertex2,v=s.vertex3,c=a.x-l,p=a.y-h;a.set(c*o-p*d+l,c*d+p*o+h),c=f.x-l,p=f.y-h,f.set(c*o-p*d+l,c*d+p*o+h),c=v.x-l,p=v.y-h,v.set(c*o-p*d+l,c*d+p*o+h)};C.exports=R}),39318:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(70554),u=s(25836),l=new g({Extends:u,initialize:function(r,o,d,a,f,v,c,p,m,T){v===void 0&&(v=16777215),c===void 0&&(c=1),p===void 0&&(p=0),m===void 0&&(m=0),T===void 0&&(T=0),u.call(this,r,o,d),this.vx=0,this.vy=0,this.vz=0,this.nx=p,this.ny=m,this.nz=T,this.u=a,this.v=f,this.color=v,this.alpha=c,this.tx=0,this.ty=0,this.ta=0,this.tu=a,this.tv=f},setUVs:function(h,r){return this.u=h,this.v=r,this.tu=h,this.tv=r,this},scrollUV:function(h,r){return this.tu+=h,this.tv+=r,this},scaleUV:function(h,r){return this.tu=this.u*h,this.tv=this.v*r,this},transformCoordinatesLocal:function(h,r,o,d){var a=this.x,f=this.y,v=this.z,c=h.val,p=a*c[0]+f*c[4]+v*c[8]+c[12],m=a*c[1]+f*c[5]+v*c[9]+c[13],T=a*c[2]+f*c[6]+v*c[10]+c[14],E=a*c[3]+f*c[7]+v*c[11]+c[15];this.vx=p/E*r,this.vy=-(m/E)*o,d<=0?this.vz=T/E:this.vz=-(T/E)},resize:function(h,r,o,d,a,f){return this.x=h,this.y=r,this.vx=this.x*o,this.vy=-this.y*d,this.vz=0,a<.5?this.vx+=o*(.5-a):a>.5&&(this.vx-=o*(a-.5)),f<.5?this.vy+=d*(.5-f):f>.5&&(this.vy-=d*(f-.5)),this},update:function(h,r,o,d,a,f,v,c){var p=this.vx*h+this.vy*o+a,m=this.vx*r+this.vy*d+f;return v&&(p=Math.round(p),m=Math.round(m)),this.tx=p,this.ty=m,this.ta=this.alpha*c,this},load:function(h,r,o,d,a){return h[++o]=this.tx,h[++o]=this.ty,h[++o]=this.tu,h[++o]=this.tv,h[++o]=d,h[++o]=a,r[++o]=y.getTintAppendFloatAlpha(this.color,this.ta),o}});C.exports=l}),73090:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={Face:s(83997),GenerateGridVerts:s(48803),GenerateObjVerts:s(34684),GenerateVerts:s(92515),ParseObj:s(85048),ParseObjMaterial:s(61485),RotateFace:s(92570),Vertex:s(39318)};C.exports=g}),96550:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.setTo(Math.ceil(s.x),Math.ceil(s.y))};C.exports=R}),99706:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u){return new g(u.x,u.y)};C.exports=y}),68010:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g.setTo(s.x,s.y)};C.exports=R}),27814:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x===g.x&&s.y===g.y};C.exports=R}),73565:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.setTo(Math.floor(s.x),Math.floor(s.y))};C.exports=R}),87555:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){if(l===void 0&&(l=new g),!Array.isArray(u))throw new Error("GetCentroid points argument must be an array");var h=u.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)l.x=u[0].x,l.y=u[0].y;else{for(var r=0;r<h;r++)l.x+=u[r].x,l.y+=u[r].y;l.x/=h,l.y/=h}return l};C.exports=y}),28793:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)};C.exports=R}),44405:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.x*s.x+s.y*s.y};C.exports=R}),20873:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=function(u,l){l===void 0&&(l=new g);for(var h=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,a=0;a<u.length;a++){var f=u[a];f.x>h&&(h=f.x),f.x<r&&(r=f.x),f.y>o&&(o=f.y),f.y<d&&(d=f.y)}return l.x=r,l.y=d,l.width=h-r,l.height=o-d,l};C.exports=y}),26152:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l,h,r){return h===void 0&&(h=0),r===void 0&&(r=new g),r.x=u.x+(l.x-u.x)*h,r.y=u.y+(l.y-u.y)*h,r};C.exports=y}),55767:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.setTo(s.y,s.x)};C.exports=R}),79432:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){return l===void 0&&(l=new g),l.setTo(-u.x,-u.y)};C.exports=y}),2141:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23777),u=new g({initialize:function(h,r){h===void 0&&(h=0),r===void 0&&(r=h),this.type=y.POINT,this.x=h,this.y=r},setTo:function(l,h){return l===void 0&&(l=0),h===void 0&&(h=l),this.x=l,this.y=h,this}});C.exports=u}),72930:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=s(44405),u=function(l,h,r){r===void 0&&(r=new g);var o=l.x*h.x+l.y*h.y,d=o/y(h);return d!==0&&(r.x=d*h.x,r.y=d*h.y),r};C.exports=u}),62880:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l,h){h===void 0&&(h=new g);var r=u.x*l.x+u.y*l.y;return r!==0&&(h.x=r*l.x,h.y=r*l.y),h};C.exports=y}),15093:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(28793),y=function(u,l){if(u.x!==0||u.y!==0){var h=g(u);u.x/=h,u.y/=h}return u.x*=l,u.y*=l,u};C.exports=y}),43711:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141);g.Ceil=s(96550),g.Clone=s(99706),g.CopyFrom=s(68010),g.Equals=s(27814),g.Floor=s(73565),g.GetCentroid=s(87555),g.GetMagnitude=s(28793),g.GetMagnitudeSq=s(44405),g.GetRectangleFromPoints=s(20873),g.Interpolate=s(26152),g.Invert=s(55767),g.Negative=s(79432),g.Project=s(72930),g.ProjectUnit=s(62880),g.SetMagnitude=s(15093),C.exports=g}),12306:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25717),y=function(u){return new g(u.points)};C.exports=y}),63814:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){for(var u=!1,l=-1,h=s.points.length-1;++l<s.points.length;h=l){var r=s.points[l].x,o=s.points[l].y,d=s.points[h].x,a=s.points[h].y;(o<=y&&y<a||a<=y&&y<o)&&g<(d-r)*(y-o)/(a-o)+r&&(u=!u)}return u};C.exports=R}),99338:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(63814),y=function(u,l){return g(u,l.x,l.y)};C.exports=y}),94811:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function R(Y,K,V){V=V||2;var U=K&&K.length,Z=U?K[0]*V:Y.length,et=s(Y,0,Z,V,!0),st=[];if(!et||et.next===et.prev)return st;var rt,at,ut,vt,pt,gt,yt;if(U&&(et=o(Y,K,et,V)),Y.length>80*V){rt=ut=Y[0],at=vt=Y[1];for(var mt=V;mt<Z;mt+=V)pt=Y[mt],gt=Y[mt+1],pt<rt&&(rt=pt),gt<at&&(at=gt),pt>ut&&(ut=pt),gt>vt&&(vt=gt);yt=Math.max(ut-rt,vt-at),yt=yt!==0?32767/yt:0}return y(et,st,V,rt,at,yt,0),st}function s(Y,K,V,U,Z){var et,st;if(Z===q(Y,K,V,U)>0)for(et=K;et<V;et+=U)st=H(et,Y[et],Y[et+1],st);else for(et=V-U;et>=K;et-=U)st=H(et,Y[et],Y[et+1],st);return st&&A(st,st.next)&&($(st),st=st.next),st}function g(Y,K){if(!Y)return Y;K||(K=Y);var V=Y,U;do if(U=!1,!V.steiner&&(A(V,V.next)||w(V.prev,V,V.next)===0)){if($(V),V=K=V.prev,V===V.next)break;U=!0}else V=V.next;while(U||V!==K);return K}function y(Y,K,V,U,Z,et,st){if(Y){!st&&et&&c(Y,U,Z,et);for(var rt=Y,at,ut;Y.prev!==Y.next;){if(at=Y.prev,ut=Y.next,et?l(Y,U,Z,et):u(Y)){K.push(at.i/V|0),K.push(Y.i/V|0),K.push(ut.i/V|0),$(Y),Y=ut.next,rt=ut.next;continue}if(Y=ut,Y===rt){st?st===1?(Y=h(g(Y),K,V),y(Y,K,V,U,Z,et,2)):st===2&&r(Y,K,V,U,Z,et):y(g(Y),K,V,U,Z,et,1);break}}}}function u(Y){var K=Y.prev,V=Y,U=Y.next;if(w(K,V,U)>=0)return!1;for(var Z=K.x,et=V.x,st=U.x,rt=K.y,at=V.y,ut=U.y,vt=Z<et?Z<st?Z:st:et<st?et:st,pt=rt<at?rt<ut?rt:ut:at<ut?at:ut,gt=Z>et?Z>st?Z:st:et>st?et:st,yt=rt>at?rt>ut?rt:ut:at>ut?at:ut,mt=U.next;mt!==K;){if(mt.x>=vt&&mt.x<=gt&&mt.y>=pt&&mt.y<=yt&&E(Z,rt,et,at,st,ut,mt.x,mt.y)&&w(mt.prev,mt,mt.next)>=0)return!1;mt=mt.next}return!0}function l(Y,K,V,U){var Z=Y.prev,et=Y,st=Y.next;if(w(Z,et,st)>=0)return!1;for(var rt=Z.x,at=et.x,ut=st.x,vt=Z.y,pt=et.y,gt=st.y,yt=rt<at?rt<ut?rt:ut:at<ut?at:ut,mt=vt<pt?vt<gt?vt:gt:pt<gt?pt:gt,Tt=rt>at?rt>ut?rt:ut:at>ut?at:ut,At=vt>pt?vt>gt?vt:gt:pt>gt?pt:gt,Rt=m(yt,mt,K,V,U),Lt=m(Tt,At,K,V,U),Ct=Y.prevZ,Et=Y.nextZ;Ct&&Ct.z>=Rt&&Et&&Et.z<=Lt;){if(Ct.x>=yt&&Ct.x<=Tt&&Ct.y>=mt&&Ct.y<=At&&Ct!==Z&&Ct!==st&&E(rt,vt,at,pt,ut,gt,Ct.x,Ct.y)&&w(Ct.prev,Ct,Ct.next)>=0||(Ct=Ct.prevZ,Et.x>=yt&&Et.x<=Tt&&Et.y>=mt&&Et.y<=At&&Et!==Z&&Et!==st&&E(rt,vt,at,pt,ut,gt,Et.x,Et.y)&&w(Et.prev,Et,Et.next)>=0))return!1;Et=Et.nextZ}for(;Ct&&Ct.z>=Rt;){if(Ct.x>=yt&&Ct.x<=Tt&&Ct.y>=mt&&Ct.y<=At&&Ct!==Z&&Ct!==st&&E(rt,vt,at,pt,ut,gt,Ct.x,Ct.y)&&w(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.prevZ}for(;Et&&Et.z<=Lt;){if(Et.x>=yt&&Et.x<=Tt&&Et.y>=mt&&Et.y<=At&&Et!==Z&&Et!==st&&E(rt,vt,at,pt,ut,gt,Et.x,Et.y)&&w(Et.prev,Et,Et.next)>=0)return!1;Et=Et.nextZ}return!0}function h(Y,K,V){var U=Y;do{var Z=U.prev,et=U.next.next;!A(Z,et)&&b(Z,U,U.next,et)&&B(Z,et)&&B(et,Z)&&(K.push(Z.i/V|0),K.push(U.i/V|0),K.push(et.i/V|0),$(U),$(U.next),U=Y=et),U=U.next}while(U!==Y);return g(U)}function r(Y,K,V,U,Z,et){var st=Y;do{for(var rt=st.next.next;rt!==st.prev;){if(st.i!==rt.i&&P(st,rt)){var at=N(st,rt);st=g(st,st.next),at=g(at,at.next),y(st,K,V,U,Z,et,0),y(at,K,V,U,Z,et,0);return}rt=rt.next}st=st.next}while(st!==Y)}function o(Y,K,V,U){var Z=[],et,st,rt,at,ut;for(et=0,st=K.length;et<st;et++)rt=K[et]*U,at=et<st-1?K[et+1]*U:Y.length,ut=s(Y,rt,at,U,!1),ut===ut.next&&(ut.steiner=!0),Z.push(T(ut));for(Z.sort(d),et=0;et<Z.length;et++)V=a(Z[et],V);return V}function d(Y,K){return Y.x-K.x}function a(Y,K){var V=f(Y,K);if(!V)return K;var U=N(V,Y);return g(U,U.next),g(V,V.next)}function f(Y,K){var V=K,U=Y.x,Z=Y.y,et=-1/0,st;do{if(Z<=V.y&&Z>=V.next.y&&V.next.y!==V.y){var rt=V.x+(Z-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(rt<=U&&rt>et&&(et=rt,st=V.x<V.next.x?V:V.next,rt===U))return st}V=V.next}while(V!==K);if(!st)return null;var at=st,ut=st.x,vt=st.y,pt=1/0,gt;V=st;do U>=V.x&&V.x>=ut&&U!==V.x&&E(Z<vt?U:et,Z,ut,vt,Z<vt?et:U,Z,V.x,V.y)&&(gt=Math.abs(Z-V.y)/(U-V.x),B(V,Y)&&(gt<pt||gt===pt&&(V.x>st.x||V.x===st.x&&v(st,V)))&&(st=V,pt=gt)),V=V.next;while(V!==at);return st}function v(Y,K){return w(Y.prev,Y,K.prev)<0&&w(K.next,Y,Y.next)<0}function c(Y,K,V,U){var Z=Y;do Z.z===0&&(Z.z=m(Z.x,Z.y,K,V,U)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==Y);Z.prevZ.nextZ=null,Z.prevZ=null,p(Z)}function p(Y){var K,V,U,Z,et,st,rt,at,ut=1;do{for(V=Y,Y=null,et=null,st=0;V;){for(st++,U=V,rt=0,K=0;K<ut&&(rt++,U=U.nextZ,!!U);K++);for(at=ut;rt>0||at>0&&U;)rt!==0&&(at===0||!U||V.z<=U.z)?(Z=V,V=V.nextZ,rt--):(Z=U,U=U.nextZ,at--),et?et.nextZ=Z:Y=Z,Z.prevZ=et,et=Z;V=U}et.nextZ=null,ut*=2}while(st>1);return Y}function m(Y,K,V,U,Z){return Y=(Y-V)*Z|0,K=(K-U)*Z|0,Y=(Y|Y<<8)&16711935,Y=(Y|Y<<4)&252645135,Y=(Y|Y<<2)&858993459,Y=(Y|Y<<1)&1431655765,K=(K|K<<8)&16711935,K=(K|K<<4)&252645135,K=(K|K<<2)&858993459,K=(K|K<<1)&1431655765,Y|K<<1}function T(Y){var K=Y,V=Y;do(K.x<V.x||K.x===V.x&&K.y<V.y)&&(V=K),K=K.next;while(K!==Y);return V}function E(Y,K,V,U,Z,et,st,rt){return(Z-st)*(K-rt)>=(Y-st)*(et-rt)&&(Y-st)*(U-rt)>=(V-st)*(K-rt)&&(V-st)*(et-rt)>=(Z-st)*(U-rt)}function P(Y,K){return Y.next.i!==K.i&&Y.prev.i!==K.i&&!D(Y,K)&&(B(Y,K)&&B(K,Y)&&k(Y,K)&&(w(Y.prev,Y,K.prev)||w(Y,K.prev,K))||A(Y,K)&&w(Y.prev,Y,Y.next)>0&&w(K.prev,K,K.next)>0)}function w(Y,K,V){return(K.y-Y.y)*(V.x-K.x)-(K.x-Y.x)*(V.y-K.y)}function A(Y,K){return Y.x===K.x&&Y.y===K.y}function b(Y,K,V,U){var Z=I(w(Y,K,V)),et=I(w(Y,K,U)),st=I(w(V,U,Y)),rt=I(w(V,U,K));return!!(Z!==et&&st!==rt||Z===0&&O(Y,V,K)||et===0&&O(Y,U,K)||st===0&&O(V,Y,U)||rt===0&&O(V,K,U))}function O(Y,K,V){return K.x<=Math.max(Y.x,V.x)&&K.x>=Math.min(Y.x,V.x)&&K.y<=Math.max(Y.y,V.y)&&K.y>=Math.min(Y.y,V.y)}function I(Y){return Y>0?1:Y<0?-1:0}function D(Y,K){var V=Y;do{if(V.i!==Y.i&&V.next.i!==Y.i&&V.i!==K.i&&V.next.i!==K.i&&b(V,V.next,Y,K))return!0;V=V.next}while(V!==Y);return!1}function B(Y,K){return w(Y.prev,Y,Y.next)<0?w(Y,K,Y.next)>=0&&w(Y,Y.prev,K)>=0:w(Y,K,Y.prev)<0||w(Y,Y.next,K)<0}function k(Y,K){var V=Y,U=!1,Z=(Y.x+K.x)/2,et=(Y.y+K.y)/2;do V.y>et!=V.next.y>et&&V.next.y!==V.y&&Z<(V.next.x-V.x)*(et-V.y)/(V.next.y-V.y)+V.x&&(U=!U),V=V.next;while(V!==Y);return U}function N(Y,K){var V=new J(Y.i,Y.x,Y.y),U=new J(K.i,K.x,K.y),Z=Y.next,et=K.prev;return Y.next=K,K.prev=Y,V.next=Z,Z.prev=V,U.next=V,V.prev=U,et.next=U,U.prev=et,U}function H(Y,K,V,U){var Z=new J(Y,K,V);return U?(Z.next=U.next,Z.prev=U,U.next.prev=Z,U.next=Z):(Z.prev=Z,Z.next=Z),Z}function $(Y){Y.next.prev=Y.prev,Y.prev.next=Y.next,Y.prevZ&&(Y.prevZ.nextZ=Y.nextZ),Y.nextZ&&(Y.nextZ.prevZ=Y.prevZ)}function J(Y,K,V){this.i=Y,this.x=K,this.y=V,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}R.deviation=function(Y,K,V,U){var Z=K&&K.length,et=Z?K[0]*V:Y.length,st=Math.abs(q(Y,0,et,V));if(Z)for(var rt=0,at=K.length;rt<at;rt++){var ut=K[rt]*V,vt=rt<at-1?K[rt+1]*V:Y.length;st-=Math.abs(q(Y,ut,vt,V))}var pt=0;for(rt=0;rt<U.length;rt+=3){var gt=U[rt]*V,yt=U[rt+1]*V,mt=U[rt+2]*V;pt+=Math.abs((Y[gt]-Y[mt])*(Y[yt+1]-Y[gt+1])-(Y[gt]-Y[yt])*(Y[mt+1]-Y[gt+1]))}return st===0&&pt===0?0:Math.abs((pt-st)/st)};function q(Y,K,V,U){for(var Z=0,et=K,st=V-U;et<V;et+=U)Z+=(Y[st]-Y[et])*(Y[et+1]+Y[st+1]),st=et;return Z}R.flatten=function(Y){for(var K=Y[0][0].length,V={vertices:[],holes:[],dimensions:K},U=0,Z=0;Z<Y.length;Z++){for(var et=0;et<Y[Z].length;et++)for(var st=0;st<K;st++)V.vertices.push(Y[Z][et][st]);Z>0&&(U+=Y[Z-1].length,V.holes.push(U))}return V},C.exports=R}),13829:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=function(u,l){l===void 0&&(l=new g);for(var h=1/0,r=1/0,o=-h,d=-r,a,f=0;f<u.points.length;f++)a=u.points[f],h=Math.min(h,a.x),r=Math.min(r,a.y),o=Math.max(o,a.x),d=Math.max(d,a.y);return l.x=h,l.y=r,l.width=o-h,l.height=d-r,l};C.exports=y}),26173:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=[]);for(var y=0;y<s.points.length;y++)g.push(s.points[y].x),g.push(s.points[y].y);return g};C.exports=R}),9564:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35001),y=s(23031),u=s(30052),l=function(h,r,o,d){d===void 0&&(d=[]);var a=h.points,f=u(h);!r&&o>0&&(r=f/o);for(var v=0;v<r;v++)for(var c=f*(v/r),p=0,m=0;m<a.length;m++){var T=a[m],E=a[(m+1)%a.length],P=new y(T.x,T.y,E.x,E.y),w=g(P);if(c<p||c>p+w){p+=w;continue}var A=P.getPoint((c-p)/w);d.push(A);break}return d};C.exports=l}),30052:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35001),y=s(23031),u=function(l){for(var h=l.points,r=0,o=0;o<h.length;o++){var d=h[o],a=h[(o+1)%h.length],f=new y(d.x,d.y,a.x,a.y);r+=g(f)}return r};C.exports=u}),25717:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(63814),u=s(9564),l=s(23777),h=new g({initialize:function(o){this.type=l.POLYGON,this.area=0,this.points=[],o&&this.setTo(o)},contains:function(r,o){return y(this,r,o)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var o,d=0;d<r.length;d++)o={x:0,y:0},typeof r[d]=="number"||typeof r[d]=="string"?(o.x=parseFloat(r[d]),o.y=parseFloat(r[d+1]),d++):Array.isArray(r[d])?(o.x=r[d][0],o.y=r[d][1]):(o.x=r[d].x,o.y=r[d].y),this.points.push(o);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,o,d,a=0;a<this.points.length-1;a++)o=this.points[a],d=this.points[a+1],r+=(d.x-o.x)*(o.y+d.y);return o=this.points[0],d=this.points[this.points.length-1],r+=(o.x-d.x)*(d.y+o.y),this.area=-r*.5,this.area},getPoints:function(r,o,d){return u(this,r,o,d)}});C.exports=h}),8133:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.points.reverse(),s};C.exports=R}),29524:(C=>{function R(h,r){var o=h.x-r.x,d=h.y-r.y;return o*o+d*d}function s(h,r,o){var d=r.x,a=r.y,f=o.x-d,v=o.y-a;if(f!==0||v!==0){var c=((h.x-d)*f+(h.y-a)*v)/(f*f+v*v);c>1?(d=o.x,a=o.y):c>0&&(d+=f*c,a+=v*c)}return f=h.x-d,v=h.y-a,f*f+v*v}function g(h,r){for(var o=h[0],d=[o],a,f=1,v=h.length;f<v;f++)a=h[f],R(a,o)>r&&(d.push(a),o=a);return o!==a&&d.push(a),d}function y(h,r,o,d,a){for(var f=d,v,c=r+1;c<o;c++){var p=s(h[c],h[r],h[o]);p>f&&(v=c,f=p)}f>d&&(v-r>1&&y(h,r,v,d,a),a.push(h[v]),o-v>1&&y(h,v,o,d,a))}function u(h,r){var o=h.length-1,d=[h[0]];return y(h,0,o,r,d),d.push(h[o]),d}var l=function(h,r,o){r===void 0&&(r=1),o===void 0&&(o=!1);var d=h.points;if(d.length>2){var a=r*r;o||(d=g(d,a)),h.setTo(u(d,a))}return h};C.exports=l}),5469:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(g,y){return g[0]=y[0],g[1]=y[1],g},s=function(g){var y,u=[],l=g.points;for(y=0;y<l.length;y++)u.push([l[y].x,l[y].y]);var h=[];for(u.length>0&&h.push(R([0,0],u[0])),y=0;y<u.length-1;y++){var r=u[y],o=u[y+1],d=r[0],a=r[1],f=o[0],v=o[1];h.push([.85*d+.15*f,.85*a+.15*v]),h.push([.15*d+.85*f,.15*a+.85*v])}return u.length>1&&h.push(R([0,0],u[u.length-1])),g.setTo(h)};C.exports=s}),24709:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){for(var u=s.points,l=0;l<u.length;l++)u[l].x+=g,u[l].y+=y;return s};C.exports=R}),58423:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25717);g.Clone=s(12306),g.Contains=s(63814),g.ContainsPoint=s(99338),g.Earcut=s(94811),g.GetAABB=s(13829),g.GetNumberArray=s(26173),g.GetPoints=s(9564),g.Perimeter=s(30052),g.Reverse=s(8133),g.Simplify=s(29524),g.Smooth=s(5469),g.Translate=s(24709),C.exports=g}),62224:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.width*s.height};C.exports=R}),98615:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s};C.exports=R}),31688:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s.width=Math.ceil(s.width),s.height=Math.ceil(s.height),s};C.exports=R}),67502:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s.x=g-s.width/2,s.y=y-s.height/2,s};C.exports=R}),65085:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=function(u){return new g(u.x,u.y,u.width,u.height)};C.exports=y}),37303:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s.width<=0||s.height<=0?!1:s.x<=g&&s.x+s.width>=g&&s.y<=y&&s.y+s.height>=y};C.exports=R}),96553:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37303),y=function(u,l){return g(u,l.x,l.y)};C.exports=y}),70273:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g.width*g.height>s.width*s.height?!1:g.x>s.x&&g.x<s.right&&g.right>s.x&&g.right<s.right&&g.y>s.y&&g.y<s.bottom&&g.bottom>s.y&&g.bottom<s.bottom};C.exports=R}),43459:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g.setTo(s.x,s.y,s.width,s.height)};C.exports=R}),77493:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g=[]),g.push({x:s.x,y:s.y}),g.push({x:s.right,y:s.y}),g.push({x:s.right,y:s.bottom}),g.push({x:s.x,y:s.bottom}),g};C.exports=R}),9219:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x===g.x&&s.y===g.y&&s.width===g.width&&s.height===g.height};C.exports=R}),53751:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(8249),y=function(u,l){var h=g(u);return h<g(l)?u.setSize(l.height*h,l.height):u.setSize(l.width,l.width/h),u.setPosition(l.centerX-u.width/2,l.centerY-u.height/2)};C.exports=y}),16088:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(8249),y=function(u,l){var h=g(u);return h>g(l)?u.setSize(l.height*h,l.height):u.setSize(l.width,l.width/h),u.setPosition(l.centerX-u.width/2,l.centerY-u.height/2)};C.exports=y}),80774:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s};C.exports=R}),83859:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s.width=Math.floor(s.width),s.height=Math.floor(s.height),s};C.exports=R}),19217:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=s(36383),u=function(l,h){if(h===void 0&&(h=new g),l.length===0)return h;for(var r=Number.MAX_VALUE,o=Number.MAX_VALUE,d=y.MIN_SAFE_INTEGER,a=y.MIN_SAFE_INTEGER,f,v,c,p=0;p<l.length;p++)f=l[p],Array.isArray(f)?(v=f[0],c=f[1]):(v=f.x,c=f.y),r=Math.min(r,v),o=Math.min(o,c),d=Math.max(d,v),a=Math.max(a,c);return h.x=r,h.y=o,h.width=d-r,h.height=a-o,h};C.exports=u}),9477:((C,R,s)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=function(u,l,h,r,o){return o===void 0&&(o=new g),o.setTo(Math.min(u,h),Math.min(l,r),Math.abs(u-h),Math.abs(l-r))};C.exports=y}),8249:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.height===0?NaN:s.width/s.height};C.exports=R}),27165:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){return l===void 0&&(l=new g),l.x=u.centerX,l.y=u.centerY,l};C.exports=y}),20812:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(13019),y=s(2141),u=function(l,h,r){if(r===void 0&&(r=new y),h<=0||h>=1)return r.x=l.x,r.y=l.y,r;var o=g(l)*h;return h>.5?(o-=l.width+l.height,o<=l.width?(r.x=l.right-o,r.y=l.bottom):(r.x=l.x,r.y=l.bottom-(o-l.width))):o<=l.width?(r.x=l.x+o,r.y=l.y):(r.x=l.right,r.y=l.y+(o-l.width)),r};C.exports=u}),34819:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20812),y=s(13019),u=function(l,h,r,o){o===void 0&&(o=[]),!h&&r>0&&(h=y(l)/r);for(var d=0;d<h;d++){var a=d/h;o.push(g(l,a))}return o};C.exports=u}),51313:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){return l===void 0&&(l=new g),l.x=u.width,l.y=u.height,l};C.exports=y}),86091:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(67502),y=function(u,l,h){var r=u.centerX,o=u.centerY;return u.setSize(u.width+l*2,u.height+h*2),g(u,r,o)};C.exports=y}),53951:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=s(59996),u=function(l,h,r){return r===void 0&&(r=new g),y(l,h)?(r.x=Math.max(l.x,h.x),r.y=Math.max(l.y,h.y),r.width=Math.min(l.right,h.right)-r.x,r.height=Math.min(l.bottom,h.bottom)-r.y):r.setEmpty(),r};C.exports=u}),14649:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(13019),y=s(2141),u=function(l,h,r,o){if(o===void 0&&(o=[]),!h&&!r)return o;h?r=Math.round(g(l)/h):h=g(l)/r;for(var d=l.x,a=l.y,f=0,v=0;v<r;v++)switch(o.push(new y(d,a)),f){case 0:d+=h,d>=l.right&&(f=1,a+=d-l.right,d=l.right);break;case 1:a+=h,a>=l.bottom&&(f=2,d-=a-l.bottom,a=l.bottom);break;case 2:d-=h,d<=l.left&&(f=3,a-=l.left-d,d=l.left);break;case 3:a-=h,a<=l.top&&(f=0,a=l.top);break}return o};C.exports=u}),33595:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){for(var y=s.x,u=s.right,l=s.y,h=s.bottom,r=0;r<g.length;r++)y=Math.min(y,g[r].x),u=Math.max(u,g[r].x),l=Math.min(l,g[r].y),h=Math.max(h,g[r].y);return s.x=y,s.y=l,s.width=u-y,s.height=h-l,s};C.exports=R}),20074:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=Math.min(s.x,g.x),u=Math.max(s.right,g.right);s.x=y,s.width=u-y;var l=Math.min(s.y,g.y),h=Math.max(s.bottom,g.bottom);return s.y=l,s.height=h-l,s};C.exports=R}),92171:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=Math.min(s.x,g),l=Math.max(s.right,g);s.x=u,s.width=l-u;var h=Math.min(s.y,y),r=Math.max(s.bottom,y);return s.y=h,s.height=r-h,s};C.exports=R}),42981:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s.x+=g,s.y+=y,s};C.exports=R}),46907:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x+=g.x,s.y+=g.y,s};C.exports=R}),60170:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x<g.right&&s.right>g.x&&s.y<g.bottom&&s.bottom>g.y};C.exports=R}),13019:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return 2*(s.width+s.height)};C.exports=R}),85133:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=s(39506),u=function(l,h,r){r===void 0&&(r=new g),h=y(h);var o=Math.sin(h),d=Math.cos(h),a=d>0?l.width/2:l.width/-2,f=o>0?l.height/2:l.height/-2;return Math.abs(a*o)<Math.abs(f*d)?f=a*o/d:a=f*d/o,r.x=a+l.centerX,r.y=f+l.centerY,r};C.exports=u}),26597:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){return l===void 0&&(l=new g),l.x=u.x+Math.random()*u.width,l.y=u.y+Math.random()*u.height,l};C.exports=y}),86470:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(30976),y=s(70273),u=s(2141),l=function(h,r,o){if(o===void 0&&(o=new u),y(h,r))switch(g(0,3)){case 0:o.x=h.x+Math.random()*(r.right-h.x),o.y=h.y+Math.random()*(r.top-h.y);break;case 1:o.x=r.x+Math.random()*(h.right-r.x),o.y=r.bottom+Math.random()*(h.bottom-r.bottom);break;case 2:o.x=h.x+Math.random()*(r.x-h.x),o.y=r.y+Math.random()*(h.bottom-r.y);break;case 3:o.x=r.right+Math.random()*(h.right-r.right),o.y=h.y+Math.random()*(r.bottom-h.y);break}return o};C.exports=l}),87841:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(37303),u=s(20812),l=s(34819),h=s(23777),r=s(23031),o=s(26597),d=new g({initialize:function(f,v,c,p){f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=0),this.type=h.RECTANGLE,this.x=f,this.y=v,this.width=c,this.height=p},contains:function(a,f){return y(this,a,f)},getPoint:function(a,f){return u(this,a,f)},getPoints:function(a,f,v){return l(this,a,f,v)},getRandomPoint:function(a){return o(this,a)},setTo:function(a,f,v,c){return this.x=a,this.y=f,this.width=v,this.height=c,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(a,f){return f===void 0&&(f=a),this.x=a,this.y=f,this},setSize:function(a,f){return f===void 0&&(f=a),this.width=a,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(a){return a===void 0&&(a=new r),a.setTo(this.x,this.y,this.right,this.y),a},getLineB:function(a){return a===void 0&&(a=new r),a.setTo(this.right,this.y,this.right,this.bottom),a},getLineC:function(a){return a===void 0&&(a=new r),a.setTo(this.right,this.bottom,this.x,this.bottom),a},getLineD:function(a){return a===void 0&&(a=new r),a.setTo(this.x,this.bottom,this.x,this.y),a},left:{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}},right:{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}},top:{get:function(){return this.y},set:function(a){a>=this.bottom?this.height=0:this.height=this.bottom-a,this.y=a}},bottom:{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(a){this.x=a-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(a){this.y=a-this.height/2}}});C.exports=d}),94845:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.width===g.width&&s.height===g.height};C.exports=R}),31730:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return y===void 0&&(y=g),s.width*=g,s.height*=y,s};C.exports=R}),36899:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=function(u,l,h){h===void 0&&(h=new g);var r=Math.min(u.x,l.x),o=Math.min(u.y,l.y),d=Math.max(u.right,l.right)-r,a=Math.max(u.bottom,l.bottom)-o;return h.setTo(r,o,d,a)};C.exports=y}),93232:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841);g.Area=s(62224),g.Ceil=s(98615),g.CeilAll=s(31688),g.CenterOn=s(67502),g.Clone=s(65085),g.Contains=s(37303),g.ContainsPoint=s(96553),g.ContainsRect=s(70273),g.CopyFrom=s(43459),g.Decompose=s(77493),g.Equals=s(9219),g.FitInside=s(53751),g.FitOutside=s(16088),g.Floor=s(80774),g.FloorAll=s(83859),g.FromPoints=s(19217),g.FromXY=s(9477),g.GetAspectRatio=s(8249),g.GetCenter=s(27165),g.GetPoint=s(20812),g.GetPoints=s(34819),g.GetSize=s(51313),g.Inflate=s(86091),g.Intersection=s(53951),g.MarchingAnts=s(14649),g.MergePoints=s(33595),g.MergeRect=s(20074),g.MergeXY=s(92171),g.Offset=s(42981),g.OffsetPoint=s(46907),g.Overlaps=s(60170),g.Perimeter=s(13019),g.PerimeterPoint=s(85133),g.Random=s(26597),g.RandomOutside=s(86470),g.SameDimensions=s(94845),g.Scale=s(31730),g.Union=s(36899),C.exports=g}),41658:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=s.x1,y=s.y1,u=s.x2,l=s.y2,h=s.x3,r=s.y3;return Math.abs(((h-g)*(l-y)-(u-g)*(r-y))/2)};C.exports=R}),39208:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(16483),y=function(u,l,h){var r=h*(Math.sqrt(3)/2),o=u,d=l,a=u+h/2,f=l+r,v=u-h/2,c=l+r;return new g(o,d,a,f,v,c)};C.exports=y}),39545:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(94811),y=s(16483),u=function(l,h,r,o,d){h===void 0&&(h=null),r===void 0&&(r=1),o===void 0&&(o=1),d===void 0&&(d=[]);for(var a=g(l,h),f,v,c,p,m,T,E,P,w,A=0;A<a.length;A+=3)f=a[A],v=a[A+1],c=a[A+2],p=l[f*2]*r,m=l[f*2+1]*o,T=l[v*2]*r,E=l[v*2+1]*o,P=l[c*2]*r,w=l[c*2+1]*o,d.push(new y(p,m,T,E,P,w));return d};C.exports=u}),90301:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(16483),y=function(u,l,h,r){r===void 0&&(r=h);var o=u,d=l,a=u,f=l-r,v=u+h,c=l;return new g(o,d,a,f,v,c)};C.exports=y}),23707:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(97523),y=s(13584),u=function(l,h,r,o){o===void 0&&(o=g);var d=o(l),a=h-d.x,f=r-d.y;return y(l,a,f)};C.exports=u}),97523:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){return l===void 0&&(l=new g),l.x=(u.x1+u.x2+u.x3)/3,l.y=(u.y1+u.y2+u.y3)/3,l};C.exports=y}),24951:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099);function y(l,h,r,o){return l*o-h*r}var u=function(l,h){h===void 0&&(h=new g);var r=l.x3,o=l.y3,d=l.x1-r,a=l.y1-o,f=l.x2-r,v=l.y2-o,c=2*y(d,a,f,v),p=y(a,d*d+a*a,v,f*f+v*v),m=y(d,d*d+a*a,f,f*f+v*v);return h.x=r-p/c,h.y=o+m/c,h};C.exports=u}),85614:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(96503),y=function(u,l){l===void 0&&(l=new g);var h=u.x1,r=u.y1,o=u.x2,d=u.y2,a=u.x3,f=u.y3,v=o-h,c=d-r,p=a-h,m=f-r,T=v*(h+o)+c*(r+d),E=p*(h+a)+m*(r+f),P=2*(v*(f-d)-c*(a-o)),w,A;if(Math.abs(P)<1e-6){var b=Math.min(h,o,a),O=Math.min(r,d,f);w=(Math.max(h,o,a)-b)*.5,A=(Math.max(r,d,f)-O)*.5,l.x=b+w,l.y=O+A,l.radius=Math.sqrt(w*w+A*A)}else l.x=(m*T-c*E)/P,l.y=(v*E-p*T)/P,w=l.x-h,A=l.y-r,l.radius=Math.sqrt(w*w+A*A);return l};C.exports=y}),74422:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(16483),y=function(u){return new g(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)};C.exports=y}),10690:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=s.x3-s.x1,l=s.y3-s.y1,h=s.x2-s.x1,r=s.y2-s.y1,o=g-s.x1,d=y-s.y1,a=u*u+l*l,f=u*h+l*r,v=u*o+l*d,c=h*h+r*r,p=h*o+r*d,m=a*c-f*f,T=m===0?0:1/m,E=(c*v-f*p)*T,P=(a*p-f*v)*T;return E>=0&&P>=0&&E+P<1};C.exports=R}),48653:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y===void 0&&(y=!1),u===void 0&&(u=[]);for(var l=s.x3-s.x1,h=s.y3-s.y1,r=s.x2-s.x1,o=s.y2-s.y1,d=l*l+h*h,a=l*r+h*o,f=r*r+o*o,v=d*f-a*a,c=v===0?0:1/v,p,m,T,E,P,w,A=s.x1,b=s.y1,O=0;O<g.length&&(T=g[O].x-A,E=g[O].y-b,P=l*T+h*E,w=r*T+o*E,p=(f*P-a*w)*c,m=(d*w-a*P)*c,!(p>=0&&m>=0&&p+m<1&&(u.push({x:g[O].x,y:g[O].y}),y)));O++);return u};C.exports=R}),96006:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10690),y=function(u,l){return g(u,l.x,l.y)};C.exports=y}),71326:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g.setTo(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};C.exports=R}),71694:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g=[]),g.push({x:s.x1,y:s.y1}),g.push({x:s.x2,y:s.y2}),g.push({x:s.x3,y:s.y3}),g};C.exports=R}),33522:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.x1===g.x1&&s.y1===g.y1&&s.x2===g.x2&&s.y2===g.y2&&s.x3===g.x3&&s.y3===g.y3};C.exports=R}),20437:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=s(35001),u=function(l,h,r){r===void 0&&(r=new g);var o=l.getLineA(),d=l.getLineB(),a=l.getLineC();if(h<=0||h>=1)return r.x=o.x1,r.y=o.y1,r;var f=y(o),v=y(d),c=y(a),p=f+v+c,m=p*h,T=0;return m<f?(T=m/f,r.x=o.x1+(o.x2-o.x1)*T,r.y=o.y1+(o.y2-o.y1)*T):m>f+v?(m-=f+v,T=m/c,r.x=a.x1+(a.x2-a.x1)*T,r.y=a.y1+(a.y2-a.y1)*T):(m-=f,T=m/v,r.x=d.x1+(d.x2-d.x1)*T,r.y=d.y1+(d.y2-d.y1)*T),r};C.exports=u}),80672:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35001),y=s(2141),u=function(l,h,r,o){o===void 0&&(o=[]);var d=l.getLineA(),a=l.getLineB(),f=l.getLineC(),v=g(d),c=g(a),p=g(f),m=v+c+p;!h&&r>0&&(h=m/r);for(var T=0;T<h;T++){var E=m*(T/h),P=0,w=new y;E<v?(P=E/v,w.x=d.x1+(d.x2-d.x1)*P,w.y=d.y1+(d.y2-d.y1)*P):E>v+c?(E-=v+c,P=E/p,w.x=f.x1+(f.x2-f.x1)*P,w.y=f.y1+(f.y2-f.y1)*P):(E-=v,P=E/c,w.x=a.x1+(a.x2-a.x1)*P,w.y=a.y1+(a.y2-a.y1)*P),o.push(w)}return o};C.exports=u}),39757:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141);function y(l,h,r,o){var d=l-r,a=h-o,f=d*d+a*a;return Math.sqrt(f)}var u=function(l,h){h===void 0&&(h=new g);var r=l.x1,o=l.y1,d=l.x2,a=l.y2,f=l.x3,v=l.y3,c=y(f,v,d,a),p=y(r,o,f,v),m=y(d,a,r,o),T=c+p+m;return h.x=(r*c+d*p+f*m)/T,h.y=(o*c+a*p+v*m)/T,h};C.exports=u}),13584:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s.x1+=g,s.y1+=y,s.x2+=g,s.y2+=y,s.x3+=g,s.y3+=y,s};C.exports=R}),1376:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35001),y=function(u){var l=u.getLineA(),h=u.getLineB(),r=u.getLineC();return g(l)+g(h)+g(r)};C.exports=y}),90260:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2141),y=function(u,l){l===void 0&&(l=new g);var h=u.x2-u.x1,r=u.y2-u.y1,o=u.x3-u.x1,d=u.y3-u.y1,a=Math.random(),f=Math.random();return a+f>=1&&(a=1-a,f=1-f),l.x=u.x1+(h*a+o*f),l.y=u.y1+(r*a+d*f),l};C.exports=y}),52172:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(99614),y=s(39757),u=function(l,h){var r=y(l);return g(l,r.x,r.y,h)};C.exports=u}),49907:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(99614),y=function(u,l,h){return g(u,l.x,l.y,h)};C.exports=y}),99614:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=Math.cos(u),h=Math.sin(u),r=s.x1-g,o=s.y1-y;return s.x1=r*l-o*h+g,s.y1=r*h+o*l+y,r=s.x2-g,o=s.y2-y,s.x2=r*l-o*h+g,s.y2=r*h+o*l+y,r=s.x3-g,o=s.y3-y,s.x3=r*l-o*h+g,s.y3=r*h+o*l+y,s};C.exports=R}),16483:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(10690),u=s(20437),l=s(80672),h=s(23777),r=s(23031),o=s(90260),d=new g({initialize:function(f,v,c,p,m,T){f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=0),T===void 0&&(T=0),this.type=h.TRIANGLE,this.x1=f,this.y1=v,this.x2=c,this.y2=p,this.x3=m,this.y3=T},contains:function(a,f){return y(this,a,f)},getPoint:function(a,f){return u(this,a,f)},getPoints:function(a,f,v){return l(this,a,f,v)},getRandomPoint:function(a){return o(this,a)},setTo:function(a,f,v,c,p,m){return a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=0),this.x1=a,this.y1=f,this.x2=v,this.y2=c,this.x3=p,this.y3=m,this},getLineA:function(a){return a===void 0&&(a=new r),a.setTo(this.x1,this.y1,this.x2,this.y2),a},getLineB:function(a){return a===void 0&&(a=new r),a.setTo(this.x2,this.y2,this.x3,this.y3),a},getLineC:function(a){return a===void 0&&(a=new r),a.setTo(this.x3,this.y3,this.x1,this.y1),a},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(a){var f=0;this.x1<=this.x2&&this.x1<=this.x3?f=this.x1-a:this.x2<=this.x1&&this.x2<=this.x3?f=this.x2-a:f=this.x3-a,this.x1-=f,this.x2-=f,this.x3-=f}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(a){var f=0;this.x1>=this.x2&&this.x1>=this.x3?f=this.x1-a:this.x2>=this.x1&&this.x2>=this.x3?f=this.x2-a:f=this.x3-a,this.x1-=f,this.x2-=f,this.x3-=f}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(a){var f=0;this.y1<=this.y2&&this.y1<=this.y3?f=this.y1-a:this.y2<=this.y1&&this.y2<=this.y3?f=this.y2-a:f=this.y3-a,this.y1-=f,this.y2-=f,this.y3-=f}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(a){var f=0;this.y1>=this.y2&&this.y1>=this.y3?f=this.y1-a:this.y2>=this.y1&&this.y2>=this.y3?f=this.y2-a:f=this.y3-a,this.y1-=f,this.y2-=f,this.y3-=f}}});C.exports=d}),84435:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(16483);g.Area=s(41658),g.BuildEquilateral=s(39208),g.BuildFromPolygon=s(39545),g.BuildRight=s(90301),g.CenterOn=s(23707),g.Centroid=s(97523),g.CircumCenter=s(24951),g.CircumCircle=s(85614),g.Clone=s(74422),g.Contains=s(10690),g.ContainsArray=s(48653),g.ContainsPoint=s(96006),g.CopyFrom=s(71326),g.Decompose=s(71694),g.Equals=s(33522),g.GetPoint=s(20437),g.GetPoints=s(80672),g.InCenter=s(39757),g.Perimeter=s(1376),g.Offset=s(13584),g.Random=s(90260),g.Rotate=s(52172),g.RotateAroundPoint=s(49907),g.RotateAroundXY=s(99614),C.exports=g}),74457:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return{gameObject:s,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:g,hitAreaCallback:y,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};C.exports=R}),84409:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return function(y,u,l,h){var r=s.getPixelAlpha(u,l,h.texture.key,h.frame.name);return r&&r>=g}};C.exports=R}),7003:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(93301),u=s(50792),l=s(8214),h=s(8443),r=s(78970),o=s(85098),d=s(42515),a=s(36210),f=s(61340),v=s(85955),c=new g({initialize:function(m,T){this.game=m,this.scaleManager,this.canvas,this.config=T,this.enabled=!0,this.events=new u,this.isOver=!0,this.defaultCursor="",this.keyboard=T.inputKeyboard?new r(this):null,this.mouse=T.inputMouse?new o(this):null,this.touch=T.inputTouch?new a(this):null,this.pointers=[],this.pointersTotal=T.inputActivePointers;for(var E=0;E<=this.pointersTotal;E++){var P=new d(this,E);P.smoothFactor=T.inputSmoothFactor,this.pointers.push(P)}this.mousePointer=T.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],m.events.once(h.BOOT,this.boot,this)},boot:function(){var p=this.game,m=p.events;this.canvas=p.canvas,this.scaleManager=p.scale,this.events.emit(l.MANAGER_BOOT),m.on(h.PRE_RENDER,this.preRender,this),m.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(p){this.isOver=!0,this.events.emit(l.GAME_OVER,p)},setCanvasOut:function(p){this.isOver=!1,this.events.emit(l.GAME_OUT,p)},preRender:function(){var p=this.game.loop.now,m=this.game.loop.delta,T=this.game.scene.getScenes(!0,!0);this.time=p,this.events.emit(l.MANAGER_UPDATE);for(var E=0;E<T.length;E++){var P=T[E];if(P.sys.input&&P.sys.input.updatePoll(p,m)&&this.globalTopOnly)return}},setDefaultCursor:function(p){this.defaultCursor=p,this.canvas.style.cursor!==p&&(this.canvas.style.cursor=p)},setCursor:function(p){p.cursor&&(this.canvas.style.cursor=p.cursor)},resetCursor:function(p,m){(m||p&&p.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(p){p===void 0&&(p=1);var m=[];this.pointersTotal+p>10&&(p=10-this.pointersTotal);for(var T=0;T<p;T++){var E=this.pointers.length,P=new d(this,E);P.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(P),this.pointersTotal++,m.push(P)}return m},updateInputPlugins:function(p,m){var T=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var E=0;E<T.length;E++){var P=T[E];if(P.sys.input){var w=P.sys.input.update(p,m);if(w&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(p){for(var m=this.pointers,T=[],E=0;E<p.changedTouches.length;E++)for(var P=p.changedTouches[E],w=1;w<m.length;w++){var A=m[w];if(!A.active){A.touchstart(P,p),this.activePointer=A,T.push(A);break}}this.updateInputPlugins(y.TOUCH_START,T)},onTouchMove:function(p){for(var m=this.pointers,T=[],E=0;E<p.changedTouches.length;E++)for(var P=p.changedTouches[E],w=1;w<m.length;w++){var A=m[w];if(A.active&&A.identifier===P.identifier){var b=document.elementFromPoint(P.clientX,P.clientY),O=b===this.canvas;!this.isOver&&O?this.setCanvasOver(p):this.isOver&&!O&&this.setCanvasOut(p),this.isOver&&(A.touchmove(P,p),this.activePointer=A,T.push(A));break}}this.updateInputPlugins(y.TOUCH_MOVE,T)},onTouchEnd:function(p){for(var m=this.pointers,T=[],E=0;E<p.changedTouches.length;E++)for(var P=p.changedTouches[E],w=1;w<m.length;w++){var A=m[w];if(A.active&&A.identifier===P.identifier){A.touchend(P,p),T.push(A);break}}this.updateInputPlugins(y.TOUCH_END,T)},onTouchCancel:function(p){for(var m=this.pointers,T=[],E=0;E<p.changedTouches.length;E++)for(var P=p.changedTouches[E],w=1;w<m.length;w++){var A=m[w];if(A.active&&A.identifier===P.identifier){A.touchcancel(P,p),T.push(A);break}}this.updateInputPlugins(y.TOUCH_CANCEL,T)},onMouseDown:function(p){var m=this.mousePointer;m.down(p),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(y.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(p){var m=this.mousePointer;m.move(p),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(y.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(p){var m=this.mousePointer;m.up(p),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(y.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(p){var m=this.mousePointer;m.wheel(p),this.activePointer=m,this.updateInputPlugins(y.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(p){var m=this.mouse.locked;this.mousePointer.locked=m,this.events.emit(l.POINTERLOCK_CHANGE,p,m)},inputCandidate:function(p,m){var T=p.input;if(!T||!T.enabled||!p.willRender(m))return!1;var E=!0,P=p.parentContainer;if(P)do{if(!P.willRender(m)){E=!1;break}P=P.parentContainer}while(P);return E},hitTest:function(p,m,T,E){E===void 0&&(E=this._tempHitTest);var P=this._tempPoint,w=T.scrollX,A=T.scrollY;E.length=0;var b=p.x,O=p.y;T.getWorldPoint(b,O,P),p.worldX=P.x,p.worldY=P.y;for(var I={x:0,y:0},D=this._tempMatrix,B=this._tempMatrix2,k=0;k<m.length;k++){var N=m[k];if(this.inputCandidate(N,T)){var H=P.x+w*N.scrollFactorX-w,$=P.y+A*N.scrollFactorY-A;N.parentContainer?(N.getWorldTransformMatrix(D,B),D.applyInverse(H,$,I)):v(H,$,N.x,N.y,N.rotation,N.scaleX,N.scaleY,I),this.pointWithinHitArea(N,I.x,I.y)&&E.push(N)}}return E},pointWithinHitArea:function(p,m,T){m+=p.displayOriginX,T+=p.displayOriginY;var E=p.input;return E&&E.hitAreaCallback(E.hitArea,m,T,p)?(E.localX=m,E.localY=T,!0):!1},pointWithinInteractiveObject:function(p,m,T){return p.hitArea?(m+=p.gameObject.displayOriginX,T+=p.gameObject.displayOriginY,p.localX=m,p.localY=T,p.hitAreaCallback(p.hitArea,m,T,p)):!1},transformPointer:function(p,m,T,E){var P=p.position,w=p.prevPosition;w.x=P.x,w.y=P.y;var A=this.scaleManager.transformX(m),b=this.scaleManager.transformY(T),O=p.smoothFactor;!E||O===0?(P.x=A,P.y=b):(P.x=A*O+w.x*(1-O),P.y=b*O+w.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var p=0;p<this.pointers.length;p++)this.pointers[p].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});C.exports=c}),48205:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(96503),y=s(87902),u=s(83419),l=s(93301),h=s(74457),r=s(84409),o=s(20339),d=s(8497),a=s(81154),f=s(8214),v=s(50792),c=s(95540),p=s(23777),m=s(89639),T=s(41212),E=s(37277),P=s(87841),w=s(37303),A=s(44594),b=s(16483),O=s(10690),I=new u({Extends:v,initialize:function(B){v.call(this),this.scene=B,this.systems=B.sys,this.settings=B.sys.settings,this.manager=B.sys.game.input,this.pluginEvents=new v,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var k={cancelled:!1};this._eventContainer={stopPropagation:function(){k.cancelled=!0}},this._eventData=k,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,B.sys.events.once(A.BOOT,this.boot,this),B.sys.events.on(A.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(A.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var D=this.systems.events;D.on(A.TRANSITION_START,this.transitionIn,this),D.on(A.TRANSITION_OUT,this.transitionOut,this),D.on(A.TRANSITION_COMPLETE,this.transitionComplete,this),D.on(A.PRE_UPDATE,this.preUpdate,this),D.once(A.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(D){this.isActive()&&this.emit(f.GAME_OVER,D.timeStamp,D)},onGameOut:function(D){this.isActive()&&this.emit(f.GAME_OUT,D.timeStamp,D)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var D=this._pendingRemoval,B=this._pendingInsertion,k=D.length,N=B.length;if(!(k===0&&N===0)){for(var H=this._list,$=0;$<k;$++){var J=D[$],q=H.indexOf(J);q>-1&&(H.splice(q,1),this.clear(J,!0))}this._pendingRemoval.length=0,this._list=H.concat(B.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(D){this.manager&&this.manager.setCursor(D)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(D,B){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,D,B),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var k,N=this.manager,H=N.pointers;for(k=0;k<H.length;k++)H[k].updateMotion();if(this._list.length===0)return!1;var $=this.pollRate;if($===-1)return!1;if($>0)if(this._pollTimer-=B,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var J=!1;for(k=0;k<H.length;k++){var q=0,Y=H[k];this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),q+=this.processOverOutEvents(Y),this.getDragState(Y)===2&&this.processDragThresholdEvent(Y,D),q>0&&(J=!0)}return J},update:function(D,B){if(!this.isActive())return!1;for(var k=!1,N=0;N<B.length;N++){var H=0,$=B[N];switch(this._tempZones=[],this._temp=this.hitTestPointer($),this.sortGameObjects(this._temp,$),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),D){case l.MOUSE_DOWN:H+=this.processDragDownEvent($),H+=this.processDownEvents($),H+=this.processOverOutEvents($);break;case l.MOUSE_UP:H+=this.processDragUpEvent($),H+=this.processUpEvents($),H+=this.processOverOutEvents($);break;case l.TOUCH_START:H+=this.processDragDownEvent($),H+=this.processDownEvents($),H+=this.processOverEvents($);break;case l.TOUCH_END:case l.TOUCH_CANCEL:H+=this.processDragUpEvent($),H+=this.processUpEvents($),H+=this.processOutEvents($);break;case l.MOUSE_MOVE:case l.TOUCH_MOVE:H+=this.processDragMoveEvent($),H+=this.processMoveEvents($),H+=this.processOverOutEvents($);break;case l.MOUSE_WHEEL:H+=this.processWheelEvent($);break}H>0&&(k=!0)}return this._updatedThisFrame=!0,k},clear:function(D,B){B===void 0&&(B=!1),this.disable(D);var k=D.input;k&&(this.removeDebug(D),this.manager.resetCursor(k),k.gameObject=void 0,k.target=void 0,k.hitArea=void 0,k.hitAreaCallback=void 0,k.callbackContext=void 0,D.input=null),B||this.queueForRemoval(D);var N=this._draggable.indexOf(D);return N>-1&&this._draggable.splice(N,1),D},disable:function(D,B){B===void 0&&(B=!1);var k=D.input;k&&(k.enabled=!1,k.dragState=0);for(var N=this._drag,H=this._over,$=this.manager,J=0,q;J<$.pointers.length;J++)q=N[J].indexOf(D),q>-1&&N[J].splice(q,1),q=H[J].indexOf(D),q>-1&&H[J].splice(q,1);return B&&this.resetCursor(),this},enable:function(D,B,k,N){return N===void 0&&(N=!1),D.input?D.input.enabled=!0:this.setHitArea(D,B,k),D.input&&N&&!D.input.dropZone&&(D.input.dropZone=N),this},hitTestPointer:function(D){for(var B=this.cameras.getCamerasBelowPointer(D),k=0;k<B.length;k++){for(var N=B[k],H=this.manager.hitTest(D,this._list,N),$=0;$<H.length;$++){var J=H[$];J.input.dropZone&&this._tempZones.push(J)}if(H.length>0)return D.camera=N,H}return D.camera=B[0],[]},processDownEvents:function(D){var B=0,k=this._temp,N=this._eventData,H=this._eventContainer;N.cancelled=!1;for(var $=0;$<k.length;$++){var J=k[$];if(!(!J.input||!J.input.enabled)&&(B++,J.emit(f.GAMEOBJECT_POINTER_DOWN,D,J.input.localX,J.input.localY,H),N.cancelled||!this.isActive()||J.input&&J.input.enabled&&(this.emit(f.GAMEOBJECT_DOWN,D,J,H),N.cancelled||!this.isActive())))break}return!N.cancelled&&this.isActive()&&(D.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,D,k):this.emit(f.POINTER_DOWN_OUTSIDE,D)),B},getDragState:function(D){return this._dragState[D.id]},setDragState:function(D,B){this._dragState[D.id]=B},processDragThresholdEvent:function(D,B){var k=!1,N=this.dragTimeThreshold,H=this.dragDistanceThreshold;if((H>0&&o(D.x,D.y,D.downX,D.downY)>=H||N>0&&B>=D.downTime+N)&&(k=!0),k)return this.setDragState(D,3),this.processDragStartList(D)},processDragStartList:function(D){if(this.getDragState(D)!==3)return 0;var B=this._drag[D.id];B.length>1&&(B=B.slice(0));for(var k=0;k<B.length;k++){var N=B[k],H=N.input;H.dragState=2,H.dragStartX=N.x,H.dragStartY=N.y,H.dragStartXGlobal=D.worldX,H.dragStartYGlobal=D.worldY,H.dragStartCamera=D.camera,H.dragX=H.dragStartXGlobal-H.dragStartX,H.dragY=H.dragStartYGlobal-H.dragStartY,N.emit(f.GAMEOBJECT_DRAG_START,D,H.dragX,H.dragY),this.emit(f.DRAG_START,D,N)}return this.setDragState(D,4),B.length},processDragDownEvent:function(D){var B=this._temp;if(this._draggable.length===0||B.length===0||!D.primaryDown||this.getDragState(D)!==0)return 0;this.setDragState(D,1);for(var k=[],N=0;N<B.length;N++){var H=B[N];H.input.draggable&&H.input.dragState===0&&k.push(H)}return k.length===0?(this.setDragState(D,0),0):(k.length>1&&(this.sortGameObjects(k,D),this.topOnly&&k.splice(1)),this._drag[D.id]=k,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(D,3),this.processDragStartList(D)):(this.setDragState(D,2),0))},processDragMoveEvent:function(D){if(this.getDragState(D)===2&&this.processDragThresholdEvent(D,this.manager.game.loop.now),this.getDragState(D)!==4)return 0;var B=this._tempZones,k=this._drag[D.id];k.length>1&&(k=k.slice(0));for(var N=0;N<k.length;N++){var H=k[N],$=H.input,J=$.target;if(J){var q=B.indexOf(J);q===0?(H.emit(f.GAMEOBJECT_DRAG_OVER,D,J),this.emit(f.DRAG_OVER,D,H,J)):q>0?(H.emit(f.GAMEOBJECT_DRAG_LEAVE,D,J),this.emit(f.DRAG_LEAVE,D,H,J),$.target=B[0],J=$.target,H.emit(f.GAMEOBJECT_DRAG_ENTER,D,J),this.emit(f.DRAG_ENTER,D,H,J)):(H.emit(f.GAMEOBJECT_DRAG_LEAVE,D,J),this.emit(f.DRAG_LEAVE,D,H,J),B[0]?($.target=B[0],J=$.target,H.emit(f.GAMEOBJECT_DRAG_ENTER,D,J),this.emit(f.DRAG_ENTER,D,H,J)):$.target=null)}else!J&&B[0]&&($.target=B[0],J=$.target,H.emit(f.GAMEOBJECT_DRAG_ENTER,D,J),this.emit(f.DRAG_ENTER,D,H,J));var Y,K,V=D.positionToCamera($.dragStartCamera);if(!H.parentContainer)Y=V.x-$.dragX,K=V.y-$.dragY;else{var U=V.x-$.dragStartXGlobal,Z=V.y-$.dragStartYGlobal,et=H.getParentRotation(),st=U*Math.cos(et)+Z*Math.sin(et),rt=Z*Math.cos(et)-U*Math.sin(et);st*=1/H.parentContainer.scaleX,rt*=1/H.parentContainer.scaleY,Y=st+$.dragStartX,K=rt+$.dragStartY}H.emit(f.GAMEOBJECT_DRAG,D,Y,K),this.emit(f.DRAG,D,H,Y,K)}return k.length},processDragUpEvent:function(D){var B=this._drag[D.id];B.length>1&&(B=B.slice(0));for(var k=0;k<B.length;k++){var N=B[k],H=N.input;if(H&&H.dragState===2){H.dragState=0,H.dragX=H.localX-N.displayOriginX,H.dragY=H.localY-N.displayOriginY,H.dragStartCamera=null;var $=!1,J=H.target;J&&(N.emit(f.GAMEOBJECT_DROP,D,J),this.emit(f.DROP,D,N,J),H.target=null,$=!0),N.input&&N.input.enabled&&(N.emit(f.GAMEOBJECT_DRAG_END,D,H.dragX,H.dragY,$),this.emit(f.DRAG_END,D,N,$))}}return this.setDragState(D,0),B.splice(0),0},processMoveEvents:function(D){var B=0,k=this._temp,N=this._eventData,H=this._eventContainer;N.cancelled=!1;for(var $=0;$<k.length;$++){var J=k[$];if(!(!J.input||!J.input.enabled)&&(B++,J.emit(f.GAMEOBJECT_POINTER_MOVE,D,J.input.localX,J.input.localY,H),N.cancelled||!this.isActive()||J.input&&J.input.enabled&&(this.emit(f.GAMEOBJECT_MOVE,D,J,H),N.cancelled||!this.isActive()||this.topOnly)))break}return!N.cancelled&&this.isActive()&&this.emit(f.POINTER_MOVE,D,k),B},processWheelEvent:function(D){var B=0,k=this._temp,N=this._eventData,H=this._eventContainer;N.cancelled=!1;for(var $=D.deltaX,J=D.deltaY,q=D.deltaZ,Y=0;Y<k.length;Y++){var K=k[Y];if(!(!K.input||!K.input.enabled)&&(B++,K.emit(f.GAMEOBJECT_POINTER_WHEEL,D,$,J,q,H),N.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(f.GAMEOBJECT_WHEEL,D,K,$,J,q,H),N.cancelled||!this.isActive())))break}return!N.cancelled&&this.isActive()&&this.emit(f.POINTER_WHEEL,D,k,$,J,q),B},processOverEvents:function(D){var B=this._temp,k=0,N=B.length,H=[];if(N>0){var $=this.manager,J=this._eventData,q=this._eventContainer;J.cancelled=!1;for(var Y=0;Y<N;Y++){var K=B[Y];if(!(!K.input||!K.input.enabled)&&(H.push(K),$.setCursor(K.input),K.emit(f.GAMEOBJECT_POINTER_OVER,D,K.input.localX,K.input.localY,q),k++,J.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(f.GAMEOBJECT_OVER,D,K,q),J.cancelled||!this.isActive())))break}!J.cancelled&&this.isActive()&&this.emit(f.POINTER_OVER,D,H)}return this._over[D.id]=H,k},processOutEvents:function(D){var B=this._over[D.id],k=0,N=B.length;if(N>0){var H=this.manager,$=this._eventData,J=this._eventContainer;$.cancelled=!1,this.sortGameObjects(B,D);for(var q=0;q<N;q++){var Y=B[q];if(Y=B[q],!(!Y.input||!Y.input.enabled)&&(H.resetCursor(Y.input),Y.emit(f.GAMEOBJECT_POINTER_OUT,D,J),k++,$.cancelled||!this.isActive()||Y.input&&Y.input.enabled&&(this.emit(f.GAMEOBJECT_OUT,D,Y,J),$.cancelled||!this.isActive())))break}!$.cancelled&&this.isActive()&&this.emit(f.POINTER_OUT,D,B),this._over[D.id]=[]}return k},processOverOutEvents:function(D){var B=this._temp,k,N,H=[],$=[],J=[],q=this._over[D.id],Y=this._drag[D.id],K=this.manager;for(k=0;k<q.length;k++)N=q[k],B.indexOf(N)===-1&&Y.indexOf(N)===-1?H.push(N):J.push(N);for(k=0;k<B.length;k++)N=B[k],q.indexOf(N)===-1&&$.push(N);var V=H.length,U=0,Z=this._eventData,et=this._eventContainer;if(Z.cancelled=!1,V>0){for(this.sortGameObjects(H,D),k=0;k<V&&(N=H[k],!(!(!N.input||!N.input.enabled)&&(K.resetCursor(N.input),N.emit(f.GAMEOBJECT_POINTER_OUT,D,et),U++,Z.cancelled||!this.isActive()||N.input&&N.input.enabled&&(this.emit(f.GAMEOBJECT_OUT,D,N,et),Z.cancelled||!this.isActive()))));k++);(!Z.cancelled||this.isActive())&&this.emit(f.POINTER_OUT,D,H)}if(V=$.length,Z.cancelled=!1,V>0){for(this.sortGameObjects($,D),k=0;k<V&&(N=$[k],!(!(!N.input||!N.input.enabled)&&(K.setCursor(N.input),N.emit(f.GAMEOBJECT_POINTER_OVER,D,N.input.localX,N.input.localY,et),U++,Z.cancelled||!this.isActive()||N.input&&N.input.enabled&&(this.emit(f.GAMEOBJECT_OVER,D,N,et),Z.cancelled||!this.isActive()))));k++);!Z.cancelled&&this.isActive()&&this.emit(f.POINTER_OVER,D,$)}return q=J.concat($),this._over[D.id]=this.sortGameObjects(q,D),U},processUpEvents:function(D){var B=this._temp,k=this._eventData,N=this._eventContainer;k.cancelled=!1;for(var H=0;H<B.length;H++){var $=B[H];if(!(!$.input||!$.input.enabled)&&($.emit(f.GAMEOBJECT_POINTER_UP,D,$.input.localX,$.input.localY,N),k.cancelled||!this.isActive()||$.input&&$.input.enabled&&(this.emit(f.GAMEOBJECT_UP,D,$,N),k.cancelled||!this.isActive())))break}return!k.cancelled&&this.isActive()&&(D.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,D,B):this.emit(f.POINTER_UP_OUTSIDE,D)),B.length},forceDownState:function(D,B){this.forceState(D,B,f.GAMEOBJECT_POINTER_DOWN,f.GAMEOBJECT_DOWN,!1)},forceUpState:function(D,B){this.forceState(D,B,f.GAMEOBJECT_POINTER_UP,f.GAMEOBJECT_UP,!1)},forceOverState:function(D,B){this.forceState(D,B,f.GAMEOBJECT_POINTER_OVER,f.GAMEOBJECT_OVER,!0)},forceOutState:function(D,B){this.forceState(D,B,f.GAMEOBJECT_POINTER_OUT,f.GAMEOBJECT_OUT,!1)},forceState:function(D,B,k,N,H){var $=this._eventData,J=this._eventContainer;$.cancelled=!1,B.input&&B.input.enabled&&(B.emit(k,D,B.input.localX,B.input.localY,J),H&&this.setCursor(B.input),!$.cancelled&&this.isActive()&&B.input&&B.input.enabled&&this.emit(N,D,B,J))},queueForInsertion:function(D){return this._pendingInsertion.indexOf(D)===-1&&this._list.indexOf(D)===-1&&this._pendingInsertion.push(D),this},queueForRemoval:function(D){return this._pendingRemoval.push(D),this},setDraggable:function(D,B){B===void 0&&(B=!0),Array.isArray(D)||(D=[D]);for(var k=0;k<D.length;k++){var N=D[k];N.input.draggable=B;var H=this._draggable.indexOf(N);B&&H===-1?this._draggable.push(N):!B&&H>-1&&this._draggable.splice(H,1)}return this},makePixelPerfect:function(D){D===void 0&&(D=1);var B=this.systems.textures;return r(B,D)},setHitArea:function(D,B,k){if(B===void 0)return this.setHitAreaFromTexture(D);Array.isArray(D)||(D=[D]);var N=!1,H=!1,$=!1,J=!1,q=!1,Y=!0;if(T(B)&&Object.keys(B).length){var K=B,V=D.some(function(rt){return rt.hasOwnProperty("faces")});if(!V){B=c(K,"hitArea",null),k=c(K,"hitAreaCallback",null),q=c(K,"pixelPerfect",!1);var U=c(K,"alphaTolerance",1);q&&(B={},k=this.makePixelPerfect(U))}N=c(K,"draggable",!1),H=c(K,"dropZone",!1),$=c(K,"cursor",!1),J=c(K,"useHandCursor",!1),(!B||!k)&&(this.setHitAreaFromTexture(D),Y=!1)}else typeof B=="function"&&!k&&(k=B,B={});for(var Z=0;Z<D.length;Z++){var et=D[Z];if(q&&et.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var st=et.input?et.input:h(et,B,k);st.customHitArea=Y,st.dropZone=H,st.cursor=J?"pointer":$,et.input=st,N&&this.setDraggable(et),this.queueForInsertion(et)}return this},setHitAreaCircle:function(D,B,k,N,H){H===void 0&&(H=y);var $=new g(B,k,N);return this.setHitArea(D,$,H)},setHitAreaEllipse:function(D,B,k,N,H,$){$===void 0&&($=a);var J=new d(B,k,N,H);return this.setHitArea(D,J,$)},setHitAreaFromTexture:function(D,B){B===void 0&&(B=w),Array.isArray(D)||(D=[D]);for(var k=0;k<D.length;k++){var N=D[k],H=N.frame,$=0,J=0;if(N.width?($=N.width,J=N.height):H&&($=H.realWidth,J=H.realHeight),N.type==="Container"&&($===0||J===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}$!==0&&J!==0&&(N.input=h(N,new P(0,0,$,J),B),this.queueForInsertion(N))}return this},setHitAreaRectangle:function(D,B,k,N,H,$){$===void 0&&($=w);var J=new P(B,k,N,H);return this.setHitArea(D,J,$)},setHitAreaTriangle:function(D,B,k,N,H,$,J,q){q===void 0&&(q=O);var Y=new b(B,k,N,H,$,J);return this.setHitArea(D,Y,q)},enableDebug:function(D,B){B===void 0&&(B=65280);var k=D.input;if(!k||!k.hitArea)return this;var N=k.hitArea,H=N.type,$=k.hitAreaDebug,J=this.systems.add,q=this.systems.updateList;$&&(q.remove($),$.destroy(),$=null);var Y=0,K=0;switch(H){case p.CIRCLE:$=J.arc(0,0,N.radius),Y=N.x-N.radius,K=N.y-N.radius;break;case p.ELLIPSE:$=J.ellipse(0,0,N.width,N.height),Y=N.x-N.width/2,K=N.y-N.height/2;break;case p.LINE:$=J.line(0,0,N.x1,N.y1,N.x2,N.y2);break;case p.POLYGON:$=J.polygon(0,0,N.points);break;case p.RECTANGLE:$=J.rectangle(0,0,N.width,N.height),Y=N.x,K=N.y;break;case p.TRIANGLE:$=J.triangle(0,0,N.x1,N.y1,N.x2,N.y2,N.x3,N.y3);break}return $&&($.isFilled=!1,$.strokeColor=B,$.preUpdate=function(){$.setVisible(D.visible),$.setStrokeStyle(1/D.scale,$.strokeColor),$.setDisplayOrigin(D.displayOriginX,D.displayOriginY);var V=D.x,U=D.y,Z=D.rotation,et=D.scaleX,st=D.scaleY;if(D.parentContainer){var rt=D.getWorldTransformMatrix();V=rt.tx,U=rt.ty,Z=rt.rotation,et=rt.scaleX,st=rt.scaleY}$.setRotation(Z),$.setScale(et,st),$.setPosition(V+Y*et,U+K*st),$.setScrollFactor(D.scrollFactorX,D.scrollFactorY),$.setDepth(D.depth)},q.add($),k.hitAreaDebug=$),this},removeDebug:function(D){var B=D.input;if(B&&B.hitAreaDebug){var k=B.hitAreaDebug;k.destroy(),B.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(D){return this.pollRate=D,this._pollTimer=0,this},setGlobalTopOnly:function(D){return this.manager.globalTopOnly=D,this},setTopOnly:function(D){return this.topOnly=D,this},sortGameObjects:function(D,B){if(D.length<2||!B.camera)return D;var k=B.camera.renderList;return D.sort(function(N,H){var $=Math.max(k.indexOf(N),0),J=Math.max(k.indexOf(H),0);return J-$})},sortDropZones:function(D){return D.length<2?D:(this.scene.sys.depthSort(),D.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(D,B){if(!D.parentContainer&&!B.parentContainer)return this.displayList.getIndex(B)-this.displayList.getIndex(D);if(D.parentContainer===B.parentContainer)return B.parentContainer.getIndex(B)-D.parentContainer.getIndex(D);if(D.parentContainer===B)return-1;if(B.parentContainer===D)return 1;for(var k=D.getIndexList(),N=B.getIndexList(),H=Math.min(k.length,N.length),$=0;$<H;$++){var J=k[$],q=N[$];if(J!==q)return q-J}return N.length-k.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(D){return this.manager.addPointer(D)},setDefaultCursor:function(D){return this.manager.setDefaultCursor(D),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var D=0;D<10;D++)this._drag[D]=[],this._over[D]=[];this.removeAllListeners();var B=this.manager;B.canvas.style.cursor=B.defaultCursor;var k=this.systems.events;k.off(A.TRANSITION_START,this.transitionIn,this),k.off(A.TRANSITION_OUT,this.transitionOut,this),k.off(A.TRANSITION_COMPLETE,this.transitionComplete,this),k.off(A.PRE_UPDATE,this.preUpdate,this),B.events.off(f.GAME_OUT,this.onGameOut,this),B.events.off(f.GAME_OVER,this.onGameOver,this),k.off(A.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var D=this.manager.pointers,B=0;B<D.length;B++)D[B].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(A.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});E.register("InputPlugin",I,"input"),C.exports=I}),89639:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35154),y={},u={};u.register=function(l,h,r,o,d){y[l]={plugin:h,mapping:r,settingsKey:o,configKey:d}},u.getPlugin=function(l){return y[l]},u.install=function(l){var h=l.scene.sys,r=h.settings.input,o=h.game.config;for(var d in y){var a=y[d].plugin,f=y[d].mapping,v=y[d].settingsKey,c=y[d].configKey;g(r,v,o[c])&&(l[f]=new a(l))}},u.remove=function(l){y.hasOwnProperty(l)&&delete y[l]},C.exports=u}),42515:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(31040),y=s(83419),u=s(20339),l=s(43855),h=s(47235),r=s(26099),o=s(25892),d=new y({initialize:function(f,v){this.manager=f,this.id=v,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=v===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(a){var f=a.getWorldPoint(this.x,this.y);return this.worldX=f.x,this.worldY=f.y,this},positionToCamera:function(a,f){return a.getWorldPoint(this.x,this.y,f)},updateMotion:function(){var a=this.position.x,f=this.position.y,v=this.midPoint.x,c=this.midPoint.y;if(!(a===v&&f===c)){var p=h(this.motionFactor,v,a),m=h(this.motionFactor,c,f);l(p,a,.1)&&(p=a),l(m,f,.1)&&(m=f),this.midPoint.set(p,m);var T=a-p,E=f-m;this.velocity.set(T,E),this.angle=g(p,m,a,f),this.distance=Math.sqrt(T*T+E*E)}},up:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=a.timeStamp,this.wasTouch=!1)},down:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),o.macOS&&a.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=a.timeStamp),this.wasTouch=!1},move:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.locked&&(this.movementX=a.movementX||a.mozMovementX||a.webkitMovementX||0,this.movementY=a.movementY||a.mozMovementY||a.webkitMovementY||0),this.moveTime=a.timeStamp,this.wasTouch=!1},wheel:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.deltaX=a.deltaX,this.deltaY=a.deltaY,this.deltaZ=a.deltaZ,this.wasTouch=!1},touchstart:function(a,f){a.pointerId&&(this.pointerId=a.pointerId),this.identifier=a.identifier,this.target=a.target,this.active=!0,this.buttons=1,this.event=f,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=f.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(a,f){this.event=f,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.moveTime=f.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(a,f){this.buttons=0,this.event=f,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(a,f){this.buttons=0,this.event=f,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?g(this.downX,this.downY,this.x,this.y):g(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(a,f){a===void 0&&(a=10),f===void 0&&(f=[]);for(var v=this.prevPosition.x,c=this.prevPosition.y,p=this.position.x,m=this.position.y,T=0;T<a;T++){var E=1/a*T;f[T]={x:h(E,v,p),y:h(E,c,m)}}return f},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},time:{get:function(){return this.event?this.event.timeStamp:0}}});C.exports=d}),93301:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};C.exports=R}),7179:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="boot"}),85375:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="destroy"}),39843:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragend"}),23388:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragenter"}),16133:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="drag"}),27829:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragleave"}),53904:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragover"}),56058:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragstart"}),2642:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="drop"}),88171:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="gameobjectdown"}),36147:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragend"}),71692:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragenter"}),96149:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="drag"}),81285:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragleave"}),74048:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragover"}),21322:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragstart"}),49378:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="drop"}),86754:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="gameobjectmove"}),86433:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="gameobjectout"}),60709:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="gameobjectover"}),24081:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerdown"}),11172:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointermove"}),18907:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerout"}),95579:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerover"}),35368:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerup"}),26972:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="wheel"}),47078:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="gameobjectup"}),73802:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="gameobjectwheel"}),56718:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="gameout"}),25936:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="gameover"}),27503:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="boot"}),50852:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="process"}),96438:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="update"}),59152:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerlockchange"}),47777:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerdown"}),27957:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerdownoutside"}),19444:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointermove"}),54251:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerout"}),18667:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerover"}),27192:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerup"}),24652:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pointerupoutside"}),45132:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="wheel"}),44512:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="preupdate"}),15757:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="shutdown"}),41637:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="start"}),93802:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="update"}),8214:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BOOT:s(7179),DESTROY:s(85375),DRAG_END:s(39843),DRAG_ENTER:s(23388),DRAG:s(16133),DRAG_LEAVE:s(27829),DRAG_OVER:s(53904),DRAG_START:s(56058),DROP:s(2642),GAME_OUT:s(56718),GAME_OVER:s(25936),GAMEOBJECT_DOWN:s(88171),GAMEOBJECT_DRAG_END:s(36147),GAMEOBJECT_DRAG_ENTER:s(71692),GAMEOBJECT_DRAG:s(96149),GAMEOBJECT_DRAG_LEAVE:s(81285),GAMEOBJECT_DRAG_OVER:s(74048),GAMEOBJECT_DRAG_START:s(21322),GAMEOBJECT_DROP:s(49378),GAMEOBJECT_MOVE:s(86754),GAMEOBJECT_OUT:s(86433),GAMEOBJECT_OVER:s(60709),GAMEOBJECT_POINTER_DOWN:s(24081),GAMEOBJECT_POINTER_MOVE:s(11172),GAMEOBJECT_POINTER_OUT:s(18907),GAMEOBJECT_POINTER_OVER:s(95579),GAMEOBJECT_POINTER_UP:s(35368),GAMEOBJECT_POINTER_WHEEL:s(26972),GAMEOBJECT_UP:s(47078),GAMEOBJECT_WHEEL:s(73802),MANAGER_BOOT:s(27503),MANAGER_PROCESS:s(50852),MANAGER_UPDATE:s(96438),POINTER_DOWN:s(47777),POINTER_DOWN_OUTSIDE:s(27957),POINTER_MOVE:s(19444),POINTER_OUT:s(54251),POINTER_OVER:s(18667),POINTER_UP:s(27192),POINTER_UP_OUTSIDE:s(24652),POINTER_WHEEL:s(45132),POINTERLOCK_CHANGE:s(59152),PRE_UPDATE:s(44512),SHUTDOWN:s(15757),START:s(41637),UPDATE:s(93802)}}),97421:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h){this.pad=l,this.events=l.events,this.index=h,this.value=0,this.threshold=.1},update:function(u){this.value=u},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});C.exports=y}),28884:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(92734),u=new g({initialize:function(h,r){this.pad=h,this.events=h.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(l){this.value=l;var h=this.pad,r=this.index;l>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(y.BUTTON_DOWN,h,this,l),this.pad.emit(y.GAMEPAD_BUTTON_DOWN,r,l,this)):this.pressed&&(this.pressed=!1,this.events.emit(y.BUTTON_UP,h,this,l),this.pad.emit(y.GAMEPAD_BUTTON_UP,r,l,this))},destroy:function(){this.pad=null,this.events=null}});C.exports=u}),99125:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(97421),y=s(28884),u=s(83419),l=s(50792),h=s(26099),r=new u({Extends:l,initialize:function(d,a){l.call(this),this.manager=d,this.pad=a,this.id=a.id,this.index=a.index;for(var f=[],v=0;v<a.buttons.length;v++)f.push(new y(this,v));this.buttons=f;var c=[];for(v=0;v<a.axes.length;v++)c.push(new g(this,v));this.axes=c,this.vibration=a.vibrationActuator;var p={value:0,pressed:!1};this._LCLeft=f[14]?f[14]:p,this._LCRight=f[15]?f[15]:p,this._LCTop=f[12]?f[12]:p,this._LCBottom=f[13]?f[13]:p,this._RCLeft=f[2]?f[2]:p,this._RCRight=f[1]?f[1]:p,this._RCTop=f[3]?f[3]:p,this._RCBottom=f[0]?f[0]:p,this._FBLeftTop=f[4]?f[4]:p,this._FBLeftBottom=f[6]?f[6]:p,this._FBRightTop=f[5]?f[5]:p,this._FBRightBottom=f[7]?f[7]:p;var m={value:0};this._HAxisLeft=c[0]?c[0]:m,this._VAxisLeft=c[1]?c[1]:m,this._HAxisRight=c[2]?c[2]:m,this._VAxisRight=c[3]?c[3]:m,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(o){return this.axes[o].getValue()},setAxisThreshold:function(o){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=o},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(o){return this.buttons[o].value},isButtonDown:function(o){return this.buttons[o].pressed},update:function(o){if(!(o.timestamp<this._created)){var d,a=this.buttons,f=o.buttons,v=a.length;for(d=0;d<v;d++)a[d].update(f[d].value);var c=this.axes,p=o.axes;for(v=c.length,d=0;d<v;d++)c[d].update(p[d]);v>=2&&(this.leftStick.set(c[0].getValue(),c[1].getValue()),v>=4&&this.rightStick.set(c[2].getValue(),c[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var o;for(o=0;o<this.buttons.length;o++)this.buttons[o].destroy();for(o=0;o<this.axes.length;o++)this.axes[o].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});C.exports=r}),56654:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50792),u=s(92734),l=s(99125),h=s(35154),r=s(89639),o=s(8214),d=new g({Extends:y,initialize:function(f){y.call(this),this.scene=f.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=f,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,f.pluginEvents.once(o.BOOT,this.boot,this),f.pluginEvents.on(o.START,this.start,this)},boot:function(){var a=this.scene.sys.game,f=this.settings.input,v=a.config;this.enabled=h(f,"gamepad",v.inputGamepad)&&a.device.input.gamepads,this.target=h(f,"gamepad.target",v.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var a=this,f=this.target,v=function(c){c.defaultPrevented||!a.isActive()||(a.refreshPads(),a.queue.push(c))};this.onGamepadHandler=v,f.addEventListener("gamepadconnected",v,!1),f.addEventListener("gamepaddisconnected",v,!1),this.sceneInputPlugin.pluginEvents.on(o.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(o.UPDATE,this.update);for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].removeAllListeners()},disconnectAll:function(){for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].pad.connected=!1},refreshPads:function(){var a=navigator.getGamepads();if(!a)this.disconnectAll();else for(var f=this.gamepads,v=0;v<a.length;v++){var c=a[v];if(c){var p=c.id,m=c.index,T=f[m];if(T)T.id!==p?(T.destroy(),f[m]=new l(this,c)):T.update(c);else{var E=new l(this,c);f[m]=E,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=E):this._pad3=E:this._pad2=E:this._pad1=E}}}},getAll:function(){for(var a=[],f=this.gamepads,v=0;v<f.length;v++)f[v]&&a.push(f[v]);return a},getPad:function(a){for(var f=this.gamepads,v=0;v<f.length;v++)if(f[v]&&f[v].index===a)return f[v]},update:function(){if(this.enabled){this.refreshPads();var a=this.queue.length;if(a!==0)for(var f=this.queue.splice(0,a),v=0;v<a;v++){var c=f[v],p=this.getPad(c.gamepad.index);c.type==="gamepadconnected"?this.emit(u.CONNECTED,p,c):c.type==="gamepaddisconnected"&&this.emit(u.DISCONNECTED,p,c)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var a=0;a<this.gamepads.length;a++)this.gamepads[a]&&this.gamepads[a].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),C.exports=d}),89651:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}}),65294:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),90089:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),64894:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={DUALSHOCK_4:s(65294),SNES_USB:s(89651),XBOX_360:s(90089)}}),46008:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="down"}),7629:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="up"}),42206:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="connected"}),86544:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="disconnected"}),94784:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="down"}),14325:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="up"}),92734:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BUTTON_DOWN:s(46008),BUTTON_UP:s(7629),CONNECTED:s(42206),DISCONNECTED:s(86544),GAMEPAD_BUTTON_DOWN:s(94784),GAMEPAD_BUTTON_UP:s(14325)}}),48646:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Axis:s(97421),Button:s(28884),Events:s(92734),Gamepad:s(99125),GamepadPlugin:s(56654),Configs:s(64894)}}),14350:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(93301),y=s(79291),u={CreatePixelPerfectHandler:s(84409),CreateInteractiveObject:s(74457),Events:s(8214),Gamepad:s(48646),InputManager:s(7003),InputPlugin:s(48205),InputPluginCache:s(89639),Keyboard:s(51442),Mouse:s(87078),Pointer:s(42515),Touch:s(95618)};u=y(!1,u,g),C.exports=u}),78970:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(72905),y=s(83419),u=s(8443),l=s(8214),h=s(46032),r=s(29747),o=new y({initialize:function(a){this.manager=a,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,a.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(u.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(f){if(!(f.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(f),d.manager.events.emit(l.MANAGER_PROCESS);var v=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;d.preventDefault&&!v&&d.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}},this.onKeyUp=function(f){if(!(f.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(f),d.manager.events.emit(l.MANAGER_PROCESS);var v=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;d.preventDefault&&!v&&d.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}};var a=this.target;a&&(a.addEventListener("keydown",this.onKeyDown,!1),a.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var a=this.captures,f=0;f<d.length;f++){var v=d[f];typeof v=="string"&&(v=h[v.trim().toUpperCase()]),a.indexOf(v)===-1&&a.push(v)}this.preventDefault=a.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var a=this.captures,f=0;f<d.length;f++){var v=d[f];typeof v=="string"&&(v=h[v.toUpperCase()]),g(a,v)}this.preventDefault=a.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(u.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});C.exports=o}),28846:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50792),u=s(95922),l=s(8443),h=s(35154),r=s(8214),o=s(89639),d=s(30472),a=s(46032),f=s(87960),v=s(74600),c=s(44594),p=s(56583),m=new g({Extends:y,initialize:function(E){y.call(this),this.game=E.systems.game,this.scene=E.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=E,this.manager=E.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,E.pluginEvents.once(r.BOOT,this.boot,this),E.pluginEvents.on(r.START,this.start,this)},boot:function(){var T=this.settings.input;this.enabled=h(T,"keyboard",!0);var E=h(T,"keyboard.capture",null);E&&this.addCaptures(E),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(l.BLUR,this.resetKeys,this),this.scene.sys.events.on(c.PAUSE,this.resetKeys,this),this.scene.sys.events.on(c.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(T){return this.manager.addCapture(T),this},removeCapture:function(T){return this.manager.removeCapture(T),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:a.UP,down:a.DOWN,left:a.LEFT,right:a.RIGHT,space:a.SPACE,shift:a.SHIFT})},addKeys:function(T,E,P){E===void 0&&(E=!0),P===void 0&&(P=!1);var w={};if(typeof T=="string"){T=T.split(",");for(var A=0;A<T.length;A++){var b=T[A].trim();b&&(w[b]=this.addKey(b,E,P))}}else for(var O in T)w[O]=this.addKey(T[O],E,P);return w},addKey:function(T,E,P){E===void 0&&(E=!0),P===void 0&&(P=!1);var w=this.keys;if(T instanceof d){var A=w.indexOf(T);return A>-1?w[A]=T:w[T.keyCode]=T,E&&this.addCapture(T.keyCode),T.setEmitOnRepeat(P),T}return typeof T=="string"&&(T=a[T.toUpperCase()]),w[T]||(w[T]=new d(this,T),E&&this.addCapture(T),w[T].setEmitOnRepeat(P)),w[T]},removeKey:function(T,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var w=this.keys,A;if(T instanceof d){var b=w.indexOf(T);b>-1&&(A=this.keys[b],this.keys[b]=void 0)}else typeof T=="string"&&(T=a[T.toUpperCase()]);return w[T]&&(A=w[T],w[T]=void 0),A&&(A.plugin=null,P&&this.removeCapture(A.keyCode),E&&A.destroy()),this},removeAllKeys:function(T,E){T===void 0&&(T=!1),E===void 0&&(E=!1);for(var P=this.keys,w=0;w<P.length;w++){var A=P[w];A&&(P[w]=void 0,E&&this.removeCapture(A.keyCode),T&&A.destroy())}return this},createCombo:function(T,E){return new f(this,T,E)},checkDown:function(T,E){if(E===void 0&&(E=0),this.enabled&&T.isDown){var P=p(this.time-T.timeDown,E);if(P>T._tick)return T._tick=P,!0}return!1},update:function(){var T=this.manager.queue,E=T.length;if(!(!this.isActive()||E===0))for(var P=this.keys,w=0;w<E;w++){var A=T[w],b=A.keyCode,O=P[b],I=!1;A.cancelled===void 0&&(A.cancelled=0,A.stopImmediatePropagation=function(){A.cancelled=1},A.stopPropagation=function(){A.cancelled=-1}),A.cancelled!==-1&&(b===this.prevCode&&A.timeStamp===this.prevTime&&A.type===this.prevType||(this.prevCode=b,this.prevTime=A.timeStamp,this.prevType=A.type,A.type==="keydown"?(O&&(I=O.isDown,O.onDown(A)),!A.cancelled&&(!O||!I)&&(v[b]&&this.emit(u.KEY_DOWN+v[b],A),A.cancelled||this.emit(u.ANY_KEY_DOWN,A))):(O&&O.onUp(A),A.cancelled||(v[b]&&this.emit(u.KEY_UP+v[b],A),A.cancelled||this.emit(u.ANY_KEY_UP,A))),A.cancelled===1&&(A.cancelled=0)))}},resetKeys:function(){for(var T=this.keys,E=0;E<T.length;E++)T[E]&&T[E].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(l.BLUR,this.resetKeys),this.scene.sys.events.off(c.PAUSE,this.resetKeys,this),this.scene.sys.events.off(c.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var T=this.keys,E=0;E<T.length;E++)T[E]&&T[E].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});o.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),C.exports=m}),66970:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g.timeLastMatched=s.timeStamp,g.index++,g.index===g.size?!0:(g.current=g.keyCodes[g.index],!1)};C.exports=R}),87960:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95922),u=s(95540),l=s(68769),h=s(92803),r=new g({initialize:function(d,a,f){if(f===void 0&&(f={}),a.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var v=0;v<a.length;v++){var c=a[v];typeof c=="string"?this.keyCodes.push(c.toUpperCase().charCodeAt(0)):typeof c=="number"?this.keyCodes.push(c):c.hasOwnProperty("keyCode")&&this.keyCodes.push(c.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=u(f,"resetOnWrongKey",!0),this.maxKeyDelay=u(f,"maxKeyDelay",0),this.resetOnMatch=u(f,"resetOnMatch",!1),this.deleteOnMatch=u(f,"deleteOnMatch",!1);var p=this,m=function(T){if(!(p.matched||!p.enabled)){var E=l(T,p);E&&(p.manager.emit(y.COMBO_MATCH,p,T),p.resetOnMatch?h(p):p.deleteOnMatch&&p.destroy())}};this.onKeyDown=m,this.manager.on(y.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(y.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});C.exports=r}),68769:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66970),y=function(u,l){if(l.matched)return!0;var h=!1,r=!1;if(u.keyCode===l.current)if(l.index>0&&l.maxKeyDelay>0){var o=l.timeLastMatched+l.maxKeyDelay;u.timeStamp<=o&&(r=!0,h=g(u,l))}else r=!0,h=g(u,l);return!r&&l.resetOnWrongKey&&(l.index=0,l.current=l.keyCodes[0]),h&&(l.timeLastMatched=u.timeStamp,l.matched=!0,l.timeMatched=u.timeStamp),h};C.exports=y}),92803:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.current=s.keyCodes[0],s.index=0,s.timeLastMatched=0,s.matched=!1,s.timeMatched=0,s};C.exports=R}),92612:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="keydown"}),23345:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="keyup"}),21957:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="keycombomatch"}),44743:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="down"}),3771:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="keydown-"}),46358:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="keyup-"}),75674:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="up"}),95922:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ANY_KEY_DOWN:s(92612),ANY_KEY_UP:s(23345),COMBO_MATCH:s(21957),DOWN:s(44743),KEY_DOWN:s(3771),KEY_UP:s(46358),UP:s(75674)}}),51442:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Events:s(95922),KeyboardManager:s(78970),KeyboardPlugin:s(28846),Key:s(30472),KeyCodes:s(46032),KeyCombo:s(87960),AdvanceKeyCombo:s(66970),ProcessKeyCombo:s(68769),ResetKeyCombo:s(92803),JustDown:s(90229),JustUp:s(38796),DownDuration:s(37015),UpDuration:s(41170)}}),37015:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=50);var y=s.plugin.game.loop.time-s.timeDown;return s.isDown&&y<g};C.exports=R}),90229:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s._justDown?(s._justDown=!1,!0):!1};C.exports=R}),38796:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s._justUp?(s._justUp=!1,!0):!1};C.exports=R}),30472:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50792),u=s(95922),l=new g({Extends:y,initialize:function(r,o){y.call(this),this.plugin=r,this.keyCode=o,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u.UP,this,h))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});C.exports=l}),46032:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};C.exports=R}),74600:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(46032),y={};for(var u in g)y[g[u]]=u;C.exports=y}),41170:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=50);var y=s.plugin.game.loop.time-s.timeUp;return s.isUp&&y<g};C.exports=R}),85098:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(89357),u=s(8214),l=s(29747),h=new g({initialize:function(o){this.manager=o,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=l,this.onMouseDown=l,this.onMouseUp=l,this.onMouseDownWindow=l,this.onMouseUpWindow=l,this.onMouseOver=l,this.onMouseOut=l,this.onMouseWheel=l,this.pointerLockChange=l,this.isTop=!0,o.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(y.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){y.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(r){var o=this,d=this.manager,a=d.canvas,f=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(c){!c.defaultPrevented&&o.enabled&&d&&d.enabled&&(d.onMouseMove(c),o.preventDefaultMove&&c.preventDefault())},this.onMouseDown=function(c){f&&window.focus(),!c.defaultPrevented&&o.enabled&&d&&d.enabled&&(d.onMouseDown(c),o.preventDefaultDown&&c.target===a&&c.preventDefault())},this.onMouseDownWindow=function(c){c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents||!c.defaultPrevented&&o.enabled&&d&&d.enabled&&c.target!==a&&d.onMouseDown(c)},this.onMouseUp=function(c){!c.defaultPrevented&&o.enabled&&d&&d.enabled&&(d.onMouseUp(c),o.preventDefaultUp&&c.target===a&&c.preventDefault())},this.onMouseUpWindow=function(c){c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents||!c.defaultPrevented&&o.enabled&&d&&d.enabled&&c.target!==a&&d.onMouseUp(c)},this.onMouseOver=function(c){!c.defaultPrevented&&o.enabled&&d&&d.enabled&&d.setCanvasOver(c)},this.onMouseOut=function(c){!c.defaultPrevented&&o.enabled&&d&&d.enabled&&d.setCanvasOut(c)},this.onMouseWheel=function(c){!c.defaultPrevented&&o.enabled&&d&&d.enabled&&d.onMouseWheel(c),o.preventDefaultWheel&&c.target===a&&c.preventDefault()};var v={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,v),r.addEventListener("mouseout",this.onMouseOut,v),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,v),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,v),window.top.addEventListener("mouseup",this.onMouseUpWindow,v)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,v),window.addEventListener("mouseup",this.onMouseUpWindow,v),this.isTop=!1}y.pointerLock&&(this.pointerLockChange=function(c){var p=o.target;o.locked=document.pointerLockElement===p||document.mozPointerLockElement===p||document.webkitPointerLockElement===p,d.onPointerLockChange(c)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),y.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});C.exports=h}),87078:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={MouseManager:s(85098)}}),36210:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(8214),u=s(29747),l=new g({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=u,this.onTouchStartWindow=u,this.onTouchMove=u,this.onTouchEnd=u,this.onTouchEndWindow=u,this.onTouchCancel=u,this.onTouchCancelWindow=u,this.isTop=!0,r.events.once(y.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this.target;if(h){var r=this,o=this.manager,d=o.canvas,a=window&&window.focus&&o.game.config.autoFocus;this.onTouchMove=function(p){!p.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onTouchMove(p),r.capture&&p.cancelable&&p.preventDefault())},this.onTouchStart=function(p){a&&window.focus(),!p.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onTouchStart(p),r.capture&&p.cancelable&&p.target===d&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&r.enabled&&o&&o.enabled&&p.target!==d&&o.onTouchStart(p)},this.onTouchEnd=function(p){!p.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onTouchEnd(p),r.capture&&p.cancelable&&p.target===d&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&r.enabled&&o&&o.enabled&&p.target!==d&&o.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onTouchCancel(p),r.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&r.enabled&&o&&o.enabled&&o.onTouchCancel(p)};var f=this.capture,v={passive:!0},c={passive:!1};if(h.addEventListener("touchstart",this.onTouchStart,f?c:v),h.addEventListener("touchmove",this.onTouchMove,f?c:v),h.addEventListener("touchend",this.onTouchEnd,f?c:v),h.addEventListener("touchcancel",this.onTouchCancel,f?c:v),window&&o.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,c),window.top.addEventListener("touchend",this.onTouchEndWindow,c),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,c)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,c),window.addEventListener("touchend",this.onTouchEndWindow,c),window.addEventListener("touchcancel",this.onTouchCancelWindow,c),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),window&&(h=this.isTop?window.top:window,h.removeEventListener("touchstart",this.onTouchStartWindow),h.removeEventListener("touchend",this.onTouchEndWindow),h.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});C.exports=l}),95618:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={TouchManager:s(36210)}}),41299:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(54899),l=s(95540),h=s(98356),r=s(3374),o=s(84376),d=s(92638),a=new g({initialize:function(v,c){if(this.loader=v,this.cache=l(c,"cache",!1),this.type=l(c,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=l(c,"key",!1);var p=this.key;if(v.prefix&&v.prefix!==""&&(this.key=v.prefix+p),!this.key)throw new Error("Invalid File key: "+this.key);var m=l(c,"url");m===void 0?m=v.path+p+"."+l(c,"extension",""):typeof m=="string"&&!m.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(m=v.path+m),this.url=m,this.src="",this.xhrSettings=d(l(c,"responseType",void 0)),l(c,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,l(c,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?y.FILE_POPULATED:y.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(c,"config",{}),this.multiFile,this.linkFile,this.base64=typeof m=="string"&&m.indexOf("data:")===0,this.retryAttempts=l(c,"maxRetries",v.maxRetries)},setLink:function(f){this.linkFile=f,f.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===y.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=y.FILE_LOADING,this.src=h(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=o(this,this.loader.xhr)}},onLoad:function(f,v){var c=f.responseURL&&this.loader.localSchemes.some(function(T){return f.responseURL.indexOf(T)===0}),p=c&&v.target.status===0,m=!(v.target&&v.target.status!==200)||p;f.readyState===4&&f.status>=400&&f.status<=599&&(m=!1),this.state=y.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,m)},onBase64Load:function(f){this.xhrLoader=f,this.state=y.FILE_LOADED,this.percentComplete=1,this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(f){f.lengthComputable&&(this.bytesLoaded=f.loaded,this.bytesTotal=f.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=y.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=y.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=y.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(f){if(this.state!==y.FILE_PENDING_DESTROY){f===void 0&&(f=this.data);var v=this.key,c=this.type;this.loader.emit(u.FILE_COMPLETE,v,c,f),this.loader.emit(u.FILE_KEY_COMPLETE+c+"-"+v,v,c,f),this.loader.flagForRemoval(this),this.state=y.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});a.createObjectURL=function(f,v,c){if(typeof URL=="function")f.src=URL.createObjectURL(v);else{var p=new FileReader;p.onload=function(){f.removeAttribute("crossOrigin"),f.src="data:"+(v.type||c)+";base64,"+p.result.split(",")[1]},p.onerror=f.onerror,p.readAsDataURL(v)}},a.revokeObjectURL=function(f){typeof URL=="function"&&URL.revokeObjectURL(f.src)},C.exports=a}),74099:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={},s={install:function(g){for(var y in R)g[y]=R[y]},register:function(g,y){R[g]=y},destroy:function(){R={}}};C.exports=s}),98356:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.url?s.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?s.url:g+s.url:!1};C.exports=R}),74261:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(35072),l=s(50792),h=s(54899),r=s(74099),o=s(95540),d=s(35154),a=s(41212),f=s(37277),v=s(44594),c=s(92638),p=new g({Extends:l,initialize:function(T){l.call(this);var E=T.sys.game.config,P=T.sys.settings.loader;this.scene=T,this.systems=T.sys,this.cacheManager=T.sys.cache,this.textureManager=T.sys.textures,this.sceneManager=T.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(o(P,"baseURL",E.loaderBaseURL)),this.setPath(o(P,"path",E.loaderPath)),this.setPrefix(o(P,"prefix",E.loaderPrefix)),this.maxParallelDownloads=o(P,"maxParallelDownloads",E.loaderMaxParallelDownloads),this.xhr=c(o(P,"responseType",E.loaderResponseType),o(P,"async",E.loaderAsync),o(P,"user",E.loaderUser),o(P,"password",E.loaderPassword),o(P,"timeout",E.loaderTimeout),o(P,"withCredentials",E.loaderWithCredentials)),this.crossOrigin=o(P,"crossOrigin",E.loaderCrossOrigin),this.imageLoadType=o(P,"imageLoadType",E.loaderImageLoadType),this.localSchemes=o(P,"localScheme",E.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new u,this.inflight=new u,this.queue=new u,this._deleteQueue=new u,this.totalFailed=0,this.totalComplete=0,this.state=y.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=o(P,"maxRetries",E.loaderMaxRetries),T.sys.events.once(v.BOOT,this.boot,this),T.sys.events.on(v.START,this.pluginStart,this)},boot:function(){this.systems.events.once(v.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(v.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.baseURL=m,this},setPath:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.path=m,this},setPrefix:function(m){return m===void 0&&(m=""),this.prefix=m,this},setCORS:function(m){return this.crossOrigin=m,this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var T=0;T<m.length;T++){var E=m[T];this.keyExists(E)||(this.list.set(E),this.emit(h.ADD,E.key,E.type,this,E),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var T=m.hasCacheConflict();return T||this.list.iterate(function(E){if(E.type===m.type&&E.key===m.key)return T=!0,!1}),!T&&this.isLoading()&&(this.inflight.iterate(function(E){if(E.type===m.type&&E.key===m.key)return T=!0,!1}),this.queue.iterate(function(E){if(E.type===m.type&&E.key===m.key)return T=!0,!1})),T},addPack:function(m,T){if(typeof T=="string"){var E=d(m,T);E&&(m={packKey:E})}var P=0,w=this.baseURL,A=this.path,b=this.prefix;for(var O in m)if(Object.prototype.hasOwnProperty.call(m,O)){var I=m[O],D=o(I,"baseURL",w),B=o(I,"path",A),k=o(I,"prefix",b),N=o(I,"files",null),H=o(I,"defaultType","void");if(Array.isArray(N)){this.setBaseURL(D),this.setPath(B),this.setPrefix(k);for(var $=0;$<N.length;$++){var J=N[$],q=J.hasOwnProperty("type")?J.type:H;this[q]&&(this[q](J),P++)}}}return this.setBaseURL(w),this.setPath(A),this.setPrefix(b),P>0},removePack:function(m,T){var E=this.systems.anims,P=this.cacheManager,w=this.textureManager,A={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},b;if(a(m))b=m;else if(b=P.json.get(m),!b){console.warn("Asset Pack not found in JSON cache:",m);return}T&&(b={_:b[T]});for(var O in b){var I=b[O],D=o(I,"prefix",""),B=o(I,"files"),k=o(I,"defaultType");if(Array.isArray(B))for(var N=0;N<B.length;N++){var H=B[N],$=H.hasOwnProperty("type")?H.type:k;if(!$){console.warn("No type:",H);continue}var J=D+H.key;if($==="animation"&&E.remove(J),!(($==="aseprite"||$==="atlas"||$==="atlasXML"||$==="htmlTexture"||$==="image"||$==="multiatlas"||$==="spritesheet"||$==="svg"||$==="texture"||$==="unityAtlas")&&(w.remove(J),!A[$]))){if($==="pack"){this.removePack(J,H.dataKey);continue}if($==="spine"){var q=P.custom.spine.get(J);if(!q)continue;var Y=q.prefix===void 0?"":q.prefix;P.custom.spine.remove(J);var K=P.custom.spineTextures.get(J);if(!K)continue;P.custom.spineTextures.remove(J);for(var V=0;V<K.pages.length;V++){var U=K.pages[V],Z=Y+U.name,et=J+":"+Z;w.exists(et)?w.remove(et):w.remove(Z)}}var st=A[$];if(st!==null){if(!st){console.warn("Unknown type:",$);continue}var rt=P[st];rt.remove(J)}}}}},isLoading:function(){return this.state===y.LOADER_LOADING||this.state===y.LOADER_PROCESSING},isReady:function(){return this.state===y.LOADER_IDLE||this.state===y.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=y.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(v.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===y.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if((m.state===y.FILE_POPULATED||m.state===y.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=this.crossOrigin),m.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,T){this.inflight&&(this.inflight.delete(m),this.updateProgress(),T?(this.totalComplete++,this.queue.set(m),this.emit(h.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(h.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(m.state===y.FILE_ERRORED?m.multiFile&&m.multiFile.onFileFailed(m):m.state===y.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&(m.multiFile.addToCache(),m.multiFile.pendingDestroy()):(m.addToCache(),m.pendingDestroy())),this.queue.delete(m),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=y.LOADER_COMPLETE,this.systems.events.off(v.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,T){return this.save(JSON.stringify(m),T)},save:function(m,T,E){T===void 0&&(T="file.json"),E===void 0&&(E="application/json");var P=new Blob([m],{type:E}),w=URL.createObjectURL(P),A=document.createElement("a");return A.download=T,A.textContent="Download "+T,A.href=w,A.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var m=this.systems.game.config,T=this.systems.settings.loader;this.setBaseURL(o(T,"baseURL",m.loaderBaseURL)),this.setPath(o(T,"path",m.loaderPath)),this.setPrefix(o(T,"prefix",m.loaderPrefix)),this.state=y.LOADER_IDLE},shutdown:function(){this.reset(),this.state=y.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=y.LOADER_DESTROYED,this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});f.register("Loader",p,"load"),C.exports=p}),3374:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(79291),y=s(92638),u=function(l,h){var r=l===void 0?y():g({},l);if(h)for(var o in h)h[o]!==void 0&&(r[o]=h[o]);return r};C.exports=u}),26430:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(54899),l=new g({initialize:function(r,o,d,a){var f=[];a.forEach(function(p){p&&f.push(p)}),this.loader=r,this.type=o,this.key=d;var v=this.key;r.prefix&&r.prefix!==""&&(this.key=r.prefix+v),this.multiKeyIndex=r.multiKeyIndex++,this.files=f,this.state=y.FILE_PENDING,this.complete=!1,this.pending=f.length,this.failed=0,this.config={},this.baseURL=r.baseURL,this.path=r.path,this.prefix=r.prefix;for(var c=0;c<f.length;c++)f[c].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(h){return this.files.push(h),h.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(h){var r=this.files.indexOf(h);r!==-1&&this.pending--},onFileFailed:function(h){var r=this.files.indexOf(h);r!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,h.type,h.key))},pendingDestroy:function(){if(this.state!==y.FILE_PENDING_DESTROY){var h=this.key,r=this.type;this.loader.emit(u.FILE_COMPLETE,h,r),this.loader.emit(u.FILE_KEY_COMPLETE+r+"-"+h,h,r),this.loader.flagForRemoval(this);for(var o=0;o<this.files.length;o++)this.files[o].pendingDestroy();this.state=y.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});C.exports=l}),84376:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(3374),y=function(u,l){var h=g(l,u.xhrSettings);if(u.base64){var r=u.url.split(";base64,").pop()||u.url.split(",").pop(),o={responseText:atob(r)};u.onBase64Load(o);return}var d=new XMLHttpRequest;if(d.open("GET",u.src,h.async,h.user,h.password),d.responseType=u.xhrSettings.responseType,d.timeout=h.timeout,h.headers)for(var a in h.headers)d.setRequestHeader(a,h.headers[a]);return h.header&&h.headerValue&&d.setRequestHeader(h.header,h.headerValue),h.requestedWith&&d.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&d.overrideMimeType(h.overrideMimeType),h.withCredentials&&(d.withCredentials=!0),d.onload=u.onLoad.bind(u,d),d.onerror=u.onError.bind(u,d),d.onprogress=u.onProgress.bind(u),d.ontimeout=u.onError.bind(u,d),d.send(),d};C.exports=y}),92638:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l,h){return s===void 0&&(s=""),g===void 0&&(g=!0),y===void 0&&(y=""),u===void 0&&(u=""),l===void 0&&(l=0),h===void 0&&(h=!1),{responseType:s,async:g,user:y,password:u,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}};C.exports=R}),23906:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};C.exports=R}),42155:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="addfile"}),38991:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="complete"}),27540:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="filecomplete"}),87464:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="filecomplete-"}),94486:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="loaderror"}),13035:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="load"}),38144:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="fileprogress"}),97520:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="postprocess"}),85595:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="progress"}),55680:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="start"}),54899:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ADD:s(42155),COMPLETE:s(38991),FILE_COMPLETE:s(27540),FILE_KEY_COMPLETE:s(87464),FILE_LOAD_ERROR:s(94486),FILE_LOAD:s(13035),FILE_PROGRESS:s(38144),POST_PROCESS:s(97520),PROGRESS:s(85595),START:s(55680)}}),14135:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(518),l=s(54899),h=new g({Extends:u,initialize:function(o,d,a,f,v){u.call(this,o,d,a,f,v),this.type="animationJSON"},onProcess:function(){this.loader.once(l.POST_PROCESS,this.onLoadComplete,this),u.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});y.register("animation",function(r,o,d,a){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new h(this,r[f]));else this.addFile(new h(this,r,o,a,d));return this}),C.exports=h}),76272:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(95540),l=s(19550),h=s(41212),r=s(518),o=s(26430),d=new g({Extends:o,initialize:function(f,v,c,p,m,T){var E,P;if(h(v)){var w=v;v=u(w,"key"),E=new l(f,{key:v,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),P=new r(f,{key:v,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","json"),xhrSettings:u(w,"atlasXhrSettings")})}else E=new l(f,v,c,m),P=new r(f,v,p,T);E.linkFile?o.call(this,f,"atlasjson",v,[E,P,E.linkFile]):o.call(this,f,"atlasjson",v,[E,P])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,f.data,v),f.addToCache(),this.complete=!0}}});y.register("aseprite",function(a,f,v,c,p){var m;if(Array.isArray(a))for(var T=0;T<a.length;T++)m=new d(this,a[T]),this.addFile(m.files);else m=new d(this,a,f,v,c,p),this.addFile(m.files);return this}),C.exports=d}),38734:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(95540),l=s(19550),h=s(41212),r=s(518),o=s(26430),d=new g({Extends:o,initialize:function(f,v,c,p,m,T){var E,P;if(h(v)){var w=v;v=u(w,"key"),E=new l(f,{key:v,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),P=new r(f,{key:v,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","json"),xhrSettings:u(w,"atlasXhrSettings")})}else E=new l(f,v,c,m),P=new r(f,v,p,T);E.linkFile?o.call(this,f,"atlasjson",v,[E,P,E.linkFile]):o.call(this,f,"atlasjson",v,[E,P])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,f.data,v),this.complete=!0}}});y.register("atlas",function(a,f,v,c,p){var m;if(Array.isArray(a))for(var T=0;T<a.length;T++)m=new d(this,a[T]),this.addFile(m.files);else m=new d(this,a,f,v,c,p),this.addFile(m.files);return this}),C.exports=d}),74599:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(95540),l=s(19550),h=s(41212),r=s(26430),o=s(57318),d=new g({Extends:r,initialize:function(f,v,c,p,m,T){var E,P;if(h(v)){var w=v;v=u(w,"key"),E=new l(f,{key:v,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),P=new o(f,{key:v,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","xml"),xhrSettings:u(w,"atlasXhrSettings")})}else E=new l(f,v,c,m),P=new o(f,v,p,T);E.linkFile?r.call(this,f,"atlasxml",v,[E,P,E.linkFile]):r.call(this,f,"atlasxml",v,[E,P])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(a.key,a.data,f.data,v),this.complete=!0}}});y.register("atlasXML",function(a,f,v,c,p){var m;if(Array.isArray(a))for(var T=0;T<a.length;T++)m=new d(this,a[T]),this.addFile(m.files);else m=new d(this,a,f,v,c,p),this.addFile(m.files);return this}),C.exports=d}),21097:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(89749),o=s(41212),d=new g({Extends:u,initialize:function(f,v,c,p,m){if(o(v)){var T=v;v=h(T,"key"),p=h(T,"xhrSettings"),m=h(T,"context",m)}var E={type:"audio",cache:f.cacheManager.audio,extension:c.type,responseType:"arraybuffer",key:v,url:c.url,xhrSettings:p,config:{context:m}};u.call(this,f,E)},onProcess:function(){this.state=y.FILE_PROCESSING;var a=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(f){a.data=f,a.onProcessComplete()},function(f){console.error("Error decoding audio: "+a.key+" - ",f?f.message:null),a.onProcessError()}),this.config.context=null}});d.create=function(a,f,v,c,p){var m=a.systems.game,T=m.config.audio,E=m.device.audio;o(f)&&(v=h(f,"url",[]),c=h(f,"config",{}));var P=d.getAudioURL(m,v);return P?E.webAudio&&!T.disableWebAudio?new d(a,f,P,p,m.sound.context):new r(a,f,P,c):(console.warn('No audio URLs for "%s" can play on this device',f),null)},d.getAudioURL=function(a,f){Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var c=h(f[v],"url",f[v]);if(c.indexOf("blob:")===0||c.indexOf("data:")===0)return{url:c,type:""};var p=c.match(/\.([a-zA-Z0-9]+)($|\?)/);if(p=h(f[v],"type",p?p[1]:"").toLowerCase(),a.device.audio[p])return{url:c,type:p}}return null},l.register("audio",function(a,f,v,c){var p=this.systems.game,m=p.config.audio,T=p.device.audio;if(m.noAudio||!T.webAudio&&!T.audioData)return this;var E;if(Array.isArray(a))for(var P=0;P<a.length;P++)E=d.create(this,a[P]),E&&this.addFile(E);else E=d.create(this,a,f,v,c),E&&this.addFile(E);return this}),C.exports=d}),89524:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(21097),y=s(83419),u=s(74099),l=s(95540),h=s(41212),r=s(518),o=s(26430),d=new y({Extends:o,initialize:function(f,v,c,p,m,T,E){if(h(v)){var P=v;v=l(P,"key"),c=l(P,"jsonURL"),p=l(P,"audioURL"),m=l(P,"audioConfig"),T=l(P,"audioXhrSettings"),E=l(P,"jsonXhrSettings")}var w;if(!p)w=new r(f,v,c,E),o.call(this,f,"audiosprite",v,[w]),this.config.resourceLoad=!0,this.config.audioConfig=m,this.config.audioXhrSettings=T;else{var A=g.create(f,v,p,m,T);A&&(w=new r(f,v,c,E),o.call(this,f,"audiosprite",v,[A,w]),this.config.resourceLoad=!1)}},onFileComplete:function(a){var f=this.files.indexOf(a);if(f!==-1&&(this.pending--,this.config.resourceLoad&&a.type==="json"&&a.data.hasOwnProperty("resources"))){var v=a.data.resources,c=l(this.config,"audioConfig"),p=l(this.config,"audioXhrSettings"),m=g.create(this.loader,a.key,v,c,p);m&&(this.addToMultiFile(m),this.loader.addFile(m))}},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],f=this.files[1];a.addToCache(),f.addToCache(),this.complete=!0}}});u.register("audioSprite",function(a,f,v,c,p,m){var T=this.systems.game,E=T.config.audio,P=T.device.audio;if(E&&E.noAudio||!P.webAudio&&!P.audioData)return this;var w;if(Array.isArray(a))for(var A=0;A<a.length;A++)w=new d(this,a[A]),w.files&&this.addFile(w.files);else w=new d(this,a,f,v,c,p,m),w.files&&this.addFile(w.files);return this})}),85722:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c,p){var m="bin";if(r(f)){var T=f;f=h(T,"key"),v=h(T,"url"),c=h(T,"xhrSettings"),m=h(T,"extension",m),p=h(T,"dataType",p)}var E={type:"binary",cache:a.cacheManager.binary,extension:m,responseType:"arraybuffer",key:f,url:v,xhrSettings:c,config:{dataType:p}};u.call(this,a,E)},onProcess:function(){this.state=y.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});l.register("binary",function(d,a,f,v){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new o(this,d[c]));else this.addFile(new o(this,d,a,v,f));return this}),C.exports=o}),97025:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(95540),l=s(19550),h=s(41212),r=s(26430),o=s(21859),d=s(57318),a=new g({Extends:r,initialize:function(v,c,p,m,T,E){var P,w;if(h(c)){var A=c;c=u(A,"key"),P=new l(v,{key:c,url:u(A,"textureURL"),extension:u(A,"textureExtension","png"),normalMap:u(A,"normalMap"),xhrSettings:u(A,"textureXhrSettings")}),w=new d(v,{key:c,url:u(A,"fontDataURL"),extension:u(A,"fontDataExtension","xml"),xhrSettings:u(A,"fontDataXhrSettings")})}else P=new l(v,c,p,T),w=new d(v,c,m,E);P.linkFile?r.call(this,v,"bitmapfont",c,[P,w,P.linkFile]):r.call(this,v,"bitmapfont",c,[P,w])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1];f.addToCache();var c=f.cache.get(f.key),p=o(v.data,f.cache.getFrame(f.key),0,0,c);this.loader.cacheManager.bitmapFont.add(f.key,{data:p,texture:f.key,frame:null}),this.complete=!0}}});y.register("bitmapFont",function(f,v,c,p,m){var T;if(Array.isArray(f))for(var E=0;E<f.length;E++)T=new a(this,f[E]),this.addFile(T.files);else T=new a(this,f,v,c,p,m),this.addFile(T.files);return this}),C.exports=a}),16024:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c){var p="css";if(r(f)){var m=f;f=h(m,"key"),v=h(m,"url"),c=h(m,"xhrSettings"),p=h(m,"extension",p)}var T={type:"script",cache:!1,extension:p,responseType:"text",key:f,url:v,xhrSettings:c};u.call(this,a,T)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("css",function(d,a,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new o(this,d[v]));else this.addFile(new o(this,d,a,f));return this}),C.exports=o}),69559:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(38734),y=s(85722),u=s(83419),l=s(74099),h=s(95540),r=s(19550),o=s(41212),d=s(518),a=s(31403),f=s(46975),v=s(59327),c=s(26430),p=s(82038),m=s(55222),T=new u({Extends:c,initialize:function(P,w,A,b){if(A.multiAtlasURL){var O=new d(P,{key:w,url:A.multiAtlasURL,xhrSettings:b,config:A});c.call(this,P,"texture",w,[O])}else{var I=A.textureURL.substr(A.textureURL.length-3);A.type||(A.type=I.toLowerCase()==="ktx"?"KTX":"PVR");var D=new y(P,{key:w,url:A.textureURL,extension:I,xhrSettings:b,config:A});if(A.atlasURL){var B=new d(P,{key:w,url:A.atlasURL,xhrSettings:b,config:A});c.call(this,P,"texture",w,[D,B])}else c.call(this,P,"texture",w,[D])}this.config=A},onFileComplete:function(E){var P=this.files.indexOf(E);if(P!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(E.type==="json"&&E.data.hasOwnProperty("textures")){var w=E.data.textures,A=this.config,b=this.loader,O=b.baseURL,I=b.path,D=b.prefix,B=h(A,"multiBaseURL",this.baseURL),k=h(A,"multiPath",this.path),N=h(A,"prefix",this.prefix),H=h(A,"textureXhrSettings");B&&b.setBaseURL(B),k&&b.setPath(k),N&&b.setPrefix(N);for(var $=0;$<w.length;$++){var J=w[$].image,q="CMA"+this.multiKeyIndex+"_"+J,Y=new y(b,q,J,H);if(this.addToMultiFile(Y),b.addFile(Y),w[$].normalMap){var K=new y(b,q,w[$].normalMap,H);K.type="normalMap",Y.setLink(K),this.addToMultiFile(K),b.addFile(K)}}b.setBaseURL(O),b.setPath(I),b.setPrefix(D)}}},addToCache:function(){function E(B){console.warn('Compressed Texture Invalid: "'+O.key+'". '+B)}if(this.isReadyToProcess()){var P=this.config;if(P.multiAtlasURL)this.addMultiToCache();else{var w=this.loader.systems.renderer,A=this.loader.textureManager,b,O=this.files[0],I=this.files[1];if(P.type==="PVR"?b=p(O.data):P.type==="KTX"&&(b=a(O.data),b||E("KTX file contains unsupported format.")),b&&!m(b)&&(E("Texture dimensions failed verification. Check the texture format specifications for "+P.format+" 0x"+b.internalFormat.toString(16)+"."),b=null),b&&!w.supportsCompressedTexture(P.format,b.internalFormat)&&(E("Texture format "+P.format+" with internal format "+b.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),b=null),b){b.format=w.getCompressedTextureName(P.format,b.internalFormat);var D=I&&I.data?I.data:null;A.addCompressedTexture(O.key,b,D)}}this.complete=!0}},addMultiToCache:function(){for(var E=this.config,P=this.files[0],w=[],A=[],b=[],O=this.loader.systems.renderer,I=this.loader.textureManager,D,B=1;B<this.files.length;B++){var k=this.files[B];if(k.type!=="normalMap")for(var N=k.key.indexOf("_"),H=k.key.substr(N+1),$=k.data,J=0;J<P.data.textures.length;J++){var q=P.data.textures[J];if(q.image===H){E.type==="PVR"?D=p($):E.type==="KTX"&&(D=a($)),D&&O.supportsCompressedTexture(E.format,D.internalFormat)&&(D.format=O.getCompressedTextureName(E.format,D.internalFormat),A.push(D),w.push(q),k.linkFile&&b.push(k.linkFile.data));break}}}b.length===0&&(b=void 0),I.addAtlasJSONArray(this.key,A,w,b),this.complete=!0}});l.register("texture",function(E,P,w){var A=this.systems.renderer,b=function(I,D,B,k){var N={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(o(D)){var H=D;D=h(H,"key"),B=h(H,"url"),k=h(H,"xhrSettings")}var $=!1;for(var J in B)if(A.supportsCompressedTexture(J)){var q=B[J];typeof q=="string"?N.textureURL=q:N=f(q,N),N.format=J.toUpperCase(),$=!0;break}if(!$)console.warn("No supported compressed texture format or IMG fallback",D);else if(N.format==="IMG"){var Y,K;N.multiAtlasURL?(K=new v(I,D,N.multiAtlasURL,N.multiPath,N.multiBaseURL,k),Y=K.files):N.atlasURL?(K=new g(I,D,N.textureURL,N.atlasURL,k),Y=K.files):Y=new r(I,D,N.textureURL,k),I.addFile(Y)}else{var V=new T(I,D,N,k);I.addFile(V.files)}};if(Array.isArray(E))for(var O=0;O<E.length;O++)b(this,E[O]);else b(this,E,P,w);return this}),C.exports=T}),87674:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(98356),o=s(41212),d=new g({Extends:u,initialize:function(f,v,c,p,m,T){var E="ttf";if(o(v)){var P=v;v=h(P,"key"),c=h(P,"url"),p=h(P,"format","truetype"),m=h(P,"descriptors",null),T=h(P,"xhrSettings"),E=h(P,"extension",E)}else p===void 0&&(p="truetype");var w={type:"font",cache:!1,extension:E,responseType:"text",key:v,url:c,xhrSettings:T};u.call(this,f,w),this.data={format:p,descriptors:m},this.state=y.FILE_POPULATED},onProcess:function(){this.state=y.FILE_PROCESSING,this.src=r(this,this.loader.baseURL);var a,f=this.key,v="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?a=new FontFace(f,v,this.data.descriptors):a=new FontFace(f,v);var c=this;a.load().then(function(){document.fonts.add(a),document.body.classList.add("fonts-loaded"),c.onProcessComplete()}).catch(function(){console.warn("Font failed to load",v),c.onProcessComplete()})}});l.register("font",function(a,f,v,c,p){if(Array.isArray(a))for(var m=0;m<a.length;m++)this.addFile(new d(this,a[m]));else this.addFile(new d(this,a,f,v,c,p));return this}),C.exports=d}),47931:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=s(73894),d=new g({Extends:u,initialize:function(f,v,c,p,m){var T="glsl";if(r(v)){var E=v;v=h(E,"key"),c=h(E,"url"),p=h(E,"shaderType","fragment"),m=h(E,"xhrSettings"),T=h(E,"extension",T)}else p===void 0&&(p="fragment");var P={type:"glsl",cache:f.cacheManager.shader,extension:T,responseType:"text",key:v,url:c,config:{shaderType:p},xhrSettings:m};u.call(this,f,P)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a=this.data.split(`
`),f=this.extractBlock(a,0);if(f)for(;f;){var v=this.getShaderName(f.header),c=this.getShaderType(f.header),p=this.getShaderUniforms(f.header),m=f.shader;if(this.cache.has(v)){var T=this.cache.get(v);c==="fragment"?T.fragmentSrc=m:T.vertexSrc=m,T.uniforms||(T.uniforms=p)}else c==="fragment"?this.cache.add(v,new o(v,m,"",p)):this.cache.add(v,new o(v,"",m,p));f=this.extractBlock(a,f.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new o(this.key,this.data)):this.cache.add(this.key,new o(this.key,"",this.data))},getShaderName:function(a){for(var f=0;f<a.length;f++){var v=a[f].trim();if(v.substring(0,5)==="name:")return v.substring(5).trim()}return this.key},getShaderType:function(a){for(var f=0;f<a.length;f++){var v=a[f].trim();if(v.substring(0,5)==="type:")return v.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(a){for(var f={},v=0;v<a.length;v++){var c=a[v].trim();if(c.substring(0,8)==="uniform."){var p=c.indexOf(":");if(p){var m=c.substring(8,p);try{f[m]=JSON.parse(c.substring(p+1))}catch{console.warn("Invalid uniform JSON: "+m)}}}}return f},extractBlock:function(a,f){for(var v=-1,c=-1,p=-1,m=!1,T=!1,E=[],P=[],w=f;w<a.length;w++){var A=a[w].trim();if(A==="---")if(v===-1)v=w,m=!0;else if(m)c=w,m=!1,T=!0;else{T=!1;break}else m?E.push(A):T&&(P.push(A),p=w)}return!m&&c!==-1?{header:E,shader:P.join(`
`),offset:p}:null}});l.register("glsl",function(a,f,v,c){if(Array.isArray(a))for(var p=0;p<a.length;p++)this.addFile(new d(this,a[p]));else this.addFile(new d(this,a,f,v,c));return this}),C.exports=d}),89749:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(54899),u=s(41299),l=s(95540),h=s(98356),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c){if(r(f)){var p=f;f=l(p,"key"),c=l(p,"config",c)}var m={type:"audio",cache:a.cacheManager.audio,extension:v.type,key:f,url:v.url,config:c};u.call(this,a,m),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var a=this.data[d];a.oncanplaythrough=null,a.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var a=d.target;a.oncanplaythrough=null,a.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(y.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var a=0;a<d;a++){var f=new Audio;f.dataset||(f.dataset={}),f.dataset.name=this.key+("0"+a).slice(-2),f.dataset.used="false",this.locked?f.dataset.locked="true":(f.dataset.locked="false",f.preload="auto",f.oncanplaythrough=this.onProgress.bind(this),f.onerror=this.onError.bind(this)),this.data.push(f)}for(a=0;a<this.data.length;a++)f=this.data[a],f.src=h(this,this.loader.baseURL),this.locked||f.load();this.locked&&setTimeout(this.onLoad.bind(this))}});C.exports=o}),88470:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c){var p="html";if(r(f)){var m=f;f=h(m,"key"),v=h(m,"url"),c=h(m,"xhrSettings"),p=h(m,"extension",p)}var T={type:"text",cache:a.cacheManager.html,extension:p,responseType:"text",key:f,url:v,xhrSettings:c};u.call(this,a,T)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("html",function(d,a,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new o(this,d[v]));else this.addFile(new o(this,d,a,f));return this}),C.exports=o}),14643:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c,p,m){c===void 0&&(c=512),p===void 0&&(p=512);var T="html";if(r(f)){var E=f;f=h(E,"key"),v=h(E,"url"),m=h(E,"xhrSettings"),T=h(E,"extension",T),c=h(E,"width",c),p=h(E,"height",p)}var P={type:"html",cache:a.textureManager,extension:T,responseType:"text",key:f,url:v,xhrSettings:m,config:{width:c,height:p}};u.call(this,a,P)},onProcess:function(){this.state=y.FILE_PROCESSING;var d=this.config.width,a=this.config.height,f=[];f.push('<svg width="'+d+'px" height="'+a+'px" viewBox="0 0 '+d+" "+a+'" xmlns="http://www.w3.org/2000/svg">'),f.push('<foreignObject width="100%" height="100%">'),f.push('<body xmlns="http://www.w3.org/1999/xhtml">'),f.push(this.xhrLoader.responseText),f.push("</body>"),f.push("</foreignObject>"),f.push("</svg>");var v=[f.join(`
`)],c=this;try{var p=new window.Blob(v,{type:"image/svg+xml;charset=utf-8"})}catch{c.state=y.FILE_ERRORED,c.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){u.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(c.data),c.onProcessError()},u.createObjectURL(this.data,p,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("htmlTexture",function(d,a,f,v,c){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new o(this,d[p]));else this.addFile(new o(this,d,a,f,v,c));return this}),C.exports=o}),19550:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=s(98356),d=new g({Extends:u,initialize:function a(f,v,c,p,m){var T="png",E;if(r(v)){var P=v;v=h(P,"key"),c=h(P,"url"),E=h(P,"normalMap"),p=h(P,"xhrSettings"),T=h(P,"extension",T),m=h(P,"frameConfig")}Array.isArray(c)&&(E=c[1],c=c[0]);var w={type:"image",cache:f.textureManager,extension:T,responseType:"blob",key:v,url:c,xhrSettings:p,config:m};if(u.call(this,f,w),E){var A=new a(f,this.key,E,p,m);A.type="normalMap",this.setLink(A),f.addFile(A)}this.useImageElementLoad=f.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){u.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(a.data),a.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var a=this.state;this.state=y.FILE_PROCESSING,a===y.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=y.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){a.state=y.FILE_LOADED,a.loader.nextFile(a,!0)},this.data.onerror=function(){a.loader.nextFile(a,!1)},this.data.src=this.src},addToCache:function(){var a=this.linkFile;a?a.state>=y.FILE_COMPLETE&&(a.type==="spritesheet"?a.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,a.data,this.data):this.cache.addImage(this.key,this.data,a.data)):this.cache.addImage(this.key,this.data)}});l.register("image",function(a,f,v){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new d(this,a[c]));else this.addFile(new d(this,a,f,v));return this}),C.exports=d}),518:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(35154),o=s(41212),d=new g({Extends:u,initialize:function(f,v,c,p,m){var T="json";if(o(v)){var E=v;v=h(E,"key"),c=h(E,"url"),p=h(E,"xhrSettings"),T=h(E,"extension",T),m=h(E,"dataKey",m)}var P={type:"json",cache:f.cacheManager.json,extension:T,responseType:"text",key:v,url:c,xhrSettings:p,config:m};u.call(this,f,P),o(c)&&(m?this.data=r(c,m):this.data=c,this.state=y.FILE_POPULATED)},onProcess:function(){if(this.state!==y.FILE_POPULATED){this.state=y.FILE_PROCESSING;try{var a=JSON.parse(this.xhrLoader.responseText)}catch(v){throw this.onProcessError(),v}var f=this.config;typeof f=="string"?this.data=r(a,f,a):this.data=a}this.onProcessComplete()}});l.register("json",function(a,f,v,c){if(Array.isArray(a))for(var p=0;p<a.length;p++)this.addFile(new d(this,a[p]));else this.addFile(new d(this,a,f,c,v));return this}),C.exports=d}),59327:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(95540),l=s(19550),h=s(41212),r=s(518),o=s(26430),d=new g({Extends:o,initialize:function(f,v,c,p,m,T,E){if(h(v)){var P=v;v=u(P,"key"),u(P,"url",!1)?c=u(P,"url"):c=u(P,"atlasURL"),T=u(P,"xhrSettings"),p=u(P,"path"),m=u(P,"baseURL"),E=u(P,"textureXhrSettings")}var w=new r(f,v,c,T);o.call(this,f,"multiatlas",v,[w]),this.config.path=p,this.config.baseURL=m,this.config.textureXhrSettings=E},onFileComplete:function(a){var f=this.files.indexOf(a);if(f!==-1&&(this.pending--,a.type==="json"&&a.data.hasOwnProperty("textures"))){var v=a.data.textures,c=this.config,p=this.loader,m=p.baseURL,T=p.path,E=p.prefix,P=u(c,"baseURL",this.baseURL),w=u(c,"path",this.path),A=u(c,"prefix",this.prefix),b=u(c,"textureXhrSettings");p.setBaseURL(P),p.setPath(w),p.setPrefix(A);for(var O=0;O<v.length;O++){var I=v[O].image,D="MA"+this.multiKeyIndex+"_"+I,B=new l(p,D,I,b);if(this.addToMultiFile(B),p.addFile(B),v[O].normalMap){var k=new l(p,D,v[O].normalMap,b);k.type="normalMap",B.setLink(k),this.addToMultiFile(k),p.addFile(k)}}p.setBaseURL(m),p.setPath(T),p.setPrefix(E)}},addToCache:function(){if(this.isReadyToProcess()){for(var a=this.files[0],f=[],v=[],c=[],p=1;p<this.files.length;p++){var m=this.files[p];if(m.type!=="normalMap")for(var T=m.key.indexOf("_"),E=m.key.substr(T+1),P=m.data,w=0;w<a.data.textures.length;w++){var A=a.data.textures[w];if(A.image===E){v.push(P),f.push(A),m.linkFile&&c.push(m.linkFile.data);break}}}c.length===0&&(c=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,v,f,c),this.complete=!0}}});y.register("multiatlas",function(a,f,v,c,p){var m;if(Array.isArray(a))for(var T=0;T<a.length;T++)m=new d(this,a[T]),this.addFile(m.files);else m=new d(this,a,f,v,c,p),this.addFile(m.files);return this}),C.exports=d}),99297:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(95540),l=s(41212),h=s(26430),r=s(34328),o=new g({Extends:h,initialize:function(a,f,v,c){var p="js",m=[];if(l(f)){var T=f;f=u(T,"key"),v=u(T,"url"),c=u(T,"xhrSettings"),p=u(T,"extension",p)}Array.isArray(v)||(v=[v]);for(var E=0;E<v.length;E++){var P=new r(a,{key:f+"_"+E.toString(),url:v[E],extension:p,xhrSettings:c});P.onProcess=function(){this.onProcessComplete()},m.push(P)}h.call(this,a,"scripts",f,m)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var a=this.files[d];a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=a.xhrLoader.responseText,document.head.appendChild(a.data)}this.complete=!0}}});y.register("scripts",function(d,a,f){var v;if(Array.isArray(d))for(var c=0;c<d.length;c++)v=new o(this,d[c]),this.addFile(v.files);else v=new o(this,d,a,f),this.addFile(v.files);return this}),C.exports=o}),41846:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(95540),l=s(41212),h=s(26430),r=s(85048),o=s(61485),d=s(78776),a=new g({Extends:h,initialize:function(v,c,p,m,T,E){var P,w,A=v.cacheManager.obj;if(l(c)){var b=c;c=u(b,"key"),P=new d(v,{key:c,type:"obj",cache:A,url:u(b,"url"),extension:u(b,"extension","obj"),xhrSettings:u(b,"xhrSettings"),config:{flipUV:u(b,"flipUV",T)}}),m=u(b,"matURL"),m&&(w=new d(v,{key:c,type:"mat",cache:A,url:m,extension:u(b,"matExtension","mat"),xhrSettings:u(b,"xhrSettings")}))}else P=new d(v,{key:c,url:p,type:"obj",cache:A,extension:"obj",xhrSettings:E,config:{flipUV:T}}),m&&(w=new d(v,{key:c,url:m,type:"mat",cache:A,extension:"mat",xhrSettings:E}));h.call(this,v,"obj",c,[P,w])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],c=r(f.data,f.config.flipUV);v&&(c.materials=o(v.data)),f.cache.add(f.key,c),this.complete=!0}}});y.register("obj",function(f,v,c,p,m){var T;if(Array.isArray(f))for(var E=0;E<f.length;E++)T=new a(this,f[E]),this.addFile(T.files);else T=new a(this,f,v,c,p,m),this.addFile(T.files);return this}),C.exports=a}),58610:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(74099),l=s(518),h=new g({Extends:l,initialize:function(o,d,a,f,v){l.call(this,o,d,a,f,v),this.type="packfile"},onProcess:function(){if(this.state!==y.FILE_POPULATED&&(this.state=y.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var r={};r[this.config]=this.data,this.data=r}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});u.register("pack",function(r,o,d,a){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new h(this,r[f]));else this.addFile(new h(this,r,o,a,d));return this}),C.exports=h}),48988:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c,p,m){var T="js";if(r(f)){var E=f;f=h(E,"key"),v=h(E,"url"),m=h(E,"xhrSettings"),T=h(E,"extension",T),c=h(E,"start"),p=h(E,"mapping")}var P={type:"plugin",cache:!1,extension:T,responseType:"text",key:f,url:v,xhrSettings:m,config:{start:c,mapping:p}};u.call(this,a,P),typeof v=="function"&&(this.data=v,this.state=y.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,a=this.config,f=h(a,"start",!1),v=h(a,"mapping",null);if(this.state===y.FILE_POPULATED)d.install(this.key,this.data,f,v);else{this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var c=d.install(this.key,window[this.key],f,v);(f||v)&&(this.loader.systems[v]=c,this.loader.scene[v]=c)}this.onProcessComplete()}});l.register("plugin",function(d,a,f,v,c){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new o(this,d[p]));else this.addFile(new o(this,d,a,f,v,c));return this}),C.exports=o}),67397:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c,p){var m="svg";if(r(f)){var T=f;f=h(T,"key"),v=h(T,"url"),c=h(T,"svgConfig",{}),p=h(T,"xhrSettings"),m=h(T,"extension",m)}var E={type:"svg",cache:a.textureManager,extension:m,responseType:"text",key:f,url:v,xhrSettings:p,config:{width:h(c,"width"),height:h(c,"height"),scale:h(c,"scale")}};u.call(this,a,E)},onProcess:function(){this.state=y.FILE_PROCESSING;var d=this.xhrLoader.responseText,a=[d],f=this.config.width,v=this.config.height,c=this.config.scale;t:if(f&&v||c){var p=null,m=new DOMParser;p=m.parseFromString(d,"text/xml");var T=p.getElementsByTagName("svg")[0],E=T.hasAttribute("viewBox"),P=parseFloat(T.getAttribute("width")),w=parseFloat(T.getAttribute("height"));if(!E&&P&&w)T.setAttribute("viewBox","0  0 "+P+" "+w);else if(E&&!P&&!w){var A=T.getAttribute("viewBox").split(/\s+|,/);P=A[2],w=A[3]}if(c)if(P&&w)f=P*c,v=w*c;else break t;T.setAttribute("width",f.toString()+"px"),T.setAttribute("height",v.toString()+"px"),a=[new XMLSerializer().serializeToString(T)]}try{var b=new window.Blob(a,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,I=!1;this.data.onload=function(){I||u.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){I?O.onProcessError():(I=!0,u.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(a.join("")))},u.createObjectURL(this.data,b,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("svg",function(d,a,f,v){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new o(this,d[c]));else this.addFile(new o(this,d,a,f,v));return this}),C.exports=o}),88423:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c){var p="js";if(r(f)){var m=f;f=h(m,"key"),v=h(m,"url"),c=h(m,"xhrSettings"),p=h(m,"extension",p)}var T={type:"text",extension:p,responseType:"text",key:f,url:v,xhrSettings:c};u.call(this,a,T)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),a=eval;this.loader.sceneManager.add(this.key,a(d)),this.complete=!0}});l.register("sceneFile",function(d,a,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new o(this,d[v]));else this.addFile(new o(this,d,a,f));return this}),C.exports=o}),56812:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c,p,m){var T="js";if(r(f)){var E=f;f=h(E,"key"),v=h(E,"url"),m=h(E,"xhrSettings"),T=h(E,"extension",T),c=h(E,"systemKey"),p=h(E,"sceneKey")}var P={type:"scenePlugin",cache:!1,extension:T,responseType:"text",key:f,url:v,xhrSettings:m,config:{systemKey:c,sceneKey:p}};u.call(this,a,P),typeof v=="function"&&(this.data=v,this.state=y.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,a=this.config,f=this.key,v=h(a,"systemKey",f),c=h(a,"sceneKey",f);this.state===y.FILE_POPULATED?d.installScenePlugin(v,this.data,c,this.loader.scene,!0):(this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(v,window[this.key],c,this.loader.scene,!0)),this.onProcessComplete()}});l.register("scenePlugin",function(d,a,f,v,c){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new o(this,d[p]));else this.addFile(new o(this,d,a,f,v,c));return this}),C.exports=o}),34328:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c,p){var m="js";if(r(f)){var T=f;f=h(T,"key"),v=h(T,"url"),c=h(T,"type","script"),p=h(T,"xhrSettings"),m=h(T,"extension",m)}else c===void 0&&(c="script");var E={type:c,cache:!1,extension:m,responseType:"text",key:f,url:v,xhrSettings:p};u.call(this,a,E)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("script",function(d,a,f,v){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new o(this,d[c]));else this.addFile(new o(this,d,a,f,v));return this}),C.exports=o}),85035:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(74099),l=s(19550),h=new g({Extends:l,initialize:function(o,d,a,f,v){l.call(this,o,d,a,v,f),this.type="spritesheet"},addToCache:function(){var r=this.linkFile;r?r.state>=y.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,r.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,r.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});u.register("spritesheet",function(r,o,d,a){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new h(this,r[f]));else this.addFile(new h(this,r,o,d,a));return this}),C.exports=h}),78776:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=new g({Extends:u,initialize:function(a,f,v,c){var p="text",m="txt",T=a.cacheManager.text;if(r(f)){var E=f;f=h(E,"key"),v=h(E,"url"),c=h(E,"xhrSettings"),m=h(E,"extension",m),p=h(E,"type",p),T=h(E,"cache",T)}var P={type:p,cache:T,extension:m,responseType:"text",key:f,url:v,xhrSettings:c};u.call(this,a,P)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",function(d,a,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new o(this,d[v]));else this.addFile(new o(this,d,a,f));return this}),C.exports=o}),49477:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=s(80341),d=new g({Extends:u,initialize:function(f,v,c,p){var m="csv";if(r(v)){var T=v;v=h(T,"key"),c=h(T,"url"),p=h(T,"xhrSettings"),m=h(T,"extension",m)}var E={type:"tilemapCSV",cache:f.cacheManager.tilemap,extension:m,responseType:"text",key:v,url:c,xhrSettings:p};u.call(this,f,E),this.tilemapFormat=o.CSV},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,a)}});l.register("tilemapCSV",function(a,f,v){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new d(this,a[c]));else this.addFile(new d(this,a,f,v));return this}),C.exports=d}),40807:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(518),l=s(80341),h=new g({Extends:u,initialize:function(o,d,a,f){u.call(this,o,d,a,f),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var r={format:l.WELTMEISTER,data:this.data};this.cache.add(this.key,r)}});y.register("tilemapImpact",function(r,o,d){if(Array.isArray(r))for(var a=0;a<r.length;a++)this.addFile(new h(this,r[a]));else this.addFile(new h(this,r,o,d));return this}),C.exports=h}),56775:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(518),l=s(80341),h=new g({Extends:u,initialize:function(o,d,a,f){u.call(this,o,d,a,f),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var r={format:l.TILED_JSON,data:this.data};this.cache.add(this.key,r)}});y.register("tilemapTiledJSON",function(r,o,d){if(Array.isArray(r))for(var a=0;a<r.length;a++)this.addFile(new h(this,r[a]));else this.addFile(new h(this,r,o,d));return this}),C.exports=h}),25771:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(74099),u=s(95540),l=s(19550),h=s(41212),r=s(26430),o=s(78776),d=new g({Extends:r,initialize:function(f,v,c,p,m,T){var E,P;if(h(v)){var w=v;v=u(w,"key"),E=new l(f,{key:v,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),P=new o(f,{key:v,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","txt"),xhrSettings:u(w,"atlasXhrSettings")})}else E=new l(f,v,c,m),P=new o(f,v,p,T);E.linkFile?r.call(this,f,"unityatlas",v,[E,P,E.linkFile]):r.call(this,f,"unityatlas",v,[E,P])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(a.key,a.data,f.data,v),this.complete=!0}}});y.register("unityAtlas",function(a,f,v,c,p){var m;if(Array.isArray(a))for(var T=0;T<a.length;T++)m=new d(this,a[T]),this.addFile(m.files);else m=new d(this,a,f,v,c,p),this.addFile(m.files);return this}),C.exports=d}),33720:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(98356),r=s(95540),o=s(41212),d=new g({Extends:u,initialize:function(f,v,c,p){if(p===void 0&&(p=!1),o(v)){var m=v;v=r(m,"key"),c=r(m,"url",[]),p=r(m,"noAudio",!1)}var T=f.systems.game.device.video.getVideoURL(c);T||console.warn("VideoFile: No supported format for "+v);var E={type:"video",cache:f.cacheManager.video,extension:T.type,key:v,url:T.url,config:{noAudio:p}};u.call(this,f,E)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=h(this,this.loader.baseURL),this.state=y.FILE_LOADED,this.loader.nextFile(this,!0)}});l.register("video",function(a,f,v){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new d(this,a[c]));else this.addFile(new d(this,a,f,v));return this}),C.exports=d}),57318:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(23906),u=s(41299),l=s(74099),h=s(95540),r=s(41212),o=s(56836),d=new g({Extends:u,initialize:function(f,v,c,p){var m="xml";if(r(v)){var T=v;v=h(T,"key"),c=h(T,"url"),p=h(T,"xhrSettings"),m=h(T,"extension",m)}var E={type:"xml",cache:f.cacheManager.xml,extension:m,responseType:"text",key:v,url:c,xhrSettings:p};u.call(this,f,E)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=o(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});l.register("xml",function(a,f,v){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new d(this,a[c]));else this.addFile(new d(this,a,f,v));return this}),C.exports=d}),64589:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={AnimationJSONFile:s(14135),AsepriteFile:s(76272),AtlasJSONFile:s(38734),AtlasXMLFile:s(74599),AudioFile:s(21097),AudioSpriteFile:s(89524),BinaryFile:s(85722),BitmapFontFile:s(97025),CompressedTextureFile:s(69559),CSSFile:s(16024),FontFile:s(87674),GLSLFile:s(47931),HTML5AudioFile:s(89749),HTMLFile:s(88470),HTMLTextureFile:s(14643),ImageFile:s(19550),JSONFile:s(518),MultiAtlasFile:s(59327),MultiScriptFile:s(99297),OBJFile:s(41846),PackFile:s(58610),PluginFile:s(48988),SceneFile:s(88423),ScenePluginFile:s(56812),ScriptFile:s(34328),SpriteSheetFile:s(85035),SVGFile:s(67397),TextFile:s(78776),TilemapCSVFile:s(49477),TilemapImpactFile:s(40807),TilemapJSONFile:s(56775),UnityAtlasFile:s(25771),VideoFile:s(33720),XMLFile:s(57318)}}),57777:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(23906),y=s(79291),u={Events:s(54899),FileTypes:s(64589),File:s(41299),FileTypesManager:s(74099),GetURL:s(98356),LoaderPlugin:s(74261),MergeXHRSettings:s(3374),MultiFile:s(26430),XHRLoader:s(84376),XHRSettings:s(92638)};u=y(!1,u,g),C.exports=u}),53307:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){for(var g=0,y=0;y<s.length;y++)g+=+s[y];return g/s.length};C.exports=R}),85710:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(6411),y=function(u,l){return g(u)/g(l)/g(u-l)};C.exports=y}),30976:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return Math.floor(Math.random()*(g-s+1)+s)};C.exports=R}),87842:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l){var h=(u-g)*.5,r=(l-y)*.5,o=s*s,d=s*o;return(2*y-2*u+h+r)*d+(-3*y+3*u-2*h-r)*o+h*s+y};C.exports=R}),26302:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){g===void 0&&(g=0),y===void 0&&(y=10);var u=Math.pow(y,-g);return Math.ceil(s*u)/u};C.exports=R}),45319:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return Math.max(g,Math.min(y,s))};C.exports=R}),39506:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=function(u){return u*g.DEG_TO_RAD};C.exports=y}),61241:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return Math.abs(s-g)};C.exports=R}),38857:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(37867),l=s(29747),h=new u,r=new y({initialize:function o(d,a,f,v){d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v=o.DefaultOrder),this._x=d,this._y=a,this._z=f,this._order=v,this.onChangeCallback=l},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,d,a,f){return f===void 0&&(f=this._order),this._x=o,this._y=d,this._z=a,this._order=f,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,d,a){return d===void 0&&(d=this._order),a===void 0&&(a=!1),h.fromQuat(o),this.setFromRotationMatrix(h,d,a)},setFromRotationMatrix:function(o,d,a){d===void 0&&(d=this._order),a===void 0&&(a=!1);var f=o.val,v=f[0],c=f[4],p=f[8],m=f[1],T=f[5],E=f[9],P=f[2],w=f[6],A=f[10],b=0,O=0,I=0,D=.99999;switch(d){case"XYZ":{O=Math.asin(g(p,-1,1)),Math.abs(p)<D?(b=Math.atan2(-E,A),I=Math.atan2(-c,v)):b=Math.atan2(w,T);break}case"YXZ":{b=Math.asin(-g(E,-1,1)),Math.abs(E)<D?(O=Math.atan2(p,A),I=Math.atan2(m,T)):O=Math.atan2(-P,v);break}case"ZXY":{b=Math.asin(g(w,-1,1)),Math.abs(w)<D?(O=Math.atan2(-P,A),I=Math.atan2(-c,T)):I=Math.atan2(m,v);break}case"ZYX":{O=Math.asin(-g(P,-1,1)),Math.abs(P)<D?(b=Math.atan2(w,A),I=Math.atan2(m,v)):I=Math.atan2(-c,T);break}case"YZX":{I=Math.asin(g(m,-1,1)),Math.abs(m)<D?(b=Math.atan2(-E,T),O=Math.atan2(-P,v)):O=Math.atan2(p,A);break}case"XZY":{I=Math.asin(-g(c,-1,1)),Math.abs(c)<D?(b=Math.atan2(w,T),O=Math.atan2(p,v)):b=Math.atan2(-E,A);break}}return this._x=b,this._y=O,this._z=I,this._order=d,a&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",C.exports=r}),6411:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){if(s===0)return 1;for(var g=s;--s;)g*=s;return g};C.exports=R}),99472:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return Math.random()*(g-s)+s};C.exports=R}),77623:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){g===void 0&&(g=0),y===void 0&&(y=10);var u=Math.pow(y,-g);return Math.floor(s*u)/u};C.exports=R}),62945:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=function(u,l,h){return u=g(u,0,1),(h-l)*u+l};C.exports=y}),38265:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s/g/1e3};C.exports=R}),78702:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s==parseFloat(s)?!(s%2):void 0};C.exports=R}),94883:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s===parseFloat(s)?!(s%2):void 0};C.exports=R}),28915:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return(g-s)*y+s};C.exports=R}),94908:(C=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return y===void 0&&(y=0),s.clone().lerp(g,y)};C.exports=R}),94434:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l){this.val=new Float32Array(9),l?this.copy(l):this.identity()},clone:function(){return new y(this)},set:function(u){return this.copy(u)},copy:function(u){var l=this.val,h=u.val;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],this},fromMat4:function(u){var l=u.val,h=this.val;return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[4],h[4]=l[5],h[5]=l[6],h[6]=l[8],h[7]=l[9],h[8]=l[10],this},fromArray:function(u){var l=this.val;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=u[6],l[7]=u[7],l[8]=u[8],this},identity:function(){var u=this.val;return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,this},transpose:function(){var u=this.val,l=u[1],h=u[2],r=u[5];return u[1]=u[3],u[2]=u[6],u[3]=l,u[5]=u[7],u[6]=h,u[7]=r,this},invert:function(){var u=this.val,l=u[0],h=u[1],r=u[2],o=u[3],d=u[4],a=u[5],f=u[6],v=u[7],c=u[8],p=c*d-a*v,m=-c*o+a*f,T=v*o-d*f,E=l*p+h*m+r*T;return E?(E=1/E,u[0]=p*E,u[1]=(-c*h+r*v)*E,u[2]=(a*h-r*d)*E,u[3]=m*E,u[4]=(c*l-r*f)*E,u[5]=(-a*l+r*o)*E,u[6]=T*E,u[7]=(-v*l+h*f)*E,u[8]=(d*l-h*o)*E,this):null},adjoint:function(){var u=this.val,l=u[0],h=u[1],r=u[2],o=u[3],d=u[4],a=u[5],f=u[6],v=u[7],c=u[8];return u[0]=d*c-a*v,u[1]=r*v-h*c,u[2]=h*a-r*d,u[3]=a*f-o*c,u[4]=l*c-r*f,u[5]=r*o-l*a,u[6]=o*v-d*f,u[7]=h*f-l*v,u[8]=l*d-h*o,this},determinant:function(){var u=this.val,l=u[0],h=u[1],r=u[2],o=u[3],d=u[4],a=u[5],f=u[6],v=u[7],c=u[8];return l*(c*d-a*v)+h*(-c*o+a*f)+r*(v*o-d*f)},multiply:function(u){var l=this.val,h=l[0],r=l[1],o=l[2],d=l[3],a=l[4],f=l[5],v=l[6],c=l[7],p=l[8],m=u.val,T=m[0],E=m[1],P=m[2],w=m[3],A=m[4],b=m[5],O=m[6],I=m[7],D=m[8];return l[0]=T*h+E*d+P*v,l[1]=T*r+E*a+P*c,l[2]=T*o+E*f+P*p,l[3]=w*h+A*d+b*v,l[4]=w*r+A*a+b*c,l[5]=w*o+A*f+b*p,l[6]=O*h+I*d+D*v,l[7]=O*r+I*a+D*c,l[8]=O*o+I*f+D*p,this},translate:function(u){var l=this.val,h=u.x,r=u.y;return l[6]=h*l[0]+r*l[3]+l[6],l[7]=h*l[1]+r*l[4]+l[7],l[8]=h*l[2]+r*l[5]+l[8],this},rotate:function(u){var l=this.val,h=l[0],r=l[1],o=l[2],d=l[3],a=l[4],f=l[5],v=Math.sin(u),c=Math.cos(u);return l[0]=c*h+v*d,l[1]=c*r+v*a,l[2]=c*o+v*f,l[3]=c*d-v*h,l[4]=c*a-v*r,l[5]=c*f-v*o,this},scale:function(u){var l=this.val,h=u.x,r=u.y;return l[0]=h*l[0],l[1]=h*l[1],l[2]=h*l[2],l[3]=r*l[3],l[4]=r*l[4],l[5]=r*l[5],this},fromQuat:function(u){var l=u.x,h=u.y,r=u.z,o=u.w,d=l+l,a=h+h,f=r+r,v=l*d,c=l*a,p=l*f,m=h*a,T=h*f,E=r*f,P=o*d,w=o*a,A=o*f,b=this.val;return b[0]=1-(m+E),b[3]=c+A,b[6]=p-w,b[1]=c-A,b[4]=1-(v+E),b[7]=T+P,b[2]=p+w,b[5]=T-P,b[8]=1-(v+m),this},normalFromMat4:function(u){var l=u.val,h=this.val,r=l[0],o=l[1],d=l[2],a=l[3],f=l[4],v=l[5],c=l[6],p=l[7],m=l[8],T=l[9],E=l[10],P=l[11],w=l[12],A=l[13],b=l[14],O=l[15],I=r*v-o*f,D=r*c-d*f,B=r*p-a*f,k=o*c-d*v,N=o*p-a*v,H=d*p-a*c,$=m*A-T*w,J=m*b-E*w,q=m*O-P*w,Y=T*b-E*A,K=T*O-P*A,V=E*O-P*b,U=I*V-D*K+B*Y+k*q-N*J+H*$;return U?(U=1/U,h[0]=(v*V-c*K+p*Y)*U,h[1]=(c*q-f*V-p*J)*U,h[2]=(f*K-v*q+p*$)*U,h[3]=(d*K-o*V-a*Y)*U,h[4]=(r*V-d*q+a*J)*U,h[5]=(o*q-r*K-a*$)*U,h[6]=(A*H-b*N+O*k)*U,h[7]=(b*B-w*H-O*D)*U,h[8]=(w*N-A*B+O*I)*U,this):null}});C.exports=y}),37867:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(25836),u=1e-6,l=new g({initialize:function(v){this.val=new Float32Array(16),v?this.copy(v):this.identity()},clone:function(){return new l(this)},set:function(f){return this.copy(f)},setValues:function(f,v,c,p,m,T,E,P,w,A,b,O,I,D,B,k){var N=this.val;return N[0]=f,N[1]=v,N[2]=c,N[3]=p,N[4]=m,N[5]=T,N[6]=E,N[7]=P,N[8]=w,N[9]=A,N[10]=b,N[11]=O,N[12]=I,N[13]=D,N[14]=B,N[15]=k,this},copy:function(f){var v=f.val;return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},fromArray:function(f){return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(f,v,c){var p=h.fromQuat(c),m=p.val,T=v.x,E=v.y,P=v.z;return this.setValues(m[0]*T,m[1]*T,m[2]*T,0,m[4]*E,m[5]*E,m[6]*E,0,m[8]*P,m[9]*P,m[10]*P,0,f.x,f.y,f.z,1)},xyz:function(f,v,c){this.identity();var p=this.val;return p[12]=f,p[13]=v,p[14]=c,this},scaling:function(f,v,c){this.zero();var p=this.val;return p[0]=f,p[5]=v,p[10]=c,p[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var f=this.val,v=f[1],c=f[2],p=f[3],m=f[6],T=f[7],E=f[11];return f[1]=f[4],f[2]=f[8],f[3]=f[12],f[4]=v,f[6]=f[9],f[7]=f[13],f[8]=c,f[9]=m,f[11]=f[14],f[12]=p,f[13]=T,f[14]=E,this},getInverse:function(f){return this.copy(f),this.invert()},invert:function(){var f=this.val,v=f[0],c=f[1],p=f[2],m=f[3],T=f[4],E=f[5],P=f[6],w=f[7],A=f[8],b=f[9],O=f[10],I=f[11],D=f[12],B=f[13],k=f[14],N=f[15],H=v*E-c*T,$=v*P-p*T,J=v*w-m*T,q=c*P-p*E,Y=c*w-m*E,K=p*w-m*P,V=A*B-b*D,U=A*k-O*D,Z=A*N-I*D,et=b*k-O*B,st=b*N-I*B,rt=O*N-I*k,at=H*rt-$*st+J*et+q*Z-Y*U+K*V;return at?(at=1/at,this.setValues((E*rt-P*st+w*et)*at,(p*st-c*rt-m*et)*at,(B*K-k*Y+N*q)*at,(O*Y-b*K-I*q)*at,(P*Z-T*rt-w*U)*at,(v*rt-p*Z+m*U)*at,(k*J-D*K-N*$)*at,(A*K-O*J+I*$)*at,(T*st-E*Z+w*V)*at,(c*Z-v*st-m*V)*at,(D*Y-B*J+N*H)*at,(b*J-A*Y-I*H)*at,(E*U-T*et-P*V)*at,(v*et-c*U+p*V)*at,(B*$-D*q-k*H)*at,(A*q-b*$+O*H)*at)):this},adjoint:function(){var f=this.val,v=f[0],c=f[1],p=f[2],m=f[3],T=f[4],E=f[5],P=f[6],w=f[7],A=f[8],b=f[9],O=f[10],I=f[11],D=f[12],B=f[13],k=f[14],N=f[15];return this.setValues(E*(O*N-I*k)-b*(P*N-w*k)+B*(P*I-w*O),-(c*(O*N-I*k)-b*(p*N-m*k)+B*(p*I-m*O)),c*(P*N-w*k)-E*(p*N-m*k)+B*(p*w-m*P),-(c*(P*I-w*O)-E*(p*I-m*O)+b*(p*w-m*P)),-(T*(O*N-I*k)-A*(P*N-w*k)+D*(P*I-w*O)),v*(O*N-I*k)-A*(p*N-m*k)+D*(p*I-m*O),-(v*(P*N-w*k)-T*(p*N-m*k)+D*(p*w-m*P)),v*(P*I-w*O)-T*(p*I-m*O)+A*(p*w-m*P),T*(b*N-I*B)-A*(E*N-w*B)+D*(E*I-w*b),-(v*(b*N-I*B)-A*(c*N-m*B)+D*(c*I-m*b)),v*(E*N-w*B)-T*(c*N-m*B)+D*(c*w-m*E),-(v*(E*I-w*b)-T*(c*I-m*b)+A*(c*w-m*E)),-(T*(b*k-O*B)-A*(E*k-P*B)+D*(E*O-P*b)),v*(b*k-O*B)-A*(c*k-p*B)+D*(c*O-p*b),-(v*(E*k-P*B)-T*(c*k-p*B)+D*(c*P-p*E)),v*(E*O-P*b)-T*(c*O-p*b)+A*(c*P-p*E))},determinant:function(){var f=this.val,v=f[0],c=f[1],p=f[2],m=f[3],T=f[4],E=f[5],P=f[6],w=f[7],A=f[8],b=f[9],O=f[10],I=f[11],D=f[12],B=f[13],k=f[14],N=f[15],H=v*E-c*T,$=v*P-p*T,J=v*w-m*T,q=c*P-p*E,Y=c*w-m*E,K=p*w-m*P,V=A*B-b*D,U=A*k-O*D,Z=A*N-I*D,et=b*k-O*B,st=b*N-I*B,rt=O*N-I*k;return H*rt-$*st+J*et+q*Z-Y*U+K*V},multiply:function(f){var v=this.val,c=v[0],p=v[1],m=v[2],T=v[3],E=v[4],P=v[5],w=v[6],A=v[7],b=v[8],O=v[9],I=v[10],D=v[11],B=v[12],k=v[13],N=v[14],H=v[15],$=f.val,J=$[0],q=$[1],Y=$[2],K=$[3];return v[0]=J*c+q*E+Y*b+K*B,v[1]=J*p+q*P+Y*O+K*k,v[2]=J*m+q*w+Y*I+K*N,v[3]=J*T+q*A+Y*D+K*H,J=$[4],q=$[5],Y=$[6],K=$[7],v[4]=J*c+q*E+Y*b+K*B,v[5]=J*p+q*P+Y*O+K*k,v[6]=J*m+q*w+Y*I+K*N,v[7]=J*T+q*A+Y*D+K*H,J=$[8],q=$[9],Y=$[10],K=$[11],v[8]=J*c+q*E+Y*b+K*B,v[9]=J*p+q*P+Y*O+K*k,v[10]=J*m+q*w+Y*I+K*N,v[11]=J*T+q*A+Y*D+K*H,J=$[12],q=$[13],Y=$[14],K=$[15],v[12]=J*c+q*E+Y*b+K*B,v[13]=J*p+q*P+Y*O+K*k,v[14]=J*m+q*w+Y*I+K*N,v[15]=J*T+q*A+Y*D+K*H,this},multiplyLocal:function(f){var v=this.val,c=f.val;return this.setValues(v[0]*c[0]+v[1]*c[4]+v[2]*c[8]+v[3]*c[12],v[0]*c[1]+v[1]*c[5]+v[2]*c[9]+v[3]*c[13],v[0]*c[2]+v[1]*c[6]+v[2]*c[10]+v[3]*c[14],v[0]*c[3]+v[1]*c[7]+v[2]*c[11]+v[3]*c[15],v[4]*c[0]+v[5]*c[4]+v[6]*c[8]+v[7]*c[12],v[4]*c[1]+v[5]*c[5]+v[6]*c[9]+v[7]*c[13],v[4]*c[2]+v[5]*c[6]+v[6]*c[10]+v[7]*c[14],v[4]*c[3]+v[5]*c[7]+v[6]*c[11]+v[7]*c[15],v[8]*c[0]+v[9]*c[4]+v[10]*c[8]+v[11]*c[12],v[8]*c[1]+v[9]*c[5]+v[10]*c[9]+v[11]*c[13],v[8]*c[2]+v[9]*c[6]+v[10]*c[10]+v[11]*c[14],v[8]*c[3]+v[9]*c[7]+v[10]*c[11]+v[11]*c[15],v[12]*c[0]+v[13]*c[4]+v[14]*c[8]+v[15]*c[12],v[12]*c[1]+v[13]*c[5]+v[14]*c[9]+v[15]*c[13],v[12]*c[2]+v[13]*c[6]+v[14]*c[10]+v[15]*c[14],v[12]*c[3]+v[13]*c[7]+v[14]*c[11]+v[15]*c[15])},premultiply:function(f){return this.multiplyMatrices(f,this)},multiplyMatrices:function(f,v){var c=f.val,p=v.val,m=c[0],T=c[4],E=c[8],P=c[12],w=c[1],A=c[5],b=c[9],O=c[13],I=c[2],D=c[6],B=c[10],k=c[14],N=c[3],H=c[7],$=c[11],J=c[15],q=p[0],Y=p[4],K=p[8],V=p[12],U=p[1],Z=p[5],et=p[9],st=p[13],rt=p[2],at=p[6],ut=p[10],vt=p[14],pt=p[3],gt=p[7],yt=p[11],mt=p[15];return this.setValues(m*q+T*U+E*rt+P*pt,w*q+A*U+b*rt+O*pt,I*q+D*U+B*rt+k*pt,N*q+H*U+$*rt+J*pt,m*Y+T*Z+E*at+P*gt,w*Y+A*Z+b*at+O*gt,I*Y+D*Z+B*at+k*gt,N*Y+H*Z+$*at+J*gt,m*K+T*et+E*ut+P*yt,w*K+A*et+b*ut+O*yt,I*K+D*et+B*ut+k*yt,N*K+H*et+$*ut+J*yt,m*V+T*st+E*vt+P*mt,w*V+A*st+b*vt+O*mt,I*V+D*st+B*vt+k*mt,N*V+H*st+$*vt+J*mt)},translate:function(f){return this.translateXYZ(f.x,f.y,f.z)},translateXYZ:function(f,v,c){var p=this.val;return p[12]=p[0]*f+p[4]*v+p[8]*c+p[12],p[13]=p[1]*f+p[5]*v+p[9]*c+p[13],p[14]=p[2]*f+p[6]*v+p[10]*c+p[14],p[15]=p[3]*f+p[7]*v+p[11]*c+p[15],this},scale:function(f){return this.scaleXYZ(f.x,f.y,f.z)},scaleXYZ:function(f,v,c){var p=this.val;return p[0]=p[0]*f,p[1]=p[1]*f,p[2]=p[2]*f,p[3]=p[3]*f,p[4]=p[4]*v,p[5]=p[5]*v,p[6]=p[6]*v,p[7]=p[7]*v,p[8]=p[8]*c,p[9]=p[9]*c,p[10]=p[10]*c,p[11]=p[11]*c,this},makeRotationAxis:function(f,v){var c=Math.cos(v),p=Math.sin(v),m=1-c,T=f.x,E=f.y,P=f.z,w=m*T,A=m*E;return this.setValues(w*T+c,w*E-p*P,w*P+p*E,0,w*E+p*P,A*E+c,A*P-p*T,0,w*P-p*E,A*P+p*T,m*P*P+c,0,0,0,0,1)},rotate:function(f,v){var c=this.val,p=v.x,m=v.y,T=v.z,E=Math.sqrt(p*p+m*m+T*T);if(Math.abs(E)<u)return this;E=1/E,p*=E,m*=E,T*=E;var P=Math.sin(f),w=Math.cos(f),A=1-w,b=c[0],O=c[1],I=c[2],D=c[3],B=c[4],k=c[5],N=c[6],H=c[7],$=c[8],J=c[9],q=c[10],Y=c[11],K=c[12],V=c[13],U=c[14],Z=c[15],et=p*p*A+w,st=m*p*A+T*P,rt=T*p*A-m*P,at=p*m*A-T*P,ut=m*m*A+w,vt=T*m*A+p*P,pt=p*T*A+m*P,gt=m*T*A-p*P,yt=T*T*A+w;return this.setValues(b*et+B*st+$*rt,O*et+k*st+J*rt,I*et+N*st+q*rt,D*et+H*st+Y*rt,b*at+B*ut+$*vt,O*at+k*ut+J*vt,I*at+N*ut+q*vt,D*at+H*ut+Y*vt,b*pt+B*gt+$*yt,O*pt+k*gt+J*yt,I*pt+N*gt+q*yt,D*pt+H*gt+Y*yt,K,V,U,Z)},rotateX:function(f){var v=this.val,c=Math.sin(f),p=Math.cos(f),m=v[4],T=v[5],E=v[6],P=v[7],w=v[8],A=v[9],b=v[10],O=v[11];return v[4]=m*p+w*c,v[5]=T*p+A*c,v[6]=E*p+b*c,v[7]=P*p+O*c,v[8]=w*p-m*c,v[9]=A*p-T*c,v[10]=b*p-E*c,v[11]=O*p-P*c,this},rotateY:function(f){var v=this.val,c=Math.sin(f),p=Math.cos(f),m=v[0],T=v[1],E=v[2],P=v[3],w=v[8],A=v[9],b=v[10],O=v[11];return v[0]=m*p-w*c,v[1]=T*p-A*c,v[2]=E*p-b*c,v[3]=P*p-O*c,v[8]=m*c+w*p,v[9]=T*c+A*p,v[10]=E*c+b*p,v[11]=P*c+O*p,this},rotateZ:function(f){var v=this.val,c=Math.sin(f),p=Math.cos(f),m=v[0],T=v[1],E=v[2],P=v[3],w=v[4],A=v[5],b=v[6],O=v[7];return v[0]=m*p+w*c,v[1]=T*p+A*c,v[2]=E*p+b*c,v[3]=P*p+O*c,v[4]=w*p-m*c,v[5]=A*p-T*c,v[6]=b*p-E*c,v[7]=O*p-P*c,this},fromRotationTranslation:function(f,v){var c=f.x,p=f.y,m=f.z,T=f.w,E=c+c,P=p+p,w=m+m,A=c*E,b=c*P,O=c*w,I=p*P,D=p*w,B=m*w,k=T*E,N=T*P,H=T*w;return this.setValues(1-(I+B),b+H,O-N,0,b-H,1-(A+B),D+k,0,O+N,D-k,1-(A+I),0,v.x,v.y,v.z,1)},fromQuat:function(f){var v=f.x,c=f.y,p=f.z,m=f.w,T=v+v,E=c+c,P=p+p,w=v*T,A=v*E,b=v*P,O=c*E,I=c*P,D=p*P,B=m*T,k=m*E,N=m*P;return this.setValues(1-(O+D),A+N,b-k,0,A-N,1-(w+D),I+B,0,b+k,I-B,1-(w+O),0,0,0,0,1)},frustum:function(f,v,c,p,m,T){var E=1/(v-f),P=1/(p-c),w=1/(m-T);return this.setValues(m*2*E,0,0,0,0,m*2*P,0,0,(v+f)*E,(p+c)*P,(T+m)*w,-1,0,0,T*m*2*w,0)},perspective:function(f,v,c,p){var m=1/Math.tan(f/2),T=1/(c-p);return this.setValues(m/v,0,0,0,0,m,0,0,0,0,(p+c)*T,-1,0,0,2*p*c*T,0)},perspectiveLH:function(f,v,c,p){return this.setValues(2*c/f,0,0,0,0,2*c/v,0,0,0,0,-p/(c-p),1,0,0,c*p/(c-p),0)},ortho:function(f,v,c,p,m,T){var E=f-v,P=c-p,w=m-T;return E=E===0?E:1/E,P=P===0?P:1/P,w=w===0?w:1/w,this.setValues(-2*E,0,0,0,0,-2*P,0,0,0,0,2*w,0,(f+v)*E,(p+c)*P,(T+m)*w,1)},lookAtRH:function(f,v,c){var p=this.val;return a.subVectors(f,v),a.lengthSq()===0&&(a.z=1),a.normalize(),o.crossVectors(c,a),o.lengthSq()===0&&(Math.abs(c.z)===1?a.x+=1e-4:a.z+=1e-4,a.normalize(),o.crossVectors(c,a)),o.normalize(),d.crossVectors(a,o),p[0]=o.x,p[1]=o.y,p[2]=o.z,p[4]=d.x,p[5]=d.y,p[6]=d.z,p[8]=a.x,p[9]=a.y,p[10]=a.z,this},lookAt:function(f,v,c){var p=f.x,m=f.y,T=f.z,E=c.x,P=c.y,w=c.z,A=v.x,b=v.y,O=v.z;if(Math.abs(p-A)<u&&Math.abs(m-b)<u&&Math.abs(T-O)<u)return this.identity();var I=p-A,D=m-b,B=T-O,k=1/Math.sqrt(I*I+D*D+B*B);I*=k,D*=k,B*=k;var N=P*B-w*D,H=w*I-E*B,$=E*D-P*I;k=Math.sqrt(N*N+H*H+$*$),k?(k=1/k,N*=k,H*=k,$*=k):(N=0,H=0,$=0);var J=D*$-B*H,q=B*N-I*$,Y=I*H-D*N;return k=Math.sqrt(J*J+q*q+Y*Y),k?(k=1/k,J*=k,q*=k,Y*=k):(J=0,q=0,Y=0),this.setValues(N,J,I,0,H,q,D,0,$,Y,B,0,-(N*p+H*m+$*T),-(J*p+q*m+Y*T),-(I*p+D*m+B*T),1)},yawPitchRoll:function(f,v,c){this.zero(),h.zero(),r.zero();var p=this.val,m=h.val,T=r.val,E=Math.sin(c),P=Math.cos(c);return p[10]=1,p[15]=1,p[0]=P,p[1]=E,p[4]=-E,p[5]=P,E=Math.sin(v),P=Math.cos(v),m[0]=1,m[15]=1,m[5]=P,m[10]=P,m[9]=-E,m[6]=E,E=Math.sin(f),P=Math.cos(f),T[5]=1,T[15]=1,T[0]=P,T[2]=-E,T[8]=E,T[10]=P,this.multiplyLocal(h),this.multiplyLocal(r),this},setWorldMatrix:function(f,v,c,p,m){return this.yawPitchRoll(f.y,f.x,f.z),h.scaling(c.x,c.y,c.z),r.xyz(v.x,v.y,v.z),this.multiplyLocal(h),this.multiplyLocal(r),p&&this.multiplyLocal(p),m&&this.multiplyLocal(m),this},multiplyToMat4:function(f,v){var c=this.val,p=f.val,m=c[0],T=c[1],E=c[2],P=c[3],w=c[4],A=c[5],b=c[6],O=c[7],I=c[8],D=c[9],B=c[10],k=c[11],N=c[12],H=c[13],$=c[14],J=c[15],q=p[0],Y=p[1],K=p[2],V=p[3],U=p[4],Z=p[5],et=p[6],st=p[7],rt=p[8],at=p[9],ut=p[10],vt=p[11],pt=p[12],gt=p[13],yt=p[14],mt=p[15];return v.setValues(q*m+Y*w+K*I+V*N,Y*T+Y*A+K*D+V*H,K*E+Y*b+K*B+V*$,V*P+Y*O+K*k+V*J,U*m+Z*w+et*I+st*N,U*T+Z*A+et*D+st*H,U*E+Z*b+et*B+st*$,U*P+Z*O+et*k+st*J,rt*m+at*w+ut*I+vt*N,rt*T+at*A+ut*D+vt*H,rt*E+at*b+ut*B+vt*$,rt*P+at*O+ut*k+vt*J,pt*m+gt*w+yt*I+mt*N,pt*T+gt*A+yt*D+mt*H,pt*E+gt*b+yt*B+mt*$,pt*P+gt*O+yt*k+mt*J)},fromRotationXYTranslation:function(f,v,c){var p=v.x,m=v.y,T=v.z,E=Math.sin(f.x),P=Math.cos(f.x),w=Math.sin(f.y),A=Math.cos(f.y),b=p,O=m,I=T,D=-E,B=0-D*w,k=0-P*w,N=D*A,H=P*A;return c||(b=A*p+w*T,O=B*p+P*m+N*T,I=k*p+E*m+H*T),this.setValues(A,B,k,0,0,P,E,0,w,N,H,0,b,O,I,1)},getMaxScaleOnAxis:function(){var f=this.val,v=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],c=f[4]*f[4]+f[5]*f[5]+f[6]*f[6],p=f[8]*f[8]+f[9]*f[9]+f[10]*f[10];return Math.sqrt(Math.max(v,c,p))}}),h=new l,r=new l,o=new y,d=new y,a=new y;C.exports=l}),86883:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return Math.min(s+g,y)};C.exports=R}),50040:(C=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=s.length;if(g===0)return 0;s.sort(function(u,l){return u-l});var y=Math.floor(g/2);return g%2===0?(s[y]+s[y-1])/2:s[y]};C.exports=R}),37204:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return Math.max(s-g,y)};C.exports=R}),65201:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){y===void 0&&(y=g+1);var l=(s-g)/(y-g);return l>1?u!==void 0?(l=(u-s)/(u-y),l<0&&(l=0)):l=1:l<0&&(l=0),l};C.exports=R}),15746:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(94434),u=s(29747),l=s(25836),h=1e-6,r=new Int8Array([1,2,0]),o=new Float32Array([0,0,0]),d=new l(1,0,0),a=new l(0,1,0),f=new l,v=new y,c=new g({initialize:function(m,T,E,P){this.onChangeCallback=u,this.set(m,T,E,P)},x:{get:function(){return this._x},set:function(p){this._x=p,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(p){this._y=p,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(p){this._z=p,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(p){this._w=p,this.onChangeCallback(this)}},copy:function(p){return this.set(p)},set:function(p,m,T,E,P){return P===void 0&&(P=!0),typeof p=="object"?(this._x=p.x||0,this._y=p.y||0,this._z=p.z||0,this._w=p.w||0):(this._x=p||0,this._y=m||0,this._z=T||0,this._w=E||0),P&&this.onChangeCallback(this),this},add:function(p){return this._x+=p.x,this._y+=p.y,this._z+=p.z,this._w+=p.w,this.onChangeCallback(this),this},subtract:function(p){return this._x-=p.x,this._y-=p.y,this._z-=p.z,this._w-=p.w,this.onChangeCallback(this),this},scale:function(p){return this._x*=p,this._y*=p,this._z*=p,this._w*=p,this.onChangeCallback(this),this},length:function(){var p=this.x,m=this.y,T=this.z,E=this.w;return Math.sqrt(p*p+m*m+T*T+E*E)},lengthSq:function(){var p=this.x,m=this.y,T=this.z,E=this.w;return p*p+m*m+T*T+E*E},normalize:function(){var p=this.x,m=this.y,T=this.z,E=this.w,P=p*p+m*m+T*T+E*E;return P>0&&(P=1/Math.sqrt(P),this._x=p*P,this._y=m*P,this._z=T*P,this._w=E*P),this.onChangeCallback(this),this},dot:function(p){return this.x*p.x+this.y*p.y+this.z*p.z+this.w*p.w},lerp:function(p,m){m===void 0&&(m=0);var T=this.x,E=this.y,P=this.z,w=this.w;return this.set(T+m*(p.x-T),E+m*(p.y-E),P+m*(p.z-P),w+m*(p.w-w))},rotationTo:function(p,m){var T=p.x*m.x+p.y*m.y+p.z*m.z;return T<-.999999?(f.copy(d).cross(p).length()<h&&f.copy(a).cross(p),f.normalize(),this.setAxisAngle(f,Math.PI)):T>.999999?this.set(0,0,0,1):(f.copy(p).cross(m),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+T,this.normalize())},setAxes:function(p,m,T){var E=v.val;return E[0]=m.x,E[3]=m.y,E[6]=m.z,E[1]=T.x,E[4]=T.y,E[7]=T.z,E[2]=-p.x,E[5]=-p.y,E[8]=-p.z,this.fromMat3(v).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(p,m){m=m*.5;var T=Math.sin(m);return this.set(T*p.x,T*p.y,T*p.z,Math.cos(m))},multiply:function(p){var m=this.x,T=this.y,E=this.z,P=this.w,w=p.x,A=p.y,b=p.z,O=p.w;return this.set(m*O+P*w+T*b-E*A,T*O+P*A+E*w-m*b,E*O+P*b+m*A-T*w,P*O-m*w-T*A-E*b)},slerp:function(p,m){var T=this.x,E=this.y,P=this.z,w=this.w,A=p.x,b=p.y,O=p.z,I=p.w,D=T*A+E*b+P*O+w*I;D<0&&(D=-D,A=-A,b=-b,O=-O,I=-I);var B=1-m,k=m;if(1-D>h){var N=Math.acos(D),H=Math.sin(N);B=Math.sin((1-m)*N)/H,k=Math.sin(m*N)/H}return this.set(B*T+k*A,B*E+k*b,B*P+k*O,B*w+k*I)},invert:function(){var p=this.x,m=this.y,T=this.z,E=this.w,P=p*p+m*m+T*T+E*E,w=P?1/P:0;return this.set(-p*w,-m*w,-T*w,E*w)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(p){p*=.5;var m=this.x,T=this.y,E=this.z,P=this.w,w=Math.sin(p),A=Math.cos(p);return this.set(m*A+P*w,T*A+E*w,E*A-T*w,P*A-m*w)},rotateY:function(p){p*=.5;var m=this.x,T=this.y,E=this.z,P=this.w,w=Math.sin(p),A=Math.cos(p);return this.set(m*A-E*w,T*A+P*w,E*A+m*w,P*A-T*w)},rotateZ:function(p){p*=.5;var m=this.x,T=this.y,E=this.z,P=this.w,w=Math.sin(p),A=Math.cos(p);return this.set(m*A+T*w,T*A-m*w,E*A+P*w,P*A-E*w)},calculateW:function(){var p=this.x,m=this.y,T=this.z;return this.w=-Math.sqrt(1-p*p-m*m-T*T),this},setFromEuler:function(p,m){var T=p.x/2,E=p.y/2,P=p.z/2,w=Math.cos(T),A=Math.cos(E),b=Math.cos(P),O=Math.sin(T),I=Math.sin(E),D=Math.sin(P);switch(p.order){case"XYZ":{this.set(O*A*b+w*I*D,w*I*b-O*A*D,w*A*D+O*I*b,w*A*b-O*I*D,m);break}case"YXZ":{this.set(O*A*b+w*I*D,w*I*b-O*A*D,w*A*D-O*I*b,w*A*b+O*I*D,m);break}case"ZXY":{this.set(O*A*b-w*I*D,w*I*b+O*A*D,w*A*D+O*I*b,w*A*b-O*I*D,m);break}case"ZYX":{this.set(O*A*b-w*I*D,w*I*b+O*A*D,w*A*D-O*I*b,w*A*b+O*I*D,m);break}case"YZX":{this.set(O*A*b+w*I*D,w*I*b+O*A*D,w*A*D-O*I*b,w*A*b-O*I*D,m);break}case"XZY":{this.set(O*A*b-w*I*D,w*I*b-O*A*D,w*A*D+O*I*b,w*A*b+O*I*D,m);break}}return this},setFromRotationMatrix:function(p){var m=p.val,T=m[0],E=m[4],P=m[8],w=m[1],A=m[5],b=m[9],O=m[2],I=m[6],D=m[10],B=T+A+D,k;return B>0?(k=.5/Math.sqrt(B+1),this.set((I-b)*k,(P-O)*k,(w-E)*k,.25/k)):T>A&&T>D?(k=2*Math.sqrt(1+T-A-D),this.set(.25*k,(E+w)/k,(P+O)/k,(I-b)/k)):A>D?(k=2*Math.sqrt(1+A-T-D),this.set((E+w)/k,.25*k,(b+I)/k,(P-O)/k)):(k=2*Math.sqrt(1+D-T-A),this.set((P+O)/k,(b+I)/k,.25*k,(w-E)/k)),this},fromMat3:function(p){var m=p.val,T=m[0]+m[4]+m[8],E;if(T>0)E=Math.sqrt(T+1),this.w=.5*E,E=.5/E,this._x=(m[7]-m[5])*E,this._y=(m[2]-m[6])*E,this._z=(m[3]-m[1])*E;else{var P=0;m[4]>m[0]&&(P=1),m[8]>m[P*3+P]&&(P=2);var w=r[P],A=r[w];E=Math.sqrt(m[P*3+P]-m[w*3+w]-m[A*3+A]+1),o[P]=.5*E,E=.5/E,o[w]=(m[w*3+P]+m[P*3+w])*E,o[A]=(m[A*3+P]+m[P*3+A])*E,this._x=o[0],this._y=o[1],this._z=o[2],this._w=(m[A*3+w]-m[w*3+A])*E}return this.onChangeCallback(this),this}});C.exports=c}),43396:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=function(u){return u*g.RAD_TO_DEG};C.exports=y}),74362:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=1);var y=Math.random()*2*Math.PI;return s.x=Math.cos(y)*g,s.y=Math.sin(y)*g,s};C.exports=R}),60706:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=1);var y=Math.random()*2*Math.PI,u=Math.random()*2-1,l=Math.sqrt(1-u*u)*g;return s.x=Math.cos(y)*l,s.y=Math.sin(y)*l,s.z=u*g,s};C.exports=R}),67421:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g=1),s.x=(Math.random()*2-1)*g,s.y=(Math.random()*2-1)*g,s.z=(Math.random()*2-1)*g,s.w=(Math.random()*2-1)*g,s};C.exports=R}),36305:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.x,u=s.y;return s.x=y*Math.cos(g)-u*Math.sin(g),s.y=y*Math.sin(g)+u*Math.cos(g),s};C.exports=R}),11520:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=Math.cos(u),h=Math.sin(u),r=s.x-g,o=s.y-y;return s.x=r*l-o*h+g,s.y=r*h+o*l+y,s};C.exports=R}),1163:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l){var h=u+Math.atan2(s.y-y,s.x-g);return s.x=g+l*Math.cos(h),s.y=y+l*Math.sin(h),s};C.exports=R}),70336:(C=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l){return s.x=g+l*Math.cos(u),s.y=y+l*Math.sin(u),s};C.exports=R}),72678:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(25836),y=s(37867),u=s(15746),l=new y,h=new u,r=new g,o=function(d,a,f){return h.setAxisAngle(a,f),l.fromRotationTranslation(h,r.set(0,0,0)),d.transformMat4(l)};C.exports=o}),2284:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s>0?Math.ceil(s):Math.floor(s)};C.exports=R}),41013:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){g===void 0&&(g=0),y===void 0&&(y=10);var u=Math.pow(y,-g);return Math.round(s*u)/u};C.exports=R}),16922:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){g===void 0&&(g=1),y===void 0&&(y=1),u===void 0&&(u=1),u*=Math.PI/s;for(var l=[],h=[],r=0;r<s;r++)y-=g*u,g+=y*u,l[r]=y,h[r]=g;return{sin:h,cos:l,length:s}};C.exports=R}),7602:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s<=g?0:s>=y?1:(s=(s-g)/(y-g),s*s*(3-2*s))};C.exports=R}),54261:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s=Math.max(0,Math.min(1,(s-g)/(y-g))),s*s*s*(s*(s*6-15)+10)};C.exports=R}),44408:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r){r===void 0&&(r=new g);var o=0,d=0,a=l*h;return u>0&&u<=a&&(u>l-1?(d=Math.floor(u/l),o=u-d*l):o=u),r.set(o,d)};C.exports=y}),85955:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o,d,a,f){f===void 0&&(f=new g);var v=Math.sin(o),c=Math.cos(o),p=c*d,m=v*d,T=-v*a,E=c*a,P=1/(p*E+T*-m);return f.x=E*P*u+-T*P*l+(r*T-h*E)*P,f.y=p*P*l+-m*P*u+(-r*p+h*m)*P,f};C.exports=y}),26099:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(43855),u=new g({initialize:function(h,r){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(r===void 0&&(r=h),this.x=h||0,this.y=r||0)},clone:function(){return new u(this.x,this.y)},copy:function(l){return this.x=l.x||0,this.y=l.y||0,this},setFromObject:function(l){return this.x=l.x||0,this.y=l.y||0,this},set:function(l,h){return h===void 0&&(h=l),this.x=l,this.y=h,this},setTo:function(l,h){return this.set(l,h)},setToPolar:function(l,h){return h==null&&(h=1),this.x=Math.cos(l)*h,this.y=Math.sin(l)*h,this},equals:function(l){return this.x===l.x&&this.y===l.y},fuzzyEquals:function(l,h){return y(this.x,l.x,h)&&y(this.y,l.y,h)},angle:function(){var l=Math.atan2(this.y,this.x);return l<0&&(l+=2*Math.PI),l},setAngle:function(l){return this.setToPolar(l,this.length())},add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this},scale:function(l){return isFinite(l)?(this.x*=l,this.y*=l):(this.x=0,this.y=0),this},divide:function(l){return this.x/=l.x,this.y/=l.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(l){var h=l.x-this.x,r=l.y-this.y;return Math.sqrt(h*h+r*r)},distanceSq:function(l){var h=l.x-this.x,r=l.y-this.y;return h*h+r*r},length:function(){var l=this.x,h=this.y;return Math.sqrt(l*l+h*h)},setLength:function(l){return this.normalize().scale(l)},lengthSq:function(){var l=this.x,h=this.y;return l*l+h*h},normalize:function(){var l=this.x,h=this.y,r=l*l+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=l*r,this.y=h*r),this},normalizeRightHand:function(){var l=this.x;return this.x=this.y*-1,this.y=l,this},normalizeLeftHand:function(){var l=this.x;return this.x=this.y,this.y=l*-1,this},dot:function(l){return this.x*l.x+this.y*l.y},cross:function(l){return this.x*l.y-this.y*l.x},lerp:function(l,h){h===void 0&&(h=0);var r=this.x,o=this.y;return this.x=r+h*(l.x-r),this.y=o+h*(l.y-o),this},transformMat3:function(l){var h=this.x,r=this.y,o=l.val;return this.x=o[0]*h+o[3]*r+o[6],this.y=o[1]*h+o[4]*r+o[7],this},transformMat4:function(l){var h=this.x,r=this.y,o=l.val;return this.x=o[0]*h+o[4]*r+o[12],this.y=o[1]*h+o[5]*r+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(l){var h=this.length();return h&&h>l&&this.scale(l/h),this},reflect:function(l){return l=l.clone().normalize(),this.subtract(l.scale(2*this.dot(l)))},mirror:function(l){return this.reflect(l).negate()},rotate:function(l){var h=Math.cos(l),r=Math.sin(l);return this.set(h*this.x-r*this.y,r*this.x+h*this.y)},project:function(l){var h=this.dot(l)/l.dot(l);return this.copy(l).scale(h)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),C.exports=u}),25836:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r){this.x=0,this.y=0,this.z=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0):(this.x=l||0,this.y=h||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(u){return this.x=Math.min(this.x,u.x),this.y=Math.min(this.y,u.y),this.z=Math.min(this.z,u.z),this},max:function(u){return this.x=Math.max(this.x,u.x),this.y=Math.max(this.y,u.y),this.z=Math.max(this.z,u.z),this},clone:function(){return new y(this.x,this.y,this.z)},addVectors:function(u,l){return this.x=u.x+l.x,this.y=u.y+l.y,this.z=u.z+l.z,this},subVectors:function(u,l){return this.x=u.x-l.x,this.y=u.y-l.y,this.z=u.z-l.z,this},crossVectors:function(u,l){var h=u.x,r=u.y,o=u.z,d=l.x,a=l.y,f=l.z;return this.x=r*f-o*a,this.y=o*d-h*f,this.z=h*a-r*d,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this},set:function(u,l,h){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=l||0,this.z=h||0),this},setFromMatrixPosition:function(u){return this.fromArray(u.val,12)},setFromMatrixColumn:function(u,l){return this.fromArray(u.val,l*4)},fromArray:function(u,l){return l===void 0&&(l=0),this.x=u[l],this.y=u[l+1],this.z=u[l+2],this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this},addScalar:function(u){return this.x+=u,this.y+=u,this.z+=u,this},addScale:function(u,l){return this.x+=u.x*l,this.y+=u.y*l,this.z+=u.z*l||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u,this.z*=u):(this.x=0,this.y=0,this.z=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(u){var l=u.x-this.x,h=u.y-this.y,r=u.z-this.z||0;return Math.sqrt(l*l+h*h+r*r)},distanceSq:function(u){var l=u.x-this.x,h=u.y-this.y,r=u.z-this.z||0;return l*l+h*h+r*r},length:function(){var u=this.x,l=this.y,h=this.z;return Math.sqrt(u*u+l*l+h*h)},lengthSq:function(){var u=this.x,l=this.y,h=this.z;return u*u+l*l+h*h},normalize:function(){var u=this.x,l=this.y,h=this.z,r=u*u+l*l+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=u*r,this.y=l*r,this.z=h*r),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){var l=this.x,h=this.y,r=this.z,o=u.x,d=u.y,a=u.z;return this.x=h*a-r*d,this.y=r*o-l*a,this.z=l*d-h*o,this},lerp:function(u,l){l===void 0&&(l=0);var h=this.x,r=this.y,o=this.z;return this.x=h+l*(u.x-h),this.y=r+l*(u.y-r),this.z=o+l*(u.z-o),this},applyMatrix3:function(u){var l=this.x,h=this.y,r=this.z,o=u.val;return this.x=o[0]*l+o[3]*h+o[6]*r,this.y=o[1]*l+o[4]*h+o[7]*r,this.z=o[2]*l+o[5]*h+o[8]*r,this},applyMatrix4:function(u){var l=this.x,h=this.y,r=this.z,o=u.val,d=1/(o[3]*l+o[7]*h+o[11]*r+o[15]);return this.x=(o[0]*l+o[4]*h+o[8]*r+o[12])*d,this.y=(o[1]*l+o[5]*h+o[9]*r+o[13])*d,this.z=(o[2]*l+o[6]*h+o[10]*r+o[14])*d,this},transformMat3:function(u){var l=this.x,h=this.y,r=this.z,o=u.val;return this.x=l*o[0]+h*o[3]+r*o[6],this.y=l*o[1]+h*o[4]+r*o[7],this.z=l*o[2]+h*o[5]+r*o[8],this},transformMat4:function(u){var l=this.x,h=this.y,r=this.z,o=u.val;return this.x=o[0]*l+o[4]*h+o[8]*r+o[12],this.y=o[1]*l+o[5]*h+o[9]*r+o[13],this.z=o[2]*l+o[6]*h+o[10]*r+o[14],this},transformCoordinates:function(u){var l=this.x,h=this.y,r=this.z,o=u.val,d=l*o[0]+h*o[4]+r*o[8]+o[12],a=l*o[1]+h*o[5]+r*o[9]+o[13],f=l*o[2]+h*o[6]+r*o[10]+o[14],v=l*o[3]+h*o[7]+r*o[11]+o[15];return this.x=d/v,this.y=a/v,this.z=f/v,this},transformQuat:function(u){var l=this.x,h=this.y,r=this.z,o=u.x,d=u.y,a=u.z,f=u.w,v=f*l+d*r-a*h,c=f*h+a*l-o*r,p=f*r+o*h-d*l,m=-o*l-d*h-a*r;return this.x=v*f+m*-o+c*-a-p*-d,this.y=c*f+m*-d+p*-o-v*-a,this.z=p*f+m*-a+v*-d-c*-o,this},project:function(u){var l=this.x,h=this.y,r=this.z,o=u.val,d=o[0],a=o[1],f=o[2],v=o[3],c=o[4],p=o[5],m=o[6],T=o[7],E=o[8],P=o[9],w=o[10],A=o[11],b=o[12],O=o[13],I=o[14],D=o[15],B=1/(l*v+h*T+r*A+D);return this.x=(l*d+h*c+r*E+b)*B,this.y=(l*a+h*p+r*P+O)*B,this.z=(l*f+h*m+r*w+I)*B,this},projectViewMatrix:function(u,l){return this.applyMatrix4(u).applyMatrix4(l)},unprojectViewMatrix:function(u,l){return this.applyMatrix4(u).applyMatrix4(l)},unproject:function(u,l){var h=u.x,r=u.y,o=u.z,d=u.w,a=this.x-h,f=d-this.y-1-r,v=this.z;return this.x=2*a/o-1,this.y=2*f/d-1,this.z=2*v-1,this.project(l)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});y.ZERO=new y,y.RIGHT=new y(1,0,0),y.LEFT=new y(-1,0,0),y.UP=new y(0,-1,0),y.DOWN=new y(0,1,0),y.FORWARD=new y(0,0,1),y.BACK=new y(0,0,-1),y.ONE=new y(1,1,1),C.exports=y}),61369:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r,o){this.x=0,this.y=0,this.z=0,this.w=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0,this.w=l.w||0):(this.x=l||0,this.y=h||0,this.z=r||0,this.w=o||0)},clone:function(){return new y(this.x,this.y,this.z,this.w)},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this.w=u.w||0,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},set:function(u,l,h,r){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=l||0,this.z=h||0,this.w=r||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this.w+=u.w||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this.w-=u.w||0,this},scale:function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},length:function(){var u=this.x,l=this.y,h=this.z,r=this.w;return Math.sqrt(u*u+l*l+h*h+r*r)},lengthSq:function(){var u=this.x,l=this.y,h=this.z,r=this.w;return u*u+l*l+h*h+r*r},normalize:function(){var u=this.x,l=this.y,h=this.z,r=this.w,o=u*u+l*l+h*h+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=u*o,this.y=l*o,this.z=h*o,this.w=r*o),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,l){l===void 0&&(l=0);var h=this.x,r=this.y,o=this.z,d=this.w;return this.x=h+l*(u.x-h),this.y=r+l*(u.y-r),this.z=o+l*(u.z-o),this.w=d+l*(u.w-d),this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this.w*=u.w||1,this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this.w/=u.w||1,this},distance:function(u){var l=u.x-this.x,h=u.y-this.y,r=u.z-this.z||0,o=u.w-this.w||0;return Math.sqrt(l*l+h*h+r*r+o*o)},distanceSq:function(u){var l=u.x-this.x,h=u.y-this.y,r=u.z-this.z||0,o=u.w-this.w||0;return l*l+h*h+r*r+o*o},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(u){var l=this.x,h=this.y,r=this.z,o=this.w,d=u.val;return this.x=d[0]*l+d[4]*h+d[8]*r+d[12]*o,this.y=d[1]*l+d[5]*h+d[9]*r+d[13]*o,this.z=d[2]*l+d[6]*h+d[10]*r+d[14]*o,this.w=d[3]*l+d[7]*h+d[11]*r+d[15]*o,this},transformQuat:function(u){var l=this.x,h=this.y,r=this.z,o=u.x,d=u.y,a=u.z,f=u.w,v=f*l+d*r-a*h,c=f*h+a*l-o*r,p=f*r+o*h-d*l,m=-o*l-d*h-a*r;return this.x=v*f+m*-o+c*-a-p*-d,this.y=c*f+m*-d+p*-o-v*-a,this.z=p*f+m*-a+v*-d-c*-o,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});y.prototype.sub=y.prototype.subtract,y.prototype.mul=y.prototype.multiply,y.prototype.div=y.prototype.divide,y.prototype.dist=y.prototype.distance,y.prototype.distSq=y.prototype.distanceSq,y.prototype.len=y.prototype.length,y.prototype.lenSq=y.prototype.lengthSq,C.exports=y}),60417:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return Math.abs(s-g)<=y};C.exports=R}),15994:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=y-g;return g+((s-g)%u+u)%u};C.exports=R}),31040:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){return Math.atan2(u-g,y-s)};C.exports=R}),55495:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return Math.atan2(g.y-s.y,g.x-s.x)};C.exports=R}),128:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return Math.atan2(g.x-s.x,g.y-s.y)};C.exports=R}),41273:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){return Math.atan2(y-s,u-g)};C.exports=R}),1432:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=function(u){return u>Math.PI&&(u-=g.PI2),Math.abs(((u+g.TAU)%g.PI2-g.PI2)%g.PI2)};C.exports=y}),12407:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};C.exports=R}),53993:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(99472),y=function(){return g(-Math.PI,Math.PI)};C.exports=y}),86564:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(99472),y=function(){return g(-180,180)};C.exports=y}),90154:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(12407),y=function(u){return g(u+Math.PI)};C.exports=y}),48736:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=function(u,l,h){return h===void 0&&(h=.05),u===l||(Math.abs(l-u)<=h||Math.abs(l-u)>=g.PI2-h?u=l:(Math.abs(l-u)>Math.PI&&(l<u?l+=g.PI2:l-=g.PI2),l>u?u+=h:l<u&&(u-=h))),u};C.exports=y}),61430:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=g-s;if(y===0)return 0;var u=Math.floor((y- -180)/360);return y-u*360};C.exports=R}),86554:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(15994),y=function(u){return g(u,-Math.PI,Math.PI)};C.exports=y}),30954:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(15994),y=function(u){return g(u,-180,180)};C.exports=y}),25588:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Between:s(31040),BetweenPoints:s(55495),BetweenPointsY:s(128),BetweenY:s(41273),CounterClockwise:s(1432),Normalize:s(12407),Random:s(53993),RandomDegrees:s(86564),Reverse:s(90154),RotateTo:s(48736),ShortestBetween:s(61430),Wrap:s(86554),WrapDegrees:s(30954)}}),36383:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};C.exports=R}),20339:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=s-y,h=g-u;return Math.sqrt(l*l+h*h)};C.exports=R}),52816:(C=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.x-g.x,u=s.y-g.y;return Math.sqrt(y*y+u*u)};C.exports=R}),64559:(C=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.x-g.x,u=s.y-g.y;return y*y+u*u};C.exports=R}),82340:(C=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){return Math.max(Math.abs(s-y),Math.abs(g-u))};C.exports=R}),14390:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(y-s,l)+Math.pow(u-g,l))};C.exports=R}),2243:(C=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){return Math.abs(s-y)+Math.abs(g-u)};C.exports=R}),89774:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=s-y,h=g-u;return l*l+h*h};C.exports=R}),50994:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Between:s(20339),BetweenPoints:s(52816),BetweenPointsSquared:s(64559),Chebyshev:s(82340),Power:s(14390),Snake:s(2243),Squared:s(89774)}}),62640:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(54178),y=s(41521),u=s(79980),l=s(85433),h=s(99140),r=s(48857),o=s(81596),d=s(59133),a=s(98516),f=s(35248),v=s(82500),c=s(49752);C.exports={Power0:o,Power1:d.Out,Power2:l.Out,Power3:a.Out,Power4:f.Out,Linear:o,Quad:d.Out,Cubic:l.Out,Quart:a.Out,Quint:f.Out,Sine:v.Out,Expo:r.Out,Circ:u.Out,Elastic:h.Out,Back:g.Out,Bounce:y.Out,Stepped:c,"Quad.easeIn":d.In,"Cubic.easeIn":l.In,"Quart.easeIn":a.In,"Quint.easeIn":f.In,"Sine.easeIn":v.In,"Expo.easeIn":r.In,"Circ.easeIn":u.In,"Elastic.easeIn":h.In,"Back.easeIn":g.In,"Bounce.easeIn":y.In,"Quad.easeOut":d.Out,"Cubic.easeOut":l.Out,"Quart.easeOut":a.Out,"Quint.easeOut":f.Out,"Sine.easeOut":v.Out,"Expo.easeOut":r.Out,"Circ.easeOut":u.Out,"Elastic.easeOut":h.Out,"Back.easeOut":g.Out,"Bounce.easeOut":y.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":l.InOut,"Quart.easeInOut":a.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":v.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":u.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":g.InOut,"Bounce.easeInOut":y.InOut}}),1639:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g=1.70158),s*s*((g+1)*s-g)};C.exports=R}),50099:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=1.70158);var y=g*1.525;return(s*=2)<1?.5*(s*s*((y+1)*s-y)):.5*((s-=2)*s*((y+1)*s+y)+2)};C.exports=R}),41286:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g=1.70158),--s*s*((g+1)*s+g)+1};C.exports=R}),54178:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(1639),Out:s(41286),InOut:s(50099)}}),59590:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s=1-s,s<.36363636363636365?1-7.5625*s*s:s<.7272727272727273?1-(7.5625*(s-=.5454545454545454)*s+.75):s<.9090909090909091?1-(7.5625*(s-=.8181818181818182)*s+.9375):1-(7.5625*(s-=.9545454545454546)*s+.984375)};C.exports=R}),41788:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=!1;return s<.5?(s=1-s*2,g=!0):s=s*2-1,s<.36363636363636365?s=7.5625*s*s:s<.7272727272727273?s=7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?s=7.5625*(s-=.8181818181818182)*s+.9375:s=7.5625*(s-=.9545454545454546)*s+.984375,g?(1-s)*.5:s*.5+.5};C.exports=R}),69905:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s<.36363636363636365?7.5625*s*s:s<.7272727272727273?7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?7.5625*(s-=.8181818181818182)*s+.9375:7.5625*(s-=.9545454545454546)*s+.984375};C.exports=R}),41521:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(59590),Out:s(69905),InOut:s(41788)}}),91861:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return 1-Math.sqrt(1-s*s)};C.exports=R}),4177:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)};C.exports=R}),57512:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return Math.sqrt(1- --s*s)};C.exports=R}),79980:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(91861),Out:s(57512),InOut:s(4177)}}),51150:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s*s*s};C.exports=R}),82820:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)};C.exports=R}),35033:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return--s*s*s+1};C.exports=R}),85433:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(51150),Out:s(35033),InOut:s(82820)}}),69965:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(g===void 0&&(g=.1),y===void 0&&(y=.1),s===0)return 0;if(s===1)return 1;var u=y/4;return g<1?g=1:u=y*Math.asin(1/g)/(2*Math.PI),-(g*Math.pow(2,10*(s-=1))*Math.sin((s-u)*(2*Math.PI)/y))};C.exports=R}),50665:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(g===void 0&&(g=.1),y===void 0&&(y=.1),s===0)return 0;if(s===1)return 1;var u=y/4;return g<1?g=1:u=y*Math.asin(1/g)/(2*Math.PI),(s*=2)<1?-.5*(g*Math.pow(2,10*(s-=1))*Math.sin((s-u)*(2*Math.PI)/y)):g*Math.pow(2,-10*(s-=1))*Math.sin((s-u)*(2*Math.PI)/y)*.5+1};C.exports=R}),7744:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(g===void 0&&(g=.1),y===void 0&&(y=.1),s===0)return 0;if(s===1)return 1;var u=y/4;return g<1?g=1:u=y*Math.asin(1/g)/(2*Math.PI),g*Math.pow(2,-10*s)*Math.sin((s-u)*(2*Math.PI)/y)+1};C.exports=R}),99140:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(69965),Out:s(7744),InOut:s(50665)}}),24590:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return Math.pow(2,10*(s-1))-.001};C.exports=R}),87844:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return(s*=2)<1?.5*Math.pow(2,10*(s-1)):.5*(2-Math.pow(2,-10*(s-1)))};C.exports=R}),89433:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return 1-Math.pow(2,-10*s)};C.exports=R}),48857:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(24590),Out:s(89433),InOut:s(87844)}}),48820:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Back:s(54178),Bounce:s(41521),Circular:s(79980),Cubic:s(85433),Elastic:s(99140),Expo:s(48857),Linear:s(81596),Quadratic:s(59133),Quartic:s(98516),Quintic:s(35248),Sine:s(82500),Stepped:s(49752)}}),7147:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s};C.exports=R}),81596:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports=s(7147)}),34826:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s*s};C.exports=R}),20544:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)};C.exports=R}),92029:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s*(2-s)};C.exports=R}),59133:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(34826),Out:s(92029),InOut:s(20544)}}),64413:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s*s*s*s};C.exports=R}),78137:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)};C.exports=R}),45840:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return 1- --s*s*s*s};C.exports=R}),98516:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(64413),Out:s(45840),InOut:s(78137)}}),87745:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s*s*s*s*s};C.exports=R}),16509:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)};C.exports=R}),17868:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return--s*s*s*s*s+1};C.exports=R}),35248:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(87745),Out:s(17868),InOut:s(16509)}}),80461:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s===0?0:s===1?1:1-Math.cos(s*Math.PI/2)};C.exports=R}),34025:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s===0?0:s===1?1:.5*(1-Math.cos(Math.PI*s))};C.exports=R}),52768:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s===0?0:s===1?1:Math.sin(s*Math.PI/2)};C.exports=R}),82500:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={In:s(80461),Out:s(52768),InOut:s(34025)}}),72251:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g=1),s<=0?0:s>=1?1:((g*s|0)+1)*(1/g)};C.exports=R}),49752:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports=s(72251)}),75698:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g=1e-4),Math.ceil(s-g)};C.exports=R}),43855:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return y===void 0&&(y=1e-4),Math.abs(s-g)<y};C.exports=R}),25777:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g=1e-4),Math.floor(s+g)};C.exports=R}),5470:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return y===void 0&&(y=1e-4),s>g-y};C.exports=R}),94977:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return y===void 0&&(y=1e-4),s<g+y};C.exports=R}),48379:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Ceil:s(75698),Equal:s(43855),Floor:s(25777),GreaterThan:s(5470),LessThan:s(94977)}}),75508:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36383),y=s(79291),u={Angle:s(25588),Distance:s(50994),Easing:s(48820),Fuzzy:s(48379),Interpolation:s(38289),Pow2:s(49001),Snap:s(73697),RandomDataGenerator:s(28453),Average:s(53307),Bernstein:s(85710),Between:s(30976),CatmullRom:s(87842),CeilTo:s(26302),Clamp:s(45319),DegToRad:s(39506),Difference:s(61241),Euler:s(38857),Factorial:s(6411),FloatBetween:s(99472),FloorTo:s(77623),FromPercent:s(62945),GetSpeed:s(38265),IsEven:s(78702),IsEvenStrict:s(94883),Linear:s(28915),LinearXY:s(94908),MaxAdd:s(86883),Median:s(50040),MinSub:s(37204),Percent:s(65201),RadToDeg:s(43396),RandomXY:s(74362),RandomXYZ:s(60706),RandomXYZW:s(67421),Rotate:s(36305),RotateAround:s(11520),RotateAroundDistance:s(1163),RotateTo:s(70336),RoundAwayFromZero:s(2284),RoundTo:s(41013),SinCosTableGenerator:s(16922),SmootherStep:s(54261),SmoothStep:s(7602),ToXY:s(44408),TransformXY:s(85955),Within:s(60417),Wrap:s(15994),Vector2:s(26099),Vector3:s(25836),Vector4:s(61369),Matrix3:s(94434),Matrix4:s(37867),Quaternion:s(15746),RotateVec3:s(72678)};u=y(!1,u,g),C.exports=u}),89318:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(85710),y=function(u,l){for(var h=0,r=u.length-1,o=0;o<=r;o++)h+=Math.pow(1-l,r-o)*Math.pow(l,o)*u[o]*g(r,o);return h};C.exports=y}),77259:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87842),y=function(u,l){var h=u.length-1,r=h*l,o=Math.floor(r);return u[0]===u[h]?(l<0&&(o=Math.floor(r=h*(1+l))),g(r-o,u[(o-1+h)%h],u[o],u[(o+1)%h],u[(o+2)%h])):l<0?u[0]-(g(-r,u[0],u[0],u[1],u[1])-u[0]):l>1?u[h]-(g(r-h,u[h],u[h],u[h-1],u[h-1])-u[h]):g(r-o,u[o?o-1:0],u[o],u[h<o+1?h:o+1],u[h<o+2?h:o+2])};C.exports=y}),36316:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function R(l,h){var r=1-l;return r*r*r*h}function s(l,h){var r=1-l;return 3*r*r*l*h}function g(l,h){return 3*(1-l)*l*l*h}function y(l,h){return l*l*l*h}var u=function(l,h,r,o,d){return R(l,h)+s(l,r)+g(l,o)+y(l,d)};C.exports=u}),28392:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(28915),y=function(u,l){var h=u.length-1,r=h*l,o=Math.floor(r);return l<0?g(u[0],u[1],r):l>1?g(u[h],u[h-1],h-r):g(u[o],u[o+1>h?h:o+1],r-o)};C.exports=y}),32112:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function R(u,l){var h=1-u;return h*h*l}function s(u,l){return 2*(1-u)*u*l}function g(u,l){return u*u*l}var y=function(u,l,h,r){return R(u,l)+s(u,h)+g(u,r)};C.exports=y}),47235:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7602),y=function(u,l,h){return l+(h-l)*g(u,0,1)};C.exports=y}),50178:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(54261),y=function(u,l,h){return l+(h-l)*g(u,0,1)};C.exports=y}),38289:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Bezier:s(89318),CatmullRom:s(77259),CubicBezier:s(36316),Linear:s(28392),QuadraticBezier:s(32112),SmoothStep:s(47235),SmootherStep:s(50178)}}),98439:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=Math.log(s)/.6931471805599453;return 1<<Math.ceil(g)};C.exports=R}),50030:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s>0&&(s&s-1)===0&&g>0&&(g&g-1)===0};C.exports=R}),81230:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s>0&&(s&s-1)===0};C.exports=R}),49001:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={GetNext:s(98439),IsSize:s(50030),IsValue:s(81230)}}),28453:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l){l===void 0&&(l=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],l&&this.init(l)},rnd:function(){var u=2091639*this.s0+this.c*23283064365386963e-26;return this.c=u|0,this.s0=this.s1,this.s1=this.s2,this.s2=u-this.c,this.s2},hash:function(u){var l,h=this.n;u=u.toString();for(var r=0;r<u.length;r++)h+=u.charCodeAt(r),l=.02519603282416938*h,h=l>>>0,l-=h,l*=h,h=l>>>0,l-=h,h+=l*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(u){typeof u=="string"?this.state(u):this.sow(u)},sow:function(u){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!u)for(var l=0;l<u.length&&u[l]!=null;l++){var h=u[l];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(u,l){return Math.floor(this.realInRange(0,l-u+1)+u)},between:function(u,l){return Math.floor(this.realInRange(0,l-u+1)+u)},realInRange:function(u,l){return this.frac()*(l-u)+u},normal:function(){return 1-2*this.frac()},uuid:function(){var u="",l="";for(l=u="";u++<36;l+=~u%5|u*3&4?(u^15?8^this.frac()*(u^20?16:4):4).toString(16):"-");return l},pick:function(u){return u[this.integerInRange(0,u.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(u){return u[~~(Math.pow(this.frac(),2)*(u.length-.5)+.5)]},timestamp:function(u,l){return this.realInRange(u||9466848e5,l||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(u){return typeof u=="string"&&u.match(/^!rnd/)&&(u=u.split(","),this.c=parseFloat(u[1]),this.s0=parseFloat(u[2]),this.s1=parseFloat(u[3]),this.s2=parseFloat(u[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(u){for(var l=u.length-1,h=l;h>0;h--){var r=Math.floor(this.frac()*(h+1)),o=u[r];u[r]=u[h],u[h]=o}return u}});C.exports=y}),63448:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){return y===void 0&&(y=0),g===0?s:(s-=y,s=g*Math.ceil(s/g),u?(y+s)/g:y+s)};C.exports=R}),56583:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){return y===void 0&&(y=0),g===0?s:(s-=y,s=g*Math.floor(s/g),u?(y+s)/g:y+s)};C.exports=R}),77720:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){return y===void 0&&(y=0),g===0?s:(s-=y,s=g*Math.round(s/g),u?(y+s)/g:y+s)};C.exports=R}),73697:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Ceil:s(63448),Floor:s(56583),To:s(77720)}}),85454:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s(63595);var g=s(8054),y=s(79291),u={Actions:s(61061),Animations:s(60421),BlendModes:s(10312),Cache:s(83388),Cameras:s(26638),Core:s(42857),Class:s(83419),Create:s(15822),Curves:s(25410),Data:s(44965),Display:s(27460),DOM:s(84902),Events:s(93055),FX:s(66064),Game:s(50127),GameObjects:s(77856),Geom:s(55738),Input:s(14350),Loader:s(57777),Math:s(75508),Physics:s(44563),Plugins:s(18922),Renderer:s(36909),Scale:s(93364),ScaleModes:s(29795),Scene:s(97482),Scenes:s(62194),Structs:s(41392),Textures:s(27458),Tilemaps:s(62501),Time:s(90291),Tweens:s(43066),Utils:s(91799)};u.Sound=s(23717),u=y(!1,u,g),C.exports=u,s.g.Phaser=u}),71289:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(92209),u=s(88571),l=new g({Extends:u,Mixins:[y.Acceleration,y.Angular,y.Bounce,y.Collision,y.Debug,y.Drag,y.Enable,y.Friction,y.Gravity,y.Immovable,y.Mass,y.Pushable,y.Size,y.Velocity],initialize:function(r,o,d,a,f){u.call(this,r,o,d,a,f),this.body=null}});C.exports=l}),86689:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(39506),u=s(20339),l=s(89774),h=s(66022),r=s(95540),o=s(46975),d=s(72441),a=s(47956),f=s(37277),v=s(44594),c=s(26099),p=s(82248),m=new g({initialize:function(E){this.scene=E,this.systems=E.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,E.sys.events.once(v.BOOT,this.boot,this),E.sys.events.on(v.START,this.start,this)},boot:function(){this.world=new p(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(v.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new p(this.scene,this.config),this.add=new h(this.world));var T=this.systems.events;r(this.config,"customUpdate",!1)||T.on(v.UPDATE,this.world.update,this.world),T.on(v.POST_UPDATE,this.world.postUpdate,this.world),T.once(v.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(v.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(v.UPDATE,this.world.update,this.world)},getConfig:function(){var T=this.systems.game.config.physics,E=this.systems.settings.physics,P=o(r(E,"arcade",{}),r(T,"arcade",{}));return P},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(T,E,P,w,A){return P===void 0&&(P=null),w===void 0&&(w=null),A===void 0&&(A=P),this.world.collideObjects(T,E,P,w,A,!0)},collide:function(T,E,P,w,A){return P===void 0&&(P=null),w===void 0&&(w=null),A===void 0&&(A=P),this.world.collideObjects(T,E,P,w,A,!1)},collideTiles:function(T,E,P,w,A){return this.world.collideTiles(T,E,P,w,A)},overlapTiles:function(T,E,P,w,A){return this.world.overlapTiles(T,E,P,w,A)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(T,E,P,w,A,b){w===void 0&&(w=60);var O=Math.atan2(P-T.y,E-T.x);return T.body.acceleration.setToPolar(O,w),A!==void 0&&b!==void 0&&T.body.maxVelocity.set(A,b),O},accelerateToObject:function(T,E,P,w,A){return this.accelerateTo(T,E.x,E.y,P,w,A)},closest:function(T,E){E||(E=this.world.bodies.entries);for(var P=Number.MAX_VALUE,w=null,A=T.x,b=T.y,O=E.length,I=0;I<O;I++){var D=E[I],B=D.body||D;if(!(T===D||T===B||T===B.gameObject||T===B.center)){var k=l(A,b,B.center.x,B.center.y);k<P&&(w=D,P=k)}}return w},furthest:function(T,E){E||(E=this.world.bodies.entries);for(var P=-1,w=null,A=T.x,b=T.y,O=E.length,I=0;I<O;I++){var D=E[I],B=D.body||D;if(!(T===D||T===B||T===B.gameObject||T===B.center)){var k=l(A,b,B.center.x,B.center.y);k>P&&(w=D,P=k)}}return w},moveTo:function(T,E,P,w,A){w===void 0&&(w=60),A===void 0&&(A=0);var b=Math.atan2(P-T.y,E-T.x);return A>0&&(w=u(T.x,T.y,E,P)/(A/1e3)),T.body.velocity.setToPolar(b,w),b},moveToObject:function(T,E,P,w){return this.moveTo(T,E.x,E.y,P,w)},velocityFromAngle:function(T,E,P){return E===void 0&&(E=60),P===void 0&&(P=new c),P.setToPolar(y(T),E)},velocityFromRotation:function(T,E,P){return E===void 0&&(E=60),P===void 0&&(P=new c),P.setToPolar(T,E)},overlapRect:function(T,E,P,w,A,b){return a(this.world,T,E,P,w,A,b)},overlapCirc:function(T,E,P,w,A){return d(this.world,T,E,P,w,A)},shutdown:function(){if(this.world){var T=this.systems.events;T.off(v.UPDATE,this.world.update,this.world),T.off(v.POST_UPDATE,this.world.postUpdate,this.world),T.off(v.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(v.START,this.start,this),this.scene=null,this.systems=null}});f.register("ArcadePhysics",m,"arcadePhysics"),C.exports=m}),13759:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(92209),u=s(68287),l=new g({Extends:u,Mixins:[y.Acceleration,y.Angular,y.Bounce,y.Collision,y.Debug,y.Drag,y.Enable,y.Friction,y.Gravity,y.Immovable,y.Mass,y.Pushable,y.Size,y.Velocity],initialize:function(r,o,d,a,f){u.call(this,r,o,d,a,f),this.body=null}});C.exports=l}),37742:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(78389),u=s(37747),l=s(63012),h=s(43396),r=s(87841),o=s(37303),d=s(95829),a=s(26099),f=new g({Mixins:[y],initialize:function(c,p){var m=64,T=64,E={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},P=p!==void 0;P&&p.displayWidth&&(m=p.displayWidth,T=p.displayHeight),P||(p=E),this.world=c,this.gameObject=P?p:void 0,this.isBody=!0,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=c.defaults.debugShowBody,this.debugShowVelocity=c.defaults.debugShowVelocity,this.debugBodyColor=c.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=m,this.height=T,this.sourceWidth=m,this.sourceHeight=T,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(m/2),this.halfHeight=Math.abs(T/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new a,this.newVelocity=new a,this.deltaMax=new a,this.acceleration=new a,this.allowDrag=!0,this.drag=new a,this.allowGravity=!0,this.gravity=new a,this.bounce=new a,this.worldBounce=null,this.customBoundsRectangle=c.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new a(1e4,1e4),this.maxSpeed=-1,this.friction=new a(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new a(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=d(!1),this.touching=d(!0),this.wasTouching=d(!0),this.blocked=d(!0),this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new r,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var v=this.gameObject,c=this.transform;if(v.parentContainer){var p=v.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);c.x=p.tx,c.y=p.ty,c.rotation=h(p.rotation),c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.displayOriginX=v.displayOriginX,c.displayOriginY=v.displayOriginY}else c.x=v.x,c.y=v.y,c.rotation=v.angle,c.scaleX=v.scaleX,c.scaleY=v.scaleY,c.displayOriginX=v.displayOriginX,c.displayOriginY=v.displayOriginY;var m=!1;if(this.syncBounds){var T=v.getBounds(this._bounds);this.width=T.width,this.height=T.height,m=!0}else{var E=Math.abs(c.scaleX),P=Math.abs(c.scaleY);(this._sx!==E||this._sy!==P)&&(this.width=this.sourceWidth*E,this.height=this.sourceHeight*P,this._sx=E,this._sy=P,m=!0)}m&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var v=this.transform;this.position.x=v.x+v.scaleX*(this.offset.x-v.displayOriginX),this.position.y=v.y+v.scaleY*(this.offset.y-v.displayOriginY),this.updateCenter()},resetFlags:function(v){v===void 0&&(v=!1);var c=this.wasTouching,p=this.touching,m=this.blocked;v?d(!0,c):(c.none=p.none,c.up=p.up,c.down=p.down,c.left=p.left,c.right=p.right),d(!0,p),d(!0,m),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(v,c){if(v&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var p=this.position;this.prev.x=p.x,this.prev.y=p.y,this.prevFrame.x=p.x,this.prevFrame.y=p.y}v&&this.update(c)},update:function(v){var c=this.prev,p=this.position,m=this.velocity;if(c.set(p.x,p.y),!this.moves){this._dx=p.x-c.x,this._dy=p.y-c.y;return}if(this.directControl){var T=this.autoFrame;m.set((p.x-T.x)/v,(p.y-T.y)/v),this.world.updateMotion(this,v),this._dx=p.x-T.x,this._dy=p.y-T.y}else this.world.updateMotion(this,v),this.newVelocity.set(m.x*v,m.y*v),p.add(this.newVelocity),this._dx=p.x-c.x,this._dy=p.y-c.y;var E=m.x,P=m.y;if(this.updateCenter(),this.angle=Math.atan2(P,E),this.speed=Math.sqrt(E*E+P*P),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var w=this.blocked;this.world.emit(l.WORLD_BOUNDS,this,w.up,w.down,w.left,w.right)}},postUpdate:function(){var v=this.position,c=v.x-this.prevFrame.x,p=v.y-this.prevFrame.y,m=this.gameObject;if(this.moves){var T=this.deltaMax.x,E=this.deltaMax.y;T!==0&&c!==0&&(c<0&&c<-T?c=-T:c>0&&c>T&&(c=T)),E!==0&&p!==0&&(p<0&&p<-E?p=-E:p>0&&p>E&&(p=E)),m&&(m.x+=c,m.y+=p)}c<0?this.facing=u.FACING_LEFT:c>0&&(this.facing=u.FACING_RIGHT),p<0?this.facing=u.FACING_UP:p>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&m&&(m.angle+=this.deltaZ()),this._tx=c,this._ty=p,this.autoFrame.set(v.x,v.y)},setBoundsRectangle:function(v){return this.customBoundsRectangle=v||this.world.bounds,this},checkWorldBounds:function(){var v=this.position,c=this.velocity,p=this.blocked,m=this.customBoundsRectangle,T=this.world.checkCollision,E=this.worldBounce?-this.worldBounce.x:-this.bounce.x,P=this.worldBounce?-this.worldBounce.y:-this.bounce.y,w=!1;return v.x<m.x&&T.left?(v.x=m.x,c.x*=E,p.left=!0,w=!0):this.right>m.right&&T.right&&(v.x=m.right-this.width,c.x*=E,p.right=!0,w=!0),v.y<m.y&&T.up?(v.y=m.y,c.y*=P,p.up=!0,w=!0):this.bottom>m.bottom&&T.down&&(v.y=m.bottom-this.height,c.y*=P,p.down=!0,w=!0),w&&(this.blocked.none=!1,this.updateCenter()),w},setOffset:function(v,c){return c===void 0&&(c=v),this.offset.set(v,c),this},setGameObject:function(v,c){return c===void 0&&(c=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=v,v.body&&(v.body=this),this.setSize(),this.world.add(this),this.enable=c,this},setSize:function(v,c,p){p===void 0&&(p=!0);var m=this.gameObject;if(m&&(!v&&m.frame&&(v=m.frame.realWidth),!c&&m.frame&&(c=m.frame.realHeight)),this.sourceWidth=v,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&m&&m.getCenter){var T=(m.width-v)/2,E=(m.height-c)/2;this.offset.set(T,E)}return this.isCircle=!1,this.radius=0,this},setCircle:function(v,c,p){return c===void 0&&(c=this.offset.x),p===void 0&&(p=this.offset.y),v>0?(this.isCircle=!0,this.radius=v,this.sourceWidth=v*2,this.sourceHeight=v*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,p),this.updateCenter()):this.isCircle=!1,this},reset:function(v,c){this.stop();var p=this.gameObject;p&&(p.setPosition(v,c),this.rotation=p.angle,this.preRotation=p.angle);var m=this.position;p&&p.getTopLeft?p.getTopLeft(m):m.set(v,c),this.prev.copy(m),this.prevFrame.copy(m),this.autoFrame.copy(m),p&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(v){return v.x=this.x,v.y=this.y,v.right=this.right,v.bottom=this.bottom,v},hitTest:function(v,c){if(!this.isCircle)return o(this,v,c);if(this.radius>0&&v>=this.left&&v<=this.right&&c>=this.top&&c<=this.bottom){var p=(this.center.x-v)*(this.center.x-v),m=(this.center.y-c)*(this.center.y-c);return p+m<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(v){var c=this.position,p=c.x+this.halfWidth,m=c.y+this.halfHeight;this.debugShowBody&&(v.lineStyle(v.defaultStrokeWidth,this.debugBodyColor),this.isCircle?v.strokeCircle(p,m,this.width/2):(this.checkCollision.up&&v.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&v.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&v.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&v.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(v.lineStyle(v.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),v.lineBetween(p,m,p+this.velocity.x/2,m+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(v){return v===void 0&&(v=!0),this.directControl=v,this},setCollideWorldBounds:function(v,c,p,m){v===void 0&&(v=!0),this.collideWorldBounds=v;var T=c!==void 0,E=p!==void 0;return(T||E)&&(this.worldBounce||(this.worldBounce=new a),T&&(this.worldBounce.x=c),E&&(this.worldBounce.y=p)),m!==void 0&&(this.onWorldBounds=m),this},setVelocity:function(v,c){return this.velocity.set(v,c),v=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(v*v+c*c),this},setVelocityX:function(v){return this.setVelocity(v,this.velocity.y)},setVelocityY:function(v){return this.setVelocity(this.velocity.x,v)},setMaxVelocity:function(v,c){return this.maxVelocity.set(v,c),this},setMaxVelocityX:function(v){return this.maxVelocity.x=v,this},setMaxVelocityY:function(v){return this.maxVelocity.y=v,this},setMaxSpeed:function(v){return this.maxSpeed=v,this},setSlideFactor:function(v,c){return this.slideFactor.set(v,c),this},setBounce:function(v,c){return this.bounce.set(v,c),this},setBounceX:function(v){return this.bounce.x=v,this},setBounceY:function(v){return this.bounce.y=v,this},setAcceleration:function(v,c){return this.acceleration.set(v,c),this},setAccelerationX:function(v){return this.acceleration.x=v,this},setAccelerationY:function(v){return this.acceleration.y=v,this},setAllowDrag:function(v){return v===void 0&&(v=!0),this.allowDrag=v,this},setAllowGravity:function(v){return v===void 0&&(v=!0),this.allowGravity=v,this},setAllowRotation:function(v){return v===void 0&&(v=!0),this.allowRotation=v,this},setDrag:function(v,c){return this.drag.set(v,c),this},setDamping:function(v){return this.useDamping=v,this},setDragX:function(v){return this.drag.x=v,this},setDragY:function(v){return this.drag.y=v,this},setGravity:function(v,c){return this.gravity.set(v,c),this},setGravityX:function(v){return this.gravity.x=v,this},setGravityY:function(v){return this.gravity.y=v,this},setFriction:function(v,c){return this.friction.set(v,c),this},setFrictionX:function(v){return this.friction.x=v,this},setFrictionY:function(v){return this.friction.y=v,this},setAngularVelocity:function(v){return this.angularVelocity=v,this},setAngularAcceleration:function(v){return this.angularAcceleration=v,this},setAngularDrag:function(v){return this.angularDrag=v,this},setMass:function(v){return this.mass=v,this},setImmovable:function(v){return v===void 0&&(v=!0),this.immovable=v,this},setEnable:function(v){return v===void 0&&(v=!0),this.enable=v,this},processX:function(v,c,p,m){this.x+=v,this.updateCenter(),c!==null&&(this.velocity.x=c*this.slideFactor.x);var T=this.blocked;p&&(T.left=!0,T.none=!1),m&&(T.right=!0,T.none=!1)},processY:function(v,c,p,m){this.y+=v,this.updateCenter(),c!==null&&(this.velocity.y=c*this.slideFactor.y);var T=this.blocked;p&&(T.up=!0,T.none=!1),m&&(T.down=!0,T.none=!1)},x:{get:function(){return this.position.x},set:function(v){this.position.x=v}},y:{get:function(){return this.position.y},set:function(v){this.position.y=v}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});C.exports=f}),79342:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r,o,d,a,f){this.world=l,this.name="",this.active=!0,this.overlapOnly=h,this.object1=r,this.object2=o,this.collideCallback=d,this.processCallback=a,this.callbackContext=f},setName:function(u){return this.name=u,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});C.exports=y}),66022:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(71289),y=s(13759),u=s(37742),l=s(83419),h=s(37747),r=s(60758),o=s(72624),d=s(71464),a=new l({initialize:function(v){this.world=v,this.scene=v.scene,this.sys=v.scene.sys},collider:function(f,v,c,p,m){return this.world.addCollider(f,v,c,p,m)},overlap:function(f,v,c,p,m){return this.world.addOverlap(f,v,c,p,m)},existing:function(f,v){var c=v?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(f,c),f},staticImage:function(f,v,c,p){var m=new g(this.scene,f,v,c,p);return this.sys.displayList.add(m),this.world.enableBody(m,h.STATIC_BODY),m},image:function(f,v,c,p){var m=new g(this.scene,f,v,c,p);return this.sys.displayList.add(m),this.world.enableBody(m,h.DYNAMIC_BODY),m},staticSprite:function(f,v,c,p){var m=new y(this.scene,f,v,c,p);return this.sys.displayList.add(m),this.sys.updateList.add(m),this.world.enableBody(m,h.STATIC_BODY),m},sprite:function(f,v,c,p){var m=new y(this.scene,f,v,c,p);return this.sys.displayList.add(m),this.sys.updateList.add(m),this.world.enableBody(m,h.DYNAMIC_BODY),m},staticGroup:function(f,v){return this.sys.updateList.add(new d(this.world,this.world.scene,f,v))},group:function(f,v){return this.sys.updateList.add(new r(this.world,this.world.scene,f,v))},body:function(f,v,c,p){var m=new u(this.world);return m.position.set(f,v),c&&p&&m.setSize(c,p),this.world.add(m,h.DYNAMIC_BODY),m},staticBody:function(f,v,c,p){var m=new o(this.world);return m.position.set(f,v),c&&p&&m.setSize(c,p),this.world.add(m,h.STATIC_BODY),m},destroy:function(){this.world=null,this.scene=null,this.sys=null}});C.exports=a}),79599:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=0;if(!Array.isArray(s))g=s;else for(var y=0;y<s.length;y++)g|=s[y];return g};C.exports=R}),64897:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37747),y=function(u,l,h,r){var o=0,d=u.deltaAbsX()+l.deltaAbsX()+r;return u._dx===0&&l._dx===0?(u.embedded=!0,l.embedded=!0):u._dx>l._dx?(o=u.right-l.x,o>d&&!h||u.checkCollision.right===!1||l.checkCollision.left===!1?o=0:(u.touching.none=!1,u.touching.right=!0,l.touching.none=!1,l.touching.left=!0,l.physicsType===g.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.right=!0),u.physicsType===g.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.left=!0))):u._dx<l._dx&&(o=u.x-l.width-l.x,-o>d&&!h||u.checkCollision.left===!1||l.checkCollision.right===!1?o=0:(u.touching.none=!1,u.touching.left=!0,l.touching.none=!1,l.touching.right=!0,l.physicsType===g.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.left=!0),u.physicsType===g.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.right=!0))),u.overlapX=o,l.overlapX=o,o};C.exports=y}),45170:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37747),y=function(u,l,h,r){var o=0,d=u.deltaAbsY()+l.deltaAbsY()+r;return u._dy===0&&l._dy===0?(u.embedded=!0,l.embedded=!0):u._dy>l._dy?(o=u.bottom-l.y,o>d&&!h||u.checkCollision.down===!1||l.checkCollision.up===!1?o=0:(u.touching.none=!1,u.touching.down=!0,l.touching.none=!1,l.touching.up=!0,l.physicsType===g.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.down=!0),u.physicsType===g.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.up=!0))):u._dy<l._dy&&(o=u.y-l.bottom,-o>d&&!h||u.checkCollision.up===!1||l.checkCollision.down===!1?o=0:(u.touching.none=!1,u.touching.up=!0,l.touching.none=!1,l.touching.down=!0,l.physicsType===g.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.up=!0),u.physicsType===g.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.down=!0))),u.overlapY=o,l.overlapY=o,o};C.exports=y}),60758:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(13759),y=s(83419),u=s(78389),l=s(37747),h=s(95540),r=s(26479),o=s(41212),d=new y({Extends:r,Mixins:[u],initialize:function(f,v,c,p){if(!c&&!p)p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(o(c))p=c,c=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(c)&&o(c[0])){var m=this;c.forEach(function(T){T.internalCreateCallback=m.createCallbackHandler,T.internalRemoveCallback=m.removeCallbackHandler,T.classType=h(T,"classType",g)}),p=null}else p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=f,p&&(p.classType=h(p,"classType",g)),this.physicsType=l.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:h(p,"collideWorldBounds",!1),setBoundsRectangle:h(p,"customBoundsRectangle",null),setAccelerationX:h(p,"accelerationX",0),setAccelerationY:h(p,"accelerationY",0),setAllowDrag:h(p,"allowDrag",!0),setAllowGravity:h(p,"allowGravity",!0),setAllowRotation:h(p,"allowRotation",!0),setDamping:h(p,"useDamping",!1),setBounceX:h(p,"bounceX",0),setBounceY:h(p,"bounceY",0),setDragX:h(p,"dragX",0),setDragY:h(p,"dragY",0),setEnable:h(p,"enable",!0),setGravityX:h(p,"gravityX",0),setGravityY:h(p,"gravityY",0),setFrictionX:h(p,"frictionX",0),setFrictionY:h(p,"frictionY",0),setMaxSpeed:h(p,"maxSpeed",-1),setMaxVelocityX:h(p,"maxVelocityX",1e4),setMaxVelocityY:h(p,"maxVelocityY",1e4),setVelocityX:h(p,"velocityX",0),setVelocityY:h(p,"velocityY",0),setAngularVelocity:h(p,"angularVelocity",0),setAngularAcceleration:h(p,"angularAcceleration",0),setAngularDrag:h(p,"angularDrag",0),setMass:h(p,"mass",1),setImmovable:h(p,"immovable",!1)},r.call(this,v,c,p),this.type="PhysicsGroup"},createCallbackHandler:function(a){a.body||this.world.enableBody(a,l.DYNAMIC_BODY);var f=a.body;for(var v in this.defaults)f[v](this.defaults[v])},removeCallbackHandler:function(a){a.body&&this.world.disableBody(a)},setVelocity:function(a,f,v){v===void 0&&(v=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.set(a+p*v,f+p*v);return this},setVelocityX:function(a,f){f===void 0&&(f=0);for(var v=this.getChildren(),c=0;c<v.length;c++)v[c].body.velocity.x=a+c*f;return this},setVelocityY:function(a,f){f===void 0&&(f=0);for(var v=this.getChildren(),c=0;c<v.length;c++)v[c].body.velocity.y=a+c*f;return this}});C.exports=d}),3017:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R,s,g,y,u,l,h,r,o,d,a,f,v,c,p,m,T,E=function(I,D,B){R=I,s=D;var k=R.velocity.x,N=s.velocity.x;return g=R.pushable,o=R._dx<0,d=R._dx>0,a=R._dx===0,p=Math.abs(R.right-s.x)<=Math.abs(s.right-R.x),h=N-k*R.bounce.x,y=s.pushable,f=s._dx<0,v=s._dx>0,c=s._dx===0,m=!p,r=k-N*s.bounce.x,T=Math.abs(B),P()},P=function(){return d&&p&&s.blocked.right?(R.processX(-T,h,!1,!0),1):o&&m&&s.blocked.left?(R.processX(T,h,!0),1):v&&m&&R.blocked.right?(s.processX(-T,r,!1,!0),2):f&&p&&R.blocked.left?(s.processX(T,r,!0),2):0},w=function(){var I=R.velocity.x,D=s.velocity.x,B=Math.sqrt(D*D*s.mass/R.mass)*(D>0?1:-1),k=Math.sqrt(I*I*R.mass/s.mass)*(I>0?1:-1),N=(B+k)*.5;return B-=N,k-=N,u=N+B*R.bounce.x,l=N+k*s.bounce.x,o&&m?A(0):f&&p?A(1):d&&p?A(2):v&&m?A(3):!1},A=function(I){if(g&&y)T*=.5,I===0||I===3?(R.processX(T,u),s.processX(-T,l)):(R.processX(-T,u),s.processX(T,l));else if(g&&!y)I===0||I===3?R.processX(T,h,!0):R.processX(-T,h,!1,!0);else if(!g&&y)I===0||I===3?s.processX(-T,r,!1,!0):s.processX(T,r,!0);else{var D=T*.5;I===0?c?(R.processX(T,0,!0),s.processX(0,null,!1,!0)):v?(R.processX(D,0,!0),s.processX(-D,0,!1,!0)):(R.processX(D,s.velocity.x,!0),s.processX(-D,null,!1,!0)):I===1?a?(R.processX(0,null,!1,!0),s.processX(T,0,!0)):d?(R.processX(-D,0,!1,!0),s.processX(D,0,!0)):(R.processX(-D,null,!1,!0),s.processX(D,R.velocity.x,!0)):I===2?c?(R.processX(-T,0,!1,!0),s.processX(0,null,!0)):f?(R.processX(-D,0,!1,!0),s.processX(D,0,!0)):(R.processX(-D,s.velocity.x,!1,!0),s.processX(D,null,!0)):I===3&&(a?(R.processX(0,null,!0),s.processX(-T,0,!1,!0)):o?(R.processX(D,0,!0),s.processX(-D,0,!1,!0)):(R.processX(D,s.velocity.y,!0),s.processX(-D,null,!1,!0)))}return!0},b=function(I){if(I===1?s.velocity.x=0:p?s.processX(T,r,!0):s.processX(-T,r,!1,!0),R.moves){var D=R.directControl?R.y-R.autoFrame.y:R.y-R.prev.y;s.y+=D*R.friction.y,s._dy=s.y-s.prev.y}},O=function(I){if(I===2?R.velocity.x=0:m?R.processX(T,h,!0):R.processX(-T,h,!1,!0),s.moves){var D=s.directControl?s.y-s.autoFrame.y:s.y-s.prev.y;R.y+=D*s.friction.y,R._dy=R.y-R.prev.y}};C.exports={BlockCheck:P,Check:w,Set:E,Run:A,RunImmovableBody1:b,RunImmovableBody2:O}}),47962:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R,s,g,y,u,l,h,r,o,d,a,f,v,c,p,m,T,E=function(I,D,B){R=I,s=D;var k=R.velocity.y,N=s.velocity.y;return g=R.pushable,o=R._dy<0,d=R._dy>0,a=R._dy===0,p=Math.abs(R.bottom-s.y)<=Math.abs(s.bottom-R.y),h=N-k*R.bounce.y,y=s.pushable,f=s._dy<0,v=s._dy>0,c=s._dy===0,m=!p,r=k-N*s.bounce.y,T=Math.abs(B),P()},P=function(){return d&&p&&s.blocked.down?(R.processY(-T,h,!1,!0),1):o&&m&&s.blocked.up?(R.processY(T,h,!0),1):v&&m&&R.blocked.down?(s.processY(-T,r,!1,!0),2):f&&p&&R.blocked.up?(s.processY(T,r,!0),2):0},w=function(){var I=R.velocity.y,D=s.velocity.y,B=Math.sqrt(D*D*s.mass/R.mass)*(D>0?1:-1),k=Math.sqrt(I*I*R.mass/s.mass)*(I>0?1:-1),N=(B+k)*.5;return B-=N,k-=N,u=N+B*R.bounce.y,l=N+k*s.bounce.y,o&&m?A(0):f&&p?A(1):d&&p?A(2):v&&m?A(3):!1},A=function(I){if(g&&y)T*=.5,I===0||I===3?(R.processY(T,u),s.processY(-T,l)):(R.processY(-T,u),s.processY(T,l));else if(g&&!y)I===0||I===3?R.processY(T,h,!0):R.processY(-T,h,!1,!0);else if(!g&&y)I===0||I===3?s.processY(-T,r,!1,!0):s.processY(T,r,!0);else{var D=T*.5;I===0?c?(R.processY(T,0,!0),s.processY(0,null,!1,!0)):v?(R.processY(D,0,!0),s.processY(-D,0,!1,!0)):(R.processY(D,s.velocity.y,!0),s.processY(-D,null,!1,!0)):I===1?a?(R.processY(0,null,!1,!0),s.processY(T,0,!0)):d?(R.processY(-D,0,!1,!0),s.processY(D,0,!0)):(R.processY(-D,null,!1,!0),s.processY(D,R.velocity.y,!0)):I===2?c?(R.processY(-T,0,!1,!0),s.processY(0,null,!0)):f?(R.processY(-D,0,!1,!0),s.processY(D,0,!0)):(R.processY(-D,s.velocity.y,!1,!0),s.processY(D,null,!0)):I===3&&(a?(R.processY(0,null,!0),s.processY(-T,0,!1,!0)):o?(R.processY(D,0,!0),s.processY(-D,0,!1,!0)):(R.processY(D,s.velocity.y,!0),s.processY(-D,null,!1,!0)))}return!0},b=function(I){if(I===1?s.velocity.y=0:p?s.processY(T,r,!0):s.processY(-T,r,!1,!0),R.moves){var D=R.directControl?R.x-R.autoFrame.x:R.x-R.prev.x;s.x+=D*R.friction.x,s._dx=s.x-s.prev.x}},O=function(I){if(I===2?R.velocity.y=0:m?R.processY(T,h,!0):R.processY(-T,h,!1,!0),s.moves){var D=s.directControl?s.x-s.autoFrame.x:s.x-s.prev.x;R.x+=D*s.friction.x,R._dx=R.x-R.prev.x}};C.exports={BlockCheck:P,Check:w,Set:E,Run:A,RunImmovableBody1:b,RunImmovableBody2:O}}),14087:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(64897),y=s(3017),u=function(l,h,r,o,d){d===void 0&&(d=g(l,h,r,o));var a=l.immovable,f=h.immovable;if(r||d===0||a&&f||l.customSeparateX||h.customSeparateX)return d!==0||l.embedded&&h.embedded;var v=y.Set(l,h,d);return!a&&!f?v>0?!0:y.Check():(a?y.RunImmovableBody1(v):f&&y.RunImmovableBody2(v),!0)};C.exports=u}),89936:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45170),y=s(47962),u=function(l,h,r,o,d){d===void 0&&(d=g(l,h,r,o));var a=l.immovable,f=h.immovable;if(r||d===0||a&&f||l.customSeparateY||h.customSeparateY)return d!==0||l.embedded&&h.embedded;var v=y.Set(l,h,d);return!a&&!f?v>0?!0:y.Check():(a?y.RunImmovableBody1(v):f&&y.RunImmovableBody2(v),!0)};C.exports=u}),95829:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===void 0&&(g={}),g.none=s,g.up=!1,g.down=!1,g.left=!1,g.right=!1,s||(g.up=!0,g.down=!0,g.left=!0,g.right=!0),g};C.exports=R}),72624:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87902),y=s(83419),u=s(78389),l=s(37747),h=s(37303),r=s(95829),o=s(26099),d=new y({Mixins:[u],initialize:function(f,v){var c=64,p=64,m={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},T=v!==void 0;T&&v.displayWidth&&(c=v.displayWidth,p=v.displayHeight),T||(v=m),this.world=f,this.gameObject=T?v:void 0,this.isBody=!0,this.debugShowBody=f.defaults.debugShowStaticBody,this.debugBodyColor=f.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(v.x-c*v.originX,v.y-p*v.originY),this.width=c,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=r(!1),this.touching=r(!0),this.wasTouching=r(!0),this.blocked=r(!0),this.physicsType=l.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(a,f){return a&&a!==this.gameObject&&(this.gameObject.body=null,a.body=this,this.gameObject=a),f&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var a=this.gameObject;return a.getTopLeft(this.position),this.width=a.displayWidth,this.height=a.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(a,f){return f===void 0&&(f=a),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a,f),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(a,f,v){v===void 0&&(v=!0);var c=this.gameObject;if(c&&c.frame&&(a||(a=c.frame.realWidth),f||(f=c.frame.realHeight)),this.world.staticTree.remove(this),this.width=a,this.height=f,this.halfWidth=Math.floor(a/2),this.halfHeight=Math.floor(f/2),v&&c&&c.getCenter){var p=c.displayWidth/2,m=c.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,m-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(a,f,v){return f===void 0&&(f=this.offset.x),v===void 0&&(v=this.offset.y),a>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=a,this.width=a*2,this.height=a*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,v),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(a,f){var v=this.gameObject;a===void 0&&(a=v.x),f===void 0&&(f=v.y),this.world.staticTree.remove(this),v.setPosition(a,f),v.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,f){return this.isCircle?g(this,a,f):h(this,a,f)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(a){var f=this.position,v=f.x+this.halfWidth,c=f.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?a.strokeCircle(v,c,this.width/2):a.strokeRect(f.x,f.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(a){return a<=0&&(a=.1),this.mass=a,this},x:{get:function(){return this.position.x},set:function(a){this.world.staticTree.remove(this),this.position.x=a,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(a){this.world.staticTree.remove(this),this.position.y=a,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});C.exports=d}),71464:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(13759),y=s(83419),u=s(78389),l=s(37747),h=s(95540),r=s(26479),o=s(41212),d=new y({Extends:r,Mixins:[u],initialize:function(f,v,c,p){!c&&!p?p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:g}:o(c)?(p=c,c=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=h(p,"classType",g)):Array.isArray(c)&&o(c[0])?(p=c,c=null,p.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=h(m,"classType",g)})):p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=f,this.physicsType=l.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,r.call(this,v,c,p),this.type="StaticPhysicsGroup"},createCallbackHandler:function(a){a.body||this.world.enableBody(a,l.STATIC_BODY)},removeCallbackHandler:function(a){a.body&&this.world.disableBody(a)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var a=this.children.entries,f=0;f<a.length;f++)a[f].body.reset();return this}});C.exports=d}),82248:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(55495),y=s(37742),u=s(45319),l=s(83419),h=s(79342),r=s(37747),o=s(20339),d=s(52816),a=s(50792),f=s(63012),v=s(43855),c=s(5470),p=s(94977),m=s(64897),T=s(45170),E=s(96523),P=s(35154),w=s(36383),A=s(25774),b=s(96602),O=s(87841),I=s(59542),D=s(40012),B=s(14087),k=s(89936),N=s(35072),H=s(72624),$=s(2483),J=s(61340),q=s(26099),Y=s(15994),K=new l({Extends:a,initialize:function(U,Z){a.call(this),this.scene=U,this.bodies=new N,this.staticBodies=new N,this.pendingDestroy=new N,this.colliders=new A,this.gravity=new q(P(Z,"gravity.x",0),P(Z,"gravity.y",0)),this.bounds=new O(P(Z,"x",0),P(Z,"y",0),P(Z,"width",U.sys.scale.width),P(Z,"height",U.sys.scale.height)),this.checkCollision={up:P(Z,"checkCollision.up",!0),down:P(Z,"checkCollision.down",!0),left:P(Z,"checkCollision.left",!0),right:P(Z,"checkCollision.right",!0)},this.fps=P(Z,"fps",60),this.fixedStep=P(Z,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=P(Z,"timeScale",1),this.OVERLAP_BIAS=P(Z,"overlapBias",4),this.TILE_BIAS=P(Z,"tileBias",16),this.forceX=P(Z,"forceX",!1),this.isPaused=P(Z,"isPaused",!1),this._total=0,this.drawDebug=P(Z,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:P(Z,"debugShowBody",!0),debugShowStaticBody:P(Z,"debugShowStaticBody",!0),debugShowVelocity:P(Z,"debugShowVelocity",!0),bodyDebugColor:P(Z,"debugBodyColor",16711935),staticBodyDebugColor:P(Z,"debugStaticBodyColor",255),velocityDebugColor:P(Z,"debugVelocityColor",65280)},this.maxEntries=P(Z,"maxEntries",16),this.useTree=P(Z,"useTree",!0),this.tree=new I(this.maxEntries),this.staticTree=new I(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new J,this._tempMatrix2=new J,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(V,U){U===void 0&&(U=r.DYNAMIC_BODY),Array.isArray(V)||(V=[V]);for(var Z=0;Z<V.length;Z++){var et=V[Z];if(et.isParent)for(var st=et.getChildren(),rt=0;rt<st.length;rt++){var at=st[rt];at.isParent?this.enable(at,U):this.enableBody(at,U)}else this.enableBody(et,U)}},enableBody:function(V,U){return U===void 0&&(U=r.DYNAMIC_BODY),V.hasTransformComponent&&(V.body||(U===r.DYNAMIC_BODY?V.body=new y(this,V):U===r.STATIC_BODY&&(V.body=new H(this,V))),this.add(V.body)),V},add:function(V){return V.physicsType===r.DYNAMIC_BODY?this.bodies.set(V):V.physicsType===r.STATIC_BODY&&(this.staticBodies.set(V),this.staticTree.insert(V)),V.enable=!0,V},disable:function(V){Array.isArray(V)||(V=[V]);for(var U=0;U<V.length;U++){var Z=V[U];if(Z.isParent)for(var et=Z.getChildren(),st=0;st<et.length;st++){var rt=et[st];rt.isParent?this.disable(rt):this.disableBody(rt.body)}else this.disableBody(Z.body)}},disableBody:function(V){this.remove(V),V.enable=!1},remove:function(V){V.physicsType===r.DYNAMIC_BODY?(this.tree.remove(V),this.bodies.delete(V)):V.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(V),this.staticTree.remove(V))},createDebugGraphic:function(){var V=this.scene.sys.add.graphics({x:0,y:0});return V.setDepth(Number.MAX_VALUE),this.debugGraphic=V,this.drawDebug=!0,V},setBounds:function(V,U,Z,et,st,rt,at,ut){return this.bounds.setTo(V,U,Z,et),st!==void 0&&this.setBoundsCollision(st,rt,at,ut),this},setBoundsCollision:function(V,U,Z,et){return V===void 0&&(V=!0),U===void 0&&(U=!0),Z===void 0&&(Z=!0),et===void 0&&(et=!0),this.checkCollision.left=V,this.checkCollision.right=U,this.checkCollision.up=Z,this.checkCollision.down=et,this},pause:function(){return this.isPaused=!0,this.emit(f.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(f.RESUME),this},addCollider:function(V,U,Z,et,st){Z===void 0&&(Z=null),et===void 0&&(et=null),st===void 0&&(st=Z);var rt=new h(this,!1,V,U,Z,et,st);return this.colliders.add(rt),rt},addOverlap:function(V,U,Z,et,st){Z===void 0&&(Z=null),et===void 0&&(et=null),st===void 0&&(st=Z);var rt=new h(this,!0,V,U,Z,et,st);return this.colliders.add(rt),rt},removeCollider:function(V){return this.colliders.remove(V),this},setFPS:function(V){return this.fps=V,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(V,U){if(!(this.isPaused||this.bodies.size===0)){var Z,et=this._frameTime,st=this._frameTimeMS*this.timeScale;this._elapsed+=U;var rt,at=this.bodies.entries,ut=this._elapsed>=st;for(this.fixedStep||(et=U*.001,ut=!0,this._elapsed=0),Z=0;Z<at.length;Z++)rt=at[Z],rt.enable&&rt.preUpdate(ut,et);if(ut){this._elapsed-=st,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(at));var vt=this.colliders.update();for(Z=0;Z<vt.length;Z++){var pt=vt[Z];pt.active&&pt.update()}this.emit(f.WORLD_STEP,et)}for(;this._elapsed>=st;)this._elapsed-=st,this.step(et)}},step:function(V){var U,Z,et=this.bodies.entries,st=et.length;for(U=0;U<st;U++)Z=et[U],Z.enable&&Z.update(V);this.useTree&&(this.tree.clear(),this.tree.load(et));var rt=this.colliders.update();for(U=0;U<rt.length;U++){var at=rt[U];at.active&&at.update()}this.emit(f.WORLD_STEP,V),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var V,U,Z=this.bodies.entries,et=Z.length,st=this.bodies,rt=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,V=0;V<et;V++)U=Z[V],U.enable&&U.postUpdate();if(this.drawDebug){var at=this.debugGraphic;for(at.clear(),V=0;V<et;V++)U=Z[V],U.willDrawDebug()&&U.drawDebug(at);for(Z=rt.entries,et=Z.length,V=0;V<et;V++)U=Z[V],U.willDrawDebug()&&U.drawDebug(at)}var ut=this.pendingDestroy;if(ut.size>0){var vt=this.tree,pt=this.staticTree;for(Z=ut.entries,et=Z.length,V=0;V<et;V++)U=Z[V],U.physicsType===r.DYNAMIC_BODY?(vt.remove(U),st.delete(U)):U.physicsType===r.STATIC_BODY&&(pt.remove(U),rt.delete(U)),U.world=void 0,U.gameObject=void 0;ut.clear()}},updateMotion:function(V,U){V.allowRotation&&this.computeAngularVelocity(V,U),this.computeVelocity(V,U)},computeAngularVelocity:function(V,U){var Z=V.angularVelocity,et=V.angularAcceleration,st=V.angularDrag,rt=V.maxAngular;et?Z+=et*U:V.allowDrag&&st&&(st*=U,c(Z-st,0,.1)?Z-=st:p(Z+st,0,.1)?Z+=st:Z=0),Z=u(Z,-rt,rt);var at=Z-V.angularVelocity;V.angularVelocity+=at,V.rotation+=V.angularVelocity*U},computeVelocity:function(V,U){var Z=V.velocity.x,et=V.acceleration.x,st=V.drag.x,rt=V.maxVelocity.x,at=V.velocity.y,ut=V.acceleration.y,vt=V.drag.y,pt=V.maxVelocity.y,gt=V.speed,yt=V.maxSpeed,mt=V.allowDrag,Tt=V.useDamping;V.allowGravity&&(Z+=(this.gravity.x+V.gravity.x)*U,at+=(this.gravity.y+V.gravity.y)*U),et?Z+=et*U:mt&&st&&(Tt?(st=Math.pow(st,U),Z*=st,gt=Math.sqrt(Z*Z+at*at),v(gt,0,.001)&&(Z=0)):(st*=U,c(Z-st,0,.01)?Z-=st:p(Z+st,0,.01)?Z+=st:Z=0)),ut?at+=ut*U:mt&&vt&&(Tt?(vt=Math.pow(vt,U),at*=vt,gt=Math.sqrt(Z*Z+at*at),v(gt,0,.001)&&(at=0)):(vt*=U,c(at-vt,0,.01)?at-=vt:p(at+vt,0,.01)?at+=vt:at=0)),Z=u(Z,-rt,rt),at=u(at,-pt,pt),V.velocity.set(Z,at),yt>-1&&V.velocity.length()>yt&&(V.velocity.normalize().scale(yt),gt=yt),V.speed=gt},separate:function(V,U,Z,et,st){var rt,at,ut=!1,vt=!0;if(!V.enable||!U.enable||V.checkCollision.none||U.checkCollision.none||!this.intersects(V,U)||Z&&Z.call(et,V.gameObject||V,U.gameObject||U)===!1)return ut;if(V.isCircle||U.isCircle){var pt=this.separateCircle(V,U,st);pt.result?(ut=!0,vt=!1):(rt=pt.x,at=pt.y,vt=!0)}if(vt){var gt=!1,yt=!1,mt=this.OVERLAP_BIAS;st?(gt=B(V,U,st,mt,rt),yt=k(V,U,st,mt,at)):this.forceX||Math.abs(this.gravity.y+V.gravity.y)<Math.abs(this.gravity.x+V.gravity.x)?(gt=B(V,U,st,mt,rt),this.intersects(V,U)&&(yt=k(V,U,st,mt,at))):(yt=k(V,U,st,mt,at),this.intersects(V,U)&&(gt=B(V,U,st,mt,rt))),ut=gt||yt}return ut&&(st?(V.onOverlap||U.onOverlap)&&this.emit(f.OVERLAP,V.gameObject,U.gameObject,V,U):(V.onCollide||U.onCollide)&&this.emit(f.COLLIDE,V.gameObject,U.gameObject,V,U)),ut},separateCircle:function(V,U,Z){m(V,U,!1,0),T(V,U,!1,0);var et=V.isCircle,st=U.isCircle,rt=V.center,at=U.center,ut=V.immovable,vt=U.immovable,pt=V.velocity,gt=U.velocity,yt=0,mt=!0;if(et!==st){mt=!1;var Tt=rt.x,At=rt.y,Rt=V.halfWidth,Lt=U.position.x,Ct=U.position.y,Et=U.right,Mt=U.bottom;st&&(Tt=at.x,At=at.y,Rt=U.halfWidth,Lt=V.position.x,Ct=V.position.y,Et=V.right,Mt=V.bottom),At<Ct?Tt<Lt?yt=o(Tt,At,Lt,Ct)-Rt:Tt>Et&&(yt=o(Tt,At,Et,Ct)-Rt):At>Mt&&(Tt<Lt?yt=o(Tt,At,Lt,Mt)-Rt:Tt>Et&&(yt=o(Tt,At,Et,Mt)-Rt)),yt*=-1}else yt=V.halfWidth+U.halfWidth-d(rt,at);V.overlapR=yt,U.overlapR=yt;var zt=g(rt,at),Zt=(yt+w.EPSILON)*Math.cos(zt),oe=(yt+w.EPSILON)*Math.sin(zt),Qt={overlap:yt,result:!1,x:Zt,y:oe};if(Z&&(!mt||mt&&yt!==0))return Qt.result=!0,Qt;if(!mt&&yt===0||ut&&vt||V.customSeparateX||U.customSeparateX)return Qt.x=void 0,Qt.y=void 0,Qt;var jt=!V.pushable&&!U.pushable;if(mt){var fe=rt.x-at.x,Le=rt.y-at.y,$t=Math.sqrt(Math.pow(fe,2)+Math.pow(Le,2)),he=(at.x-rt.x)/$t||0,Gt=(at.y-rt.y)/$t||0,ve=2*(pt.x*he+pt.y*Gt-gt.x*he-gt.y*Gt)/(V.mass+U.mass);(ut||vt||!V.pushable||!U.pushable)&&(ve*=2),!ut&&V.pushable&&(pt.x=pt.x-ve/V.mass*he,pt.y=pt.y-ve/V.mass*Gt,pt.multiply(V.bounce)),!vt&&U.pushable&&(gt.x=gt.x+ve/U.mass*he,gt.y=gt.y+ve/U.mass*Gt,gt.multiply(U.bounce)),!ut&&!vt&&(Zt*=.5,oe*=.5),!ut||V.pushable||jt?(V.x-=Zt,V.y-=oe,V.updateCenter()):(!vt||U.pushable||jt)&&(U.x+=Zt,U.y+=oe,U.updateCenter()),Qt.result=!0}else!ut||V.pushable||jt?(V.x-=Zt,V.y-=oe,V.updateCenter()):(!vt||U.pushable||jt)&&(U.x+=Zt,U.y+=oe,U.updateCenter()),Qt.x=void 0,Qt.y=void 0;return Qt},intersects:function(V,U){return V===U?!1:!V.isCircle&&!U.isCircle?!(V.right<=U.left||V.bottom<=U.top||V.left>=U.right||V.top>=U.bottom):V.isCircle?U.isCircle?d(V.center,U.center)<=V.halfWidth+U.halfWidth:this.circleBodyIntersects(V,U):this.circleBodyIntersects(U,V)},circleBodyIntersects:function(V,U){var Z=u(V.center.x,U.left,U.right),et=u(V.center.y,U.top,U.bottom),st=(V.center.x-Z)*(V.center.x-Z),rt=(V.center.y-et)*(V.center.y-et);return st+rt<=V.halfWidth*V.halfWidth},overlap:function(V,U,Z,et,st){return Z===void 0&&(Z=null),et===void 0&&(et=null),st===void 0&&(st=Z),this.collideObjects(V,U,Z,et,st,!0)},collide:function(V,U,Z,et,st){return Z===void 0&&(Z=null),et===void 0&&(et=null),st===void 0&&(st=Z),this.collideObjects(V,U,Z,et,st,!1)},collideObjects:function(V,U,Z,et,st,rt){var at,ut;V.isParent&&(V.physicsType===void 0||U===void 0||V===U)&&(V=V.children.entries),U&&U.isParent&&U.physicsType===void 0&&(U=U.children.entries);var vt=Array.isArray(V),pt=Array.isArray(U);if(this._total=0,!vt&&!pt)this.collideHandler(V,U,Z,et,st,rt);else if(!vt&&pt)for(at=0;at<U.length;at++)this.collideHandler(V,U[at],Z,et,st,rt);else if(vt&&!pt)if(U)for(at=0;at<V.length;at++)this.collideHandler(V[at],U,Z,et,st,rt);else for(at=0;at<V.length;at++){var gt=V[at];for(ut=at+1;ut<V.length;ut++)at!==ut&&this.collideHandler(gt,V[ut],Z,et,st,rt)}else for(at=0;at<V.length;at++)for(ut=0;ut<U.length;ut++)this.collideHandler(V[at],U[ut],Z,et,st,rt);return this._total>0},collideHandler:function(V,U,Z,et,st,rt){if(U===void 0&&V.isParent)return this.collideGroupVsGroup(V,V,Z,et,st,rt);if(!V||!U)return!1;if(V.body||V.isBody){if(U.body||U.isBody)return this.collideSpriteVsSprite(V,U,Z,et,st,rt);if(U.isParent)return this.collideSpriteVsGroup(V,U,Z,et,st,rt);if(U.isTilemap)return this.collideSpriteVsTilemapLayer(V,U,Z,et,st,rt)}else if(V.isParent){if(U.body||U.isBody)return this.collideSpriteVsGroup(U,V,Z,et,st,rt);if(U.isParent)return this.collideGroupVsGroup(V,U,Z,et,st,rt);if(U.isTilemap)return this.collideGroupVsTilemapLayer(V,U,Z,et,st,rt)}else if(V.isTilemap){if(U.body||U.isBody)return this.collideSpriteVsTilemapLayer(U,V,Z,et,st,rt);if(U.isParent)return this.collideGroupVsTilemapLayer(U,V,Z,et,st,rt)}},canCollide:function(V,U){return V&&U&&(V.collisionMask&U.collisionCategory)!==0&&(U.collisionMask&V.collisionCategory)!==0},collideSpriteVsSprite:function(V,U,Z,et,st,rt){var at=V.isBody?V:V.body,ut=U.isBody?U:U.body;return this.canCollide(at,ut)?(this.separate(at,ut,et,st,rt)&&(Z&&Z.call(st,V,U),this._total++),!0):!1},collideSpriteVsGroup:function(V,U,Z,et,st,rt){var at=V.isBody?V:V.body;if(!(U.getLength()===0||!at||!at.enable||at.checkCollision.none||!this.canCollide(at,U))){var ut,vt,pt;if(this.useTree||U.physicsType===r.STATIC_BODY){var gt=this.treeMinMax;gt.minX=at.left,gt.minY=at.top,gt.maxX=at.right,gt.maxY=at.bottom;var yt=U.physicsType===r.DYNAMIC_BODY?this.tree.search(gt):this.staticTree.search(gt);for(vt=yt.length,ut=0;ut<vt;ut++)pt=yt[ut],!(at===pt||!pt.enable||pt.checkCollision.none||!U.contains(pt.gameObject))&&this.separate(at,pt,et,st,rt)&&(Z&&Z.call(st,at.gameObject,pt.gameObject),this._total++)}else{var mt=U.getChildren(),Tt=U.children.entries.indexOf(V);for(vt=mt.length,ut=0;ut<vt;ut++)pt=mt[ut].body,!(!pt||ut===Tt||!pt.enable)&&this.separate(at,pt,et,st,rt)&&(Z&&Z.call(st,at.gameObject,pt.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(V,U,Z,et,st,rt){if(!this.canCollide(V,U))return!1;var at=V.getChildren();if(at.length===0)return!1;for(var ut=!1,vt=0;vt<at.length;vt++)(at[vt].body||at[vt].isBody)&&this.collideSpriteVsTilemapLayer(at[vt],U,Z,et,st,rt)&&(ut=!0);return ut},collideTiles:function(V,U,Z,et,st){return U.length===0||V.body&&!V.body.enable||V.isBody&&!V.enable?!1:this.collideSpriteVsTilesHandler(V,U,Z,et,st,!1,!1)},overlapTiles:function(V,U,Z,et,st){return U.length===0||V.body&&!V.body.enable||V.isBody&&!V.enable?!1:this.collideSpriteVsTilesHandler(V,U,Z,et,st,!0,!1)},collideSpriteVsTilemapLayer:function(V,U,Z,et,st,rt){var at=V.isBody?V:V.body;if(!at.enable||at.checkCollision.none||!this.canCollide(at,U))return!1;var ut=U.layer,vt=at.x-ut.tileWidth*U.scaleX,pt=at.y-ut.tileHeight*U.scaleY,gt=at.width+ut.tileWidth*U.scaleX,yt=at.height+ut.tileHeight*U.scaleY,mt=rt?null:this.tileFilterOptions,Tt=E(vt,pt,gt,yt,mt,U.scene.cameras.main,U.layer);return Tt.length===0?!1:this.collideSpriteVsTilesHandler(V,Tt,Z,et,st,rt,!0)},collideSpriteVsTilesHandler:function(V,U,Z,et,st,rt,at){for(var ut=V.isBody?V:V.body,vt,pt={left:0,right:0,top:0,bottom:0},gt,yt=!1,mt=0;mt<U.length;mt++){vt=U[mt],gt=vt.tilemapLayer;var Tt=gt.tileToWorldXY(vt.x,vt.y);pt.left=Tt.x,pt.top=Tt.y,pt.right=pt.left+vt.width*gt.scaleX,pt.bottom=pt.top+vt.height*gt.scaleY,$(pt,ut)&&(!et||et.call(st,V,vt))&&b(vt,V)&&(rt||D(mt,ut,vt,pt,gt,this.TILE_BIAS,at))&&(this._total++,yt=!0,Z&&Z.call(st,V,vt),rt&&ut.onOverlap?this.emit(f.TILE_OVERLAP,V,vt,ut):ut.onCollide&&this.emit(f.TILE_COLLIDE,V,vt,ut))}return yt},collideGroupVsGroup:function(V,U,Z,et,st,rt){if(!(V.getLength()===0||U.getLength()===0||!this.canCollide(V,U)))for(var at=V.getChildren(),ut=0;ut<at.length;ut++)this.collideSpriteVsGroup(at[ut],U,Z,et,st,rt)},wrap:function(V,U){V.body?this.wrapObject(V,U):V.getChildren?this.wrapArray(V.getChildren(),U):Array.isArray(V)?this.wrapArray(V,U):this.wrapObject(V,U)},wrapArray:function(V,U){for(var Z=0;Z<V.length;Z++)this.wrapObject(V[Z],U)},wrapObject:function(V,U){U===void 0&&(U=0),V.x=Y(V.x,this.bounds.left-U,this.bounds.right+U),V.y=Y(V.y,this.bounds.top-U,this.bounds.bottom+U)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});C.exports=K}),1093:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setAcceleration:function(s,g){return this.body.acceleration.set(s,g),this},setAccelerationX:function(s){return this.body.acceleration.x=s,this},setAccelerationY:function(s){return this.body.acceleration.y=s,this}};C.exports=R}),59023:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setAngularVelocity:function(s){return this.body.angularVelocity=s,this},setAngularAcceleration:function(s){return this.body.angularAcceleration=s,this},setAngularDrag:function(s){return this.body.angularDrag=s,this}};C.exports=R}),62069:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setBounce:function(s,g){return this.body.bounce.set(s,g),this},setBounceX:function(s){return this.body.bounce.x=s,this},setBounceY:function(s){return this.body.bounce.y=s,this},setCollideWorldBounds:function(s,g,y,u){return this.body.setCollideWorldBounds(s,g,y,u),this}};C.exports=R}),78389:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(79599),y={setCollisionCategory:function(u){var l=this.body?this.body:this;return l.collisionCategory=u,this},willCollideWith:function(u){var l=this.body?this.body:this;return(l.collisionMask&u)!==0},addCollidesWith:function(u){var l=this.body?this.body:this;return l.collisionMask=l.collisionMask|u,this},removeCollidesWith:function(u){var l=this.body?this.body:this;return l.collisionMask=l.collisionMask&~u,this},setCollidesWith:function(u){var l=this.body?this.body:this;return l.collisionMask=g(u),this},resetCollisionCategory:function(){var u=this.body?this.body:this;return u.collisionCategory=1,u.collisionMask=2147483647,this}};C.exports=y}),87118:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setDebug:function(s,g,y){return this.debugShowBody=s,this.debugShowVelocity=g,this.debugBodyColor=y,this},setDebugBodyColor:function(s){return this.body.debugBodyColor=s,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(s){this.body.debugShowBody=s}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(s){this.body.debugShowVelocity=s}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(s){this.body.debugBodyColor=s}}};C.exports=R}),52819:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setDrag:function(s,g){return this.body.drag.set(s,g),this},setDragX:function(s){return this.body.drag.x=s,this},setDragY:function(s){return this.body.drag.y=s,this},setDamping:function(s){return this.body.useDamping=s,this}};C.exports=R}),4074:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setDirectControl:function(s){return this.body.setDirectControl(s),this},enableBody:function(s,g,y,u,l){return s&&this.body.reset(g,y),u&&(this.body.gameObject.active=!0),l&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(s,g){return s===void 0&&(s=!1),g===void 0&&(g=!1),this.body.stop(),this.body.enable=!1,s&&(this.body.gameObject.active=!1),g&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};C.exports=R}),40831:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setFriction:function(s,g){return this.body.friction.set(s,g),this},setFrictionX:function(s){return this.body.friction.x=s,this},setFrictionY:function(s){return this.body.friction.y=s,this}};C.exports=R}),26775:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setGravity:function(s,g){return this.body.gravity.set(s,g),this},setGravityX:function(s){return this.body.gravity.x=s,this},setGravityY:function(s){return this.body.gravity.y=s,this}};C.exports=R}),9437:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setImmovable:function(s){return s===void 0&&(s=!0),this.body.immovable=s,this}};C.exports=R}),30621:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setMass:function(s){return this.body.mass=s,this}};C.exports=R}),72441:((C,R,s)=>{var g=s(47956),y=s(96503),u=s(2044),l=s(81491),h=function(r,o,d,a,f,v){var c=g(r,o-a,d-a,2*a,2*a,f,v);if(c.length===0)return c;for(var p=new y(o,d,a),m=new y,T=[],E=0;E<c.length;E++){var P=c[E];P.isCircle?(m.setTo(P.center.x,P.center.y,P.halfWidth),u(p,m)&&T.push(P)):l(p,P)&&T.push(P)}return T};C.exports=h}),47956:(C=>{var R=function(s,g,y,u,l,h,r){h===void 0&&(h=!0),r===void 0&&(r=!1);var o=[],d=[],a=s.treeMinMax;if(a.minX=g,a.minY=y,a.maxX=g+u,a.maxY=y+l,r&&(d=s.staticTree.search(a)),h&&s.useTree)o=s.tree.search(a);else if(h){var f=s.bodies,v={position:{x:g,y},left:g,top:y,right:g+u,bottom:y+l,isCircle:!1},c=s.intersects;f.iterate(function(p){c(p,v)&&o.push(p)})}return d.concat(o)};C.exports=R}),62121:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setPushable:function(s){return s===void 0&&(s=!0),this.body.pushable=s,this}};C.exports=R}),29384:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setOffset:function(s,g){return this.body.setOffset(s,g),this},setSize:function(s,g,y){return this.body.setSize(s,g,y),this},setBodySize:function(s,g,y){return this.body.setSize(s,g,y),this},setCircle:function(s,g,y){return this.body.setCircle(s,g,y),this}};C.exports=R}),15098:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setVelocity:function(s,g){return this.body.setVelocity(s,g),this},setVelocityX:function(s){return this.body.setVelocityX(s),this},setVelocityY:function(s){return this.body.setVelocityY(s),this},setMaxVelocity:function(s,g){return this.body.maxVelocity.set(s,g),this}};C.exports=R}),92209:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Acceleration:s(1093),Angular:s(59023),Bounce:s(62069),Collision:s(78389),Debug:s(87118),Drag:s(52819),Enable:s(4074),Friction:s(40831),Gravity:s(26775),Immovable:s(9437),Mass:s(30621),OverlapCirc:s(72441),OverlapRect:s(47956),Pushable:s(62121),Size:s(29384),Velocity:s(15098)}}),37747:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};C.exports=R}),20009:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="collide"}),36768:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="overlap"}),60473:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pause"}),89954:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resume"}),61804:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="tilecollide"}),7161:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="tileoverlap"}),34689:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="worldbounds"}),16006:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="worldstep"}),63012:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={COLLIDE:s(20009),OVERLAP:s(36768),PAUSE:s(60473),RESUME:s(89954),TILE_COLLIDE:s(61804),TILE_OVERLAP:s(7161),WORLD_BOUNDS:s(34689),WORLD_STEP:s(16006)}}),27064:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37747),y=s(79291),u={ArcadePhysics:s(86689),Body:s(37742),Collider:s(79342),Components:s(92209),Events:s(63012),Factory:s(66022),GetCollidesWith:s(79599),GetOverlapX:s(64897),GetOverlapY:s(45170),SeparateX:s(14087),SeparateY:s(89936),Group:s(60758),Image:s(71289),Sprite:s(13759),StaticBody:s(72624),StaticGroup:s(71464),Tilemap:s(55173),World:s(82248)};u=y(!1,u,g),C.exports=u}),96602:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.collisionCallback?!s.collisionCallback.call(s.collisionCallbackContext,g,s):s.layer.callbacks[s.index]?!s.layer.callbacks[s.index].callback.call(s.layer.callbacks[s.index].callbackContext,g,s):!0};C.exports=R}),36294:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g<0?(s.blocked.none=!1,s.blocked.left=!0):g>0&&(s.blocked.none=!1,s.blocked.right=!0),s.position.x-=g,s.updateCenter(),s.bounce.x===0?s.velocity.x=0:s.velocity.x=-s.velocity.x*s.bounce.x};C.exports=R}),67013:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g<0?(s.blocked.none=!1,s.blocked.up=!0):g>0&&(s.blocked.none=!1,s.blocked.down=!0),s.position.y-=g,s.updateCenter(),s.bounce.y===0?s.velocity.y=0:s.velocity.y=-s.velocity.y*s.bounce.y};C.exports=R}),40012:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(21329),y=s(53442),u=s(2483),l=function(h,r,o,d,a,f,v){var c=d.left,p=d.top,m=d.right,T=d.bottom,E=o.faceLeft||o.faceRight,P=o.faceTop||o.faceBottom;if(v||(E=!0,P=!0),!E&&!P)return!1;var w=0,A=0,b=0,O=1;if(r.deltaAbsX()>r.deltaAbsY()?b=-1:r.deltaAbsX()<r.deltaAbsY()&&(O=-1),r.deltaX()!==0&&r.deltaY()!==0&&E&&P&&(b=Math.min(Math.abs(r.position.x-m),Math.abs(r.right-c)),O=Math.min(Math.abs(r.position.y-T),Math.abs(r.bottom-p))),b<O){if(E&&(w=g(r,o,c,m,f,v),w!==0&&!u(d,r)))return!0;P&&(A=y(r,o,p,T,f,v))}else{if(P&&(A=y(r,o,p,T,f,v),A!==0&&!u(d,r)))return!0;E&&(w=g(r,o,c,m,f,v))}return w!==0||A!==0};C.exports=l}),21329:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36294),y=function(u,l,h,r,o,d){var a=0,f=l.faceLeft,v=l.faceRight,c=l.collideLeft,p=l.collideRight;return d||(f=!0,v=!0,c=!0,p=!0),u.deltaX()<0&&p&&u.checkCollision.left?v&&u.x<r&&(a=u.x-r,a<-o&&(a=0)):u.deltaX()>0&&c&&u.checkCollision.right&&f&&u.right>h&&(a=u.right-h,a>o&&(a=0)),a!==0&&(u.customSeparateX?u.overlapX=a:g(u,a)),a};C.exports=y}),53442:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(67013),y=function(u,l,h,r,o,d){var a=0,f=l.faceTop,v=l.faceBottom,c=l.collideUp,p=l.collideDown;return d||(f=!0,v=!0,c=!0,p=!0),u.deltaY()<0&&p&&u.checkCollision.up?v&&u.y<r&&(a=u.y-r,a<-o&&(a=0)):u.deltaY()>0&&c&&u.checkCollision.down&&f&&u.bottom>h&&(a=u.bottom-h,a>o&&(a=0)),a!==0&&(u.customSeparateY?u.overlapY=a:g(u,a)),a};C.exports=y}),2483:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return!(g.right<=s.left||g.bottom<=s.top||g.position.x>=s.right||g.position.y>=s.bottom)};C.exports=R}),55173:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={ProcessTileCallbacks:s(96602),ProcessTileSeparationX:s(36294),ProcessTileSeparationY:s(67013),SeparateTile:s(40012),TileCheckX:s(21329),TileCheckY:s(53442),TileIntersectsBody:s(2483)};C.exports=g}),44563:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Arcade:s(27064),Matter:s(3875)}}),68174:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(26099),u=new g({initialize:function(){this.boundsCenter=new y,this.centerDiff=new y},parseBody:function(l){if(l=l.hasOwnProperty("body")?l.body:l,!l.hasOwnProperty("bounds")||!l.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,r=this.centerDiff,o=l.bounds.max.x-l.bounds.min.x,d=l.bounds.max.y-l.bounds.min.y,a=o*l.centerOfMass.x,f=d*l.centerOfMass.y;return h.set(o/2,d/2),r.set(a-h.x,f-h.y),!0},getTopLeft:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,d=this.centerDiff;return new y(h+o.x+d.x,r+o.y+d.y)}return!1},getTopCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,d=this.centerDiff;return new y(h+d.x,r+o.y+d.y)}return!1},getTopRight:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,d=this.centerDiff;return new y(h-(o.x-d.x),r+o.y+d.y)}return!1},getLeftCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,d=this.centerDiff;return new y(h+o.x+d.x,r+d.y)}return!1},getCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.centerDiff;return new y(h+o.x,r+o.y)}return!1},getRightCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,d=this.centerDiff;return new y(h-(o.x-d.x),r+d.y)}return!1},getBottomLeft:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,d=this.centerDiff;return new y(h+o.x+d.x,r-(o.y-d.y))}return!1},getBottomCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,d=this.centerDiff;return new y(h+d.x,r-(o.y-d.y))}return!1},getBottomRight:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,d=this.centerDiff;return new y(h-(o.x-d.x),r-(o.y-d.y))}return!1}});C.exports=u}),19933:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(6790);g.Body=s(22562),g.Composite=s(69351),g.World=s(4372),g.Collision=s(52284),g.Detector=s(81388),g.Pairs=s(99561),g.Pair=s(4506),g.Query=s(73296),g.Resolver=s(66272),g.Constraint=s(48140),g.Common=s(53402),g.Engine=s(48413),g.Events=s(35810),g.Sleeping=s(53614),g.Plugin=s(73832),g.Bodies=s(66280),g.Composites=s(74116),g.Axes=s(66615),g.Bounds=s(15647),g.Svg=s(74058),g.Vector=s(31725),g.Vertices=s(41598),g.World.add=g.Composite.add,g.World.remove=g.Composite.remove,g.World.addComposite=g.Composite.addComposite,g.World.addBody=g.Composite.addBody,g.World.addConstraint=g.Composite.addConstraint,g.World.clear=g.Composite.clear,C.exports=g}),28137:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66280),y=s(83419),u=s(74116),l=s(48140),h=s(74058),r=s(75803),o=s(23181),d=s(34803),a=s(73834),f=s(19496),v=s(85791),c=s(98713),p=s(41598),m=new y({initialize:function(E){this.world=E,this.scene=E.scene,this.sys=E.scene.sys},rectangle:function(T,E,P,w,A){var b=g.rectangle(T,E,P,w,A);return this.world.add(b),b},trapezoid:function(T,E,P,w,A,b){var O=g.trapezoid(T,E,P,w,A,b);return this.world.add(O),O},circle:function(T,E,P,w,A){var b=g.circle(T,E,P,w,A);return this.world.add(b),b},polygon:function(T,E,P,w,A){var b=g.polygon(T,E,P,w,A);return this.world.add(b),b},fromVertices:function(T,E,P,w,A,b,O){typeof P=="string"&&(P=p.fromPath(P));var I=g.fromVertices(T,E,P,w,A,b,O);return this.world.add(I),I},fromPhysicsEditor:function(T,E,P,w,A){A===void 0&&(A=!0);var b=f.parseBody(T,E,P,w);return A&&!this.world.has(b)&&this.world.add(b),b},fromSVG:function(T,E,P,w,A,b){w===void 0&&(w=1),A===void 0&&(A={}),b===void 0&&(b=!0);for(var O=P.getElementsByTagName("path"),I=[],D=0;D<O.length;D++){var B=h.pathToVertices(O[D],30);w!==1&&p.scale(B,w,w),I.push(B)}var k=g.fromVertices(T,E,I,A);return b&&this.world.add(k),k},fromJSON:function(T,E,P,w,A){w===void 0&&(w={}),A===void 0&&(A=!0);var b=v.parseBody(T,E,P,w);return b&&A&&this.world.add(b),b},imageStack:function(T,E,P,w,A,b,O,I,D){O===void 0&&(O=0),I===void 0&&(I=0),D===void 0&&(D={});var B=this.world,k=this.sys.displayList;D.addToWorld=!1;var N=u.stack(P,w,A,b,O,I,function(H,$){var J=new o(B,H,$,T,E,D);return k.add(J),J.body});return B.add(N),N},stack:function(T,E,P,w,A,b,O){var I=u.stack(T,E,P,w,A,b,O);return this.world.add(I),I},pyramid:function(T,E,P,w,A,b,O){var I=u.pyramid(T,E,P,w,A,b,O);return this.world.add(I),I},chain:function(T,E,P,w,A,b){return u.chain(T,E,P,w,A,b)},mesh:function(T,E,P,w,A){return u.mesh(T,E,P,w,A)},newtonsCradle:function(T,E,P,w,A){var b=u.newtonsCradle(T,E,P,w,A);return this.world.add(b),b},car:function(T,E,P,w,A){var b=u.car(T,E,P,w,A);return this.world.add(b),b},softBody:function(T,E,P,w,A,b,O,I,D,B){var k=u.softBody(T,E,P,w,A,b,O,I,D,B);return this.world.add(k),k},joint:function(T,E,P,w,A){return this.constraint(T,E,P,w,A)},spring:function(T,E,P,w,A){return this.constraint(T,E,P,w,A)},constraint:function(T,E,P,w,A){w===void 0&&(w=1),A===void 0&&(A={}),A.bodyA=T.type==="body"?T:T.body,A.bodyB=E.type==="body"?E:E.body,isNaN(P)||(A.length=P),A.stiffness=w;var b=l.create(A);return this.world.add(b),b},worldConstraint:function(T,E,P,w){P===void 0&&(P=1),w===void 0&&(w={}),w.bodyB=T.type==="body"?T:T.body,isNaN(E)||(w.length=E),w.stiffness=P;var A=l.create(w);return this.world.add(A),A},mouseSpring:function(T){return this.pointerConstraint(T)},pointerConstraint:function(T){T===void 0&&(T={}),T.hasOwnProperty("render")||(T.render={visible:!1});var E=new c(this.scene,this.world,T);return this.world.add(E.constraint),E},image:function(T,E,P,w,A){var b=new o(this.world,T,E,P,w,A);return this.sys.displayList.add(b),b},tileBody:function(T,E){return new a(this.world,T,E)},sprite:function(T,E,P,w,A){var b=new d(this.world,T,E,P,w,A);return this.sys.displayList.add(b),this.sys.updateList.add(b),b},gameObject:function(T,E,P){return r(this.world,T,E,P)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});C.exports=m}),75803:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(31884),y=s(95540),u=s(26099);function l(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var h=function(r,o,d,a){d===void 0&&(d={}),a===void 0&&(a=!0);var f=o.x,v=o.y;o.body={temp:!0,position:{x:f,y:v}};var c=[g.Bounce,g.Collision,g.Force,g.Friction,g.Gravity,g.Mass,g.Sensor,g.SetBody,g.Sleep,g.Static,g.Transform,g.Velocity];if(c.forEach(function(m){for(var T in m)l(m[T])?Object.defineProperty(o,T,{get:m[T].get,set:m[T].set}):Object.defineProperty(o,T,{value:m[T]})}),o.world=r,o._tempVec2=new u(f,v),d.hasOwnProperty("type")&&d.type==="body")o.setExistingBody(d,a);else{var p=y(d,"shape",null);p||(p="rectangle"),d.addToWorld=a,o.setBody(p,d)}return o};C.exports=h}),23181:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31884),u=s(95643),l=s(95540),h=s(88571),r=s(72699),o=s(26099),d=new g({Extends:h,Mixins:[y.Bounce,y.Collision,y.Force,y.Friction,y.Gravity,y.Mass,y.Sensor,y.SetBody,y.Sleep,y.Static,y.Transform,y.Velocity,r],initialize:function(f,v,c,p,m,T){u.call(this,f.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,m),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new o(v,c);var E=l(T,"shape",null);E?this.setBody(E,T):this.setRectangle(this.width,this.height,T),this.setPosition(v,c),this.initPipeline(),this.initPostPipeline(!0)}});C.exports=d}),42045:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(60461),y=s(66615),u=s(66280),l=s(22562),h=s(68174),r=s(15647),o=s(83419),d=s(52284),a=s(53402),f=s(69351),v=s(74116),c=s(48140),p=s(81388),m=s(20339),T=s(28137),E=s(95540),P=s(35154),w=s(46975),A=s(4506),b=s(99561),O=s(37277),I=s(73296),D=s(66272),B=s(44594),k=s(74058),N=s(31725),H=s(41598),$=s(68243);a.setDecomp(s(55973));var J=new o({initialize:function(Y){this.scene=Y,this.systems=Y.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=l,this.composite=f,this.collision=d,this.detector=p,this.pair=A,this.pairs=b,this.query=I,this.resolver=D,this.constraint=c,this.bodies=u,this.composites=v,this.axes=y,this.bounds=r,this.svg=k,this.vector=N,this.vertices=H,this.verts=H,this._tempVec2=N.create(),D._restingThresh=P(this.config,"restingThresh",4),D._restingThreshTangent=P(this.config,"restingThreshTangent",6),D._positionDampen=P(this.config,"positionDampen",.9),D._positionWarming=P(this.config,"positionWarming",.8),D._frictionNormalMultiplier=P(this.config,"frictionNormalMultiplier",5),Y.sys.events.once(B.BOOT,this.boot,this),Y.sys.events.on(B.START,this.start,this)},boot:function(){this.world=new $(this.scene,this.config),this.add=new T(this.world),this.bodyBounds=new h,this.systems.events.once(B.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new $(this.scene,this.config),this.add=new T(this.world));var q=this.systems.events;q.on(B.UPDATE,this.world.update,this.world),q.on(B.POST_UPDATE,this.world.postUpdate,this.world),q.once(B.SHUTDOWN,this.shutdown,this)},getConfig:function(){var q=this.systems.game.config.physics,Y=this.systems.settings.physics,K=w(E(Y,"matter",{}),E(q,"matter",{}));return K},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(q,Y){this.world.step(q,Y)},containsPoint:function(q,Y,K){q=this.getMatterBodies(q);var V=N.create(Y,K),U=I.point(q,V);return U.length>0},intersectPoint:function(q,Y,K){K=this.getMatterBodies(K);var V=N.create(q,Y),U=[],Z=I.point(K,V);return Z.forEach(function(et){U.indexOf(et)===-1&&U.push(et)}),U},intersectRect:function(q,Y,K,V,U,Z){U===void 0&&(U=!1),Z=this.getMatterBodies(Z);var et={min:{x:q,y:Y},max:{x:q+K,y:Y+V}},st=[],rt=I.region(Z,et,U);return rt.forEach(function(at){st.indexOf(at)===-1&&st.push(at)}),st},intersectRay:function(q,Y,K,V,U,Z){U===void 0&&(U=1),Z=this.getMatterBodies(Z);for(var et=[],st=I.ray(Z,N.create(q,Y),N.create(K,V),U),rt=0;rt<st.length;rt++)et.push(st[rt].body);return et},intersectBody:function(q,Y){Y=this.getMatterBodies(Y);for(var K=[],V=I.collides(q,Y),U=0;U<V.length;U++){var Z=V[U];Z.bodyA===q?K.push(Z.bodyB):K.push(Z.bodyA)}return K},overlap:function(q,Y,K,V,U){K===void 0&&(K=null),V===void 0&&(V=null),U===void 0&&(U=K),Array.isArray(q)||(q=[q]),q=this.getMatterBodies(q),Y=this.getMatterBodies(Y);for(var Z=!1,et=0;et<q.length;et++)for(var st=q[et],rt=I.collides(st,Y),at=0;at<rt.length;at++){var ut=rt[at],vt=ut.bodyA.id===st.id?ut.bodyB:ut.bodyA;if(!V||V.call(U,st,vt,ut)){if(Z=!0,K)K.call(U,st,vt,ut);else if(!V)return!0}}return Z},setCollisionCategory:function(q,Y){return q=this.getMatterBodies(q),q.forEach(function(K){K.collisionFilter.category=Y}),this},setCollisionGroup:function(q,Y){return q=this.getMatterBodies(q),q.forEach(function(K){K.collisionFilter.group=Y}),this},setCollidesWith:function(q,Y){q=this.getMatterBodies(q);var K=0;if(!Array.isArray(Y))K=Y;else for(var V=0;V<Y.length;V++)K|=Y[V];return q.forEach(function(U){U.collisionFilter.mask=K}),this},getMatterBodies:function(q){if(!q)return this.world.getAllBodies();Array.isArray(q)||(q=[q]);for(var Y=[],K=0;K<q.length;K++){var V=q[K].hasOwnProperty("body")?q[K].body:q[K];Y.push(V)}return Y},setVelocity:function(q,Y,K){q=this.getMatterBodies(q);var V=this._tempVec2;return V.x=Y,V.y=K,q.forEach(function(U){l.setVelocity(U,V)}),this},setVelocityX:function(q,Y){q=this.getMatterBodies(q);var K=this._tempVec2;return K.x=Y,q.forEach(function(V){K.y=V.velocity.y,l.setVelocity(V,K)}),this},setVelocityY:function(q,Y){q=this.getMatterBodies(q);var K=this._tempVec2;return K.y=Y,q.forEach(function(V){K.x=V.velocity.x,l.setVelocity(V,K)}),this},setAngularVelocity:function(q,Y){return q=this.getMatterBodies(q),q.forEach(function(K){l.setAngularVelocity(K,Y)}),this},applyForce:function(q,Y){q=this.getMatterBodies(q);var K=this._tempVec2;return q.forEach(function(V){K.x=V.position.x,K.y=V.position.y,l.applyForce(V,K,Y)}),this},applyForceFromPosition:function(q,Y,K,V){q=this.getMatterBodies(q);var U=this._tempVec2;return q.forEach(function(Z){V===void 0&&(V=Z.angle),U.x=K*Math.cos(V),U.y=K*Math.sin(V),l.applyForce(Z,Y,U)}),this},applyForceFromAngle:function(q,Y,K){q=this.getMatterBodies(q);var V=this._tempVec2;return q.forEach(function(U){K===void 0&&(K=U.angle),V.x=Y*Math.cos(K),V.y=Y*Math.sin(K),l.applyForce(U,{x:U.position.x,y:U.position.y},V)}),this},getConstraintLength:function(q){var Y=q.pointA.x,K=q.pointA.y,V=q.pointB.x,U=q.pointB.y;return q.bodyA&&(Y+=q.bodyA.position.x,K+=q.bodyA.position.y),q.bodyB&&(V+=q.bodyB.position.x,U+=q.bodyB.position.y),m(Y,K,V,U)},alignBody:function(q,Y,K,V){q=q.hasOwnProperty("body")?q.body:q;var U;switch(V){case g.TOP_LEFT:case g.LEFT_TOP:U=this.bodyBounds.getTopLeft(q,Y,K);break;case g.TOP_CENTER:U=this.bodyBounds.getTopCenter(q,Y,K);break;case g.TOP_RIGHT:case g.RIGHT_TOP:U=this.bodyBounds.getTopRight(q,Y,K);break;case g.LEFT_CENTER:U=this.bodyBounds.getLeftCenter(q,Y,K);break;case g.CENTER:U=this.bodyBounds.getCenter(q,Y,K);break;case g.RIGHT_CENTER:U=this.bodyBounds.getRightCenter(q,Y,K);break;case g.LEFT_BOTTOM:case g.BOTTOM_LEFT:U=this.bodyBounds.getBottomLeft(q,Y,K);break;case g.BOTTOM_CENTER:U=this.bodyBounds.getBottomCenter(q,Y,K);break;case g.BOTTOM_RIGHT:case g.RIGHT_BOTTOM:U=this.bodyBounds.getBottomRight(q,Y,K);break}return U&&l.setPosition(q,U),this},shutdown:function(){var q=this.systems.events;this.world&&(q.off(B.UPDATE,this.world.update,this.world),q.off(B.POST_UPDATE,this.world.postUpdate,this.world)),q.off(B.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(B.START,this.start,this),this.scene=null,this.systems=null}});O.register("MatterPhysics",J,"matterPhysics"),C.exports=J}),34803:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(9674),y=s(83419),u=s(31884),l=s(95643),h=s(95540),r=s(72699),o=s(68287),d=s(26099),a=new y({Extends:o,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,r],initialize:function(v,c,p,m,T,E){l.call(this,v.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new g(this),this.setTexture(m,T),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new d(c,p);var P=h(E,"shape",null);P?this.setBody(P,E):this.setRectangle(this.width,this.height,E),this.setPosition(c,p),this.initPipeline(),this.initPostPipeline(!0)}});C.exports=a}),73834:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66280),y=s(22562),u=s(83419),l=s(31884),h=s(62644),r=s(50792),o=s(95540),d=s(97022),a=s(41598),f=new u({Extends:r,Mixins:[l.Bounce,l.Collision,l.Friction,l.Gravity,l.Mass,l.Sensor,l.Sleep,l.Static],initialize:function(c,p,m){r.call(this),this.tile=p,this.world=c,p.physics.matterBody&&p.physics.matterBody.destroy(),p.physics.matterBody=this;var T=o(m,"body",null),E=o(m,"addToWorld",!0);if(T)this.setBody(T,E);else{var P=p.getCollisionGroup(),w=o(P,"objects",[]);w.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}if(p.flipX||p.flipY){var A={x:p.getCenterX(),y:p.getCenterY()},b=p.flipX?-1:1,O=p.flipY?-1:1;y.scale(T,b,O,A)}},setFromTileRectangle:function(v){v===void 0&&(v={}),d(v,"isStatic")||(v.isStatic=!0),d(v,"addToWorld")||(v.addToWorld=!0);var c=this.tile.getBounds(),p=c.x+c.width/2,m=c.y+c.height/2,T=g.rectangle(p,m,c.width,c.height,v);return this.setBody(T,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),d(v,"isStatic")||(v.isStatic=!0),d(v,"addToWorld")||(v.addToWorld=!0);for(var c=this.tile.tilemapLayer.scaleX,p=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),T=this.tile.getTop(),E=this.tile.getCollisionGroup(),P=o(E,"objects",[]),w=[],A=0;A<P.length;A++){var b=P[A],O=m+b.x*c,I=T+b.y*p,D=b.width*c,B=b.height*p,k=null;if(b.rectangle)k=g.rectangle(O+D/2,I+B/2,D,B,v);else if(b.ellipse)k=g.circle(O+D/2,I+B/2,D/2,v);else if(b.polygon||b.polyline){var N=b.polygon?b.polygon:b.polyline,H=N.map(function(Y){return{x:Y.x*c,y:Y.y*p}}),$=a.create(H),J=a.centre($);O+=J.x,I+=J.y,k=g.fromVertices(O,I,$,v)}k&&w.push(k)}if(w.length===1)this.setBody(w[0],v.addToWorld);else if(w.length>1){var q=h(v);q.parts=w,this.setBody(y.create(q),q.addToWorld)}return this},setBody:function(v,c){return c===void 0&&(c=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,c&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});C.exports=f}),19496:((C,R,s)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66280),y=s(22562),u=s(53402),l=s(95540),h=s(41598),r={parseBody:function(o,d,a,f){f===void 0&&(f={});for(var v=l(a,"fixtures",[]),c=[],p=0;p<v.length;p++)for(var m=this.parseFixture(v[p]),T=0;T<m.length;T++)c.push(m[T]);var E=u.clone(a,!0);u.extend(E,f,!0),delete E.fixtures,delete E.type;var P=y.create(E);return y.setParts(P,c),y.setPosition(P,{x:o,y:d}),P},parseFixture:function(o){var d=u.extend({},!1,o);delete d.circle,delete d.vertices;var a;if(o.circle){var f=l(o.circle,"x"),v=l(o.circle,"y"),c=l(o.circle,"radius");a=[g.circle(f,v,c,d)]}else o.vertices&&(a=this.parseVertices(o.vertices,d));return a},parseVertices:function(o,d){d===void 0&&(d={});for(var a=[],f=0;f<o.length;f++)h.clockwiseSort(o[f]),a.push(y.create(u.extend({position:h.centre(o[f]),vertices:o[f]},d)));return g.flagCoincidentParts(a)}};C.exports=r}),85791:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66280),y=s(22562),u={parseBody:function(l,h,r,o){o===void 0&&(o={});var d,a=r.vertices;if(a.length===1)o.vertices=a[0],d=y.create(o),g.flagCoincidentParts(d.parts);else{for(var f=[],v=0;v<a.length;v++){var c=y.create({vertices:a[v]});f.push(c)}g.flagCoincidentParts(f),o.parts=f,d=y.create(o)}return d.label=r.label,y.setPosition(d,{x:l,y:h}),d}};C.exports=u}),98713:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(15647),y=s(83419),u=s(69351),l=s(48140),h=s(81388),r=s(1121),o=s(8214),d=s(46975),a=s(53614),f=s(26099),v=s(41598),c=new y({initialize:function(m,T,E){E===void 0&&(E={});var P={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=m,this.world=T,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=l.create(d(E,P)),this.world.on(r.BEFORE_UPDATE,this.update,this),m.sys.input.on(o.POINTER_DOWN,this.onDown,this),m.sys.input.on(o.POINTER_UP,this.onUp,this)},onDown:function(p){this.pointer||(this.pointer=p,this.camera=p.camera)},onUp:function(p){p===this.pointer&&(this.pointer=null)},getBody:function(p){var m=this.position,T=this.constraint;this.camera.getWorldPoint(p.x,p.y,m);for(var E=u.allBodies(this.world.localWorld),P=0;P<E.length;P++){var w=E[P];if(!w.ignorePointer&&g.contains(w.bounds,m)&&h.canCollide(w.collisionFilter,T.collisionFilter)&&this.hitTestBody(w,m))return this.world.emit(r.DRAG_START,w,this.part,this),!0}return!1},hitTestBody:function(p,m){for(var T=this.constraint,E=p.parts.length,P=E>1?1:0,w=P;w<E;w++){var A=p.parts[w];if(v.contains(A.vertices,m))return T.pointA=m,T.pointB={x:m.x-p.position.x,y:m.y-p.position.y},T.bodyB=p,T.angleB=p.angle,a.set(p,!1),this.part=A,this.body=p,!0}return!1},update:function(){var p=this.pointer,m=this.body;if(!this.active||!p){m&&this.stopDrag();return}if(!p.isDown&&m){this.stopDrag();return}else if(p.isDown){if(!this.camera||!m&&!this.getBody(p))return;m=this.body;var T=this.position,E=this.constraint;this.camera.getWorldPoint(p.x,p.y,T),E.pointA.x=T.x,E.pointA.y=T.y,a.set(m,!1),this.world.emit(r.DRAG,m,this)}},stopDrag:function(){var p=this.body,m=this.constraint;m.bodyB=null,m.pointB=null,this.pointer=null,this.body=null,this.part=null,p&&this.world.emit(r.DRAG_END,p,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(o.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(o.POINTER_UP,this.onUp,this)}});C.exports=c}),68243:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66280),y=s(22562),u=s(83419),l=s(53402),h=s(69351),r=s(48413),o=s(50792),d=s(1121),a=s(95540),f=s(35154),v=s(22562),c=s(35810),p=s(73834),m=s(4372),T=s(13037),E=s(31725),P=new u({Extends:o,initialize:function(A,b){o.call(this),this.scene=A,this.engine=r.create(b),this.localWorld=this.engine.world;var O=f(b,"gravity",null);O?this.setGravity(O.x,O.y,O.scale):O===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=f(b,"enabled",!0),this.getDelta=f(b,"getDelta",this.update60Hz);var I=a(b,"runner",{}),D=a(I,"fps",!1),B=a(I,"fps",60),k=a(I,"delta",1e3/B),N=a(I,"deltaMin",1e3/B),H=a(I,"deltaMax",1e3/(B*.5));D||(B=1e3/k),this.runner={fps:B,deltaSampleSize:a(I,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,timeBuffer:0,isFixed:a(I,"isFixed",!1),delta:k,deltaMin:N,deltaMax:H},this.autoUpdate=f(b,"autoUpdate",!0);var $=f(b,"debug",!1);if(this.drawDebug=typeof $=="object"?!0:$,this.debugGraphic,this.debugConfig={showAxes:a($,"showAxes",!1),showAngleIndicator:a($,"showAngleIndicator",!1),angleColor:a($,"angleColor",15208787),showBroadphase:a($,"showBroadphase",!1),broadphaseColor:a($,"broadphaseColor",16757760),showBounds:a($,"showBounds",!1),boundsColor:a($,"boundsColor",16777215),showVelocity:a($,"showVelocity",!1),velocityColor:a($,"velocityColor",44783),showCollisions:a($,"showCollisions",!1),collisionColor:a($,"collisionColor",16094476),showSeparations:a($,"showSeparations",!1),separationColor:a($,"separationColor",16753920),showBody:a($,"showBody",!0),showStaticBody:a($,"showStaticBody",!0),showInternalEdges:a($,"showInternalEdges",!1),renderFill:a($,"renderFill",!1),renderLine:a($,"renderLine",!0),fillColor:a($,"fillColor",1075465),fillOpacity:a($,"fillOpacity",1),lineColor:a($,"lineColor",2678297),lineOpacity:a($,"lineOpacity",1),lineThickness:a($,"lineThickness",1),staticFillColor:a($,"staticFillColor",857979),staticLineColor:a($,"staticLineColor",1255396),showSleeping:a($,"showSleeping",!1),staticBodySleepOpacity:a($,"staticBodySleepOpacity",.7),sleepFillColor:a($,"sleepFillColor",4605510),sleepLineColor:a($,"sleepLineColor",10066585),showSensors:a($,"showSensors",!0),sensorFillColor:a($,"sensorFillColor",857979),sensorLineColor:a($,"sensorLineColor",1255396),showPositions:a($,"showPositions",!0),positionSize:a($,"positionSize",4),positionColor:a($,"positionColor",14697178),showJoint:a($,"showJoint",!0),jointColor:a($,"jointColor",14737474),jointLineOpacity:a($,"jointLineOpacity",1),jointLineThickness:a($,"jointLineThickness",2),pinSize:a($,"pinSize",4),pinColor:a($,"pinColor",4382944),springColor:a($,"springColor",14697184),anchorColor:a($,"anchorColor",15724527),anchorSize:a($,"anchorSize",4),showConvexHulls:a($,"showConvexHulls",!1),hullColor:a($,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),a(b,"setBounds",!1)){var J=b.setBounds;if(typeof J=="boolean")this.setBounds();else{var q=a(J,"x",0),Y=a(J,"y",0),K=a(J,"width",A.sys.scale.width),V=a(J,"height",A.sys.scale.height),U=a(J,"thickness",64),Z=a(J,"left",!0),et=a(J,"right",!0),st=a(J,"top",!0),rt=a(J,"bottom",!0);this.setBounds(q,Y,K,V,U,Z,et,st,rt)}}},setCompositeRenderStyle:function(w){var A=w.bodies,b=w.constraints,O=w.composites,I,D,B;for(I=0;I<A.length;I++)D=A[I],B=D.render,this.setBodyRenderStyle(D,B.lineColor,B.lineOpacity,B.lineThickness,B.fillColor,B.fillOpacity);for(I=0;I<b.length;I++)D=b[I],B=D.render,this.setConstraintRenderStyle(D,B.lineColor,B.lineOpacity,B.lineThickness,B.pinSize,B.anchorColor,B.anchorSize);for(I=0;I<O.length;I++)D=O[I],this.setCompositeRenderStyle(D);return this},setBodyRenderStyle:function(w,A,b,O,I,D){var B=w.render,k=this.debugConfig;return B?(A==null&&(A=w.isStatic?k.staticLineColor:k.lineColor),b==null&&(b=k.lineOpacity),O==null&&(O=k.lineThickness),I==null&&(I=w.isStatic?k.staticFillColor:k.fillColor),D==null&&(D=k.fillOpacity),A!==!1&&(B.lineColor=A),b!==!1&&(B.lineOpacity=b),O!==!1&&(B.lineThickness=O),I!==!1&&(B.fillColor=I),D!==!1&&(B.fillOpacity=D),this):this},setConstraintRenderStyle:function(w,A,b,O,I,D,B){var k=w.render,N=this.debugConfig;if(!k)return this;if(A==null){var H=k.type;H==="line"?A=N.jointColor:H==="pin"?A=N.pinColor:H==="spring"&&(A=N.springColor)}return b==null&&(b=N.jointLineOpacity),O==null&&(O=N.jointLineThickness),I==null&&(I=N.pinSize),D==null&&(D=N.anchorColor),B==null&&(B=N.anchorSize),A!==!1&&(k.lineColor=A),b!==!1&&(k.lineOpacity=b),O!==!1&&(k.lineThickness=O),I!==!1&&(k.pinSize=I),D!==!1&&(k.anchorColor=D),B!==!1&&(k.anchorSize=B),this},setEventsProxy:function(){var w=this,A=this.engine,b=this.localWorld;this.drawDebug&&(c.on(b,"compositeModified",function(O){w.setCompositeRenderStyle(O)}),c.on(b,"beforeAdd",function(O){for(var I=[].concat(O.object),D=0;D<I.length;D++){var B=I[D],k=B.render;B.type==="body"?w.setBodyRenderStyle(B,k.lineColor,k.lineOpacity,k.lineThickness,k.fillColor,k.fillOpacity):B.type==="composite"?w.setCompositeRenderStyle(B):B.type==="constraint"&&w.setConstraintRenderStyle(B,k.lineColor,k.lineOpacity,k.lineThickness,k.pinSize,k.anchorColor,k.anchorSize)}})),c.on(b,"beforeAdd",function(O){w.emit(d.BEFORE_ADD,O)}),c.on(b,"afterAdd",function(O){w.emit(d.AFTER_ADD,O)}),c.on(b,"beforeRemove",function(O){w.emit(d.BEFORE_REMOVE,O)}),c.on(b,"afterRemove",function(O){w.emit(d.AFTER_REMOVE,O)}),c.on(A,"beforeUpdate",function(O){w.emit(d.BEFORE_UPDATE,O)}),c.on(A,"afterUpdate",function(O){w.emit(d.AFTER_UPDATE,O)}),c.on(A,"collisionStart",function(O){var I=O.pairs,D,B;I.length>0&&I.map(function(k){D=k.bodyA,B=k.bodyB,D.gameObject&&D.gameObject.emit("collide",D,B,k),B.gameObject&&B.gameObject.emit("collide",B,D,k),c.trigger(D,"onCollide",{pair:k}),c.trigger(B,"onCollide",{pair:k}),D.onCollideCallback&&D.onCollideCallback(k),B.onCollideCallback&&B.onCollideCallback(k),D.onCollideWith[B.id]&&D.onCollideWith[B.id](B,k),B.onCollideWith[D.id]&&B.onCollideWith[D.id](D,k)}),w.emit(d.COLLISION_START,O,D,B)}),c.on(A,"collisionActive",function(O){var I=O.pairs,D,B;I.length>0&&I.map(function(k){D=k.bodyA,B=k.bodyB,D.gameObject&&D.gameObject.emit("collideActive",D,B,k),B.gameObject&&B.gameObject.emit("collideActive",B,D,k),c.trigger(D,"onCollideActive",{pair:k}),c.trigger(B,"onCollideActive",{pair:k}),D.onCollideActiveCallback&&D.onCollideActiveCallback(k),B.onCollideActiveCallback&&B.onCollideActiveCallback(k)}),w.emit(d.COLLISION_ACTIVE,O,D,B)}),c.on(A,"collisionEnd",function(O){var I=O.pairs,D,B;I.length>0&&I.map(function(k){D=k.bodyA,B=k.bodyB,D.gameObject&&D.gameObject.emit("collideEnd",D,B,k),B.gameObject&&B.gameObject.emit("collideEnd",B,D,k),c.trigger(D,"onCollideEnd",{pair:k}),c.trigger(B,"onCollideEnd",{pair:k}),D.onCollideEndCallback&&D.onCollideEndCallback(k),B.onCollideEndCallback&&B.onCollideEndCallback(k)}),w.emit(d.COLLISION_END,O,D,B)})},setBounds:function(w,A,b,O,I,D,B,k,N){return w===void 0&&(w=0),A===void 0&&(A=0),b===void 0&&(b=this.scene.sys.scale.width),O===void 0&&(O=this.scene.sys.scale.height),I===void 0&&(I=64),D===void 0&&(D=!0),B===void 0&&(B=!0),k===void 0&&(k=!0),N===void 0&&(N=!0),this.updateWall(D,"left",w-I,A-I,I,O+I*2),this.updateWall(B,"right",w+b,A-I,I,O+I*2),this.updateWall(k,"top",w,A-I,b,I),this.updateWall(N,"bottom",w,A+O,b,I),this},updateWall:function(w,A,b,O,I,D){var B=this.walls[A];w?(B&&m.remove(this.localWorld,B),b+=I/2,O+=D/2,this.walls[A]=this.create(b,O,I,D,{isStatic:!0,friction:0,frictionStatic:0})):(B&&m.remove(this.localWorld,B),this.walls[A]=null)},createDebugGraphic:function(){var w=this.scene.sys.add.graphics({x:0,y:0});return w.setDepth(Number.MAX_VALUE),this.debugGraphic=w,this.drawDebug=!0,w},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(w,A,b){return w===void 0&&(w=0),A===void 0&&(A=1),b===void 0&&(b=.001),this.localWorld.gravity.x=w,this.localWorld.gravity.y=A,this.localWorld.gravity.scale=b,this},create:function(w,A,b,O,I){var D=g.rectangle(w,A,b,O,I);return m.add(this.localWorld,D),D},add:function(w){return m.add(this.localWorld,w),this},remove:function(w,A){Array.isArray(w)||(w=[w]);for(var b=0;b<w.length;b++){var O=w[b],I=O.body?O.body:O;h.remove(this.localWorld,I,A)}return this},removeConstraint:function(w,A){return h.remove(this.localWorld,w,A),this},convertTilemapLayer:function(w,A){var b=w.layer,O=w.getTilesWithin(0,0,b.width,b.height,{isColliding:!0});return this.convertTiles(O,A),this},convertTiles:function(w,A){if(w.length===0)return this;for(var b=0;b<w.length;b++)new p(this,w[b],A);return this},nextGroup:function(w){return v.nextGroup(w)},nextCategory:function(){return v.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=l.now(),this.emit(d.RESUME),this},update:function(w){if(!(!this.enabled||!this.autoUpdate)){var A=this.engine,b=this.runner,O=l.now(),I=b.delta,D=0,B=w-b.timeLastTick;if((!B||!b.timeLastTick||B>Math.max(T._maxFrameDelta,b.maxFrameTime))&&(B=b.frameDelta||T._frameDeltaFallback),b.frameDeltaSmoothing){b.frameDeltaHistory.push(B),b.frameDeltaHistory=b.frameDeltaHistory.slice(-b.frameDeltaHistorySize);var k=b.frameDeltaHistory.slice(0).sort(),N=b.frameDeltaHistory.slice(k.length*T._smoothingLowerBound,k.length*T._smoothingUpperBound),H=T._mean(N);B=H||B}b.frameDeltaSnapping&&(B=1e3/Math.round(1e3/B)),b.frameDelta=B,b.timeLastTick=w,b.timeBuffer+=b.frameDelta,b.timeBuffer=l.clamp(b.timeBuffer,0,b.frameDelta+I*T._timeBufferMargin),b.lastUpdatesDeferred=0;for(var $=b.maxUpdates||Math.ceil(b.maxFrameTime/I),J=l.now();I>0&&b.timeBuffer>=I*T._timeBufferMargin;){r.update(A,I),b.timeBuffer-=I,D+=1;var q=l.now()-O,Y=l.now()-J,K=q+T._elapsedNextEstimate*Y/D;if(D>=$||K>b.maxFrameTime){b.lastUpdatesDeferred=Math.round(Math.max(0,b.timeBuffer/I-T._timeBufferMargin));break}}}},step:function(w){r.update(this.engine,w)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(w){var A=w.hasOwnProperty("body")?w.body:w;return h.get(this.localWorld,A.id,A.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var w=this.debugConfig,A=this.engine,b=this.debugGraphic,O=h.allBodies(this.localWorld);this.debugGraphic.clear(),w.showBroadphase&&A.broadphase.controller&&this.renderGrid(A.broadphase,b,w.broadphaseColor,.5),w.showBounds&&this.renderBodyBounds(O,b,w.boundsColor,.5),(w.showBody||w.showStaticBody)&&this.renderBodies(O),w.showJoint&&this.renderJoints(),(w.showAxes||w.showAngleIndicator)&&this.renderBodyAxes(O,b,w.showAxes,w.angleColor,.5),w.showVelocity&&this.renderBodyVelocity(O,b,w.velocityColor,1,2),w.showSeparations&&this.renderSeparations(A.pairs.list,b,w.separationColor),w.showCollisions&&this.renderCollisions(A.pairs.list,b,w.collisionColor)}},renderGrid:function(w,A,b,O){A.lineStyle(1,b,O);for(var I=l.keys(w.buckets),D=0;D<I.length;D++){var B=I[D];if(!(w.buckets[B].length<2)){var k=B.split(/C|R/);A.strokeRect(parseInt(k[1],10)*w.bucketWidth,parseInt(k[2],10)*w.bucketHeight,w.bucketWidth,w.bucketHeight)}}return this},renderSeparations:function(w,A,b){A.lineStyle(1,b,1);for(var O=0;O<w.length;O++){var I=w[O];if(I.isActive){var D=I.collision,B=D.bodyA,k=D.bodyB,N=B.position,H=k.position,$=D.penetration,J=!B.isStatic&&!k.isStatic?4:1;k.isStatic&&(J=0),A.lineBetween(H.x,H.y,H.x-$.x*J,H.y-$.y*J),J=!B.isStatic&&!k.isStatic?4:1,B.isStatic&&(J=0),A.lineBetween(N.x,N.y,N.x-$.x*J,N.y-$.y*J)}}return this},renderCollisions:function(w,A,b){A.lineStyle(1,b,.5),A.fillStyle(b,1);var O,I;for(O=0;O<w.length;O++)if(I=w[O],!!I.isActive)for(var D=0;D<I.contactCount;D++){var B=I.contacts[D],k=B.vertex;k&&A.fillRect(k.x-2,k.y-2,5,5)}for(O=0;O<w.length;O++)if(I=w[O],!!I.isActive){var N=I.collision,H=I.contacts;if(I.contactCount>0){var $=H[0].vertex.x,J=H[0].vertex.y;I.contactCount===2&&($=(H[0].vertex.x+H[1].vertex.x)/2,J=(H[0].vertex.y+H[1].vertex.y)/2),N.bodyB===N.supports[0].body||N.bodyA.isStatic?A.lineBetween($-N.normal.x*8,J-N.normal.y*8,$,J):A.lineBetween($+N.normal.x*8,J+N.normal.y*8,$,J)}}return this},renderBodyBounds:function(w,A,b,O){A.lineStyle(1,b,O);for(var I=0;I<w.length;I++){var D=w[I];if(D.render.visible){var B=D.bounds;if(B)A.strokeRect(B.min.x,B.min.y,B.max.x-B.min.x,B.max.y-B.min.y);else for(var k=D.parts,N=k.length>1?1:0;N<k.length;N++){var H=k[N];A.strokeRect(H.bounds.min.x,H.bounds.min.y,H.bounds.max.x-H.bounds.min.x,H.bounds.max.y-H.bounds.min.y)}}}return this},renderBodyAxes:function(w,A,b,O,I){A.lineStyle(1,O,I);for(var D=0;D<w.length;D++){var B=w[D],k=B.parts;if(B.render.visible){var N,H,$;if(b)for(H=k.length>1?1:0;H<k.length;H++)for(N=k[H],$=0;$<N.axes.length;$++){var J=N.axes[$];A.lineBetween(N.position.x,N.position.y,N.position.x+J.x*20,N.position.y+J.y*20)}else for(H=k.length>1?1:0;H<k.length;H++)for(N=k[H],$=0;$<N.axes.length;$++)A.lineBetween(N.position.x,N.position.y,(N.vertices[0].x+N.vertices[N.vertices.length-1].x)/2,(N.vertices[0].y+N.vertices[N.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(w,A,b,O,I){A.lineStyle(I,b,O);for(var D=0;D<w.length;D++){var B=w[D];B.render.visible&&A.lineBetween(B.position.x,B.position.y,B.position.x+(B.position.x-B.positionPrev.x)*2,B.position.y+(B.position.y-B.positionPrev.y)*2)}return this},renderBodies:function(w){for(var A=this.debugGraphic,b=this.debugConfig,O=b.showBody,I=b.showStaticBody,D=b.showSleeping,B=b.showInternalEdges,k=b.showConvexHulls,N=b.renderFill,H=b.renderLine,$=b.staticBodySleepOpacity,J=b.sleepFillColor,q=b.sleepLineColor,Y=b.hullColor,K=0;K<w.length;K++){var V=w[K];if(V.render.visible&&!(!I&&V.isStatic||!O&&!V.isStatic)){var U=V.render.lineColor,Z=V.render.lineOpacity,et=V.render.lineThickness,st=V.render.fillColor,rt=V.render.fillOpacity;D&&V.isSleeping&&(V.isStatic?(Z*=$,rt*=$):(U=q,st=J)),N||(st=null),H||(U=null),this.renderBody(V,A,B,U,Z,et,st,rt);var at=V.parts.length;k&&at>1&&this.renderConvexHull(V,A,Y,et)}}},renderBody:function(w,A,b,O,I,D,B,k){O===void 0&&(O=null),I===void 0&&(I=null),D===void 0&&(D=1),B===void 0&&(B=null),k===void 0&&(k=null);for(var N=this.debugConfig,H=N.sensorFillColor,$=N.sensorLineColor,J=w.parts,q=J.length,Y=q>1?1:0;Y<q;Y++){var K=J[Y],V=K.render,U=V.opacity;if(!(!V.visible||U===0||K.isSensor&&!N.showSensors)){var Z=K.circleRadius;if(A.beginPath(),K.isSensor?(B!==null&&A.fillStyle(H,k*U),O!==null&&A.lineStyle(D,$,I*U)):(B!==null&&A.fillStyle(B,k*U),O!==null&&A.lineStyle(D,O,I*U)),Z)A.arc(K.position.x,K.position.y,Z,0,2*Math.PI);else{var et=K.vertices,st=et.length;A.moveTo(et[0].x,et[0].y);for(var rt=1;rt<st;rt++){var at=et[rt];if(!et[rt-1].isInternal||b?A.lineTo(at.x,at.y):A.moveTo(at.x,at.y),rt<st&&at.isInternal&&!b){var ut=(rt+1)%st;A.moveTo(et[ut].x,et[ut].y)}}A.closePath()}B!==null&&A.fillPath(),O!==null&&A.strokePath()}}if(N.showPositions&&!w.isStatic){var vt=w.position.x,pt=w.position.y,gt=Math.ceil(N.positionSize/2);A.fillStyle(N.positionColor,1),A.fillRect(vt-gt,pt-gt,N.positionSize,N.positionSize)}return this},renderConvexHull:function(w,A,b,O){O===void 0&&(O=1);var I=w.parts,D=I.length;if(D>1){var B=w.vertices;A.lineStyle(O,b),A.beginPath(),A.moveTo(B[0].x,B[0].y);for(var k=1;k<B.length;k++)A.lineTo(B[k].x,B[k].y);A.lineTo(B[0].x,B[0].y),A.strokePath()}return this},renderJoints:function(){for(var w=this.debugGraphic,A=h.allConstraints(this.localWorld),b=0;b<A.length;b++){var O=A[b].render,I=O.lineColor,D=O.lineOpacity,B=O.lineThickness,k=O.pinSize,N=O.anchorColor,H=O.anchorSize;this.renderConstraint(A[b],w,I,D,B,k,N,H)}},renderConstraint:function(w,A,b,O,I,D,B,k){var N=w.render;if(!N.visible||!w.pointA||!w.pointB)return this;A.lineStyle(I,b,O);var H=w.bodyA,$=w.bodyB,J,q;if(H?J=E.add(H.position,w.pointA):J=w.pointA,N.type==="pin")A.strokeCircle(J.x,J.y,D);else{if($?q=E.add($.position,w.pointB):q=w.pointB,A.beginPath(),A.moveTo(J.x,J.y),N.type==="spring")for(var Y=E.sub(q,J),K=E.perp(E.normalise(Y)),V=Math.ceil(l.clamp(w.length/5,12,20)),U,Z=1;Z<V;Z+=1)U=Z%2===0?1:-1,A.lineTo(J.x+Y.x*(Z/V)+K.x*U*4,J.y+Y.y*(Z/V)+K.y*U*4);A.lineTo(q.x,q.y)}return A.strokePath(),N.anchors&&k>0&&(A.fillStyle(B),A.fillCircle(J.x,J.y,k),A.fillCircle(q.x,q.y,k)),this},resetCollisionIDs:function(){return y._nextCollidingGroupId=1,y._nextNonCollidingGroupId=-1,y._nextCategory=1,this},shutdown:function(){c.off(this.engine),this.removeAllListeners(),m.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});C.exports=P}),70410:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setBounce:function(s){return this.body.restitution=s,this}};C.exports=R}),66968:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setCollisionCategory:function(s){return this.body.collisionFilter.category=s,this},setCollisionGroup:function(s){return this.body.collisionFilter.group=s,this},setCollidesWith:function(s){var g=0;if(!Array.isArray(s))g=s;else for(var y=0;y<s.length;y++)g|=s[y];return this.body.collisionFilter.mask=g,this},setOnCollide:function(s){return this.body.onCollideCallback=s,this},setOnCollideEnd:function(s){return this.body.onCollideEndCallback=s,this},setOnCollideActive:function(s){return this.body.onCollideActiveCallback=s,this},setOnCollideWith:function(s,g){Array.isArray(s)||(s=[s]);for(var y=0;y<s.length;y++){var u=s[y].hasOwnProperty("body")?s[y].body:s[y];this.body.setOnCollideWith(u,g)}return this}};C.exports=R}),51607:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(22562),y={applyForce:function(u){return this._tempVec2.set(this.body.position.x,this.body.position.y),g.applyForce(this.body,this._tempVec2,u),this},applyForceFrom:function(u,l){return g.applyForce(this.body,u,l),this},thrust:function(u){var l=this.body.angle;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),g.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(u){var l=this.body.angle-Math.PI/2;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),g.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(u){var l=this.body.angle+Math.PI/2;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),g.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(u){var l=this.body.angle-Math.PI;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),g.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};C.exports=y}),5436:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setFriction:function(s,g,y){return this.body.friction=s,g!==void 0&&(this.body.frictionAir=g),y!==void 0&&(this.body.frictionStatic=y),this},setFrictionAir:function(s){return this.body.frictionAir=s,this},setFrictionStatic:function(s){return this.body.frictionStatic=s,this}};C.exports=R}),39858:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setIgnoreGravity:function(s){return this.body.ignoreGravity=s,this}};C.exports=R}),37302:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(22562),y=s(26099),u={setMass:function(l){return g.setMass(this.body,l),this},setDensity:function(l){return g.setDensity(this.body,l),this},centerOfMass:{get:function(){return new y(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};C.exports=u}),39132:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};C.exports=R}),57772:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(66280),y=s(22562),u=s(43855),l=s(95540),h=s(19496),r=s(85791),o=s(41598),d={setRectangle:function(a,f,v){return this.setBody({type:"rectangle",width:a,height:f},v)},setCircle:function(a,f){return this.setBody({type:"circle",radius:a},f)},setPolygon:function(a,f,v){return this.setBody({type:"polygon",sides:f,radius:a},v)},setTrapezoid:function(a,f,v,c){return this.setBody({type:"trapezoid",width:a,height:f,slope:v},c)},setExistingBody:function(a,f){f===void 0&&(f=!0),this.body&&this.world.remove(this.body,!0),this.body=a;for(var v=0;v<a.parts.length;v++)a.parts[v].gameObject=this;var c=this;if(a.destroy=function(){c.world.remove(c.body,!0),c.body.gameObject=null},f&&(this.world.has(a)&&this.world.remove(a,!0),this.world.add(a)),this._originComponent){var p=a.render.sprite.xOffset,m=a.render.sprite.yOffset,T=a.centerOfMass.x,E=a.centerOfMass.y;if(u(T,.5)&&u(E,.5))this.setOrigin(p+.5,m+.5);else{var P=a.centerOffset.x,w=a.centerOffset.y;this.setOrigin(p+P/this.displayWidth,m+w/this.displayHeight)}}return this},setBody:function(a,f){if(!a)return this;var v;typeof a=="string"&&(a={type:a});var c=l(a,"type","rectangle"),p=l(a,"x",this._tempVec2.x),m=l(a,"y",this._tempVec2.y),T=l(a,"width",this.width),E=l(a,"height",this.height);switch(c){case"rectangle":v=g.rectangle(p,m,T,E,f);break;case"circle":var P=l(a,"radius",Math.max(T,E)/2),w=l(a,"maxSides",25);v=g.circle(p,m,P,f,w);break;case"trapezoid":var A=l(a,"slope",.5);v=g.trapezoid(p,m,T,E,A,f);break;case"polygon":var b=l(a,"sides",5),O=l(a,"radius",Math.max(T,E)/2);v=g.polygon(p,m,b,O,f);break;case"fromVertices":case"fromVerts":var I=l(a,"verts",null);if(I)if(typeof I=="string"&&(I=o.fromPath(I)),this.body&&!this.body.hasOwnProperty("temp"))y.setVertices(this.body,I),v=this.body;else{var D=l(a,"flagInternal",!1),B=l(a,"removeCollinear",.01),k=l(a,"minimumArea",10);v=g.fromVertices(p,m,I,f,D,B,k)}break;case"fromPhysicsEditor":v=h.parseBody(p,m,a,f);break;case"fromPhysicsTracer":v=r.parseBody(p,m,a,f);break}return v&&this.setExistingBody(v,a.addToWorld),this}};C.exports=d}),38083:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(1121),y=s(53614),u=s(35810),l={setToSleep:function(){return y.set(this.body,!0),this},setAwake:function(){return y.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,r){return this.setSleepStartEvent(h),this.setSleepEndEvent(r),this},setSleepStartEvent:function(h){if(h){var r=this.world;u.on(this.body,"sleepStart",function(o){r.emit(g.SLEEP_START,o,this)})}else u.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var r=this.world;u.on(this.body,"sleepEnd",function(o){r.emit(g.SLEEP_END,o,this)})}else u.off(this.body,"sleepEnd");return this}};C.exports=l}),90556:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(22562),y={setStatic:function(u){return g.setStatic(this.body,u),this},isStatic:function(){return this.body.isStatic}};C.exports=y}),85436:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(22562),y=s(36383),u=s(86554),l=s(30954),h=4,r={x:{get:function(){return this.body.position.x},set:function(o){this._tempVec2.set(o,this.y),g.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(o){this._tempVec2.set(this.x,o),g.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(o){var d=1/this._scaleX,a=1/this._scaleY;this._scaleX=o,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,g.scale(this.body,d,a),g.scale(this.body,o,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(o){var d=1/this._scaleX,a=1/this._scaleY;this._scaleY=o,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,g.scale(this.body,d,a),g.scale(this.body,this._scaleX,o)}},angle:{get:function(){return l(this.body.angle*y.RAD_TO_DEG)},set:function(o){this.rotation=l(o)*y.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(o){this._rotation=u(o),g.setAngle(this.body,this._rotation)}},setPosition:function(o,d){return o===void 0&&(o=0),d===void 0&&(d=o),this._tempVec2.set(o,d),g.setPosition(this.body,this._tempVec2),this},setRotation:function(o){return o===void 0&&(o=0),this._rotation=u(o),g.setAngle(this.body,o),this},setFixedRotation:function(){return g.setInertia(this.body,1/0),this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,g.setAngle(this.body,this.rotation),this},setScale:function(o,d,a){o===void 0&&(o=1),d===void 0&&(d=o);var f=1/this._scaleX,v=1/this._scaleY;return this._scaleX=o,this._scaleY=d,g.scale(this.body,f,v,a),g.scale(this.body,o,d,a),this}};C.exports=r}),42081:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(22562),y={setVelocityX:function(u){return this._tempVec2.set(u,this.body.velocity.y),g.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(u){return this._tempVec2.set(this.body.velocity.x,u),g.setVelocity(this.body,this._tempVec2),this},setVelocity:function(u,l){return this._tempVec2.set(u,l),g.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return g.getVelocity(this.body)},setAngularVelocity:function(u){return g.setAngularVelocity(this.body,u),this},getAngularVelocity:function(){return g.getAngularVelocity(this.body)},setAngularSpeed:function(u){return g.setAngularSpeed(this.body,u),this},getAngularSpeed:function(){return g.getAngularSpeed(this.body)}};C.exports=y}),31884:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Bounce:s(70410),Collision:s(66968),Force:s(51607),Friction:s(5436),Gravity:s(39858),Mass:s(37302),Sensor:s(39132),SetBody:s(57772),Sleep:s(38083),Static:s(90556),Transform:s(85436),Velocity:s(42081)}}),85608:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="afteradd"}),1213:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="afterremove"}),25968:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="afterupdate"}),67205:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="beforeadd"}),39438:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="beforeremove"}),44823:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="beforeupdate"}),92593:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="collisionactive"}),60128:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="collisionend"}),76861:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="collisionstart"}),92362:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragend"}),76408:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="drag"}),93971:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="dragstart"}),5656:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pause"}),47861:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resume"}),79099:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="sleepend"}),35906:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="sleepstart"}),1121:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={AFTER_ADD:s(85608),AFTER_REMOVE:s(1213),AFTER_UPDATE:s(25968),BEFORE_ADD:s(67205),BEFORE_REMOVE:s(39438),BEFORE_UPDATE:s(44823),COLLISION_ACTIVE:s(92593),COLLISION_END:s(60128),COLLISION_START:s(76861),DRAG_END:s(92362),DRAG:s(76408),DRAG_START:s(93971),PAUSE:s(5656),RESUME:s(47861),SLEEP_END:s(79099),SLEEP_START:s(35906)}}),3875:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BodyBounds:s(68174),Components:s(31884),Events:s(1121),Factory:s(28137),MatterGameObject:s(75803),Image:s(23181),Matter:s(19933),MatterPhysics:s(42045),PolyDecomp:s(55973),Sprite:s(34803),TileBody:s(73834),PhysicsEditorParser:s(19496),PhysicsJSONParser:s(85791),PointerConstraint:s(98713),World:s(68243)}}),22562:((C,R,s)=>{var g={};C.exports=g;var y=s(41598),u=s(31725),l=s(53614),h=s(53402),r=s(15647),o=s(66615);(function(){g._timeCorrection=!0,g._inertiaScale=4,g._nextCollidingGroupId=1,g._nextNonCollidingGroupId=-1,g._nextCategory=1,g._baseDelta=16.666666666666668,g.create=function(a){var f={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:a.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!a.hasOwnProperty("position")&&a.hasOwnProperty("vertices")?a.position=y.centre(a.vertices):a.hasOwnProperty("vertices")||(f.vertices=y.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var v=h.extend(f,a);return d(v,a),v.setOnCollideWith=function(c,p){return p?this.onCollideWith[c.id]=p:delete this.onCollideWith[c.id],this},v},g.nextGroup=function(a){return a?g._nextNonCollidingGroupId--:g._nextCollidingGroupId++},g.nextCategory=function(){return g._nextCategory=g._nextCategory<<1,g._nextCategory};var d=function(a,f){if(f=f||{},g.set(a,{bounds:a.bounds||r.create(a.vertices),positionPrev:a.positionPrev||u.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a}),y.rotate(a.vertices,a.angle,a.position),o.rotate(a.axes,a.angle),r.update(a.bounds,a.vertices,a.velocity),g.set(a,{axes:f.axes||a.axes,area:f.area||a.area,mass:f.mass||a.mass,inertia:f.inertia||a.inertia}),a.parts.length===1){var v=a.bounds,c=a.centerOfMass,p=a.centerOffset,m=v.max.x-v.min.x,T=v.max.y-v.min.y;c.x=-(v.min.x-a.position.x)/m,c.y=-(v.min.y-a.position.y)/T,p.x=m*c.x,p.y=T*c.y}};g.set=function(a,f,v){var c;typeof f=="string"&&(c=f,f={},f[c]=v);for(c in f)if(Object.prototype.hasOwnProperty.call(f,c))switch(v=f[c],c){case"isStatic":g.setStatic(a,v);break;case"isSleeping":l.set(a,v);break;case"mass":g.setMass(a,v);break;case"density":g.setDensity(a,v);break;case"inertia":g.setInertia(a,v);break;case"vertices":g.setVertices(a,v);break;case"position":g.setPosition(a,v);break;case"angle":g.setAngle(a,v);break;case"velocity":g.setVelocity(a,v);break;case"angularVelocity":g.setAngularVelocity(a,v);break;case"speed":g.setSpeed(a,v);break;case"angularSpeed":g.setAngularSpeed(a,v);break;case"parts":g.setParts(a,v);break;case"centre":g.setCentre(a,v);break;default:a[c]=v}},g.setStatic=function(a,f){for(var v=0;v<a.parts.length;v++){var c=a.parts[v];f?(c.isStatic||(c._original={restitution:c.restitution,friction:c.friction,mass:c.mass,inertia:c.inertia,density:c.density,inverseMass:c.inverseMass,inverseInertia:c.inverseInertia}),c.restitution=0,c.friction=1,c.mass=c.inertia=c.density=1/0,c.inverseMass=c.inverseInertia=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.angularVelocity=0,c.speed=0,c.angularSpeed=0,c.motion=0):c._original&&(c.restitution=c._original.restitution,c.friction=c._original.friction,c.mass=c._original.mass,c.inertia=c._original.inertia,c.density=c._original.density,c.inverseMass=c._original.inverseMass,c.inverseInertia=c._original.inverseInertia,c._original=null),c.isStatic=f}},g.setMass=function(a,f){var v=a.inertia/(a.mass/6);a.inertia=v*(f/6),a.inverseInertia=1/a.inertia,a.mass=f,a.inverseMass=1/a.mass,a.density=a.mass/a.area},g.setDensity=function(a,f){g.setMass(a,f*a.area),a.density=f},g.setInertia=function(a,f){a.inertia=f,a.inverseInertia=1/a.inertia},g.setVertices=function(a,f){f[0].body===a?a.vertices=f:a.vertices=y.create(f,a),a.axes=o.fromVertices(a.vertices),a.area=y.area(a.vertices),g.setMass(a,a.density*a.area);var v=y.centre(a.vertices);y.translate(a.vertices,v,-1),g.setInertia(a,g._inertiaScale*y.inertia(a.vertices,a.mass)),y.translate(a.vertices,a.position),r.update(a.bounds,a.vertices,a.velocity)},g.setParts=function(a,f,v){var c;for(f=f.slice(0),a.parts.length=0,a.parts.push(a),a.parent=a,c=0;c<f.length;c++){var p=f[c];p!==a&&(p.parent=a,a.parts.push(p))}if(a.parts.length!==1){if(v=typeof v<"u"?v:!0,v){var m=[];for(c=0;c<f.length;c++)m=m.concat(f[c].vertices);y.clockwiseSort(m);var T=y.hull(m),E=y.centre(T);g.setVertices(a,T),y.translate(a.vertices,E)}var P=g._totalProperties(a),w=P.centre.x,A=P.centre.y,b=a.bounds,O=a.centerOfMass,I=a.centerOffset;r.update(b,a.vertices,a.velocity),O.x=-(b.min.x-w)/(b.max.x-b.min.x),O.y=-(b.min.y-A)/(b.max.y-b.min.y),I.x=w,I.y=A,a.area=P.area,a.parent=a,a.position.x=w,a.position.y=A,a.positionPrev.x=w,a.positionPrev.y=A,g.setMass(a,P.mass),g.setInertia(a,P.inertia),g.setPosition(a,P.centre)}},g.setCentre=function(a,f,v){v?(a.positionPrev.x+=f.x,a.positionPrev.y+=f.y,a.position.x+=f.x,a.position.y+=f.y):(a.positionPrev.x=f.x-(a.position.x-a.positionPrev.x),a.positionPrev.y=f.y-(a.position.y-a.positionPrev.y),a.position.x=f.x,a.position.y=f.y)},g.setPosition=function(a,f,v){var c=u.sub(f,a.position);v?(a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.velocity.x=c.x,a.velocity.y=c.y,a.speed=u.magnitude(c)):(a.positionPrev.x+=c.x,a.positionPrev.y+=c.y);for(var p=0;p<a.parts.length;p++){var m=a.parts[p];m.position.x+=c.x,m.position.y+=c.y,y.translate(m.vertices,c),r.update(m.bounds,m.vertices,a.velocity)}},g.setAngle=function(a,f,v){var c=f-a.angle;v?(a.anglePrev=a.angle,a.angularVelocity=c,a.angularSpeed=Math.abs(c)):a.anglePrev+=c;for(var p=0;p<a.parts.length;p++){var m=a.parts[p];m.angle+=c,y.rotate(m.vertices,c,a.position),o.rotate(m.axes,c),r.update(m.bounds,m.vertices,a.velocity),p>0&&u.rotateAbout(m.position,c,a.position,m.position)}},g.setVelocity=function(a,f){var v=a.deltaTime/g._baseDelta;a.positionPrev.x=a.position.x-f.x*v,a.positionPrev.y=a.position.y-f.y*v,a.velocity.x=(a.position.x-a.positionPrev.x)/v,a.velocity.y=(a.position.y-a.positionPrev.y)/v,a.speed=u.magnitude(a.velocity)},g.getVelocity=function(a){var f=g._baseDelta/a.deltaTime;return{x:(a.position.x-a.positionPrev.x)*f,y:(a.position.y-a.positionPrev.y)*f}},g.getSpeed=function(a){return u.magnitude(g.getVelocity(a))},g.setSpeed=function(a,f){g.setVelocity(a,u.mult(u.normalise(g.getVelocity(a)),f))},g.setAngularVelocity=function(a,f){var v=a.deltaTime/g._baseDelta;a.anglePrev=a.angle-f*v,a.angularVelocity=(a.angle-a.anglePrev)/v,a.angularSpeed=Math.abs(a.angularVelocity)},g.getAngularVelocity=function(a){return(a.angle-a.anglePrev)*g._baseDelta/a.deltaTime},g.getAngularSpeed=function(a){return Math.abs(g.getAngularVelocity(a))},g.setAngularSpeed=function(a,f){g.setAngularVelocity(a,h.sign(g.getAngularVelocity(a))*f)},g.translate=function(a,f,v){g.setPosition(a,u.add(a.position,f),v)},g.rotate=function(a,f,v,c){if(!v)g.setAngle(a,a.angle+f,c);else{var p=Math.cos(f),m=Math.sin(f),T=a.position.x-v.x,E=a.position.y-v.y;g.setPosition(a,{x:v.x+(T*p-E*m),y:v.y+(T*m+E*p)},c),g.setAngle(a,a.angle+f,c)}},g.scale=function(a,f,v,c){var p=0,m=0;c=c||a.position;for(var T=a.inertia===1/0,E=0;E<a.parts.length;E++){var P=a.parts[E];P.scale.x=f,P.scale.y=v,y.scale(P.vertices,f,v,c),P.axes=o.fromVertices(P.vertices),P.area=y.area(P.vertices),g.setMass(P,a.density*P.area),y.translate(P.vertices,{x:-P.position.x,y:-P.position.y}),g.setInertia(P,g._inertiaScale*y.inertia(P.vertices,P.mass)),y.translate(P.vertices,{x:P.position.x,y:P.position.y}),E>0&&(p+=P.area,m+=P.inertia),P.position.x=c.x+(P.position.x-c.x)*f,P.position.y=c.y+(P.position.y-c.y)*v,r.update(P.bounds,P.vertices,a.velocity)}a.parts.length>1&&(a.area=p,a.isStatic||(g.setMass(a,a.density*p),g.setInertia(a,m))),a.circleRadius&&(f===v?a.circleRadius*=f:a.circleRadius=null),T&&g.setInertia(a,1/0)},g.update=function(a,f){f=(typeof f<"u"?f:16.666666666666668)*a.timeScale;var v=f*f,c=g._timeCorrection?f/(a.deltaTime||f):1,p=1-a.frictionAir*(f/h._baseDelta),m=(a.position.x-a.positionPrev.x)*c,T=(a.position.y-a.positionPrev.y)*c;a.velocity.x=m*p+a.force.x/a.mass*v,a.velocity.y=T*p+a.force.y/a.mass*v,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.deltaTime=f,a.angularVelocity=(a.angle-a.anglePrev)*p*c+a.torque/a.inertia*v,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=u.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var E=0;E<a.parts.length;E++){var P=a.parts[E];y.translate(P.vertices,a.velocity),E>0&&(P.position.x+=a.velocity.x,P.position.y+=a.velocity.y),a.angularVelocity!==0&&(y.rotate(P.vertices,a.angularVelocity,a.position),o.rotate(P.axes,a.angularVelocity),E>0&&u.rotateAbout(P.position,a.angularVelocity,a.position,P.position)),r.update(P.bounds,P.vertices,a.velocity)}},g.updateVelocities=function(a){var f=g._baseDelta/a.deltaTime,v=a.velocity;v.x=(a.position.x-a.positionPrev.x)*f,v.y=(a.position.y-a.positionPrev.y)*f,a.speed=Math.sqrt(v.x*v.x+v.y*v.y),a.angularVelocity=(a.angle-a.anglePrev)*f,a.angularSpeed=Math.abs(a.angularVelocity)},g.applyForce=function(a,f,v){var c={x:f.x-a.position.x,y:f.y-a.position.y};a.force.x+=v.x,a.force.y+=v.y,a.torque+=c.x*v.y-c.y*v.x},g._totalProperties=function(a){for(var f={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=a.parts.length===1?0:1;v<a.parts.length;v++){var c=a.parts[v],p=c.mass!==1/0?c.mass:1;f.mass+=p,f.area+=c.area,f.inertia+=c.inertia,f.centre=u.add(f.centre,u.mult(c.position,p))}return f.centre=u.div(f.centre,f.mass),f},g.wrap=function(a,f){var v=r.wrap(a.bounds,f);return v&&g.translate(a,v),v}})()}),69351:((C,R,s)=>{var g={};C.exports=g;var y=s(35810),u=s(53402),l=s(15647),h=s(22562);(function(){g.create=function(r){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},g.setModified=function(r,o,d,a){if(y.trigger(r,"compositeModified",r),r.isModified=o,o&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),d&&r.parent&&g.setModified(r.parent,o,d,a),a)for(var f=0;f<r.composites.length;f++){var v=r.composites[f];g.setModified(v,o,d,a)}},g.add=function(r,o){var d=[].concat(o);y.trigger(r,"beforeAdd",{object:o});for(var a=0;a<d.length;a++){var f=d[a];switch(f.type){case"body":if(f.parent!==f){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}g.addBody(r,f);break;case"constraint":g.addConstraint(r,f);break;case"composite":g.addComposite(r,f);break;case"mouseConstraint":g.addConstraint(r,f.constraint);break}}return y.trigger(r,"afterAdd",{object:o}),r},g.remove=function(r,o,d){var a=[].concat(o);y.trigger(r,"beforeRemove",{object:o});for(var f=0;f<a.length;f++){var v=a[f];switch(v.type){case"body":g.removeBody(r,v,d);break;case"constraint":g.removeConstraint(r,v,d);break;case"composite":g.removeComposite(r,v,d);break;case"mouseConstraint":g.removeConstraint(r,v.constraint);break}}return y.trigger(r,"afterRemove",{object:o}),r},g.addComposite=function(r,o){return r.composites.push(o),o.parent=r,g.setModified(r,!0,!0,!1),r},g.removeComposite=function(r,o,d){var a=u.indexOf(r.composites,o);if(a!==-1){var f=g.allBodies(o);g.removeCompositeAt(r,a);for(var v=0;v<f.length;v++)f[v].sleepCounter=0}if(d)for(var v=0;v<r.composites.length;v++)g.removeComposite(r.composites[v],o,!0);return r},g.removeCompositeAt=function(r,o){return r.composites.splice(o,1),g.setModified(r,!0,!0,!1),r},g.addBody=function(r,o){return r.bodies.push(o),g.setModified(r,!0,!0,!1),r},g.removeBody=function(r,o,d){var a=u.indexOf(r.bodies,o);if(a!==-1&&(g.removeBodyAt(r,a),o.sleepCounter=0),d)for(var f=0;f<r.composites.length;f++)g.removeBody(r.composites[f],o,!0);return r},g.removeBodyAt=function(r,o){return r.bodies.splice(o,1),g.setModified(r,!0,!0,!1),r},g.addConstraint=function(r,o){return r.constraints.push(o),g.setModified(r,!0,!0,!1),r},g.removeConstraint=function(r,o,d){var a=u.indexOf(r.constraints,o);if(a!==-1&&g.removeConstraintAt(r,a),d)for(var f=0;f<r.composites.length;f++)g.removeConstraint(r.composites[f],o,!0);return r},g.removeConstraintAt=function(r,o){return r.constraints.splice(o,1),g.setModified(r,!0,!0,!1),r},g.clear=function(r,o,d){if(d)for(var a=0;a<r.composites.length;a++)g.clear(r.composites[a],o,!0);return o?r.bodies=r.bodies.filter(function(f){return f.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,g.setModified(r,!0,!0,!1),r},g.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var o=[].concat(r.bodies),d=0;d<r.composites.length;d++)o=o.concat(g.allBodies(r.composites[d]));return r.cache&&(r.cache.allBodies=o),o},g.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var o=[].concat(r.constraints),d=0;d<r.composites.length;d++)o=o.concat(g.allConstraints(r.composites[d]));return r.cache&&(r.cache.allConstraints=o),o},g.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var o=[].concat(r.composites),d=0;d<r.composites.length;d++)o=o.concat(g.allComposites(r.composites[d]));return r.cache&&(r.cache.allComposites=o),o},g.get=function(r,o,d){var a,f;switch(d){case"body":a=g.allBodies(r);break;case"constraint":a=g.allConstraints(r);break;case"composite":a=g.allComposites(r).concat(r);break}return a?(f=a.filter(function(v){return v.id.toString()===o.toString()}),f.length===0?null:f[0]):null},g.move=function(r,o,d){return g.remove(r,o),g.add(d,o),r},g.rebase=function(r){for(var o=g.allBodies(r).concat(g.allConstraints(r)).concat(g.allComposites(r)),d=0;d<o.length;d++)o[d].id=u.nextId();return r},g.translate=function(r,o,d){for(var a=d?g.allBodies(r):r.bodies,f=0;f<a.length;f++)h.translate(a[f],o);return r},g.rotate=function(r,o,d,a){for(var f=Math.cos(o),v=Math.sin(o),c=a?g.allBodies(r):r.bodies,p=0;p<c.length;p++){var m=c[p],T=m.position.x-d.x,E=m.position.y-d.y;h.setPosition(m,{x:d.x+(T*f-E*v),y:d.y+(T*v+E*f)}),h.rotate(m,o)}return r},g.scale=function(r,o,d,a,f){for(var v=f?g.allBodies(r):r.bodies,c=0;c<v.length;c++){var p=v[c],m=p.position.x-a.x,T=p.position.y-a.y;h.setPosition(p,{x:a.x+m*o,y:a.y+T*d}),h.scale(p,o,d)}return r},g.bounds=function(r){for(var o=g.allBodies(r),d=[],a=0;a<o.length;a+=1){var f=o[a];d.push(f.bounds.min,f.bounds.max)}return l.create(d)},g.wrap=function(r,o){var d=l.wrap(g.bounds(r),o);return d&&g.translate(r,d),d}})()}),4372:((C,R,s)=>{var g={};C.exports=g;var y=s(69351);(function(){g.create=y.create,g.add=y.add,g.remove=y.remove,g.clear=y.clear,g.addComposite=y.addComposite,g.addBody=y.addBody,g.addConstraint=y.addConstraint})()}),52284:((C,R,s)=>{var g={};C.exports=g;var y=s(41598),u=s(4506);(function(){var l=[],h={overlap:0,axis:null},r={overlap:0,axis:null};g.create=function(o,d){return{pair:null,collided:!1,bodyA:o,bodyB:d,parentA:o.parent,parentB:d.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},g.collides=function(o,d,a){if(g._overlapAxes(h,o.vertices,d.vertices,o.axes),h.overlap<=0||(g._overlapAxes(r,d.vertices,o.vertices,d.axes),r.overlap<=0))return null;var f=a&&a.table[u.id(o,d)],v;f?v=f.collision:(v=g.create(o,d),v.collided=!0,v.bodyA=o.id<d.id?o:d,v.bodyB=o.id<d.id?d:o,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent),o=v.bodyA,d=v.bodyB;var c;h.overlap<r.overlap?c=h:c=r;var p=v.normal,m=v.tangent,T=v.penetration,E=v.supports,P=c.overlap,w=c.axis,A=w.x,b=w.y,O=d.position.x-o.position.x,I=d.position.y-o.position.y;A*O+b*I>=0&&(A=-A,b=-b),p.x=A,p.y=b,m.x=-b,m.y=A,T.x=A*P,T.y=b*P,v.depth=P;var D=g._findSupports(o,d,p,1),B=0;if(y.contains(o.vertices,D[0])&&(E[B++]=D[0]),y.contains(o.vertices,D[1])&&(E[B++]=D[1]),B<2){var k=g._findSupports(d,o,p,-1);y.contains(d.vertices,k[0])&&(E[B++]=k[0]),B<2&&y.contains(d.vertices,k[1])&&(E[B++]=k[1])}return B===0&&(E[B++]=D[0]),v.supportCount=B,v},g._overlapAxes=function(o,d,a,f){var v=d.length,c=a.length,p=d[0].x,m=d[0].y,T=a[0].x,E=a[0].y,P=f.length,w=Number.MAX_VALUE,A=0,b,O,I,D,B,k;for(B=0;B<P;B++){var N=f[B],H=N.x,$=N.y,J=p*H+m*$,q=T*H+E*$,Y=J,K=q;for(k=1;k<v;k+=1)D=d[k].x*H+d[k].y*$,D>Y?Y=D:D<J&&(J=D);for(k=1;k<c;k+=1)D=a[k].x*H+a[k].y*$,D>K?K=D:D<q&&(q=D);if(O=Y-q,I=K-J,b=O<I?O:I,b<w&&(w=b,A=B,b<=0))break}o.axis=f[A],o.overlap=w},g._findSupports=function(o,d,a,f){var v=d.vertices,c=v.length,p=o.position.x,m=o.position.y,T=a.x*f,E=a.y*f,P=v[0],w=P,A=T*(p-w.x)+E*(m-w.y),b,O,I;for(I=1;I<c;I+=1)w=v[I],O=T*(p-w.x)+E*(m-w.y),O<A&&(A=O,P=w);return b=v[(c+P.index-1)%c],A=T*(p-b.x)+E*(m-b.y),w=v[(P.index+1)%c],T*(p-w.x)+E*(m-w.y)<A?(l[0]=P,l[1]=w,l):(l[0]=P,l[1]=b,l)}})()}),43424:(C=>{var R={};C.exports=R,(function(){R.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}})()}),81388:((C,R,s)=>{var g={};C.exports=g;var y=s(53402),u=s(52284);(function(){g.create=function(l){var h={bodies:[],collisions:[],pairs:null};return y.extend(h,l)},g.setBodies=function(l,h){l.bodies=h.slice(0)},g.clear=function(l){l.bodies=[],l.collisions=[]},g.collisions=function(l){var h=l.pairs,r=l.bodies,o=r.length,d=g.canCollide,a=u.collides,f=l.collisions,v=0,c,p;for(r.sort(g._compareBoundsX),c=0;c<o;c++){var m=r[c],T=m.bounds,E=m.bounds.max.x,P=m.bounds.max.y,w=m.bounds.min.y,A=m.isStatic||m.isSleeping,b=m.parts.length,O=b===1;for(p=c+1;p<o;p++){var I=r[p],D=I.bounds;if(D.min.x>E)break;if(!(P<D.min.y||w>D.max.y)&&!(A&&(I.isStatic||I.isSleeping))&&d(m.collisionFilter,I.collisionFilter)){var B=I.parts.length;if(O&&B===1){var k=a(m,I,h);k&&(f[v++]=k)}else for(var N=b>1?1:0,H=B>1?1:0,$=N;$<b;$++)for(var J=m.parts[$],T=J.bounds,q=H;q<B;q++){var Y=I.parts[q],D=Y.bounds;if(!(T.min.x>D.max.x||T.max.x<D.min.x||T.max.y<D.min.y||T.min.y>D.max.y)){var k=a(J,Y,h);k&&(f[v++]=k)}}}}}return f.length!==v&&(f.length=v),f},g.canCollide=function(l,h){return l.group===h.group&&l.group!==0?l.group>0:(l.mask&h.category)!==0&&(h.mask&l.category)!==0},g._compareBoundsX=function(l,h){return l.bounds.min.x-h.bounds.min.x}})()}),4506:((C,R,s)=>{var g={};C.exports=g;var y=s(43424);(function(){g.create=function(u,l){var h=u.bodyA,r=u.bodyB,o={id:g.id(h,r),bodyA:h,bodyB:r,collision:u,contacts:[y.create(),y.create()],contactCount:0,separation:0,isActive:!0,isSensor:h.isSensor||r.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return g.update(o,u,l),o},g.update=function(u,l,h){var r=l.supports,o=l.supportCount,d=u.contacts,a=l.parentA,f=l.parentB;u.isActive=!0,u.timeUpdated=h,u.collision=l,u.separation=l.depth,u.inverseMass=a.inverseMass+f.inverseMass,u.friction=a.friction<f.friction?a.friction:f.friction,u.frictionStatic=a.frictionStatic>f.frictionStatic?a.frictionStatic:f.frictionStatic,u.restitution=a.restitution>f.restitution?a.restitution:f.restitution,u.slop=a.slop>f.slop?a.slop:f.slop,u.contactCount=o,l.pair=u;var v=r[0],c=d[0],p=r[1],m=d[1];(m.vertex===v||c.vertex===p)&&(d[1]=c,d[0]=c=m,m=d[1]),c.vertex=v,m.vertex=p},g.setActive=function(u,l,h){l?(u.isActive=!0,u.timeUpdated=h):(u.isActive=!1,u.contactCount=0)},g.id=function(u,l){return u.id<l.id?u.id.toString(36)+":"+l.id.toString(36):l.id.toString(36)+":"+u.id.toString(36)}})()}),99561:((C,R,s)=>{var g={};C.exports=g;var y=s(4506),u=s(53402);(function(){g.create=function(l){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},g.update=function(l,h,r){var o=y.update,d=y.create,a=y.setActive,f=l.table,v=l.list,c=v.length,p=c,m=l.collisionStart,T=l.collisionEnd,E=l.collisionActive,P=h.length,w=0,A=0,b=0,O,I,D;for(D=0;D<P;D++)O=h[D],I=O.pair,I?(I.isActive&&(E[b++]=I),o(I,O,r)):(I=d(O,r),f[I.id]=I,m[w++]=I,v[p++]=I);for(p=0,c=v.length,D=0;D<c;D++)I=v[D],I.timeUpdated>=r?v[p++]=I:(a(I,!1,r),I.collision.bodyA.sleepCounter>0&&I.collision.bodyB.sleepCounter>0?v[p++]=I:(T[A++]=I,delete f[I.id]));v.length!==p&&(v.length=p),m.length!==w&&(m.length=w),T.length!==A&&(T.length=A),E.length!==b&&(E.length=b)},g.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()}),73296:((C,R,s)=>{var g={};C.exports=g;var y=s(31725),u=s(52284),l=s(15647),h=s(66280),r=s(41598);(function(){g.collides=function(o,d){for(var a=[],f=d.length,v=o.bounds,c=u.collides,p=l.overlaps,m=0;m<f;m++){var T=d[m],E=T.parts.length,P=E===1?0:1;if(o!==T&&p(T.bounds,v))for(var w=P;w<E;w++){var A=T.parts[w];if(p(A.bounds,v)){var b=c(A,o);if(b){a.push(b);break}}}}return a},g.ray=function(o,d,a,f){f=f||1e-100;for(var v=y.angle(d,a),c=y.magnitude(y.sub(d,a)),p=(a.x+d.x)*.5,m=(a.y+d.y)*.5,T=h.rectangle(p,m,c,f,{angle:v}),E=g.collides(T,o),P=0;P<E.length;P+=1){var w=E[P];w.body=w.bodyB=w.bodyA}return E},g.region=function(o,d,a){for(var f=[],v=0;v<o.length;v++){var c=o[v],p=l.overlaps(c.bounds,d);(p&&!a||!p&&a)&&f.push(c)}return f},g.point=function(o,d){for(var a=[],f=0;f<o.length;f++){var v=o[f];if(l.contains(v.bounds,d))for(var c=v.parts.length===1?0:1;c<v.parts.length;c++){var p=v.parts[c];if(l.contains(p.bounds,d)&&r.contains(p.vertices,d)){a.push(v);break}}}return a}})()}),66272:((C,R,s)=>{var g={};C.exports=g;var y=s(41598),u=s(53402),l=s(15647);(function(){g._restingThresh=2,g._restingThreshTangent=Math.sqrt(6),g._positionDampen=.9,g._positionWarming=.8,g._frictionNormalMultiplier=5,g._frictionMaxStatic=Number.MAX_VALUE,g.preSolvePosition=function(h){var r,o,d,a=h.length;for(r=0;r<a;r++)o=h[r],o.isActive&&(d=o.contactCount,o.collision.parentA.totalContacts+=d,o.collision.parentB.totalContacts+=d)},g.solvePosition=function(h,r,o){var d,a,f,v,c,p,m,T,E=g._positionDampen*(o||1),P=u.clamp(r/u._baseDelta,0,1),w=h.length;for(d=0;d<w;d++)a=h[d],!(!a.isActive||a.isSensor)&&(f=a.collision,v=f.parentA,c=f.parentB,p=f.normal,a.separation=f.depth+p.x*(c.positionImpulse.x-v.positionImpulse.x)+p.y*(c.positionImpulse.y-v.positionImpulse.y));for(d=0;d<w;d++)a=h[d],!(!a.isActive||a.isSensor)&&(f=a.collision,v=f.parentA,c=f.parentB,p=f.normal,T=a.separation-a.slop*P,(v.isStatic||c.isStatic)&&(T*=2),v.isStatic||v.isSleeping||(m=E/v.totalContacts,v.positionImpulse.x+=p.x*T*m,v.positionImpulse.y+=p.y*T*m),c.isStatic||c.isSleeping||(m=E/c.totalContacts,c.positionImpulse.x-=p.x*T*m,c.positionImpulse.y-=p.y*T*m))},g.postSolvePosition=function(h){for(var r=g._positionWarming,o=h.length,d=y.translate,a=l.update,f=0;f<o;f++){var v=h[f],c=v.positionImpulse,p=c.x,m=c.y,T=v.velocity;if(v.totalContacts=0,p!==0||m!==0){for(var E=0;E<v.parts.length;E++){var P=v.parts[E];d(P.vertices,c),a(P.bounds,P.vertices,T),P.position.x+=p,P.position.y+=m}v.positionPrev.x+=p,v.positionPrev.y+=m,p*T.x+m*T.y<0?(c.x=0,c.y=0):(c.x*=r,c.y*=r)}}},g.preSolveVelocity=function(h){var r=h.length,o,d;for(o=0;o<r;o++){var a=h[o];if(!(!a.isActive||a.isSensor)){var f=a.contacts,v=a.contactCount,c=a.collision,p=c.parentA,m=c.parentB,T=c.normal,E=c.tangent;for(d=0;d<v;d++){var P=f[d],w=P.vertex,A=P.normalImpulse,b=P.tangentImpulse;if(A!==0||b!==0){var O=T.x*A+E.x*b,I=T.y*A+E.y*b;p.isStatic||p.isSleeping||(p.positionPrev.x+=O*p.inverseMass,p.positionPrev.y+=I*p.inverseMass,p.anglePrev+=p.inverseInertia*((w.x-p.position.x)*I-(w.y-p.position.y)*O)),m.isStatic||m.isSleeping||(m.positionPrev.x-=O*m.inverseMass,m.positionPrev.y-=I*m.inverseMass,m.anglePrev-=m.inverseInertia*((w.x-m.position.x)*I-(w.y-m.position.y)*O))}}}}},g.solveVelocity=function(h,r){var o=r/u._baseDelta,d=o*o,a=d*o,f=-g._restingThresh*o,v=g._restingThreshTangent,c=g._frictionNormalMultiplier*o,p=g._frictionMaxStatic,m=h.length,T,E,P,w;for(P=0;P<m;P++){var A=h[P];if(!(!A.isActive||A.isSensor)){var b=A.collision,O=b.parentA,I=b.parentB,D=b.normal.x,B=b.normal.y,k=b.tangent.x,N=b.tangent.y,H=A.inverseMass,$=A.friction*A.frictionStatic*c,J=A.contacts,q=A.contactCount,Y=1/q,K=O.position.x-O.positionPrev.x,V=O.position.y-O.positionPrev.y,U=O.angle-O.anglePrev,Z=I.position.x-I.positionPrev.x,et=I.position.y-I.positionPrev.y,st=I.angle-I.anglePrev;for(w=0;w<q;w++){var rt=J[w],at=rt.vertex,ut=at.x-O.position.x,vt=at.y-O.position.y,pt=at.x-I.position.x,gt=at.y-I.position.y,yt=K-vt*U,mt=V+ut*U,Tt=Z-gt*st,At=et+pt*st,Rt=yt-Tt,Lt=mt-At,Ct=D*Rt+B*Lt,Et=k*Rt+N*Lt,Mt=A.separation+Ct,zt=Math.min(Mt,1);zt=Mt<0?0:zt;var Zt=zt*$;Et<-Zt||Et>Zt?(E=Et>0?Et:-Et,T=A.friction*(Et>0?1:-1)*a,T<-E?T=-E:T>E&&(T=E)):(T=Et,E=p);var oe=ut*B-vt*D,Qt=pt*B-gt*D,jt=Y/(H+O.inverseInertia*oe*oe+I.inverseInertia*Qt*Qt),fe=(1+A.restitution)*Ct*jt;if(T*=jt,Ct<f)rt.normalImpulse=0;else{var Le=rt.normalImpulse;rt.normalImpulse+=fe,rt.normalImpulse>0&&(rt.normalImpulse=0),fe=rt.normalImpulse-Le}if(Et<-v||Et>v)rt.tangentImpulse=0;else{var $t=rt.tangentImpulse;rt.tangentImpulse+=T,rt.tangentImpulse<-E&&(rt.tangentImpulse=-E),rt.tangentImpulse>E&&(rt.tangentImpulse=E),T=rt.tangentImpulse-$t}var he=D*fe+k*T,Gt=B*fe+N*T;O.isStatic||O.isSleeping||(O.positionPrev.x+=he*O.inverseMass,O.positionPrev.y+=Gt*O.inverseMass,O.anglePrev+=(ut*Gt-vt*he)*O.inverseInertia),I.isStatic||I.isSleeping||(I.positionPrev.x-=he*I.inverseMass,I.positionPrev.y-=Gt*I.inverseMass,I.anglePrev-=(pt*Gt-gt*he)*I.inverseInertia)}}}}})()}),48140:((C,R,s)=>{var g={};C.exports=g;var y=s(41598),u=s(31725),l=s(53614),h=s(15647),r=s(66615),o=s(53402);(function(){g._warming=.4,g._torqueDampen=1,g._minLength=1e-6,g.create=function(d){var a=d;a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0}),a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var f=a.bodyA?u.add(a.bodyA.position,a.pointA):a.pointA,v=a.bodyB?u.add(a.bodyB.position,a.pointB):a.pointB,c=u.magnitude(u.sub(f,v));a.length=typeof a.length<"u"?a.length:c,a.id=a.id||o.nextId(),a.label=a.label||"Constraint",a.type="constraint",a.stiffness=a.stiffness||(a.length>0?1:.7),a.damping=a.damping||0,a.angularStiffness=a.angularStiffness||0,a.angleA=a.bodyA?a.bodyA.angle:a.angleA,a.angleB=a.bodyB?a.bodyB.angle:a.angleB,a.plugin={};var p={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return a.length===0&&a.stiffness>.1?(p.type="pin",p.anchors=!1):a.stiffness<.9&&(p.type="spring"),a.render=o.extend(p,a.render),a},g.preSolveAll=function(d){for(var a=0;a<d.length;a+=1){var f=d[a],v=f.constraintImpulse;f.isStatic||v.x===0&&v.y===0&&v.angle===0||(f.position.x+=v.x,f.position.y+=v.y,f.angle+=v.angle)}},g.solveAll=function(d,a){for(var f=o.clamp(a/o._baseDelta,0,1),v=0;v<d.length;v+=1){var c=d[v],p=!c.bodyA||c.bodyA&&c.bodyA.isStatic,m=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(p||m)&&g.solve(d[v],f)}for(v=0;v<d.length;v+=1)c=d[v],p=!c.bodyA||c.bodyA&&c.bodyA.isStatic,m=!c.bodyB||c.bodyB&&c.bodyB.isStatic,!p&&!m&&g.solve(d[v],f)},g.solve=function(d,a){var f=d.bodyA,v=d.bodyB,c=d.pointA,p=d.pointB;if(!(!f&&!v)){f&&!f.isStatic&&(u.rotate(c,f.angle-d.angleA,c),d.angleA=f.angle),v&&!v.isStatic&&(u.rotate(p,v.angle-d.angleB,p),d.angleB=v.angle);var m=c,T=p;if(f&&(m=u.add(f.position,c)),v&&(T=u.add(v.position,p)),!(!m||!T)){var E=u.sub(m,T),P=u.magnitude(E);P<g._minLength&&(P=g._minLength);var w=(P-d.length)/P,A=d.stiffness>=1||d.length===0,b=A?d.stiffness*a:d.stiffness*a*a,O=d.damping*a,I=u.mult(E,w*b),D=(f?f.inverseMass:0)+(v?v.inverseMass:0),B=(f?f.inverseInertia:0)+(v?v.inverseInertia:0),k=D+B,N,H,$,J,q;if(O>0){var Y=u.create();$=u.div(E,P),q=u.sub(v&&u.sub(v.position,v.positionPrev)||Y,f&&u.sub(f.position,f.positionPrev)||Y),J=u.dot($,q)}f&&!f.isStatic&&(H=f.inverseMass/D,f.constraintImpulse.x-=I.x*H,f.constraintImpulse.y-=I.y*H,f.position.x-=I.x*H,f.position.y-=I.y*H,O>0&&(f.positionPrev.x-=O*$.x*J*H,f.positionPrev.y-=O*$.y*J*H),N=u.cross(c,I)/k*g._torqueDampen*f.inverseInertia*(1-d.angularStiffness),f.constraintImpulse.angle-=N,f.angle-=N),v&&!v.isStatic&&(H=v.inverseMass/D,v.constraintImpulse.x+=I.x*H,v.constraintImpulse.y+=I.y*H,v.position.x+=I.x*H,v.position.y+=I.y*H,O>0&&(v.positionPrev.x+=O*$.x*J*H,v.positionPrev.y+=O*$.y*J*H),N=u.cross(p,I)/k*g._torqueDampen*v.inverseInertia*(1-d.angularStiffness),v.constraintImpulse.angle+=N,v.angle+=N)}}},g.postSolveAll=function(d){for(var a=0;a<d.length;a++){var f=d[a],v=f.constraintImpulse;if(!(f.isStatic||v.x===0&&v.y===0&&v.angle===0)){l.set(f,!1);for(var c=0;c<f.parts.length;c++){var p=f.parts[c];y.translate(p.vertices,v),c>0&&(p.position.x+=v.x,p.position.y+=v.y),v.angle!==0&&(y.rotate(p.vertices,v.angle,f.position),r.rotate(p.axes,v.angle),c>0&&u.rotateAbout(p.position,v.angle,f.position,p.position)),h.update(p.bounds,p.vertices,f.velocity)}v.angle*=g._warming,v.x*=g._warming,v.y*=g._warming}}},g.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),y:(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0)}},g.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),y:(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0)}},g.currentLength=function(d){var a=(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),f=(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0),v=(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),c=(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0),p=a-v,m=f-c;return Math.sqrt(p*p+m*m)}})()}),53402:((C,R,s)=>{var g={};C.exports=g,(function(){g._baseDelta=16.666666666666668,g._nextId=0,g._seed=0,g._nowStartTime=+new Date,g._warnedOnce={},g._decomp=null,g.extend=function(u,l){var h,r;typeof l=="boolean"?(h=2,r=l):(h=1,r=!0);for(var o=h;o<arguments.length;o++){var d=arguments[o];if(d)for(var a in d)r&&d[a]&&d[a].constructor===Object&&(!u[a]||u[a].constructor===Object)?(u[a]=u[a]||{},g.extend(u[a],r,d[a])):u[a]=d[a]}return u},g.clone=function(u,l){return g.extend({},l,u)},g.keys=function(u){if(Object.keys)return Object.keys(u);var l=[];for(var h in u)l.push(h);return l},g.values=function(u){var l=[];if(Object.keys){for(var h=Object.keys(u),r=0;r<h.length;r++)l.push(u[h[r]]);return l}for(var o in u)l.push(u[o]);return l},g.get=function(u,l,h,r){l=l.split(".").slice(h,r);for(var o=0;o<l.length;o+=1)u=u[l[o]];return u},g.set=function(u,l,h,r,o){var d=l.split(".").slice(r,o);return g.get(u,l,0,-1)[d[d.length-1]]=h,h},g.shuffle=function(u){for(var l=u.length-1;l>0;l--){var h=Math.floor(g.random()*(l+1)),r=u[l];u[l]=u[h],u[h]=r}return u},g.choose=function(u){return u[Math.floor(g.random()*u.length)]},g.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},g.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},g.isFunction=function(u){return typeof u=="function"},g.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},g.isString=function(u){return toString.call(u)==="[object String]"},g.clamp=function(u,l,h){return u<l?l:u>h?h:u},g.sign=function(u){return u<0?-1:1},g.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-g._nowStartTime},g.random=function(u,l){return u=typeof u<"u"?u:0,l=typeof l<"u"?l:1,u+y()*(l-u)};var y=function(){return g._seed=(g._seed*9301+49297)%233280,g._seed/233280};g.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},g.logLevel=1,g.log=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.info=function(){console&&g.logLevel>0&&g.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warn=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");g._warnedOnce[u]||(g.warn(u),g._warnedOnce[u]=!0)},g.deprecated=function(u,l,h){u[l]=g.chain(function(){g.warnOnce(" deprecated ",h)},u[l])},g.nextId=function(){return g._nextId++},g.indexOf=function(u,l){if(u.indexOf)return u.indexOf(l);for(var h=0;h<u.length;h++)if(u[h]===l)return h;return-1},g.map=function(u,l){if(u.map)return u.map(l);for(var h=[],r=0;r<u.length;r+=1)h.push(l(u[r]));return h},g.topologicalSort=function(u){var l=[],h=[],r=[];for(var o in u)!h[o]&&!r[o]&&g._topologicalSort(o,h,r,u,l);return l},g._topologicalSort=function(u,l,h,r,o){var d=r[u]||[];h[u]=!0;for(var a=0;a<d.length;a+=1){var f=d[a];h[f]||l[f]||g._topologicalSort(f,l,h,r,o)}h[u]=!1,l[u]=!0,o.push(u)},g.chain=function(){for(var u=[],l=0;l<arguments.length;l+=1){var h=arguments[l];h._chained?u.push.apply(u,h._chained):u.push(h)}var r=function(){for(var o,d=new Array(arguments.length),a=0,f=arguments.length;a<f;a++)d[a]=arguments[a];for(a=0;a<u.length;a+=1){var v=u[a].apply(o,d);typeof v<"u"&&(o=v)}return o};return r._chained=u,r},g.chainPathBefore=function(u,l,h){return g.set(u,l,g.chain(h,g.get(u,l)))},g.chainPathAfter=function(u,l,h){return g.set(u,l,g.chain(g.get(u,l),h))},g.setDecomp=function(u){g._decomp=u},g.getDecomp=function(){var u=g._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof s.g<"u"&&(u=s.g.decomp)}catch{u=null}return u}})()}),48413:((C,R,s)=>{var g={};C.exports=g;var y=s(53614),u=s(66272),l=s(81388),h=s(99561),r=s(35810),o=s(69351),d=s(48140),a=s(53402),f=s(22562);(function(){g._deltaMax=16.666666666666668,g.create=function(v){v=v||{};var c={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},p=a.extend(c,v);return p.world=v.world||o.create({label:"World"}),p.pairs=v.pairs||h.create(),p.detector=v.detector||l.create(),p.detector.pairs=p.pairs,p.grid={buckets:[]},p.world.gravity=p.gravity,p.broadphase=p.grid,p.metrics={},p},g.update=function(v,c){var p=a.now(),m=v.world,T=v.detector,E=v.pairs,P=v.timing,w=P.timestamp,A;c>g._deltaMax&&a.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",g._deltaMax.toFixed(3),"ms."),c=typeof c<"u"?c:a._baseDelta,c*=P.timeScale,P.timestamp+=c,P.lastDelta=c;var b={timestamp:P.timestamp,delta:c};r.trigger(v,"beforeUpdate",b);var O=o.allBodies(m),I=o.allConstraints(m),D=o.allComposites(m);for(m.isModified&&(l.setBodies(T,O),o.setModified(m,!1,!1,!0)),v.enableSleeping&&y.update(O,c),g._bodiesApplyGravity(O,v.gravity),g.wrap(O,D),g.attractors(O),c>0&&g._bodiesUpdate(O,c),r.trigger(v,"beforeSolve",b),d.preSolveAll(O),A=0;A<v.constraintIterations;A++)d.solveAll(I,c);d.postSolveAll(O);var B=l.collisions(T);h.update(E,B,w),v.enableSleeping&&y.afterCollisions(E.list),E.collisionStart.length>0&&r.trigger(v,"collisionStart",{pairs:E.collisionStart,timestamp:P.timestamp,delta:c});var k=a.clamp(20/v.positionIterations,0,1);for(u.preSolvePosition(E.list),A=0;A<v.positionIterations;A++)u.solvePosition(E.list,c,k);for(u.postSolvePosition(O),d.preSolveAll(O),A=0;A<v.constraintIterations;A++)d.solveAll(I,c);for(d.postSolveAll(O),u.preSolveVelocity(E.list),A=0;A<v.velocityIterations;A++)u.solveVelocity(E.list,c);return g._bodiesUpdateVelocities(O),E.collisionActive.length>0&&r.trigger(v,"collisionActive",{pairs:E.collisionActive,timestamp:P.timestamp,delta:c}),E.collisionEnd.length>0&&r.trigger(v,"collisionEnd",{pairs:E.collisionEnd,timestamp:P.timestamp,delta:c}),g._bodiesClearForces(O),r.trigger(v,"afterUpdate",b),v.timing.lastElapsed=a.now()-p,v},g.merge=function(v,c){if(a.extend(v,c),c.world){v.world=c.world,g.clear(v);for(var p=o.allBodies(v.world),m=0;m<p.length;m++){var T=p[m];y.set(T,!1),T.id=a.nextId()}}},g.clear=function(v){h.clear(v.pairs),l.clear(v.detector)},g._bodiesClearForces=function(v){for(var c=v.length,p=0;p<c;p++){var m=v[p];m.force.x=0,m.force.y=0,m.torque=0}},g._bodiesApplyGravity=function(v,c){var p=typeof c.scale<"u"?c.scale:.001,m=v.length;if(!(c.x===0&&c.y===0||p===0))for(var T=0;T<m;T++){var E=v[T];E.ignoreGravity||E.isStatic||E.isSleeping||(E.force.y+=E.mass*c.y*p,E.force.x+=E.mass*c.x*p)}},g._bodiesUpdate=function(v,c){for(var p=v.length,m=0;m<p;m++){var T=v[m];T.isStatic||T.isSleeping||f.update(T,c)}},g._bodiesUpdateVelocities=function(v){for(var c=v.length,p=0;p<c;p++)f.updateVelocities(v[p])},g.wrap=function(v,c){for(var p=0;p<v.length;p+=1){var m=v[p];m.wrapBounds!==null&&f.wrap(m,m.wrapBounds)}for(p=0;p<c.length;p+=1){var T=c[p];T.wrapBounds!==null&&o.wrap(T,T.wrapBounds)}},g.attractors=function(v){for(var c=0;c<v.length;c++){var p=v[c],m=p.attractors;if(m&&m.length>0)for(var T=0;T<v.length;T++){var E=v[T];if(c!==T)for(var P=0;P<m.length;P++){var w=m[P],A=w;a.isFunction(w)&&(A=w(p,E)),A&&f.applyForce(E,E.position,A)}}}}})()}),35810:((C,R,s)=>{var g={};C.exports=g;var y=s(53402);(function(){g.on=function(u,l,h){for(var r=l.split(" "),o,d=0;d<r.length;d++)o=r[d],u.events=u.events||{},u.events[o]=u.events[o]||[],u.events[o].push(h);return h},g.off=function(u,l,h){if(!l){u.events={};return}typeof l=="function"&&(h=l,l=y.keys(u.events).join(" "));for(var r=l.split(" "),o=0;o<r.length;o++){var d=u.events[r[o]],a=[];if(h&&d)for(var f=0;f<d.length;f++)d[f]!==h&&a.push(d[f]);u.events[r[o]]=a}},g.trigger=function(u,l,h){var r,o,d,a,f=u.events;if(f&&y.keys(f).length>0){h||(h={}),r=l.split(" ");for(var v=0;v<r.length;v++)if(o=r[v],d=f[o],d){a=y.clone(h,!1),a.name=o,a.source=u;for(var c=0;c<d.length;c++)d[c].apply(u,[a])}}}})()}),6790:((C,R,s)=>{var g={};C.exports=g;var y=s(73832),u=s(53402);(function(){g.name="matter-js",g.version="0.20.0",g.uses=[],g.used=[],g.use=function(){y.use(g,Array.prototype.slice.call(arguments))},g.before=function(l,h){return l=l.replace(/^Matter./,""),u.chainPathBefore(g,l,h)},g.after=function(l,h){return l=l.replace(/^Matter./,""),u.chainPathAfter(g,l,h)}})()}),73832:((C,R,s)=>{var g={};C.exports=g;var y=s(53402);(function(){g._registry={},g.register=function(u){if(g.isPlugin(u)||y.warn("Plugin.register:",g.toString(u),"does not implement all required fields."),u.name in g._registry){var l=g._registry[u.name],h=g.versionParse(u.version).number,r=g.versionParse(l.version).number;h>r?(y.warn("Plugin.register:",g.toString(l),"was upgraded to",g.toString(u)),g._registry[u.name]=u):h<r?y.warn("Plugin.register:",g.toString(l),"can not be downgraded to",g.toString(u)):u!==l&&y.warn("Plugin.register:",g.toString(u),"is already registered to different plugin object")}else g._registry[u.name]=u;return u},g.resolve=function(u){return g._registry[g.dependencyParse(u).name]},g.toString=function(u){return typeof u=="string"?u:(u.name||"anonymous")+"@"+(u.version||u.range||"0.0.0")},g.isPlugin=function(u){return u&&u.name&&u.version&&u.install},g.isUsed=function(u,l){return u.used.indexOf(l)>-1},g.isFor=function(u,l){var h=u.for&&g.dependencyParse(u.for);return!u.for||l.name===h.name&&g.versionSatisfies(l.version,h.range)},g.use=function(u,l){if(u.uses=(u.uses||[]).concat(l||[]),u.uses.length===0){y.warn("Plugin.use:",g.toString(u),"does not specify any dependencies to install.");return}for(var h=g.dependencies(u),r=y.topologicalSort(h),o=[],d=0;d<r.length;d+=1)if(r[d]!==u.name){var a=g.resolve(r[d]);if(!a){o.push(" "+r[d]);continue}g.isUsed(u,a.name)||(g.isFor(a,u)||(y.warn("Plugin.use:",g.toString(a),"is for",a.for,"but installed on",g.toString(u)+"."),a._warned=!0),a.install?a.install(u):(y.warn("Plugin.use:",g.toString(a),"does not specify an install function."),a._warned=!0),a._warned?(o.push(" "+g.toString(a)),delete a._warned):o.push(" "+g.toString(a)),u.used.push(a.name))}o.length>0&&!a.silent&&y.info(o.join("  "))},g.dependencies=function(u,l){var h=g.dependencyParse(u),r=h.name;if(l=l||{},!(r in l)){u=g.resolve(u)||u,l[r]=y.map(u.uses||[],function(d){g.isPlugin(d)&&g.register(d);var a=g.dependencyParse(d),f=g.resolve(d);return f&&!g.versionSatisfies(f.version,a.range)?(y.warn("Plugin.dependencies:",g.toString(f),"does not satisfy",g.toString(a),"used by",g.toString(h)+"."),f._warned=!0,u._warned=!0):f||(y.warn("Plugin.dependencies:",g.toString(d),"used by",g.toString(h),"could not be resolved."),u._warned=!0),a.name});for(var o=0;o<l[r].length;o+=1)g.dependencies(l[r][o],l);return l}},g.dependencyParse=function(u){if(y.isString(u)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(u)||y.warn("Plugin.dependencyParse:",u,"is not a valid dependency string."),{name:u.split("@")[0],range:u.split("@")[1]||"*"}}return{name:u.name,range:u.range||u.version}},g.versionParse=function(u){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(u)||y.warn("Plugin.versionParse:",u,"is not a valid version or range.");var h=l.exec(u),r=Number(h[4]),o=Number(h[5]),d=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:u,operator:h[1]||h[2]||"",major:r,minor:o,patch:d,parts:[r,o,d],prerelease:h[7],number:r*1e8+o*1e4+d}},g.versionSatisfies=function(u,l){l=l||"*";var h=g.versionParse(l),r=g.versionParse(u);if(h.isRange){if(h.operator==="*"||u==="*")return!0;if(h.operator===">")return r.number>h.number;if(h.operator===">=")return r.number>=h.number;if(h.operator==="~")return r.major===h.major&&r.minor===h.minor&&r.patch>=h.patch;if(h.operator==="^")return h.major>0?r.major===h.major&&r.number>=h.number:h.minor>0?r.minor===h.minor&&r.patch>=h.patch:r.patch===h.patch}return u===l||u==="*"}})()}),13037:((C,R,s)=>{var g={};C.exports=g;var y=s(35810),u=s(48413),l=s(53402);(function(){g._maxFrameDelta=66.66666666666667,g._frameDeltaFallback=16.666666666666668,g._timeBufferMargin=1.5,g._elapsedNextEstimate=1,g._smoothingLowerBound=.1,g._smoothingUpperBound=.9,g.create=function(r){var o={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},d=l.extend(o,r);return d.fps=0,d},g.run=function(r,o){return r.timeBuffer=g._frameDeltaFallback,(function d(a){r.frameRequestId=g._onNextFrame(r,d),a&&r.enabled&&g.tick(r,o,a)})(),r},g.tick=function(r,o,d){var a=l.now(),f=r.delta,v=0,c=d-r.timeLastTick;if((!c||!r.timeLastTick||c>Math.max(g._maxFrameDelta,r.maxFrameTime))&&(c=r.frameDelta||g._frameDeltaFallback),r.frameDeltaSmoothing){r.frameDeltaHistory.push(c),r.frameDeltaHistory=r.frameDeltaHistory.slice(-r.frameDeltaHistorySize);var p=r.frameDeltaHistory.slice(0).sort(),m=r.frameDeltaHistory.slice(p.length*g._smoothingLowerBound,p.length*g._smoothingUpperBound),T=h(m);c=T||c}r.frameDeltaSnapping&&(c=1e3/Math.round(1e3/c)),r.frameDelta=c,r.timeLastTick=d,r.timeBuffer+=r.frameDelta,r.timeBuffer=l.clamp(r.timeBuffer,0,r.frameDelta+f*g._timeBufferMargin),r.lastUpdatesDeferred=0;var E=r.maxUpdates||Math.ceil(r.maxFrameTime/f),P={timestamp:o.timing.timestamp};y.trigger(r,"beforeTick",P),y.trigger(r,"tick",P);for(var w=l.now();f>0&&r.timeBuffer>=f*g._timeBufferMargin;){y.trigger(r,"beforeUpdate",P),u.update(o,f),y.trigger(r,"afterUpdate",P),r.timeBuffer-=f,v+=1;var A=l.now()-a,b=l.now()-w,O=A+g._elapsedNextEstimate*b/v;if(v>=E||O>r.maxFrameTime){r.lastUpdatesDeferred=Math.round(Math.max(0,r.timeBuffer/f-g._timeBufferMargin));break}}o.timing.lastUpdatesPerFrame=v,y.trigger(r,"afterTick",P),r.frameDeltaHistory.length>=100&&(r.lastUpdatesDeferred&&Math.round(r.frameDelta/f)>E?l.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):r.lastUpdatesDeferred&&l.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof r.isFixed<"u"&&l.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(r.deltaMin||r.deltaMax)&&l.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),r.fps!==0&&l.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},g.stop=function(r){g._cancelNextFrame(r)},g._onNextFrame=function(r,o){if(typeof window<"u"&&window.requestAnimationFrame)r.frameRequestId=window.requestAnimationFrame(o);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return r.frameRequestId},g._cancelNextFrame=function(r){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(r.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var h=function(r){for(var o=0,d=r.length,a=0;a<d;a+=1)o+=r[a];return o/d||0}})()}),53614:((C,R,s)=>{var g={};C.exports=g;var y=s(22562),u=s(35810),l=s(53402);(function(){g._motionWakeThreshold=.18,g._motionSleepThreshold=.08,g._minBias=.9,g.update=function(h,r){for(var o=r/l._baseDelta,d=g._motionSleepThreshold,a=0;a<h.length;a++){var f=h[a],v=y.getSpeed(f),c=y.getAngularSpeed(f),p=v*v+c*c;if(f.force.x!==0||f.force.y!==0){g.set(f,!1);continue}var m=Math.min(f.motion,p),T=Math.max(f.motion,p);f.motion=g._minBias*m+(1-g._minBias)*T,f.sleepThreshold>0&&f.motion<d?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold/o&&g.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},g.afterCollisions=function(h){for(var r=g._motionSleepThreshold,o=0;o<h.length;o++){var d=h[o];if(d.isActive){var a=d.collision,f=a.bodyA.parent,v=a.bodyB.parent;if(!(f.isSleeping&&v.isSleeping||f.isStatic||v.isStatic)&&(f.isSleeping||v.isSleeping)){var c=f.isSleeping&&!f.isStatic?f:v,p=c===f?v:f;!c.isStatic&&p.motion>r&&g.set(c,!1)}}}},g.set=function(h,r){var o=h.isSleeping;r?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,o||u.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,o&&u.trigger(h,"sleepEnd"))}})()}),66280:((C,R,s)=>{var g={};C.exports=g;var y=s(41598),u=s(53402),l=s(22562),h=s(15647),r=s(31725);(function(){g.rectangle=function(o,d,a,f,v){v=v||{};var c={label:"Rectangle Body",position:{x:o,y:d},vertices:y.fromPath("L 0 0 L "+a+" 0 L "+a+" "+f+" L 0 "+f)};if(v.chamfer){var p=v.chamfer;c.vertices=y.chamfer(c.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete v.chamfer}return l.create(u.extend({},c,v))},g.trapezoid=function(o,d,a,f,v,c){c=c||{},v>=1&&u.warn("Bodies.trapezoid: slope parameter must be < 1."),v*=.5;var p=(1-v*2)*a,m=a*v,T=m+p,E=T+m,P;v<.5?P="L 0 0 L "+m+" "+-f+" L "+T+" "+-f+" L "+E+" 0":P="L 0 0 L "+T+" "+-f+" L "+E+" 0";var w={label:"Trapezoid Body",position:{x:o,y:d},vertices:y.fromPath(P)};if(c.chamfer){var A=c.chamfer;w.vertices=y.chamfer(w.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete c.chamfer}return l.create(u.extend({},w,c))},g.circle=function(o,d,a,f,v){f=f||{};var c={label:"Circle Body",circleRadius:a};v=v||25;var p=Math.ceil(Math.max(10,Math.min(v,a)));return p%2===1&&(p+=1),g.polygon(o,d,p,a,u.extend({},c,f))},g.polygon=function(o,d,a,f,v){if(v=v||{},a<3)return g.circle(o,d,f,v);for(var c=2*Math.PI/a,p="",m=c*.5,T=0;T<a;T+=1){var E=m+T*c,P=Math.cos(E)*f,w=Math.sin(E)*f;p+="L "+P.toFixed(3)+" "+w.toFixed(3)+" "}var A={label:"Polygon Body",position:{x:o,y:d},vertices:y.fromPath(p)};if(v.chamfer){var b=v.chamfer;A.vertices=y.chamfer(A.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete v.chamfer}return l.create(u.extend({},A,v))},g.fromVertices=function(o,d,a,f,v,c,p,m){var T=u.getDecomp(),E,P,w,A,b,O,I,D,B,k,N;for(E=!!(T&&T.quickDecomp),f=f||{},w=[],v=typeof v<"u"?v:!1,c=typeof c<"u"?c:.01,p=typeof p<"u"?p:10,m=typeof m<"u"?m:.01,u.isArray(a[0])||(a=[a]),k=0;k<a.length;k+=1)if(O=a[k],A=y.isConvex(O),b=!A,b&&!E&&u.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),A||!E)A?O=y.clockwiseSort(O):O=y.hull(O),w.push({position:{x:o,y:d},vertices:O});else{var H=O.map(function(rt){return[rt.x,rt.y]});T.makeCCW(H),c!==!1&&T.removeCollinearPoints(H,c),m!==!1&&T.removeDuplicatePoints&&T.removeDuplicatePoints(H,m);var $=T.quickDecomp(H);for(I=0;I<$.length;I++){var J=$[I],q=J.map(function(rt){return{x:rt[0],y:rt[1]}});p>0&&y.area(q)<p||w.push({position:y.centre(q),vertices:q})}}for(I=0;I<w.length;I++)w[I]=l.create(u.extend(w[I],f));if(v){var Y=5;for(I=0;I<w.length;I++){var K=w[I];for(D=I+1;D<w.length;D++){var V=w[D];if(h.overlaps(K.bounds,V.bounds)){var U=K.vertices,Z=V.vertices;for(B=0;B<K.vertices.length;B++)for(N=0;N<V.vertices.length;N++){var et=r.magnitudeSquared(r.sub(U[(B+1)%U.length],Z[N])),st=r.magnitudeSquared(r.sub(U[B],Z[(N+1)%Z.length]));et<Y&&st<Y&&(U[B].isInternal=!0,Z[N].isInternal=!0)}}}}}return w.length>1?(P=l.create(u.extend({parts:w.slice(0)},f)),l.setPosition(P,{x:o,y:d}),P):w[0]},g.flagCoincidentParts=function(o,d){d===void 0&&(d=5);for(var a=0;a<o.length;a++)for(var f=o[a],v=a+1;v<o.length;v++){var c=o[v];if(h.overlaps(f.bounds,c.bounds))for(var p=f.vertices,m=c.vertices,T=0;T<f.vertices.length;T++)for(var E=0;E<c.vertices.length;E++){var P=r.magnitudeSquared(r.sub(p[(T+1)%p.length],m[E])),w=r.magnitudeSquared(r.sub(p[T],m[(E+1)%m.length]));P<d&&w<d&&(p[T].isInternal=!0,m[E].isInternal=!0)}}return o}})()}),74116:((C,R,s)=>{var g={};C.exports=g;var y=s(69351),u=s(48140),l=s(53402),h=s(22562),r=s(66280);(function(){g.stack=function(o,d,a,f,v,c,p){for(var m=y.create({label:"Stack"}),T=o,E=d,P,w=0,A=0;A<f;A++){for(var b=0,O=0;O<a;O++){var I=p(T,E,O,A,P,w);if(I){var D=I.bounds.max.y-I.bounds.min.y,B=I.bounds.max.x-I.bounds.min.x;D>b&&(b=D),h.translate(I,{x:B*.5,y:D*.5}),T=I.bounds.max.x+v,y.addBody(m,I),P=I,w+=1}else T+=v}E+=b+c,T=o}return m},g.chain=function(o,d,a,f,v,c){for(var p=o.bodies,m=1;m<p.length;m++){var T=p[m-1],E=p[m],P=T.bounds.max.y-T.bounds.min.y,w=T.bounds.max.x-T.bounds.min.x,A=E.bounds.max.y-E.bounds.min.y,b=E.bounds.max.x-E.bounds.min.x,O={bodyA:T,pointA:{x:w*d,y:P*a},bodyB:E,pointB:{x:b*f,y:A*v}},I=l.extend(O,c);y.addConstraint(o,u.create(I))}return o.label+=" Chain",o},g.mesh=function(o,d,a,f,v){var c=o.bodies,p,m,T,E,P;for(p=0;p<a;p++){for(m=1;m<d;m++)T=c[m-1+p*d],E=c[m+p*d],y.addConstraint(o,u.create(l.extend({bodyA:T,bodyB:E},v)));if(p>0)for(m=0;m<d;m++)T=c[m+(p-1)*d],E=c[m+p*d],y.addConstraint(o,u.create(l.extend({bodyA:T,bodyB:E},v))),f&&m>0&&(P=c[m-1+(p-1)*d],y.addConstraint(o,u.create(l.extend({bodyA:P,bodyB:E},v)))),f&&m<d-1&&(P=c[m+1+(p-1)*d],y.addConstraint(o,u.create(l.extend({bodyA:P,bodyB:E},v))))}return o.label+=" Mesh",o},g.pyramid=function(o,d,a,f,v,c,p){return g.stack(o,d,a,f,v,c,function(m,T,E,P,w,A){var b=Math.min(f,Math.ceil(a/2)),O=w?w.bounds.max.x-w.bounds.min.x:0;if(!(P>b)){P=b-P;var I=P,D=a-1-P;if(!(E<I||E>D)){A===1&&h.translate(w,{x:(E+(a%2===1?1:-1))*O,y:0});var B=w?E*O:0;return p(o+B+E*v,T,E,P,w,A)}}})},g.newtonsCradle=function(o,d,a,f,v){for(var c=y.create({label:"Newtons Cradle"}),p=0;p<a;p++){var m=1.9,T=r.circle(o+p*(f*m),d+v,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),E=u.create({pointA:{x:o+p*(f*m),y:d},bodyB:T});y.addBody(c,T),y.addConstraint(c,E)}return c},g.car=function(o,d,a,f,v){var c=h.nextGroup(!0),p=20,m=-a*.5+p,T=a*.5-p,E=0,P=y.create({label:"Car"}),w=r.rectangle(o,d,a,f,{collisionFilter:{group:c},chamfer:{radius:f*.5},density:2e-4}),A=r.circle(o+m,d+E,v,{collisionFilter:{group:c},friction:.8}),b=r.circle(o+T,d+E,v,{collisionFilter:{group:c},friction:.8}),O=u.create({bodyB:w,pointB:{x:m,y:E},bodyA:A,stiffness:1,length:0}),I=u.create({bodyB:w,pointB:{x:T,y:E},bodyA:b,stiffness:1,length:0});return y.addBody(P,w),y.addBody(P,A),y.addBody(P,b),y.addConstraint(P,O),y.addConstraint(P,I),P},g.softBody=function(o,d,a,f,v,c,p,m,T,E){T=l.extend({inertia:1/0},T),E=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},E);var P=g.stack(o,d,a,f,v,c,function(w,A){return r.circle(w,A,m,T)});return g.mesh(P,a,f,p,E),P.label="Soft Body",P}})()}),66615:((C,R,s)=>{var g={};C.exports=g;var y=s(31725),u=s(53402);(function(){g.fromVertices=function(l){for(var h={},r=0;r<l.length;r++){var o=(r+1)%l.length,d=y.normalise({x:l[o].y-l[r].y,y:l[r].x-l[o].x}),a=d.y===0?1/0:d.x/d.y;a=a.toFixed(3).toString(),h[a]=d}return u.values(h)},g.rotate=function(l,h){if(h!==0)for(var r=Math.cos(h),o=Math.sin(h),d=0;d<l.length;d++){var a=l[d],f;f=a.x*r-a.y*o,a.y=a.x*o+a.y*r,a.x=f}}})()}),15647:(C=>{var R={};C.exports=R,(function(){R.create=function(s){var g={min:{x:0,y:0},max:{x:0,y:0}};return s&&R.update(g,s),g},R.update=function(s,g,y){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var u=0;u<g.length;u++){var l=g[u];l.x>s.max.x&&(s.max.x=l.x),l.x<s.min.x&&(s.min.x=l.x),l.y>s.max.y&&(s.max.y=l.y),l.y<s.min.y&&(s.min.y=l.y)}y&&(y.x>0?s.max.x+=y.x:s.min.x+=y.x,y.y>0?s.max.y+=y.y:s.min.y+=y.y)},R.contains=function(s,g){return g.x>=s.min.x&&g.x<=s.max.x&&g.y>=s.min.y&&g.y<=s.max.y},R.overlaps=function(s,g){return s.min.x<=g.max.x&&s.max.x>=g.min.x&&s.max.y>=g.min.y&&s.min.y<=g.max.y},R.translate=function(s,g){s.min.x+=g.x,s.max.x+=g.x,s.min.y+=g.y,s.max.y+=g.y},R.shift=function(s,g){var y=s.max.x-s.min.x,u=s.max.y-s.min.y;s.min.x=g.x,s.max.x=g.x+y,s.min.y=g.y,s.max.y=g.y+u},R.wrap=function(s,g,y){var u=null,l=null;if(typeof g.min.x<"u"&&typeof g.max.x<"u"&&(s.min.x>g.max.x?u=g.min.x-s.max.x:s.max.x<g.min.x&&(u=g.max.x-s.min.x)),typeof g.min.y<"u"&&typeof g.max.y<"u"&&(s.min.y>g.max.y?l=g.min.y-s.max.y:s.max.y<g.min.y&&(l=g.max.y-s.min.y)),u!==null||l!==null)return{x:u||0,y:l||0}}})()}),74058:((C,R,s)=>{var g={};C.exports=g,s(15647);var y=s(53402);(function(){g.pathToVertices=function(u,l){typeof window<"u"&&!("SVGPathSeg"in window)&&y.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,r,o,d,a,f,v,c,p,m,T=[],E,P,w=0,A=0,b=0;l=l||15;var O=function(D,B,k){var N=k%2===1&&k>1;if(!p||D!=p.x||B!=p.y){p&&N?(E=p.x,P=p.y):(E=0,P=0);var H={x:E+D,y:P+B};(N||!p)&&(p=H),T.push(H),A=E+D,b=P+B}},I=function(D){var B=D.pathSegTypeAsLetter.toUpperCase();if(B!=="Z"){switch(B){case"M":case"L":case"T":case"C":case"S":case"Q":A=D.x,b=D.y;break;case"H":A=D.x;break;case"V":b=D.y;break}O(A,b,D.pathSegType)}};for(g._svgPathToAbsolute(u),o=u.getTotalLength(),f=[],h=0;h<u.pathSegList.numberOfItems;h+=1)f.push(u.pathSegList.getItem(h));for(v=f.concat();w<o;){if(m=u.getPathSegAtLength(w),a=f[m],a!=c){for(;v.length&&v[0]!=a;)I(v.shift());c=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=u.getPointAtLength(w),O(d.x,d.y,0);break}w+=l}for(h=0,r=v.length;h<r;++h)I(v[h]);return T},g._svgPathToAbsolute=function(u){for(var l,h,r,o,d,a,f=u.pathSegList,v=0,c=0,p=f.numberOfItems,m=0;m<p;++m){var T=f.getItem(m),E=T.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in T&&(v=T.x),"y"in T&&(c=T.y);else switch("x1"in T&&(r=v+T.x1),"x2"in T&&(d=v+T.x2),"y1"in T&&(o=c+T.y1),"y2"in T&&(a=c+T.y2),"x"in T&&(v+=T.x),"y"in T&&(c+=T.y),E){case"m":f.replaceItem(u.createSVGPathSegMovetoAbs(v,c),m);break;case"l":f.replaceItem(u.createSVGPathSegLinetoAbs(v,c),m);break;case"h":f.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(v),m);break;case"v":f.replaceItem(u.createSVGPathSegLinetoVerticalAbs(c),m);break;case"c":f.replaceItem(u.createSVGPathSegCurvetoCubicAbs(v,c,r,o,d,a),m);break;case"s":f.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(v,c,d,a),m);break;case"q":f.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(v,c,r,o),m);break;case"t":f.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(v,c),m);break;case"a":f.replaceItem(u.createSVGPathSegArcAbs(v,c,T.r1,T.r2,T.angle,T.largeArcFlag,T.sweepFlag),m);break;case"z":case"Z":v=l,c=h;break}(E=="M"||E=="m")&&(l=v,h=c)}}})()}),31725:(C=>{var R={};C.exports=R,(function(){R.create=function(s,g){return{x:s||0,y:g||0}},R.clone=function(s){return{x:s.x,y:s.y}},R.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},R.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},R.rotate=function(s,g,y){var u=Math.cos(g),l=Math.sin(g);y||(y={});var h=s.x*u-s.y*l;return y.y=s.x*l+s.y*u,y.x=h,y},R.rotateAbout=function(s,g,y,u){var l=Math.cos(g),h=Math.sin(g);u||(u={});var r=y.x+((s.x-y.x)*l-(s.y-y.y)*h);return u.y=y.y+((s.x-y.x)*h+(s.y-y.y)*l),u.x=r,u},R.normalise=function(s){var g=R.magnitude(s);return g===0?{x:0,y:0}:{x:s.x/g,y:s.y/g}},R.dot=function(s,g){return s.x*g.x+s.y*g.y},R.cross=function(s,g){return s.x*g.y-s.y*g.x},R.cross3=function(s,g,y){return(g.x-s.x)*(y.y-s.y)-(g.y-s.y)*(y.x-s.x)},R.add=function(s,g,y){return y||(y={}),y.x=s.x+g.x,y.y=s.y+g.y,y},R.sub=function(s,g,y){return y||(y={}),y.x=s.x-g.x,y.y=s.y-g.y,y},R.mult=function(s,g){return{x:s.x*g,y:s.y*g}},R.div=function(s,g){return{x:s.x/g,y:s.y/g}},R.perp=function(s,g){return g=g===!0?-1:1,{x:g*-s.y,y:g*s.x}},R.neg=function(s){return{x:-s.x,y:-s.y}},R.angle=function(s,g){return Math.atan2(g.y-s.y,g.x-s.x)},R._temp=[R.create(),R.create(),R.create(),R.create(),R.create(),R.create()]})()}),41598:((C,R,s)=>{var g={};C.exports=g;var y=s(31725),u=s(53402);(function(){g.create=function(l,h){for(var r=[],o=0;o<l.length;o++){var d=l[o],a={x:d.x,y:d.y,index:o,body:h,isInternal:!1};r.push(a)}return r},g.fromPath=function(l,h){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,o=[];return l.replace(r,function(d,a,f){o.push({x:parseFloat(a),y:parseFloat(f)})}),g.create(o,h)},g.centre=function(l){for(var h=g.area(l,!0),r={x:0,y:0},o,d,a,f=0;f<l.length;f++)a=(f+1)%l.length,o=y.cross(l[f],l[a]),d=y.mult(y.add(l[f],l[a]),o),r=y.add(r,d);return y.div(r,6*h)},g.mean=function(l){for(var h={x:0,y:0},r=0;r<l.length;r++)h.x+=l[r].x,h.y+=l[r].y;return y.div(h,l.length)},g.area=function(l,h){for(var r=0,o=l.length-1,d=0;d<l.length;d++)r+=(l[o].x-l[d].x)*(l[o].y+l[d].y),o=d;return h?r/2:Math.abs(r)/2},g.inertia=function(l,h){for(var r=0,o=0,d=l,a,f,v=0;v<d.length;v++)f=(v+1)%d.length,a=Math.abs(y.cross(d[f],d[v])),r+=a*(y.dot(d[f],d[f])+y.dot(d[f],d[v])+y.dot(d[v],d[v])),o+=a;return h/6*(r/o)},g.translate=function(l,h,r){r=typeof r<"u"?r:1;var o=l.length,d=h.x*r,a=h.y*r,f;for(f=0;f<o;f++)l[f].x+=d,l[f].y+=a;return l},g.rotate=function(l,h,r){if(h!==0){var o=Math.cos(h),d=Math.sin(h),a=r.x,f=r.y,v=l.length,c,p,m,T;for(T=0;T<v;T++)c=l[T],p=c.x-a,m=c.y-f,c.x=a+(p*o-m*d),c.y=f+(p*d+m*o);return l}},g.contains=function(l,h){for(var r=h.x,o=h.y,d=l.length,a=l[d-1],f,v=0;v<d;v++){if(f=l[v],(r-a.x)*(f.y-a.y)+(o-a.y)*(a.x-f.x)>0)return!1;a=f}return!0},g.scale=function(l,h,r,o){if(h===1&&r===1)return l;o=o||g.centre(l);for(var d,a,f=0;f<l.length;f++)d=l[f],a=y.sub(d,o),l[f].x=o.x+a.x*h,l[f].y=o.y+a.y*r;return l},g.chamfer=function(l,h,r,o,d){typeof h=="number"?h=[h]:h=h||[8],r=typeof r<"u"?r:-1,o=o||2,d=d||14;for(var a=[],f=0;f<l.length;f++){var v=l[f-1>=0?f-1:l.length-1],c=l[f],p=l[(f+1)%l.length],m=h[f<h.length?f:h.length-1];if(m===0){a.push(c);continue}var T=y.normalise({x:c.y-v.y,y:v.x-c.x}),E=y.normalise({x:p.y-c.y,y:c.x-p.x}),P=Math.sqrt(2*Math.pow(m,2)),w=y.mult(u.clone(T),m),A=y.normalise(y.mult(y.add(T,E),.5)),b=y.sub(c,y.mult(A,P)),O=r;r===-1&&(O=Math.pow(m,.32)*1.75),O=u.clamp(O,o,d),O%2===1&&(O+=1);for(var I=Math.acos(y.dot(T,E)),D=I/O,B=0;B<O;B++)a.push(y.add(y.rotate(w,D*B),b))}return a},g.clockwiseSort=function(l){var h=g.mean(l);return l.sort(function(r,o){return y.angle(h,r)-y.angle(h,o)}),l},g.isConvex=function(l){var h=0,r=l.length,o,d,a,f;if(r<3)return null;for(o=0;o<r;o++)if(d=(o+1)%r,a=(o+2)%r,f=(l[d].x-l[o].x)*(l[a].y-l[d].y),f-=(l[d].y-l[o].y)*(l[a].x-l[d].x),f<0?h|=1:f>0&&(h|=2),h===3)return!1;return h!==0?!0:null},g.hull=function(l){var h=[],r=[],o,d;for(l=l.slice(0),l.sort(function(a,f){var v=a.x-f.x;return v!==0?v:a.y-f.y}),d=0;d<l.length;d+=1){for(o=l[d];r.length>=2&&y.cross3(r[r.length-2],r[r.length-1],o)<=0;)r.pop();r.push(o)}for(d=l.length-1;d>=0;d-=1){for(o=l[d];h.length>=2&&y.cross3(h[h.length-2],h[h.length-1],o)<=0;)h.pop();h.push(o)}return h.pop(),r.pop(),h.concat(r)}})()}),55973:(C=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={decomp:I,quickDecomp:N,isSimple:B,removeCollinearPoints:H,removeDuplicatePoints:$,makeCCW:p};function R(Y,K,V){V=V||0;var U=[0,0],Z,et,st,rt,at,ut,vt;return Z=Y[1][1]-Y[0][1],et=Y[0][0]-Y[1][0],st=Z*Y[0][0]+et*Y[0][1],rt=K[1][1]-K[0][1],at=K[0][0]-K[1][0],ut=rt*K[0][0]+at*K[0][1],vt=Z*at-rt*et,J(vt,0,V)||(U[0]=(at*st-et*ut)/vt,U[1]=(Z*ut-rt*st)/vt),U}function s(Y,K,V,U){var Z=K[0]-Y[0],et=K[1]-Y[1],st=U[0]-V[0],rt=U[1]-V[1];if(st*et-rt*Z===0)return!1;var at=(Z*(V[1]-Y[1])+et*(Y[0]-V[0]))/(st*et-rt*Z),ut=(st*(Y[1]-V[1])+rt*(V[0]-Y[0]))/(rt*Z-st*et);return at>=0&&at<=1&&ut>=0&&ut<=1}function g(Y,K,V){return(K[0]-Y[0])*(V[1]-Y[1])-(V[0]-Y[0])*(K[1]-Y[1])}function y(Y,K,V){return g(Y,K,V)>0}function u(Y,K,V){return g(Y,K,V)>=0}function l(Y,K,V){return g(Y,K,V)<0}function h(Y,K,V){return g(Y,K,V)<=0}var r=[],o=[];function d(Y,K,V,U){if(U){var Z=r,et=o;Z[0]=K[0]-Y[0],Z[1]=K[1]-Y[1],et[0]=V[0]-K[0],et[1]=V[1]-K[1];var st=Z[0]*et[0]+Z[1]*et[1],rt=Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]),at=Math.sqrt(et[0]*et[0]+et[1]*et[1]),ut=Math.acos(st/(rt*at));return ut<U}else return g(Y,K,V)===0}function a(Y,K){var V=K[0]-Y[0],U=K[1]-Y[1];return V*V+U*U}function f(Y,K){var V=Y.length;return Y[K<0?K%V+V:K%V]}function v(Y){Y.length=0}function c(Y,K,V,U){for(var Z=V;Z<U;Z++)Y.push(K[Z])}function p(Y){for(var K=0,V=Y,U=1;U<Y.length;++U)(V[U][1]<V[K][1]||V[U][1]===V[K][1]&&V[U][0]>V[K][0])&&(K=U);return y(f(Y,K-1),f(Y,K),f(Y,K+1))?!1:(m(Y),!0)}function m(Y){for(var K=[],V=Y.length,U=0;U!==V;U++)K.push(Y.pop());for(var U=0;U!==V;U++)Y[U]=K[U]}function T(Y,K){return l(f(Y,K-1),f(Y,K),f(Y,K+1))}var E=[],P=[];function w(Y,K,V){var U,Z,et=E,st=P;if(u(f(Y,K+1),f(Y,K),f(Y,V))&&h(f(Y,K-1),f(Y,K),f(Y,V)))return!1;Z=a(f(Y,K),f(Y,V));for(var rt=0;rt!==Y.length;++rt)if(!((rt+1)%Y.length===K||rt===K)&&u(f(Y,K),f(Y,V),f(Y,rt+1))&&h(f(Y,K),f(Y,V),f(Y,rt))&&(et[0]=f(Y,K),et[1]=f(Y,V),st[0]=f(Y,rt),st[1]=f(Y,rt+1),U=R(et,st),a(f(Y,K),U)<Z))return!1;return!0}function A(Y,K,V){for(var U=0;U!==Y.length;++U)if(!(U===K||U===V||(U+1)%Y.length===K||(U+1)%Y.length===V)&&s(f(Y,K),f(Y,V),f(Y,U),f(Y,U+1)))return!1;return!0}function b(Y,K,V,U){var Z=U||[];if(v(Z),K<V)for(var et=K;et<=V;et++)Z.push(Y[et]);else{for(var et=0;et<=V;et++)Z.push(Y[et]);for(var et=K;et<Y.length;et++)Z.push(Y[et])}return Z}function O(Y){for(var K=[],V=[],U=[],Z=[],et=Number.MAX_VALUE,st=0;st<Y.length;++st)if(T(Y,st)){for(var rt=0;rt<Y.length;++rt)if(w(Y,st,rt)){V=O(b(Y,st,rt,Z)),U=O(b(Y,rt,st,Z));for(var at=0;at<U.length;at++)V.push(U[at]);V.length<et&&(K=V,et=V.length,K.push([f(Y,st),f(Y,rt)]))}}return K}function I(Y){var K=O(Y);return K.length>0?D(Y,K):[Y]}function D(Y,K){if(K.length===0)return[Y];if(K instanceof Array&&K.length&&K[0]instanceof Array&&K[0].length===2&&K[0][0]instanceof Array){for(var V=[Y],U=0;U<K.length;U++)for(var Z=K[U],et=0;et<V.length;et++){var st=V[et],rt=D(st,Z);if(rt){V.splice(et,1),V.push(rt[0],rt[1]);break}}return V}else{var Z=K,U=Y.indexOf(Z[0]),et=Y.indexOf(Z[1]);return U!==-1&&et!==-1?[b(Y,U,et),b(Y,et,U)]:!1}}function B(Y){var K=Y,V;for(V=0;V<K.length-1;V++)for(var U=0;U<V-1;U++)if(s(K[V],K[V+1],K[U],K[U+1]))return!1;for(V=1;V<K.length-2;V++)if(s(K[0],K[K.length-1],K[V],K[V+1]))return!1;return!0}function k(Y,K,V,U,Z){Z=Z||0;var et=K[1]-Y[1],st=Y[0]-K[0],rt=et*Y[0]+st*Y[1],at=U[1]-V[1],ut=V[0]-U[0],vt=at*V[0]+ut*V[1],pt=et*ut-at*st;return J(pt,0,Z)?[0,0]:[(ut*rt-st*vt)/pt,(et*vt-at*rt)/pt]}function N(Y,K,V,U,Z,et,st){et=et||100,st=st||0,Z=Z||25,K=typeof K<"u"?K:[],V=V||[],U=U||[];var rt=[0,0],at=[0,0],ut=[0,0],vt=0,pt=0,gt=0,yt=0,mt=0,Tt=0,At=0,Rt=[],Lt=[],Ct=Y,Et=Y;if(Et.length<3)return K;if(st++,st>et)return console.warn("quickDecomp: max level ("+et+") reached."),K;for(var Mt=0;Mt<Y.length;++Mt)if(T(Ct,Mt)){V.push(Ct[Mt]),vt=pt=Number.MAX_VALUE;for(var zt=0;zt<Y.length;++zt)y(f(Ct,Mt-1),f(Ct,Mt),f(Ct,zt))&&h(f(Ct,Mt-1),f(Ct,Mt),f(Ct,zt-1))&&(ut=k(f(Ct,Mt-1),f(Ct,Mt),f(Ct,zt),f(Ct,zt-1)),l(f(Ct,Mt+1),f(Ct,Mt),ut)&&(gt=a(Ct[Mt],ut),gt<pt&&(pt=gt,at=ut,Tt=zt))),y(f(Ct,Mt+1),f(Ct,Mt),f(Ct,zt+1))&&h(f(Ct,Mt+1),f(Ct,Mt),f(Ct,zt))&&(ut=k(f(Ct,Mt+1),f(Ct,Mt),f(Ct,zt),f(Ct,zt+1)),y(f(Ct,Mt-1),f(Ct,Mt),ut)&&(gt=a(Ct[Mt],ut),gt<vt&&(vt=gt,rt=ut,mt=zt)));if(Tt===(mt+1)%Y.length)ut[0]=(at[0]+rt[0])/2,ut[1]=(at[1]+rt[1])/2,U.push(ut),Mt<mt?(c(Rt,Ct,Mt,mt+1),Rt.push(ut),Lt.push(ut),Tt!==0&&c(Lt,Ct,Tt,Ct.length),c(Lt,Ct,0,Mt+1)):(Mt!==0&&c(Rt,Ct,Mt,Ct.length),c(Rt,Ct,0,mt+1),Rt.push(ut),Lt.push(ut),c(Lt,Ct,Tt,Mt+1));else{if(Tt>mt&&(mt+=Y.length),yt=Number.MAX_VALUE,mt<Tt)return K;for(var zt=Tt;zt<=mt;++zt)u(f(Ct,Mt-1),f(Ct,Mt),f(Ct,zt))&&h(f(Ct,Mt+1),f(Ct,Mt),f(Ct,zt))&&(gt=a(f(Ct,Mt),f(Ct,zt)),gt<yt&&A(Ct,Mt,zt)&&(yt=gt,At=zt%Y.length));Mt<At?(c(Rt,Ct,Mt,At+1),At!==0&&c(Lt,Ct,At,Et.length),c(Lt,Ct,0,Mt+1)):(Mt!==0&&c(Rt,Ct,Mt,Et.length),c(Rt,Ct,0,At+1),c(Lt,Ct,At,Mt+1))}return Rt.length<Lt.length?(N(Rt,K,V,U,Z,et,st),N(Lt,K,V,U,Z,et,st)):(N(Lt,K,V,U,Z,et,st),N(Rt,K,V,U,Z,et,st)),K}return K.push(Y),K}function H(Y,K){for(var V=0,U=Y.length-1;Y.length>3&&U>=0;--U)d(f(Y,U-1),f(Y,U),f(Y,U+1),K)&&(Y.splice(U%Y.length,1),V++);return V}function $(Y,K){for(var V=Y.length-1;V>=1;--V)for(var U=Y[V],Z=V-1;Z>=0;--Z)if(q(U,Y[Z],K)){Y.splice(V,1);continue}}function J(Y,K,V){return V=V||0,Math.abs(Y-K)<=V}function q(Y,K,V){return J(Y[0],K[0],V)&&J(Y[1],K[1],V)}}),52018:((C,R,s)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var g=s(83419),y=new g({initialize:function(l){this.pluginManager=l,this.game=l.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});C.exports=y}),42363:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};C.exports=R}),37277:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={},s={},g={};g.register=function(y,u,l,h){h===void 0&&(h=!1),R[y]={plugin:u,mapping:l,custom:h}},g.registerCustom=function(y,u,l,h){s[y]={plugin:u,mapping:l,data:h}},g.hasCore=function(y){return R.hasOwnProperty(y)},g.hasCustom=function(y){return s.hasOwnProperty(y)},g.getCore=function(y){return R[y]},g.getCustom=function(y){return s[y]},g.getCustomClass=function(y){return s.hasOwnProperty(y)?s[y].plugin:null},g.remove=function(y){R.hasOwnProperty(y)&&delete R[y]},g.removeCustom=function(y){s.hasOwnProperty(y)&&delete s[y]},g.destroyCorePlugins=function(){for(var y in R)R.hasOwnProperty(y)&&delete R[y]},g.destroyCustomPlugins=function(){for(var y in s)s.hasOwnProperty(y)&&delete s[y]},C.exports=g}),77332:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(8443),u=s(50792),l=s(74099),h=s(44603),r=s(39429),o=s(95540),d=s(37277),a=s(72905),f=new g({Extends:u,initialize:function(c){u.call(this),this.game=c,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],c.isBooted?this.boot():c.events.once(y.BOOT,this.boot,this)},boot:function(){var v,c,p,m,T,E,P,w=this.game.config,A=w.installGlobalPlugins;for(A=A.concat(this._pendingGlobal),v=0;v<A.length;v++)c=A[v],p=o(c,"key",null),m=o(c,"plugin",null),T=o(c,"start",!1),E=o(c,"mapping",null),P=o(c,"data",null),p&&(m?this.install(p,m,T,E,P):console.warn("Missing `plugin` for key: "+p));for(A=w.installScenePlugins,A=A.concat(this._pendingScene),v=0;v<A.length;v++)c=A[v],p=o(c,"key",null),m=o(c,"plugin",null),E=o(c,"mapping",null),p&&(m?this.installScenePlugin(p,m,E):console.warn("Missing `plugin` for key: "+p));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(y.DESTROY,this.destroy,this)},addToScene:function(v,c,p){var m,T,E,P=this.game,w=v.scene,A=v.settings.map,b=v.settings.isBooted;for(m=0;m<c.length;m++)T=c[m],P[T]?(v[T]=P[T],A.hasOwnProperty(T)&&(w[A[T]]=v[T])):T==="game"&&A.hasOwnProperty(T)&&(w[A[T]]=P);for(var O=0;O<p.length;O++)for(E=p[O],m=0;m<E.length;m++)if(T=E[m],!!d.hasCore(T)){var I=d.getCore(T),D=I.mapping,B=new I.plugin(w,this,D);v[D]=B,I.custom?w[D]=B:A.hasOwnProperty(D)&&(w[A[D]]=B),b&&B.boot()}for(E=this.plugins,m=0;m<E.length;m++){var k=E[m];k.mapping&&(w[k.mapping]=k.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,c,p,m,T){if(T===void 0&&(T=!1),typeof c!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(d.hasCore(v)||d.register(v,c,p,!0),this.scenePlugins.indexOf(v)===-1)this.scenePlugins.push(v);else if(!T&&d.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(m){var E=new c(m,this,v);m.sys[v]=E,p&&p!==""&&(m[p]=E),E.boot()}},install:function(v,c,p,m,T){if(p===void 0&&(p=!1),m===void 0&&(m=null),T===void 0&&(T=null),typeof c!="function")return console.warn("Invalid Plugin: "+v),null;if(d.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(m!==null&&(p=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:c,start:p,mapping:m,data:T});else if(d.registerCustom(v,c,m,T),p)return this.start(v);return null},getIndex:function(v){for(var c=this.plugins,p=0;p<c.length;p++){var m=c[p];if(m.key===v)return p}return-1},getEntry:function(v){var c=this.getIndex(v);if(c!==-1)return this.plugins[c]},isActive:function(v){var c=this.getEntry(v);return c&&c.active},start:function(v,c){c===void 0&&(c=v);var p=this.getEntry(c);return p&&!p.active?(p.active=!0,p.plugin.start()):p||(p=this.createEntry(v,c)),p?p.plugin:null},createEntry:function(v,c){var p=d.getCustom(v);if(p){var m=new p.plugin(this);p={key:c,plugin:m,active:!0,mapping:p.mapping,data:p.data},this.plugins.push(p),m.init(p.data),m.start()}return p},stop:function(v){var c=this.getEntry(v);return c&&c.active&&(c.active=!1,c.plugin.stop()),this},get:function(v,c){c===void 0&&(c=!0);var p=this.getEntry(v);if(p)return p.plugin;var m=this.getClass(v);return m&&c?(p=this.createEntry(v,v),p?p.plugin:null):m||null},getClass:function(v){return d.getCustomClass(v)},removeGlobalPlugin:function(v){var c=this.getEntry(v);c&&a(this.plugins,c),d.removeCustom(v)},removeScenePlugin:function(v){a(this.scenePlugins,v),d.remove(v)},registerGameObject:function(v,c,p){return c&&r.register(v,c),p&&h.register(v,p),this},removeGameObject:function(v,c,p){return c===void 0&&(c=!0),p===void 0&&(p=!0),c&&r.remove(v),p&&h.remove(v),this},registerFileType:function(v,c,p){l.register(v,c),p&&p.sys.load&&(p.sys.load[v]=c)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});C.exports=f}),45145:((C,R,s)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var g=s(52018),y=s(83419),u=s(44594),l=new y({Extends:g,initialize:function(r,o,d){g.call(this,o),this.scene=r,this.systems=r.sys,this.pluginKey=d,r.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});C.exports=l}),18922:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={BasePlugin:s(52018),DefaultPlugins:s(42363),PluginCache:s(37277),PluginManager:s(77332),ScenePlugin:s(45145)}}),63595:(()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(C){const R=performance.now(),s=this.getVideoPlaybackQuality(),g=this.mozPresentedFrames||this.mozPaintedFrames||s.totalVideoFrames-s.droppedVideoFrames,y=(u,l)=>{const h=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||h.totalVideoFrames-h.droppedVideoFrames;if(r>g){const o=this.mozFrameDelay||h.totalFrameDelay-s.totalFrameDelay||0,d=l-u;C(l,{presentationTime:l+o*1e3,expectedDisplayTime:l+d,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+d/1e3,presentedFrames:r,processingDuration:o}),delete this._rvfcpolyfillmap[R]}else this._rvfcpolyfillmap[R]=requestAnimationFrame(o=>y(l,o))};return this._rvfcpolyfillmap[R]=requestAnimationFrame(u=>y(R,u)),R},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(C){cancelAnimationFrame(this._rvfcpolyfillmap[C]),delete this._rvfcpolyfillmap[C]})}),10312:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}}),29795:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={DEFAULT:0,LINEAR:0,NEAREST:1};C.exports=R}),68627:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(19715),y=s(32880),u=s(83419),l=s(8054),h=s(50792),r=s(92503),o=s(56373),d=s(97480),a=s(69442),f=s(61340),v=new u({Extends:h,initialize:function(p){h.call(this);var m=p.config;this.config={clearBeforeRender:m.clearBeforeRender,backgroundColor:m.backgroundColor,antialias:m.antialias,roundPixels:m.roundPixels},this.game=p,this.type=l.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=p.canvas;var T={alpha:p.config.transparent,desynchronized:p.config.desynchronized,willReadFrequently:!1};this.gameContext=m.context?m.context:this.gameCanvas.getContext("2d",T),this.currentContext=this.gameContext,this.antialias=p.config.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(a.READY,this.boot,this)},boot:function(){var c=this.game,p=c.scale.baseSize;this.width=p.width,this.height=p.height,this.isBooted=!0,c.scale.on(d.RESIZE,this.onResize,this),this.resize(p.width,p.height)},onResize:function(c,p){(p.width!==this.width||p.height!==this.height)&&this.resize(p.width,p.height)},resize:function(c,p){this.width=c,this.height=p,this.emit(r.RESIZE,c,p)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(c){return this.currentContext.globalCompositeOperation=c,this},setContext:function(c){return this.currentContext=c||this.gameContext,this},setAlpha:function(c){return this.currentContext.globalAlpha=c,this},preRender:function(){var c=this.gameContext,p=this.config,m=this.width,T=this.height;c.globalAlpha=1,c.globalCompositeOperation="source-over",c.setTransform(1,0,0,1,0,0),this.emit(r.PRE_RENDER_CLEAR),p.clearBeforeRender&&(c.clearRect(0,0,m,T),p.transparent||(c.fillStyle=p.backgroundColor.rgba,c.fillRect(0,0,m,T))),c.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(c,p,m){var T=p.length;this.emit(r.RENDER,c,m);var E=m.x,P=m.y,w=m.width,A=m.height,b=m.renderToTexture?m.context:c.sys.context;b.save(),this.game.scene.customViewports&&(b.beginPath(),b.rect(E,P,w,A),b.clip()),m.emit(g.PRE_RENDER,m),this.currentContext=b;var O=m.mask;O&&O.preRenderCanvas(this,null,m._maskCamera),m.transparent||(b.fillStyle=m.backgroundColor.rgba,b.fillRect(E,P,w,A)),b.globalAlpha=m.alpha,b.globalCompositeOperation="source-over",this.drawCount+=T,m.renderToTexture&&m.emit(g.PRE_RENDER,m),m.matrix.copyToContext(b);for(var I=0;I<T;I++){var D=p[I];D.mask&&D.mask.preRenderCanvas(this,D,m),D.renderCanvas(this,D,m),D.mask&&D.mask.postRenderCanvas(this,D,m)}b.setTransform(1,0,0,1,0,0),b.globalCompositeOperation="source-over",b.globalAlpha=1,m.flashEffect.postRenderCanvas(b),m.fadeEffect.postRenderCanvas(b),m.dirty=!1,O&&O.postRenderCanvas(this),b.restore(),m.renderToTexture&&(m.emit(g.POST_RENDER,m),m.renderToGame&&c.sys.context.drawImage(m.canvas,E,P)),m.emit(g.POST_RENDER,m)},postRender:function(){var c=this.gameContext;c.restore(),this.emit(r.POST_RENDER);var p=this.snapshotState;p.callback&&(y(this.gameCanvas,p),p.callback=null)},snapshotCanvas:function(c,p,m,T,E,P,w,A,b){m===void 0&&(m=!1),this.snapshotArea(T,E,P,w,p,A,b);var O=this.snapshotState;return O.getPixel=m,y(c,O),O.callback=null,this},snapshot:function(c,p,m){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,c,p,m)},snapshotArea:function(c,p,m,T,E,P,w){var A=this.snapshotState;return A.callback=E,A.type=P,A.encoder=w,A.getPixel=!1,A.x=c,A.y=p,A.width=Math.min(m,this.gameCanvas.width),A.height=Math.min(T,this.gameCanvas.height),this},snapshotPixel:function(c,p,m){return this.snapshotArea(c,p,1,1,m),this.snapshotState.getPixel=!0,this},batchSprite:function(c,p,m,T){var E=m.alpha*c.alpha;if(E!==0){var P=this.currentContext,w=this._tempMatrix1,A=this._tempMatrix2,b=p.canvasData,O=b.x,I=b.y,D=p.cutWidth,B=p.cutHeight,k=p.customPivot,N=p.source.resolution,H=c.displayOriginX,$=c.displayOriginY,J=-H+p.x,q=-$+p.y;if(c.isCropped){var Y=c._crop;(Y.flipX!==c.flipX||Y.flipY!==c.flipY)&&p.updateCropUVs(Y,c.flipX,c.flipY),D=Y.cw,B=Y.ch,O=Y.cx,I=Y.cy,J=-H+Y.x,q=-$+Y.y,c.flipX&&(J>=0?J=-(J+D):J<0&&(J=Math.abs(J)-D)),c.flipY&&(q>=0?q=-(q+B):q<0&&(q=Math.abs(q)-B))}var K=1,V=1;c.flipX&&(k||(J+=-p.realWidth+H*2),K=-1),c.flipY&&(k||(q+=-p.realHeight+$*2),V=-1);var U=c.x,Z=c.y;if(m.roundPixels&&(U=Math.floor(U),Z=Math.floor(Z)),A.applyITRS(U,Z,c.rotation,c.scaleX*K,c.scaleY*V),w.copyFrom(m.matrix),T?(w.multiplyWithOffset(T,-m.scrollX*c.scrollFactorX,-m.scrollY*c.scrollFactorY),A.e=U,A.f=Z):(A.e-=m.scrollX*c.scrollFactorX,A.f-=m.scrollY*c.scrollFactorY),w.multiply(A),m.renderRoundPixels&&(w.e=Math.floor(w.e+.5),w.f=Math.floor(w.f+.5)),P.save(),w.setToContext(P),P.globalCompositeOperation=this.blendModes[c.blendMode],P.globalAlpha=E,P.imageSmoothingEnabled=!p.source.scaleMode,c.mask&&c.mask.preRenderCanvas(this,c,m),D>0&&B>0){var et=D/N,st=B/N;m.roundPixels&&(J=Math.floor(J+.5),q=Math.floor(q+.5),et+=.5,st+=.5),P.drawImage(p.source.image,O,I,D,B,J,q,et,st)}c.mask&&c.mask.postRenderCanvas(this,c,m),P.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});C.exports=v}),55830:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={CanvasRenderer:s(68627),GetBlendModes:s(56373),SetTransform:s(20926)}}),56373:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10312),y=s(89289),u=function(){var l=[],h=y.supportNewBlendModes,r="source-over";return l[g.NORMAL]=r,l[g.ADD]="lighter",l[g.MULTIPLY]=h?"multiply":r,l[g.SCREEN]=h?"screen":r,l[g.OVERLAY]=h?"overlay":r,l[g.DARKEN]=h?"darken":r,l[g.LIGHTEN]=h?"lighten":r,l[g.COLOR_DODGE]=h?"color-dodge":r,l[g.COLOR_BURN]=h?"color-burn":r,l[g.HARD_LIGHT]=h?"hard-light":r,l[g.SOFT_LIGHT]=h?"soft-light":r,l[g.DIFFERENCE]=h?"difference":r,l[g.EXCLUSION]=h?"exclusion":r,l[g.HUE]=h?"hue":r,l[g.SATURATION]=h?"saturation":r,l[g.COLOR]=h?"color":r,l[g.LUMINOSITY]=h?"luminosity":r,l[g.ERASE]="destination-out",l[g.SOURCE_IN]="source-in",l[g.SOURCE_OUT]="source-out",l[g.SOURCE_ATOP]="source-atop",l[g.DESTINATION_OVER]="destination-over",l[g.DESTINATION_IN]="destination-in",l[g.DESTINATION_OUT]="destination-out",l[g.DESTINATION_ATOP]="destination-atop",l[g.LIGHTER]="lighter",l[g.COPY]="copy",l[g.XOR]="xor",l};C.exports=u}),20926:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91296),y=function(u,l,h,r,o){var d=r.alpha*h.alpha;if(d<=0)return!1;var a=g(h,r,o).calc;return l.globalCompositeOperation=u.blendModes[h.blendMode],l.globalAlpha=d,l.save(),a.setToContext(l),l.imageSmoothingEnabled=h.frame?!h.frame.source.scaleMode:u.antialias,!0};C.exports=y}),63899:(C=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="losewebgl"}),6119:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="postrender"}),48070:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="prerender"}),15640:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="render"}),8912:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resize"}),87124:(C=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="restorewebgl"}),92503:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={LOSE_WEBGL:s(63899),POST_RENDER:s(6119),PRE_RENDER:s(48070),RENDER:s(15640),RESIZE:s(8912),RESTORE_WEBGL:s(87124)}}),36909:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Events:s(92503),Snapshot:s(89966)},C.exports.Canvas=s(55830),C.exports.WebGL=s(4159)}),32880:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(27919),y=s(40987),u=s(95540),l=function(h,r){var o=u(r,"callback"),d=u(r,"type","image/png"),a=u(r,"encoder",.92),f=Math.abs(Math.round(u(r,"x",0))),v=Math.abs(Math.round(u(r,"y",0))),c=Math.floor(u(r,"width",h.width)),p=Math.floor(u(r,"height",h.height)),m=u(r,"getPixel",!1);if(m){var T=h.getContext("2d",{willReadFrequently:!1}),E=T.getImageData(f,v,1,1),P=E.data;o.call(null,new y(P[0],P[1],P[2],P[3]))}else if(f!==0||v!==0||c!==h.width||p!==h.height){var w=g.createWebGL(this,c,p),A=w.getContext("2d",{willReadFrequently:!0});c>0&&p>0&&A.drawImage(h,f,v,c,p,0,0,c,p);var b=new Image;b.onerror=function(){o.call(null),g.remove(w)},b.onload=function(){o.call(null,b),g.remove(w)},b.src=w.toDataURL(d,a)}else{var O=new Image;O.onerror=function(){o.call(null)},O.onload=function(){o.call(null,O)},O.src=h.toDataURL(d,a)}};C.exports=l}),88815:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(27919),y=s(40987),u=s(95540),l=function(h,r){var o=h,d=u(r,"callback"),a=u(r,"type","image/png"),f=u(r,"encoder",.92),v=Math.abs(Math.round(u(r,"x",0))),c=Math.abs(Math.round(u(r,"y",0))),p=u(r,"getPixel",!1),m=u(r,"isFramebuffer",!1),T=m?u(r,"bufferWidth",1):o.drawingBufferWidth,E=m?u(r,"bufferHeight",1):o.drawingBufferHeight;if(p){var P=new Uint8Array(4),w=m?c:E-c;o.readPixels(v,w,1,1,o.RGBA,o.UNSIGNED_BYTE,P),d.call(null,new y(P[0],P[1],P[2],P[3]))}else{var A=Math.floor(u(r,"width",T)),b=Math.floor(u(r,"height",E)),O=A*b*4,I=new Uint8Array(O);o.readPixels(v,E-c-b,A,b,o.RGBA,o.UNSIGNED_BYTE,I);for(var D=g.createWebGL(this,A,b),B=D.getContext("2d",{willReadFrequently:!0}),k=B.getImageData(0,0,A,b),N=k.data,H=0;H<b;H++)for(var $=0;$<A;$++){var J=((b-H-1)*A+$)*4,q=m?O-(H*A+(A-$))*4:(H*A+$)*4;N[q+0]=I[J+0],N[q+1]=I[J+1],N[q+2]=I[J+2],N[q+3]=I[J+3]}B.putImageData(k,0,0);var Y=new Image;Y.onerror=function(){d.call(null),g.remove(D)},Y.onload=function(){d.call(null,Y),g.remove(D)},Y.src=D.toDataURL(a,f)}};C.exports=l}),89966:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Canvas:s(32880),WebGL:s(88815)}}),7530:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(36060),u=s(90330),l=s(82264),h=s(95540),r=s(32302),o=s(63448),d=s(31302),a=s(58918),f=s(14811),v=s(92651),c=s(96569),p=s(56527),m=s(57516),T=s(43439),E=s(81041),P=s(12385),w=s(7589),A=s(95428),b=s(72905),O=new g({initialize:function(D){this.game=D.game,this.renderer=D,this.classes=new u([[y.UTILITY_PIPELINE,w],[y.MULTI_PIPELINE,m],[y.BITMAPMASK_PIPELINE,d],[y.SINGLE_PIPELINE,P],[y.ROPE_PIPELINE,E],[y.LIGHT_PIPELINE,c],[y.POINTLIGHT_PIPELINE,T],[y.MOBILE_PIPELINE,p]]),this.postPipelineClasses=new u,this.pipelines=new u,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(I,D,B){var k=this.renderer,N=this.renderTargets;this.frameInc=Math.floor(h(I,"frameInc",32));var H=k.width,$=k.height,J=this.game.config.disablePreFX,q=this.game.config.disablePostFX;if(q||this.postPipelineClasses.setAll([[String(f.BARREL),a.Barrel],[String(f.BLOOM),a.Bloom],[String(f.BLUR),a.Blur],[String(f.BOKEH),a.Bokeh],[String(f.CIRCLE),a.Circle],[String(f.COLOR_MATRIX),a.ColorMatrix],[String(f.DISPLACEMENT),a.Displacement],[String(f.GLOW),a.Glow],[String(f.GRADIENT),a.Gradient],[String(f.PIXELATE),a.Pixelate],[String(f.SHADOW),a.Shadow],[String(f.SHINE),a.Shine],[String(f.VIGNETTE),a.Vignette],[String(f.WIPE),a.Wipe]]),!J){this.classes.set(y.FX_PIPELINE,v);for(var Y=Math.min(H,$),K=Math.ceil(Y/this.frameInc),V=1;V<K;V++){var U=V*this.frameInc;N.push(new r(k,U,U)),N.push(new r(k,U,U)),N.push(new r(k,U,U)),this.maxDimension=U}N.push(new r(k,H,$,1,0,!0,!0)),N.push(new r(k,H,$,1,0,!0,!0)),N.push(new r(k,H,$,1,0,!0,!0))}var Z,et,st=this,rt=this.game;if(this.classes.each(function(ut,vt){Z=st.add(ut,new vt({game:rt})),ut===y.UTILITY_PIPELINE&&(st.UTILITY_PIPELINE=Z,st.fullFrame1=Z.fullFrame1,st.fullFrame2=Z.fullFrame2,st.halfFrame1=Z.halfFrame1,st.halfFrame2=Z.halfFrame2)}),this.MULTI_PIPELINE=this.get(y.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(y.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(y.MOBILE_PIPELINE),J||(this.FX_PIPELINE=this.get(y.FX_PIPELINE)),I)for(et in I){var at=I[et];Z=new at(rt),Z.name=et,Z.isPostFX?this.postPipelineClasses.set(et,at):this.has(et)||(this.classes.set(et,at),this.add(et,Z))}this.default=this.get(D),B&&!l.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(I){var D=this.get(I);return D&&(this.default=D),D},add:function(I,D){if(D.isPostFX){console.warn(I+" is a Post Pipeline. Use `addPostPipeline` instead");return}var B=this.pipelines,k=this.renderer;return B.has(I)?console.warn("Pipeline exists: "+I):(D.name=I,D.manager=this,B.set(I,D)),D.hasBooted||D.boot(),k.width!==0&&k.height!==0&&!D.isPreFX&&D.resize(k.width,k.height),D},addPostPipeline:function(I,D){this.postPipelineClasses.has(I)||this.postPipelineClasses.set(I,D)},flush:function(){this.current&&this.current.flush()},has:function(I){var D=this.pipelines;return typeof I=="string"?D.has(I):!!D.contains(I)},get:function(I){var D=this.pipelines;if(typeof I=="string")return D.get(I);if(D.contains(I))return I},getPostPipeline:function(I,D,B){var k=this.postPipelineClasses,N,H="",$=typeof I;if($==="string"||$==="number"?(N=k.get(I),H=I):$==="function"?(k.contains(I)&&(N=I),H=I.name):$==="object"&&(N=k.get(I.name),H=I.name),N){var J=new N(this.game,B);return J.name=H,D&&(J.gameObject=D),this.postPipelineInstances.push(J),J}},removePostPipeline:function(I){b(this.postPipelineInstances,I)},remove:function(I,D,B){D===void 0&&(D=!0),B===void 0&&(B=!0),this.pipelines.delete(I),D&&this.classes.delete(I),B&&this.postPipelineClasses.delete(I)},set:function(I,D,B){if(!I.isPostFX)return this.isCurrent(I,B)||(this.flush(),this.current&&this.current.unbind(),this.current=I,I.bind(B)),I.updateProjectionMatrix(),I.onBind(D),I},preBatch:function(I){if(I.hasPostPipeline){this.flush();for(var D=I.postPipelines,B=D.length-1;B>=0;B--){var k=D[B];k.active&&k.preBatch(I)}}},postBatch:function(I){if(I.hasPostPipeline){this.flush();for(var D=I.postPipelines,B=0;B<D.length;B++){var k=D[B];k.active&&k.postBatch(I)}}},preBatchCamera:function(I){if(I.hasPostPipeline){this.flush();for(var D=I.postPipelines,B=D.length-1;B>=0;B--){var k=D[B];k.active&&k.preBatch(I)}}},postBatchCamera:function(I){if(I.hasPostPipeline){this.flush();for(var D=I.postPipelines,B=0;B<D.length;B++){var k=D[B];k.active&&k.postBatch(I)}}},isCurrent:function(I,D){var B=this.renderer,k=this.current;return k&&!D&&(D=k.currentShader),!(k!==I||D.program!==B.currentProgram)},copyFrame:function(I,D,B,k,N){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(I,D,B,k,N),this},copyToGame:function(I){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(I),this},drawFrame:function(I,D,B,k){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(I,D,B,k),this},blendFrames:function(I,D,B,k,N){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(I,D,B,k,N),this},blendFramesAdditive:function(I,D,B,k,N){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(I,D,B,k,N),this},clearFrame:function(I,D){return this.UTILITY_PIPELINE.clearFrame(I,D),this},blitFrame:function(I,D,B,k,N,H){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(I,D,B,k,N,H),this},copyFrameRect:function(I,D,B,k,N,H,$,J){return this.UTILITY_PIPELINE.copyFrameRect(I,D,B,k,N,H,$,J),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(I){return this.UTILITY_PIPELINE.bind(I)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(I,D){D.restoreContext()}),A(this.postPipelineInstances,function(I){I.restoreContext()})},rebind:function(I){I===void 0&&this.previous&&(I=this.previous);var D=this.renderer,B=D.gl;B.disable(B.DEPTH_TEST),B.disable(B.CULL_FACE),D.hasActiveStencilMask()?B.clear(B.DEPTH_BUFFER_BIT):(B.disable(B.STENCIL_TEST),B.clear(B.DEPTH_BUFFER_BIT|B.STENCIL_BUFFER_BIT)),B.viewport(0,0,D.width,D.height),D.currentProgram=null,D.setBlendMode(0,!0);var k=D.vaoExtension;k&&k.bindVertexArrayOES(null);var N=this.pipelines.entries;for(var H in N)N[H].glReset=!0;I&&(this.current=I,I.rebind())},clear:function(){var I=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,I.currentProgram=null,I.setBlendMode(0,!0);var D=I.vaoExtension;D&&D.bindVertexArrayOES(null)},getRenderTarget:function(I){var D=this.renderTargets,B=3;if(I>this.maxDimension)return this.targetIndex=D.length-B,D[this.targetIndex];var k=(o(I,this.frameInc,0,!0)-1)*B;return this.targetIndex=k,D[k]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});C.exports=O}),32302:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(92503),u=new g({initialize:function(h,r,o,d,a,f,v,c,p){d===void 0&&(d=1),a===void 0&&(a=0),f===void 0&&(f=!0),v===void 0&&(v=!1),c===void 0&&(c=!0),p===void 0&&(p=!0),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=d,this.minFilter=a,this.autoClear=f,this.autoResize=!0,this.hasDepthBuffer=c,this.forceClamp=p,this.init(r,o),v?this.renderer.on(y.RESIZE,this.resize,this):this.autoResize=!1},init:function(l,h){var r=this.renderer;this.texture=r.createTextureFromSource(null,l,h,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(l,h,this.texture,this.hasDepthBuffer),this.width=l,this.height=h},setAutoResize:function(l){return l&&!this.autoResize?(this.renderer.on(y.RESIZE,this.resize,this),this.autoResize=!0):!l&&this.autoResize&&(this.renderer.off(y.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(l,h){if(this.autoResize&&this.willResize(l,h)){var r=this.renderer;r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.texture=r.createTextureFromSource(null,l,h,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(l,h,this.texture,this.hasDepthBuffer),this.width=l,this.height=h}return this},willResize:function(l,h){return typeof l!="number"||typeof h!="number"?!1:(l=Math.round(l*this.scale),h=Math.round(h*this.scale),l=Math.max(l,1),h=Math.max(h,1),l!==this.width||h!==this.height)},bind:function(l,h,r){l===void 0&&(l=!1);var o=this.renderer;if(l&&o.flush(),h&&r&&this.resize(h,r),o.pushFramebuffer(this.framebuffer,!1,!1),l&&this.adjustViewport(),this.autoClear){var d=this.renderer.gl;d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT)}o.clearStencilMask()},adjustViewport:function(){var l=this.renderer.gl;l.viewport(0,0,this.width,this.height),l.disable(l.SCISSOR_TEST)},clear:function(l,h,r,o){var d=this.renderer,a=d.gl;d.pushFramebuffer(this.framebuffer),l!==void 0&&h!==void 0&&r!==void 0&&o!==void 0?(a.enable(a.SCISSOR_TEST),a.scissor(l,h,r,o)):a.disable(a.SCISSOR_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),d.popFramebuffer(),d.resetScissor()},unbind:function(l){l===void 0&&(l=!1);var h=this.renderer;return l&&h.flush(),h.popFramebuffer()},destroy:function(){var l=this.renderer;l.off(y.RESIZE,this.resize,this),l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});C.exports=u}),70554:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={getTintFromFloats:function(R,s,g,y){var u=(R*255|0)&255,l=(s*255|0)&255,h=(g*255|0)&255,r=(y*255|0)&255;return(r<<24|u<<16|l<<8|h)>>>0},getTintAppendFloatAlpha:function(R,s){var g=(s*255|0)&255;return(g<<24|R)>>>0},getTintAppendFloatAlphaAndSwap:function(R,s){var g=(R>>16|0)&255,y=(R>>8|0)&255,u=(R|0)&255,l=(s*255|0)&255;return(l<<24|u<<16|y<<8|g)>>>0},getFloatsFromUintRGB:function(R){var s=(R>>16|0)&255,g=(R>>8|0)&255,y=(R|0)&255;return[s/255,g/255,y/255]},checkShaderMax:function(R,s){var g=Math.min(16,R.getParameter(R.MAX_TEXTURE_IMAGE_UNITS));return!s||s===-1?g:Math.min(g,s)},parseFragmentShaderMaxTextures:function(R,s){if(!R)return"";for(var g="",y=0;y<s;y++)y>0&&(g+=`
	else `),y<s-1&&(g+="if (outTexId < "+y+".5)"),g+=`
	{`,g+=`
		texture = texture2D(uMainSampler[`+y+"], outTexCoord);",g+=`
	}`;return R=R.replace(/%count%/gi,s.toString()),R.replace(/%forloop%/gi,g)},setGlowQuality:function(R,s,g,y){return g===void 0&&(g=s.config.glowFXQuality),y===void 0&&(y=s.config.glowFXDistance),R=R.replace(/__SIZE__/gi,(1/g/y).toFixed(7)),R=R.replace(/__DIST__/gi,y.toFixed(0)+".0"),R}}}),29100:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(62644),u=s(50792),l=s(77085),h=s(95540),r=s(37867),o=s(92503),d=s(32302),a=s(70554),f=s(38683),v=new g({Extends:u,initialize:function(p){u.call(this);var m=p.game,T=m.renderer,E=T.gl;this.name=h(p,"name","WebGLPipeline"),this.game=m,this.renderer=T,this.manager,this.gl=E,this.view=m.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=h(p,"topology",E.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=h(p,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=p,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=h(p,"resizeUniform","")},boot:function(){var c,p=this.gl,m=this.config,T=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var E=this.renderTargets,P=h(m,"renderTarget",!1);typeof P=="boolean"&&P&&(P=1);var w=T.width,A=T.height;if(typeof P=="number")for(c=0;c<P;c++)E.push(new d(T,w,A,1,0,!0));else if(Array.isArray(P))for(c=0;c<P.length;c++){var b=h(P[c],"scale",1),O=h(P[c],"minFilter",0),I=h(P[c],"autoClear",1),D=h(P[c],"autoResize",!1),B=h(P[c],"width",null),k=h(P[c],"height",B);B?E.push(new d(T,B,k,1,O,I,D)):E.push(new d(T,w,A,b,O,I,D))}E.length&&(this.currentRenderTarget=E[0]),this.setShadersFromConfig(m);var N=this.shaders,H=0;for(c=0;c<N.length;c++)N[c].vertexSize>H&&(H=N[c].vertexSize);var $=h(m,"batchSize",T.config.batchSize);this.vertexCapacity=$*6;var J=new ArrayBuffer(this.vertexCapacity*H);this.vertexData=J,this.bytes=new Uint8Array(J),this.vertexViewF32=new Float32Array(J),this.vertexViewU32=new Uint32Array(J);var q=h(m,"vertices",null);for(q?(this.vertexViewF32.set(q),this.vertexBuffer=T.createVertexBuffer(J,p.STATIC_DRAW)):this.vertexBuffer=T.createVertexBuffer(J.byteLength,p.DYNAMIC_DRAW),this.setVertexBuffer(),c=N.length-1;c>=0;c--)N[c].rebind();this.hasBooted=!0,T.on(o.RESIZE,this.resize,this),T.on(o.PRE_RENDER,this.onPreRender,this),T.on(o.RENDER,this.onRender,this),T.on(o.POST_RENDER,this.onPostRender,this),this.emit(l.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(c,p,m){var T=this.renderer;if(c!==this.currentShader||T.currentProgram!==this.currentShader.program){this.flush();var E=this.setVertexBuffer(m);E&&!p&&(p=!0),c.bind(p,!1),this.currentShader=c}return this},getShaderByName:function(c){for(var p=this.shaders,m=0;m<p.length;m++)if(p[m].name===c)return p[m]},setShadersFromConfig:function(c){var p,m=this.shaders,T=this.renderer;for(p=0;p<m.length;p++)m[p].destroy();var E="vertShader",P="fragShader",w="attributes",A=h(c,E,null),b=a.parseFragmentShaderMaxTextures(h(c,P,null),T.maxTextures),O=h(c,w,null),I=h(c,"shaders",[]),D=I.length;if(D===0)A&&b&&(this.shaders=[new f(this,"default",A,b,y(O))]);else{var B=[];for(p=0;p<D;p++){var k=I[p],N,H,$,J;if(typeof k=="string"?(N="default",H=A,$=a.parseFragmentShaderMaxTextures(k,T.maxTextures),J=O):(N=h(k,"name","default"),H=h(k,E,A),$=a.parseFragmentShaderMaxTextures(h(k,P,b),T.maxTextures),J=h(k,w,O)),N==="default"){var q=$.split(`
`),Y=q[0].trim();Y.indexOf("#define SHADER_NAME")>-1&&(N=Y.substring(20))}H&&$&&B.push(new f(this,N,H,$,y(J)))}this.shaders=B}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(c){return this.currentBatch={start:this.vertexCount,count:0,texture:[c],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=c,this.batch.push(this.currentBatch),0},addTextureToBatch:function(c){var p=this.currentBatch;p&&(p.texture.push(c),p.unit++,p.maxUnit++)},pushBatch:function(c){if(!this.currentBatch||this.forceZero&&c!==this.currentTexture)return this.createBatch(c);if(c===this.currentTexture)return this.currentUnit;var p=this.currentBatch,m=p.texture.indexOf(c);return m===-1?p.texture.length===this.renderer.maxTextures?this.createBatch(c):(p.unit++,p.maxUnit++,p.texture.push(c),this.currentUnit=p.unit,this.currentTexture=c,p.unit):(this.currentUnit=m,this.currentTexture=c,m)},setGameObject:function(c,p){return p===void 0&&(p=c.frame),this.pushBatch(p.source.glTexture)},shouldFlush:function(c){return c===void 0&&(c=0),this.vertexCount+c>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(c,p){(c!==this.width||p!==this.height)&&this.flush(),this.width=c,this.height=p;for(var m=this.renderTargets,T=0;T<m.length;T++)m[T].resize(c,p);return this.setProjectionMatrix(c,p),this.resizeUniform&&this.set2f(this.resizeUniform,c,p),this.emit(l.RESIZE,c,p,this),this.onResize(c,p),this},setProjectionMatrix:function(c,p){var m=this.projectionMatrix;if(!m)return this;this.projectionWidth=c,this.projectionHeight=p,m.ortho(0,c,p,0,-1e3,1e3);for(var T=this.shaders,E="uProjectionMatrix",P=0;P<T.length;P++){var w=T[P];w.hasUniform(E)&&(w.resetUniform(E),w.setMatrix4fv(E,!1,m.val,w))}return this},flipProjectionMatrix:function(c){c===void 0&&(c=!0);var p=this.projectionMatrix;if(!p)return this;var m=this.projectionWidth,T=this.projectionHeight;c?p.ortho(0,m,0,T,-1e3,1e3):p.ortho(0,m,T,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,p.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var c=this.renderer.projectionWidth,p=this.renderer.projectionHeight;(this.projectionWidth!==c||this.projectionHeight!==p)&&this.setProjectionMatrix(c,p)}},bind:function(c){if(c===void 0&&(c=this.currentShader),this.glReset)return this.rebind(c);var p=!1,m=this.gl;return m.getParameter(m.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(m.bindBuffer(m.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,p=!0),c.bind(p),this.currentShader=c,this.activeTextures.length=0,this.emit(l.BIND,this,c),this.onActive(c),this},rebind:function(c){this.activeBuffer=null,this.setVertexBuffer();for(var p=this.shaders,m=p.length-1;m>=0;m--){var T=p[m].rebind();(!c||T===c)&&(this.currentShader=T)}return this.activeTextures.length=0,this.emit(l.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var c=this.shaders,p=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,p&&this.setVertexBuffer();for(var m=0;m<c.length;m++){var T=c[m];T.syncUniforms(),p&&T.rebind()}},setVertexBuffer:function(c){if(c===void 0&&(c=this.vertexBuffer),c!==this.activeBuffer){var p=this.gl;return this.gl.bindBuffer(p.ARRAY_BUFFER,c.webGLBuffer),this.activeBuffer=c,!0}return!1},preBatch:function(c){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(c),this},postBatch:function(c){return this.onDraw(this.currentRenderTarget),this.onPostBatch(c),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(c){if(c===void 0&&(c=!1),this.vertexCount>0){this.emit(l.BEFORE_FLUSH,this,c),this.onBeforeFlush(c);var p=this.gl,m=this.vertexCount,T=this.currentShader.vertexSize,E=this.topology;if(this.active){this.setVertexBuffer(),m===this.vertexCapacity?p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.DYNAMIC_DRAW):p.bufferSubData(p.ARRAY_BUFFER,0,this.bytes.subarray(0,m*T));var P,w,A,b=this.batch,O=this.activeTextures;if(this.forceZero)for(O[0]||p.activeTexture(p.TEXTURE0),P=0;P<b.length;P++)w=b[P],A=w.texture[0],O[0]!==A&&(p.bindTexture(p.TEXTURE_2D,A.webGLTexture),O[0]=A),p.drawArrays(E,w.start,w.count);else for(P=0;P<b.length;P++){w=b[P];for(var I=0;I<=w.maxUnit;I++)A=w.texture[I],O[I]!==A&&(p.activeTexture(p.TEXTURE0+I),p.bindTexture(p.TEXTURE_2D,A.webGLTexture),O[I]=A);p.drawArrays(E,w.start,w.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(l.AFTER_FLUSH,this,c),this.onAfterFlush(c)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(c,p,m,T,E,P,w){var A=this.vertexViewF32,b=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++O]=c,A[++O]=p,A[++O]=m,A[++O]=T,A[++O]=E,A[++O]=P,b[++O]=w,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(c,p,m,T,E,P,w,A,b,O,I,D,B,k,N,H,$,J,q,Y){Y===void 0&&(Y=this.currentUnit);var K=!1;this.shouldFlush(6)&&(this.flush(),K=!0),this.currentBatch||(Y=this.setTexture2D(q));var V=this.vertexViewF32,U=this.vertexViewU32,Z=this.vertexCount*this.currentShader.vertexComponentCount-1;return V[++Z]=p,V[++Z]=m,V[++Z]=O,V[++Z]=I,V[++Z]=Y,V[++Z]=J,U[++Z]=k,V[++Z]=T,V[++Z]=E,V[++Z]=O,V[++Z]=B,V[++Z]=Y,V[++Z]=J,U[++Z]=H,V[++Z]=P,V[++Z]=w,V[++Z]=D,V[++Z]=B,V[++Z]=Y,V[++Z]=J,U[++Z]=$,V[++Z]=p,V[++Z]=m,V[++Z]=O,V[++Z]=I,V[++Z]=Y,V[++Z]=J,U[++Z]=k,V[++Z]=P,V[++Z]=w,V[++Z]=D,V[++Z]=B,V[++Z]=Y,V[++Z]=J,U[++Z]=$,V[++Z]=A,V[++Z]=b,V[++Z]=D,V[++Z]=I,V[++Z]=Y,V[++Z]=J,U[++Z]=N,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(c),K},batchTri:function(c,p,m,T,E,P,w,A,b,O,I,D,B,k,N,H,$){$===void 0&&($=this.currentUnit);var J=!1;this.shouldFlush(3)&&(this.flush(),J=!0),this.currentBatch||($=this.setTexture2D(H));var q=this.vertexViewF32,Y=this.vertexViewU32,K=this.vertexCount*this.currentShader.vertexComponentCount-1;return q[++K]=p,q[++K]=m,q[++K]=A,q[++K]=b,q[++K]=$,q[++K]=N,Y[++K]=D,q[++K]=T,q[++K]=E,q[++K]=A,q[++K]=I,q[++K]=$,q[++K]=N,Y[++K]=B,q[++K]=P,q[++K]=w,q[++K]=O,q[++K]=I,q[++K]=$,q[++K]=N,Y[++K]=k,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(c),J},drawFillRect:function(c,p,m,T,E,P,w,A){w===void 0&&(w=this.renderer.whiteTexture),A===void 0&&(A=!0),c=Math.floor(c),p=Math.floor(p);var b=Math.floor(c+m),O=Math.floor(p+T),I=this.setTexture2D(w),D=a.getTintAppendFloatAlphaAndSwap(E,P),B=0,k=0,N=1,H=1;A&&(k=1,H=0),this.batchQuad(null,c,p,c,O,b,O,b,p,B,k,N,H,D,D,D,D,0,w,I)},setTexture2D:function(c){return c===void 0&&(c=this.renderer.whiteTexture),this.pushBatch(c)},bindTexture:function(c,p){p===void 0&&(p=0);var m=this.gl;return m.activeTexture(m.TEXTURE0+p),m.bindTexture(m.TEXTURE_2D,c.webGLTexture),this},bindRenderTarget:function(c,p){return this.bindTexture(c.texture,p)},setTime:function(c,p){return this.set1f(c,this.game.loop.getDuration(),p),this},setBoolean:function(c,p,m){return m===void 0&&(m=this.currentShader),m.setBoolean(c,p),this},set1f:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set1f(c,p),this},set2f:function(c,p,m,T){return T===void 0&&(T=this.currentShader),T.set2f(c,p,m),this},set3f:function(c,p,m,T,E){return E===void 0&&(E=this.currentShader),E.set3f(c,p,m,T),this},set4f:function(c,p,m,T,E,P){return P===void 0&&(P=this.currentShader),P.set4f(c,p,m,T,E),this},set1fv:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set1fv(c,p),this},set2fv:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set2fv(c,p),this},set3fv:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set3fv(c,p),this},set4fv:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set4fv(c,p),this},set1iv:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set1iv(c,p),this},set2iv:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set2iv(c,p),this},set3iv:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set3iv(c,p),this},set4iv:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set4iv(c,p),this},set1i:function(c,p,m){return m===void 0&&(m=this.currentShader),m.set1i(c,p),this},set2i:function(c,p,m,T){return T===void 0&&(T=this.currentShader),T.set2i(c,p,m),this},set3i:function(c,p,m,T,E){return E===void 0&&(E=this.currentShader),E.set3i(c,p,m,T),this},set4i:function(c,p,m,T,E,P){return P===void 0&&(P=this.currentShader),P.set4i(c,p,m,T,E),this},setMatrix2fv:function(c,p,m,T){return T===void 0&&(T=this.currentShader),T.setMatrix2fv(c,p,m),this},setMatrix3fv:function(c,p,m,T){return T===void 0&&(T=this.currentShader),T.setMatrix3fv(c,p,m),this},setMatrix4fv:function(c,p,m,T){return T===void 0&&(T=this.currentShader),T.setMatrix4fv(c,p,m),this},destroy:function(){this.emit(l.DESTROY,this);var c,p=this.shaders;for(c=0;c<p.length;c++)p[c].destroy();var m=this.renderTargets;for(c=0;c<m.length;c++)m[c].destroy();var T=this.renderer;return T.deleteBuffer(this.vertexBuffer),T.off(o.RESIZE,this.resize,this),T.off(o.PRE_RENDER,this.onPreRender,this),T.off(o.RENDER,this.onRender,this),T.off(o.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});C.exports=v}),74797:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95428),y=s(72905),u=s(19715),l=s(83419),h=s(8054),r=s(50792),o=s(92503),d=s(50030),a=s(37867),f=s(29747),v=s(7530),c=s(32302),p=s(97480),m=s(69442),T=s(70554),E=s(88815),P=s(26128),w=s(1482),A=s(82751),b=s(84387),O=s(93567),I=s(57183),D=new l({Extends:r,initialize:function(k){r.call(this);var N=k.config,H={alpha:N.transparent,desynchronized:N.desynchronized,depth:!0,antialias:N.antialiasGL,premultipliedAlpha:N.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:N.failIfMajorPerformanceCaveat,powerPreference:N.powerPreference,preserveDrawingBuffer:N.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:N.clearBeforeRender,antialias:N.antialias,backgroundColor:N.backgroundColor,contextCreation:H,roundPixels:N.roundPixels,maxTextures:N.maxTextures,maxTextureSize:N.maxTextureSize,batchSize:N.batchSize,maxLights:N.maxLights,mipmapFilter:N.mipmapFilter},this.game=k,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=k.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=f,this.contextRestoredHandler=f,this.previousContextLostHandler=f,this.previousContextRestoredHandler=f,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(B){var k,N=this.game,H=this.canvas,$=B.backgroundColor;if(N.config.context?k=N.config.context:k=H.getContext("webgl",B.contextCreation)||H.getContext("experimental-webgl",B.contextCreation),!k||k.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=k,this.setExtensions(),this.setContextHandlers(),N.context=k;for(var J=0;J<=27;J++)this.blendModes.push({func:[k.ONE,k.ONE_MINUS_SRC_ALPHA],equation:k.FUNC_ADD});this.blendModes[1].func=[k.ONE,k.DST_ALPHA],this.blendModes[2].func=[k.DST_COLOR,k.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[k.ONE,k.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[k.ZERO,k.ONE_MINUS_SRC_ALPHA],equation:k.FUNC_REVERSE_SUBTRACT},this.glFormats=[k.BYTE,k.SHORT,k.UNSIGNED_BYTE,k.UNSIGNED_SHORT,k.FLOAT],this.glFuncMap={mat2:{func:k.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:k.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:k.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:k.uniform1f,length:1},"1fv":{func:k.uniform1fv,length:1},"1i":{func:k.uniform1i,length:1},"1iv":{func:k.uniform1iv,length:1},"2f":{func:k.uniform2f,length:2},"2fv":{func:k.uniform2fv,length:1},"2i":{func:k.uniform2i,length:2},"2iv":{func:k.uniform2iv,length:1},"3f":{func:k.uniform3f,length:3},"3fv":{func:k.uniform3fv,length:1},"3i":{func:k.uniform3i,length:3},"3iv":{func:k.uniform3iv,length:1},"4f":{func:k.uniform4f,length:4},"4fv":{func:k.uniform4fv,length:1},"4i":{func:k.uniform4i,length:4},"4iv":{func:k.uniform4iv,length:1}},(!B.maxTextures||B.maxTextures===-1)&&(B.maxTextures=k.getParameter(k.MAX_TEXTURE_IMAGE_UNITS)),B.maxTextureSize||(B.maxTextureSize=k.getParameter(k.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),k.disable(k.DEPTH_TEST),k.disable(k.CULL_FACE),k.enable(k.BLEND),k.clearColor($.redGL,$.greenGL,$.blueGL,$.alphaGL);var q=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return q.indexOf(B.mipmapFilter)!==-1&&(this.mipmapFilter=k[B.mipmapFilter]),this.maxTextures=T.checkShaderMax(k,B.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new v(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new a().identity(),N.textures.once(m.READY,this.boot,this),this},boot:function(){var B=this.game,k=this.pipelines,N=B.scale.baseSize,H=N.width,$=N.height;this.width=H,this.height=$,this.isBooted=!0,this.renderTarget=new c(this,H,$,1,0,!0,!0),this.maskTarget=new c(this,H,$,1,0,!0,!0),this.maskSource=new c(this,H,$,1,0,!0,!0);var J=B.config;k.boot(J.pipeline,J.defaultPipeline,J.autoMobilePipeline),this.blankTexture=B.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=B.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=B.textures.getFrame("__WHITE").glTexture;var q=this.gl;q.bindFramebuffer(q.FRAMEBUFFER,null),q.enable(q.SCISSOR_TEST),B.scale.on(p.RESIZE,this.onResize,this),this.resize(H,$)},setExtensions:function(){var B=this.gl,k=B.getSupportedExtensions();this.supportedExtensions=k;var N="ANGLE_instanced_arrays";this.instancedArraysExtension=k.indexOf(N)>-1?B.getExtension(N):null;var H="OES_vertex_array_object";this.vaoExtension=k.indexOf(H)>-1?B.getExtension(H):null},setContextHandlers:function(B,k){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof B=="function"?this.contextLostHandler=B.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof k=="function"?this.contextRestoredHandler=k.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(B){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(o.LOSE_WEBGL,this),B.preventDefault()},dispatchContextRestored:function(B){var k=this.gl;if(k.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(h.BlendModes.NORMAL),k.disable(k.BLEND),k.disable(k.DEPTH_TEST),k.enable(k.CULL_FACE),this.compression=this.getCompressedTextures();var N=function(H){H.createResource()};g(this.glTextureWrappers,N),g(this.glBufferWrappers,N),g(this.glFramebufferWrappers,N),g(this.glProgramWrappers,N),g(this.glAttribLocationWrappers,N),g(this.glUniformLocationWrappers,N),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(o.RESTORE_WEBGL,this),B.preventDefault()},createTemporaryTextures:function(){for(var B=this.gl,k=0;k<this.maxTextures;k++){var N=B.createTexture();B.activeTexture(B.TEXTURE0+k),B.bindTexture(B.TEXTURE_2D,N),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,1,1,0,B.RGBA,B.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(k)}},captureFrame:function(B,k){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(B,k,N){},stopCapture:function(){},onCapture:function(B){},onResize:function(B,k){(k.width!==this.width||k.height!==this.height)&&this.resize(k.width,k.height)},beginCapture:function(B,k){B===void 0&&(B=this.width),k===void 0&&(k=this.height),this.renderTarget.bind(!0,B,k),this.setProjectionMatrix(B,k)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(B,k){var N=this.gl;return this.width=B,this.height=k,this.setProjectionMatrix(B,k),N.viewport(0,0,B,k),this.drawingBufferHeight=N.drawingBufferHeight,N.scissor(0,N.drawingBufferHeight-k,B,k),this.defaultScissor[2]=B,this.defaultScissor[3]=k,this.emit(o.RESIZE,B,k),this},getCompressedTextures:function(){var B="WEBGL_compressed_texture_",k="WEBKIT_"+B,N="EXT_texture_compression_",H=function(J,q){var Y=J.getExtension(B+q)||J.getExtension(k+q)||J.getExtension(N+q);if(Y){var K={};for(var V in Y)K[Y[V]]=V;return K}},$=this.gl;return{ETC:H($,"etc"),ETC1:H($,"etc1"),ATC:H($,"atc"),ASTC:H($,"astc"),BPTC:H($,"bptc"),RGTC:H($,"rgtc"),PVRTC:H($,"pvrtc"),S3TC:H($,"s3tc"),S3TCSRGB:H($,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(B,k){var N=this.compression[B.toUpperCase()];if(k in N)return N[k]},supportsCompressedTexture:function(B,k){var N=this.compression[B.toUpperCase()];return N?k?k in N:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(B,k){return(B!==this.projectionWidth||k!==this.projectionHeight)&&(this.projectionWidth=B,this.projectionHeight=k,this.projectionMatrix.ortho(0,B,k,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(B){return this.supportedExtensions?this.supportedExtensions.indexOf(B):!1},getExtension:function(B){return this.hasExtension(B)?(B in this.extensions||(this.extensions[B]=this.gl.getExtension(B)),this.extensions[B]):null},flush:function(){this.pipelines.flush()},pushScissor:function(B,k,N,H,$){$===void 0&&($=this.drawingBufferHeight);var J=this.scissorStack,q=[B,k,N,H];return J.push(q),this.setScissor(B,k,N,H,$),this.currentScissor=q,q},setScissor:function(B,k,N,H,$){$===void 0&&($=this.drawingBufferHeight);var J=this.gl,q=this.currentScissor,Y=N>0&&H>0;if(q&&Y){var K=q[0],V=q[1],U=q[2],Z=q[3];Y=K!==B||V!==k||U!==N||Z!==H}Y&&(this.flush(),J.scissor(B,$-k-H,N,H))},resetScissor:function(){var B=this.gl;B.enable(B.SCISSOR_TEST);var k=this.currentScissor;if(k){var N=k[0],H=k[1],$=k[2],J=k[3];$>0&&J>0&&B.scissor(N,this.drawingBufferHeight-H-J,$,J)}},popScissor:function(){var B=this.scissorStack;B.pop();var k=B[B.length-1];k&&this.setScissor(k[0],k[1],k[2],k[3]),this.currentScissor=k},hasActiveStencilMask:function(){var B=this.currentMask.mask,k=this.currentCameraMask.mask;return B&&B.isStencil||k&&k.isStencil},resetViewport:function(){var B=this.gl;B.viewport(0,0,this.width,this.height),this.drawingBufferHeight=B.drawingBufferHeight},setBlendMode:function(B,k){k===void 0&&(k=!1);var N=this.gl,H=this.blendModes[B];return k||B!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==B?(this.flush(),N.enable(N.BLEND),N.blendEquation(H.equation),H.func.length>2?N.blendFuncSeparate(H.func[0],H.func[1],H.func[2],H.func[3]):N.blendFunc(H.func[0],H.func[1]),this.currentBlendMode=B,!0):!1},addBlendMode:function(B,k){var N=this.blendModes.push({func:B,equation:k});return N-1},updateBlendMode:function(B,k,N){return this.blendModes[B]&&(this.blendModes[B].func=k,N&&(this.blendModes[B].equation=N)),this},removeBlendMode:function(B){return B>17&&this.blendModes[B]&&this.blendModes.splice(B,1),this},pushFramebuffer:function(B,k,N,H,$){return B===this.currentFramebuffer?this:(this.fboStack.push(B),this.setFramebuffer(B,k,N,H,$))},setFramebuffer:function(B,k,N,H,$){if(k===void 0&&(k=!1),N===void 0&&(N=!0),H===void 0&&(H=null),$===void 0&&($=!1),B===this.currentFramebuffer)return this;var J=this.gl,q=this.width,Y=this.height;return B&&B.renderTexture&&N?(q=B.renderTexture.width,Y=B.renderTexture.height):this.flush(),B?J.bindFramebuffer(J.FRAMEBUFFER,B.webGLFramebuffer):J.bindFramebuffer(J.FRAMEBUFFER,null),N&&J.viewport(0,0,q,Y),H&&J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,H.webGLTexture,0),$&&(J.clearColor(0,0,0,0),J.clear(J.COLOR_BUFFER_BIT)),k&&(B?(this.drawingBufferHeight=Y,this.pushScissor(0,0,q,Y)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=B,this},popFramebuffer:function(B,k){B===void 0&&(B=!1),k===void 0&&(k=!0);var N=this.fboStack;N.pop();var H=N[N.length-1];return H||(H=null),this.setFramebuffer(H,B,k),H},restoreFramebuffer:function(B,k){B===void 0&&(B=!1),k===void 0&&(k=!0);var N=this.fboStack,H=N[N.length-1];H||(H=null),this.currentFramebuffer=null,this.setFramebuffer(H,B,k)},setProgram:function(B){return B!==this.currentProgram?(this.flush(),this.gl.useProgram(B.webGLProgram),this.currentProgram=B,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(B,k,N,H,$){$===void 0&&($=!1);var J=this.gl,q=J.NEAREST,Y=J.NEAREST,K=J.CLAMP_TO_EDGE,V=null;k=B?B.width:k,N=B?B.height:N;var U=d(k,N);if(U&&!$&&(K=J.REPEAT),H===h.ScaleModes.LINEAR&&this.config.antialias){var Z=B&&B.compressed,et=!Z&&U||Z&&B.mipmaps.length>1;q=this.mipmapFilter&&et?this.mipmapFilter:J.LINEAR,Y=J.LINEAR}return!B&&typeof k=="number"&&typeof N=="number"?V=this.createTexture2D(0,q,Y,K,K,J.RGBA,null,k,N):V=this.createTexture2D(0,q,Y,K,K,J.RGBA,B),V},createTexture2D:function(B,k,N,H,$,J,q,Y,K,V,U,Z){typeof Y!="number"&&(Y=q?q.width:1),typeof K!="number"&&(K=q?q.height:1);var et=new A(this.gl,B,k,N,H,$,J,q,Y,K,V,U,Z);return this.glTextureWrappers.push(et),et},createFramebuffer:function(B,k,N,H){this.currentFramebuffer=null;var $=new b(this.gl,B,k,N,H);return this.glFramebufferWrappers.push($),$},beginBitmapMask:function(B,k){var N=this.gl;N&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==B&&(this.currentMask.mask=B,this.currentMask.camera=k))},drawBitmapMask:function(B,k,N){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),B.renderWebGL(this,B,k),this.maskSource.unbind(!0),this.maskTarget.unbind();var H=this.gl,$=this.getCurrentStencilMask();$?(H.enable(H.STENCIL_TEST),$.mask.applyStencil(this,$.camera,!0)):this.currentMask.mask=null,this.pipelines.set(N),H.activeTexture(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,this.maskTarget.texture.webGLTexture),H.activeTexture(H.TEXTURE1),H.bindTexture(H.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(B,k){var N=new w(this.gl,B,k);return this.glProgramWrappers.push(N),N},createVertexBuffer:function(B,k){var N=this.gl,H=new P(N,B,N.ARRAY_BUFFER,k);return this.glBufferWrappers.push(H),H},createAttribLocation:function(B,k){var N=new O(this.gl,B,k);return this.glAttribLocationWrappers.push(N),N},createUniformLocation:function(B,k){var N=new I(this.gl,B,k);return this.glUniformLocationWrappers.push(N),N},createIndexBuffer:function(B,k){var N=this.gl,H=new P(N,B,N.ELEMENT_ARRAY_BUFFER,k);return this.glBufferWrappers.push(H),H},deleteTexture:function(B){if(B)return y(this.glTextureWrappers,B),B.destroy(),this},deleteFramebuffer:function(B){return B?(y(this.fboStack,B),y(this.glFramebufferWrappers,B),B.destroy(),this):this},deleteProgram:function(B){return B&&(y(this.glProgramWrappers,B),B.destroy()),this},deleteAttribLocation:function(B){return B&&(y(this.glAttribLocationWrappers,B),B.destroy()),this},deleteUniformLocation:function(B){return B&&(y(this.glUniformLocationWrappers,B),B.destroy()),this},deleteBuffer:function(B){return B?(y(this.glBufferWrappers,B),B.destroy(),this):this},preRenderCamera:function(B){var k=B.x,N=B.y,H=B.width,$=B.height,J=B.backgroundColor;if(B.emit(u.PRE_RENDER,B),this.pipelines.preBatchCamera(B),this.pushScissor(k,N,H,$),B.mask&&(this.currentCameraMask.mask=B.mask,this.currentCameraMask.camera=B._maskCamera,B.mask.preRenderWebGL(this,B,B._maskCamera)),J.alphaGL>0){var q=this.pipelines.setMulti();q.drawFillRect(k,N,H,$,T.getTintFromFloats(J.blueGL,J.greenGL,J.redGL,1),J.alphaGL)}},getCurrentStencilMask:function(){var B=null,k=this.maskStack,N=this.currentCameraMask;return k.length>0?B=k[k.length-1]:N.mask&&N.mask.isStencil&&(B=N),B},postRenderCamera:function(B){var k=B.flashEffect,N=B.fadeEffect;if(k.isRunning||N.isRunning||N.isComplete){var H=this.pipelines.setMulti();k.postRenderWebGL(H,T.getTintFromFloats),N.postRenderWebGL(H,T.getTintFromFloats)}B.dirty=!1,this.popScissor(),B.mask&&(this.currentCameraMask.mask=null,B.mask.postRenderWebGL(this,B._maskCamera)),this.pipelines.postBatchCamera(B),B.emit(u.POST_RENDER,B)},preRender:function(){if(!this.contextLost){var B=this.gl;if(B.bindFramebuffer(B.FRAMEBUFFER,null),this.emit(o.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var k=this.config.backgroundColor;B.clearColor(k.redGL,k.greenGL,k.blueGL,k.alphaGL),B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT|B.STENCIL_BUFFER_BIT)}B.enable(B.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&B.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(o.PRE_RENDER)}},render:function(B,k,N){if(!this.contextLost){var H=k.length;if(this.emit(o.RENDER,B,N),this.preRenderCamera(N),H===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(N);return}this.currentType="";for(var $=this.currentMask,J=0;J<H;J++){this.finalType=J===H-1;var q=k[J],Y=q.mask;$=this.currentMask,$.mask&&$.mask!==Y&&$.mask.postRenderWebGL(this,$.camera),Y&&$.mask!==Y&&Y.preRenderWebGL(this,q,N),q.blendMode!==this.currentBlendMode&&this.setBlendMode(q.blendMode);var K=q.type;K!==this.currentType&&(this.newType=!0,this.currentType=K),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=k[J+1].type===this.currentType,q.renderWebGL(this,q,N),this.newType=!1}$=this.currentMask,$.mask&&$.mask.postRenderWebGL(this,$.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(N)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(o.POST_RENDER);var B=this.snapshotState;B.callback&&(E(this.gl,B),B.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var B=this.gl,k=this.getCurrentStencilMask();if(k){var N=k.mask;B.enable(B.STENCIL_TEST),N.invertAlpha?B.stencilFunc(B.NOTEQUAL,N.level,255):B.stencilFunc(B.EQUAL,N.level,255)}},snapshot:function(B,k,N){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,B,k,N)},snapshotArea:function(B,k,N,H,$,J,q){var Y=this.snapshotState;return Y.callback=$,Y.type=J,Y.encoder=q,Y.getPixel=!1,Y.x=B,Y.y=k,Y.width=N,Y.height=H,this},snapshotPixel:function(B,k,N){return this.snapshotArea(B,k,1,1,N),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(B,k,N,H,$,J,q,Y,K,V,U){$===void 0&&($=!1),J===void 0&&(J=0),q===void 0&&(q=0),Y===void 0&&(Y=k),K===void 0&&(K=N),V==="pixel"&&($=!0,V="image/png");var Z=this.currentFramebuffer;this.snapshotArea(J,q,Y,K,H,V,U);var et=this.snapshotState;return et.getPixel=$,et.isFramebuffer=!0,et.bufferWidth=k,et.bufferHeight=N,et.width=Math.min(et.width,k),et.height=Math.min(et.height,N),this.setFramebuffer(B),E(this.gl,et),this.setFramebuffer(Z),et.callback=null,et.isFramebuffer=!1,this},canvasToTexture:function(B,k,N,H){N===void 0&&(N=!1),H===void 0&&(H=!1);var $=this.gl,J=$.NEAREST,q=$.NEAREST,Y=B.width,K=B.height,V=$.CLAMP_TO_EDGE,U=d(Y,K);return!N&&U&&(V=$.REPEAT),this.config.antialias&&(J=U&&this.mipmapFilter?this.mipmapFilter:$.LINEAR,q=$.LINEAR),k?(k.update(B,Y,K,H,V,V,J,q,k.format),k):this.createTexture2D(0,J,q,V,V,$.RGBA,B,Y,K,!0,!1,H)},createCanvasTexture:function(B,k,N){return k===void 0&&(k=!1),N===void 0&&(N=!1),this.canvasToTexture(B,null,k,N)},updateCanvasTexture:function(B,k,N,H){return N===void 0&&(N=!1),H===void 0&&(H=!1),this.canvasToTexture(B,k,H,N)},videoToTexture:function(B,k,N,H){N===void 0&&(N=!1),H===void 0&&(H=!1);var $=this.gl,J=$.NEAREST,q=$.NEAREST,Y=B.videoWidth,K=B.videoHeight,V=$.CLAMP_TO_EDGE,U=d(Y,K);return!N&&U&&(V=$.REPEAT),this.config.antialias&&(J=U&&this.mipmapFilter?this.mipmapFilter:$.LINEAR,q=$.LINEAR),k?(k.update(B,Y,K,H,V,V,J,q,k.format),k):this.createTexture2D(0,J,q,V,V,$.RGBA,B,Y,K,!0,!0,H)},createVideoTexture:function(B,k,N){return k===void 0&&(k=!1),N===void 0&&(N=!1),this.videoToTexture(B,null,k,N)},updateVideoTexture:function(B,k,N,H){return N===void 0&&(N=!1),H===void 0&&(H=!1),this.videoToTexture(B,k,H,N)},createUint8ArrayTexture:function(B,k,N){var H=this.gl,$=H.NEAREST,J=H.NEAREST,q=H.CLAMP_TO_EDGE,Y=d(k,N);return Y&&(q=H.REPEAT),this.createTexture2D(0,$,J,q,q,H.RGBA,B,k,N)},setTextureFilter:function(B,k){var N=this.gl,H=k===0?N.LINEAR:N.NEAREST;N.activeTexture(N.TEXTURE0);var $=N.getParameter(N.TEXTURE_BINDING_2D);return N.bindTexture(N.TEXTURE_2D,B.webGLTexture),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,H),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,H),B.minFilter=H,B.magFilter=H,$&&N.bindTexture(N.TEXTURE_2D,$),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var B=function(k){k.destroy()};g(this.glAttribLocationWrappers,B),g(this.glBufferWrappers,B),g(this.glFramebufferWrappers,B),g(this.glProgramWrappers,B),g(this.glTextureWrappers,B),g(this.glUniformLocationWrappers,B),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});C.exports=D}),38683:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95428),u=s(95540),l=s(14500),h=new g({initialize:function(o,d,a,f,v){this.pipeline=o,this.name=d,this.renderer=o.renderer,this.gl=this.renderer.gl,this.fragSrc=f,this.vertSrc=a,this.program=this.renderer.createProgram(a,f),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(v),this.createUniforms()},createAttributes:function(r){var o=0,d=0,a=[];this.vertexComponentCount=0;for(var f=0;f<r.length;f++){var v=r[f],c=v.name,p=u(v,"size",1),m=u(v,"type",l.FLOAT),T=m.enum,E=m.size,P=!!v.normalized;a.push({name:c,size:p,type:T,normalized:P,offset:d,enabled:!1,location:-1}),E===4?o+=p:o++,d+=p*E}this.vertexSize=d,this.vertexComponentCount=o,this.attributes=a},bind:function(r,o){return r===void 0&&(r=!1),o===void 0&&(o=!1),o&&this.pipeline.flush(),this.renderer.setProgram(this.program),r&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(r){r===void 0&&(r=!1);for(var o=this.gl,d=this.renderer,a=this.vertexSize,f=this.attributes,v=this.program,c=0;c<f.length;c++){var p=f[c],m=p.size,T=p.type,E=p.offset,P=p.enabled,w=p.location,A=!!p.normalized;if(r){w!==-1&&d.deleteAttribLocation(w);var b=this.renderer.createAttribLocation(v,p.name);b.webGLAttribLocation>=0?(o.enableVertexAttribArray(b.webGLAttribLocation),o.vertexAttribPointer(b.webGLAttribLocation,m,T,A,a,E),p.enabled=!0,p.location=b):b.webGLAttribLocation!==-1&&o.disableVertexAttribArray(b.webGLAttribLocation)}else P?o.vertexAttribPointer(w.webGLAttribLocation,m,T,A,a,E):!P&&w!==-1&&w.webGLAttribLocation>-1&&(o.disableVertexAttribArray(w.webGLAttribLocation),p.location=-1)}return this},createUniforms:function(){var r=this.gl,o=this.program,d=this.uniforms,a,f,v,c=r.getProgramParameter(o.webGLProgram,r.ACTIVE_UNIFORMS);for(a=0;a<c;a++){var p=r.getActiveUniform(o.webGLProgram,a);if(p){f=p.name,v=this.renderer.createUniformLocation(o,f),v!==null&&(d[f]={name:f,location:v,setter:null,value1:null,value2:null,value3:null,value4:null});var m=f.indexOf("[");m>0&&(f=f.substr(0,m),d.hasOwnProperty(f)||(v=this.renderer.createUniformLocation(o,f),v!==null&&(d[f]={name:f,location:v,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var r=this.gl;this.renderer.setProgram(this.program);for(var o in this.uniforms){var d=this.uniforms[o];d.setter&&d.setter.call(r,d.location.webGLUniformLocation,d.value1,d.value2,d.value3,d.value4)}},hasUniform:function(r){return this.uniforms.hasOwnProperty(r)},resetUniform:function(r){var o=this.uniforms[r];return o&&(o.value1=null,o.value2=null,o.value3=null,o.value4=null),this},setUniform1:function(r,o,d,a){var f=this.uniforms[o];return f?((a||f.value1!==d)&&(f.setter||(f.setter=r),f.value1=d,this.renderer.setProgram(this.program),r.call(this.gl,f.location.webGLUniformLocation,d),this.pipeline.currentShader=this),this):this},setUniform2:function(r,o,d,a,f){var v=this.uniforms[o];return v?((f||v.value1!==d||v.value2!==a)&&(v.setter||(v.setter=r),v.value1=d,v.value2=a,this.renderer.setProgram(this.program),r.call(this.gl,v.location.webGLUniformLocation,d,a),this.pipeline.currentShader=this),this):this},setUniform3:function(r,o,d,a,f,v){var c=this.uniforms[o];return c?((v||c.value1!==d||c.value2!==a||c.value3!==f)&&(c.setter||(c.setter=r),c.value1=d,c.value2=a,c.value3=f,this.renderer.setProgram(this.program),r.call(this.gl,c.location.webGLUniformLocation,d,a,f),this.pipeline.currentShader=this),this):this},setUniform4:function(r,o,d,a,f,v,c){var p=this.uniforms[o];return p?((c||p.value1!==d||p.value2!==a||p.value3!==f||p.value4!==v)&&(p.setter||(p.setter=r),p.value1=d,p.value2=a,p.value3=f,p.value4=v,this.renderer.setProgram(this.program),r.call(this.gl,p.location.webGLUniformLocation,d,a,f,v),this.pipeline.currentShader=this),this):this},setBoolean:function(r,o){return this.setUniform1(this.gl.uniform1i,r,Number(o))},set1f:function(r,o){return this.setUniform1(this.gl.uniform1f,r,o)},set2f:function(r,o,d){return this.setUniform2(this.gl.uniform2f,r,o,d)},set3f:function(r,o,d,a){return this.setUniform3(this.gl.uniform3f,r,o,d,a)},set4f:function(r,o,d,a,f){return this.setUniform4(this.gl.uniform4f,r,o,d,a,f)},set1fv:function(r,o){return this.setUniform1(this.gl.uniform1fv,r,o,!0)},set2fv:function(r,o){return this.setUniform1(this.gl.uniform2fv,r,o,!0)},set3fv:function(r,o){return this.setUniform1(this.gl.uniform3fv,r,o,!0)},set4fv:function(r,o){return this.setUniform1(this.gl.uniform4fv,r,o,!0)},set1iv:function(r,o){return this.setUniform1(this.gl.uniform1iv,r,o,!0)},set2iv:function(r,o){return this.setUniform1(this.gl.uniform2iv,r,o,!0)},set3iv:function(r,o){return this.setUniform1(this.gl.uniform3iv,r,o,!0)},set4iv:function(r,o){return this.setUniform1(this.gl.uniform4iv,r,o,!0)},set1i:function(r,o){return this.setUniform1(this.gl.uniform1i,r,o)},set2i:function(r,o,d){return this.setUniform2(this.gl.uniform2i,r,o,d)},set3i:function(r,o,d,a){return this.setUniform3(this.gl.uniform3i,r,o,d,a)},set4i:function(r,o,d,a,f){return this.setUniform4(this.gl.uniform4i,r,o,d,a,f)},setMatrix2fv:function(r,o,d){return this.setUniform2(this.gl.uniformMatrix2fv,r,o,d,!0)},setMatrix3fv:function(r,o,d){return this.setUniform2(this.gl.uniformMatrix3fv,r,o,d,!0)},setMatrix4fv:function(r,o,d){return this.setUniform2(this.gl.uniformMatrix4fv,r,o,d,!0)},createProgram:function(r,o){return r===void 0&&(r=this.vertSrc),o===void 0&&(o=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=r,this.fragSrc=o,this.program=this.renderer.createProgram(r,o),this.createUniforms(),this.rebind()},destroy:function(){var r=this.renderer;y(this.uniforms,function(o){r.deleteUniformLocation(o.location)}),this.uniforms=null,y(this.attributes,function(o){r.deleteAttribLocation(o.location)}),this.attributes=null,r.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});C.exports=h}),14500:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};C.exports=R}),4159:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(14500),y=s(79291),u={PipelineManager:s(7530),Pipelines:s(96615),RenderTarget:s(32302),Utils:s(70554),WebGLPipeline:s(29100),WebGLRenderer:s(74797),WebGLShader:s(38683),Wrappers:s(9503)};u=y(!1,u,g),C.exports=u}),31302:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=s(78908),l=s(85191),h=s(14500),r=s(29100),o=new g({Extends:r,initialize:function(a){a.fragShader=y(a,"fragShader",u),a.vertShader=y(a,"vertShader",l),a.batchSize=y(a,"batchSize",1),a.vertices=y(a,"vertices",[-1,1,-1,-7,7,1]),a.attributes=y(a,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),r.call(this,a)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,a){r.prototype.resize.call(this,d,a),this.set2f("uResolution",d,a)},beginMask:function(d,a,f){this.renderer.beginBitmapMask(d,f)},endMask:function(d,a,f){var v=this.gl,c=this.renderer,p=d.bitmapMask;p&&v&&(c.drawBitmapMask(p,a,this),f&&this.set2f("uResolution",f.width,f.height),this.set1i("uInvertMaskAlpha",d.invertAlpha),v.drawArrays(this.topology,0,3),f&&this.set2f("uResolution",this.width,this.height),v.bindTexture(v.TEXTURE_2D,null))}});C.exports=o}),92651:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(58918),u=s(14811),l=s(95540),h=s(43558),r=s(89350),o=s(70554),d=new g({Extends:h,initialize:function(f){f.shaders=[o.setGlowQuality(r.FXGlowFrag,f.game),r.FXShadowFrag,r.FXPixelateFrag,r.FXVignetteFrag,r.FXShineFrag,r.FXBlurLowFrag,r.FXBlurMedFrag,r.FXBlurHighFrag,r.FXGradientFrag,r.FXBloomFrag,r.ColorMatrixFrag,r.FXCircleFrag,r.FXBarrelFrag,r.FXDisplacementFrag,r.FXWipeFrag,r.FXBokehFrag],h.call(this,f);var v=this.game;this.glow=new y.Glow(v),this.shadow=new y.Shadow(v),this.pixelate=new y.Pixelate(v),this.vignette=new y.Vignette(v),this.shine=new y.Shine(v),this.gradient=new y.Gradient(v),this.circle=new y.Circle(v),this.barrel=new y.Barrel(v),this.wipe=new y.Wipe(v),this.bokeh=new y.Bokeh(v);var c=[];c[u.GLOW]=this.onGlow,c[u.SHADOW]=this.onShadow,c[u.PIXELATE]=this.onPixelate,c[u.VIGNETTE]=this.onVignette,c[u.SHINE]=this.onShine,c[u.BLUR]=this.onBlur,c[u.GRADIENT]=this.onGradient,c[u.BLOOM]=this.onBloom,c[u.COLOR_MATRIX]=this.onColorMatrix,c[u.CIRCLE]=this.onCircle,c[u.BARREL]=this.onBarrel,c[u.DISPLACEMENT]=this.onDisplacement,c[u.WIPE]=this.onWipe,c[u.BOKEH]=this.onBokeh,this.fxHandlers=c,this.source,this.target,this.swap},onDraw:function(a,f,v){this.source=a,this.target=f,this.swap=v;var c=a.width,p=a.height,m=this.tempSprite,T=this.fxHandlers;if(m&&m.preFX)for(var E=m.preFX.list,P=0;P<E.length;P++){var w=E[P];w.active&&T[w.type].call(this,w,c,p)}this.drawToGame(this.source)},runDraw:function(){var a=this.source,f=this.target;this.copy(a,f),this.source=f,this.target=a},onGlow:function(a,f,v){var c=this.shaders[u.GLOW];this.setShader(c),this.glow.onPreRender(a,c,f,v),this.runDraw()},onShadow:function(a){var f=this.shaders[u.SHADOW];this.setShader(f),this.shadow.onPreRender(a,f),this.runDraw()},onPixelate:function(a,f,v){var c=this.shaders[u.PIXELATE];this.setShader(c),this.pixelate.onPreRender(a,c,f,v),this.runDraw()},onVignette:function(a){var f=this.shaders[u.VIGNETTE];this.setShader(f),this.vignette.onPreRender(a,f),this.runDraw()},onShine:function(a,f,v){var c=this.shaders[u.SHINE];this.setShader(c),this.shine.onPreRender(a,c,f,v),this.runDraw()},onBlur:function(a,f,v){var c=l(a,"quality"),p=this.shaders[u.BLUR+c];this.setShader(p),this.set1i("uMainSampler",0),this.set2f("resolution",f,v),this.set1f("strength",l(a,"strength")),this.set3fv("color",l(a,"glcolor"));for(var m=l(a,"x"),T=l(a,"y"),E=l(a,"steps"),P=0;P<E;P++)this.set2f("offset",m,0),this.runDraw(),this.set2f("offset",0,T),this.runDraw()},onGradient:function(a){var f=this.shaders[u.GRADIENT];this.setShader(f),this.gradient.onPreRender(a,f),this.runDraw()},onBloom:function(a,f,v){var c=this.shaders[u.BLOOM];this.copySprite(this.source,this.swap),this.setShader(c),this.set1i("uMainSampler",0),this.set1f("strength",l(a,"blurStrength")),this.set3fv("color",l(a,"glcolor"));for(var p=2/f*l(a,"offsetX"),m=2/v*l(a,"offsetY"),T=l(a,"steps"),E=0;E<T;E++)this.set2f("offset",p,0),this.runDraw(),this.set2f("offset",0,m),this.runDraw();this.blendFrames(this.swap,this.source,this.target,l(a,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(a){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",a.getData()),this.set1f("uAlpha",a.alpha),this.runDraw()},onCircle:function(a,f,v){var c=this.shaders[u.CIRCLE];this.setShader(c),this.circle.onPreRender(a,c,f,v),this.runDraw()},onBarrel:function(a){var f=this.shaders[u.BARREL];this.setShader(f),this.barrel.onPreRender(a,f),this.runDraw()},onDisplacement:function(a){this.setShader(this.shaders[u.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",a.x,a.y),this.bindTexture(a.glTexture,1),this.runDraw()},onWipe:function(a){var f=this.shaders[u.WIPE];this.setShader(f),this.wipe.onPreRender(a,f),this.runDraw()},onBokeh:function(a,f,v){var c=this.shaders[u.BOKEH];this.setShader(c),this.bokeh.onPreRender(a,c,f,v),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,h.prototype.destroy.call(this),this}});C.exports=d}),96569:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=s(31063),l=s(57516),h=s(61340),r=s(26099),o=s(29100),d=new g({Extends:l,initialize:function(f){var v=y(f,"fragShader",u);f.fragShader=v.replace("%LIGHT_COUNT%",f.game.renderer.config.maxLights),l.call(this,f),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new r,this._tempMatrix=new h,this._tempMatrix2=new h},boot:function(){o.prototype.boot.call(this)},onRender:function(a,f){var v=a.sys.lights;if(this.lightsActive=!1,!(!v||!v.active)){var c=v.getLights(f),p=c.length;this.lightsActive=!0;var m,T=this.renderer,E=T.height,P=f.matrix,w=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",f.x,f.y,f.rotation,f.zoom),this.set3f("uAmbientLightColor",v.ambientColor.r,v.ambientColor.g,v.ambientColor.b),this.set1i("uLightCount",p),m=0;m<p;m++){var A=c[m].light,b=A.color,O="uLights["+m+"].";P.transformPoint(A.x,A.y,w),this.set2f(O+"position",w.x-f.scrollX*A.scrollFactorX*f.zoom,E-(w.y-f.scrollY*A.scrollFactorY*f.zoom)),this.set3f(O+"color",b.r,b.g,b.b),this.set1f(O+"intensity",A.intensity),this.set1f(O+"radius",A.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(a){if(a!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var f=this.inverseRotationMatrix;if(a){var v=-a,c=Math.cos(v),p=Math.sin(v);f[1]=p,f[3]=-p,f[0]=f[4]=c}else f[0]=f[4]=1,f[1]=f[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,f),this.currentNormalMapRotation=a}},setTexture2D:function(a,f){var v=this.renderer;a===void 0&&(a=v.whiteTexture);var c=this.getNormalMap(f);this.isNewNormalMap(a,c)&&(this.flush(),this.createBatch(a),this.addTextureToBatch(c),this.currentNormalMap=c);var p=0;if(f&&f.parentContainer){var m=f.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);p=m.rotationNormalized}else f&&(p=f.rotation);return this.currentBatch===null&&(this.createBatch(a),this.addTextureToBatch(c)),this.setNormalMapRotation(p),0},setGameObject:function(a,f){f===void 0&&(f=a.frame);var v=f.glTexture,c=this.getNormalMap(a);if(this.isNewNormalMap(v,c)&&(this.flush(),this.createBatch(v),this.addTextureToBatch(c),this.currentNormalMap=c),a.parentContainer){var p=a.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(p.rotationNormalized)}else this.setNormalMapRotation(a.rotation);return this.currentBatch===null&&(this.createBatch(v),this.addTextureToBatch(c)),0},isNewNormalMap:function(a,f){return this.currentTexture!==a||this.currentNormalMap!==f},getNormalMap:function(a){var f;if(a)a.displayTexture?f=a.displayTexture.dataSource[a.displayFrame.sourceIndex]:a.texture?f=a.texture.dataSource[a.frame.sourceIndex]:a.tileset&&(Array.isArray(a.tileset)?f=a.tileset[0].image.dataSource[0]:f=a.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return f?f.glTexture:this.renderer.normalTexture},batchSprite:function(a,f,v){this.lightsActive&&l.prototype.batchSprite.call(this,a,f,v)},batchTexture:function(a,f,v,c,p,m,T,E,P,w,A,b,O,I,D,B,k,N,H,$,J,q,Y,K,V,U,Z,et,st,rt,at,ut){this.lightsActive&&l.prototype.batchTexture.call(this,a,f,v,c,p,m,T,E,P,w,A,b,O,I,D,B,k,N,H,$,J,q,Y,K,V,U,Z,et,st,rt,at,ut)},batchTextureFrame:function(a,f,v,c,p,m,T){this.lightsActive&&l.prototype.batchTextureFrame.call(this,a,f,v,c,p,m,T)}});C.exports=d}),56527:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=s(57516),l=s(45561),h=s(60722),r=s(14500),o=s(29100),d=new g({Extends:u,initialize:function(f){f.fragShader=y(f,"fragShader",l),f.vertShader=y(f,"vertShader",h),f.attributes=y(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),f.forceZero=!0,f.resizeUniform="uResolution",u.call(this,f)},boot:function(){o.prototype.boot.call(this);var a=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",a.width,a.height)}});C.exports=d}),57516:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(94811),u=s(95540),l=s(98840),h=s(44667),r=s(61340),o=s(70554),d=s(14500),a=s(29100),f=new g({Extends:a,initialize:function(c){var p=c.game.renderer,m=u(c,"fragShader",l);c.fragShader=o.parseFragmentShaderMaxTextures(m,p.maxTextures),c.vertShader=u(c,"vertShader",h),c.attributes=u(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),c.resizeUniform="uResolution",a.call(this,c),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){a.prototype.boot.call(this);var v=this.renderer;this.set1iv("uMainSampler",v.textureIndexes),this.set2f("uResolution",v.width,v.height)},batchSprite:function(v,c,p){this.manager.set(this,v);var m=this._tempMatrix1,T=this._tempMatrix2,E=this._tempMatrix3,P=v.frame,w=P.glTexture,A=P.u0,b=P.v0,O=P.u1,I=P.v1,D=P.x,B=P.y,k=P.cutWidth,N=P.cutHeight,H=P.customPivot,$=v.displayOriginX,J=v.displayOriginY,q=-$+D,Y=-J+B;if(v.isCropped){var K=v._crop;(K.flipX!==v.flipX||K.flipY!==v.flipY)&&P.updateCropUVs(K,v.flipX,v.flipY),A=K.u0,b=K.v0,O=K.u1,I=K.v1,k=K.width,N=K.height,D=K.x,B=K.y,q=-$+D,Y=-J+B}var V=1,U=1;v.flipX&&(H||(q+=-P.realWidth+$*2),V=-1),v.flipY&&(H||(Y+=-P.realHeight+J*2),U=-1);var Z=v.x,et=v.y;c.roundPixels&&(Z=Math.floor(Z),et=Math.floor(et)),T.applyITRS(Z,et,v.rotation,v.scaleX*V,v.scaleY*U),m.copyFrom(c.matrix),p?(m.multiplyWithOffset(p,-c.scrollX*v.scrollFactorX,-c.scrollY*v.scrollFactorY),T.e=Z,T.f=et):(T.e-=c.scrollX*v.scrollFactorX,T.f-=c.scrollY*v.scrollFactorY),m.multiply(T,E);var st=E.setQuad(q,Y,q+k,Y+N,c.renderRoundPixels),rt=o.getTintAppendFloatAlpha,at=c.alpha,ut=rt(v.tintTopLeft,at*v._alphaTL),vt=rt(v.tintTopRight,at*v._alphaTR),pt=rt(v.tintBottomLeft,at*v._alphaBL),gt=rt(v.tintBottomRight,at*v._alphaBR);this.shouldFlush(6)&&this.flush();var yt=this.setGameObject(v,P);this.manager.preBatch(v),this.batchQuad(v,st[0],st[1],st[2],st[3],st[4],st[5],st[6],st[7],A,b,O,I,ut,vt,pt,gt,v.tintFill,w,yt),this.manager.postBatch(v)},batchTexture:function(v,c,p,m,T,E,P,w,A,b,O,I,D,B,k,N,H,$,J,q,Y,K,V,U,Z,et,st,rt,at,ut,vt,pt,gt){gt===void 0&&(gt=!1),this.manager.set(this,v);var yt=this._tempMatrix1,mt=this._tempMatrix2,Tt=this._tempMatrix3,At=$/p+st,Rt=J/m+rt,Lt=($+q)/p+st,Ct=(J+Y)/m+rt,Et=P,Mt=w,zt=-N,Zt=-H;if(v.isCropped){var oe=v._crop,Qt=oe.width,jt=oe.height;Et=Qt,Mt=jt,P=Qt,w=jt,$=oe.x,J=oe.y;var fe=$,Le=J;I&&(fe=q-oe.x-Qt),D&&(Le=Y-oe.y-jt),At=fe/p+st,Rt=Le/m+rt,Lt=(fe+Qt)/p+st,Ct=(Le+jt)/m+rt,zt=-N+$,Zt=-H+J}D=D^(!vt&&c.isRenderTexture?1:0),I&&(Et*=-1,zt+=P),D&&(Mt*=-1,Zt+=w),at.roundPixels&&(T=Math.floor(T),E=Math.floor(E)),mt.applyITRS(T,E,O,A,b),yt.copyFrom(at.matrix),ut?(yt.multiplyWithOffset(ut,-at.scrollX*B,-at.scrollY*k),mt.e=T,mt.f=E):(mt.e-=at.scrollX*B,mt.f-=at.scrollY*k),yt.multiply(mt,Tt);var $t=Tt.setQuad(zt,Zt,zt+Et,Zt+Mt,at.renderRoundPixels);pt==null&&(pt=this.setTexture2D(c)),v&&!gt&&this.manager.preBatch(v),this.batchQuad(v,$t[0],$t[1],$t[2],$t[3],$t[4],$t[5],$t[6],$t[7],At,Rt,Lt,Ct,K,V,U,Z,et,c,pt),v&&!gt&&this.manager.postBatch(v)},batchTextureFrame:function(v,c,p,m,T,E,P){this.manager.set(this);var w=this._tempMatrix1.copyFrom(E),A=this._tempMatrix2;P?w.multiply(P,A):A=w;var b=A.setQuad(c,p,c+v.width,p+v.height),O=this.setTexture2D(v.source.glTexture);m=o.getTintAppendFloatAlpha(m,T),this.batchQuad(null,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],v.u0,v.v0,v.u1,v.v1,m,m,m,m,0,v.glTexture,O)},batchFillRect:function(v,c,p,m,T,E){this.renderer.pipelines.set(this);var P=this.calcMatrix;E&&E.multiply(T,P);var w=P.setQuad(v,c,v+p,c+m),A=this.fillTint;this.batchQuad(null,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],0,0,1,1,A.TL,A.TR,A.BL,A.BR,2)},batchFillTriangle:function(v,c,p,m,T,E,P,w){this.renderer.pipelines.set(this);var A=this.calcMatrix;w&&w.multiply(P,A);var b=A.getX(v,c),O=A.getY(v,c),I=A.getX(p,m),D=A.getY(p,m),B=A.getX(T,E),k=A.getY(T,E),N=this.fillTint;this.batchTri(null,b,O,I,D,B,k,0,0,1,1,N.TL,N.TR,N.BL,2)},batchStrokeTriangle:function(v,c,p,m,T,E,P,w,A){var b=this.tempTriangle;b[0].x=v,b[0].y=c,b[0].width=P,b[1].x=p,b[1].y=m,b[1].width=P,b[2].x=T,b[2].y=E,b[2].width=P,b[3].x=v,b[3].y=c,b[3].width=P,this.batchStrokePath(b,P,!1,w,A)},batchFillPath:function(v,c,p){this.renderer.pipelines.set(this);var m=this.calcMatrix;p&&p.multiply(c,m);for(var T=v.length,E=this.polygonCache,P,w,A=this.fillTint.TL,b=this.fillTint.TR,O=this.fillTint.BL,I=0;I<T;++I)w=v[I],E.push(w.x,w.y);P=y(E),T=P.length;for(var D=0;D<T;D+=3){var B=P[D+0]*2,k=P[D+1]*2,N=P[D+2]*2,H=E[B+0],$=E[B+1],J=E[k+0],q=E[k+1],Y=E[N+0],K=E[N+1],V=m.getX(H,$),U=m.getY(H,$),Z=m.getX(J,q),et=m.getY(J,q),st=m.getX(Y,K),rt=m.getY(Y,K);this.batchTri(null,V,U,Z,et,st,rt,0,0,1,1,A,b,O,2)}E.length=0},batchStrokePath:function(v,c,p,m,T){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var E=v.length-1,P=0;P<E;P++){var w=v[P],A=v[P+1];this.batchLine(w.x,w.y,A.x,A.y,w.width/2,A.width/2,c,P,!p&&P===E-1,m,T)}},batchLine:function(v,c,p,m,T,E,P,w,A,b,O){this.renderer.pipelines.set(this);var I=this.calcMatrix;O&&O.multiply(b,I);var D=p-v,B=m-c,k=Math.sqrt(D*D+B*B);if(k!==0){var N=T*(m-c)/k,H=T*(v-p)/k,$=E*(m-c)/k,J=E*(v-p)/k,q=p-$,Y=m-J,K=v-N,V=c-H,U=p+$,Z=m+J,et=v+N,st=c+H,rt=I.getX(q,Y),at=I.getY(q,Y),ut=I.getX(K,V),vt=I.getY(K,V),pt=I.getX(U,Z),gt=I.getY(U,Z),yt=I.getX(et,st),mt=I.getY(et,st),Tt=this.strokeTint,At=Tt.TL,Rt=Tt.TR,Lt=Tt.BL,Ct=Tt.BR;if(this.batchQuad(null,yt,mt,ut,vt,rt,at,pt,gt,0,0,1,1,At,Rt,Lt,Ct,2),!(P<=2)){var Et=this.prevQuad,Mt=this.firstQuad;w>0&&Et[4]?this.batchQuad(null,yt,mt,ut,vt,Et[0],Et[1],Et[2],Et[3],0,0,1,1,At,Rt,Lt,Ct,2):(Mt[0]=yt,Mt[1]=mt,Mt[2]=ut,Mt[3]=vt,Mt[4]=1),A&&Mt[4]?this.batchQuad(null,rt,at,pt,gt,Mt[0],Mt[1],Mt[2],Mt[3],0,0,1,1,At,Rt,Lt,Ct,2):(Et[0]=rt,Et[1]=at,Et[2]=pt,Et[3]=gt,Et[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,a.prototype.destroy.call(this),this}});C.exports=f}),43439:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=s(4127),l=s(89924),h=s(29100),r=new g({Extends:h,initialize:function(d){d.vertShader=y(d,"vertShader",l),d.fragShader=y(d,"fragShader",u),d.attributes=y(d,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,d)},onRender:function(o,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(o,d,a,f,v,c,p,m,T,E,P,w){var A=o.color,b=o.intensity,O=o.radius,I=o.attenuation,D=A.r*b,B=A.g*b,k=A.b*b,N=d.alpha*o.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(a,f,P,w,O,I,D,B,k,N),this.batchLightVert(v,c,P,w,O,I,D,B,k,N),this.batchLightVert(p,m,P,w,O,I,D,B,k,N),this.batchLightVert(a,f,P,w,O,I,D,B,k,N),this.batchLightVert(p,m,P,w,O,I,D,B,k,N),this.batchLightVert(T,E,P,w,O,I,D,B,k,N),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(o,d,a,f,v,c,p,m,T,E){var P=this.vertexViewF32,w=this.vertexCount*this.currentShader.vertexComponentCount-1;P[++w]=o,P[++w]=d,P[++w]=a,P[++w]=f,P[++w]=v,P[++w]=c,P[++w]=p,P[++w]=m,P[++w]=T,P[++w]=E,this.vertexCount++}});C.exports=r}),84057:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(89422),u=s(95540),l=s(27681),h=s(49627),r=s(29100),o=new g({Extends:r,initialize:function(a){a.renderTarget=u(a,"renderTarget",1),a.fragShader=u(a,"fragShader",l),a.vertShader=u(a,"vertShader",h),a.attributes=u(a,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),a.batchSize=1,a.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,a),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new y,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){r.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2;var a=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",a.width,a.height);for(var f=this.renderTargets,v=0;v<f.length;v++)f[v].autoResize=!0},postBatch:function(d){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(d){this.bindAndDraw(d)},getController:function(d){return d!==void 0?d:this.controller?this.controller:this},copySprite:function(d,a,f){f===void 0&&(f=!1);var v=this.gl;v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,d.texture.webGLTexture);var c=v.getParameter(v.FRAMEBUFFER_BINDING);v.bindFramebuffer(v.FRAMEBUFFER,a.framebuffer.webGLFramebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,a.texture.webGLTexture,0),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),f&&(v.bindTexture(v.TEXTURE_2D,null),v.bindFramebuffer(v.FRAMEBUFFER,c))},copyFrame:function(d,a,f,v,c){this.manager.copyFrame(d,a,f,v,c)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,a,f){this.manager.drawFrame(d,a,f,this.colorMatrix)},blendFrames:function(d,a,f,v,c){this.manager.blendFrames(d,a,f,v,c)},blendFramesAdditive:function(d,a,f,v,c){this.manager.blendFramesAdditive(d,a,f,v,c)},clearFrame:function(d,a){this.manager.clearFrame(d,a)},blitFrame:function(d,a,f,v,c,p){this.manager.blitFrame(d,a,f,v,c,p)},copyFrameRect:function(d,a,f,v,c,p,m,T){this.manager.copyFrameRect(d,a,f,v,c,p,m,T)},bindAndDraw:function(d,a,f,v,c){f===void 0&&(f=!0),v===void 0&&(v=!0);var p=this.gl,m=this.renderer;this.bind(c),this.set1i("uMainSampler",0),a?(p.viewport(0,0,a.width,a.height),p.bindFramebuffer(p.FRAMEBUFFER,a.framebuffer.webGLFramebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,a.texture.webGLTexture,0),f&&(v?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT))):(m.popFramebuffer(!1,!1),m.currentFramebuffer||p.viewport(0,0,m.width,m.height)),m.restoreStencilMask(),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,d.texture.webGLTexture),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),a&&(p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,m.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),r.prototype.destroy.call(this),this}});C.exports=o}),43558:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10312),y=s(67502),u=s(83419),l=s(96293),h=s(95540),r=s(57516),o=s(27681),d=s(87841),a=s(32302),f=s(45561),v=s(60722),c=s(29100),p=new u({Extends:r,initialize:function(T){var E=h(T,"fragShader",o),P=h(T,"vertShader",v),w=h(T,"drawShader",o),A=[{name:"DrawSprite",fragShader:f,vertShader:v},{name:"CopySprite",fragShader:E,vertShader:P},{name:"DrawGame",fragShader:w,vertShader:v},{name:"ColorMatrix",fragShader:l}],b=h(T,"shaders",[]);T.shaders=A.concat(b),T.vertShader||(T.vertShader=P),T.batchSize=1,r.call(this,T),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new d,this.targetBounds=new d,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){c.prototype.boot.call(this);var m=this.shaders,T=this.renderer;this.drawSpriteShader=m[0],this.copyShader=m[1],this.gameShader=m[2],this.colorMatrixShader=m[3],this.fsTarget=new a(T,T.width,T.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var E=new ArrayBuffer(168);this.quadVertexData=E,this.quadVertexViewF32=new Float32Array(E),this.quadVertexBuffer=T.createVertexBuffer(E,this.gl.STATIC_DRAW),this.onResize(T.width,T.height),this.currentShader=this.copyShader,this.set2f("uResolution",T.width,T.height)},onResize:function(m,T){var E=this.quadVertexViewF32;E[1]=T,E[22]=T,E[14]=m,E[28]=m,E[35]=m,E[36]=T},batchQuad:function(m,T,E,P,w,A,b,O,I,D,B,k,N,H,$,J,q,Y,K){var V=Math.min(T,P,A,O),U=Math.min(E,w,b,I),Z=Math.max(T,P,A,O),et=Math.max(E,w,b,I),st=Z-V,rt=et-U,at=this.spriteBounds.setTo(V,U,st,rt),ut=m?m.preFX.padding:0,vt=st+ut*2,pt=rt+ut*2,gt=Math.abs(Math.max(vt,pt)),yt=this.manager.getRenderTarget(gt),mt=this.targetBounds.setTo(0,0,yt.width,yt.height);y(mt,Math.round(at.centerX),Math.round(at.centerY)),this.tempSprite=m;var Tt=this.gl,At=this.renderer;At.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",At.width,At.height),this.flipProjectionMatrix(!0),m&&(this.onDrawSprite(m,yt),m.preFX.onFX(this));var Rt=this.fsTarget;return this.flush(),Tt.viewport(0,0,At.width,At.height),Tt.bindFramebuffer(Tt.FRAMEBUFFER,Rt.framebuffer.webGLFramebuffer),Tt.framebufferTexture2D(Tt.FRAMEBUFFER,Tt.COLOR_ATTACHMENT0,Tt.TEXTURE_2D,Rt.texture.webGLTexture,0),Tt.clearColor(0,0,0,0),Tt.clear(Tt.COLOR_BUFFER_BIT),this.setTexture2D(K),this.batchVert(T,E,D,B,0,Y,H),this.batchVert(P,w,D,N,0,Y,J),this.batchVert(A,b,k,N,0,Y,q),this.batchVert(T,E,D,B,0,Y,H),this.batchVert(A,b,k,N,0,Y,q),this.batchVert(O,I,k,B,0,Y,$),this.flush(),this.flipProjectionMatrix(!1),Tt.activeTexture(Tt.TEXTURE0),Tt.bindTexture(Tt.TEXTURE_2D,yt.texture.webGLTexture),Tt.copyTexSubImage2D(Tt.TEXTURE_2D,0,0,0,mt.x,mt.y,mt.width,mt.height),Tt.bindFramebuffer(Tt.FRAMEBUFFER,null),Tt.bindTexture(Tt.TEXTURE_2D,null),this.onBatch(m),this.currentShader=this.copyShader,this.onDraw(yt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(m,T,E,P,w,A,b){E===void 0&&(E=!0),P===void 0&&(P=!0),w===void 0&&(w=!1),b===void 0&&(b=this.copyShader);var O=this.gl,I=this.tempSprite;A&&(b=this.colorMatrixShader),this.currentShader=b;var D=this.setVertexBuffer(this.quadVertexBuffer);b.bind(D,!1);var B=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",B.width,B.height),I.preFX.onFXCopy(this),this.onCopySprite(m,T,I),A&&(this.set1fv("uColorMatrix",A.getData()),this.set1f("uAlpha",A.alpha)),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,m.texture.webGLTexture),m.height>T.height)O.viewport(0,0,m.width,m.height),this.setTargetUVs(m,T);else{var k=T.height-m.height;O.viewport(0,k,m.width,m.height),this.resetUVs()}if(O.bindFramebuffer(O.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,T.texture.webGLTexture,0),E&&(O.clearColor(0,0,0,+!P),O.clear(O.COLOR_BUFFER_BIT)),w){var N=this.renderer.currentBlendMode;this.renderer.setBlendMode(g.ERASE)}O.bufferData(O.ARRAY_BUFFER,this.quadVertexData,O.STATIC_DRAW),O.drawArrays(O.TRIANGLES,0,6),w&&this.renderer.setBlendMode(N),O.bindFramebuffer(O.FRAMEBUFFER,null)},copy:function(m,T){var E=this.gl;this.set1i("uMainSampler",0),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,m.texture.webGLTexture),E.viewport(0,0,m.width,m.height),this.setUVs(0,0,0,1,1,1,1,0),E.bindFramebuffer(E.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,T.texture.webGLTexture,0),E.clearColor(0,0,0,0),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.quadVertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null)},blendFrames:function(m,T,E,P,w){this.manager.blendFrames(m,T,E,P,w)},blendFramesAdditive:function(m,T,E,P,w){this.manager.blendFramesAdditive(m,T,E,P,w)},drawToGame:function(m){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(m)},copyToGame:function(m){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(m)},bindAndDraw:function(m){var T=this.gl,E=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(m.texture);var P=this._tempMatrix1.loadIdentity(),w=this.targetBounds.x,A=this.targetBounds.y,b=w+m.width,O=A+m.height,I=P.getX(w,A),D=P.getX(w,O),B=P.getX(b,O),k=P.getX(b,A),N=P.getY(w,A),H=P.getY(w,O),$=P.getY(b,O),J=P.getY(b,A),q=16777215;this.batchVert(I,N,0,0,0,0,q),this.batchVert(D,H,0,1,0,0,q),this.batchVert(B,$,1,1,0,0,q),this.batchVert(I,N,0,0,0,0,q),this.batchVert(B,$,1,1,0,0,q),this.batchVert(k,J,1,0,0,0,q),E.restoreFramebuffer(!1,!0),E.currentFramebuffer||T.viewport(0,0,E.width,E.height),E.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(m){this.drawToGame(m)},setUVs:function(m,T,E,P,w,A,b,O){var I=this.quadVertexViewF32;I[2]=m,I[3]=T,I[9]=E,I[10]=P,I[16]=w,I[17]=A,I[23]=m,I[24]=T,I[30]=w,I[31]=A,I[37]=b,I[38]=O},setTargetUVs:function(m,T){var E=T.height/m.height;E>.5?E=.5-(E-.5):E=.5+(.5-E),this.setUVs(0,E,0,1+E,1,1+E,1,E)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,r.prototype.destroy.call(this),this}});C.exports=p}),81041:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=s(57516),l=new g({Extends:u,initialize:function(r){r.topology=5,r.batchSize=y(r,"batchSize",256),u.call(this,r)}});C.exports=l}),12385:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=s(57516),l=s(45561),h=s(60722),r=s(29100),o=new g({Extends:u,initialize:function(a){a.fragShader=y(a,"fragShader",l),a.vertShader=y(a,"vertShader",h),a.forceZero=!0,u.call(this,a)},boot:function(){r.prototype.boot.call(this);var d=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height)}});C.exports=o}),7589:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35407),y=s(10312),u=s(83419),l=s(89422),h=s(96293),r=s(36682),o=s(95540),d=s(48247),a=s(49627),f=s(29100),v=new u({Extends:f,initialize:function(p){p.renderTarget=o(p,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),p.vertShader=o(p,"vertShader",a),p.shaders=o(p,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:g},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:h}]),p.attributes=o(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),p.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],p.batchSize=1,f.call(this,p),this.colorMatrix=new l,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){f.prototype.boot.call(this);var c=this.shaders,p=this.renderTargets;this.copyShader=c[0],this.addShader=c[1],this.linearShader=c[2],this.colorMatrixShader=c[3],this.fullFrame1=p[0],this.fullFrame2=p[1],this.halfFrame1=p[2],this.halfFrame2=p[3]},copyFrame:function(c,p,m,T,E){m===void 0&&(m=1),T===void 0&&(T=!0),E===void 0&&(E=!0);var P=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,c.texture.webGLTexture),p?(P.viewport(0,0,p.width,p.height),P.bindFramebuffer(P.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,p.texture.webGLTexture,0)):P.viewport(0,0,c.width,c.height),T&&(E?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blitFrame:function(c,p,m,T,E,P,w){m===void 0&&(m=1),T===void 0&&(T=!0),E===void 0&&(E=!0),P===void 0&&(P=!1),w===void 0&&(w=!1);var A=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,c.texture.webGLTexture),c.height>p.height)A.viewport(0,0,c.width,c.height),this.setTargetUVs(c,p);else{var b=p.height-c.height;A.viewport(0,b,c.width,c.height)}if(A.bindFramebuffer(A.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,p.texture.webGLTexture,0),T&&(E?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),P){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(y.ERASE)}w&&this.flipY(),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),P&&this.renderer.setBlendMode(O),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(c,p,m,T,E,P,w,A){w===void 0&&(w=!0),A===void 0&&(A=!0);var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,c.framebuffer.webGLFramebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c.texture.webGLTexture,0),w&&(A?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT)),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,p.texture.webGLTexture),b.copyTexSubImage2D(b.TEXTURE_2D,0,0,0,m,T,E,P),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},copyToGame:function(c){var p=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,c.texture.webGLTexture),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6)},drawFrame:function(c,p,m,T){m===void 0&&(m=!0),T===void 0&&(T=this.colorMatrix);var E=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",T.getData()),this.set1f("uAlpha",T.alpha),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,c.texture.webGLTexture),p?(E.viewport(0,0,p.width,p.height),E.bindFramebuffer(E.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,p.texture.webGLTexture,0)):E.viewport(0,0,c.width,c.height),m?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blendFrames:function(c,p,m,T,E,P){T===void 0&&(T=1),E===void 0&&(E=!0),P===void 0&&(P=this.linearShader);var w=this.gl;this.setShader(P),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",T),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,c.texture.webGLTexture),w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,p.texture.webGLTexture),m?(w.bindFramebuffer(w.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,m.texture.webGLTexture,0),w.viewport(0,0,m.width,m.height)):w.viewport(0,0,c.width,c.height),E?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFramesAdditive:function(c,p,m,T,E){this.blendFrames(c,p,m,T,E,this.addShader)},clearFrame:function(c,p){p===void 0&&(p=!0);var m=this.gl;m.viewport(0,0,c.width,c.height),m.bindFramebuffer(m.FRAMEBUFFER,c.framebuffer.webGLFramebuffer),p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT);var T=this.renderer.currentFramebuffer;m.bindFramebuffer(m.FRAMEBUFFER,T.webGLFramebuffer)},setUVs:function(c,p,m,T,E,P,w,A){var b=this.vertexViewF32;b[2]=c,b[3]=p,b[6]=m,b[7]=T,b[10]=E,b[11]=P,b[14]=c,b[15]=p,b[18]=E,b[19]=P,b[22]=w,b[23]=A},setTargetUVs:function(c,p){var m=p.height/c.height;m>.5?m=.5-(m-.5):m=.5+(.5-m),this.setUVs(0,m,0,1+m,1,1+m,1,m)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});C.exports=v}),36060:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};C.exports=R}),84817:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pipelineafterflush"}),36712:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pipelinebeforeflush"}),40285:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pipelinebind"}),65918:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pipelineboot"}),92852:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pipelinedestroy"}),56072:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pipelinerebind"}),57566:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pipelineresize"}),77085:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={AFTER_FLUSH:s(84817),BEFORE_FLUSH:s(36712),BIND:s(40285),BOOT:s(65918),DESTROY:s(92852),REBIND:s(56072),RESIZE:s(57566)}}),54812:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(99155),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.amount=1},onPreRender:function(h,r){h=this.getController(h),this.set1f("amount",h.amount,r)}});C.exports=l}),67329:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(24400),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(h){h=this.getController(h),this.set1f("strength",h.blurStrength),this.set3fv("color",h.glcolor)},onDraw:function(h){var r=this.getController(),o=this.fullFrame1,d=this.fullFrame2;this.copyFrame(h,d);for(var a=2/h.width*r.offsetX,f=2/h.height*r.offsetY,v=0;v<r.steps;v++)this.set2f("offset",a,0),this.copySprite(h,o),this.set2f("offset",0,f),this.copySprite(o,h);this.blendFrames(d,h,o,r.strength),this.copyToGame(o)}});C.exports=l}),8861:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(41514),u=s(51078),l=s(94328),h=s(84057),r=new g({Extends:h,initialize:function(d){h.call(this,{game:d,shaders:[{name:"Gaussian5",fragShader:y},{name:"Gaussian9",fragShader:u},{name:"Gaussian13",fragShader:l}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(o){var d=this.getController(),a=this.gl,f=this.fullFrame1,v=a.getParameter(a.FRAMEBUFFER_BINDING);this.bind(this.shaders[d.quality]),a.activeTexture(a.TEXTURE0),a.viewport(0,0,o.width,o.height),this.set1i("uMainSampler",0),this.set2f("resolution",o.width,o.height),this.set1f("strength",d.strength),this.set3fv("color",d.glcolor);for(var c=0;c<d.steps;c++)this.set2f("offset",d.x,0),this.copySprite(o,f),this.set2f("offset",0,d.y),this.copySprite(f,o);a.bindFramebuffer(a.FRAMEBUFFER,v),a.bindTexture(a.TEXTURE_2D,null),this.copyToGame(o)}});C.exports=r}),51051:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(90610),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(h,r,o,d){h=this.getController(h),this.set1f("radius",h.radius,r),this.set1f("amount",h.amount,r),this.set1f("contrast",h.contrast,r),this.set1f("strength",h.strength,r),this.set2f("blur",h.blurX,h.blurY,r),this.setBoolean("isTiltShift",h.isTiltShift,r),o&&d&&this.set2f("resolution",o,d,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});C.exports=l}),89428:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(91899),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(h,r,o,d){h=this.getController(h),this.set1f("scale",h.scale,r),this.set1f("feather",h.feather,r),this.set1f("thickness",h.thickness,r),this.set3fv("color",h.glcolor,r),this.set4fv("backgroundColor",h.glcolor2,r),o&&d&&this.set2f("resolution",o,d,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});C.exports=l}),88904:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(84057),u=new g({Extends:y,initialize:function(h){y.call(this,{game:h})},onDraw:function(l){var h=this.fullFrame1;this.controller?this.manager.drawFrame(l,h,!0,this.controller):this.drawFrame(l,h),this.copyToGame(h)}});C.exports=u}),63563:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(47838),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(h){var r=this.game.textures.getFrame(h);r&&(this.glTexture=r.glTexture)},onDraw:function(h){var r=this.getController(),o=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",r.x,r.y),this.bindTexture(r.glTexture,1),this.copySprite(h,o),this.copyToGame(o)}});C.exports=l}),94045:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=s(98656),l=s(84057),h=s(70554),r=new g({Extends:l,initialize:function(d,a){var f=y(a,"quality",.1),v=y(a,"distance",10);l.call(this,{game:d,fragShader:h.setGlowQuality(u,d,f,v)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(o,d,a,f){o=this.getController(o),this.set1f("outerStrength",o.outerStrength,d),this.set1f("innerStrength",o.innerStrength,d),this.set4fv("glowColor",o.glcolor,d),this.setBoolean("knockout",o.knockout,d),a&&f&&this.set2f("resolution",a,f,d)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});C.exports=r}),74088:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(70463),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(h,r){h=this.getController(h),this.set1f("alpha",h.alpha,r),this.set1i("size",h.size,r),this.set3fv("color1",h.glcolor1,r),this.set3fv("color2",h.glcolor2,r),this.set2f("positionFrom",h.fromX,h.fromY,r),this.set2f("positionTo",h.toX,h.toY,r)}});C.exports=l}),99636:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50831),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.amount=1},onPreRender:function(h,r,o,d){h=this.getController(h),this.set1f("amount",h.amount,r),o&&d&&this.set2f("resolution",o,d,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});C.exports=l}),34700:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(92595),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(h,r){h=this.getController(h);var o=h.samples;this.set1i("samples",o,r),this.set1f("intensity",h.intensity,r),this.set1f("decay",h.decay,r),this.set1f("power",h.power/o,r),this.set2f("lightPosition",h.x,h.y,r),this.set4fv("color",h.glcolor,r)}});C.exports=l}),91157:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(72464),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(h,r,o,d){h=this.getController(h),this.setTime("time",r),this.set1f("speed",h.speed,r),this.set1f("lineWidth",h.lineWidth,r),this.set1f("gradient",h.gradient,r),this.setBoolean("reveal",h.reveal,r),o&&d&&this.set2f("resolution",o,d,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});C.exports=l}),27797:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(39249),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(h,r){h=this.getController(h),this.set1f("radius",h.radius,r),this.set1f("strength",h.strength,r),this.set2f("position",h.x,h.y,r)}});C.exports=l}),67603:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(2878),u=s(84057),l=new g({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:y}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(h,r){h=this.getController(h);var o=h.progress,d=h.wipeWidth,a=h.direction,f=h.axis;this.set4f("config",o,d,a,f,r),this.setBoolean("reveal",h.reveal,r)}});C.exports=l}),58918:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={Barrel:s(54812),Bloom:s(67329),Blur:s(8861),Bokeh:s(51051),Circle:s(89428),ColorMatrix:s(88904),Displacement:s(63563),Glow:s(94045),Gradient:s(74088),Pixelate:s(99636),Shadow:s(34700),Shine:s(91157),Vignette:s(27797),Wipe:s(67603)};C.exports=g}),96615:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(36060),y=s(79291),u={FX:s(58918),BitmapMaskPipeline:s(31302),Events:s(77085),FXPipeline:s(92651),LightPipeline:s(96569),MobilePipeline:s(56527),MultiPipeline:s(57516),PointLightPipeline:s(43439),PostFXPipeline:s(84057),PreFXPipeline:s(43558),RopePipeline:s(81041),SinglePipeline:s(12385),UtilityPipeline:s(7589)};u=y(!1,u,g),C.exports=u}),35407:(C=>{C.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)}),78908:(C=>{C.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)}),85191:(C=>{C.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)}),96293:(C=>{C.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)}),36682:(C=>{C.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)}),99155:(C=>{C.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)}),24400:(C=>{C.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)}),94328:(C=>{C.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),41514:(C=>{C.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),51078:(C=>{C.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),90610:(C=>{C.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)}),91899:(C=>{C.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)}),47838:(C=>{C.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)}),98656:(C=>{C.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)}),70463:(C=>{C.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)}),50831:(C=>{C.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)}),92595:(C=>{C.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)}),72464:(C=>{C.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)}),39249:(C=>{C.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)}),2878:(C=>{C.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)}),31063:(C=>{C.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)}),48247:(C=>{C.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)}),41214:(C=>{C.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)}),39653:(C=>{C.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)}),62143:(C=>{C.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),47940:(C=>{C.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),98840:(C=>{C.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),44667:(C=>{C.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),4127:(C=>{C.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)}),89924:(C=>{C.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)}),27681:(C=>{C.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)}),49627:(C=>{C.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)}),45561:(C=>{C.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),60722:(C=>{C.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),89350:((C,R,s)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={AddBlendFrag:s(35407),BitmapMaskFrag:s(78908),BitmapMaskVert:s(85191),ColorMatrixFrag:s(96293),CopyFrag:s(36682),FXBarrelFrag:s(99155),FXBloomFrag:s(24400),FXBlurHighFrag:s(94328),FXBlurLowFrag:s(41514),FXBlurMedFrag:s(51078),FXBokehFrag:s(90610),FXCircleFrag:s(91899),FXDisplacementFrag:s(47838),FXGlowFrag:s(98656),FXGradientFrag:s(70463),FXPixelateFrag:s(50831),FXShadowFrag:s(92595),FXShineFrag:s(72464),FXVignetteFrag:s(39249),FXWipeFrag:s(2878),LightFrag:s(31063),LinearBlendFrag:s(48247),MeshFrag:s(41214),MeshVert:s(39653),MobileFrag:s(62143),MobileVert:s(47940),MultiFrag:s(98840),MultiVert:s(44667),PointLightFrag:s(4127),PointLightVert:s(89924),PostFXFrag:s(27681),QuadVert:s(49627),SingleFrag:s(45561),SingleVert:s(60722)}}),93567:((C,R,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r){this.webGLAttribLocation=-1,this.gl=l,this.program=h,this.name=r,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var u=this.gl;u.isContextLost()||(this.webGLAttribLocation=u.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});C.exports=y}),26128:((C,R,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r,o){this.webGLBuffer=null,this.gl=l,this.initialDataOrSize=h,this.bufferType=r,this.bufferUsage=o,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var u=this.gl;if(!u.isContextLost()){var l=this.bufferType,h=u.createBuffer();this.webGLBuffer=h,u.bindBuffer(l,this.webGLBuffer),u.bufferData(l,this.initialDataOrSize,this.bufferUsage),u.bindBuffer(l,null)}}},destroy:function(){var u=this.gl;u.isContextLost()||u.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});C.exports=y}),84387:((C,R,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},u=new g({initialize:function(h,r,o,d,a){this.webGLFramebuffer=null,this.gl=h,this.width=r,this.height=o,this.renderTexture=d,this.addDepthStencilBuffer=!!a,this.createResource()},createResource:function(){var l=this.gl;if(!l.isContextLost()){var h=this.renderTexture,r=0,o=l.createFramebuffer();if(this.webGLFramebuffer=o,l.bindFramebuffer(l.FRAMEBUFFER,o),h.isRenderTexture=!0,h.isAlphaPremultiplied=!1,l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,h.webGLTexture,0),r=l.checkFramebufferStatus(l.FRAMEBUFFER),r!==l.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(y[r]||r));if(this.addDepthStencilBuffer){var d=l.createRenderbuffer();l.bindRenderbuffer(l.RENDERBUFFER,d),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_STENCIL,this.width,this.height),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,d)}l.bindFramebuffer(l.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var l=this.gl;if(!l.isContextLost()){l.bindFramebuffer(l.FRAMEBUFFER,this.webGLFramebuffer);var h=l.getFramebufferAttachmentParameter(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);h!==null&&(l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,null,0),l.deleteTexture(h));var r=l.getFramebufferAttachmentParameter(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);r!==null&&l.deleteRenderbuffer(r),l.bindFramebuffer(l.FRAMEBUFFER,null),l.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});C.exports=u}),1482:((C,R,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r){this.webGLProgram=null,this.gl=l,this.vertexSource=h,this.fragmentSource=r,this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){var l=u.createProgram(),h=u.createShader(u.VERTEX_SHADER),r=u.createShader(u.FRAGMENT_SHADER);u.shaderSource(h,this.vertexSource),u.shaderSource(r,this.fragmentSource),u.compileShader(h),u.compileShader(r);var o=`Shader failed:
`;if(!u.getShaderParameter(h,u.COMPILE_STATUS))throw new Error("Vertex "+o+u.getShaderInfoLog(h));if(!u.getShaderParameter(r,u.COMPILE_STATUS))throw new Error("Fragment "+o+u.getShaderInfoLog(r));if(u.attachShader(l,h),u.attachShader(l,r),u.linkProgram(l),!u.getProgramParameter(l,u.LINK_STATUS))throw new Error("Link "+o+u.getProgramInfoLog(l));u.useProgram(l),this.webGLProgram=l}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});C.exports=y}),82751:((C,R,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50030),u=new g({initialize:function(h,r,o,d,a,f,v,c,p,m,T,E,P){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=h,this.mipLevel=r,this.minFilter=o,this.magFilter=d,this.wrapT=a,this.wrapS=f,this.format=v,this.pixels=c,this.width=p,this.height=m,this.pma=T??!0,this.forceSize=!!E,this.flipY=!!P,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var l=this.gl;if(!l.isContextLost()){if(this.pixels instanceof u){this.webGLTexture=this.pixels.webGLTexture;return}var h=l.createTexture();h.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=h,this._processTexture()}},update:function(l,h,r,o,d,a,f,v,c){if(!(h===0||r===0)){this.pixels=l,this.width=h,this.height=r,this.flipY=o,this.wrapS=d,this.wrapT=a,this.minFilter=f,this.magFilter=v,this.format=c;var p=this.gl;p.isContextLost()||this._processTexture()}},_processTexture:function(){var l=this.gl;l.activeTexture(l.TEXTURE0);var h=l.getParameter(l.TEXTURE_BINDING_2D);l.bindTexture(l.TEXTURE_2D,this.webGLTexture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this.minFilter),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,this.magFilter),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,this.wrapS),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,this.wrapT),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,this.flipY);var r=this.pixels,o=this.mipLevel,d=this.width,a=this.height,f=this.format,v=!1;if(r==null)l.texImage2D(l.TEXTURE_2D,o,f,d,a,0,f,l.UNSIGNED_BYTE,null),v=y(d,a);else if(r.compressed){d=r.width,a=r.height,v=r.generateMipmap;for(var c=0;c<r.mipmaps.length;c++)l.compressedTexImage2D(l.TEXTURE_2D,c,r.internalFormat,r.mipmaps[c].width,r.mipmaps[c].height,0,r.mipmaps[c].data)}else r instanceof Uint8Array?(l.texImage2D(l.TEXTURE_2D,o,f,d,a,0,f,l.UNSIGNED_BYTE,r),v=y(d,a)):(this.forceSize||(d=r.width,a=r.height),l.texImage2D(l.TEXTURE_2D,o,f,f,l.UNSIGNED_BYTE,r),v=y(d,a));v&&l.generateMipmap(l.TEXTURE_2D),h?l.bindTexture(l.TEXTURE_2D,h):l.bindTexture(l.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(l){this.__SPECTOR_Metadata=l,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=l)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof u||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});C.exports=u}),57183:((C,R,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r){this.webGLUniformLocation=null,this.gl=l,this.program=h,this.name=r,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var u=this.gl;u.isContextLost()||(this.webGLUniformLocation=u.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});C.exports=y}),9503:((C,R,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={WebGLAttribLocationWrapper:s(93567),WebGLBufferWrapper:s(26128),WebGLProgramWrapper:s(1482),WebGLTextureWrapper:s(82751),WebGLFramebufferWrapper:s(84387),WebGLUniformLocationWrapper:s(57183)};C.exports=g}),76531:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(13560),y=s(83419),u=s(50792),l=s(97480),h=s(8443),r=s(57811),o=s(74403),d=s(45818),a=s(29747),f=s(87841),v=s(86555),c=s(56583),p=s(26099),m=s(38058),T=new y({Extends:u,initialize:function(P){u.call(this),this.game=P,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=g.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new p(1,1),this.autoRound=!1,this.autoCenter=g.CENTER.NO_CENTER,this.orientation=g.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:a,windowResize:a,fullScreenChange:a,fullScreenError:a}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var E=this.game;this.canvas=E.canvas,this.fullscreen=E.device.fullscreen;var P=this.scaleMode;P!==g.SCALE_MODE.RESIZE&&P!==g.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(P),P===g.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),E.events.on(h.PRE_STEP,this.step,this),E.events.once(h.READY,this.refresh,this),E.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(E){this.getParent(E),this.getParentBounds();var P=E.width,w=E.height,A=E.scaleMode,b=E.zoom,O=E.autoRound;if(typeof P=="string")if(P.substr(-1)!=="%")P=parseInt(P,10);else{var I=this.parentSize.width;I===0&&(I=window.innerWidth);var D=parseInt(P,10)/100;P=Math.floor(I*D)}if(typeof w=="string")if(w.substr(-1)!=="%")w=parseInt(w,10);else{var B=this.parentSize.height;B===0&&(B=window.innerHeight);var k=parseInt(w,10)/100;w=Math.floor(B*k)}this.scaleMode=A,this.autoRound=O,this.autoCenter=E.autoCenter,this.resizeInterval=E.resizeInterval,O&&(P=Math.floor(P),w=Math.floor(w)),this.gameSize.setSize(P,w),b===g.ZOOM.MAX_ZOOM&&(b=this.getMaxZoom()),this.zoom=b,b!==1&&(this._resetZoom=!0),this.baseSize.setSize(P,w),O&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),E.minWidth>0&&this.displaySize.setMin(E.minWidth*b,E.minHeight*b),E.maxWidth>0&&this.displaySize.setMax(E.maxWidth*b,E.maxHeight*b),this.displaySize.setSize(P,w),(E.snapWidth>0||E.snapHeight>0)&&this.displaySize.setSnap(E.snapWidth,E.snapHeight),this.orientation=d(P,w)},getParent:function(E){var P=E.parent;if(P!==null){if(this.parent=o(P),this.parentIsWindow=this.parent===document.body,E.expandParent&&E.scaleMode!==g.SCALE_MODE.NONE){var w=this.parent.getBoundingClientRect();(this.parentIsWindow||w.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",w=this.parent.getBoundingClientRect(),!this.parentIsWindow&&w.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}E.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=o(E.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var E=this.parentSize,P=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(P.height=r(!0));var w=P.width,A=P.height;if(E.width!==w||E.height!==A)return E.setSize(w,A),!0;if(this.canvas){var b=this.canvasBounds,O=this.canvas.getBoundingClientRect();if(O.x!==b.x||O.y!==b.y)return!0}return!1},lockOrientation:function(E){var P=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return P?P.call(screen,E):!1},setParentSize:function(E,P){return this.parentSize.setSize(E,P),this.refresh()},setGameSize:function(E,P){var w=this.autoRound;w&&(E=Math.floor(E),P=Math.floor(P));var A=this.width,b=this.height;return this.gameSize.resize(E,P),this.baseSize.resize(E,P),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(E/P),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(A,b)},resize:function(E,P){var w=this.zoom,A=this.autoRound;A&&(E=Math.floor(E),P=Math.floor(P));var b=this.width,O=this.height;this.gameSize.resize(E,P),this.baseSize.resize(E,P),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(E*w,P*w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var I=this.canvas.style,D=E*w,B=P*w;return A&&(D=Math.floor(D),B=Math.floor(B)),(D!==E||B!==P)&&(I.width=D+"px",I.height=B+"px"),this.refresh(b,O)},setZoom:function(E){return this.zoom=E,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(E,P){return E===void 0&&(E=0),P===void 0&&(P=E),this.displaySize.setSnap(E,P),this.refresh()},refresh:function(E,P){E===void 0&&(E=this.width),P===void 0&&(P=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var A=this.canvas.style,b=w.style;b.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",b.marginLeft=A.marginLeft,b.marginTop=A.marginTop}return this.emit(l.RESIZE,this.gameSize,this.baseSize,this.displaySize,E,P),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var E=d(this.width,this.height);E!==this.orientation&&(this.orientation=E,this.emit(l.ORIENTATION_CHANGE,E))}},updateScale:function(){var E=this.canvas.style,P=this.gameSize.width,w=this.gameSize.height,A,b,O=this.zoom,I=this.autoRound;if(this.scaleMode===g.SCALE_MODE.NONE)this.displaySize.setSize(P*O,w*O),A=this.displaySize.width,b=this.displaySize.height,I&&(A=Math.floor(A),b=Math.floor(b)),this._resetZoom&&(E.width=A+"px",E.height=b+"px",this._resetZoom=!1);else if(this.scaleMode===g.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),A=this.displaySize.width,b=this.displaySize.height,I&&(A=Math.floor(A),b=Math.floor(b)),this.canvas.width=A,this.canvas.height=b;else if(this.scaleMode===g.SCALE_MODE.EXPAND){var D=this.game.config.width,B=this.game.config.height;this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,b=this.displaySize.height,I&&(A=Math.floor(A),b=Math.floor(b)),E.width=A+"px",E.height=b+"px";var k=this.parentSize.width/D,N=this.parentSize.height/B;k<N&&k!==0?this.baseSize.setSize(D,this.parentSize.height/k):N!==0&&this.baseSize.setSize(this.displaySize.width/N,B),this.gameSize.setSize(this.baseSize.width,this.baseSize.height),A=this.baseSize.width,b=this.baseSize.height,I&&(A=Math.floor(A),b=Math.floor(b)),this.canvas.width=A,this.canvas.height=b}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,b=this.displaySize.height,I&&(A=Math.floor(A),b=Math.floor(b)),E.width=A+"px",E.height=b+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var E=c(this.parentSize.width,this.gameSize.width,0,!0),P=c(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(E,P),1)},updateCenter:function(){var E=this.autoCenter;if(E!==g.CENTER.NO_CENTER){var P=this.canvas,w=P.style,A=P.getBoundingClientRect(),b=A.width,O=A.height,I=Math.floor((this.parentSize.width-b)/2),D=Math.floor((this.parentSize.height-O)/2);E===g.CENTER.CENTER_HORIZONTALLY?D=0:E===g.CENTER.CENTER_VERTICALLY&&(I=0),w.marginLeft=I+"px",w.marginTop=D+"px"}},updateBounds:function(){var E=this.canvasBounds,P=this.canvas.getBoundingClientRect();E.x=P.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),E.y=P.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),E.width=P.width,E.height=P.height},transformX:function(E){return(E-this.canvasBounds.left)*this.displayScale.x},transformY:function(E){return(E-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(E){E===void 0&&(E={navigationUI:"hide"});var P=this.fullscreen;if(!P.available){this.emit(l.FULLSCREEN_UNSUPPORTED);return}if(!P.active){var w=this.getFullscreenTarget();P.keyboard?w[P.request](Element.ALLOW_KEYBOARD_INPUT):w[P.request](E)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(l.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(E){this.removeFullscreenTarget(),this.emit(l.FULLSCREEN_FAILED,E)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var E=document.createElement("div");E.style.margin="0",E.style.padding="0",E.style.width="100%",E.style.height="100%",this.fullscreenTarget=E,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var P=this.canvas.parentNode;P.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var E=this.fullscreenTarget;if(E&&E.parentNode){var P=E.parentNode;P.insertBefore(this.canvas,E),P.removeChild(E)}}},stopFullscreen:function(){var E=this.fullscreen;if(!E.available)return this.emit(l.FULLSCREEN_UNSUPPORTED),!1;E.active&&document[E.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(l.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(E){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(E)},startListeners:function(){var E=this,P=this.domlisteners;if(P.orientationChange=function(){E.updateBounds(),E._checkOrientation=!0,E.dirty=!0,E.refresh()},P.windowResize=function(){E.updateBounds(),E.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",P.orientationChange,!1):window.addEventListener("orientationchange",P.orientationChange,!1),window.addEventListener("resize",P.windowResize,!1),this.fullscreen.available){P.fullScreenChange=function(A){return E.onFullScreenChange(A)},P.fullScreenError=function(A){return E.onFullScreenError(A)};var w=["webkit","moz",""];w.forEach(function(A){document.addEventListener(A+"fullscreenchange",P.fullScreenChange,!1),document.addEventListener(A+"fullscreenerror",P.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",P.fullScreenChange,!1),document.addEventListener("MSFullscreenError",P.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(E,P){E instanceof m||(P=E,E=void 0),P===void 0&&(P=new f);var w=this.baseSize,A=this.parentSize,b=this.canvasBounds,O=this.displayScale,I=b.x>=0?0:-(b.x*O.x),D=b.y>=0?0:-(b.y*O.y),B;A.width>=b.width?B=w.width:B=w.width-(b.width-A.width)*O.x;var k;return A.height>=b.height?k=w.height:k=w.height-(b.height-A.height)*O.y,P.setTo(I,D,B,k),E&&(P.width/=E.zoomX,P.height/=E.zoomY,P.centerX=E.centerX+E.scrollX,P.centerY=E.centerY+E.scrollY),P},step:function(E,P){this.parent&&(this._lastCheck+=P,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var E=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",E.orientationChange,!1):window.removeEventListener("orientationchange",E.orientationChange,!1),window.removeEventListener("resize",E.windowResize,!1);var P=["webkit","moz",""];P.forEach(function(w){document.removeEventListener(w+"fullscreenchange",E.fullScreenChange,!1),document.removeEventListener(w+"fullscreenerror",E.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",E.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===g.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===g.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});C.exports=T}),64743:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}}),39218:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}}),81050:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}}),80805:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}}),13560:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={CENTER:s(64743),ORIENTATION:s(39218),SCALE_MODE:s(81050),ZOOM:s(80805)};C.exports=g}),56139:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="enterfullscreen"}),2336:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="fullscreenfailed"}),47412:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="fullscreenunsupported"}),51452:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="leavefullscreen"}),20666:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="orientationchange"}),47945:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resize"}),97480:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ENTER_FULLSCREEN:s(56139),FULLSCREEN_FAILED:s(2336),FULLSCREEN_UNSUPPORTED:s(47412),LEAVE_FULLSCREEN:s(51452),ORIENTATION_CHANGE:s(20666),RESIZE:s(47945)}}),93364:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(79291),y=s(13560),u={Center:s(64743),Events:s(97480),Orientation:s(39218),ScaleManager:s(76531),ScaleModes:s(81050),Zoom:s(80805)};u=g(!1,u,y.CENTER),u=g(!1,u,y.ORIENTATION),u=g(!1,u,y.SCALE_MODE),u=g(!1,u,y.ZOOM),C.exports=u}),27397:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y=s(35355),u=function(l){var h=l.game.config.defaultPhysicsSystem,r=g(l.settings,"physics",!1);if(!(!h&&!r)){var o=[];if(h&&o.push(y(h+"Physics")),r)for(var d in r)d=y(d.concat("Physics")),o.indexOf(d)===-1&&o.push(d);return o}};C.exports=u}),52106:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y=function(u){var l=u.plugins.getDefaultScenePlugins(),h=g(u.settings,"plugins",!1);return Array.isArray(h)?h:l||[]};C.exports=y}),87033:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};C.exports=R}),97482:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(2368),u=new g({initialize:function(h){this.sys=new y(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});C.exports=u}),60903:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(89993),u=s(44594),l=s(8443),h=s(35154),r=s(54899),o=s(29747),d=s(97482),a=s(2368),f=new g({initialize:function(c,p){if(this.game=c,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)this._pending.push({key:"default",scene:p[m],autoStart:m===0,data:{}})}c.events.once(l.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new d),this.game.events.emit(l.SYSTEM_READY,this.systemScene,this);var v,c,p,m;for(v=0;v<this._pending.length;v++){c=this._pending[v],p=c.key,m=c.scene;var T;m instanceof d?T=this.createSceneFromInstance(p,m):typeof m=="object"?T=this.createSceneFromObject(p,m):typeof m=="function"&&(T=this.createSceneFromFunction(p,m)),p=T.sys.settings.key,this.keys[p]=T,this.scenes.push(T),this._data[p]&&(T.sys.settings.data=this._data[p].data,this._data[p].autoStart&&(c.autoStart=!0)),(c.autoStart||T.sys.settings.active)&&this._start.push(p)}for(this._pending.length=0,this._data={},this.isBooted=!0,v=0;v<this._start.length;v++)c=this._start[v],this.start(c);this._start.length=0}},processQueue:function(){var v=this._pending.length,c=this._queue.length;if(!(v===0&&c===0)){var p,m;if(v){for(p=0;p<v;p++)m=this._pending[p],this.add(m.key,m.scene,m.autoStart,m.data);for(p=0;p<this._start.length;p++)m=this._start[p],this.start(m);this._start.length=0,this._pending.length=0}for(p=0;p<this._queue.length;p++)m=this._queue[p],this[m.op](m.keyA,m.keyB,m.data);this._queue.length=0}},add:function(v,c,p,m){if(p===void 0&&(p=!1),m===void 0&&(m={}),this.isProcessing||!this.isBooted)return this._pending.push({key:v,scene:c,autoStart:p,data:m}),this.isBooted||(this._data[v]={data:m}),null;v=this.getKey(v,c);var T;return c instanceof d?T=this.createSceneFromInstance(v,c):typeof c=="object"?(c.key=v,T=this.createSceneFromObject(v,c)):typeof c=="function"&&(T=this.createSceneFromFunction(v,c)),T.sys.settings.data=m,v=T.sys.settings.key,this.keys[v]=T,this.scenes.push(T),(p||T.sys.settings.active)&&(this._pending.length?this._start.push(v):this.start(v)),T},remove:function(v){if(this.isProcessing)return this.queueOp("remove",v);var c=this.getScene(v);if(!c||c.sys.isTransitioning())return this;var p=this.scenes.indexOf(c),m=c.sys.settings.key;return p>-1&&(delete this.keys[m],this.scenes.splice(p,1),this._start.indexOf(m)>-1&&(p=this._start.indexOf(m),this._start.splice(p,1)),c.sys.destroy()),this},bootScene:function(v){var c=v.sys,p=c.settings;c.sceneUpdate=o,v.init&&(v.init.call(v,p.data),p.status=y.INIT,p.isTransition&&c.events.emit(u.TRANSITION_INIT,p.transitionFrom,p.transitionDuration));var m;c.load&&(m=c.load,m.reset()),m&&v.preload?(v.preload.call(v),p.status=y.LOADING,m.once(r.COMPLETE,this.loadComplete,this),m.start()):this.create(v)},loadComplete:function(v){this.create(v.scene)},payloadComplete:function(v){this.bootScene(v.scene)},update:function(v,c){this.processQueue(),this.isProcessing=!0;for(var p=this.scenes.length-1;p>=0;p--){var m=this.scenes[p].sys;m.settings.status>y.START&&m.settings.status<=y.RUNNING&&m.step(v,c),m.scenePlugin&&m.scenePlugin._target&&m.scenePlugin.step(v,c)}},render:function(v){for(var c=0;c<this.scenes.length;c++){var p=this.scenes[c].sys;p.settings.visible&&p.settings.status>=y.LOADING&&p.settings.status<y.SLEEPING&&p.render(v)}this.isProcessing=!1},create:function(v){var c=v.sys,p=c.settings;v.create&&(p.status=y.CREATING,v.create.call(v,p.data),p.status===y.DESTROYED)||(p.isTransition&&c.events.emit(u.TRANSITION_START,p.transitionFrom,p.transitionDuration),v.update&&(c.sceneUpdate=v.update),p.status=y.RUNNING,c.events.emit(u.CREATE,v))},createSceneFromFunction:function(v,c){var p=new c;if(p instanceof d){var m=p.sys.settings.key;if(m!==""&&(v=m),this.keys.hasOwnProperty(v))throw new Error("Cannot add Scene with duplicate key: "+v);return this.createSceneFromInstance(v,p)}else return p.sys=new a(p),p.sys.settings.key=v,p.sys.init(this.game),p},createSceneFromInstance:function(v,c){var p=c.sys.settings.key;return p===""&&(c.sys.settings.key=v),c.sys.init(this.game),c},createSceneFromObject:function(v,c){var p=new d(c),m=p.sys.settings.key;m!==""?v=m:p.sys.settings.key=v,p.sys.init(this.game);for(var T=["init","preload","create","update","render"],E=0;E<T.length;E++){var P=h(c,T[E],null);P&&(p[T[E]]=P)}if(c.hasOwnProperty("extend")){for(var w in c.extend)if(c.extend.hasOwnProperty(w)){var A=c.extend[w];w==="data"&&p.hasOwnProperty("data")&&typeof A=="object"?p.data.merge(A):w!=="sys"&&(p[w]=A)}}return p},getKey:function(v,c){if(v||(v="default"),typeof c=="function")return v;if(c instanceof d?v=c.sys.settings.key:typeof c=="object"&&c.hasOwnProperty("key")&&(v=c.key),this.keys.hasOwnProperty(v))throw new Error("Cannot add Scene with duplicate key: "+v);return v},getScenes:function(v,c){v===void 0&&(v=!0),c===void 0&&(c=!1);for(var p=[],m=this.scenes,T=0;T<m.length;T++){var E=m[T];E&&(!v||v&&E.sys.isActive())&&p.push(E)}return c?p.reverse():p},getScene:function(v){if(typeof v=="string"){if(this.keys[v])return this.keys[v]}else for(var c=0;c<this.scenes.length;c++)if(v===this.scenes[c])return v;return null},isActive:function(v){var c=this.getScene(v);return c?c.sys.isActive():null},isPaused:function(v){var c=this.getScene(v);return c?c.sys.isPaused():null},isVisible:function(v){var c=this.getScene(v);return c?c.sys.isVisible():null},isSleeping:function(v){var c=this.getScene(v);return c?c.sys.isSleeping():null},pause:function(v,c){var p=this.getScene(v);return p&&p.sys.pause(c),this},resume:function(v,c){var p=this.getScene(v);return p&&p.sys.resume(c),this},sleep:function(v,c){var p=this.getScene(v);return p&&!p.sys.isTransitioning()&&p.sys.sleep(c),this},wake:function(v,c){var p=this.getScene(v);return p&&p.sys.wake(c),this},run:function(v,c){var p=this.getScene(v);if(!p){for(var m=0;m<this._pending.length;m++)if(this._pending[m].key===v){this.queueOp("start",v,c);break}return this}p.sys.isSleeping()?p.sys.wake(c):p.sys.isPaused()?p.sys.resume(c):this.start(v,c)},start:function(v,c){if(!this.isBooted)return this._data[v]={autoStart:!0,data:c},this;var p=this.getScene(v);if(!p)return console.warn("Scene key not found: "+v),this;var m=p.sys,T=m.settings.status;if(T>=y.START&&T<=y.CREATING)return this;if(T>=y.RUNNING&&T<=y.SLEEPING)m.shutdown(),m.sceneUpdate=o,m.start(c);else{m.sceneUpdate=o,m.start(c);var E;if(m.load&&(E=m.load),E&&m.settings.hasOwnProperty("pack")&&(E.reset(),E.addPack({payload:m.settings.pack})))return m.settings.status=y.LOADING,E.once(r.COMPLETE,this.payloadComplete,this),E.start(),this}return this.bootScene(p),this},stop:function(v,c){var p=this.getScene(v);if(p&&!p.sys.isTransitioning()&&p.sys.settings.status!==y.SHUTDOWN){var m=p.sys.load;m&&(m.off(r.COMPLETE,this.loadComplete,this),m.off(r.COMPLETE,this.payloadComplete,this)),p.sys.shutdown(c)}return this},switch:function(v,c,p){var m=this.getScene(v),T=this.getScene(c);return m&&T&&m!==T&&(this.sleep(v),this.isSleeping(c)?this.wake(c,p):this.start(c,p)),this},getAt:function(v){return this.scenes[v]},getIndex:function(v){var c=this.getScene(v);return this.scenes.indexOf(c)},bringToTop:function(v){if(this.isProcessing)return this.queueOp("bringToTop",v);var c=this.getIndex(v),p=this.scenes;if(c!==-1&&c<p.length){var m=this.getScene(v);p.splice(c,1),p.push(m)}return this},sendToBack:function(v){if(this.isProcessing)return this.queueOp("sendToBack",v);var c=this.getIndex(v);if(c!==-1&&c>0){var p=this.getScene(v);this.scenes.splice(c,1),this.scenes.unshift(p)}return this},moveDown:function(v){if(this.isProcessing)return this.queueOp("moveDown",v);var c=this.getIndex(v);if(c>0){var p=c-1,m=this.getScene(v),T=this.getAt(p);this.scenes[c]=T,this.scenes[p]=m}return this},moveUp:function(v){if(this.isProcessing)return this.queueOp("moveUp",v);var c=this.getIndex(v);if(c<this.scenes.length-1){var p=c+1,m=this.getScene(v),T=this.getAt(p);this.scenes[c]=T,this.scenes[p]=m}return this},moveAbove:function(v,c){if(v===c)return this;if(this.isProcessing)return this.queueOp("moveAbove",v,c);var p=this.getIndex(v),m=this.getIndex(c);if(p!==-1&&m!==-1&&m<p){var T=this.getAt(m);this.scenes.splice(m,1),this.scenes.splice(p+(m>p),0,T)}return this},moveBelow:function(v,c){if(v===c)return this;if(this.isProcessing)return this.queueOp("moveBelow",v,c);var p=this.getIndex(v),m=this.getIndex(c);if(p!==-1&&m!==-1&&m>p){var T=this.getAt(m);this.scenes.splice(m,1),p===0?this.scenes.unshift(T):this.scenes.splice(p-(m<p),0,T)}return this},queueOp:function(v,c,p,m){return this._queue.push({op:v,keyA:c,keyB:p,data:m}),this},swapPosition:function(v,c){if(v===c)return this;if(this.isProcessing)return this.queueOp("swapPosition",v,c);var p=this.getIndex(v),m=this.getIndex(c);if(p!==m&&p!==-1&&m!==-1){var T=this.getAt(p);this.scenes[p]=this.scenes[m],this.scenes[m]=T}return this},dump:function(){for(var v=[],c=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],p=0;p<this.scenes.length;p++){var m=this.scenes[p].sys,T=m.settings.visible&&(m.settings.status===y.RUNNING||m.settings.status===y.PAUSED)?"[*] ":"[-] ";T+=m.settings.key+" ("+c[m.settings.status]+")",v.push(T)}console.log(v.join(`
`))},destroy:function(){for(var v=0;v<this.scenes.length;v++){var c=this.scenes[v].sys;c.destroy()}this.systemScene.sys.destroy(),this.update=o,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});C.exports=f}),52209:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(44594),l=s(95540),h=s(37277),r=new y({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(u.BOOT,this.boot,this),d.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},start:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",o,d),this},restart:function(o){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,o),this},transition:function(o){o===void 0&&(o={});var d=l(o,"target",!1),a=this.manager.getScene(d);if(!d||!this.checkValidTransition(a))return!1;var f=l(o,"duration",1e3);this._elapsed=0,this._target=a,this._duration=f,this._willSleep=l(o,"sleep",!1),this._willRemove=l(o,"remove",!1);var v=l(o,"onUpdate",null);v&&(this._onUpdate=v,this._onUpdateScope=l(o,"onUpdateScope",this.scene));var c=l(o,"allowInput",!1);this.settings.transitionAllowInput=c;var p=a.sys.settings;p.isTransition=!0,p.transitionFrom=this.scene,p.transitionDuration=f,p.transitionAllowInput=c,l(o,"moveAbove",!1)?this.manager.moveAbove(this.key,d):l(o,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),a.sys.isSleeping()?a.sys.wake(l(o,"data")):this.manager.start(d,l(o,"data"));var m=l(o,"onStart",null),T=l(o,"onStartScope",this.scene);return m&&m.call(T,this.scene,a,f),this.systems.events.emit(u.TRANSITION_OUT,a,f),!0},checkValidTransition:function(o){return!(!o||o.sys.isActive()||o.sys.isTransitioning()||o===this.scene||this.systems.isTransitioning())},step:function(o,d){this._elapsed+=d,this.transitionProgress=g(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var o=this._target.sys,d=this._target.sys.settings;o.events.emit(u.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(o,d,a,f){return this.manager.add(o,d,a,f)},launch:function(o,d){return o&&o!==this.key&&this.manager.queueOp("start",o,d),this},run:function(o,d){return o&&o!==this.key&&this.manager.queueOp("run",o,d),this},pause:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("pause",o,d),this},resume:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("resume",o,d),this},sleep:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("sleep",o,d),this},wake:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("wake",o,d),this},switch:function(o,d){return o!==this.key&&this.manager.queueOp("switch",this.key,o,d),this},stop:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("stop",o,d),this},setActive:function(o,d,a){d===void 0&&(d=this.key);var f=this.manager.getScene(d);return f&&f.sys.setActive(o,a),this},setVisible:function(o,d){d===void 0&&(d=this.key);var a=this.manager.getScene(d);return a&&a.sys.setVisible(o),this},isSleeping:function(o){return o===void 0&&(o=this.key),this.manager.isSleeping(o)},isActive:function(o){return o===void 0&&(o=this.key),this.manager.isActive(o)},isPaused:function(o){return o===void 0&&(o=this.key),this.manager.isPaused(o)},isVisible:function(o){return o===void 0&&(o=this.key),this.manager.isVisible(o)},swapPosition:function(o,d){return d===void 0&&(d=this.key),o!==d&&this.manager.swapPosition(o,d),this},moveAbove:function(o,d){return d===void 0&&(d=this.key),o!==d&&this.manager.moveAbove(o,d),this},moveBelow:function(o,d){return d===void 0&&(d=this.key),o!==d&&this.manager.moveBelow(o,d),this},remove:function(o){return o===void 0&&(o=this.key),this.manager.remove(o),this},moveUp:function(o){return o===void 0&&(o=this.key),this.manager.moveUp(o),this},moveDown:function(o){return o===void 0&&(o=this.key),this.manager.moveDown(o),this},bringToTop:function(o){return o===void 0&&(o=this.key),this.manager.bringToTop(o),this},sendToBack:function(o){return o===void 0&&(o=this.key),this.manager.sendToBack(o),this},get:function(o){return this.manager.getScene(o)},getStatus:function(o){var d=this.manager.getScene(o);if(d)return d.sys.getStatus()},getIndex:function(o){return o===void 0&&(o=this.key),this.manager.getIndex(o)},shutdown:function(){var o=this.systems.events;o.off(u.SHUTDOWN,this.shutdown,this),o.off(u.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",r,"scenePlugin"),C.exports=r}),55681:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(89993),y=s(35154),u=s(46975),l=s(87033),h={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:g.PENDING,key:y(r,"key",""),active:y(r,"active",!1),visible:y(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:y(r,"pack",!1),cameras:y(r,"cameras",null),map:y(r,"map",u(l,y(r,"mapAdd",{}))),physics:y(r,"physics",{}),loader:y(r,"loader",{}),plugins:y(r,"plugins",!1),input:y(r,"input",{})}}};C.exports=h}),2368:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(89993),u=s(42363),l=s(44594),h=s(27397),r=s(52106),o=s(29747),d=s(55681),a=new g({initialize:function(v,c){this.scene=v,this.game,this.renderer,this.config=c,this.settings=d.create(c),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=o},init:function(f){this.settings.status=y.INIT,this.sceneUpdate=o,this.game=f,this.renderer=f.renderer,this.canvas=f.canvas,this.context=f.context;var v=f.plugins;this.plugins=v,v.addToScene(this,u.Global,[u.CoreScene,r(this),h(this)]),this.events.emit(l.BOOT,this),this.settings.isBooted=!0},step:function(f,v){var c=this.events;c.emit(l.PRE_UPDATE,f,v),c.emit(l.UPDATE,f,v),this.sceneUpdate.call(this.scene,f,v),c.emit(l.POST_UPDATE,f,v)},render:function(f){var v=this.displayList;v.depthSort(),this.events.emit(l.PRE_RENDER,f),this.cameras.render(f,v),this.events.emit(l.RENDER,f)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(f){var v=this.settings,c=this.getStatus();return c!==y.CREATING&&c!==y.RUNNING?console.warn("Cannot pause non-running Scene",v.key):this.settings.active&&(v.status=y.PAUSED,v.active=!1,this.events.emit(l.PAUSE,this,f)),this},resume:function(f){var v=this.events,c=this.settings;return this.settings.active||(c.status=y.RUNNING,c.active=!0,v.emit(l.RESUME,this,f)),this},sleep:function(f){var v=this.settings,c=this.getStatus();return c!==y.CREATING&&c!==y.RUNNING?console.warn("Cannot sleep non-running Scene",v.key):(v.status=y.SLEEPING,v.active=!1,v.visible=!1,this.events.emit(l.SLEEP,this,f)),this},wake:function(f){var v=this.events,c=this.settings;return c.status=y.RUNNING,c.active=!0,c.visible=!0,v.emit(l.WAKE,this,f),c.isTransition&&v.emit(l.TRANSITION_WAKE,c.transitionFrom,c.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var f=this.settings.status;return f>y.PENDING&&f<=y.RUNNING},isSleeping:function(){return this.settings.status===y.SLEEPING},isActive:function(){return this.settings.status===y.RUNNING},isPaused:function(){return this.settings.status===y.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(f){return this.settings.visible=f,this},setActive:function(f,v){return f?this.resume(v):this.pause(v)},start:function(f){var v=this.events,c=this.settings;f&&(c.data=f),c.status=y.START,c.active=!0,c.visible=!0,v.emit(l.START,this),v.emit(l.READY,this,f)},shutdown:function(f){var v=this.events,c=this.settings;v.off(l.TRANSITION_INIT),v.off(l.TRANSITION_START),v.off(l.TRANSITION_COMPLETE),v.off(l.TRANSITION_OUT),c.status=y.SHUTDOWN,c.active=!1,c.visible=!1,v.emit(l.SHUTDOWN,this,f)},destroy:function(){var f=this.events,v=this.settings;v.status=y.DESTROYED,v.active=!1,v.visible=!1,f.emit(l.DESTROY,this),f.removeAllListeners();for(var c=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],p=0;p<c.length;p++)this[c[p]]=null}});C.exports=a}),89993:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};C.exports=R}),69830:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="addedtoscene"}),7919:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="boot"}),46763:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="create"}),11763:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="destroy"}),71555:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pause"}),36735:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="postupdate"}),3809:(C=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="prerender"}),90716:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="preupdate"}),58262:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="ready"}),91633:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="removedfromscene"}),10319:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="render"}),87132:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resume"}),81961:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="shutdown"}),90194:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="sleep"}),6265:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="start"}),33178:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="transitioncomplete"}),43063:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="transitioninit"}),11259:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="transitionout"}),61611:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="transitionstart"}),45209:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="transitionwake"}),22966:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="update"}),21747:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="wake"}),44594:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ADDED_TO_SCENE:s(69830),BOOT:s(7919),CREATE:s(46763),DESTROY:s(11763),PAUSE:s(71555),POST_UPDATE:s(36735),PRE_RENDER:s(3809),PRE_UPDATE:s(90716),READY:s(58262),REMOVED_FROM_SCENE:s(91633),RENDER:s(10319),RESUME:s(87132),SHUTDOWN:s(81961),SLEEP:s(90194),START:s(6265),TRANSITION_COMPLETE:s(33178),TRANSITION_INIT:s(43063),TRANSITION_OUT:s(11259),TRANSITION_START:s(61611),TRANSITION_WAKE:s(45209),UPDATE:s(22966),WAKE:s(21747)}}),62194:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(89993),y=s(79291),u={Events:s(44594),GetPhysicsPlugins:s(27397),GetScenePlugins:s(52106),SceneManager:s(60903),ScenePlugin:s(52209),Settings:s(55681),Systems:s(2368)};u=y(!1,u,g),C.exports=u}),30341:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50792),u=s(14463),l=s(79291),h=s(29747),r=new g({Extends:y,initialize:function(d,a,f){y.call(this),this.manager=d,this.key=a,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=l(this.config,f),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(console.error("addMarker "+o.name+" already exists in Sound"),!1):(o=l(!0,{name:"",start:0,duration:this.totalDuration-(o.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},o),this.markers[o.name]=o,!0)},updateMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(this.markers[o.name]=l(!0,this.markers[o.name],o),!0):(console.warn("Audio Marker: "+o.name+" missing in Sound: "+this.key),!1)},removeMarker:function(o){var d=this.markers[o];return d?(this.markers[o]=null,d):null},play:function(o,d){if(o===void 0&&(o=""),typeof o=="object"&&(d=o,o=""),typeof o!="string")return!1;if(!o)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[o])return console.warn("Marker: "+o+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[o],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=l(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var o=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,a=Math.pow(o,d);this.totalRate=this.currentConfig.rate*this.manager.rate*a},destroy:function(){this.pendingRemove||(this.stop(),this.emit(u.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});C.exports=r}),85034:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(41786),u=s(50792),l=s(14463),h=s(8443),r=s(46710),o=s(58731),d=s(29747),a=s(26099),f=new g({Extends:u,initialize:function(c){u.call(this),this.game=c,this.jsonCache=c.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new a,c.events.on(h.BLUR,this.onGameBlur,this),c.events.on(h.FOCUS,this.onGameFocus,this),c.events.on(h.PRE_STEP,this.update,this),c.events.once(h.DESTROY,this.destroy,this)},add:d,addAudioSprite:function(v,c){c===void 0&&(c={});var p=this.add(v,c);p.spritemap=this.jsonCache.get(v).spritemap;for(var m in p.spritemap)if(p.spritemap.hasOwnProperty(m)){var T=y(c),E=p.spritemap[m];T.loop=E.hasOwnProperty("loop")?E.loop:!1,p.addMarker({name:m,start:E.start,duration:E.end-E.start,config:T})}return p},get:function(v){return o(this.sounds,"key",v)},getAll:function(v){return v?r(this.sounds,"key",v):r(this.sounds)},getAllPlaying:function(){return r(this.sounds,"isPlaying",!0)},play:function(v,c){var p=this.add(v);return p.once(l.COMPLETE,p.destroy,p),c?c.name?(p.addMarker(c),p.play(c.name)):p.play(c):p.play()},playAudioSprite:function(v,c,p){var m=this.addAudioSprite(v);return m.once(l.COMPLETE,m.destroy,m),m.play(c,p)},remove:function(v){var c=this.sounds.indexOf(v);return c!==-1?(v.destroy(),this.sounds.splice(c,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var c=0,p=this.sounds.length-1;p>=0;p--){var m=this.sounds[p];m.key===v&&(m.destroy(),this.sounds.splice(p,1),c++)}return c},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(l.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(l.RESUME_ALL,this)},setListenerPosition:d,stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(l.STOP_ALL,this)},stopByKey:function(v){var c=0;return this.getAll(v).forEach(function(p){p.stop()&&c++}),c},isPlaying:function(v){var c=this.sounds,p=c.length-1,m;if(v===void 0){for(;p>=0;p--)if(m=this.sounds[p],m.isPlaying)return!0}else for(;p>=0;p--)if(m=this.sounds[p],m.key===v&&m.isPlaying)return!0;return!1},unlock:d,onBlur:d,onFocus:d,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(v,c){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(l.UNLOCKED,this));for(var p=this.sounds.length-1;p>=0;p--)this.sounds[p].pendingRemove&&this.sounds.splice(p,1);this.sounds.forEach(function(m){m.update(v,c)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(v,c){var p=this;this.sounds.forEach(function(m,T){m&&!m.pendingRemove&&v.call(c||p,m,T,p.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(l.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(l.GLOBAL_DETUNE,this,v)}}});C.exports=f}),14747:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(33684),y=s(25960),u=s(57490),l={create:function(h){var r=h.config.audio,o=h.device.audio;return r.noAudio||!o.webAudio&&!o.audioData?new y(h):o.webAudio&&!r.disableWebAudio?new u(h):new g(h)}};C.exports=l}),19723:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="complete"}),98882:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="decodedall"}),57506:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="decoded"}),73146:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="destroy"}),11305:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="detune"}),40577:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="detune"}),30333:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="mute"}),20394:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="rate"}),21802:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="volume"}),1299:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="looped"}),99190:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="loop"}),97125:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="mute"}),89259:(C=>{/**
 * @author       pi-kei
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pan"}),79986:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pauseall"}),17586:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pause"}),19618:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="play"}),42306:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="rate"}),10387:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resumeall"}),48959:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resume"}),9960:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="seek"}),19180:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="stopall"}),98328:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="stop"}),50401:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="unlocked"}),52498:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="volume"}),14463:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={COMPLETE:s(19723),DECODED:s(57506),DECODED_ALL:s(98882),DESTROY:s(73146),DETUNE:s(11305),GLOBAL_DETUNE:s(40577),GLOBAL_MUTE:s(30333),GLOBAL_RATE:s(20394),GLOBAL_VOLUME:s(21802),LOOP:s(99190),LOOPED:s(1299),MUTE:s(97125),PAN:s(89259),PAUSE_ALL:s(79986),PAUSE:s(17586),PLAY:s(19618),RATE:s(42306),RESUME_ALL:s(10387),RESUME:s(48959),SEEK:s(9960),STOP_ALL:s(19180),STOP:s(98328),UNLOCKED:s(50401),VOLUME:s(52498)}}),64895:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(30341),y=s(83419),u=s(14463),l=s(45319),h=new y({Extends:g,initialize:function(o,d,a){if(a===void 0&&(a={}),this.tags=o.game.cache.audio.get(d),!this.tags)throw new Error('No cached audio asset with key "'+d);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,g.call(this,o,d,a)},play:function(r,o){return this.manager.isLocked(this,"play",[r,o])||!g.prototype.play.call(this,r,o)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!g.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!g.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!g.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(u.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,o=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),o===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+o*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var o=this.tags[r];if(o.dataset.used==="false")return o.dataset.used="true",this.audio=o,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(f){f.key===this.key&&f.audio&&d.push(f)},this),d.sort(function(f,v){return f.loop===v.loop?v.seek/v.duration-f.seek/f.duration:f.loop?1:-1});var a=d[0];return this.audio=a.audio,a.reset(),a.audio=null,a.startTime=0,a.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(o){console.warn(o)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){g.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var o=this.currentMarker?this.currentMarker.start:0,d=o+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop)a>=d-this.manager.loopEndOffset?(this.audio.currentTime=o+Math.max(0,a-d),a=this.audio.currentTime):a<o&&(this.audio.currentTime+=o,a=this.audio.currentTime),a<this.previousTime&&this.emit(u.LOOPED,this);else if(a>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(u.COMPLETE,this);return}this.previousTime=a}},destroy:function(){g.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=l(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){g.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(u.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(u.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,u.RATE,r)&&(this.calculateRate(),this.emit(u.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,u.DETUNE,r)&&(this.calculateRate(),this.emit(u.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(u.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(u.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(u.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});C.exports=h}),33684:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(85034),y=s(83419),u=s(14463),l=s(64895),h=new y({Extends:g,initialize:function(o){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,g.call(this,o)},add:function(r,o){var d=new l(this,r,o);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(f,v){for(var c=0;c<v.length;c++)if(v[c].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var o=!1,d=function(){o=!0},a=function(){if(o){o=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",a);var f=[];if(r.game.cache.audio.entries.each(function(c,p){for(var m=0;m<p.length;m++){var T=p[m];T.dataset.locked==="true"&&f.push(T)}return!0}),f.length!==0){var v=f[f.length-1];v.oncanplaythrough=function(){v.oncanplaythrough=null,f.forEach(function(c){c.dataset.locked="false"}),r.unlocked=!0},f.forEach(function(c){c.load()})}};this.once(u.UNLOCKED,function(){for(this.forEachActiveSound(function(v){v.currentMarker===null&&v.duration===0&&(v.duration=v.tags[0].duration),v.totalDuration=v.tags[0].duration});this.lockedActionsQueue.length;){var f=this.lockedActionsQueue.shift();f.sound[f.prop].apply?f.sound[f.prop].apply(f.sound,f.value||[]):f.sound[f.prop]=f.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",a,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){g.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,o,d){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:o,value:d}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(o){o.updateMute()}),this.emit(u.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(o){o.updateVolume()}),this.emit(u.GLOBAL_VOLUME,this,r)}}});C.exports=h}),23717:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={SoundManagerCreator:s(14747),Events:s(14463),BaseSound:s(30341),BaseSoundManager:s(85034),WebAudioSound:s(71741),WebAudioSoundManager:s(57490),HTML5AudioSound:s(64895),HTML5AudioSoundManager:s(33684),NoAudioSound:s(4603),NoAudioSoundManager:s(25960)}}),4603:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(30341),y=s(83419),u=s(50792),l=s(79291),h=s(29747),r=function(){return!1},o=function(){return null},d=function(){return this},a=new y({Extends:u,initialize:function(v,c,p){p===void 0&&(p={}),u.call(this),this.manager=v,this.key=c,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},p),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:r,updateMarker:r,removeMarker:o,play:r,pause:r,resume:r,stop:r,setMute:d,setVolume:d,setRate:d,setDetune:d,setSeek:d,setLoop:d,setPan:d,applyConfig:o,resetConfig:o,update:h,calculateRate:o,destroy:function(){g.prototype.destroy.call(this)}});C.exports=a}),25960:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(85034),y=s(83419),u=s(50792),l=s(4603),h=s(29747),r=new y({Extends:u,initialize:function(d){u.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(o,d){var a=new l(this,o,d);return this.sounds.push(a),a},addAudioSprite:function(o,d){var a=this.add(o,d);return a.spritemap={},a},get:function(o){return g.prototype.get.call(this,o)},getAll:function(o){return g.prototype.getAll.call(this,o)},play:function(o,d){return!1},playAudioSprite:function(o,d,a){return!1},remove:function(o){return g.prototype.remove.call(this,o)},removeAll:function(){return g.prototype.removeAll.call(this)},removeByKey:function(o){return g.prototype.removeByKey.call(this,o)},stopByKey:function(o){return g.prototype.stopByKey.call(this,o)},onBlur:h,onFocus:h,onGameBlur:h,onGameFocus:h,pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,unlock:h,forEachActiveSound:function(o,d){g.prototype.forEachActiveSound.call(this,o,d)},destroy:function(){g.prototype.destroy.call(this)}});C.exports=r}),71741:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(30341),y=s(83419),u=s(14463),l=s(95540),h=new y({Extends:g,initialize:function(o,d,a){if(a===void 0&&(a={}),this.audioBuffer=o.game.cache.audio.get(d),!this.audioBuffer)throw new Error('Audio key "'+d+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=o.context.createGain(),this.volumeNode=o.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),o.context.createPanner&&(this.spatialNode=o.context.createPanner(),this.volumeNode.connect(this.spatialNode)),o.context.createStereoPanner?(this.pannerNode=o.context.createStereoPanner(),o.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(o.destination)):o.context.createPanner?this.spatialNode.connect(o.destination):this.volumeNode.connect(o.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,g.call(this,o,d,a)},play:function(r,o){return g.prototype.play.call(this,r,o)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(u.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!g.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!g.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(u.RESUME,this),!0)},stop:function(){return g.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(u.STOP,this),!0):!1},createAndStartBufferSource:function(){var r=this.currentConfig.seek,o=this.currentConfig.delay,d=this.manager.context.currentTime+o,a=(this.currentMarker?this.currentMarker.start:0)+r,f=this.duration-r;this.playTime=d-r,this.startTime=d,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,d),Math.max(0,a),Math.max(0,f)),this.resetConfig()},createAndStartLoopBufferSource:function(){var r=this.getLoopTime(),o=this.currentMarker?this.currentMarker.start:0,d=this.duration;this.loopTime=r,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,r),Math.max(0,o),Math.max(0,d))},createBufferSource:function(){var r=this,o=this.manager.context.createBufferSource();return o.buffer=this.audioBuffer,o.connect(this.muteNode),o.onended=function(d){var a=d.target;(a===r.source||a===r.loopSource)&&(r.currentConfig.loop?r.hasLooped=!0:r.hasEnded=!0)},o},stopAndRemoveBufferSource:function(){if(this.source){var r=this.source;this.source=null,r.stop(),r.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var r=this.currentConfig.source;if(r&&this.manager.context.createPanner){var o=this.spatialNode;o.panningModel=l(r,"panningModel","equalpower"),o.distanceModel=l(r,"distanceModel","inverse"),o.orientationX.value=l(r,"orientationX",0),o.orientationY.value=l(r,"orientationY",0),o.orientationZ.value=l(r,"orientationZ",-1),o.refDistance=l(r,"refDistance",1),o.maxDistance=l(r,"maxDistance",1e4),o.rolloffFactor=l(r,"rolloffFactor",1),o.coneInnerAngle=l(r,"coneInnerAngle",360),o.coneOuterAngle=l(r,"coneOuterAngle",0),o.coneOuterGain=l(r,"coneOuterGain",0),this.spatialSource=l(r,"follow",null),this.spatialSource||(o.positionX.value=l(r,"x",0),o.positionY.value=l(r,"y",0),o.positionZ.value=l(r,"z",0))}g.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(r){this.spatialNode&&(this.spatialNode.positionX.value=r)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(r){this.spatialNode&&(this.spatialNode.positionY.value=r)}},update:function(){if(this.isPlaying&&this.spatialSource){var r=l(this.spatialSource,"x",null),o=l(this.spatialSource,"y",null);r&&r!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=r),o&&o!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=o)}this.hasEnded?(g.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(u.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(u.LOOPED,this))},destroy:function(){this.pendingRemove||(g.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){g.prototype.calculateRate.call(this);var r=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,r),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,r)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var r=0,o=0;o<this.rateUpdates.length;o++){var d=0;o<this.rateUpdates.length-1?d=this.rateUpdates[o+1].time:d=this.manager.context.currentTime-this.playTime,r+=(d-this.rateUpdates[o].time)*this.rateUpdates[o].rate}return r},getLoopTime:function(){for(var r=0,o=0;o<this.rateUpdates.length-1;o++)r+=(this.rateUpdates[o+1].time-this.rateUpdates[o].time)*this.rateUpdates[o].rate;var d=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+d.time+(this.duration-r)/d.rate},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.calculateRate(),this.emit(u.RATE,this,r)}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.calculateRate(),this.emit(u.DETUNE,this,r)}},setDetune:function(r){return this.detune=r,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(r){this.currentConfig.mute=r,this.muteNode.gain.setValueAtTime(r?0:1,0),this.emit(u.MUTE,this,r)}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(r){this.currentConfig.volume=r,this.volumeNode.gain.setValueAtTime(r,0),this.emit(u.VOLUME,this,r)}},setVolume:function(r){return this.volume=r,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.currentConfig.seek=r,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(u.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),r&&this.createAndStartLoopBufferSource()),this.emit(u.LOOP,this,r)}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(r){this.currentConfig.pan=r,this.pannerNode&&this.pannerNode.pan.setValueAtTime(r,this.manager.context.currentTime),this.emit(u.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});C.exports=h}),57490:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(53134),y=s(85034),u=s(83419),l=s(14463),h=s(8443),r=s(71741),o=s(95540),d=new u({Extends:y,initialize:function(f){this.context=this.createAudioContext(f),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),y.call(this,f),this.locked&&f.isBooted?this.unlock():f.events.once(h.BOOT,this.unlock,this)},createAudioContext:function(a){var f=a.config.audio;if(f.context)return f.context.resume(),f.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(a){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=a,this.masterMuteNode=a.createGain(),this.masterVolumeNode=a.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(a.destination),this.destination=this.masterMuteNode,this},add:function(a,f){var v=new r(this,a,f);return this.sounds.push(v),v},decodeAudio:function(a,f){var v;Array.isArray(a)?v=a:v=[{key:a,data:f}];for(var c=this.game.cache.audio,p=v.length,m=0;m<v.length;m++){var T=v[m],E=T.key,P=T.data;typeof P=="string"&&(P=g(P));var w=(function(b,O){c.add(b,O),this.emit(l.DECODED,b),p--,p===0&&this.emit(l.DECODED_ALL)}).bind(this,E),A=(function(b,O){console.error("Error decoding audio: "+b+" - ",O?O.message:""),p--,p===0&&this.emit(l.DECODED_ALL)}).bind(this,E);this.context.decodeAudioData(P,w,A)}},setListenerPosition:function(a,f){return a===void 0&&(a=this.game.scale.width/2),f===void 0&&(f=this.game.scale.height/2),this.listenerPosition.set(a,f),this},unlock:function(){var a=this,f=document.body,v=function c(){if(a.context&&f){var p=f.removeEventListener.bind(f);a.context.resume().then(function(){p("touchstart",c),p("touchend",c),p("click",c),p("keydown",c),a.unlocked=!0},function(){p("touchstart",c),p("touchend",c),p("click",c),p("keydown",c)})}};f&&(f.addEventListener("touchstart",v,!1),f.addEventListener("touchend",v,!1),f.addEventListener("click",v,!1),f.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var a=this.context;a&&!this.locked&&(a.state==="suspended"||a.state==="interrupted")&&a.resume()},update:function(a,f){var v=this.context.listener;if(v&&v.positionX!==void 0){var c=o(this.listenerPosition,"x",null),p=o(this.listenerPosition,"y",null);c&&c!==this._spatialx&&(this._spatialx=v.positionX.value=c),p&&p!==this._spatialy&&(this._spatialy=v.positionY.value=p)}y.prototype.update.call(this,a,f),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var a=this;this.context.close().then(function(){a.context=null})}y.prototype.destroy.call(this)},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(a){this.masterMuteNode.gain.setValueAtTime(a?0:1,0),this.emit(l.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(a){this.masterVolumeNode.gain.setValueAtTime(a,0),this.emit(l.GLOBAL_VOLUME,this,a)}}});C.exports=d}),73162:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37105),y=s(83419),u=s(29747),l=s(19186),h=new y({initialize:function(o){this.parent=o,this.list=[],this.position=0,this.addCallback=u,this.removeCallback=u,this._sortKey=""},add:function(r,o){return o?g.Add(this.list,r):g.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,o,d){return d?g.AddAt(this.list,r,o):g.AddAt(this.list,r,o,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,o){return r?(o===void 0&&(o=function(d,a){return d[r]-a[r]}),l(this.list,o),this):this},getByName:function(r){return g.GetFirst(this.list,"name",r)},getRandom:function(r,o){return g.GetRandom(this.list,r,o)},getFirst:function(r,o,d,a){return g.GetFirst(this.list,r,o,d,a)},getAll:function(r,o,d,a){return g.GetAll(this.list,r,o,d,a)},count:function(r,o){return g.CountAllMatching(this.list,r,o)},swap:function(r,o){g.Swap(this.list,r,o)},moveTo:function(r,o){return g.MoveTo(this.list,r,o)},moveAbove:function(r,o){return g.MoveAbove(this.list,r,o)},moveBelow:function(r,o){return g.MoveBelow(this.list,r,o)},remove:function(r,o){return o?g.Remove(this.list,r):g.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,o){return o?g.RemoveAt(this.list,r):g.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,o,d){return d?g.RemoveBetween(this.list,r,o):g.RemoveBetween(this.list,r,o,this.removeCallback,this)},removeAll:function(r){for(var o=this.list.length;o--;)this.remove(this.list[o],r);return this},bringToTop:function(r){return g.BringToTop(this.list,r)},sendToBack:function(r){return g.SendToBack(this.list,r)},moveUp:function(r){return g.MoveUp(this.list,r),r},moveDown:function(r){return g.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return g.Shuffle(this.list),this},replace:function(r,o){return g.Replace(this.list,r,o)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,o,d,a){return g.SetAll(this.list,r,o,d,a),this},each:function(r,o){for(var d=[null],a=2;a<arguments.length;a++)d.push(arguments[a]);for(a=0;a<this.list.length;a++)d[0]=this.list[a],r.apply(o,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});C.exports=h}),90330:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l){this.entries={},this.size=0,this.setAll(l)},setAll:function(u){if(Array.isArray(u))for(var l=0;l<u.length;l++)this.set(u[l][0],u[l][1]);return this},set:function(u,l){return this.has(u)||this.size++,this.entries[u]=l,this},get:function(u){if(this.has(u))return this.entries[u]},getArray:function(){var u=[],l=this.entries;for(var h in l)u.push(l[h]);return u},has:function(u){return this.entries.hasOwnProperty(u)},delete:function(u){return this.has(u)&&(delete this.entries[u],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(u){delete this.entries[u]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var u=[],l=this.entries;for(var h in l)u.push(l[h]);return u},dump:function(){var u=this.entries;console.group("Map");for(var l in u)console.log(l,u[l]);console.groupEnd()},each:function(u){var l=this.entries;for(var h in l)if(u(h,l[h])===!1)break;return this},contains:function(u){var l=this.entries;for(var h in l)if(l[h]===u)return!0;return!1},merge:function(u,l){l===void 0&&(l=!1);var h=this.entries,r=u.entries;for(var o in r)h.hasOwnProperty(o)&&l?h[o]=r[o]:this.set(o,r[o]);return this}});C.exports=y}),25774:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50792),u=s(82348),l=new g({Extends:y,initialize:function(){y.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(h){return this._active.indexOf(h)>-1},isPending:function(h){return this._toProcess>0&&this._pending.indexOf(h)>-1},isDestroying:function(h){return this._destroy.indexOf(h)>-1},add:function(h){return this.checkQueue&&this.isActive(h)&&!this.isDestroying(h)||this.isPending(h)||(this._pending.push(h),this._toProcess++),h},remove:function(h){if(this.isPending(h)){var r=this._pending,o=r.indexOf(h);o!==-1&&r.splice(o,1)}else this.isActive(h)&&(this._destroy.push(h),this._toProcess++);return h},removeAll:function(){for(var h=this._active,r=this._destroy,o=h.length;o--;)r.push(h[o]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,r=this._active,o,d;for(o=0;o<h.length;o++){d=h[o];var a=r.indexOf(d);a!==-1&&(r.splice(a,1),this.emit(u.PROCESS_QUEUE_REMOVE,d))}for(h.length=0,h=this._pending,o=0;o<h.length;o++)d=h[o],(!this.checkQueue||this.checkQueue&&r.indexOf(d)===-1)&&(r.push(d),this.emit(u.PROCESS_QUEUE_ADD,d));return h.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});C.exports=l}),59542:((C,R,s)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(43886);function y(P){if(!(this instanceof y))return new y(P);this._maxEntries=Math.max(4,P||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}y.prototype={all:function(){return this._all(this.data,[])},search:function(P){var w=this.data,A=[],b=this.toBBox;if(!m(P,w))return A;for(var O=[],I,D,B,k;w;){for(I=0,D=w.children.length;I<D;I++)B=w.children[I],k=w.leaf?b(B):B,m(P,k)&&(w.leaf?A.push(B):p(P,k)?this._all(B,A):O.push(B));w=O.pop()}return A},collides:function(P){var w=this.data,A=this.toBBox;if(!m(P,w))return!1;for(var b=[],O,I,D,B;w;){for(O=0,I=w.children.length;O<I;O++)if(D=w.children[O],B=w.leaf?A(D):D,m(P,B)){if(w.leaf||p(P,B))return!0;b.push(D)}w=b.pop()}return!1},load:function(P){if(!(P&&P.length))return this;if(P.length<this._minEntries){for(var w=0,A=P.length;w<A;w++)this.insert(P[w]);return this}var b=this._build(P.slice(),0,P.length-1,0);if(!this.data.children.length)this.data=b;else if(this.data.height===b.height)this._splitRoot(this.data,b);else{if(this.data.height<b.height){var O=this.data;this.data=b,b=O}this._insert(b,this.data.height-b.height-1,!0)}return this},insert:function(P){return P&&this._insert(P,this.data.height-1),this},clear:function(){return this.data=T([]),this},remove:function(P,w){if(!P)return this;for(var A=this.data,b=this.toBBox(P),O=[],I=[],D,B,k,N;A||O.length;){if(A||(A=O.pop(),B=O[O.length-1],D=I.pop(),N=!0),A.leaf&&(k=u(P,A.children,w),k!==-1))return A.children.splice(k,1),O.push(A),this._condense(O),this;!N&&!A.leaf&&p(A,b)?(O.push(A),I.push(D),D=0,B=A,A=A.children[0]):B?(D++,A=B.children[D],N=!1):A=null}return this},toBBox:function(P){return P},compareMinX:o,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(P){return this.data=P,this},_all:function(P,w){for(var A=[];P;)P.leaf?w.push.apply(w,P.children):A.push.apply(A,P.children),P=A.pop();return w},_build:function(P,w,A,b){var O=A-w+1,I=this._maxEntries,D;if(O<=I)return D=T(P.slice(w,A+1)),l(D,this.toBBox),D;b||(b=Math.ceil(Math.log(O)/Math.log(I)),I=Math.ceil(O/Math.pow(I,b-1))),D=T([]),D.leaf=!1,D.height=b;var B=Math.ceil(O/I),k=B*Math.ceil(Math.sqrt(I)),N,H,$,J;for(E(P,w,A,k,this.compareMinX),N=w;N<=A;N+=k)for($=Math.min(N+k-1,A),E(P,N,$,B,this.compareMinY),H=N;H<=$;H+=B)J=Math.min(H+B-1,$),D.children.push(this._build(P,H,J,b-1));return l(D,this.toBBox),D},_chooseSubtree:function(P,w,A,b){for(var O,I,D,B,k,N,H,$;b.push(w),!(w.leaf||b.length-1===A);){for(H=$=1/0,O=0,I=w.children.length;O<I;O++)D=w.children[O],k=a(D),N=v(P,D)-k,N<$?($=N,H=k<H?k:H,B=D):N===$&&k<H&&(H=k,B=D);w=B||w.children[0]}return w},_insert:function(P,w,A){var b=this.toBBox,O=A?P:b(P),I=[],D=this._chooseSubtree(O,this.data,w,I);for(D.children.push(P),r(D,O);w>=0&&I[w].children.length>this._maxEntries;)this._split(I,w),w--;this._adjustParentBBoxes(O,I,w)},_split:function(P,w){var A=P[w],b=A.children.length,O=this._minEntries;this._chooseSplitAxis(A,O,b);var I=this._chooseSplitIndex(A,O,b),D=T(A.children.splice(I,A.children.length-I));D.height=A.height,D.leaf=A.leaf,l(A,this.toBBox),l(D,this.toBBox),w?P[w-1].children.push(D):this._splitRoot(A,D)},_splitRoot:function(P,w){this.data=T([P,w]),this.data.height=P.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},_chooseSplitIndex:function(P,w,A){var b,O,I,D,B,k,N,H;for(k=N=1/0,b=w;b<=A-w;b++)O=h(P,0,b,this.toBBox),I=h(P,b,A,this.toBBox),D=c(O,I),B=a(O)+a(I),D<k?(k=D,H=b,N=B<N?B:N):D===k&&B<N&&(N=B,H=b);return H},_chooseSplitAxis:function(P,w,A){var b=P.leaf?this.compareMinX:o,O=P.leaf?this.compareMinY:d,I=this._allDistMargin(P,w,A,b),D=this._allDistMargin(P,w,A,O);I<D&&P.children.sort(b)},_allDistMargin:function(P,w,A,b){P.children.sort(b);var O=this.toBBox,I=h(P,0,w,O),D=h(P,A-w,A,O),B=f(I)+f(D),k,N;for(k=w;k<A-w;k++)N=P.children[k],r(I,P.leaf?O(N):N),B+=f(I);for(k=A-w-1;k>=w;k--)N=P.children[k],r(D,P.leaf?O(N):N),B+=f(D);return B},_adjustParentBBoxes:function(P,w,A){for(var b=A;b>=0;b--)r(w[b],P)},_condense:function(P){for(var w=P.length-1,A;w>=0;w--)P[w].children.length===0?w>0?(A=P[w-1].children,A.splice(A.indexOf(P[w]),1)):this.clear():l(P[w],this.toBBox)},compareMinX:function(P,w){return P.left-w.left},compareMinY:function(P,w){return P.top-w.top},toBBox:function(P){return{minX:P.left,minY:P.top,maxX:P.right,maxY:P.bottom}}};function u(P,w,A){if(!A)return w.indexOf(P);for(var b=0;b<w.length;b++)if(A(P,w[b]))return b;return-1}function l(P,w){h(P,0,P.children.length,w,P)}function h(P,w,A,b,O){O||(O=T(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var I=w,D;I<A;I++)D=P.children[I],r(O,P.leaf?b(D):D);return O}function r(P,w){return P.minX=Math.min(P.minX,w.minX),P.minY=Math.min(P.minY,w.minY),P.maxX=Math.max(P.maxX,w.maxX),P.maxY=Math.max(P.maxY,w.maxY),P}function o(P,w){return P.minX-w.minX}function d(P,w){return P.minY-w.minY}function a(P){return(P.maxX-P.minX)*(P.maxY-P.minY)}function f(P){return P.maxX-P.minX+(P.maxY-P.minY)}function v(P,w){return(Math.max(w.maxX,P.maxX)-Math.min(w.minX,P.minX))*(Math.max(w.maxY,P.maxY)-Math.min(w.minY,P.minY))}function c(P,w){var A=Math.max(P.minX,w.minX),b=Math.max(P.minY,w.minY),O=Math.min(P.maxX,w.maxX),I=Math.min(P.maxY,w.maxY);return Math.max(0,O-A)*Math.max(0,I-b)}function p(P,w){return P.minX<=w.minX&&P.minY<=w.minY&&w.maxX<=P.maxX&&w.maxY<=P.maxY}function m(P,w){return w.minX<=P.maxX&&w.minY<=P.maxY&&w.maxX>=P.minX&&w.maxY>=P.minY}function T(P){return{children:P,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(P,w,A,b,O){for(var I=[w,A],D;I.length;)A=I.pop(),w=I.pop(),!(A-w<=b)&&(D=w+Math.ceil((A-w)/b/2)*b,g(P,D,w,A,O),I.push(w,D,D,A))}C.exports=y}),35072:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l){if(this.entries=[],Array.isArray(l))for(var h=0;h<l.length;h++)this.set(l[h])},set:function(u){return this.entries.indexOf(u)===-1&&this.entries.push(u),this},get:function(u,l){for(var h=0;h<this.entries.length;h++){var r=this.entries[h];if(r[u]===l)return r}},getArray:function(){return this.entries.slice(0)},delete:function(u){var l=this.entries.indexOf(u);return l>-1&&this.entries.splice(l,1),this},dump:function(){console.group("Set");for(var u=0;u<this.entries.length;u++){var l=this.entries[u];console.log(l)}console.groupEnd()},each:function(u,l){var h,r=this.entries.slice(),o=r.length;if(l)for(h=0;h<o&&u.call(l,r[h],h)!==!1;h++);else for(h=0;h<o&&u(r[h],h)!==!1;h++);return this},iterate:function(u,l){var h,r=this.entries.length;if(l)for(h=0;h<r&&u.call(l,this.entries[h],h)!==!1;h++);else for(h=0;h<r&&u(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(u){var l,h=[];for(l=1;l<arguments.length;l++)h.push(arguments[l]);var r=this.entries.length;for(l=0;l<r;l++){var o=this.entries[l];o[u].apply(o,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(u){return this.entries.indexOf(u)>-1},union:function(u){var l=new y;return u.entries.forEach(function(h){l.set(h)}),this.entries.forEach(function(h){l.set(h)}),l},intersect:function(u){var l=new y;return this.entries.forEach(function(h){u.contains(h)&&l.set(h)}),l},difference:function(u){var l=new y;return this.entries.forEach(function(h){u.contains(h)||l.set(h)}),l},size:{get:function(){return this.entries.length},set:function(u){return u<this.entries.length?this.entries.length=u:this.entries.length}}});C.exports=y}),86555:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45319),y=s(83419),u=s(56583),l=s(26099),h=new y({initialize:function(o,d,a,f){o===void 0&&(o=0),d===void 0&&(d=o),a===void 0&&(a=0),f===void 0&&(f=null),this._width=o,this._height=d,this._parent=f,this.aspectMode=a,this.aspectRatio=d===0?1:o/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new l},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,o){return r===void 0&&(r=0),o===void 0&&(o=r),this.snapTo.set(r,o),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,o){return r===void 0&&(r=0),o===void 0&&(o=r),this.minWidth=g(r,0,this.maxWidth),this.minHeight=g(o,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,o){return r===void 0&&(r=Number.MAX_VALUE),o===void 0&&(o=r),this.maxWidth=g(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=g(o,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,o){switch(r===void 0&&(r=0),o===void 0&&(o=r),this.aspectMode){case h.NONE:this._width=this.getNewWidth(u(r,this.snapTo.x)),this._height=this.getNewHeight(u(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(u(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(u(o,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(r,o,!0);break;case h.ENVELOP:this.constrain(r,o,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,o){return this._width=this.getNewWidth(u(r,this.snapTo.x)),this._height=this.getNewHeight(u(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,o){return o===void 0&&(o=!0),r=g(r,this.minWidth,this.maxWidth),o&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,o){return o===void 0&&(o=!0),r=g(r,this.minHeight,this.maxHeight),o&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,o,d){r===void 0&&(r=0),o===void 0&&(o=r),d===void 0&&(d=!0),r=this.getNewWidth(r),o=this.getNewHeight(o);var a=this.snapTo,f=o===0?1:r/o;return d&&this.aspectRatio>f||!d&&this.aspectRatio<f?(r=u(r,a.x),o=r/this.aspectRatio,a.y>0&&(o=u(o,a.y),r=o*this.aspectRatio)):(d&&this.aspectRatio<f||!d&&this.aspectRatio>f)&&(o=u(o,a.y),r=o*this.aspectRatio,a.x>0&&(r=u(r,a.x),o=r*(1/this.aspectRatio))),this._width=r,this._height=o,this},fitTo:function(r,o){return this.constrain(r,o,!0)},envelop:function(r,o){return this.constrain(r,o,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,C.exports=h}),15238:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="add"}),56187:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="remove"}),82348:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={PROCESS_QUEUE_ADD:s(15238),PROCESS_QUEUE_REMOVE:s(56187)}}),41392:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Events:s(82348),List:s(73162),Map:s(90330),ProcessQueue:s(25774),RTree:s(59542),Set:s(35072),Size:s(86555)}}),57382:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(45319),u=s(40987),l=s(8054),h=s(50030),r=s(79237),o=new g({Extends:r,initialize:function(a,f,v,c,p){r.call(this,a,f,v,c,p),this.add("__BASE",0,0,0,c,p),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=c,this.height=p,this.imageData=this.context.getImageData(0,0,c,p),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===l.WEBGL&&this.refresh(),this},draw:function(d,a,f,v){return v===void 0&&(v=!0),this.context.drawImage(f,d,a),v&&this.update(),this},drawFrame:function(d,a,f,v,c){f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=!0);var p=this.manager.getFrame(d,a);if(p){var m=p.canvasData,T=p.cutWidth,E=p.cutHeight,P=p.source.resolution;this.context.drawImage(p.source.image,m.x,m.y,T,E,f,v,T/P,E/P),c&&this.update()}return this},setPixel:function(d,a,f,v,c,p){p===void 0&&(p=255),d=Math.abs(Math.floor(d)),a=Math.abs(Math.floor(a));var m=this.getIndex(d,a);if(m>-1){var T=this.context.getImageData(d,a,1,1);T.data[0]=f,T.data[1]=v,T.data[2]=c,T.data[3]=p,this.context.putImageData(T,d,a)}return this},putData:function(d,a,f,v,c,p,m){return v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=d.width),m===void 0&&(m=d.height),this.context.putImageData(d,a,f,v,c,p,m),this},getData:function(d,a,f,v){d=y(Math.floor(d),0,this.width-1),a=y(Math.floor(a),0,this.height-1),f=y(f,1,this.width-d),v=y(v,1,this.height-a);var c=this.context.getImageData(d,a,f,v);return c},getPixel:function(d,a,f){f||(f=new u);var v=this.getIndex(d,a);if(v>-1){var c=this.data,p=c[v+0],m=c[v+1],T=c[v+2],E=c[v+3];f.setTo(p,m,T,E)}return f},getPixels:function(d,a,f,v){d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=this.width),v===void 0&&(v=f),d=Math.abs(Math.round(d)),a=Math.abs(Math.round(a));for(var c=y(d,0,this.width),p=y(d+f,0,this.width),m=y(a,0,this.height),T=y(a+v,0,this.height),E=new u,P=[],w=m;w<T;w++){for(var A=[],b=c;b<p;b++)E=this.getPixel(b,w,E),A.push({x:b,y:w,color:E.color,alpha:E.alphaGL});P.push(A)}return P},getIndex:function(d,a){return d=Math.abs(Math.round(d)),a=Math.abs(Math.round(a)),d<this.width&&a<this.height?(d+a*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,a,f,v,c){return d===void 0&&(d=0),a===void 0&&(a=0),f===void 0&&(f=this.width),v===void 0&&(v=this.height),c===void 0&&(c=!0),this.context.clearRect(d,a,f,v),c&&this.update(),this},setSize:function(d,a){return a===void 0&&(a=d),(d!==this.width||a!==this.height)&&(this.canvas.width=d,this.canvas.height=a,this._source.width=d,this._source.height=a,this._source.isPowerOf2=h(d,a),this.frames.__BASE.setSize(d,a,0,0),this.width=d,this.height=a,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});C.exports=o}),81320:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(10312),y=s(38058),u=s(27919),l=s(83419),h=s(8054),r=s(4327),o=s(95540),d=s(36060),a=s(32302),f=s(79237),v=s(70554),c=new l({Extends:f,initialize:function(m,T,E,P){E===void 0&&(E=256),P===void 0&&(P=256),this.type="DynamicTexture";var w=m.game.renderer,A=w&&w.type===h.CANVAS,b=A?u.create2D(this,E,P):[this];f.call(this,m,T,b,E,P),this.add("__BASE",0,0,0,E,P),this.renderer=w,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=A?b:null,this.context=A?b.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new y(0,0,E,P).setScene(m.game.scene.systemScene,!1),this.renderTarget=A?null:new a(w,E,P,1,0,!1,!1,!0,!1),this.pipeline=A?null:w.pipelines.get(d.SINGLE_PIPELINE),this.setSize(E,P)},setSize:function(p,m){m===void 0&&(m=p);var T=this.get(),E=T.source;if(p!==this.width||m!==this.height){this.canvas&&(this.canvas.width=p,this.canvas.height=m);var P=this.renderTarget;P&&(P.willResize(p,m)&&P.resize(p,m),P.texture!==E.glTexture&&this.renderer.deleteTexture(E.glTexture),this.setFromRenderTarget()),this.camera.setSize(p,m),E.width=p,E.height=m,T.setSize(p,m),this.width=p,this.height=m}else{var w=this.getSourceImage();T.cutX+p>w.width&&(p=w.width-T.cutX),T.cutY+m>w.height&&(m=w.height-T.cutY),T.setSize(p,m,T.cutX,T.cutY)}return this},setFromRenderTarget:function(){var p=this.get(),m=p.source,T=this.renderTarget;return m.isRenderTexture=!0,m.isGLTexture=!0,m.glTexture=T.texture,this},setIsSpriteTexture:function(p){return this.isSpriteTexture=p,this},fill:function(p,m,T,E,P,w){var A=this.camera,b=this.renderer;m===void 0&&(m=1),T===void 0&&(T=0),E===void 0&&(E=0),P===void 0&&(P=this.width),w===void 0&&(w=this.height);var O=p>>16&255,I=p>>8&255,D=p&255,B=this.renderTarget;if(A.preRender(),B){B.bind(!0);var k=this.pipeline.manager.set(this.pipeline),N=b.width/B.width,H=b.height/B.height,$=B.height-(E+w);k.drawFillRect(T*N,$*H,P*N,w*H,v.getTintFromFloats(D/255,I/255,O/255,1),m),B.unbind(!0)}else{var J=this.context;b.setContext(J),J.globalCompositeOperation="source-over",J.fillStyle="rgba("+O+","+I+","+D+","+m+")",J.fillRect(T,E,P,w),b.setContext()}return this.dirty=!0,this},clear:function(p,m,T,E){if(this.dirty){var P=this.context,w=this.renderTarget;w?w.clear(p,m,T,E):P&&(p!==void 0&&m!==void 0&&T!==void 0&&E!==void 0?P.clearRect(p,m,T,E):(P.save(),P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,this.width,this.height),P.restore())),this.dirty=!1}return this},stamp:function(p,m,T,E,P){T===void 0&&(T=0),E===void 0&&(E=0);var w=o(P,"alpha",1),A=o(P,"tint",16777215),b=o(P,"angle",0),O=o(P,"rotation",0),I=o(P,"scale",1),D=o(P,"scaleX",I),B=o(P,"scaleY",I),k=o(P,"originX",.5),N=o(P,"originY",.5),H=o(P,"blendMode",0),$=o(P,"erase",!1),J=o(P,"skipBatch",!1),q=this.manager.resetStamp(w,A);return q.setAngle(0),b!==0?q.setAngle(b):O!==0&&q.setRotation(O),q.setScale(D,B),q.setTexture(p,m),q.setOrigin(k,N),q.setBlendMode(H),$&&(this._eraseMode=!0),J?this.batchGameObject(q,T,E):this.draw(q,T,E),$&&(this._eraseMode=!1),this},erase:function(p,m,T){return this._eraseMode=!0,this.draw(p,m,T),this._eraseMode=!1,this},draw:function(p,m,T,E,P){return this.beginDraw(),this.batchDraw(p,m,T,E,P),this.endDraw(),this},drawFrame:function(p,m,T,E,P,w){return this.beginDraw(),this.batchDrawFrame(p,m,T,E,P,w),this.endDraw(),this},repeat:function(p,m,T,E,P,w,A,b,O){if(T===void 0&&(T=0),E===void 0&&(E=0),P===void 0&&(P=this.width),w===void 0&&(w=this.height),A===void 0&&(A=1),b===void 0&&(b=16777215),O===void 0&&(O=!1),p instanceof r?m=p:m=this.manager.getFrame(p,m),!m)return this;var I=this.manager.resetStamp(A,b);I.setFrame(m),I.setOrigin(0);var D=m.width,B=m.height;P=Math.floor(P),w=Math.floor(w);var k=Math.ceil(P/D),N=Math.ceil(w/B),H=k*D-P,$=N*B-w;H>0&&(H=D-H),$>0&&($=B-$),T<0&&(k+=Math.ceil(Math.abs(T)/D)),E<0&&(N+=Math.ceil(Math.abs(E)/B));var J=T,q=E,Y=!1,K=this.manager.stampCrop.setTo(0,0,D,B);O||this.beginDraw();for(var V=0;V<N;V++){if(q+B<0){q+=B;continue}for(var U=0;U<k;U++){if(Y=!1,J+D<0){J+=D;continue}else J<0&&(Y=!0,K.width=D+J,K.x=D-K.width);q<0&&(Y=!0,K.height=B+q,K.y=B-K.height),H>0&&U===k-1&&(Y=!0,K.width=H),$>0&&V===N-1&&(Y=!0,K.height=$),Y&&I.setCrop(K),this.batchGameObject(I,J,q),I.isCropped=!1,K.setTo(0,0,D,B),J+=D}J=T,q+=B}return O||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var p=this.camera,m=this.renderer,T=this.renderTarget;p.preRender(),T?m.beginCapture(T.width,T.height):m.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(p,m,T,E,P){return Array.isArray(p)||(p=[p]),this.batchList(p,m,T,E,P),this},batchDrawFrame:function(p,m,T,E,P,w){T===void 0&&(T=0),E===void 0&&(E=0),P===void 0&&(P=1),w===void 0&&(w=16777215);var A=this.manager.getFrame(p,m);return A&&(this.renderTarget?this.pipeline.batchTextureFrame(A,T,E,w,P,this.camera.matrix,null):this.batchTextureFrame(A,T,E,P,w)),this},endDraw:function(p){if(p===void 0&&(p=this._eraseMode),this.isDrawing){var m=this.renderer,T=this.renderTarget;if(T){var E=m.endCapture(),P=m.pipelines.setUtility();P.blitFrame(E,T,1,!1,!1,p,this.isSpriteTexture),m.resetScissor(),m.resetViewport()}else m.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(p,m,T,E,P){var w=p.length;if(w!==0)for(var A=0;A<w;A++){var b=p[A];!b||b===this||(b.renderWebGL||b.renderCanvas?this.batchGameObject(b,m,T):b.isParent||b.list?this.batchGroup(b.getChildren(),m,T):typeof b=="string"?this.batchTextureFrameKey(b,null,m,T,E,P):b instanceof r?this.batchTextureFrame(b,m,T,E,P):Array.isArray(b)&&this.batchList(b,m,T,E,P))}},batchGroup:function(p,m,T){m===void 0&&(m=0),T===void 0&&(T=0);for(var E=0;E<p.length;E++){var P=p[E];P.willRender(this.camera)&&this.batchGameObject(P,P.x+m,P.y+T)}},batchGameObject:function(p,m,T){m===void 0&&(m=p.x),T===void 0&&(T=p.y);var E=p.x,P=p.y,w=this.camera,A=this.renderer,b=this._eraseMode,O=p.mask;if(p.setPosition(m,T),this.canvas){if(b){var I=p.blendMode;p.blendMode=g.ERASE}O&&O.preRenderCanvas(A,p,w),p.renderCanvas(A,p,w,null),O&&O.postRenderCanvas(A,p,w),b&&(p.blendMode=I)}else A&&(O&&O.preRenderWebGL(A,p,w),b||A.setBlendMode(p.blendMode),p.renderWebGL(A,p,w),O&&O.postRenderWebGL(A,w,this.renderTarget));p.setPosition(E,P)},batchTextureFrameKey:function(p,m,T,E,P,w){var A=this.manager.getFrame(p,m);A&&this.batchTextureFrame(A,T,E,P,w)},batchTextureFrame:function(p,m,T,E,P){m===void 0&&(m=0),T===void 0&&(T=0),E===void 0&&(E=1),P===void 0&&(P=16777215);var w=this.camera.matrix,A=this.renderTarget;if(A)this.pipeline.batchTextureFrame(p,m,T,P,E,w,null);else{var b=this.context,O=p.canvasData,I=p.source.image;b.save(),b.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",b.globalAlpha=E,w.setToContext(b),O.width>0&&O.height>0&&b.drawImage(I,O.x,O.y,O.width,O.height,m,T,O.width,O.height),b.restore()}},snapshotArea:function(p,m,T,E,P,w,A){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,p,m,T,E,w,A):this.renderer.snapshotCanvas(this.canvas,P,!1,p,m,T,E,w,A),this},snapshot:function(p,m,T){return this.snapshotArea(0,0,this.width,this.height,p,m,T)},snapshotPixel:function(p,m,T){return this.snapshotArea(p,m,1,1,T,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(p,m,T,E){var P=this.manager.resetStamp();P.setTexture(this),P.setOrigin(0),P.renderWebGL(p,P,T,E)},renderCanvas:function(){},destroy:function(){var p=this.manager.stamp;p&&p.texture===this&&this.manager.resetStamp(),f.prototype.destroy.call(this),u.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});C.exports=c}),4327:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(45319),u=s(79291),l=new g({initialize:function(r,o,d,a,f,v,c){this.texture=r,this.name=o,this.source=r.source[d],this.sourceIndex=d,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(v,c,a,f)},setCutPosition:function(h,r){return h===void 0&&(h=0),r===void 0&&(r=0),this.cutX=h,this.cutY=r,this.updateUVs()},setCutSize:function(h,r){return this.cutWidth=h,this.cutHeight=r,this.updateUVs()},setSize:function(h,r,o,d){o===void 0&&(o=0),d===void 0&&(d=0),this.setCutPosition(o,d),this.setCutSize(h,r),this.width=h,this.height=r,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(r/2);var a=this.data,f=a.cut;f.x=o,f.y=d,f.w=h,f.h=r,f.r=o+h,f.b=d+r,a.sourceSize.w=h,a.sourceSize.h=r,a.spriteSourceSize.w=h,a.spriteSourceSize.h=r,a.radius=.5*Math.sqrt(h*h+r*r);var v=a.drawImage;return v.x=o,v.y=d,v.width=h,v.height=r,this.updateUVs()},setTrim:function(h,r,o,d,a,f){var v=this.data,c=v.spriteSourceSize;return v.trim=!0,v.sourceSize.w=h,v.sourceSize.h=r,c.x=o,c.y=d,c.w=a,c.h=f,c.r=o+a,c.b=d+f,this.x=o,this.y=d,this.width=a,this.height=f,this.halfWidth=a*.5,this.halfHeight=f*.5,this.centerX=Math.floor(a/2),this.centerY=Math.floor(f/2),this.updateUVs()},setScale9:function(h,r,o,d){var a=this.data;return a.scale9=!0,a.is3Slice=r===0&&d===this.height,a.scale9Borders.x=h,a.scale9Borders.y=r,a.scale9Borders.w=o,a.scale9Borders.h=d,this},setCropUVs:function(h,r,o,d,a,f,v){var c=this.cutX,p=this.cutY,m=this.cutWidth,T=this.cutHeight,E=this.realWidth,P=this.realHeight;r=y(r,0,E),o=y(o,0,P),d=y(d,0,E-r),a=y(a,0,P-o);var w=c+r,A=p+o,b=d,O=a,I=this.data;if(I.trim){var D=I.spriteSourceSize;d=y(d,0,m-r),a=y(a,0,T-o);var B=r+d,k=o+a,N=!(D.r<r||D.b<o||D.x>B||D.y>k);if(N){var H=Math.max(D.x,r),$=Math.max(D.y,o),J=Math.min(D.r,B)-H,q=Math.min(D.b,k)-$;b=J,O=q,f?w=c+(m-(H-D.x)-J):w=c+(H-D.x),v?A=p+(T-($-D.y)-q):A=p+($-D.y),r=H,o=$,d=J,a=q}else w=0,A=0,b=0,O=0}else f&&(w=c+(m-r-d)),v&&(A=p+(T-o-a));var Y=this.source.width,K=this.source.height;return h.u0=Math.max(0,w/Y),h.v0=Math.max(0,A/K),h.u1=Math.min(1,(w+b)/Y),h.v1=Math.min(1,(A+O)/K),h.x=r,h.y=o,h.cx=w,h.cy=A,h.cw=b,h.ch=O,h.width=d,h.height=a,h.flipX=f,h.flipY=v,h},updateCropUVs:function(h,r,o){return this.setCropUVs(h,h.x,h.y,h.width,h.height,r,o)},setUVs:function(h,r,o,d,a,f){var v=this.data.drawImage;return v.width=h,v.height=r,this.u0=o,this.v0=d,this.u1=a,this.v1=f,this},updateUVs:function(){var h=this.cutX,r=this.cutY,o=this.cutWidth,d=this.cutHeight,a=this.data.drawImage;a.width=o,a.height=d;var f=this.source.width,v=this.source.height;return this.u0=h/f,this.v0=r/v,this.u1=(h+o)/f,this.v1=(r+d)/v,this},updateUVsInverted:function(){var h=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/r,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var h=new l(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=u(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});C.exports=l}),79237:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(4327),u=s(11876),l='Texture "%s" has no frame "%s"',h=new g({initialize:function(o,d,a,f,v){Array.isArray(a)||(a=[a]),this.manager=o,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var c=0;c<a.length;c++)this.source.push(new u(this,a[c],f,v))},add:function(r,o,d,a,f,v){if(this.has(r))return null;var c=new y(this,r,o,d,a,f,v);return this.frames[r]=c,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,c},remove:function(r){if(this.has(r)){var o=this.get(r);return o.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames.hasOwnProperty(r)},get:function(r){r||(r=this.firstFrame);var o=this.frames[r];return o||(console.warn(l,this.key,r),o=this.frames[this.firstFrame]),o},getTextureSourceIndex:function(r){for(var o=0;o<this.source.length;o++)if(this.source[o]===r)return o;return-1},getFramesFromTextureSource:function(r,o){o===void 0&&(o=!1);var d=[];for(var a in this.frames)if(!(a==="__BASE"&&!o)){var f=this.frames[a];f.sourceIndex===r&&d.push(f)}return d},getFrameBounds:function(r){r===void 0&&(r=0);for(var o=this.getFramesFromTextureSource(r,!0),d=o[0],a=d.cutX,f=d.cutY,v=d.cutX+d.cutWidth,c=d.cutY+d.cutHeight,p=1;p<o.length;p++){var m=o[p];m.cutX<a&&(a=m.cutX),m.cutY<f&&(f=m.cutY),m.cutX+m.cutWidth>v&&(v=m.cutX+m.cutWidth),m.cutY+m.cutHeight>c&&(c=m.cutY+m.cutHeight)}return{x:a,y:f,width:v-a,height:c-f}},getFrameNames:function(r){r===void 0&&(r=!1);var o=Object.keys(this.frames);if(!r){var d=o.indexOf("__BASE");d!==-1&&o.splice(d,1)}return o},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var o=this.frames[r];return o?o.source.image:(console.warn(l,this.key,r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var o=this.frames[r],d;return o?d=o.sourceIndex:(console.warn(l,this.key,r),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var d=this.source[o];this.dataSource.push(new u(this,r[o],d.width,d.height))}},setFilter:function(r){var o;for(o=0;o<this.source.length;o++)this.source[o].setFilter(r);for(o=0;o<this.dataSource.length;o++)this.dataSource[o].setFilter(r)},destroy:function(){var r,o=this.source,d=this.dataSource;for(r=0;r<o.length;r++)o[r]&&o[r].destroy();for(r=0;r<d.length;r++)d[r]&&d[r].destroy();for(var a in this.frames){var f=this.frames[a];f&&f.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});C.exports=h}),17130:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(27919),y=s(57382),u=s(83419),l=s(40987),h=s(8054),r=s(81320),o=s(50792),d=s(69442),a=s(4327),f=s(8443),v=s(99584),c=s(35154),p=s(88571),m=s(41212),T=s(61309),E=s(87841),P=s(79237),w=new u({Extends:o,initialize:function(b){o.call(this),this.game=b,this.name="TextureManager",this.list={},this._tempCanvas=g.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new E,this.silentWarnings=!1,b.events.once(f.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(d.LOAD,this.updatePending,this),this.on(d.ERROR,this.updatePending,this);var A=this.game.config;A.defaultImage!==null&&this.addBase64("__DEFAULT",A.defaultImage),A.missingImage!==null&&this.addBase64("__MISSING",A.missingImage),A.whiteImage!==null&&this.addBase64("__WHITE",A.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(f.DESTROY,this.destroy,this),this.game.events.once(f.SYSTEM_READY,function(b){this.stamp=new p(b).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(d.LOAD),this.off(d.ERROR),this.emit(d.READY))},checkKey:function(A){return!A||typeof A!="string"||this.exists(A)?(this.silentWarnings||console.error("Texture key already in use: "+A),!1):!0},remove:function(A){if(typeof A=="string")if(this.exists(A))A=this.get(A);else return this.silentWarnings||console.warn("No texture found matching key: "+A),this;var b=A.key;return this.list.hasOwnProperty(b)&&(A.destroy(),this.emit(d.REMOVE,b),this.emit(d.REMOVE_KEY+b)),this},removeKey:function(A){return this.list.hasOwnProperty(A)&&delete this.list[A],this},addBase64:function(A,b){if(this.checkKey(A)){var O=this,I=new Image;I.onerror=function(){O.emit(d.ERROR,A)},I.onload=function(){var D=O.create(A,I);T.Image(D,0),O.emit(d.ADD,A,D),O.emit(d.ADD_KEY+A,D),O.emit(d.LOAD,A,D)},I.src=b}return this},getBase64:function(A,b,O,I){O===void 0&&(O="image/png"),I===void 0&&(I=.92);var D="",B=this.getFrame(A,b);if(B&&(B.source.isRenderTexture||B.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(B){var k=B.canvasData,N=g.create2D(this,k.width,k.height),H=N.getContext("2d",{willReadFrequently:!0});k.width>0&&k.height>0&&H.drawImage(B.source.image,k.x,k.y,k.width,k.height,0,0,k.width,k.height),D=N.toDataURL(O,I),g.remove(N)}return D},addImage:function(A,b,O){var I=null;return this.checkKey(A)&&(I=this.create(A,b),T.Image(I,0),O&&I.setDataSource(O),this.emit(d.ADD,A,I),this.emit(d.ADD_KEY+A,I)),I},addGLTexture:function(A,b){var O=null;if(this.checkKey(A)){var I=b.width,D=b.height;O=this.create(A,b,I,D),O.add("__BASE",0,0,0,I,D),this.emit(d.ADD,A,O),this.emit(d.ADD_KEY+A,O)}return O},addCompressedTexture:function(A,b,O){var I=null;if(this.checkKey(A)){if(I=this.create(A,b),I.add("__BASE",0,0,0,b.width,b.height),O){var D=function(k,N,H){Array.isArray(H.textures)||Array.isArray(H.frames)?T.JSONArray(k,N,H):T.JSONHash(k,N,H)};if(Array.isArray(O))for(var B=0;B<O.length;B++)D(I,B,O[B]);else D(I,0,O)}this.emit(d.ADD,A,I),this.emit(d.ADD_KEY+A,I)}return I},addRenderTexture:function(A,b){var O=null;return this.checkKey(A)&&(O=this.create(A,b),O.add("__BASE",0,0,0,b.width,b.height),this.emit(d.ADD,A,O),this.emit(d.ADD_KEY+A,O)),O},generate:function(A,b){if(this.checkKey(A)){var O=g.create(this,1,1);return b.canvas=O,v(b),this.addCanvas(A,O)}else return null},createCanvas:function(A,b,O){if(b===void 0&&(b=256),O===void 0&&(O=256),this.checkKey(A)){var I=g.create(this,b,O,h.CANVAS,!0);return this.addCanvas(A,I)}return null},addCanvas:function(A,b,O){O===void 0&&(O=!1);var I=null;return O?I=new y(this,A,b,b.width,b.height):this.checkKey(A)&&(I=new y(this,A,b,b.width,b.height),this.list[A]=I,this.emit(d.ADD,A,I),this.emit(d.ADD_KEY+A,I)),I},addDynamicTexture:function(A,b,O){var I=null;return typeof A=="string"&&!this.exists(A)?I=new r(this,A,b,O):(I=A,A=I.key),this.checkKey(A)?(this.list[A]=I,this.emit(d.ADD,A,I),this.emit(d.ADD_KEY+A,I)):I=null,I},addAtlas:function(A,b,O,I){return Array.isArray(O.textures)||Array.isArray(O.frames)?this.addAtlasJSONArray(A,b,O,I):this.addAtlasJSONHash(A,b,O,I)},addAtlasJSONArray:function(A,b,O,I){var D=null;if(b instanceof P?(A=b.key,D=b):this.checkKey(A)&&(D=this.create(A,b)),D){if(Array.isArray(O))for(var B=O.length===1,k=0;k<D.source.length;k++){var N=B?O[0]:O[k];T.JSONArray(D,k,N)}else T.JSONArray(D,0,O);I&&D.setDataSource(I),this.emit(d.ADD,A,D),this.emit(d.ADD_KEY+A,D)}return D},addAtlasJSONHash:function(A,b,O,I){var D=null;if(b instanceof P?(A=b.key,D=b):this.checkKey(A)&&(D=this.create(A,b)),D){if(Array.isArray(O))for(var B=0;B<O.length;B++)T.JSONHash(D,B,O[B]);else T.JSONHash(D,0,O);I&&D.setDataSource(I),this.emit(d.ADD,A,D),this.emit(d.ADD_KEY+A,D)}return D},addAtlasXML:function(A,b,O,I){var D=null;return b instanceof P?(A=b.key,D=b):this.checkKey(A)&&(D=this.create(A,b)),D&&(T.AtlasXML(D,0,O),I&&D.setDataSource(I),this.emit(d.ADD,A,D),this.emit(d.ADD_KEY+A,D)),D},addUnityAtlas:function(A,b,O,I){var D=null;return b instanceof P?(A=b.key,D=b):this.checkKey(A)&&(D=this.create(A,b)),D&&(T.UnityYAML(D,0,O),I&&D.setDataSource(I),this.emit(d.ADD,A,D),this.emit(d.ADD_KEY+A,D)),D},addSpriteSheet:function(A,b,O,I){var D=null;if(b instanceof P?(A=b.key,D=b):this.checkKey(A)&&(D=this.create(A,b)),D){var B=D.source[0].width,k=D.source[0].height;T.SpriteSheet(D,0,0,0,B,k,O),I&&D.setDataSource(I),this.emit(d.ADD,A,D),this.emit(d.ADD_KEY+A,D)}return D},addSpriteSheetFromAtlas:function(A,b){if(!this.checkKey(A))return null;var O=c(b,"atlas",null),I=c(b,"frame",null);if(!(!O||!I)){var D=this.get(O),B=D.get(I);if(B){var k=B.source.image;k||(k=B.source.glTexture);var N=this.create(A,k);return B.trimmed?T.SpriteSheetFromAtlas(N,B,b):T.SpriteSheet(N,0,B.cutX,B.cutY,B.cutWidth,B.cutHeight,b),this.emit(d.ADD,A,N),this.emit(d.ADD_KEY+A,N),N}}},addUint8Array:function(A,b,O,I){if(!this.checkKey(A)||b.length/4!==O*I)return null;var D=this.create(A,b,O,I);return D.add("__BASE",0,0,0,O,I),this.emit(d.ADD,A,D),this.emit(d.ADD_KEY+A,D),D},create:function(A,b,O,I){var D=null;return this.checkKey(A)&&(D=new P(this,A,b,O,I),this.list[A]=D),D},exists:function(A){return this.list.hasOwnProperty(A)},get:function(A){return A===void 0&&(A="__DEFAULT"),this.list[A]?this.list[A]:A instanceof P?A:A instanceof a?A.texture:this.list.__MISSING},cloneFrame:function(A,b){if(this.list[A])return this.list[A].get(b).clone()},getFrame:function(A,b){if(this.list[A])return this.list[A].get(b)},parseFrame:function(A){if(A){if(typeof A=="string")return this.getFrame(A);if(Array.isArray(A)&&A.length===2)return this.getFrame(A[0],A[1]);if(m(A))return this.getFrame(A.key,A.frame);if(A instanceof P)return A.get();if(A instanceof a)return A}else return},getTextureKeys:function(){var A=[];for(var b in this.list)b!=="__DEFAULT"&&b!=="__MISSING"&&b!=="__WHITE"&&b!=="__NORMAL"&&A.push(b);return A},getPixel:function(A,b,O,I){var D=this.getFrame(O,I);if(D){A-=D.x,b-=D.y;var B=D.data.cut;if(A+=B.x,b+=B.y,A>=B.x&&A<B.r&&b>=B.y&&b<B.b){var k=this._tempContext;k.clearRect(0,0,1,1),k.drawImage(D.source.image,A,b,1,1,0,0,1,1);var N=k.getImageData(0,0,1,1);return new l(N.data[0],N.data[1],N.data[2],N.data[3])}}return null},getPixelAlpha:function(A,b,O,I){var D=this.getFrame(O,I);if(D){A-=D.x,b-=D.y;var B=D.data.cut;if(A+=B.x,b+=B.y,A>=B.x&&A<B.r&&b>=B.y&&b<B.b){var k=this._tempContext;k.clearRect(0,0,1,1),k.drawImage(D.source.image,A,b,1,1,0,0,1,1);var N=k.getImageData(0,0,1,1);return N.data[3]}}return null},setTexture:function(A,b,O){return this.list[b]&&(A.texture=this.list[b],A.frame=A.texture.get(O)),A},renameTexture:function(A,b){var O=this.get(A);return O&&A!==b?(O.key=b,this.list[b]=O,delete this.list[A],!0):!1},each:function(A,b){for(var O=[null],I=1;I<arguments.length;I++)O.push(arguments[I]);for(var D in this.list)O[0]=this.list[D],A.apply(b,O)},resetStamp:function(A,b){A===void 0&&(A=1),b===void 0&&(b=16777215);var O=this.stamp;return O.setCrop(),O.setPosition(0),O.setAngle(0),O.setScale(1),O.setAlpha(A),O.setTint(b),O.setTexture("__WHITE"),O},destroy:function(){for(var A in this.list)this.list[A].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,g.remove(this._tempCanvas)}});C.exports=w}),11876:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(27919),y=s(83419),u=s(50030),l=s(29795),h=s(82751),r=new y({initialize:function(d,a,f,v,c){c===void 0&&(c=!1);var p=d.manager.game;this.renderer=p.renderer,this.texture=d,this.source=a,this.image=a.compressed?null:a,this.compressionAlgorithm=a.compressed?a.format:null,this.resolution=1,this.width=f||a.naturalWidth||a.videoWidth||a.width||0,this.height=v||a.naturalHeight||a.videoHeight||a.height||0,this.scaleMode=l.DEFAULT,this.isCanvas=a instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&a instanceof HTMLVideoElement,this.isRenderTexture=a.type==="RenderTexture"||a.type==="DynamicTexture",this.isGLTexture=a instanceof h,this.isPowerOf2=u(this.width,this.height),this.glTexture=null,this.flipY=c,this.init(p)},init:function(o){var d=this.renderer;if(d){var a=this.source;if(d.gl){var f=this.image,v=this.flipY,c=this.width,p=this.height,m=this.scaleMode;this.isCanvas?this.glTexture=d.createCanvasTexture(f,!1,v):this.isVideo?this.glTexture=d.createVideoTexture(f,!1,v):this.isRenderTexture?this.glTexture=d.createTextureFromSource(null,c,p,m):this.isGLTexture?this.glTexture=a:this.compressionAlgorithm?this.glTexture=d.createTextureFromSource(a,void 0,void 0,m):a instanceof Uint8Array?this.glTexture=d.createUint8ArrayTexture(a,c,p,m):this.glTexture=d.createTextureFromSource(f,c,p,m)}else this.isRenderTexture&&(this.image=a.canvas)}o.config.antialias||this.setFilter(1)},setFilter:function(o){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,o),this.scaleMode=o},setFlipY:function(o){return o===void 0&&(o=!0),o===this.flipY?this:(this.flipY=o,this.update(),this)},update:function(){var o=this.renderer,d=this.image,a=this.flipY,f=o.gl;f&&this.isCanvas?o.updateCanvasTexture(d,this.glTexture,a):f&&this.isVideo&&o.updateVideoTexture(d,this.glTexture,a)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&g.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});C.exports=r}),19673:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={LINEAR:0,NEAREST:1};C.exports=R}),44538:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="addtexture"}),63486:(C=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="addtexture-"}),94851:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="onerror"}),29099:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="onload"}),8678:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="ready"}),86415:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="removetexture"}),30879:(C=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="removetexture-"}),69442:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ADD:s(44538),ADD_KEY:s(63486),ERROR:s(94851),LOAD:s(29099),READY:s(8678),REMOVE:s(86415),REMOVE_KEY:s(30879)}}),27458:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(79291),y=s(19673),u={CanvasTexture:s(57382),DynamicTexture:s(81320),Events:s(69442),FilterMode:y,Frame:s(4327),Parsers:s(61309),Texture:s(79237),TextureManager:s(17130),TextureSource:s(11876)};u=g(!1,u,y),C.exports=u}),89905:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(!y.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var u=s.source[g];s.add("__BASE",g,0,0,u.width,u.height);for(var l=y.getElementsByTagName("SubTexture"),h,r=0;r<l.length;r++){var o=l[r].attributes,d=o.name.value,a=parseInt(o.x.value,10),f=parseInt(o.y.value,10),v=parseInt(o.width.value,10),c=parseInt(o.height.value,10);if(h=s.add(d,g,a,f,v,c),o.frameX){var p=Math.abs(parseInt(o.frameX.value,10)),m=Math.abs(parseInt(o.frameY.value,10)),T=parseInt(o.frameWidth.value,10),E=parseInt(o.frameHeight.value,10);h.setTrim(v,c,p,m,T,E)}}return s};C.exports=R}),72893:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.source[g];return s.add("__BASE",g,0,0,y.width,y.height),s};C.exports=R}),4832:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.source[g];return s.add("__BASE",g,0,0,y.width,y.height),s};C.exports=R}),78566:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(41786),y=function(u,l,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=u.source[l];u.add("__BASE",l,0,0,r.width,r.height);for(var o=Array.isArray(h.textures)?h.textures[l].frames:h.frames,d,a=0;a<o.length;a++){var f=o[a];if(d=u.add(f.filename,l,f.frame.x,f.frame.y,f.frame.w,f.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+f.filename);continue}f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var v=f.anchor||f.pivot;v&&(d.customPivot=!0,d.pivotX=v.x,d.pivotY=v.y),f.scale9Borders&&d.setScale9(f.scale9Borders.x,f.scale9Borders.y,f.scale9Borders.w,f.scale9Borders.h),d.customData=g(f)}for(var c in h)c!=="frames"&&(Array.isArray(h[c])?u.customData[c]=h[c].slice(0):u.customData[c]=h[c]);return u};C.exports=y}),39711:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(41786),y=function(u,l,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=u.source[l];u.add("__BASE",l,0,0,r.width,r.height);var o=h.frames,d;for(var a in o)if(o.hasOwnProperty(a)){var f=o[a];if(d=u.add(a,l,f.frame.x,f.frame.y,f.frame.w,f.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+a);continue}f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var v=f.anchor||f.pivot;v&&(d.customPivot=!0,d.pivotX=v.x,d.pivotY=v.y),f.scale9Borders&&d.setScale9(f.scale9Borders.x,f.scale9Borders.y,f.scale9Borders.w,f.scale9Borders.h),d.customData=g(f)}for(var c in h)c!=="frames"&&(Array.isArray(h[c])?u.customData[c]=h[c].slice(0):u.customData[c]=h[c]);return u};C.exports=y}),31403:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=[171,75,84,88,32,49,49,187,13,10,26,10],y,u=new Uint8Array(s,0,12);for(y=0;y<u.length;y++)if(u[y]!==g[y]){console.warn("KTXParser - Invalid file format");return}var l=Uint32Array.BYTES_PER_ELEMENT,h=new DataView(s,12,13*l),r=h.getUint32(0,!0)===67305985,o=h.getUint32(1*l,r);if(o!==0){console.warn("KTXParser - Only compressed formats supported");return}var d=h.getUint32(4*l,r),a=h.getUint32(6*l,r),f=h.getUint32(7*l,r),v=Math.max(1,h.getUint32(11*l,r)),c=h.getUint32(12*l,r),p=new Array(v),m=64+c,T=a,E=f;for(y=0;y<v;y++){var P=new Int32Array(s,m,1)[0];m+=4,p[y]={data:new Uint8Array(s,m,P),width:T,height:E},T=Math.max(1,T>>1),E=Math.max(1,E>>1),m+=P}return{mipmaps:p,width:a,height:f,internalFormat:d,compressed:!0,generateMipmap:!1}};C.exports=R}),82038:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function R(b,O,I,D,B,k,N){return N===void 0&&(N=16),Math.floor((b+I)/B)*Math.floor((O+D)/k)*N}function s(b,O){return b=Math.max(b,16),O=Math.max(O,8),b*O/4}function g(b,O){return b=Math.max(b,8),O=Math.max(O,8),b*O/2}function y(b,O){return Math.ceil(b/4)*Math.ceil(O/4)*16}function u(b,O){return R(b,O,3,3,4,4,8)}function l(b,O){return R(b,O,3,3,4,4)}function h(b,O){return R(b,O,4,3,5,4)}function r(b,O){return R(b,O,4,4,5,5)}function o(b,O){return R(b,O,5,4,6,5)}function d(b,O){return R(b,O,5,5,6,6)}function a(b,O){return R(b,O,7,4,8,5)}function f(b,O){return R(b,O,7,5,8,6)}function v(b,O){return R(b,O,7,7,8,8)}function c(b,O){return R(b,O,9,4,10,5)}function p(b,O){return R(b,O,9,5,10,6)}function m(b,O){return R(b,O,9,7,10,8)}function T(b,O){return R(b,O,9,9,10,10)}function E(b,O){return R(b,O,11,9,12,10)}function P(b,O){return R(b,O,11,11,12,12)}var w={0:{sizeFunc:s,glFormat:[35841]},1:{sizeFunc:s,glFormat:[35843]},2:{sizeFunc:g,glFormat:[35840]},3:{sizeFunc:g,glFormat:[35842]},6:{sizeFunc:u,glFormat:[36196]},7:{sizeFunc:u,glFormat:[33776,35916]},8:{sizeFunc:l,glFormat:[33777,35917]},9:{sizeFunc:l,glFormat:[33778,35918]},11:{sizeFunc:l,glFormat:[33779,35919]},14:{sizeFunc:y,glFormat:[36494,36495]},15:{sizeFunc:y,glFormat:[36492,36493]},22:{sizeFunc:u,glFormat:[37492,37493]},23:{sizeFunc:l,glFormat:[37496,37497]},24:{sizeFunc:u,glFormat:[37494,37495]},25:{sizeFunc:u,glFormat:[37488]},26:{sizeFunc:l,glFormat:[37490]},27:{sizeFunc:l,glFormat:[37808,37840]},28:{sizeFunc:h,glFormat:[37809,37841]},29:{sizeFunc:r,glFormat:[37810,37842]},30:{sizeFunc:o,glFormat:[37811,37843]},31:{sizeFunc:d,glFormat:[37812,37844]},32:{sizeFunc:a,glFormat:[37813,37845]},33:{sizeFunc:f,glFormat:[37814,37846]},34:{sizeFunc:v,glFormat:[37815,37847]},35:{sizeFunc:c,glFormat:[37816,37848]},36:{sizeFunc:p,glFormat:[37817,37849]},37:{sizeFunc:m,glFormat:[37818,37850]},38:{sizeFunc:T,glFormat:[37819,37851]},39:{sizeFunc:E,glFormat:[37820,37852]},40:{sizeFunc:P,glFormat:[37821,37853]}},A=function(b){for(var O=new Uint32Array(b,0,13),I=O[0],D=I===55727696,B=D?O[2]:O[3],k=O[4],N=w[B].glFormat[k],H=w[B].sizeFunc,$=O[11],J=O[7],q=O[6],Y=52+O[12],K=new Uint8Array(b,Y),V=new Array($),U=0,Z=J,et=q,st=0;st<$;st++){var rt=H(Z,et);V[st]={data:new Uint8Array(K.buffer,K.byteOffset+U,rt),width:Z,height:et},Z=Math.max(1,Z>>1),et=Math.max(1,et>>1),U+=rt}return{mipmaps:V,width:J,height:q,internalFormat:N,compressed:!0,generateMipmap:!1}};C.exports=A}),75549:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y=function(u,l,h,r,o,d,a){var f=g(a,"frameWidth",null),v=g(a,"frameHeight",f);if(f===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var c=u.source[l];u.add("__BASE",l,0,0,c.width,c.height);var p=g(a,"startFrame",0),m=g(a,"endFrame",-1),T=g(a,"margin",0),E=g(a,"spacing",0),P=Math.floor((o-T+E)/(f+E)),w=Math.floor((d-T+E)/(v+E)),A=P*w;A===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",u.key),(p>A||p<-A)&&(p=0),p<0&&(p=A+p),(m===-1||m>A||m<p)&&(m=A);for(var b=T,O=T,I=0,D=0,B=0,k=0;k<A;k++){I=0,D=0;var N=b+f,H=O+v;N>o&&(I=N-o),H>d&&(D=H-d),k>=p&&k<=m&&(u.add(B,l,h+b,r+O,f-I,v-D),B++),b+=f+E,b+f>o&&(b=T,O+=v+E)}return u};C.exports=y}),47534:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y=function(u,l,h){var r=g(h,"frameWidth",null),o=g(h,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=u.source[0];u.add("__BASE",0,0,0,d.width,d.height),g(h,"startFrame",0),g(h,"endFrame",-1);for(var a=g(h,"margin",0),f=g(h,"spacing",0),v=l.cutX,c=l.cutY,p=l.cutWidth,m=l.cutHeight,T=l.realWidth,E=l.realHeight,P=Math.floor((T-a+f)/(r+f)),w=Math.floor((E-a+f)/(o+f)),A=l.x,b=r-A,O=r-(T-p-A),I=l.y,D=o-I,B=o-(E-m-I),k,N=a,H=a,$=0,J=0,q=0;q<w;q++){for(var Y=q===0,K=q===w-1,V=0;V<P;V++){var U=V===0,Z=V===P-1;if(k=u.add($,J,v+N,c+H,r,o),U||Y||Z||K){var et=U?A:0,st=Y?I:0,rt=0,at=0;U&&(rt+=r-b),Z&&(rt+=r-O),Y&&(at+=o-D),K&&(at+=o-B);var ut=r-rt,vt=o-at;k.cutWidth=ut,k.cutHeight=vt,k.setTrim(r,o,et,st,ut,vt)}N+=f,U?N+=b:Z?N+=O:N+=r,$++}N=a,H+=f,Y?H+=D:K?H+=B:H+=o}return u};C.exports=y}),86147:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=0,s=function(y,u,l,h){var r=R-h.y-h.height;y.add(l,u,h.x,r,h.width,h.height)},g=function(y,u,l){var h=y.source[u];y.add("__BASE",u,0,0,h.width,h.height),R=h.height;for(var r=l.split(`
`),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",a="",f={x:0,y:0,width:0,height:0},v=0;v<r.length;v++){var c=r[v].match(o);if(c){var p=c[1]==="- ",m=c[2],T=c[3];if(p&&(a!==d&&(s(y,u,a,f),d=a),f={x:0,y:0,width:0,height:0}),m==="name"){a=T;continue}switch(m){case"x":case"y":case"width":case"height":f[m]=parseInt(T,10);break}}}return a!==d&&s(y,u,a,f),y};C.exports=g}),55222:((C,R,s)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(50030),y=function(d){for(var a=d.mipmaps,f=1;f<a.length;f++){var v=a[f].width,c=a[f].height;if(!g(v,c))return console.warn("Mip level "+f+" is not a power-of-two size: "+v+"x"+c),!1}var p=o[d.internalFormat];return p?p(d):(console.warn("No format checker found for internal format "+d.internalFormat+". Assuming valid."),!0)};function u(d){for(var a=d.mipmaps,f=0;f<a.length;f++){var v=a[f].width,c=a[f].height;if((v<<f)%4!==0||(c<<f)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+f+" is "+v+"x"+c),!1}return!0}function l(){return!0}function h(d){var a=d.mipmaps,f=a[0];return g(f.width,f.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+f.width+"x"+f.height),!1)}function r(d){var a=d.mipmaps,f=a[0];return f.width%4!==0||f.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+f.width+"x"+f.height+" pixels"),!1):!0}var o={37488:l,37489:l,37490:l,37491:l,37492:l,37493:l,37494:l,37495:l,37496:l,37497:l,36196:l,37808:l,37809:l,37810:l,37811:l,37812:l,37813:l,37814:l,37815:l,37816:l,37817:l,37818:l,37819:l,37820:l,37821:l,37840:l,37841:l,37842:l,37843:l,37844:l,37845:l,37846:l,37847:l,37848:l,37849:l,37850:l,37851:l,37852:l,37853:l,36492:u,36493:u,36494:u,36495:u,36283:u,36284:u,36285:u,36286:u,35840:h,35841:h,35842:h,35843:h,33776:u,33777:u,33778:u,33779:u,35916:r,35917:r,35918:r,35919:r};C.exports=y}),61309:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={AtlasXML:s(89905),Canvas:s(72893),Image:s(4832),JSONArray:s(78566),JSONHash:s(39711),KTXParser:s(31403),PVRParser:s(82038),SpriteSheet:s(75549),SpriteSheetFromAtlas:s(47534),UnityYAML:s(86147)}}),80341:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}),16536:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l,h,r,o,d,a,f){(r===void 0||r<=0)&&(r=32),(o===void 0||o<=0)&&(o=32),d===void 0&&(d=0),a===void 0&&(a=0),this.name=l,this.firstgid=h|0,this.imageWidth=r|0,this.imageHeight=o|0,this.imageMargin=d|0,this.imageSpacing=a|0,this.properties=f||{},this.images=[],this.total=0},containsImageIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},addImage:function(u,l){return this.images.push({gid:u,image:l}),this.total++,this}});C.exports=y}),27462:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=new g({initialize:function(l){if(this.gids=[],l!==void 0)for(var h=0;h<l.length;++h)for(var r=l[h],o=0;o<r.total;++o)this.gids[r.firstgid+o]=r;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(u){this.gids=u?this._gids:void 0}},getTypeIncludingTile:function(u){if(u.type!==void 0&&u.type!=="")return u.type;if(!(!this.gids||u.gid===void 0)){var l=this.gids[u.gid];if(l){var h=l.getTileData(u.gid);if(h)return h.type}}},setTextureAndFrame:function(u,l,h,r){if(l===null&&this.gids&&r.gid!==void 0){var o=this.gids[r.gid];o&&(l===null&&o.image!==void 0&&(l=o.image.key),h===null&&(h=r.gid-o.firstgid),u.scene.textures.getFrame(l,h)||(l=null,h=null))}u.setTexture(l,h)},setPropertiesFromTiledObject:function(u,l){if(this.gids!==void 0&&l.gid!==void 0){var h=this.gids[l.gid];h!==void 0&&this.setFromJSON(u,h.getTileProperties(l.gid))}this.setFromJSON(u,l.properties)},setFromJSON:function(u,l){if(l){if(Array.isArray(l)){for(var h=0;h<l.length;h++){var r=l[h];u[r.name]!==void 0?u[r.name]=r.value:u.setData(r.name,r.value)}return}for(var o in l)u[o]!==void 0?u[o]=l[o]:u.setData(o,l[o])}}});C.exports=y}),31989:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(80341),y=s(87010),u=s(46177),l=s(49075),h=function(r,o,d,a,f,v,c,p){d===void 0&&(d=32),a===void 0&&(a=32),f===void 0&&(f=10),v===void 0&&(v=10),p===void 0&&(p=!1);var m=null;if(Array.isArray(c)){var T=o!==void 0?o:"map";m=u(T,g.ARRAY_2D,c,d,a,p)}else if(o!==void 0){var E=r.cache.tilemap.get(o);E?m=u(o,E.format,E.data,d,a,p):console.warn("No map data found for key "+o)}return m===null&&(m=new y({tileWidth:d,tileHeight:a,width:f,height:v})),new l(r,m)};C.exports=h}),23029:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(31401),u=s(91907),l=s(62644),h=s(93232),r=new g({Mixins:[y.AlphaSingle,y.Flip,y.Visible],initialize:function(d,a,f,v,c,p,m,T){this.layer=d,this.index=a,this.x=f,this.y=v,this.width=c,this.height=p,this.right,this.bottom,this.baseWidth=m!==void 0?m:c,this.baseHeight=T!==void 0?T:p,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(o,d){return!(o<this.pixelX||d<this.pixelY||o>this.right||d>this.bottom)},copy:function(o){return this.index=o.index,this.alpha=o.alpha,this.properties=l(o.properties),this.visible=o.visible,this.setFlip(o.flipX,o.flipY),this.tint=o.tint,this.rotation=o.rotation,this.collideUp=o.collideUp,this.collideDown=o.collideDown,this.collideLeft=o.collideLeft,this.collideRight=o.collideRight,this.collisionCallback=o.collisionCallback,this.collisionCallbackContext=o.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(o){var d=this.tilemapLayer;if(d){var a=d.tileToWorldXY(this.x,this.y,void 0,o);return a.x}return this.x*this.baseWidth},getRight:function(o){var d=this.tilemapLayer;return d?this.getLeft(o)+this.width*d.scaleX:this.getLeft(o)+this.width},getTop:function(o){var d=this.tilemapLayer;if(d){var a=d.tileToWorldXY(this.x,this.y,void 0,o);return a.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(o){var d=this.tilemapLayer;return d?this.getTop(o)+this.height*d.scaleY:this.getTop(o)+this.height},getBounds:function(o,d){return d===void 0&&(d=new h),d.x=this.getLeft(o),d.y=this.getTop(o),d.width=this.getRight(o)-d.x,d.height=this.getBottom(o)-d.y,d},getCenterX:function(o){return(this.getLeft(o)+this.getRight(o))/2},getCenterY:function(o){return(this.getTop(o)+this.getBottom(o))/2},intersects:function(o,d,a,f){return!(a<=this.pixelX||f<=this.pixelY||o>=this.right||d>=this.bottom)},isInteresting:function(o,d){return o&&d?this.canCollide||this.hasInterestingFace:o?this.collides:d?this.hasInterestingFace:!1},resetCollision:function(o){if(o===void 0&&(o=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,o){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(o,d,a,f,v){if(d===void 0&&(d=o),a===void 0&&(a=o),f===void 0&&(f=o),v===void 0&&(v=!0),this.collideLeft=o,this.collideRight=d,this.collideUp=a,this.collideDown=f,this.faceLeft=o,this.faceRight=d,this.faceTop=a,this.faceBottom=f,v){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(o,d){return o===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=o,this.collisionCallbackContext=d),this},setSize:function(o,d,a,f){return o!==void 0&&(this.width=o),d!==void 0&&(this.height=d),a!==void 0&&(this.baseWidth=a),f!==void 0&&(this.baseHeight=f),this.updatePixelXY(),this},updatePixelXY:function(){var o=this.layer.orientation;if(o===u.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(o===u.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(o===u.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(o===u.HEXAGONAL){var d=this.layer.staggerAxis,a=this.layer.staggerIndex,f=this.layer.hexSideLength,v,c;d==="y"?(c=(this.baseHeight-f)/2+f,a==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*c):d==="x"&&(v=(this.baseWidth-f)/2+f,this.pixelX=this.x*v,a==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var o=this.layer.tilemapLayer;if(o){var d=o.gidMap[this.index];if(d)return d}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var o=this.tilemapLayer;return o?o.tilemap:null}}});C.exports=r}),49075:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(84101),y=s(83419),u=s(39506),l=s(80341),h=s(95540),r=s(14977),o=s(27462),d=s(91907),a=s(36305),f=s(19133),v=s(68287),c=s(23029),p=s(81086),m=s(20442),T=s(33629),E=new y({initialize:function(w,A){this.scene=w,this.tileWidth=A.tileWidth,this.tileHeight=A.tileHeight,this.width=A.width,this.height=A.height,this.orientation=A.orientation,this.renderOrder=A.renderOrder,this.format=A.format,this.version=A.version,this.properties=A.properties,this.widthInPixels=A.widthInPixels,this.heightInPixels=A.heightInPixels,this.imageCollections=A.imageCollections,this.images=A.images,this.layers=A.layers,this.tiles=A.tiles,this.tilesets=A.tilesets,this.objects=A.objects,this.currentLayerIndex=0,this.hexSideLength=A.hexSideLength;var b=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(b),WorldToTileX:p.GetWorldToTileXFunction(b),WorldToTileY:p.GetWorldToTileYFunction(b),TileToWorldXY:p.GetTileToWorldXYFunction(b),TileToWorldX:p.GetTileToWorldXFunction(b),TileToWorldY:p.GetTileToWorldYFunction(b),GetTileCorners:p.GetTileCornersFunction(b)}},setRenderOrder:function(P){var w=["right-down","left-down","right-up","left-up"];return typeof P=="number"&&(P=w[P]),w.indexOf(P)>-1&&(this.renderOrder=P),this},addTilesetImage:function(P,w,A,b,O,I,D,B){if(P===void 0)return null;w==null&&(w=P);var k=this.scene.sys.textures;if(!k.exists(w))return console.warn('Texture key "%s" not found',w),null;var N=k.get(w),H=this.getTilesetIndex(P);if(H===null&&this.format===l.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',P,this.tilesets),null;var $=this.tilesets[H];return $?((A||b)&&$.setTileSize(A,b),(O||I)&&$.setSpacing(O,I),$.setImage(N),$):(A===void 0&&(A=this.tileWidth),b===void 0&&(b=this.tileHeight),O===void 0&&(O=0),I===void 0&&(I=0),D===void 0&&(D=0),B===void 0&&(B={x:0,y:0}),$=new T(P,D,A,b,O,I,void 0,void 0,B),$.setImage(N),this.tilesets.push($),this.tiles=g(this),$)},copy:function(P,w,A,b,O,I,D,B){return B=this.getLayer(B),B!==null?(p.Copy(P,w,A,b,O,I,D,B),this):null},createBlankLayer:function(P,w,A,b,O,I,D,B){A===void 0&&(A=0),b===void 0&&(b=0),O===void 0&&(O=this.width),I===void 0&&(I=this.height),D===void 0&&(D=this.tileWidth),B===void 0&&(B=this.tileHeight);var k=this.getLayerIndex(P);if(k!==null)return console.warn("Invalid Tilemap Layer ID: "+P),null;for(var N=new r({name:P,tileWidth:D,tileHeight:B,width:O,height:I,orientation:this.orientation}),H,$=0;$<I;$++){H=[];for(var J=0;J<O;J++)H.push(new c(N,-1,J,$,D,B,this.tileWidth,this.tileHeight));N.data.push(H)}this.layers.push(N),this.currentLayerIndex=this.layers.length-1;var q=new m(this.scene,this,this.currentLayerIndex,w,A,b);return q.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(q),q},createLayer:function(P,w,A,b){var O=this.getLayerIndex(P);if(O===null)return console.warn("Invalid Tilemap Layer ID: "+P),typeof P=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var I=this.layers[O];if(I.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+P),null;this.currentLayerIndex=O,A===void 0&&(A=I.x),b===void 0&&(b=I.y);var D=new m(this.scene,this,O,w,A,b);return D.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(D),D},createFromObjects:function(P,w,A){A===void 0&&(A=!0);var b=[],O=this.getObjectLayer(P);if(!O)return console.warn("createFromObjects: Invalid objectLayerName given: "+P),b;var I=new o(A?this.tilesets:void 0);Array.isArray(w)||(w=[w]);for(var D=O.objects,B=0;B<w.length;B++){var k=w[B],N=h(k,"id",null),H=h(k,"gid",null),$=h(k,"name",null),J=h(k,"type",null);I.enabled=!h(k,"ignoreTileset",null);for(var q,Y=[],K=0;K<D.length;K++)q=D[K],(N===null&&H===null&&$===null&&J===null||N!==null&&q.id===N||H!==null&&q.gid===H||$!==null&&q.name===$||J!==null&&I.getTypeIncludingTile(q)===J)&&Y.push(q);for(var V=h(k,"classType",v),U=h(k,"scene",this.scene),Z=h(k,"container",null),et=h(k,"key",null),st=h(k,"frame",null),rt=0;rt<Y.length;rt++){q=Y[rt];var at=new V(U);if(at.setName(q.name),at.setPosition(q.x,q.y),I.setTextureAndFrame(at,et,st,q),q.width&&(at.displayWidth=q.width),q.height&&(at.displayHeight=q.height),this.orientation===d.ISOMETRIC){var ut=this.tileWidth/this.tileHeight,vt={x:at.x-at.y,y:(at.x+at.y)/ut};at.x=vt.x,at.y=vt.y}var pt={x:at.originX*q.width,y:(at.originY-(q.gid?1:0))*q.height};if(q.rotation){var gt=u(q.rotation);a(pt,gt),at.rotation=gt}at.x+=pt.x,at.y+=pt.y,(q.flippedHorizontal!==void 0||q.flippedVertical!==void 0)&&at.setFlip(q.flippedHorizontal,q.flippedVertical),q.visible||(at.visible=!1),I.setPropertiesFromTiledObject(at,q),Z?Z.add(at):U.add.existing(at),b.push(at)}}return b},createFromTiles:function(P,w,A,b,O,I){return I=this.getLayer(I),I===null?null:p.CreateFromTiles(P,w,A,b,O,I)},fill:function(P,w,A,b,O,I,D){return I===void 0&&(I=!0),D=this.getLayer(D),D===null?null:(p.Fill(P,w,A,b,O,I,D),this)},filterObjects:function(P,w,A){if(typeof P=="string"){var b=P;if(P=this.getObjectLayer(P),!P)return console.warn("No object layer found with the name: "+b),null}return P.objects.filter(w,A)},filterTiles:function(P,w,A,b,O,I,D,B){return B=this.getLayer(B),B===null?null:p.FilterTiles(P,w,A,b,O,I,D,B)},findByIndex:function(P,w,A,b){return b=this.getLayer(b),b===null?null:p.FindByIndex(P,w,A,b)},findObject:function(P,w,A){if(typeof P=="string"){var b=P;if(P=this.getObjectLayer(P),!P)return console.warn("No object layer found with the name: "+b),null}return P.objects.find(w,A)||null},findTile:function(P,w,A,b,O,I,D,B){return B=this.getLayer(B),B===null?null:p.FindTile(P,w,A,b,O,I,D,B)},forEachTile:function(P,w,A,b,O,I,D,B){return B=this.getLayer(B),B===null?null:(p.ForEachTile(P,w,A,b,O,I,D,B),this)},getImageIndex:function(P){return this.getIndex(this.images,P)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(P){return P.name})},getIndex:function(P,w){for(var A=0;A<P.length;A++)if(P[A].name===w)return A;return null},getLayer:function(P){var w=this.getLayerIndex(P);return w!==null?this.layers[w]:null},getObjectLayer:function(P){var w=this.getIndex(this.objects,P);return w!==null?this.objects[w]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(P){return P.name})},getLayerIndex:function(P){return P===void 0?this.currentLayerIndex:typeof P=="string"?this.getLayerIndexByName(P):typeof P=="number"&&P<this.layers.length?P:P instanceof m&&P.tilemap===this?P.layerIndex:null},getLayerIndexByName:function(P){return this.getIndex(this.layers,P)},getTileAt:function(P,w,A,b){return b=this.getLayer(b),b===null?null:p.GetTileAt(P,w,A,b)},getTileAtWorldXY:function(P,w,A,b,O){return O=this.getLayer(O),O===null?null:p.GetTileAtWorldXY(P,w,A,b,O)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(P){return P.name})},getTilesWithin:function(P,w,A,b,O,I){return I=this.getLayer(I),I===null?null:p.GetTilesWithin(P,w,A,b,O,I)},getTilesWithinShape:function(P,w,A,b){return b=this.getLayer(b),b===null?null:p.GetTilesWithinShape(P,w,A,b)},getTilesWithinWorldXY:function(P,w,A,b,O,I,D){return D=this.getLayer(D),D===null?null:p.GetTilesWithinWorldXY(P,w,A,b,O,I,D)},getTileset:function(P){var w=this.getIndex(this.tilesets,P);return w!==null?this.tilesets[w]:null},getTilesetIndex:function(P){return this.getIndex(this.tilesets,P)},hasTileAt:function(P,w,A){return A=this.getLayer(A),A===null?null:p.HasTileAt(P,w,A)},hasTileAtWorldXY:function(P,w,A,b){return b=this.getLayer(b),b===null?null:p.HasTileAtWorldXY(P,w,A,b)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(P){this.setLayer(P)}},putTileAt:function(P,w,A,b,O){return b===void 0&&(b=!0),O=this.getLayer(O),O===null?null:p.PutTileAt(P,w,A,b,O)},putTileAtWorldXY:function(P,w,A,b,O,I){return b===void 0&&(b=!0),I=this.getLayer(I),I===null?null:p.PutTileAtWorldXY(P,w,A,b,O,I)},putTilesAt:function(P,w,A,b,O){return b===void 0&&(b=!0),O=this.getLayer(O),O===null?null:(p.PutTilesAt(P,w,A,b,O),this)},randomize:function(P,w,A,b,O,I){return I=this.getLayer(I),I===null?null:(p.Randomize(P,w,A,b,O,I),this)},calculateFacesAt:function(P,w,A){return A=this.getLayer(A),A===null?null:(p.CalculateFacesAt(P,w,A),this)},calculateFacesWithin:function(P,w,A,b,O){return O=this.getLayer(O),O===null?null:(p.CalculateFacesWithin(P,w,A,b,O),this)},removeLayer:function(P){var w=this.getLayerIndex(P);if(w!==null){f(this.layers,w);for(var A=w;A<this.layers.length;A++)this.layers[A].tilemapLayer&&this.layers[A].tilemapLayer.layerIndex--;return this.currentLayerIndex===w&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(P){var w=this.getLayerIndex(P);return w!==null?(P=this.layers[w],P.tilemapLayer.destroy(),f(this.layers,w),this.currentLayerIndex===w&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var P=this.layers,w=0;w<P.length;w++)P[w].tilemapLayer&&P[w].tilemapLayer.destroy(!1);return P.length=0,this.currentLayerIndex=0,this},removeTile:function(P,w,A){w===void 0&&(w=-1),A===void 0&&(A=!0);var b=[];Array.isArray(P)||(P=[P]);for(var O=0;O<P.length;O++){var I=P[O];b.push(this.removeTileAt(I.x,I.y,!0,A,I.tilemapLayer)),w>-1&&this.putTileAt(w,I.x,I.y,A,I.tilemapLayer)}return b},removeTileAt:function(P,w,A,b,O){return A===void 0&&(A=!0),b===void 0&&(b=!0),O=this.getLayer(O),O===null?null:p.RemoveTileAt(P,w,A,b,O)},removeTileAtWorldXY:function(P,w,A,b,O,I){return A===void 0&&(A=!0),b===void 0&&(b=!0),I=this.getLayer(I),I===null?null:p.RemoveTileAtWorldXY(P,w,A,b,O,I)},renderDebug:function(P,w,A){return A=this.getLayer(A),A===null?null:(this.orientation===d.ORTHOGONAL&&p.RenderDebug(P,w,A),this)},renderDebugFull:function(P,w){for(var A=this.layers,b=0;b<A.length;b++)p.RenderDebug(P,w,A[b]);return this},replaceByIndex:function(P,w,A,b,O,I,D){return D=this.getLayer(D),D===null?null:(p.ReplaceByIndex(P,w,A,b,O,I,D),this)},setCollision:function(P,w,A,b,O){return w===void 0&&(w=!0),A===void 0&&(A=!0),O===void 0&&(O=!0),b=this.getLayer(b),b===null?null:(p.SetCollision(P,w,A,b,O),this)},setCollisionBetween:function(P,w,A,b,O){return A===void 0&&(A=!0),b===void 0&&(b=!0),O=this.getLayer(O),O===null?null:(p.SetCollisionBetween(P,w,A,b,O),this)},setCollisionByProperty:function(P,w,A,b){return w===void 0&&(w=!0),A===void 0&&(A=!0),b=this.getLayer(b),b===null?null:(p.SetCollisionByProperty(P,w,A,b),this)},setCollisionByExclusion:function(P,w,A,b){return w===void 0&&(w=!0),A===void 0&&(A=!0),b=this.getLayer(b),b===null?null:(p.SetCollisionByExclusion(P,w,A,b),this)},setCollisionFromCollisionGroup:function(P,w,A){return P===void 0&&(P=!0),w===void 0&&(w=!0),A=this.getLayer(A),A===null?null:(p.SetCollisionFromCollisionGroup(P,w,A),this)},setTileIndexCallback:function(P,w,A,b){return b=this.getLayer(b),b===null?null:(p.SetTileIndexCallback(P,w,A,b),this)},setTileLocationCallback:function(P,w,A,b,O,I,D){return D=this.getLayer(D),D===null?null:(p.SetTileLocationCallback(P,w,A,b,O,I,D),this)},setLayer:function(P){var w=this.getLayerIndex(P);return w!==null&&(this.currentLayerIndex=w),this},setBaseTileSize:function(P,w){this.tileWidth=P,this.tileHeight=w,this.widthInPixels=this.width*P,this.heightInPixels=this.height*w;for(var A=0;A<this.layers.length;A++){this.layers[A].baseTileWidth=P,this.layers[A].baseTileHeight=w;for(var b=this.layers[A].data,O=this.layers[A].width,I=this.layers[A].height,D=0;D<I;D++)for(var B=0;B<O;B++){var k=b[D][B];k!==null&&k.setSize(void 0,void 0,P,w)}}return this},setLayerTileSize:function(P,w,A){if(A=this.getLayer(A),A===null)return this;A.tileWidth=P,A.tileHeight=w;for(var b=A.data,O=A.width,I=A.height,D=0;D<I;D++)for(var B=0;B<O;B++){var k=b[D][B];k!==null&&k.setSize(P,w)}return this},shuffle:function(P,w,A,b,O){return O=this.getLayer(O),O===null?null:(p.Shuffle(P,w,A,b,O),this)},swapByIndex:function(P,w,A,b,O,I,D){return D=this.getLayer(D),D===null?null:(p.SwapByIndex(P,w,A,b,O,I,D),this)},tileToWorldX:function(P,w,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldX(P,w,A)},tileToWorldY:function(P,w,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldY(P,w,A)},tileToWorldXY:function(P,w,A,b,O){return O=this.getLayer(O),O===null?null:this._convert.TileToWorldXY(P,w,A,b,O)},getTileCorners:function(P,w,A,b){return b=this.getLayer(b),b===null?null:this._convert.GetTileCorners(P,w,A,b)},weightedRandomize:function(P,w,A,b,O,I){return I=this.getLayer(I),I===null?null:(p.WeightedRandomize(w,A,b,O,P,I),this)},worldToTileX:function(P,w,A,b){return b=this.getLayer(b),b===null?null:this._convert.WorldToTileX(P,w,A,b)},worldToTileY:function(P,w,A,b){return b=this.getLayer(b),b===null?null:this._convert.WorldToTileY(P,w,A,b)},worldToTileXY:function(P,w,A,b,O,I){return I=this.getLayer(I),I===null?null:this._convert.WorldToTileXY(P,w,A,b,O,I)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});C.exports=E}),45939:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(44603),y=s(31989);g.register("tilemap",function(u){var l=u!==void 0?u:{};return y(this.scene,l.key,l.tileWidth,l.tileHeight,l.width,l.height,l.data,l.insertNull)})}),46029:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(39429),y=s(31989);g.register("tilemap",function(u,l,h,r,o,d,a){return u===null&&(u=void 0),l===null&&(l=void 0),h===null&&(h=void 0),r===null&&(r=void 0),o===null&&(o=void 0),y(this.scene,u,l,h,r,o,d,a)})}),20442:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(78389),u=s(31401),l=s(95643),h=s(81086),r=s(19218),o=s(26099),d=new g({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,y,r],initialize:function(f,v,c,p,m,T){l.call(this,f,"TilemapLayer"),this.isTilemap=!0,this.tilemap=v,this.layerIndex=c,this.layer=v.layers[c],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new o,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(m,T),this.setOrigin(0,0),this.setSize(v.tileWidth*this.layer.width,v.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(a){var f=[],v=[],c=this.tilemap;Array.isArray(a)||(a=[a]);for(var p=0;p<a.length;p++){var m=a[p];if(typeof m=="string"&&(m=c.getTileset(m)),m){v.push(m);for(var T=m.firstgid,E=0;E<m.total;E++)f[T+E]=m}}this.gidMap=f,this.tileset=v},setRenderOrder:function(a){var f=["right-down","left-down","right-up","left-up"];return typeof a=="string"&&(a=f.indexOf(a)),a>=0&&a<4&&(this._renderOrder=a),this},calculateFacesAt:function(a,f){return h.CalculateFacesAt(a,f,this.layer),this},calculateFacesWithin:function(a,f,v,c){return h.CalculateFacesWithin(a,f,v,c,this.layer),this},createFromTiles:function(a,f,v,c,p){return h.CreateFromTiles(a,f,v,c,p,this.layer)},cull:function(a){return this.cullCallback(this.layer,a,this.culledTiles,this._renderOrder)},copy:function(a,f,v,c,p,m,T){return h.Copy(a,f,v,c,p,m,T,this.layer),this},fill:function(a,f,v,c,p,m){return h.Fill(a,f,v,c,p,m,this.layer),this},filterTiles:function(a,f,v,c,p,m,T){return h.FilterTiles(a,f,v,c,p,m,T,this.layer)},findByIndex:function(a,f,v){return h.FindByIndex(a,f,v,this.layer)},findTile:function(a,f,v,c,p,m,T){return h.FindTile(a,f,v,c,p,m,T,this.layer)},forEachTile:function(a,f,v,c,p,m,T){return h.ForEachTile(a,f,v,c,p,m,T,this.layer),this},setTint:function(a,f,v,c,p,m){a===void 0&&(a=16777215);var T=function(E){E.tint=a,E.tintFill=!1};return this.forEachTile(T,this,f,v,c,p,m)},setTintFill:function(a,f,v,c,p,m){a===void 0&&(a=16777215);var T=function(E){E.tint=a,E.tintFill=!0};return this.forEachTile(T,this,f,v,c,p,m)},getTileAt:function(a,f,v){return h.GetTileAt(a,f,v,this.layer)},getTileAtWorldXY:function(a,f,v,c){return h.GetTileAtWorldXY(a,f,v,c,this.layer)},getIsoTileAtWorldXY:function(a,f,v,c,p){v===void 0&&(v=!0);var m=this.tempVec;return h.IsometricWorldToTileXY(a,f,!0,m,p,this.layer,v),this.getTileAt(m.x,m.y,c)},getTilesWithin:function(a,f,v,c,p){return h.GetTilesWithin(a,f,v,c,p,this.layer)},getTilesWithinShape:function(a,f,v){return h.GetTilesWithinShape(a,f,v,this.layer)},getTilesWithinWorldXY:function(a,f,v,c,p,m){return h.GetTilesWithinWorldXY(a,f,v,c,p,m,this.layer)},hasTileAt:function(a,f){return h.HasTileAt(a,f,this.layer)},hasTileAtWorldXY:function(a,f,v){return h.HasTileAtWorldXY(a,f,v,this.layer)},putTileAt:function(a,f,v,c){return h.PutTileAt(a,f,v,c,this.layer)},putTileAtWorldXY:function(a,f,v,c,p){return h.PutTileAtWorldXY(a,f,v,c,p,this.layer)},putTilesAt:function(a,f,v,c){return h.PutTilesAt(a,f,v,c,this.layer),this},randomize:function(a,f,v,c,p){return h.Randomize(a,f,v,c,p,this.layer),this},removeTileAt:function(a,f,v,c){return h.RemoveTileAt(a,f,v,c,this.layer)},removeTileAtWorldXY:function(a,f,v,c,p){return h.RemoveTileAtWorldXY(a,f,v,c,p,this.layer)},renderDebug:function(a,f){return h.RenderDebug(a,f,this.layer),this},replaceByIndex:function(a,f,v,c,p,m){return h.ReplaceByIndex(a,f,v,c,p,m,this.layer),this},setSkipCull:function(a){return a===void 0&&(a=!0),this.skipCull=a,this},setCullPadding:function(a,f){return a===void 0&&(a=1),f===void 0&&(f=1),this.cullPaddingX=a,this.cullPaddingY=f,this},setCollision:function(a,f,v,c){return h.SetCollision(a,f,v,this.layer,c),this},setCollisionBetween:function(a,f,v,c){return h.SetCollisionBetween(a,f,v,c,this.layer),this},setCollisionByProperty:function(a,f,v){return h.SetCollisionByProperty(a,f,v,this.layer),this},setCollisionByExclusion:function(a,f,v){return h.SetCollisionByExclusion(a,f,v,this.layer),this},setCollisionFromCollisionGroup:function(a,f){return h.SetCollisionFromCollisionGroup(a,f,this.layer),this},setTileIndexCallback:function(a,f,v){return h.SetTileIndexCallback(a,f,v,this.layer),this},setTileLocationCallback:function(a,f,v,c,p,m){return h.SetTileLocationCallback(a,f,v,c,p,m,this.layer),this},shuffle:function(a,f,v,c){return h.Shuffle(a,f,v,c,this.layer),this},swapByIndex:function(a,f,v,c,p,m){return h.SwapByIndex(a,f,v,c,p,m,this.layer),this},tileToWorldX:function(a,f){return this.tilemap.tileToWorldX(a,f,this)},tileToWorldY:function(a,f){return this.tilemap.tileToWorldY(a,f,this)},tileToWorldXY:function(a,f,v,c){return this.tilemap.tileToWorldXY(a,f,v,c,this)},getTileCorners:function(a,f,v){return this.tilemap.getTileCorners(a,f,v,this)},weightedRandomize:function(a,f,v,c,p){return h.WeightedRandomize(f,v,c,p,a,this.layer),this},worldToTileX:function(a,f,v){return this.tilemap.worldToTileX(a,f,v,this)},worldToTileY:function(a,f,v){return this.tilemap.worldToTileY(a,f,v,this)},worldToTileXY:function(a,f,v,c,p){return this.tilemap.worldToTileXY(a,f,v,c,p,this)},destroy:function(a){a===void 0&&(a=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),a&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],l.prototype.destroy.call(this))}});C.exports=d}),16153:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(61340),y=new g,u=new g,l=new g,h=function(r,o,d,a){var f=o.cull(d),v=f.length,c=d.alpha*o.alpha;if(!(v===0||c<=0)){var p=y,m=u,T=l;m.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),p.copyFrom(d.matrix);var E=r.currentContext,P=o.gidMap;E.save(),a?(p.multiplyWithOffset(a,-d.scrollX*o.scrollFactorX,-d.scrollY*o.scrollFactorY),m.e=o.x,m.f=o.y,p.multiply(m,T),T.copyToContext(E)):(m.e-=d.scrollX*o.scrollFactorX,m.f-=d.scrollY*o.scrollFactorY,m.copyToContext(E)),(!r.antialias||o.scaleX>1||o.scaleY>1)&&(E.imageSmoothingEnabled=!1);for(var w=0;w<v;w++){var A=f[w],b=P[A.index];if(b){var O=b.image.getSourceImage(),I=b.getTileTextureCoordinates(A.index),D=b.tileWidth,B=b.tileHeight;if(!(I===null||D===0||B===0)){var k=D*.5,N=B*.5;I.x+=b.tileOffset.x,I.y+=b.tileOffset.y,E.save(),E.translate(A.pixelX+k,A.pixelY+N),A.rotation!==0&&E.rotate(A.rotation),(A.flipX||A.flipY)&&E.scale(A.flipX?-1:1,A.flipY?-1:1),E.globalAlpha=c*A.alpha,E.drawImage(O,I.x,I.y,D,B,-k,-N,D,B),E.restore()}}}E.restore()}};C.exports=h}),19218:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(29747),y=g,u=g;y=s(99558),u=s(16153),C.exports={renderWebGL:y,renderCanvas:u}}),99558:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70554),y=function(u,l,h){var r=l.cull(h),o=r.length,d=h.alpha*l.alpha;if(!(o===0||d<=0)){var a=l.gidMap,f=u.pipelines.set(l.pipeline,l),v=g.getTintAppendFloatAlpha,c=l.scrollFactorX,p=l.scrollFactorY,m=l.x,T=l.y,E=l.scaleX,P=l.scaleY;u.pipelines.preBatch(l);for(var w=0;w<o;w++){var A=r[w],b=a[A.index];if(b){var O=b.getTileTextureCoordinates(A.index),I=b.tileWidth,D=b.tileHeight;if(!(!O||I===0||D===0)){var B=I*.5,k=D*.5,N=b.glTexture,H=f.setTexture2D(N,l),$=I,J=D,q=O.x,Y=O.y,K=b.tileOffset.x,V=b.tileOffset.y,U=v(A.tint,d*A.alpha);f.batchTexture(l,N,N.width,N.height,m+A.pixelX*E+(B*E-K),T+A.pixelY*P+(k*P-V),I,D,E,P,A.rotation,A.flipX,A.flipY,c,p,B,k,q,Y,$,J,U,U,U,U,A.tintFill,0,0,h,null,!0,H,!0)}}}u.pipelines.postBatch(l)}};C.exports=y}),33629:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(26099),u=new g({initialize:function(h,r,o,d,a,f,v,c,p){(o===void 0||o<=0)&&(o=32),(d===void 0||d<=0)&&(d=32),a===void 0&&(a=0),f===void 0&&(f=0),v===void 0&&(v={}),c===void 0&&(c={}),this.name=h,this.firstgid=r,this.tileWidth=o,this.tileHeight=d,this.tileMargin=a,this.tileSpacing=f,this.tileProperties=v,this.tileData=c,this.tileOffset=new y,p!==void 0&&this.tileOffset.set(p.x,p.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(l){return this.containsTileIndex(l)?this.tileProperties[l-this.firstgid]:null},getTileData:function(l){return this.containsTileIndex(l)?this.tileData[l-this.firstgid]:null},getTileCollisionGroup:function(l){var h=this.getTileData(l);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(l){return l>=this.firstgid&&l<this.firstgid+this.total},getTileTextureCoordinates:function(l){return this.containsTileIndex(l)?this.texCoordinates[l-this.firstgid]:null},setImage:function(l){this.image=l;var h=l.get(),r=l.getFrameBounds();return this.glTexture=h.source.glTexture,h.width>r.width||h.height>r.height?this.updateTileData(h.width,h.height):this.updateTileData(r.width,r.height,r.x,r.y),this},setTileSize:function(l,h){return l!==void 0&&(this.tileWidth=l),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(l,h){return l!==void 0&&(this.tileMargin=l),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(l,h,r,o){r===void 0&&(r=0),o===void 0&&(o=0);var d=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(l-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(d%1!==0||a%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),d=Math.floor(d),a=Math.floor(a),this.rows=d,this.columns=a,this.total=d*a,this.texCoordinates.length=0;for(var f=this.tileMargin+r,v=this.tileMargin+o,c=0;c<this.rows;c++){for(var p=0;p<this.columns;p++)this.texCoordinates.push({x:f,y:v}),f+=this.tileWidth+this.tileSpacing;f=this.tileMargin+r,v+=this.tileHeight+this.tileSpacing}return this}});C.exports=u}),72023:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7423),y=function(u,l,h){var r=g(u,l,!0,h),o=g(u,l-1,!0,h),d=g(u,l+1,!0,h),a=g(u-1,l,!0,h),f=g(u+1,l,!0,h),v=r&&r.collides;return v&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),o&&o.collides&&(v&&(r.faceTop=!1),o.faceBottom=!v),d&&d.collides&&(v&&(r.faceBottom=!1),d.faceTop=!v),a&&a.collides&&(v&&(r.faceLeft=!1),a.faceRight=!v),f&&f.collides&&(v&&(r.faceRight=!1),f.faceLeft=!v),r&&!r.collides&&r.resetFaces(),r};C.exports=y}),42573:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7423),y=s(7386),u=function(l,h,r,o,d){for(var a=null,f=null,v=null,c=null,p=y(l,h,r,o,null,d),m=0;m<p.length;m++){var T=p[m];T&&(T.collides?(a=g(T.x,T.y-1,!0,d),f=g(T.x,T.y+1,!0,d),v=g(T.x-1,T.y,!0,d),c=g(T.x+1,T.y,!0,d),T.faceTop=!(a&&a.collides),T.faceBottom=!(f&&f.collides),T.faceLeft=!(v&&v.collides),T.faceRight=!(c&&c.collides)):T.resetFaces())}};C.exports=u}),33528:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=new g,u=function(l,h,r,o){var d=r.tilemapLayer,a=d.cullPaddingX,f=d.cullPaddingY,v=d.tilemap.tileToWorldXY(l,h,y,o,d);return v.x>o.worldView.x+d.scaleX*r.tileWidth*(-a-.5)&&v.x<o.worldView.right+d.scaleX*r.tileWidth*(a-.5)&&v.y>o.worldView.y+d.scaleY*r.tileHeight*(-f-1)&&v.y<o.worldView.bottom+d.scaleY*r.tileHeight*(f-.5)};C.exports=u}),1785:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(42573),y=s(7386),u=s(62991),l=s(23029),h=function(r,o,d,a,f,v,c,p){c===void 0&&(c=!0);var m=y(r,o,d,a,null,p),T=[];m.forEach(function(I){var D=new l(I.layer,I.index,I.x,I.y,I.width,I.height,I.baseWidth,I.baseHeight);D.copy(I),T.push(D)});for(var E=f-r,P=v-o,w=0;w<T.length;w++){var A=T[w],b=A.x+E,O=A.y+P;u(b,O,p)&&p.data[O][b]&&(A.x=b,A.y=O,A.updatePixelXY(),p.data[O][b]=A)}c&&g(f-1,v-1,d+2,a+2,p),m.length=0,T.length=0};C.exports=h}),78419:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62644),y=s(7386),u=s(27987),l=function(h,r,o,d,a,f){o||(o={}),Array.isArray(h)||(h=[h]);var v=f.tilemapLayer;d||(d=v.scene),a||(a=d.cameras.main);var c=f.width,p=f.height,m=y(0,0,c,p,null,f),T=[],E,P=function(O,I,D){for(var B=0;B<D.length;B++){var k=D[B];O.hasOwnProperty(k)||(O[k]=I[k])}};for(E=0;E<m.length;E++){var w=m[E],A=g(o);if(h.indexOf(w.index)!==-1){var b=v.tileToWorldXY(w.x,w.y,void 0,a,f);A.x=b.x,A.y=b.y,P(A,w,["rotation","flipX","flipY","alpha","visible","tint"]),A.hasOwnProperty("origin")||(A.x+=w.width*.5,A.y+=w.height*.5),A.hasOwnProperty("useSpriteSheet")&&(A.key=w.tileset.image,A.frame=w.index-1),T.push(d.make.sprite(A))}}if(Array.isArray(r))for(E=0;E<h.length;E++)u(h[E],r[E],0,0,c,p,f);else if(r!==null)for(E=0;E<h.length;E++)u(h[E],r,0,0,c,p,f);return T};C.exports=l}),19545:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(87841),y=s(63448),u=s(56583),l=new g,h=function(r,o){var d=r.tilemapLayer.tilemap,a=r.tilemapLayer,f=Math.floor(d.tileWidth*a.scaleX),v=Math.floor(d.tileHeight*a.scaleY),c=u(o.worldView.x-a.x,f,0,!0)-a.cullPaddingX,p=y(o.worldView.right-a.x,f,0,!0)+a.cullPaddingX,m=u(o.worldView.y-a.y,v,0,!0)-a.cullPaddingY,T=y(o.worldView.bottom-a.y,v,0,!0)+a.cullPaddingY;return l.setTo(c,m,p-c,T-m)};C.exports=h}),30003:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(19545),y=s(32483),u=function(l,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var d=l.tilemapLayer,a=g(l,h);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),y(l,a,o,r),r};C.exports=u}),35137:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=s(42573),u=s(20576),l=function(h,r,o,d,a,f,v){for(var c=v.collideIndexes.indexOf(h)!==-1,p=g(r,o,d,a,null,v),m=0;m<p.length;m++)p[m].index=h,u(p[m],c);f&&y(r-1,o-1,d+2,a+2,v)};C.exports=l}),40253:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=function(u,l,h,r,o,d,a,f){var v=g(h,r,o,d,a,f);return v.filter(u,l)};C.exports=y}),52692:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){g===void 0&&(g=0),y===void 0&&(y=!1);var l=0,h,r,o;if(y){for(r=u.height-1;r>=0;r--)for(h=u.width-1;h>=0;h--)if(o=u.data[r][h],o&&o.index===s){if(l===g)return o;l+=1}}else for(r=0;r<u.height;r++)for(h=0;h<u.width;h++)if(o=u.data[r][h],o&&o.index===s){if(l===g)return o;l+=1}return null};C.exports=R}),66151:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=function(u,l,h,r,o,d,a,f){var v=g(h,r,o,d,a,f);return v.find(u,l)||null};C.exports=y}),97560:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=function(u,l,h,r,o,d,a,f){var v=g(h,r,o,d,a,f);v.forEach(u,l)};C.exports=y}),43305:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=s(30003),u=s(9474),l=s(14018),h=s(29747),r=s(54503),o=function(d){return d===g.ORTHOGONAL?y:d===g.HEXAGONAL?u:d===g.STAGGERED?r:d===g.ISOMETRIC?l:h};C.exports=o}),7423:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62991),y=function(u,l,h,r){if(g(u,l,r)){var o=r.data[l][u]||null;return o?o.index===-1?h?o:null:o:null}else return null};C.exports=y}),60540:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7423),y=s(26099),u=new y,l=function(h,r,o,d,a){return a.tilemapLayer.worldToTileXY(h,r,!0,u,d),g(u.x,u.y,o,a)};C.exports=l}),55826:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r){var o=r.baseTileWidth,d=r.baseTileHeight,a=r.tilemapLayer,f=0,v=0;a&&(h||(h=a.scene.cameras.main),f=a.x+h.scrollX*(1-a.scrollFactorX),v=a.y+h.scrollY*(1-a.scrollFactorY),o*=a.scaleX,d*=a.scaleY);var c=f+u*o,p=v+l*d;return[new g(c,p),new g(c+o,p),new g(c+o,p+d),new g(c,p+d)]};C.exports=y}),11758:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=s(27229),u=s(29747),l=s(55826),h=function(r){return r===g.ORTHOGONAL?l:r===g.ISOMETRIC?u:r===g.HEXAGONAL?y:(r===g.STAGGERED,u)};C.exports=h}),39167:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=s(29747),u=s(97281),l=function(h){return h===g.ORTHOGONAL?u:y};C.exports=l}),62e3:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=s(19951),u=s(14127),l=s(29747),h=s(97202),r=s(70326),o=function(d){return d===g.ORTHOGONAL?r:d===g.ISOMETRIC?u:d===g.HEXAGONAL?y:d===g.STAGGERED?h:l};C.exports=o}),5984:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=s(29747),u=s(28054),l=s(29650),h=function(r){return r===g.ORTHOGONAL?l:r===g.STAGGERED?u:y};C.exports=h}),7386:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y=function(u,l,h,r,o,d){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=d.width),r===void 0&&(r=d.height),o||(o={});var a=g(o,"isNotEmpty",!1),f=g(o,"isColliding",!1),v=g(o,"hasInterestingFace",!1);u<0&&(h+=u,u=0),l<0&&(r+=l,l=0),u+h>d.width&&(h=Math.max(d.width-u,0)),l+r>d.height&&(r=Math.max(d.height-l,0));for(var c=[],p=l;p<l+r;p++)for(var m=u;m<u+h;m++){var T=d.data[p][m];if(T!==null){if(a&&T.index===-1||f&&!T.collides||v&&!T.hasInterestingFace)continue;c.push(T)}}return c};C.exports=y}),91141:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(55738),y=s(7386),u=s(91865),l=s(29747),h=s(26099),r=function(v,c){return u.RectangleToTriangle(c,v)},o=new h,d=new h,a=new h,f=function(v,c,p,m){if(v===void 0)return[];var T=l;v instanceof g.Circle?T=u.CircleToRectangle:v instanceof g.Rectangle?T=u.RectangleToRectangle:v instanceof g.Triangle?T=r:v instanceof g.Line&&(T=u.LineToRectangle),m.tilemapLayer.worldToTileXY(v.left,v.top,!0,d,p);var E=d.x,P=d.y;m.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,a,p);var w=Math.ceil(a.x),A=Math.ceil(a.y),b=Math.max(w-E,1),O=Math.max(A-P,1),I=y(E,P,b,O,c,m),D=m.tileWidth,B=m.tileHeight;m.tilemapLayer&&(D*=m.tilemapLayer.scaleX,B*=m.tilemapLayer.scaleY);for(var k=[],N=new g.Rectangle(0,0,D,B),H=0;H<I.length;H++){var $=I[H];m.tilemapLayer.tileToWorldXY($.x,$.y,o,p),N.x=o.x,N.y=o.y,T(v,N)&&k.push($)}return k};C.exports=f}),96523:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=s(26099),u=new y,l=new y,h=function(r,o,d,a,f,v,c){var p=c.tilemapLayer.tilemap._convert.WorldToTileXY;p(r,o,!0,u,v,c);var m=u.x,T=u.y;p(r+d,o+a,!1,l,v,c);var E=Math.ceil(l.x),P=Math.ceil(l.y);return g(m,T,E-m,P-T,f,c)};C.exports=h}),96113:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=s(20242),u=s(10095),l=function(h){return h===g.ORTHOGONAL?u:y};C.exports=l}),16926:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=s(86625),u=s(96897),l=s(29747),h=s(15108),r=s(85896),o=function(d){return d===g.ORTHOGONAL?r:d===g.ISOMETRIC?u:d===g.HEXAGONAL?y:d===g.STAGGERED?h:l};C.exports=o}),55762:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=s(20242),u=s(51900),l=s(63288),h=function(r){return r===g.ORTHOGONAL?l:r===g.STAGGERED?u:y};C.exports=h}),45091:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62991),y=function(u,l,h){if(g(u,l,h)){var r=h.data[l][u];return r!==null&&r.index>-1}else return!1};C.exports=y}),24152:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(45091),y=s(26099),u=new y,l=function(h,r,o,d){d.tilemapLayer.worldToTileXY(h,r,!0,u,o);var a=u.x,f=u.y;return g(a,f,d)};C.exports=l}),90454:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(63448),y=s(56583),u=function(l,h){var r=l.tilemapLayer.tilemap,o=l.tilemapLayer,d=Math.floor(r.tileWidth*o.scaleX),a=Math.floor(r.tileHeight*o.scaleY),f=l.hexSideLength,v,c,p,m;if(l.staggerAxis==="y"){var T=(a-f)/2+f;v=y(h.worldView.x-o.x,d,0,!0)-o.cullPaddingX,c=g(h.worldView.right-o.x,d,0,!0)+o.cullPaddingX,p=y(h.worldView.y-o.y,T,0,!0)-o.cullPaddingY,m=g(h.worldView.bottom-o.y,T,0,!0)+o.cullPaddingY}else{var E=(d-f)/2+f;v=y(h.worldView.x-o.x,E,0,!0)-o.cullPaddingX,c=g(h.worldView.right-o.x,E,0,!0)+o.cullPaddingX,p=y(h.worldView.y-o.y,a,0,!0)-o.cullPaddingY,m=g(h.worldView.bottom-o.y,a,0,!0)+o.cullPaddingY}return{left:v,right:c,top:p,bottom:m}};C.exports=u}),9474:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(90454),y=s(32483),u=function(l,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var d=l.tilemapLayer,a=g(l,h);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),y(l,a,o,r),r};C.exports=u}),27229:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(19951),y=s(26099),u=new y,l=function(h,r,o,d){var a=d.baseTileWidth,f=d.baseTileHeight,v=d.tilemapLayer;v&&(a*=v.scaleX,f*=v.scaleY);var c=g(h,r,u,o,d),p=[],m=.5773502691896257,T,E;d.staggerAxis==="y"?(T=m*a,E=f/2):(T=a/2,E=m*f);for(var P=0;P<6;P++){var w=2*Math.PI*(.5-P)/6;p.push(new y(c.x+T*Math.cos(w),c.y+E*Math.sin(w)))}return p};C.exports=l}),19951:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o){h||(h=new g);var d=o.baseTileWidth,a=o.baseTileHeight,f=o.tilemapLayer,v=0,c=0;f&&(r||(r=f.scene.cameras.main),v=f.x+r.scrollX*(1-f.scrollFactorX),c=f.y+r.scrollY*(1-f.scrollFactorY),d*=f.scaleX,a*=f.scaleY);var p=d/2,m=a/2,T,E,P=o.staggerAxis,w=o.staggerIndex;return P==="y"?(T=v+d*u+d,E=c+1.5*l*m+m,l%2===0&&(w==="odd"?T-=p:T+=p)):P==="x"&&w==="odd"&&(T=v+1.5*u*p+p,E=c+a*u+a,u%2===0&&(w==="odd"?E-=m:E+=m)),h.set(T,E)};C.exports=y}),86625:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o,d){r||(r=new g);var a=d.baseTileWidth,f=d.baseTileHeight,v=d.tilemapLayer;v&&(o||(o=v.scene.cameras.main),u=u-(v.x+o.scrollX*(1-v.scrollFactorX)),l=l-(v.y+o.scrollY*(1-v.scrollFactorY)),a*=v.scaleX,f*=v.scaleY);var c=.5773502691896257,p=-.3333333333333333,m=0,T=.6666666666666666,E=a/2,P=f/2,w,A,b,O,I;d.staggerAxis==="y"?(w=(u-E)/(c*a),A=(l-P)/P,b=c*w+p*A,O=m*w+T*A):(w=(u-E)/E,A=(l-P)/(c*f),b=p*w+c*A,O=T*w+m*A),I=-b-O;var D=Math.round(b),B=Math.round(O),k=Math.round(I),N=Math.abs(D-b),H=Math.abs(B-O),$=Math.abs(k-I);N>H&&N>$?D=-B-k:H>$&&(B=-D-k);var J,q=B;return d.staggerIndex==="odd"?J=q%2===0?B/2+D:B/2+D-.5:J=q%2===0?B/2+D:B/2+D+.5,r.set(J,q)};C.exports=y}),62991:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s>=0&&s<y.width&&g>=0&&g<y.height};C.exports=R}),14018:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(33528),y=function(u,l,h,r){h===void 0&&(h=[]),r===void 0&&(r=0),h.length=0;var o=u.tilemapLayer,d=u.data,a=u.width,f=u.height,v=o.skipCull,c=0,p=a,m=0,T=f,E,P,w;if(r===0)for(P=m;P<T;P++)for(E=c;E<p;E++)w=d[P][E],!(!w||w.index===-1||!w.visible||w.alpha===0)&&(!v&&!g(E,P,u,l)||h.push(w));else if(r===1)for(P=m;P<T;P++)for(E=p;E>=c;E--)w=d[P][E],!(!w||w.index===-1||!w.visible||w.alpha===0)&&(!v&&!g(E,P,u,l)||h.push(w));else if(r===2)for(P=T;P>=m;P--)for(E=c;E<p;E++)w=d[P][E],!(!w||w.index===-1||!w.visible||w.alpha===0)&&(!v&&!g(E,P,u,l)||h.push(w));else if(r===3)for(P=T;P>=m;P--)for(E=p;E>=c;E--)w=d[P][E],!(!w||w.index===-1||!w.visible||w.alpha===0)&&(!v&&!g(E,P,u,l)||h.push(w));return o.tilesDrawn=h.length,o.tilesTotal=a*f,h};C.exports=y}),14127:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o){h||(h=new g);var d=o.baseTileWidth,a=o.baseTileHeight,f=o.tilemapLayer,v=0,c=0;f&&(r||(r=f.scene.cameras.main),v=f.x+r.scrollX*(1-f.scrollFactorX),d*=f.scaleX,c=f.y+r.scrollY*(1-f.scrollFactorY),a*=f.scaleY);var p=v+(u-l)*(d/2),m=c+(u+l)*(a/2);return h.set(p,m)};C.exports=y}),96897:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o,d,a){r||(r=new g);var f=d.baseTileWidth,v=d.baseTileHeight,c=d.tilemapLayer;c&&(o||(o=c.scene.cameras.main),l=l-(c.y+o.scrollY*(1-c.scrollFactorY)),v*=c.scaleY,u=u-(c.x+o.scrollX*(1-c.scrollFactorX)),f*=c.scaleX);var p=f/2,m=v/2;u=u-p,a||(l=l-v);var T=.5*(u/p+l/m),E=.5*(-u/p+l/m);return h&&(T=Math.floor(T),E=Math.floor(E)),r.set(T,E)};C.exports=y}),71558:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(23029),y=s(62991),u=s(72023),l=s(20576),h=function(r,o,d,a,f){if(a===void 0&&(a=!0),!y(o,d,f))return null;var v,c=f.data[d][o],p=c&&c.collides;r instanceof g?(f.data[d][o]===null&&(f.data[d][o]=new g(f,r.index,o,d,f.tileWidth,f.tileHeight)),f.data[d][o].copy(r)):(v=r,f.data[d][o]===null?f.data[d][o]=new g(f,v,o,d,f.tileWidth,f.tileHeight):f.data[d][o].index=v);var m=f.data[d][o],T=f.collideIndexes.indexOf(m.index)!==-1;if(v=r instanceof g?r.index:r,v===-1)m.width=f.tileWidth,m.height=f.tileHeight;else{var E=f.tilemapLayer.tilemap,P=E.tiles,w=P[v][2],A=E.tilesets[w];m.width=A.tileWidth,m.height=A.tileHeight}return l(m,T),a&&p!==m.collides&&u(o,d,f),m};C.exports=h}),26303:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(71558),y=s(26099),u=new y,l=function(h,r,o,d,a,f){return f.tilemapLayer.worldToTileXY(r,o,!0,u,a,f),g(h,u.x,u.y,d,f)};C.exports=l}),14051:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(42573),y=s(71558),u=function(l,h,r,o,d){if(o===void 0&&(o=!0),!Array.isArray(l))return null;Array.isArray(l[0])||(l=[l]);for(var a=l.length,f=l[0].length,v=0;v<a;v++)for(var c=0;c<f;c++){var p=l[v][c];y(p,h+c,r+v,!1,d)}o&&g(h-1,r-1,f+2,a+2,d)};C.exports=u}),77389:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=s(26546),u=function(l,h,r,o,d,a){var f,v=g(l,h,r,o,{},a);if(!d)for(d=[],f=0;f<v.length;f++)d.indexOf(v[f].index)===-1&&d.push(v[f].index);for(f=0;f<v.length;f++)v[f].index=y(d)};C.exports=u}),63557:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(23029),y=s(62991),u=s(72023),l=function(h,r,o,d,a){if(o===void 0&&(o=!0),d===void 0&&(d=!0),!y(h,r,a))return null;var f=a.data[r][h];if(f)a.data[r][h]=o?null:new g(a,-1,h,r,a.tileWidth,a.tileHeight);else return null;return d&&f&&f.collides&&u(h,r,a),f};C.exports=l}),94178:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(63557),y=s(26099),u=new y,l=function(h,r,o,d,a,f){return f.tilemapLayer.worldToTileXY(h,r,!0,u,a,f),g(u.x,u.y,o,d,f)};C.exports=l}),15533:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=s(3956),u=new y(105,210,231,150),l=new y(243,134,48,200),h=new y(40,39,37,150),r=function(o,d,a){d===void 0&&(d={});var f=d.tileColor!==void 0?d.tileColor:u,v=d.collidingTileColor!==void 0?d.collidingTileColor:l,c=d.faceColor!==void 0?d.faceColor:h,p=g(0,0,a.width,a.height,null,a);o.translateCanvas(a.tilemapLayer.x,a.tilemapLayer.y),o.scaleCanvas(a.tilemapLayer.scaleX,a.tilemapLayer.scaleY);for(var m=0;m<p.length;m++){var T=p[m],E=T.width,P=T.height,w=T.pixelX,A=T.pixelY,b=T.collides?v:f;b!==null&&(o.fillStyle(b.color,b.alpha/255),o.fillRect(w,A,E,P)),w+=1,A+=1,E-=2,P-=2,c!==null&&(o.lineStyle(1,c.color,c.alpha/255),T.faceTop&&o.lineBetween(w,A,w+E,A),T.faceRight&&o.lineBetween(w+E,A,w+E,A+P),T.faceBottom&&o.lineBetween(w,A+P,w+E,A+P),T.faceLeft&&o.lineBetween(w,A,w,A+P))}};C.exports=r}),27987:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=function(u,l,h,r,o,d,a){for(var f=g(h,r,o,d,null,a),v=0;v<f.length;v++)f[v]&&f[v].index===u&&(f[v].index=l)};C.exports=y}),32483:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=s.data,h=s.width,r=s.height,o=s.tilemapLayer,d=Math.max(0,g.left),a=Math.min(h,g.right),f=Math.max(0,g.top),v=Math.min(r,g.bottom),c,p,m;if(y===0)for(p=f;p<v;p++)for(c=d;l[p]&&c<a;c++)m=l[p][c],!(!m||m.index===-1||!m.visible||m.alpha===0)&&u.push(m);else if(y===1)for(p=f;p<v;p++)for(c=a;l[p]&&c>=d;c--)m=l[p][c],!(!m||m.index===-1||!m.visible||m.alpha===0)&&u.push(m);else if(y===2)for(p=v;p>=f;p--)for(c=d;l[p]&&c<a;c++)m=l[p][c],!(!m||m.index===-1||!m.visible||m.alpha===0)&&u.push(m);else if(y===3)for(p=v;p>=f;p--)for(c=a;l[p]&&c>=d;c--)m=l[p][c],!(!m||m.index===-1||!m.visible||m.alpha===0)&&u.push(m);return o.tilesDrawn=u.length,o.tilesTotal=h*r,u};C.exports=R}),57068:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20576),y=s(42573),u=s(9589),l=function(h,r,o,d,a){r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=!0),Array.isArray(h)||(h=[h]);for(var f=0;f<h.length;f++)u(h[f],r,d);if(a)for(var v=0;v<d.height;v++)for(var c=0;c<d.width;c++){var p=d.data[v][c];p&&h.indexOf(p.index)!==-1&&g(p,r)}o&&y(0,0,d.width,d.height,d)};C.exports=l}),37266:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20576),y=s(42573),u=s(9589),l=function(h,r,o,d,a,f){if(o===void 0&&(o=!0),d===void 0&&(d=!0),f===void 0&&(f=!0),!(h>r)){for(var v=h;v<=r;v++)u(v,o,a);if(f)for(var c=0;c<a.height;c++)for(var p=0;p<a.width;p++){var m=a.data[c][p];m&&m.index>=h&&m.index<=r&&g(m,o)}d&&y(0,0,a.width,a.height,a)}};C.exports=l}),75661:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20576),y=s(42573),u=s(9589),l=function(h,r,o,d){r===void 0&&(r=!0),o===void 0&&(o=!0),Array.isArray(h)||(h=[h]);for(var a=0;a<d.height;a++)for(var f=0;f<d.width;f++){var v=d.data[a][f];v&&h.indexOf(v.index)===-1&&(g(v,r),u(v.index,r,d))}o&&y(0,0,d.width,d.height,d)};C.exports=l}),64740:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20576),y=s(42573),u=s(97022),l=function(h,r,o,d){r===void 0&&(r=!0),o===void 0&&(o=!0);for(var a=0;a<d.height;a++)for(var f=0;f<d.width;f++){var v=d.data[a][f];if(v){for(var c in h)if(u(v.properties,c)){var p=h[c];Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)v.properties[c]===p[m]&&g(v,r)}}}o&&y(0,0,d.width,d.height,d)};C.exports=l}),63307:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(20576),y=s(42573),u=function(l,h,r){l===void 0&&(l=!0),h===void 0&&(h=!0);for(var o=0;o<r.height;o++)for(var d=0;d<r.width;d++){var a=r.data[o][d];if(a){var f=a.getCollisionGroup();f&&f.objects&&f.objects.length>0&&g(a,l)}}h&&y(0,0,r.width,r.height,r)};C.exports=u}),9589:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=y.collideIndexes.indexOf(s);g&&u===-1?y.collideIndexes.push(s):!g&&u!==-1&&y.collideIndexes.splice(u,1)};C.exports=R}),20576:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g?s.setCollision(!0,!0,!0,!0,!1):s.resetCollision(!1)};C.exports=R}),79583:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){if(typeof s=="number")u.callbacks[s]=g!==null?{callback:g,callbackContext:y}:void 0;else for(var l=0,h=s.length;l<h;l++)u.callbacks[s[l]]=g!==null?{callback:g,callbackContext:y}:void 0};C.exports=R}),93254:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=function(u,l,h,r,o,d,a){for(var f=g(u,l,h,r,null,a),v=0;v<f.length;v++)f[v].setCollisionCallback(o,d)};C.exports=y}),32903:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=s(33680),u=function(l,h,r,o,d){var a=g(l,h,r,o,null,d),f=a.map(function(c){return c.index});y(f);for(var v=0;v<a.length;v++)a[v].index=f[v]};C.exports=u}),61325:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(63448),y=s(56583),u=function(l,h){var r=l.tilemapLayer.tilemap,o=l.tilemapLayer,d=Math.floor(r.tileWidth*o.scaleX),a=Math.floor(r.tileHeight*o.scaleY),f=y(h.worldView.x-o.x,d,0,!0)-o.cullPaddingX,v=g(h.worldView.right-o.x,d,0,!0)+o.cullPaddingX,c=y(h.worldView.y-o.y,a/2,0,!0)-o.cullPaddingY,p=g(h.worldView.bottom-o.y,a/2,0,!0)+o.cullPaddingY;return{left:f,right:v,top:c,bottom:p}};C.exports=u}),54503:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(61325),y=s(32483),u=function(l,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var d=l.tilemapLayer,a=g(l,h);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),y(l,a,o,r),r};C.exports=u}),97202:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o){h||(h=new g);var d=o.baseTileWidth,a=o.baseTileHeight,f=o.tilemapLayer,v=0,c=0;f&&(r||(r=f.scene.cameras.main),v=f.x+r.scrollX*(1-f.scrollFactorX),d*=f.scaleX,c=f.y+r.scrollY*(1-f.scrollFactorY),a*=f.scaleY);var p=v+u*d+l%2*(d/2),m=c+l*(a/2);return h.set(p,m)};C.exports=y}),28054:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=y.baseTileHeight,l=y.tilemapLayer,h=0;return l&&(g===void 0&&(g=l.scene.cameras.main),h=l.y+g.scrollY*(1-l.scrollFactorY),u*=l.scaleY),h+s*(u/2)+u};C.exports=R}),15108:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o,d){r||(r=new g);var a=d.baseTileWidth,f=d.baseTileHeight,v=d.tilemapLayer;v&&(o||(o=v.scene.cameras.main),l=l-(v.y+o.scrollY*(1-v.scrollFactorY)),f*=v.scaleY,u=u-(v.x+o.scrollX*(1-v.scrollFactorX)),a*=v.scaleX);var c=h?Math.floor(l/(f/2)):l/(f/2),p=h?Math.floor((u+c%2*.5*a)/a):(u+c%2*.5*a)/a;return r.set(p,c)};C.exports=y}),51900:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=u.baseTileHeight,h=u.tilemapLayer;return h&&(y||(y=h.scene.cameras.main),s=s-(h.y+y.scrollY*(1-h.scrollFactorY)),l*=h.scaleY),g?Math.floor(s/(l/2)):s/(l/2)};C.exports=R}),86560:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=function(u,l,h,r,o,d,a){for(var f=g(h,r,o,d,null,a),v=0;v<f.length;v++)f[v]&&(f[v].index===u?f[v].index=l:f[v].index===l&&(f[v].index=u))};C.exports=y}),97281:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=y.baseTileWidth,l=y.tilemapLayer,h=0;return l&&(g||(g=l.scene.cameras.main),h=l.x+g.scrollX*(1-l.scrollFactorX),u*=l.scaleX),h+s*u};C.exports=R}),70326:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(97281),y=s(29650),u=s(26099),l=function(h,r,o,d,a){return o||(o=new u(0,0)),o.x=g(h,d,a),o.y=y(r,d,a),o};C.exports=l}),29650:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=y.baseTileHeight,l=y.tilemapLayer,h=0;return l&&(g||(g=l.scene.cameras.main),h=l.y+g.scrollY*(1-l.scrollFactorY),u*=l.scaleY),h+s*u};C.exports=R}),77366:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(7386),y=s(75508),u=function(l,h,r,o,d,a){if(d){var f,v=g(l,h,r,o,null,a),c=0;for(f=0;f<d.length;f++)c+=d[f].weight;if(!(c<=0))for(f=0;f<v.length;f++){for(var p=y.RND.frac()*c,m=0,T=-1,E=0;E<d.length;E++)if(m+=d[E].weight,p<=m){var P=d[E].index;T=Array.isArray(P)?P[Math.floor(y.RND.frac()*P.length)]:P;break}v[f].index=T}}};C.exports=u}),10095:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(85896),y=s(26099),u=new y,l=function(h,r,o,d){return g(h,0,r,u,o,d),u.x};C.exports=l}),85896:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(26099),y=function(u,l,h,r,o,d){h===void 0&&(h=!0),r||(r=new g);var a=d.baseTileWidth,f=d.baseTileHeight,v=d.tilemapLayer;v&&(o||(o=v.scene.cameras.main),u=u-(v.x+o.scrollX*(1-v.scrollFactorX)),l=l-(v.y+o.scrollY*(1-v.scrollFactorY)),a*=v.scaleX,f*=v.scaleY);var c=u/a,p=l/f;return h&&(c=Math.floor(c),p=Math.floor(p)),r.set(c,p)};C.exports=y}),63288:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(85896),y=s(26099),u=new y,l=function(h,r,o,d){return g(0,h,r,u,o,d),u.y};C.exports=l}),81086:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={CalculateFacesAt:s(72023),CalculateFacesWithin:s(42573),CheckIsoBounds:s(33528),Copy:s(1785),CreateFromTiles:s(78419),CullBounds:s(19545),CullTiles:s(30003),Fill:s(35137),FilterTiles:s(40253),FindByIndex:s(52692),FindTile:s(66151),ForEachTile:s(97560),GetCullTilesFunction:s(43305),GetTileAt:s(7423),GetTileAtWorldXY:s(60540),GetTileCorners:s(55826),GetTileCornersFunction:s(11758),GetTilesWithin:s(7386),GetTilesWithinShape:s(91141),GetTilesWithinWorldXY:s(96523),GetTileToWorldXFunction:s(39167),GetTileToWorldXYFunction:s(62e3),GetTileToWorldYFunction:s(5984),GetWorldToTileXFunction:s(96113),GetWorldToTileXYFunction:s(16926),GetWorldToTileYFunction:s(55762),HasTileAt:s(45091),HasTileAtWorldXY:s(24152),HexagonalCullBounds:s(90454),HexagonalCullTiles:s(9474),HexagonalGetTileCorners:s(27229),HexagonalTileToWorldXY:s(19951),HexagonalWorldToTileXY:s(86625),IsInLayerBounds:s(62991),IsometricCullTiles:s(14018),IsometricTileToWorldXY:s(14127),IsometricWorldToTileXY:s(96897),PutTileAt:s(71558),PutTileAtWorldXY:s(26303),PutTilesAt:s(14051),Randomize:s(77389),RemoveTileAt:s(63557),RemoveTileAtWorldXY:s(94178),RenderDebug:s(15533),ReplaceByIndex:s(27987),RunCull:s(32483),SetCollision:s(57068),SetCollisionBetween:s(37266),SetCollisionByExclusion:s(75661),SetCollisionByProperty:s(64740),SetCollisionFromCollisionGroup:s(63307),SetLayerCollisionIndex:s(9589),SetTileCollision:s(20576),SetTileIndexCallback:s(79583),SetTileLocationCallback:s(93254),Shuffle:s(32903),StaggeredCullBounds:s(61325),StaggeredCullTiles:s(54503),StaggeredTileToWorldXY:s(97202),StaggeredTileToWorldY:s(28054),StaggeredWorldToTileXY:s(15108),StaggeredWorldToTileY:s(51900),SwapByIndex:s(86560),TileToWorldX:s(97281),TileToWorldXY:s(70326),TileToWorldY:s(29650),WeightedRandomize:s(77366),WorldToTileX:s(10095),WorldToTileXY:s(85896),WorldToTileY:s(63288)}}),91907:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}}),21829:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={ORIENTATION:s(91907)};C.exports=g}),62501:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(79291),y=s(21829),u={Components:s(81086),Parsers:s(57442),Formats:s(80341),ImageCollection:s(16536),ParseToTilemap:s(31989),Tile:s(23029),Tilemap:s(49075),TilemapCreator:s(45939),TilemapFactory:s(46029),Tileset:s(33629),TilemapLayer:s(20442),Orientation:s(91907),LayerData:s(14977),MapData:s(87010),ObjectLayer:s(48700)};u=g(!1,u,y.ORIENTATION),C.exports=u}),14977:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(91907),u=s(95540),l=new g({initialize:function(r){r===void 0&&(r={}),this.name=u(r,"name","layer"),this.id=u(r,"id",0),this.x=u(r,"x",0),this.y=u(r,"y",0),this.width=u(r,"width",0),this.height=u(r,"height",0),this.tileWidth=u(r,"tileWidth",0),this.tileHeight=u(r,"tileHeight",0),this.baseTileWidth=u(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=u(r,"baseTileHeight",this.tileHeight),this.orientation=u(r,"orientation",y.ORTHOGONAL),this.widthInPixels=u(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=u(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=u(r,"alpha",1),this.visible=u(r,"visible",!0),this.properties=u(r,"properties",[]),this.indexes=u(r,"indexes",[]),this.collideIndexes=u(r,"collideIndexes",[]),this.callbacks=u(r,"callbacks",[]),this.bodies=u(r,"bodies",[]),this.data=u(r,"data",[]),this.tilemapLayer=u(r,"tilemapLayer",null),this.hexSideLength=u(r,"hexSideLength",0),this.staggerAxis=u(r,"staggerAxis","y"),this.staggerIndex=u(r,"staggerIndex","odd")}});C.exports=l}),87010:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(91907),u=s(95540),l=new g({initialize:function(r){r===void 0&&(r={}),this.name=u(r,"name","map"),this.width=u(r,"width",0),this.height=u(r,"height",0),this.infinite=u(r,"infinite",!1),this.tileWidth=u(r,"tileWidth",0),this.tileHeight=u(r,"tileHeight",0),this.widthInPixels=u(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=u(r,"heightInPixels",this.height*this.tileHeight),this.format=u(r,"format",null),this.orientation=u(r,"orientation",y.ORTHOGONAL),this.renderOrder=u(r,"renderOrder","right-down"),this.version=u(r,"version","1"),this.properties=u(r,"properties",{}),this.layers=u(r,"layers",[]),this.images=u(r,"images",[]),this.objects=u(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=u(r,"collision",{}),this.tilesets=u(r,"tilesets",[]),this.imageCollections=u(r,"imageCollections",[]),this.tiles=u(r,"tiles",[]),this.hexSideLength=u(r,"hexSideLength",0),this.staggerAxis=u(r,"staggerAxis","y"),this.staggerIndex=u(r,"staggerIndex","odd")}});C.exports=l}),48700:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=new g({initialize:function(h){h===void 0&&(h={}),this.name=y(h,"name","object layer"),this.id=y(h,"id",0),this.opacity=y(h,"opacity",1),this.properties=y(h,"properties",{}),this.propertyTypes=y(h,"propertytypes",{}),this.type=y(h,"type","objectgroup"),this.visible=y(h,"visible",!0),this.objects=y(h,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});C.exports=u}),6641:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(91907),y=function(u){return u=u.toLowerCase(),u==="isometric"?g.ISOMETRIC:u==="staggered"?g.STAGGERED:u==="hexagonal"?g.HEXAGONAL:g.ORTHOGONAL};C.exports=y}),46177:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(80341),y=s(2342),u=s(82593),l=s(46594),h=s(87021),r=function(o,d,a,f,v,c){var p;switch(d){case g.ARRAY_2D:p=y(o,a,f,v,c);break;case g.CSV:p=u(o,a,f,v,c);break;case g.TILED_JSON:p=l(o,a,c);break;case g.WELTMEISTER:p=h(o,a,c);break;default:console.warn("Unrecognized tilemap data format: "+d),p=null}return p};C.exports=r}),2342:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(80341),y=s(14977),u=s(87010),l=s(23029),h=function(r,o,d,a,f){for(var v=new y({tileWidth:d,tileHeight:a}),c=new u({name:r,tileWidth:d,tileHeight:a,format:g.ARRAY_2D,layers:[v]}),p=[],m=o.length,T=0,E=0;E<o.length;E++){p[E]=[];for(var P=o[E],w=0;w<P.length;w++){var A=parseInt(P[w],10);isNaN(A)||A===-1?p[E][w]=f?null:new l(v,-1,w,E,d,a):p[E][w]=new l(v,A,w,E,d,a)}T===0&&(T=P.length)}return c.width=v.width=T,c.height=v.height=m,c.widthInPixels=v.widthInPixels=T*d,c.heightInPixels=v.heightInPixels=m*a,v.data=p,c};C.exports=h}),82593:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(80341),y=s(2342),u=function(l,h,r,o,d){var a=h.trim().split(`
`).map(function(v){return v.split(",")}),f=y(l,a,r,o,d);return f.format=g.CSV,f};C.exports=u}),6656:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(14977),y=s(23029),u=function(l,h){for(var r=[],o=0;o<l.layer.length;o++){for(var d=l.layer[o],a=new g({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),f=[],v=[],c=0;c<d.data.length;c++){for(var p=0;p<d.data[c].length;p++){var m=d.data[c][p]-1,T;m>-1?T=new y(a,m,p,c,d.tilesize,d.tilesize):T=h?null:new y(a,-1,p,c,d.tilesize,d.tilesize),f.push(T)}v.push(f),f=[]}a.data=v,r.push(a)}return r};C.exports=u}),96483:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(33629),y=function(u){for(var l=[],h=[],r=0;r<u.layer.length;r++){var o=u.layer[r],d=o.tilesetName;d!==""&&h.indexOf(d)===-1&&(h.push(d),l.push(new g(d,0,o.tilesize,o.tilesize,0,0)))}return l};C.exports=y}),87021:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(80341),y=s(87010),u=s(6656),l=s(96483),h=function(r,o,d){if(o.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var a=0,f=0,v=0;v<o.layer.length;v++)o.layer[v].width>a&&(a=o.layer[v].width),o.layer[v].height>f&&(f=o.layer[v].height);var c=new y({width:a,height:f,name:r,tileWidth:o.layer[0].tilesize,tileHeight:o.layer[0].tilesize,format:g.WELTMEISTER});return c.layers=u(o,d),c.tilesets=l(o),c};C.exports=h}),52833:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ParseTileLayers:s(6656),ParseTilesets:s(96483),ParseWeltmeister:s(87021)}}),57442:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={FromOrientationString:s(6641),Parse:s(46177),Parse2DArray:s(2342),ParseCSV:s(82593),Impact:s(52833),Tiled:s(96761)}}),51233:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(79291),y=function(u){for(var l,h,r,o,d,a=0;a<u.layers.length;a++){l=u.layers[a],o=null;for(var f=0;f<l.data.length;f++){d=l.data[f];for(var v=0;v<d.length;v++)h=d[v],!(h===null||h.index<0)&&(r=u.tiles[h.index][2],o=u.tilesets[r],h.width=o.tileWidth,h.height=o.tileHeight,o.tileProperties&&o.tileProperties[h.index-o.firstgid]&&(h.properties=g(h.properties,o.tileProperties[h.index-o.firstgid])))}}};C.exports=y}),41868:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){for(var g=window.atob(s),y=g.length,u=new Array(y/4),l=0;l<y;l+=4)u[l/4]=(g.charCodeAt(l)|g.charCodeAt(l+1)<<8|g.charCodeAt(l+2)<<16|g.charCodeAt(l+3)<<24)>>>0;return u};C.exports=R}),84101:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(33629),y=function(u){var l,h,r=[];for(l=0;l<u.imageCollections.length;l++)for(var o=u.imageCollections[l],d=o.images,a=0;a<d.length;a++){var f=d[a];h=new g(f.image,f.gid,o.imageWidth,o.imageHeight,0,0),h.updateTileData(o.imageWidth,o.imageHeight),u.tilesets.push(h)}for(l=0;l<u.tilesets.length;l++){h=u.tilesets[l];for(var v=h.tileMargin,c=h.tileMargin,p=0,m=0,T=0,E=h.firstgid;E<h.firstgid+h.total&&(r[E]=[v,c,l],v+=h.tileWidth+h.tileSpacing,p++,!(p===h.total||(m++,m===h.columns&&(v=h.tileMargin,c+=h.tileHeight+h.tileSpacing,m=0,T++,T===h.rows))));E++);}return r};C.exports=y}),79677:((C,R,s)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y=function(u,l,h){if(!l)return{i:0,layers:u.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=l.x+g(l,"startx",0)*u.tilewidth+g(l,"offsetx",0),o=l.y+g(l,"starty",0)*u.tileheight+g(l,"offsety",0);return{i:0,layers:l.layers,name:h.name+l.name+"/",opacity:h.opacity*l.opacity,visible:h.visible&&l.visible,x:h.x+r,y:h.y+o}};C.exports=y}),29920:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=2147483648,s=1073741824,g=536870912,y=function(u){var l=!!(u&R),h=!!(u&s),r=!!(u&g);u=u&536870911;var o=0,d=!1;return l&&h&&r?(o=Math.PI/2,d=!0):l&&h&&!r?(o=Math.PI,d=!1):l&&!h&&r?(o=Math.PI/2,d=!1):l&&!h&&!r?(o=0,d=!0):!l&&h&&r?(o=3*Math.PI/2,d=!1):!l&&h&&!r?(o=Math.PI,d=!0):!l&&!h&&r?(o=3*Math.PI/2,d=!0):!l&&!h&&!r&&(o=0,d=!1),{gid:u,flippedHorizontal:l,flippedVertical:h,flippedAntiDiagonal:r,rotation:o,flipped:d}};C.exports=y}),12635:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y=s(79677),u=function(l){for(var h=[],r=[],o=y(l);o.i<o.layers.length||r.length>0;){if(o.i>=o.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=r.pop();continue}var d=o.layers[o.i];if(o.i++,d.type!=="imagelayer"){if(d.type==="group"){var a=y(l,d,o);r.push(o),o=a}continue}var f=g(d,"offsetx",0)+g(d,"startx",0),v=g(d,"offsety",0)+g(d,"starty",0);h.push({name:o.name+d.name,image:d.image,x:o.x+f+d.x,y:o.y+v+d.y,alpha:o.opacity*d.opacity,visible:o.visible&&d.visible,properties:g(d,"properties",{})})}return h};C.exports=u}),46594:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(51233),y=s(84101),u=s(91907),l=s(62644),h=s(80341),r=s(6641),o=s(87010),d=s(12635),a=s(22611),f=s(28200),v=s(24619),c=function(p,m,T){var E=l(m),P=new o({width:E.width,height:E.height,name:p,tileWidth:E.tilewidth,tileHeight:E.tileheight,orientation:r(E.orientation),format:h.TILED_JSON,version:E.version,properties:E.properties,renderOrder:E.renderorder,infinite:E.infinite});P.orientation===u.HEXAGONAL&&(P.hexSideLength=E.hexsidelength,P.staggerAxis=E.staggeraxis,P.staggerIndex=E.staggerindex),P.layers=f(E,T),P.images=d(E);var w=v(E);return P.tilesets=w.tilesets,P.imageCollections=w.imageCollections,P.objects=a(E),P.tiles=y(P),g(P),P};C.exports=c}),52205:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(18254),y=s(29920),u=function(r){return{x:r.x,y:r.y}},l=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(r,o,d){o===void 0&&(o=0),d===void 0&&(d=0);var a=g(r,l);if(a.x+=o,a.y+=d,r.gid){var f=y(r.gid);a.gid=f.gid,a.flippedHorizontal=f.flippedHorizontal,a.flippedVertical=f.flippedVertical,a.flippedAntiDiagonal=f.flippedAntiDiagonal}else r.polyline?a.polyline=r.polyline.map(u):r.polygon?a.polygon=r.polygon.map(u):r.ellipse?a.ellipse=r.ellipse:r.text?a.text=r.text:r.point?a.point=!0:a.rectangle=!0;return a};C.exports=h}),22611:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95540),y=s(52205),u=s(48700),l=s(79677),h=function(r){for(var o=[],d=[],a=l(r);a.i<a.layers.length||d.length>0;){if(a.i>=a.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=d.pop();continue}var f=a.layers[a.i];if(a.i++,f.opacity*=a.opacity,f.visible=a.visible&&f.visible,f.type!=="objectgroup"){if(f.type==="group"){var v=l(r,f,a);d.push(a),a=v}continue}f.name=a.name+f.name;for(var c=a.x+g(f,"startx",0)+g(f,"offsetx",0),p=a.y+g(f,"starty",0)+g(f,"offsety",0),m=[],T=0;T<f.objects.length;T++){var E=y(f.objects[T],c,p);m.push(E)}var P=new u(f);P.objects=m,o.push(P)}return o};C.exports=h}),28200:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(41868),y=s(91907),u=s(79677),l=s(6641),h=s(95540),r=s(14977),o=s(29920),d=s(23029),a=function(f,v){for(var c=h(f,"infinite",!1),p=[],m=[],T=u(f);T.i<T.layers.length||m.length>0;){if(T.i>=T.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}T=m.pop();continue}var E=T.layers[T.i];if(T.i++,E.type!=="tilelayer"){if(E.type==="group"){var P=u(f,E,T);m.push(T),T=P}continue}if(E.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+E.name+"'");continue}else if(E.encoding&&E.encoding==="base64"){if(E.chunks)for(var w=0;w<E.chunks.length;w++)E.chunks[w].data=g(E.chunks[w].data);E.data&&(E.data=g(E.data)),delete E.encoding}var A,b,O,I,D=[],B=0;if(c){var k=h(E,"startx",0)+E.x,N=h(E,"starty",0)+E.y;A=new r({name:T.name+E.name,id:E.id,x:T.x+h(E,"offsetx",0)+k*f.tilewidth,y:T.y+h(E,"offsety",0)+N*f.tileheight,width:E.width,height:E.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:T.opacity*E.opacity,visible:T.visible&&E.visible,properties:h(E,"properties",[]),orientation:l(f.orientation)}),A.orientation===y.HEXAGONAL&&(A.hexSideLength=f.hexsidelength,A.staggerAxis=f.staggeraxis,A.staggerIndex=f.staggerindex);for(var H=0;H<E.height;H++){D[H]=[null];for(var $=0;$<E.width;$++)D[H][$]=null}for(H=0,at=E.chunks.length;H<at;H++)for(var J=E.chunks[H],q=J.x-k,Y=J.y-N,K=0,V=0,U=J.data.length;V<U;V++){var Z=B+q,et=K+Y;b=o(J.data[V]),b.gid>0?(O=new d(A,b.gid,Z,et,f.tilewidth,f.tileheight),O.rotation=b.rotation,O.flipX=b.flipped,D[et][Z]=O):(I=v?null:new d(A,-1,Z,et,f.tilewidth,f.tileheight),D[et][Z]=I),B++,B===J.width&&(K++,B=0)}}else{A=new r({name:T.name+E.name,id:E.id,x:T.x+h(E,"offsetx",0)+E.x,y:T.y+h(E,"offsety",0)+E.y,width:E.width,height:E.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:T.opacity*E.opacity,visible:T.visible&&E.visible,properties:h(E,"properties",[]),orientation:l(f.orientation)}),A.orientation===y.HEXAGONAL&&(A.hexSideLength=f.hexsidelength,A.staggerAxis=f.staggeraxis,A.staggerIndex=f.staggerindex);for(var st=[],rt=0,at=E.data.length;rt<at;rt++)b=o(E.data[rt]),b.gid>0?(O=new d(A,b.gid,B,D.length,f.tilewidth,f.tileheight),O.rotation=b.rotation,O.flipX=b.flipped,st.push(O)):(I=v?null:new d(A,-1,B,D.length,f.tilewidth,f.tileheight),st.push(I)),B++,B===E.width&&(D.push(st),B=0,st=[])}A.data=D,p.push(A)}return p};C.exports=a}),24619:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(33629),y=s(16536),u=s(52205),l=s(57880),h=function(r){for(var o=[],d=[],a=null,f,v=0;v<r.tilesets.length;v++){var c=r.tilesets[v];if(c.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(c.image){var p=new g(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,void 0,void 0,c.tileoffset);if(r.version>1){var m=void 0,T=void 0;if(Array.isArray(c.tiles)){m=m||{},T=T||{};for(var E=0;E<c.tiles.length;E++){var P=c.tiles[E];if(P.properties){var w={};P.properties.forEach(function(H){w[H.name]=H.value}),T[P.id]=w}if(P.objectgroup&&((m[P.id]||(m[P.id]={})).objectgroup=P.objectgroup,P.objectgroup.objects)){var A=P.objectgroup.objects.map(function(H){return u(H)});m[P.id].objectgroup.objects=A}P.animation&&((m[P.id]||(m[P.id]={})).animation=P.animation),P.type&&((m[P.id]||(m[P.id]={})).type=P.type)}}Array.isArray(c.wangsets)&&(m=m||{},T=T||{},l(c.wangsets,m)),m&&(p.tileData=m,p.tileProperties=T)}else if(c.tileproperties&&(p.tileProperties=c.tileproperties),c.tiles){p.tileData=c.tiles;for(f in p.tileData){var b=p.tileData[f].objectgroup;if(b&&b.objects){var O=b.objects.map(function(H){return u(H)});p.tileData[f].objectgroup.objects=O}}}p.updateTileData(c.imagewidth,c.imageheight),o.push(p)}else{var I=new y(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties),D=0;for(E=0;E<c.tiles.length;E++){P=c.tiles[E];var B=P.image,k=parseInt(P.id,10),N=c.firstgid+k;I.addImage(N,B),D=Math.max(k,D)}I.maxId=D,d.push(I)}a&&(a.lastgid=c.firstgid-1),a=c}return{tilesets:o,imageCollections:d}};C.exports=h}),57880:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){for(var y=0;y<s.length;y++){var u=s[y],l=y;if(u.name&&u.name!==""&&(l=u.name),Array.isArray(u.wangtiles)&&u.wangtiles.length>0){var h={},r={},o,d,a;if(Array.isArray(u.edgecolors))for(o=0;o<u.edgecolors.length;o++)a=1+o,d=u.edgecolors[o],d.name!==""&&(h[a]=d.name);if(Array.isArray(u.cornercolors))for(o=0;o<u.cornercolors.length;o++)a=1+o,d=u.cornercolors[o],d.name!==""&&(r[a]=d.name);if(Array.isArray(u.colors))for(o=0;o<u.colors.length;o++)d=u.colors[o],a=1+o,d.name!==""&&(h[a]=r[a]=d.name);for(var f=[h,r,h,r,h,r,h,r],v=0;v<u.wangtiles.length;v++){var c=u.wangtiles[v],p=g[c.tileid]||(g[c.tileid]={});p=p.wangid||(p.wangid={});for(var m=[],T=0;T<Math.min(f.length,c.wangid.length);T++){if(d=c.wangid[T],d===0){m.push(void 0);continue}var E=f[T][d];if(E!==void 0){m.push(E);continue}m.push(d)}p[l]=m}}}};C.exports=R}),96761:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={AssignTileProperties:s(51233),Base64Decode:s(41868),BuildTilesetIndex:s(84101),CreateGroupLayer:s(79677),ParseGID:s(29920),ParseImageLayers:s(12635),ParseJSONTiled:s(46594),ParseObject:s(52205),ParseObjectLayers:s(22611),ParseTileLayers:s(28200),ParseTilesets:s(24619)}}),33385:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(37277),u=s(44594),l=s(94880),h=s(72905),r=new g({initialize:function(d){this.scene=d,this.systems=d.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],d.sys.events.once(u.BOOT,this.boot,this),d.sys.events.on(u.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var o=this.systems.events;o.on(u.PRE_UPDATE,this.preUpdate,this),o.on(u.UPDATE,this.update,this),o.once(u.SHUTDOWN,this.shutdown,this)},addEvent:function(o){var d;return o instanceof l?(d=o,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat):d=new l(o),this._pendingInsertion.push(d),d},delayedCall:function(o,d,a,f){return this.addEvent({delay:o,callback:d,args:a,callbackScope:f})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(o){Array.isArray(o)||(o=[o]);for(var d=0;d<o.length;d++){var a=o[d];h(this._pendingRemoval,a),h(this._pendingInsertion,a),h(this._active,a)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var o=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(o===0&&d===0)){var a,f;for(a=0;a<o;a++){f=this._pendingRemoval[a];var v=this._active.indexOf(f);v>-1&&this._active.splice(v,1),f.destroy()}for(a=0;a<d;a++)f=this._pendingInsertion[a],this._active.push(f);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(o,d){if(this.now=o,!this.paused){d*=this.timeScale;for(var a=0;a<this._active.length;a++){var f=this._active[a];if(!f.paused&&(f.elapsed+=d*f.timeScale,f.elapsed>=f.delay)){var v=f.elapsed-f.delay;if(f.elapsed=f.delay,!f.hasDispatched&&f.callback&&(f.hasDispatched=!0,f.callback.apply(f.callbackScope,f.args)),f.repeatCount>0){if(f.repeatCount--,v>=f.delay)for(;v>=f.delay&&f.repeatCount>0;)f.callback&&f.callback.apply(f.callbackScope,f.args),v-=f.delay,f.repeatCount--;f.elapsed=v,f.hasDispatched=!1}else f.hasDispatched&&this._pendingRemoval.push(f)}}}},shutdown:function(){var o;for(o=0;o<this._pendingInsertion.length;o++)this._pendingInsertion[o].destroy();for(o=0;o<this._active.length;o++)this._active[o].destroy();for(o=0;o<this._pendingRemoval.length;o++)this._pendingRemoval[o].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(u.PRE_UPDATE,this.preUpdate,this),d.off(u.UPDATE,this.update,this),d.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});y.register("Clock",r,"time"),C.exports=r}),96120:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50792),u=s(39429),l=s(95540),h=s(44594),r=s(89809),o=new g({Extends:y,initialize:function(a,f){y.call(this),this.scene=a,this.systems=a.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var v=this.systems.events;v.on(h.PRE_UPDATE,this.preUpdate,this),v.on(h.UPDATE,this.update,this),v.once(h.SHUTDOWN,this.destroy,this),f&&this.add(f)},preUpdate:function(d,a){this.paused||(this.elapsed+=a*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var d,a=this.events,f=!1,v=this.systems,c;for(d=0;d<a.length;d++){var p=a[d];if(!p.complete&&p.time<=this.elapsed){if(p.complete=!0,this.totalComplete++,c=p.target?p.target:this,p.if&&!p.if.call(c,p))continue;if(p.once&&(f=!0),p.set&&p.target)for(var m in p.set)p.target[m]=p.set[m];this.iteration&&p.repeat++,p.loop&&p.repeat&&p.loop.call(c),p.tween&&(p.tweenInstance=v.tweens.add(p.tween)),p.sound&&(typeof p.sound=="string"?v.sound.play(p.sound):v.sound.play(p.sound.key,p.sound.config)),p.event&&this.emit(p.event,c),p.run&&p.run.call(c),p.stop&&this.stop()}}if(f)for(d=0;d<a.length;d++)a[d].complete&&a[d].once&&(a.splice(d,1),d--);this.totalComplete>=a.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(r.COMPLETE,this)}},play:function(d){return d===void 0&&(d=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,d&&this.reset(),this},pause:function(){this.paused=!0;for(var d=this.events,a=0;a<d.length;a++){var f=d[a];f.tweenInstance&&(f.tweenInstance.paused=!0)}return this},repeat:function(d){return(d===void 0||d===!0)&&(d=-1),d===!1&&(d=0),this.loop=d,this},resume:function(){this.paused=!1;for(var d=this.events,a=0;a<d.length;a++){var f=d[a];f.tweenInstance&&(f.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(d){d===void 0&&(d=!1),this.elapsed=0,d||(this.iteration=0);for(var a=this.events,f=0;f<a.length;f++){var v=a[f];v.complete=!1,d||(v.repeat=0),v.tweenInstance&&v.tweenInstance.stop()}return this.play(!1)},add:function(d){Array.isArray(d)||(d=[d]);var a=this.events,f=0;a.length>0&&(f=a[a.length-1].time);for(var v=0;v<d.length;v++){var c=d[v],p=l(c,"at",0),m=l(c,"in",null);m!==null&&(p=this.elapsed+m);var T=l(c,"from",null);T!==null&&(p=f+T),a.push({complete:!1,time:p,repeat:0,if:l(c,"if",null),run:l(c,"run",null),loop:l(c,"loop",null),event:l(c,"event",null),target:l(c,"target",null),set:l(c,"set",null),tween:l(c,"tween",null),sound:l(c,"sound",null),once:l(c,"once",!1),stop:l(c,"stop",!1)}),f=p}return this.complete=!1,this},clear:function(){for(var d=this.events,a=0;a<d.length;a++){var f=d[a];f.tweenInstance&&f.tweenInstance.stop()}return d=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var d=Math.min(this.totalComplete,this.events.length);return d/this.events.length},destroy:function(){var d=this.systems.events;d.off(h.PRE_UPDATE,this.preUpdate,this),d.off(h.UPDATE,this.update,this),d.off(h.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});u.register("timeline",function(d){return new o(this.scene,d)}),C.exports=o}),94880:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(95540),u=new g({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(l){if(this.delay=y(l,"delay",0),this.repeat=y(l,"repeat",0),this.loop=y(l,"loop",!1),this.callback=y(l,"callback",void 0),this.callbackScope=y(l,"callbackScope",this),this.args=y(l,"args",[]),this.timeScale=y(l,"timeScale",1),this.startAt=y(l,"startAt",0),this.paused=y(l,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var l=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/l}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(l){l===void 0&&(l=!1),this.elapsed=this.delay,this.hasDispatched=!l,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});C.exports=u}),35945:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="complete"}),89809:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={COMPLETE:s(35945)}}),90291:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Clock:s(33385),Events:s(89809),Timeline:s(96120),TimerEvent:s(94880)}}),40382:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(72905),y=s(83419),u=s(43491),l=s(88032),h=s(37277),r=s(44594),o=s(93109),d=s(86081),a=s(8357),f=s(43960),v=s(26012),c=new y({initialize:function(m){this.scene=m,this.events=m.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(r.UPDATE,this.update,this),this.events.once(r.SHUTDOWN,this.shutdown,this)},create:function(p){Array.isArray(p)||(p=[p]);for(var m=[],T=0;T<p.length;T++){var E=p[T];E instanceof d||E instanceof f?m.push(E):Array.isArray(E.tweens)?m.push(v(this,E)):m.push(a(this,E))}return m.length===1?m[0]:m},add:function(p){var m=p,T=this.tweens;return m instanceof d||m instanceof f||(Array.isArray(m.tweens)?m=v(this,m):m=a(this,m)),T.push(m.reset()),m},addMultiple:function(p){for(var m,T=[],E=this.tweens,P=0;P<p.length;P++)m=p[P],m instanceof d||m instanceof f||(Array.isArray(m.tweens)?m=v(this,m):m=a(this,m)),E.push(m.reset()),T.push(m);return T},chain:function(p){var m=v(this,p);return this.tweens.push(m.init()),m},getChainedTweens:function(p){return p.getChainedTweens()},has:function(p){return this.tweens.indexOf(p)>-1},existing:function(p){return this.has(p)||this.tweens.push(p.reset()),this},addCounter:function(p){var m=l(this,p);return this.tweens.push(m.reset()),m},stagger:function(p,m){return o(p,m)},setLagSmooth:function(p,m){return p===void 0&&(p=1/1e-8),m===void 0&&(m=0),this.maxLag=p,this.lagSkip=Math.min(m,this.maxLag),this},setFps:function(p){return p===void 0&&(p=240),this.gap=1e3/p,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(p){var m=Date.now()-this.prevTime;m>this.maxLag&&(this.startTime+=m-this.lagSkip),this.prevTime+=m;var T=this.prevTime-this.startTime,E=T-this.nextTime,P=T-this.time*1e3;return E>0||p?(T/=1e3,this.time=T,this.nextTime+=E+(E>=this.gap?4:this.gap-E)):P=0,P},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(p){p===void 0&&(p=!1);var m=this.getDelta(p);if(!(m<=0)){this.processing=!0;var T,E,P=[],w=this.tweens;for(T=0;T<w.length;T++)E=w[T],E.update(m)&&P.push(E);var A=P.length;if(A&&w.length>0){for(T=0;T<A;T++){E=P[T];var b=w.indexOf(E);b>-1&&(E.isPendingRemove()||E.isDestroyed())&&(w.splice(b,1),E.destroy())}P.length=0}this.processing=!1}},remove:function(p){return this.processing?p.setPendingRemoveState():(g(this.tweens,p),p.setRemovedState()),this},reset:function(p){return this.existing(p),p.seek(),p.setActiveState(),this},makeActive:function(p){return this.existing(p),p.setActiveState(),this},each:function(p,m){var T,E=[null];for(T=1;T<arguments.length;T++)E.push(arguments[T]);return this.tweens.forEach(function(P){E[0]=P,p.apply(m,E)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(p){var m=[],T=this.tweens;Array.isArray(p)?p=u(p):p=[p];for(var E=p.length,P=0;P<T.length;P++)for(var w=T[P],A=0;A<E;A++)!w.isDestroyed()&&w.hasTarget(p[A])&&m.push(w);return m},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(p){return this.timeScale=p,this},isTweening:function(p){for(var m=this.tweens,T,E=0;E<m.length;E++)if(T=m[E],T.isPlaying()&&T.hasTarget(p))return!0;return!1},killAll:function(){for(var p=this.processing?this.getTweens():this.tweens,m=0;m<p.length;m++)p[m].destroy();return this.processing||(p.length=0),this},killTweensOf:function(p){for(var m=this.getTweensOf(p),T=0;T<m.length;T++)m[T].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(r.UPDATE,this.update,this),this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.events=null}});h.register("TweenManager",c,"tweens"),C.exports=c}),57355:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){return s&&s.hasOwnProperty(g)?s[g]:y};C.exports=R}),6113:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(62640),y=s(35355),u=function(l,h){var r=g.Power0;if(typeof l=="string")if(g.hasOwnProperty(l))r=g[l];else{var o="";if(l.indexOf(".")){o=l.substring(l.indexOf(".")+1);var d=o.toLowerCase();d==="in"?o="easeIn":d==="out"?o="easeOut":d==="inout"&&(o="easeInOut")}l=y(l.substring(0,l.indexOf(".")+1)+o),g.hasOwnProperty(l)&&(r=g[l])}else typeof l=="function"&&(r=l);if(!h)return r;var a=h.slice(0);return a.unshift(0),function(f){return a[0]=f,r.apply(this,a)}};C.exports=u}),91389:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(89318),y=s(77259),u=s(28392),l={bezier:g,catmull:y,catmullrom:y,linear:u},h=function(r){if(r===null)return null;var o=l.linear;return typeof r=="string"?l.hasOwnProperty(r)&&(o=l[r]):typeof r=="function"&&(o=r),o};C.exports=h}),55292:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u;if(s.hasOwnProperty(g)){var l=typeof s[g];l==="function"?u=function(h,r,o,d,a,f){return s[g](h,r,o,d,a,f)}:u=function(){return s[g]}}else typeof y=="function"?u=y:u=function(){return y};return u};C.exports=R}),82985:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(81076),y=function(u){var l,h=[];if(u.hasOwnProperty("props"))for(l in u.props)l.substring(0,1)!=="_"&&h.push({key:l,value:u.props[l]});else for(l in u)g.indexOf(l)===-1&&l.substring(0,1)!=="_"&&h.push({key:l,value:u[l]});return h};C.exports=y}),62329:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35154),y=function(u){var l=g(u,"targets",null);return l===null||(typeof l=="function"&&(l=l.call()),Array.isArray(l)||(l=[l])),l};C.exports=y}),17777:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(30976),y=s(99472);function u(d){return!!d.getActive&&typeof d.getActive=="function"}function l(d){return!!d.getStart&&typeof d.getStart=="function"}function h(d){return!!d.getEnd&&typeof d.getEnd=="function"}function r(d){return l(d)||h(d)||u(d)}var o=function(d,a){var f,v=function(J,q,Y){return Y},c=function(J,q,Y){return Y},p=null,m=typeof a;if(m==="number")v=function(){return a};else if(Array.isArray(a))c=function(){return a[0]},v=function(){return a[a.length-1]};else if(m==="string"){var T=a.toLowerCase(),E=T.substring(0,6)==="random",P=T.substring(0,3)==="int";if(E||P){var w=T.indexOf("("),A=T.indexOf(")"),b=T.indexOf(",");if(w&&A&&b){var O=parseFloat(T.substring(w+1,b)),I=parseFloat(T.substring(b+1,A));E?v=function(){return y(O,I)}:v=function(){return g(O,I)}}else throw new Error("invalid random() format")}else{T=T[0];var D=parseFloat(a.substr(2));switch(T){case"+":v=function(J,q,Y){return Y+D};break;case"-":v=function(J,q,Y){return Y-D};break;case"*":v=function(J,q,Y){return Y*D};break;case"/":v=function(J,q,Y){return Y/D};break;default:v=function(){return parseFloat(a)}}}}else if(m==="function")v=a;else if(m==="object")if(r(a))u(a)&&(p=a.getActive),h(a)&&(v=a.getEnd),l(a)&&(c=a.getStart);else if(a.hasOwnProperty("value"))f=o(d,a.value);else{var B=a.hasOwnProperty("to"),k=a.hasOwnProperty("from"),N=a.hasOwnProperty("start");if(B&&(k||N)){if(f=o(d,a.to),N){var H=o(d,a.start);f.getActive=H.getEnd}if(k){var $=o(d,a.from);f.getStart=$.getEnd}}}return f||(f={getActive:p,getEnd:v,getStart:c}),f};C.exports=o}),88032:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70402),y=s(69902),u=s(23568),l=s(57355),h=s(6113),r=s(55292),o=s(35154),d=s(17777),a=s(269),f=s(86081),v=function(c,p,m){if(p instanceof f)return p.parent=c,p;m===void 0?m=y:m=a(y,m);var T=o(p,"from",0),E=o(p,"to",1),P=[{value:T}],w=o(p,"delay",m.delay),A=o(p,"easeParams",m.easeParams),b=o(p,"ease",m.ease),O=d("value",E),I=new f(c,P),D=I.add(0,"value",O.getEnd,O.getStart,O.getActive,h(o(p,"ease",b),o(p,"easeParams",A)),r(p,"delay",w),o(p,"duration",m.duration),l(p,"yoyo",m.yoyo),o(p,"hold",m.hold),o(p,"repeat",m.repeat),o(p,"repeatDelay",m.repeatDelay),!1,!1);D.start=T,D.current=T,I.completeDelay=u(p,"completeDelay",0),I.loop=Math.round(u(p,"loop",0)),I.loopDelay=Math.round(u(p,"loopDelay",0)),I.paused=l(p,"paused",!1),I.persist=l(p,"persist",!1),I.callbackScope=o(p,"callbackScope",I);for(var B=g.TYPES,k=0;k<B.length;k++){var N=B[k],H=o(p,N,!1);if(H){var $=o(p,N+"Params",[]);I.setCallback(N,H,$)}}return I};C.exports=v}),93109:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(6113),y=s(35154),u=s(36383),l=function(h,r){r===void 0&&(r={});var o,d=y(r,"start",0),a=y(r,"ease",null),f=y(r,"grid",null),v=y(r,"from",0),c=v==="first",p=v==="center",m=v==="last",T=typeof v=="number",E=Array.isArray(h),P=parseFloat(E?h[0]:h),w=E?parseFloat(h[1]):0,A=Math.max(P,w);if(E&&(d+=P),f){var b=f[0],O=f[1],I=0,D=0,B=0,k=0,N=[];m?(I=b-1,D=O-1):T?(I=v%b,D=Math.floor(v/b)):p&&(I=(b-1)/2,D=(O-1)/2);for(var H=u.MIN_SAFE_INTEGER,$=0;$<O;$++){N[$]=[];for(var J=0;J<b;J++){B=I-J,k=D-$;var q=Math.sqrt(B*B+k*k);q>H&&(H=q),N[$][J]=q}}}var Y=a?g(a):null;return f?o=function(K,V,U,Z){var et=0,st=Z%b,rt=Math.floor(Z/b);st>=0&&st<b&&rt>=0&&rt<O&&(et=N[rt][st]);var at;if(E){var ut=w-P;Y?at=et/H*ut*Y(et/H):at=et/H*ut}else Y?at=et*P*Y(et/H):at=et*P;return at+d}:o=function(K,V,U,Z,et){et--;var st;c?st=Z:p?st=Math.abs(et/2-Z):m?st=et-Z:T&&(st=Math.abs(v-Z));var rt;if(E){var at;p?at=(w-P)/et*(st*2):at=(w-P)/et*st,Y?rt=at*Y(st/et):rt=at}else Y?rt=et*A*Y(st/et):rt=st*P;return rt+d},o};C.exports=l}),8357:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70402),y=s(69902),u=s(23568),l=s(57355),h=s(6113),r=s(91389),o=s(55292),d=s(82985),a=s(62329),f=s(35154),v=s(17777),c=s(269),p=s(86081),m=function(T,E,P){if(E instanceof p)return E.parent=T,E;P===void 0?P=y:P=c(y,P);var w=a(E);!w&&P.targets&&(w=P.targets);for(var A=d(E),b=f(E,"delay",P.delay),O=f(E,"duration",P.duration),I=f(E,"easeParams",P.easeParams),D=f(E,"ease",P.ease),B=f(E,"hold",P.hold),k=f(E,"repeat",P.repeat),N=f(E,"repeatDelay",P.repeatDelay),H=l(E,"yoyo",P.yoyo),$=l(E,"flipX",P.flipX),J=l(E,"flipY",P.flipY),q=f(E,"interpolation",P.interpolation),Y=function(pt,gt,yt,mt){if(yt==="texture"){var Tt=mt,At=void 0;Array.isArray(mt)?(Tt=mt[0],At=mt[1]):mt.hasOwnProperty("value")?(Tt=mt.value,Array.isArray(mt.value)?(Tt=mt.value[0],At=mt.value[1]):typeof mt.value=="string"&&(Tt=mt.value)):typeof mt=="string"&&(Tt=mt),pt.addFrame(gt,Tt,At,o(mt,"delay",b),f(mt,"duration",O),f(mt,"hold",B),f(mt,"repeat",k),f(mt,"repeatDelay",N),l(mt,"flipX",$),l(mt,"flipY",J))}else{var Rt=v(yt,mt),Lt=r(f(mt,"interpolation",q));pt.add(gt,yt,Rt.getEnd,Rt.getStart,Rt.getActive,h(f(mt,"ease",D),f(mt,"easeParams",I)),o(mt,"delay",b),f(mt,"duration",O),l(mt,"yoyo",H),f(mt,"hold",B),f(mt,"repeat",k),f(mt,"repeatDelay",N),l(mt,"flipX",$),l(mt,"flipY",J),Lt,Lt?mt:null)}},K=new p(T,w),V=0;V<A.length;V++)for(var U=A[V].key,Z=A[V].value,et=0;et<w.length;et++)U==="scale"&&!w[et].hasOwnProperty("scale")?(Y(K,et,"scaleX",Z),Y(K,et,"scaleY",Z)):Y(K,et,U,Z);K.completeDelay=u(E,"completeDelay",0),K.loop=Math.round(u(E,"loop",0)),K.loopDelay=Math.round(u(E,"loopDelay",0)),K.paused=l(E,"paused",!1),K.persist=l(E,"persist",!1),K.callbackScope=f(E,"callbackScope",K);for(var st=g.TYPES,rt=0;rt<st.length;rt++){var at=st[rt],ut=f(E,at,!1);if(ut){var vt=f(E,at+"Params",[]);K.setCallback(at,ut,vt)}}return K};C.exports=m}),26012:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70402),y=s(23568),u=s(57355),l=s(62329),h=s(35154),r=s(8357),o=s(43960),d=function(a,f){if(f instanceof o)return f.parent=a,f;var v=new o(a);v.startDelay=h(f,"delay",0),v.completeDelay=y(f,"completeDelay",0),v.loop=Math.round(y(f,"loop",h(f,"repeat",0))),v.loopDelay=Math.round(y(f,"loopDelay",h(f,"repeatDelay",0))),v.paused=u(f,"paused",!1),v.persist=u(f,"persist",!1),v.callbackScope=h(f,"callbackScope",v);var c,p=g.TYPES;for(c=0;c<p.length;c++){var m=p[c],T=h(f,m,!1);if(T){var E=h(f,m+"Params",[]);v.setCallback(m,T,E)}}var P=h(f,"tweens",null);if(Array.isArray(P)){var w=[],A=l(f),b=void 0;for(A&&(b={targets:A}),c=0;c<P.length;c++)w.push(r(v,P[c],b));v.add(w)}return v};C.exports=d}),30231:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={GetBoolean:s(57355),GetEaseFunction:s(6113),GetInterpolationFunction:s(91389),GetNewValue:s(55292),GetProps:s(82985),GetTargets:s(62329),GetValueOp:s(17777),NumberTweenBuilder:s(88032),StaggerBuilder:s(93109),TweenBuilder:s(8357)}}),73685:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="active"}),98540:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="complete"}),67233:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="loop"}),2859:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="pause"}),98336:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="repeat"}),25764:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="resume"}),32193:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="start"}),84371:(C=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="stop"}),70766:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="update"}),55659:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports="yoyo"}),842:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={TWEEN_ACTIVE:s(73685),TWEEN_COMPLETE:s(98540),TWEEN_LOOP:s(67233),TWEEN_PAUSE:s(2859),TWEEN_RESUME:s(25764),TWEEN_REPEAT:s(98336),TWEEN_START:s(32193),TWEEN_STOP:s(84371),TWEEN_UPDATE:s(70766),TWEEN_YOYO:s(55659)}}),43066:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={States:s(86353),Builders:s(30231),Events:s(842),TweenManager:s(40382),Tween:s(86081),TweenData:s(48177),TweenFrameData:s(42220),BaseTween:s(70402),TweenChain:s(43960)};C.exports=g}),70402:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(50792),u=s(842),l=s(86353),h=new g({Extends:y,initialize:function(o){y.call(this),this.parent=o,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=l.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(u.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(u.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(u.TWEEN_COMPLETE,"onComplete")},complete:function(r){return r===void 0&&(r=0),r?(this.setCompleteDelayState(),this.countdown=r):this.onCompleteHandler(),this},completeAfterLoop:function(r){return r===void 0&&(r=0),this.loopCounter>r&&(this.loopCounter=r),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(u.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(r){this.countdown-=r,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(r){return this.countdown-=r,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(u.TWEEN_START,"onStart"),r=0),r},updateCompleteDelay:function(r){this.countdown-=r,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(r,o,d){return d===void 0&&(d=[]),this.callbacks.hasOwnProperty(r)&&(this.callbacks[r]={func:o,params:d}),this},setPendingState:function(){this.state=l.PENDING},setActiveState:function(){this.state=l.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=l.LOOP_DELAY},setCompleteDelayState:function(){this.state=l.COMPLETE_DELAY},setStartDelayState:function(){this.state=l.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=l.PENDING_REMOVE},setRemovedState:function(){this.state=l.REMOVED},setFinishedState:function(){this.state=l.FINISHED},setDestroyedState:function(){this.state=l.DESTROYED},isPending:function(){return this.state===l.PENDING},isActive:function(){return this.state===l.ACTIVE},isLoopDelayed:function(){return this.state===l.LOOP_DELAY},isCompleteDelayed:function(){return this.state===l.COMPLETE_DELAY},isStartDelayed:function(){return this.state===l.START_DELAY},isPendingRemove:function(){return this.state===l.PENDING_REMOVE},isRemoved:function(){return this.state===l.REMOVED},isFinished:function(){return this.state===l.FINISHED},isDestroyed:function(){return this.state===l.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(r){r.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});h.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],C.exports=h}),95042:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(83419),y=s(842),u=s(86353),l=new g({initialize:function(r,o,d,a,f,v,c,p,m,T){this.tween=r,this.targetIndex=o,this.duration=a,this.totalDuration=0,this.delay=0,this.getDelay=d,this.yoyo=f,this.hold=v,this.repeat=c,this.repeatDelay=p,this.repeatCounter=0,this.flipX=m,this.flipY=T,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(h){h===void 0&&(h=this.current),this.tween.targets[this.targetIndex][this.key]=h},setCreatedState:function(){this.state=u.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=u.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=u.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=u.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=u.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=u.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=u.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=u.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===u.CREATED},isDelayed:function(){return this.state===u.DELAY},isPendingRender:function(){return this.state===u.PENDING_RENDER},isPlayingForward:function(){return this.state===u.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===u.PLAYING_BACKWARD},isHolding:function(){return this.state===u.HOLD_DELAY},isRepeating:function(){return this.state===u.REPEAT_DELAY},isComplete:function(){return this.state===u.COMPLETE},setStateFromEnd:function(h){this.yoyo?this.onRepeat(h,!0,!0):this.repeatCounter>0?this.onRepeat(h,!0,!1):this.setCompleteState()},setStateFromStart:function(h){this.repeatCounter>0?this.onRepeat(h,!1):this.setCompleteState()},reset:function(){var h=this.tween,r=h.totalTargets,o=this.targetIndex,d=h.targets[o],a=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(d,a,0,o,r,h),this.repeatCounter=this.repeat===-1?u.MAX:this.repeat,this.setPendingRenderState();var f=this.duration+this.hold;this.yoyo&&(f+=this.duration);var v=f+this.repeatDelay;this.totalDuration=this.delay+f,this.repeat===-1?(this.totalDuration+=v*u.MAX,h.isInfinite=!0):this.repeat>0&&(this.totalDuration+=v*this.repeat),this.totalDuration>h.duration&&(h.duration=this.totalDuration),this.delay<h.startDelay&&(h.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(h,r,o){var d=this.tween,a=d.totalTargets,f=this.targetIndex,v=d.targets[f],c=this.key,p=c!=="texture";if(this.elapsed=h,this.progress=h/this.duration,this.flipX&&v.toggleFlipX(),this.flipY&&v.toggleFlipY(),p&&(r||o)&&(this.start=this.getStartValue(v,c,this.start,f,a,d)),o){this.setPlayingBackwardState(),this.dispatchEvent(y.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,p&&(this.end=this.getEndValue(v,c,this.start,f,a,d)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-h,p&&(this.current=this.start,v[c]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(y.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});C.exports=l}),69902:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};C.exports=R}),81076:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]}),86081:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(70402),y=s(83419),u=s(842),l=s(44603),h=s(39429),r=s(36383),o=s(86353),d=s(48177),a=s(42220),f=new y({Extends:g,initialize:function(c,p){g.call(this,c),this.targets=p,this.totalTargets=p.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(v,c,p,m,T,E,P,w,A,b,O,I,D,B,k,N){var H=new d(this,v,c,p,m,T,E,P,w,A,b,O,I,D,B,k,N);return this.totalData=this.data.push(H),H},addFrame:function(v,c,p,m,T,E,P,w,A,b){var O=new a(this,v,c,p,m,T,E,P,w,A,b);return this.totalData=this.data.push(O),O},getValue:function(v){v===void 0&&(v=0);var c=null;return this.data&&(c=this.data[v].current),c},hasTarget:function(v){return this.targets&&this.targets.indexOf(v)!==-1},updateTo:function(v,c,p){if(p===void 0&&(p=!1),v!=="texture")for(var m=0;m<this.totalData;m++){var T=this.data[m];T.key===v&&(T.isPlayingForward()||T.isPlayingBackward())&&(T.end=c,p&&(T.start=T.current))}return this},restart:function(){switch(this.state){case o.REMOVED:case o.FINISHED:this.seek(),this.parent.makeActive(this);break;case o.PENDING:case o.PENDING_REMOVE:this.parent.reset(this);break;case o.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,g.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(v,c,p){if(v===void 0&&(v=0),c===void 0&&(c=16.6),p===void 0&&(p=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;p||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive");var m=this.paused;if(this.paused=!1,v>0){for(var T=Math.floor(v/c),E=v-T*c,P=0;P<T;P++)this.update(c);E>0&&this.update(E)}return this.paused=m,this.isSeeking=!1,this},initTweenData:function(v){v===void 0&&(v=!1),this.duration=0,this.startDelay=r.MAX_SAFE_INTEGER;for(var c=this.data,p=0;p<this.totalData;p++)c[p].reset(v);this.duration=Math.max(this.duration,.01);var m=this.duration,T=this.completeDelay,E=this.loopCounter,P=this.loopDelay;E>0?this.totalDuration=m+T+(m+P)*E:this.totalDuration=m+T},reset:function(v){return v===void 0&&(v=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=o.MAX),v||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")),this},update:function(v){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(v*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(v),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(v),!1;this.hasStarted||(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(u.TWEEN_START,"onStart"),v=0));var c=!1;if(this.isActive())for(var p=this.data,m=0;m<this.totalData;m++)p[m].update(v)&&(c=!0);this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),c||this.nextState();var T=this.isPendingRemove();return T&&this.persist&&(this.setFinishedState(),T=!1),T},forward:function(v){return this.update(v),this},rewind:function(v){return this.update(-v),this},dispatchEvent:function(v,c){if(!this.isSeeking){this.emit(v,this,this.targets);var p=this.callbacks[c];p&&p.func.apply(this.callbackScope,[this,this.targets].concat(p.params))}},destroy:function(){g.prototype.destroy.call(this),this.targets=null}});h.register("tween",function(v){return this.scene.sys.tweens.add(v)}),l.register("tween",function(v){return this.scene.sys.tweens.create(v)}),C.exports=f}),43960:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(72905),y=s(70402),u=s(83419),l=s(842),h=s(44603),r=s(39429),o=s(86353),d=new u({Extends:y,initialize:function(f){y.call(this,f),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?o.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(a){var f=this.parent.create(a);Array.isArray(f)||(f=[f]);for(var v=this.data,c=0;c<f.length;c++){var p=f[c];p.parent=this,v.push(p.reset())}return this.totalData=v.length,this},remove:function(a){return g(this.data,a),a.setRemovedState(),a===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(a){for(var f=this.data,v=0;v<this.totalData;v++)if(f[v].hasTarget(a))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(a){return a.seek(),a.setActiveState(),this},makeActive:function(a){return a.reset(),a.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(l.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var a=this.data,f=this.totalData,v=0;v<f;v++)a[v].reset(!1);this.setCurrentTween(0)},update:function(a){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;a*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(a):this.isCompleteDelayed()?this.updateCompleteDelay(a):this.isStartDelayed()&&(a=this.updateStartCountdown(a));var f=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(a)&&this.nextTween()&&this.nextState(),f=this.isPendingRemove(),f&&this.persist&&(this.setFinishedState(),f=!1)),f},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(a){this.currentIndex=a,this.currentTween=this.data[a],this.currentTween.setActiveState()},dispatchEvent:function(a,f){this.emit(a,this);var v=this.callbacks[f];v&&v.func.apply(this.callbackScope,[this].concat(v.params))},destroy:function(){y.prototype.destroy.call(this),this.currentTween=null}});r.register("tweenchain",function(a){return this.scene.sys.tweens.chain(a)}),h.register("tweenchain",function(a){return this.scene.sys.tweens.create(a)}),C.exports=d}),48177:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95042),y=s(45319),u=s(83419),l=s(842),h=new u({Extends:g,initialize:function(o,d,a,f,v,c,p,m,T,E,P,w,A,b,O,I,D){g.call(this,o,d,m,T,E,P,w,A,b,O),this.key=a,this.getActiveValue=c,this.getEndValue=f,this.getStartValue=v,this.ease=p,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=I,this.interpolationData=D},reset:function(r){g.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex],d=this.key;r&&(o[d]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(o[d]=this.getActiveValue(o,d,0))},update:function(r){var o=this.tween,d=o.totalTargets,a=this.targetIndex,f=o.targets[a],v=this.key;if(!f)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(f,v,f[v],a,d,o),this.end=this.getEndValue(f,v,this.start,a,d,o),this.current=this.start,f[v]=this.start,this.setPlayingForwardState(),!0;var c=this.isPlayingForward(),p=this.isPlayingBackward();if(c||p){var m=this.elapsed,T=this.duration,E=0,P=!1;m+=r,m>=T?(E=m-T,m=T,P=!0):m<0&&(m=0);var w=y(m/T,0,1);this.elapsed=m,this.progress=w,this.previous=this.current,c||(w=1-w);var A=this.ease(w);this.interpolation?this.current=this.interpolation(this.interpolationData,A):this.current=this.start+(this.end-this.start)*A,f[v]=this.current,P&&(c?this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(E):this.setStateFromStart(E)),this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,o){var d=this.tween;if(!d.isSeeking){var a=d.targets[this.targetIndex],f=this.key,v=this.current,c=this.previous;d.emit(r,d,f,a,v,c);var p=d.callbacks[o];p&&p.func.apply(d.callbackScope,[d,a,f,v,c].concat(p.params))}},destroy:function(){g.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});C.exports=h}),42220:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(95042),y=s(45319),u=s(83419),l=s(842),h=new u({Extends:g,initialize:function(o,d,a,f,v,c,p,m,T,E,P){g.call(this,o,d,v,c,!1,p,m,T,E,P),this.key="texture",this.startTexture=null,this.endTexture=a,this.startFrame=null,this.endFrame=f,this.yoyo=m!==0},reset:function(r){g.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=o.texture.key,this.startFrame=o.frame.name),r&&o.setTexture(this.startTexture,this.startFrame)},update:function(r){var o=this.tween,d=this.targetIndex,a=o.targets[d];if(!a)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&a.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var f=this.isPlayingForward(),v=this.isPlayingBackward();if(f||v){var c=this.elapsed,p=this.duration,m=0,T=!1;c+=r,c>=p?(m=c-p,c=p,T=!0):c<0&&(c=0);var E=y(c/p,0,1);this.elapsed=c,this.progress=E,T&&(f?(a.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(m)):(a.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(m))),this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,o){var d=this.tween;if(!d.isSeeking){var a=d.targets[this.targetIndex],f=this.key;d.emit(r,d,f,a);var v=d.callbacks[o];v&&v.func.apply(d.callbackScope,[d,a,f].concat(v.params))}},destroy:function(){g.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});C.exports=h}),86353:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};C.exports=R}),83419:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function R(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}function s(h,r,o){var d=o?h[r]:Object.getOwnPropertyDescriptor(h,r);return!o&&d.value&&typeof d.value=="object"&&(d=d.value),d&&R(d)?(typeof d.enumerable>"u"&&(d.enumerable=!0),typeof d.configurable>"u"&&(d.configurable=!0),d):!1}function g(h,r){var o=Object.getOwnPropertyDescriptor(h,r);return o?(o.value&&typeof o.value=="object"&&(o=o.value),o.configurable===!1):!1}function y(h,r,o,d){for(var a in r)if(r.hasOwnProperty(a)){var f=s(r,a,o);if(f!==!1){var v=d||h;if(g(v.prototype,a)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(h.prototype,a,f)}else h.prototype[a]=r[a]}}function u(h,r){if(r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)y(h,r[o].prototype||r[o])}}function l(h){h||(h={});var r,o;if(h.initialize){if(typeof h.initialize!="function")throw new Error("initialize must be a function");r=h.initialize,delete h.initialize}else if(h.Extends){var d=h.Extends;r=function(){d.apply(this,arguments)}}else r=function(){};h.Extends?(r.prototype=Object.create(h.Extends.prototype),r.prototype.constructor=r,o=h.Extends,delete h.Extends):r.prototype.constructor=r;var a=null;return h.Mixins&&(a=h.Mixins,delete h.Mixins),u(r,a),y(r,h,!0,o),r}l.extend=y,l.mixin=u,l.ignoreFinals=!1,C.exports=l}),29747:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(){};C.exports=R}),20242:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(){return null};C.exports=R}),71146:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l){if(l===void 0&&(l=s),y>0){var h=y-s.length;if(h<=0)return null}if(!Array.isArray(g))return s.indexOf(g)===-1?(s.push(g),u&&u.call(l,g),g):null;for(var r=g.length-1;r>=0;)s.indexOf(g[r])!==-1&&g.splice(r,1),r--;if(r=g.length,r===0)return null;y>0&&r>h&&(g.splice(h),r=h);for(var o=0;o<r;o++){var d=g[o];s.push(d),u&&u.call(l,d)}return g};C.exports=R}),51067:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u,l,h){if(y===void 0&&(y=0),h===void 0&&(h=s),u>0){var r=u-s.length;if(r<=0)return null}if(!Array.isArray(g))return s.indexOf(g)===-1?(s.splice(y,0,g),l&&l.call(h,g),g):null;for(var o=g.length-1;o>=0;)s.indexOf(g[o])!==-1&&g.pop(),o--;if(o=g.length,o===0)return null;u>0&&o>r&&(g.splice(r),o=r);for(var d=o-1;d>=0;d--){var a=g[d];s.splice(y,0,a),l&&l.call(h,a)}return g};C.exports=R}),66905:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.indexOf(g);return y!==-1&&y<s.length&&(s.splice(y,1),s.push(g)),g};C.exports=R}),21612:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(82011),y=function(u,l,h,r,o){r===void 0&&(r=0),o===void 0&&(o=u.length);var d=0;if(g(u,r,o))for(var a=r;a<o;a++){var f=u[a];f[l]===h&&d++}return d};C.exports=y}),95428:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u,l=[null];for(u=3;u<arguments.length;u++)l.push(arguments[u]);for(u=0;u<s.length;u++)l[0]=s[u],g.apply(y,l);return s};C.exports=R}),36914:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(82011),y=function(u,l,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=u.length),g(u,r,o)){var d,a=[null];for(d=5;d<arguments.length;d++)a.push(arguments[d]);for(d=r;d<o;d++)a[0]=u[d],l.apply(h,a)}return u};C.exports=y}),81957:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(g.length){if(g.length===1)return g[0]}else return NaN;var u=1,l,h;if(y){if(s<g[0][y])return g[0];for(;g[u][y]<s;)u++}else for(;g[u]<s;)u++;return u>g.length&&(u=g.length),y?(l=g[u-1][y],h=g[u][y],h-s<=s-l?g[u]:g[u-1]):(l=g[u-1],h=g[u],h-s<=s-l?h:l)};C.exports=R}),43491:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=[]);for(var y=0;y<s.length;y++)Array.isArray(s[y])?R(s[y],g):g.push(s[y]);return g};C.exports=R}),46710:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(82011),y=function(u,l,h,r,o){r===void 0&&(r=0),o===void 0&&(o=u.length);var d=[];if(g(u,r,o))for(var a=r;a<o;a++){var f=u[a];(!l||l&&h===void 0&&f.hasOwnProperty(l)||l&&h!==void 0&&f[l]===h)&&d.push(f)}return d};C.exports=y}),58731:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(82011),y=function(u,l,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=u.length),g(u,r,o))for(var d=r;d<o;d++){var a=u[d];if(!l||l&&h===void 0&&a.hasOwnProperty(l)||l&&h!==void 0&&a[l]===h)return a}return null};C.exports=y}),26546:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){g===void 0&&(g=0),y===void 0&&(y=s.length);var u=g+Math.floor(Math.random()*y);return s[u]===void 0?null:s[u]};C.exports=R}),85835:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(g===y)return s;var u=s.indexOf(g),l=s.indexOf(y);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return u>l||(s.splice(u,1),l=s.indexOf(y),s.splice(l+1,0,g)),s};C.exports=R}),83371:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(g===y)return s;var u=s.indexOf(g),l=s.indexOf(y);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return u<l||(s.splice(u,1),l===0?s.unshift(g):s.splice(l,0,g)),s};C.exports=R}),70864:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.indexOf(g);if(y>0){var u=s[y-1],l=s.indexOf(u);s[y]=u,s[l]=g}return s};C.exports=R}),69693:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=s.indexOf(g);if(u===-1||y<0||y>=s.length)throw new Error("Supplied index out of bounds");return u!==y&&(s.splice(u,1),s.splice(y,0,g)),g};C.exports=R}),40853:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.indexOf(g);if(y!==-1&&y<s.length-1){var u=s[y+1],l=s.indexOf(u);s[y]=u,s[l]=g}return s};C.exports=R}),20283:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=[],h,r=!1;if((y||u)&&(r=!0,y||(y=""),u||(u="")),g<s)for(h=s;h>=g;h--)r?l.push(y+h.toString()+u):l.push(h);else for(h=s;h<=g;h++)r?l.push(y+h.toString()+u):l.push(h);return l};C.exports=R}),593:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(2284),y=function(u,l,h){u===void 0&&(u=0),l===void 0&&(l=null),h===void 0&&(h=1),l===null&&(l=u,u=0);for(var r=[],o=Math.max(g((l-u)/(h||1)),0),d=0;d<o;d++)r.push(u),u+=h;return r};C.exports=y}),43886:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function R(y,u,l){var h=y[u];y[u]=y[l],y[l]=h}function s(y,u){return y<u?-1:y>u?1:0}var g=function(y,u,l,h,r){for(l===void 0&&(l=0),h===void 0&&(h=y.length-1),r===void 0&&(r=s);h>l;){if(h-l>600){var o=h-l+1,d=u-l+1,a=Math.log(o),f=.5*Math.exp(2*a/3),v=.5*Math.sqrt(a*f*(o-f)/o)*(d-o/2<0?-1:1),c=Math.max(l,Math.floor(u-d*f/o+v)),p=Math.min(h,Math.floor(u+(o-d)*f/o+v));g(y,u,c,p,r)}var m=y[u],T=l,E=h;for(R(y,l,u),r(y[h],m)>0&&R(y,l,h);T<E;){for(R(y,T,E),T++,E--;r(y[T],m)<0;)T++;for(;r(y[E],m)>0;)E--}r(y[l],m)===0?R(y,l,E):(E++,R(y,E,h)),E<=u&&(l=E+1),u<=E&&(h=E-1)}};C.exports=g}),88492:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35154),y=s(33680),u=function(h,r,o){for(var d=[],a=0;a<h.length;a++)for(var f=0;f<r.length;f++)for(var v=0;v<o;v++)d.push({a:h[a],b:r[f]});return d},l=function(h,r,o){var d=g(o,"max",0),a=g(o,"qty",1),f=g(o,"random",!1),v=g(o,"randomB",!1),c=g(o,"repeat",0),p=g(o,"yoyo",!1),m=[];if(v&&y(r),c===-1)if(d===0)c=0;else{var T=h.length*r.length*a;p&&(T*=2),c=Math.ceil(d/T)}for(var E=0;E<=c;E++){var P=u(h,r,a);f&&y(P),m=m.concat(P),p&&(P.reverse(),m=m.concat(P))}return d&&m.splice(d),m};C.exports=l}),72905:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(19133),y=function(u,l,h,r){r===void 0&&(r=u);var o;if(!Array.isArray(l))return o=u.indexOf(l),o!==-1?(g(u,o),h&&h.call(r,l),l):null;for(var d=l.length-1,a=[];d>=0;){var f=l[d];o=u.indexOf(f),o!==-1&&(g(u,o),a.push(f),h&&h.call(r,f)),d--}return a};C.exports=y}),60248:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(19133),y=function(u,l,h,r){if(r===void 0&&(r=u),l<0||l>u.length-1)throw new Error("Index out of bounds");var o=g(u,l);return h&&h.call(r,o),o};C.exports=y}),81409:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(82011),y=function(u,l,h,r,o){if(l===void 0&&(l=0),h===void 0&&(h=u.length),o===void 0&&(o=u),g(u,l,h)){var d=h-l,a=u.splice(l,d);if(r)for(var f=0;f<a.length;f++){var v=a[f];r.call(o,v)}return a}else return[]};C.exports=y}),31856:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(19133),y=function(u,l,h){l===void 0&&(l=0),h===void 0&&(h=u.length);var r=l+Math.floor(Math.random()*h);return g(u,r)};C.exports=y}),42169:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=s.indexOf(g),l=s.indexOf(y);return u!==-1&&l===-1?(s[u]=y,!0):!1};C.exports=R}),86003:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=1);for(var y=null,u=0;u<g;u++)y=s.shift(),s.push(y);return y};C.exports=R}),49498:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){g===void 0&&(g=1);for(var y=null,u=0;u<g;u++)y=s.pop(),s.unshift(y);return y};C.exports=R}),82011:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){var l=s.length;if(g<0||g>l||g>=y||y>l){if(u)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};C.exports=R}),89545:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){var y=s.indexOf(g);return y!==-1&&y>0&&(s.splice(y,1),s.unshift(g)),g};C.exports=R}),17810:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(82011),y=function(u,l,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=u.length),g(u,r,o))for(var d=r;d<o;d++){var a=u[d];a.hasOwnProperty(l)&&(a[l]=h)}return u};C.exports=y}),33680:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){for(var g=s.length-1;g>0;g--){var y=Math.floor(Math.random()*(g+1)),u=s[g];s[g]=s[y],s[y]=u}return s};C.exports=R}),90126:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g=/\D/g;return s.sort(function(y,u){return parseInt(y.replace(g,""),10)-parseInt(u.replace(g,""),10)}),s};C.exports=R}),19133:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){if(!(g>=s.length)){for(var y=s.length-1,u=s[g],l=g;l<y;l++)s[l]=s[l+1];return s.length=y,u}};C.exports=R}),19186:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(82264);function y(r,o){return String(r).localeCompare(o)}function u(r,o){var d=r.length;if(d<=1)return r;for(var a=new Array(d),f=1;f<d;f*=2){l(r,o,f,a);var v=r;r=a,a=v}return r}function l(r,o,d,a){var f=r.length,v=0,c=d*2,p,m,T,E,P;for(p=0;p<f;p+=c)for(m=p+d,T=m+d,m>f&&(m=f),T>f&&(T=f),E=p,P=m;;)if(E<m&&P<T)o(r[E],r[P])<=0?a[v++]=r[E++]:a[v++]=r[P++];else if(E<m)a[v++]=r[E++];else if(P<T)a[v++]=r[P++];else break}var h=function(r,o){if(o===void 0&&(o=y),!r||r.length<2)return r;if(g.features.stableSort)return r.sort(o);var d=u(r,o);return d!==r&&l(d,null,r.length,r),r};C.exports=h}),25630:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(g===y)return s;var u=s.indexOf(g),l=s.indexOf(y);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return s[u]=y,s[l]=g,s};C.exports=R}),37105:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Matrix:s(54915),Add:s(71146),AddAt:s(51067),BringToTop:s(66905),CountAllMatching:s(21612),Each:s(95428),EachInRange:s(36914),FindClosestInSorted:s(81957),Flatten:s(43491),GetAll:s(46710),GetFirst:s(58731),GetRandom:s(26546),MoveDown:s(70864),MoveTo:s(69693),MoveUp:s(40853),MoveAbove:s(85835),MoveBelow:s(83371),NumberArray:s(20283),NumberArrayStep:s(593),QuickSelect:s(43886),Range:s(88492),Remove:s(72905),RemoveAt:s(60248),RemoveBetween:s(81409),RemoveRandomElement:s(31856),Replace:s(42169),RotateLeft:s(86003),RotateRight:s(49498),SafeRange:s(82011),SendToBack:s(89545),SetAll:s(17810),Shuffle:s(33680),SortByDigits:s(90126),SpliceOne:s(19133),StableSort:s(19186),Swap:s(25630)}}),86922:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){if(!Array.isArray(s)||!Array.isArray(s[0]))return!1;for(var g=s[0].length,y=1;y<s.length;y++)if(s[y].length!==g)return!1;return!0};C.exports=R}),63362:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(41836),y=s(86922),u=function(l){var h="";if(!y(l))return h;for(var r=0;r<l.length;r++){for(var o=0;o<l[r].length;o++){var d=l[r][o].toString();d!=="undefined"?h+=g(d,2):h+="?",o<l[r].length-1&&(h+=" |")}if(r<l.length-1){h+=`
`;for(var a=0;a<l[r].length;a++)h+="---",a<l[r].length-1&&(h+="+");h+=`
`}}return h};C.exports=u}),92598:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.reverse()};C.exports=R}),21224:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){for(var g=0;g<s.length;g++)s[g].reverse();return s};C.exports=R}),98717:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37829),y=function(u){return g(u,180)};C.exports=y}),44657:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37829),y=function(u,l){l===void 0&&(l=1);for(var h=0;h<l;h++)u=g(u,90);return u};C.exports=y}),37829:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(86922),y=s(2429),u=function(l,h){if(h===void 0&&(h=90),!g(l))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")l=y(l),l.reverse();else if(h===-90||h===270||h==="rotateRight")l.reverse(),l=y(l);else if(Math.abs(h)===180||h==="rotate180"){for(var r=0;r<l.length;r++)l[r].reverse();l.reverse()}return l};C.exports=u}),92632:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(37829),y=function(u,l){l===void 0&&(l=1);for(var h=0;h<l;h++)u=g(u,-90);return u};C.exports=y}),69512:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(86003),y=s(49498),u=function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),r!==0&&(r<0?g(l,Math.abs(r)):y(l,r)),h!==0)for(var o=0;o<l.length;o++){var d=l[o];h<0?g(d,Math.abs(h)):y(d,h)}return l};C.exports=u}),2429:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){for(var g=s.length,y=s[0].length,u=new Array(y),l=0;l<y;l++){u[l]=new Array(g);for(var h=g-1;h>-1;h--)u[l][h]=s[h][l]}return u};C.exports=R}),54915:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={CheckMatrix:s(86922),MatrixToString:s(63362),ReverseColumns:s(92598),ReverseRows:s(21224),Rotate180:s(98717),RotateLeft:s(44657),RotateMatrix:s(37829),RotateRight:s(92632),Translate:s(69512),TransposeMatrix:s(2429)}}),71334:(C=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(g,y){for(var u=new Uint8Array(g),l=u.length,h=y?"data:"+y+";base64,":"",r=0;r<l;r+=3)h+=R[u[r]>>2],h+=R[(u[r]&3)<<4|u[r+1]>>4],h+=R[(u[r+1]&15)<<2|u[r+2]>>6],h+=R[u[r+2]&63];return l%3===2?h=h.substring(0,h.length-1)+"=":l%3===1&&(h=h.substring(0,h.length-2)+"=="),h};C.exports=s}),53134:(C=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),g=0;g<R.length;g++)s[R.charCodeAt(g)]=g;var y=function(u){u=u.substr(u.indexOf(",")+1);var l=u.length,h=l*.75,r=0,o,d,a,f;u[l-1]==="="&&(h--,u[l-2]==="="&&h--);for(var v=new ArrayBuffer(h),c=new Uint8Array(v),p=0;p<l;p+=4)o=s[u.charCodeAt(p)],d=s[u.charCodeAt(p+1)],a=s[u.charCodeAt(p+2)],f=s[u.charCodeAt(p+3)],c[r++]=o<<2|d>>4,c[r++]=(d&15)<<4|a>>2,c[r++]=(a&3)<<6|f&63;return v};C.exports=y}),65839:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={ArrayBufferToBase64:s(71334),Base64ToArrayBuffer:s(53134)}}),91799:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Array:s(37105),Base64:s(65839),Objects:s(1183),String:s(31749),NOOP:s(29747),NULL:s(20242)}}),41786:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g={};for(var y in s)Array.isArray(s[y])?g[y]=s[y].slice(0):g[y]=s[y];return g};C.exports=R}),62644:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){var g,y,u;if(typeof s!="object"||s===null)return s;g=Array.isArray(s)?[]:{};for(u in s)y=s[u],g[u]=R(y);return g};C.exports=R}),79291:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(41212),y=function(){var u,l,h,r,o,d,a=arguments[0]||{},f=1,v=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),v===f&&(a=this,--f);f<v;f++)if((u=arguments[f])!=null)for(l in u)h=a[l],r=u[l],a!==r&&(c&&r&&(g(r)||(o=Array.isArray(r)))?(o?(o=!1,d=h&&Array.isArray(h)?h:[]):d=h&&g(h)?h:{},a[l]=y(c,d,r)):r!==void 0&&(a[l]=r));return a};C.exports=y}),23568:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(75508),y=s(35154),u=function(l,h,r){var o=y(l,h,null);if(o===null)return r;if(Array.isArray(o))return g.RND.pick(o);if(typeof o=="object"){if(o.hasOwnProperty("randInt"))return g.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return g.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if(typeof o=="function")return o(h);return o};C.exports=u}),95540:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){var u=typeof s;return!s||u==="number"||u==="string"?y:s.hasOwnProperty(g)&&s[g]!==void 0?s[g]:y};C.exports=R}),82840:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(35154),y=s(45319),u=function(l,h,r,o,d){d===void 0&&(d=r);var a=g(l,h,d);return y(a,r,o)};C.exports=u}),35154:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){if(!s&&!u||typeof s=="number")return y;if(s&&s.hasOwnProperty(g))return s[g];if(u&&u.hasOwnProperty(g))return u[g];if(g.indexOf(".")!==-1){for(var l=g.split("."),h=s,r=u,o=y,d=y,a=!0,f=!0,v=0;v<l.length;v++)h&&h.hasOwnProperty(l[v])?(o=h[l[v]],h=h[l[v]]):a=!1,r&&r.hasOwnProperty(l[v])?(d=r[l[v]],r=r[l[v]]):f=!1;return a?o:f?d:y}else return y};C.exports=R}),69036:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){for(var y=0;y<g.length;y++)if(!s.hasOwnProperty(g[y]))return!1;return!0};C.exports=R}),1985:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){for(var y=0;y<g.length;y++)if(s.hasOwnProperty(g[y]))return!0;return!1};C.exports=R}),97022:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.hasOwnProperty(g)};C.exports=R}),41212:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){if(!s||typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};C.exports=R}),46975:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(41786),y=function(u,l){var h=g(u);for(var r in l)h.hasOwnProperty(r)||(h[r]=l[r]);return h};C.exports=y}),269:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(41786),y=function(u,l){var h=g(u);for(var r in l)h.hasOwnProperty(r)&&(h[r]=l[r]);return h};C.exports=y}),18254:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=s(97022),y=function(u,l){for(var h={},r=0;r<l.length;r++){var o=l[r];g(u,o)&&(h[o]=u[o])}return h};C.exports=y}),61622:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(g))return s[g]=y,!0;if(g.indexOf(".")!==-1){for(var u=g.split("."),l=s,h=s,r=0;r<u.length;r++)if(l.hasOwnProperty(u[r]))h=l,l=l[u[r]];else return!1;return h[u[u.length-1]]=y,!0}return!1};C.exports=R}),1183:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Clone:s(41786),DeepCopy:s(62644),Extend:s(79291),GetAdvancedValue:s(23568),GetFastValue:s(95540),GetMinMaxValue:s(82840),GetValue:s(35154),HasAll:s(69036),HasAny:s(1985),HasValue:s(97022),IsPlainObject:s(41212),Merge:s(46975),MergeRight:s(269),Pick:s(18254),SetValue:s(61622)}}),27902:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return s.replace(/%([0-9]+)/g,function(y,u){return g[Number(u)-1]})};C.exports=R}),41836:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g,y,u){g===void 0&&(g=0),y===void 0&&(y=" "),u===void 0&&(u=3),s=s.toString();var l=0;if(g+1>=s.length)switch(u){case 1:s=new Array(g+1-s.length).join(y)+s;break;case 3:var h=Math.ceil((l=g-s.length)/2),r=l-h;s=new Array(r+1).join(y)+s+new Array(h+1).join(y);break;default:s=s+new Array(g+1-s.length).join(y);break}return s};C.exports=R}),33628:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s,g){return g===0?s.slice(1):s.slice(0,g)+s.slice(g+1)};C.exports=R}),27671:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s.split("").reverse().join("")};C.exports=R}),45650:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var g=Math.random()*16|0,y=s==="x"?g:g&3|8;return y.toString(16)})};C.exports=R}),35355:(C=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R=function(s){return s&&s[0].toUpperCase()+s.slice(1)};C.exports=R}),31749:((C,R,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */C.exports={Format:s(27902),Pad:s(41836),RemoveAt:s(33628),Reverse:s(27671),UppercaseFirst:s(35355),UUID:s(45650)}})},j={};function it(C){var R=j[C];if(R!==void 0)return R.exports;var s=j[C]={exports:{}};return W[C](s,s.exports,it),s.exports}it.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var ht=it(85454);return ht})())})(rd)),rd.exports}var ZW=KW();const Kt=V1(ZW);var nd={exports:{}},JW=nd.exports,R1;function QW(){return R1||(R1=1,(function(Bt,z){(function(W,j){Bt.exports=j()})(JW,(function(){class W{constructor(t){this.scene=t,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null}static register(t,i){W.prototype[t]=i}}var j=function(e){return e===void 0&&(e=it),this.getFrameNameCallback=e,this},it=function(e,t,i){return i==="__BASE"?`${e},${t}`:`${i}:${e},${t}`};function ht(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>ht(i));if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Object.getPrototypeOf(e)!==Object.prototype)return e;const t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=ht(e[i]));return t}var C=function(e,t,i,n){Array.isArray(t)&&(n=i,i=t,t=void 0),t==null&&(t="__BASE"),typeof i=="number"&&arguments.length>=6?(i=[arguments[2],void 0,arguments[3]],n=[arguments[4],void 0,arguments[5]]):i===void 0&&n===void 0&&this.columns.data!==void 0&&this.rows.data!==void 0?(i=this.columns.data,n=this.rows.data):(i=ht(i),n=ht(n)),this.textureKey=e,this.baseFrameName=t,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=n,this.rows.count=n?n.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var x=this.scene.sys.textures.get(e);if(!x)return this.clear(),this;if(!i||!n)return this.clear(),this;for(var S=x.get(t),M=S.width,L=0,F=0,G=i.length;F<G;F++)i[F]===void 0?L++:typeof i[F]=="number"?M-=i[F]:M-=i[F].width;for(var X=L>0?M/L:0,Q=S.height,tt=0,F=0,G=n.length;F<G;F++)n[F]===void 0?tt++:typeof n[F]=="number"?Q-=n[F]:Q-=n[F].width;for(var _=tt?Q/tt:0,nt,lt,ot,dt,ct,ft=0,xt=0,St=0,Pt=n.length;St<Pt;St++){n[St]===void 0&&(n[St]=_),typeof n[St]=="number"&&(n[St]={height:n[St],stretch:St%2}),nt=n[St],ot=nt.height,this.rows.stretch+=nt.stretch|0,this.rows.minHeight+=nt.stretch>0?0:ot,ft=0;for(var F=0,wt=i.length;F<wt;F++){if(i[F]===void 0&&(i[F]=X),typeof i[F]=="number"&&(i[F]={width:i[F],stretch:F%2}),lt=i[F],dt=lt.width,St===0&&(this.columns.stretch+=lt.stretch|0,this.columns.minWidth+=lt.stretch>0?0:dt),dt>=1&&ot>=1){ct=this.getFrameNameCallback(F,St,t);var bt=typeof ct;(bt==="string"||bt==="number")&&x.add(ct,0,ft+S.cutX,xt+S.cutY,dt,ot)}ft+=dt}xt+=ot}return this.updateTexture(),this},R=function(){if(this.clear(),this.textureKey===void 0)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,i=this.rows.minHeight*this.maxFixedPartScaleY,n=this.width-t,x=this.height-i,S=n>=0?this.maxFixedPartScaleX:this.width/t,M=x>=0?this.maxFixedPartScaleY:this.height/i;if(this.preserveRatio){var L=Math.min(S,M);if(S>L){var F=(S-L)*t;n>=0?n+=F:n=F,S=L}if(M>L){var G=(M-L)*i;x>=0?x+=G:x=G,M=L}}this.columns.scale=S,this.rows.scale=M;var X;n>0?X=this.columns.stretch>0?n/this.columns.stretch:0:X=0;var Q;x>0?Q=this.rows.stretch>0?x/this.rows.stretch:0:Q=0;var tt,_,nt,lt,ot,dt=0,ct=0,ft;this._beginDraw();for(var xt=0,St=this.rows.count;xt<St;xt++){nt=this.rows.data[xt],ot=nt.stretch===0?nt.height*M:Q*nt.stretch,dt=0;for(var Pt=0,wt=this.columns.count;Pt<wt;Pt++)_=this.columns.data[Pt],lt=_.stretch===0?_.width*S:X*_.stretch,tt=this.getFrameNameCallback(Pt,xt,this.baseFrameName),e.has(tt)&&lt>0&&ot>0&&(nt.stretch===0&&_.stretch===0||this.getStretchMode(Pt,xt)===0?ft=0:ft=1,ft===0?this._drawImage(this.textureKey,tt,dt,ct,lt,ot):this._drawTileSprite(this.textureKey,tt,dt,ct,lt,ot)),dt+=lt;ct+=ot}this._endDraw()};const s=Phaser.Utils.Objects.IsPlainObject,g=Phaser.Utils.Objects.GetValue;var y=function(e){return s(e)?(this.stretchMode.edge=u(g(e,"edge",0)),this.stretchMode.internal=u(g(e,"internal",0))):(e=u(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},u=function(e){return typeof e=="string"&&(e=l[e]),e};const l={scale:0,repeat:1};var h=function(e,t){return e===0||e===this.columns.count-1||t===0||t===this.rows.count-1},r=function(e,t){return h.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},o=function(e){return e==null&&(e=!0),this.preserveRatio=e,this},d=function(e,t){return t===void 0&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this},a=function(){},f={_beginDraw:a,_drawImage:a,_drawTileSprite:a,_endDraw:a,setGetFrameNameCallback:j,setBaseTexture:C,updateTexture:R,setStretchMode:y,getStretchMode:r,setPreserveRatio:o,setMaxFixedPartScale:d};const v=Phaser.Utils.Objects.IsPlainObject,c=Phaser.Utils.Objects.GetValue;var p=function(e,t){class i extends e{constructor(x,S,M,L,F,G,X,Q,tt,_){if(v(S)?(_=S,S=c(_,"x",0),M=c(_,"y",0),L=c(_,"width",1),F=c(_,"height",1),G=c(_,"key",void 0),X=c(_,"baseFrame",void 0),Q=c(_,"columns",void 0),tt=c(_,"rows",void 0)):v(L)?(_=L,L=c(_,"width",1),F=c(_,"height",1),G=c(_,"key",void 0),X=c(_,"baseFrame",void 0),Q=c(_,"columns",void 0),tt=c(_,"rows",void 0)):v(G)?(_=G,G=c(_,"key",void 0),X=c(_,"baseFrame",void 0),Q=c(_,"columns",void 0),tt=c(_,"rows",void 0)):v(X)?(_=X,X=c(_,"baseFrame",void 0),Q=c(_,"columns",void 0),tt=c(_,"rows",void 0)):Array.isArray(X)?(_=tt,tt=Q,Q=X,X=c(_,"baseFrame",void 0)):v(Q)&&(_=Q,Q=c(_,"columns",void 0),tt=c(_,"rows",void 0)),X===void 0&&(X=c(_,"frame",void 0)),Q===void 0){var nt=c(_,"leftWidth",void 0),lt=c(_,"rightWidth",void 0);nt!==void 0&&lt!==void 0&&(Q=[nt,void 0,lt])}if(tt===void 0){var ot=c(_,"topHeight",void 0),dt=c(_,"bottomHeight",void 0);ot!==void 0&&dt!==void 0&&(tt=[ot,void 0,dt])}super(x),this.type=t,this.setPosition(S,M).setSize(L,F).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(c(_,"getFrameNameCallback",void 0)),this.setStretchMode(c(_,"stretchMode",0)),this.setPreserveRatio(c(_,"preserveRatio",!0));var ct=c(_,"maxFixedPartScale",1),ft=c(_,"maxFixedPartScaleX",ct),xt=c(_,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(ft,xt),this.setBaseTexture(G,X,Q,tt)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(x,S){return this.width===x&&this.height===S?this:(super.resize?super.resize(x,S):super.setSize(x,S),this.updateTexture(),this)}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}}return Object.assign(i.prototype,f),i};const m=Phaser.Game;var T=function(e){return e instanceof m};const E=Phaser.Scene;var P=function(e){return e instanceof E},w=function(e){if(e==null||typeof e!="object")return null;if(T(e))return e;if(T(e.game))return e.game;if(P(e))return e.sys.game;if(P(e.scene))return e.scene.sys.game};const A=Phaser.GameObjects;var b=void 0,O=function(e,t){if(b||(b={},w(e).events.once("destroy",function(){for(var n in b)b[n].destroy();b=void 0})),!b.hasOwnProperty(t)){var i=w(e).scene.systemScene,e=new A[t](i);e.setOrigin(0),b[t]=e}return b[t]},I=function(e,t,i,n,x,S){var M=O(this,"Image").setTexture(e,t).setDisplaySize(x,S);this.draw(M,i,n)},D=function(e,t,i,n,x,S){var M=O(this,"TileSprite").setTexture(e,t).setSize(x,S);this.draw(M,i,n)};const B=Phaser.GameObjects.RenderTexture;let k=class extends p(B,"rexNinePatch"){};var N={_drawImage:I,_drawTileSprite:D};Object.assign(k.prototype,N);var H=function(e){return e==null||e===""||e.length===0},$=function(e,t,i){var n=e;if(!H(t)){typeof t=="string"&&(t=t.split("."));for(var x,S=0,M=t.length;S<M;S++){if(x=t[S],n[x]==null||typeof n[x]!="object"){var L;S===M-1?L={}:L={},n[x]=L}n=n[x]}}return n},J=function(e,t,i,n){if(n===void 0&&(n="."),typeof e=="object"){if(H(t)){if(i==null)return;typeof i=="object"&&(e=i)}else{typeof t=="string"&&(t=t.split(n));var x=t.pop(),S=$(e,t);S[x]=i}return e}};W.register("ninePatch",function(e,t,i,n,x,S,M,L){var F=new k(this.scene,e,t,i,n,x,S,M,L);return this.scene.add.existing(F),F}),J(window,"RexPlugins.UI.NinePatch",k);const q=Phaser.GameObjects.GetCalcMatrix;var Y=function(e,t,i,n){var x=t.getRenderList();if(x.length!==0){i.addToRenderList(t);var S=e.pipelines.set(t.pipeline),M=t.frame.glTexture,L=S.setGameObject(t),F=i.roundPixels,G=q(t,i,n),X=S.calcMatrix.copyFrom(G.calc),Q=t._displayOriginX,tt=t._displayOriginY,_=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var nt=0,lt=x.length;nt<lt;nt++)x[nt].webglRender(S,X,_,Q,tt,M,L,F);e.pipelines.postBatch(t)}};const K=Phaser.Renderer.Canvas.SetTransform;var V=function(e,t,i,n){var x=e.currentContext,S=t.getRenderList();if(!(S.length===0||!K(e,x,t,i,n))){i.addToRenderList(t);var M=i.roundPixels,L=-t._displayOriginX,F=-t._displayOriginY;x.translate(L,F);for(var G=0,X=S.length;G<X;G++)S[G].canvasRender(x,L,F,M);x.restore()}},U={renderWebGL:Y,renderCanvas:V},Z=function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},et=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this},st=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this};const rt=Phaser.Utils.Array.Remove;var at=function(e){return this.poolManager&&this.poolManager.free(e),rt(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},ut=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},vt=function(){return this.lastAppendedChildren},pt=function(){return this.children.list},gt={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},yt={setTexture:Z,resize:et,setSize:et,addChild:st,removeChild:at,removeChildren:ut,clear:ut,getLastAppendedChildren:vt,getChildren:pt};Object.assign(yt,gt);class mt{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const Tt=Phaser.Utils.Objects.GetValue;var At={};let Rt=class{constructor(t){this.pools=Tt(t,"pools",At)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new mt),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,n=t.length;i<n;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}};const Lt=60;var Ct=!1,Et=function(e){if(!Ct){e===void 0&&(e=Lt);var t=Phaser.VERSION.split("."),i=parseInt(t[0]);if(i===3){var n=parseInt(t[1]);n<e&&console.error(`Minimum supported version : ${i}.${n}`)}else console.error(`Can't supported version : ${i}`);Ct=!0}};Et();const Mt=Phaser.GameObjects.GameObject,zt=Phaser.Utils.Objects.IsPlainObject,Zt=Phaser.Utils.Objects.GetValue,oe=Phaser.Structs.List,Qt=Phaser.Utils.Array.StableSort;class jt extends Mt{constructor(t,i,n,x,S,M){zt(i)&&(M=i,i=Zt(M,"x",0),n=Zt(M,"y",0),x=Zt(M,"texture"),S=Zt(M,"frame")),i===void 0&&(i=0),n===void 0&&(n=0),super(t,"rexBlitter"),this.children=new oe,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var L=Zt(M,"reuseBob",!0);this.poolManager=L?new Rt(M):void 0,this.setTexture(x,S),this.setPosition(i,n),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,i=this.children.list,n=0,x=i.length;n<x;n++){var S=i[n];fe(S)&&(this.renderList.push(S),t||(t=S.depth!==0))}t&&Qt(this.renderList,Le),this.displayListDirty=!1}return this.renderList}}var fe=function(e){return e.active&&e.visible&&e.alpha>0},Le=function(e,t){return e._depth-t._depth};const $t=Phaser.GameObjects.Components;Phaser.Class.mixin(jt,[$t.Alpha,$t.BlendMode,$t.ComputedSize,$t.Depth,$t.GetBounds,$t.Mask,$t.Origin,$t.Pipeline,$t.PostPipeline,$t.ScrollFactor,$t.Transform,$t.Visible,U,yt]);const he="image";var Gt=function(e,t,i){if(!e||typeof e=="number")return i;if(typeof t=="string"){if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1)t=t.split(".");else return i}for(var n=t,x=e,S=i,M=0;M<n.length;M++)if(t=n[M],x.hasOwnProperty(t))S=x[t],x=S;else{S=i;break}return S},ve=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e},Li={enableData(){return this.data===void 0&&(this.data={}),this},setData(e,t){if(this.enableData(),arguments.length===1){var i=e;for(e in i)this.data[e]=i[e]}else this.data[e]=t;return this},getData(e,t){return this.enableData(),e===void 0?this.data:Gt(this.data,e,t)},incData(e,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)+t),this},mulData(e,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)*t),this},clearData(){return this.data&&ve(this.data),this}};let hs=class{constructor(t,i){this.type=i,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(hs.prototype,Li);const Ls=Phaser.Math.DegToRad,bs=Phaser.Math.RadToDeg,li=Phaser.Utils.Objects.GetValue;let W1=class extends hs{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setRotation(t){return this.rotation=t,this}get angle(){return bs(this.rotation)}set angle(t){this.rotation=Ls(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,i){return i===void 0&&(i=!1),this.displayWidth=t,i&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,i){return i===void 0&&(i=!1),this.displayHeight=t,i&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,i){return i===void 0&&(i=t),this.setOriginX(t).setOriginY(i),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=li(t,"width",void 0),n=li(t,"height",void 0),x=li(t,"scale",void 0),S=li(t,"scaleX",x),M=li(t,"scaleY",x);i!==void 0?n===void 0&&M===void 0?this.setWidth(i,!0):this.setWidth(i):S!==void 0?this.setScaleX(S):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),n!==void 0?i===void 0&&S===void 0?this.setHeight(n,!0):this.setHeight(n):M!==void 0?this.setScaleY(M):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var L=li(t,"origin",void 0);return L!==void 0?this.setOrigin(L):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,i,n,x,S,M,L,F){}canvasRender(t,i,n,x){}};const Y1=Phaser.GameObjects.Components.TransformMatrix,H1=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var Ph=new Y1,$1=function(e,t,i,n,x,S,M,L){var F=this.frame;if(F){var G=this._width,X=this._height,Q=G*this.originX,tt=X*this.originY,_=this.x-n,nt=this.y-x,lt,ot,dt,ct,ft,xt,St,Pt;if(this.isCropped){var wt=this._crop;(wt.flipX!==this.flipX||wt.flipY!==this.flipY)&&F.updateCropUVs(wt,this.flipX,this.flipY),lt=wt.u0,ot=wt.v0,dt=wt.u1,ct=wt.v1,St=wt.width,Pt=wt.height,ft=wt.x,xt=wt.y}else lt=this.frame.u0,ot=this.frame.v0,dt=this.frame.u1,ct=this.frame.v1,St=G,Pt=X,ft=0,xt=0;var bt=1,kt=1;this.flipX&&(_+=G-Q*2,bt=-1),this.flipY&&(nt+=X-tt*2,kt=-1),Ph.applyITRS(_,nt,this.rotation,this.scaleX*bt,this.scaleY*kt),t.multiply(Ph,Ph);var Dt=-Q+ft,Vt=-tt+xt,Ht=Dt+St,se=Vt+Pt,Ot=Ph.setQuad(Dt,Vt,Ht,se,L),ue=H1(this.tint,this.alpha*i);e.batchQuad(this.parent,Ot[0],Ot[1],Ot[2],Ot[3],Ot[4],Ot[5],Ot[6],Ot[7],lt,ot,dt,ct,ue,ue,ue,ue,this.tintFill,S,M)}},K1=function(e,t,i,n){var x=this.frame;if(x){e.save();var S=this._width,M=this._height,L=S*this.originX,F=M*this.originY,G=this.x-L,X=this.y-F,Q,tt,_,nt;if(this.isCropped){var lt=this._crop;(lt.flipX!==this.flipX||lt.flipY!==this.flipY)&&x.updateCropUVs(lt,this.flipX,this.flipY),_=lt.cw,nt=lt.ch,Q=lt.cx,tt=lt.cy}else _=x.cutWidth,nt=x.cutHeight,Q=x.cutX,tt=x.cutY;var ot=1,dt=1;this.flipX&&(G+=S,ot=-1),this.flipY&&(X+=M,dt=-1);var ct=x.source.resolution,ft=_/ct,xt=nt/ct;n&&(G=Math.floor(G+.5),X=Math.floor(X+.5),ft+=.5,xt+=.5),e.translate(G,X),e.rotate(this.rotation),e.scale(this.scaleX*ot,this.scaleY*dt),e.drawImage(x.source.image,Q,tt,_,nt,0,0,ft,xt),e.restore()}};const Z1=Phaser.Utils.Objects.IsPlainObject;let qp=class extends W1{constructor(t,i){super(t,he),this._crop=J1(),this.setFrame(i)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!Z1(t)&&(t=this.parent.texture.get(t)),this.frame=t,t?(this._width=t.realWidth,this._height=t.realHeight):(this._width=0,this._height=0),this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}setCrop(t,i,n,x){return t===void 0?(this.isCropped=!1,this):this.frame?t===0&&i===0&&n===this._width&&x===this._height?(this.isCropped=!1,this):(this.frame.setCropUVs(this._crop,t,i,n,x,this.flipX,this.flipY),this.isCropped=!0,this):this}reset(){return super.reset(),this.resetFlip().resetTint().setFrame().setCrop(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}};var J1=function(e){return e===void 0&&(e={}),e.u0=0,e.v0=0,e.u1=0,e.v1=0,e.x=0,e.y=0,e.width=0,e.height=0,e.flipX=!1,e.flipY=!1,e.cx=0,e.cy=0,e.cw=0,e.ch=0,e},Q1={webglRender:$1,canvasRender:K1};Object.assign(qp.prototype,Q1);var _p=function(e,t){typeof t=="string"&&(t={frame:t});var i=e.poolManager?e.poolManager.allocate(he):null;return i===null?i=new qp(e):i.setParent(e).setActive(),i.modifyPorperties(t),e.addChild(i),i},j1=function(e,t,i,n,x,S){_p(this,{frame:t,x:i,y:n,width:x,height:S})},q1=function(e,t,i,n,x,S){var M=this.texture.get(t),L=M.width,F=M.height,G=x%L,X=S%F;G===0&&(G=L),X===0&&(X=F);for(var Q=Math.ceil(x/L),tt=Math.ceil(S/F),_=Q-1,nt=tt-1,lt=0;lt<Q;lt++)for(var ot=0;ot<tt;ot++){let ft=_p(this,{frame:t,x:i+lt*L,y:n+ot*F});var dt=lt===_?G:L,ct=ot===nt?X:F;(dt!==L||ct!==F)&&ft.setCrop(0,0,dt,ct)}},_1={_drawImage:j1,_drawTileSprite:q1};class Wd extends p(jt,"rexNinePatch2"){setBaseTexture(t,i,n,x){return this.setTexture(t,i),super.setBaseTexture(t,i,n,x),this}}Object.assign(Wd.prototype,_1),W.register("ninePatch2",function(e,t,i,n,x,S,M,L){var F=new Wd(this.scene,e,t,i,n,x,S,M,L);return this.scene.add.existing(F),F}),J(window,"RexPlugins.UI.NinePatch2",Wd);var t2=Phaser.Renderer.WebGL.Utils,tg=function(e,t,i,n,x,S){for(var M=t2.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),L=i.pathData,F=i.pathIndexes,G=0;G<F.length;G+=3){var X=F[G]*2,Q=F[G+1]*2,tt=F[G+2]*2,_=L[X+0]-x,nt=L[X+1]-S,lt=L[Q+0]-x,ot=L[Q+1]-S,dt=L[tt+0]-x,ct=L[tt+1]-S,ft=t.getX(_,nt),xt=t.getY(_,nt),St=t.getX(lt,ot),Pt=t.getY(lt,ot),wt=t.getX(dt,ct),bt=t.getY(dt,ct);e.batchTri(i,ft,xt,St,Pt,wt,bt,0,0,1,1,M,M,M,2)}},e2=Phaser.Renderer.WebGL.Utils,Mh=function(e,t,i,n,x){var S=e.strokeTint,M=e2.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);S.TL=M,S.TR=M,S.BL=M,S.BR=M;var L=t.pathData,F=L.length-1,G=t.lineWidth,X=G/2,Q=L[0]-n,tt=L[1]-x;t.closePath||(F-=2);for(var _=2;_<F;_+=2){var nt=L[_]-n,lt=L[_+1]-x;e.batchLine(Q,tt,nt,lt,X,X,G,_-2,t.closePath?_===F-1:!1),Q=nt,tt=lt}};const i2=Phaser.GameObjects.GetCalcMatrix;var s2=function(e,t,i,n){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var x=e.pipelines.set(t.pipeline),S=i2(t,i,n),M=x.calcMatrix.copyFrom(S.calc),L=t._displayOriginX,F=t._displayOriginY,G=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&tg(x,M,t,G,L,F),t.isStroked&&Mh(x,t,G,L,F),e.pipelines.postBatch(t)},ja=function(e,t,i,n){var x=t.fillColor,S=t.fillAlpha,M=(x&16711680)>>>16,L=(x&65280)>>>8,F=x&255;e.fillStyle="rgba("+M+","+L+","+F+","+S+")"},qa=function(e,t,i,n){var x=t.strokeColor,S=t.strokeAlpha,M=(x&16711680)>>>16,L=(x&65280)>>>8,F=x&255;e.strokeStyle="rgba("+M+","+L+","+F+","+S+")",e.lineWidth=t.lineWidth};const r2=Phaser.Renderer.Canvas.SetTransform;var n2=function(e,t,i,n){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var x=e.currentContext;if(r2(e,x,t,i,n)){var S=t._displayOriginX,M=t._displayOriginY,L=t.pathData,F=L.length-1,G=L[0]-S,X=L[1]-M;x.beginPath(),x.moveTo(G,X),t.closePath||(F-=2);for(var Q=2;Q<F;Q+=2){var tt=L[Q]-S,_=L[Q+1]-M;x.lineTo(tt,_)}x.closePath(),t.isFilled&&(ja(x,t),x.fill()),t.isStroked&&(qa(x,t),x.stroke()),x.restore()}},a2={renderWebGL:s2,renderCanvas:n2};const o2=Phaser.GameObjects.Shape;class Yd extends o2{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,i){return i===void 0&&(i=1),this.fillColor=t,this.fillAlpha=i,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,i,n){return n===void 0&&(n=1),this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=n,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,i){var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=t,n.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}}Object.assign(Yd.prototype,a2);const fr=Phaser.Utils.Objects.GetValue;let Hd=class{constructor(t,i,n,x,S){t===void 0&&(t=0),i===void 0&&(i=t),n===void 0&&(n=0),x===void 0&&(x=0),S===void 0&&(S=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,n,x,S)}setTo(t,i,n,x,S){return this.setPosition(t,i),this.setRadius(S),this.setSize(n,x),this}setPosition(t,i){return this.x=t,this.y=i,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,n;typeof t=="number"?(i=t,n=t):(i=fr(t,"x",0),n=fr(t,"y",0));var x=this.cornerRadius;x.tl=wh(fr(t,"tl",void 0),i,n),x.tr=wh(fr(t,"tr",void 0),i,n),x.bl=wh(fr(t,"bl",void 0),i,n),x.br=wh(fr(t,"br",void 0),i,n)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Ah(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Ah(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Ah(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Ah(this.cornerRadius.br,t)}};var wh=function(e,t,i){return e===void 0?e={x:t,y:i}:typeof e=="number"&&(e={x:e,y:e}),eg(e),e},Ah=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=fr(t,"x",0),e.y=fr(t,"y",0)),eg(e)},eg=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)},me=function(e){return e.x>0&&e.y>0},Ue=function(e,t,i){var n=i.length;if(n>=2){var x=i[n-2],S=i[n-1];if(e===x&&t===S)return i}return i.push(e,t),i};const ig=Phaser.Math.DegToRad;var Ve=function(e,t,i,n,x,S,M,L,F){M&&S>x?S-=360:!M&&S<x&&(S+=360);var G=S-x,X=ig(G)/L;x=ig(x);for(var Q=0;Q<=L;Q++){var tt=x+X*Q,_=e+i*Math.cos(tt),nt=t+n*Math.sin(tt);Ue(_,nt,F)}return F};const h2=Phaser.Utils.Objects.IsPlainObject,sg=Phaser.Utils.Objects.GetValue,l2=Phaser.Geom.Polygon.Earcut;let hn=class extends Yd{constructor(t,i,n,x,S,M,L,F){var G,X,Q,tt;if(h2(i)){var _=i;i=_.x,n=_.y,x=_.width,S=_.height,M=_.radius,L=_.color,F=_.alpha,G=_.strokeColor,X=_.strokeAlpha,Q=_.strokeWidth,tt=_.shape}i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=1),S===void 0&&(S=x),M===void 0&&(M=0),tt===void 0&&(tt=0);var nt=new Hd;if(super(t,"rexRoundRectangleShape",nt),this.setShapeType(tt),this.shapeType===0){var lt=sg(M,"radius",M);nt.setTo(0,0,x,S,lt)}else{var lt={x:x/2,y:S/2};nt.setTo(0,0,x,S,lt)}this.setIteration(sg(M,"iteration",void 0)),this.setPosition(i,n),this.setFillStyle(L,F),Q===void 0&&(Q=2),this.setStrokeStyle(Q,G,X),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var n=t.width,x=t.height,S=t.cornerRadius,M,L=this.iteration+1;if(M=S.tl,me(M))if(M.convex){var F=M.x,G=M.y;Ve(F,G,M.x,M.y,180,270,!1,L,i)}else{var F=0,G=0;Ve(F,G,M.x,M.y,90,0,!0,L,i)}else Ue(0,0,i);if(M=S.tr,me(M))if(M.convex){var F=n-M.x,G=M.y;Ve(F,G,M.x,M.y,270,360,!1,L,i)}else{var F=n,G=0;Ve(F,G,M.x,M.y,180,90,!0,L,i)}else Ue(n,0,i);if(M=S.br,me(M))if(M.convex){var F=n-M.x,G=x-M.y;Ve(F,G,M.x,M.y,0,90,!1,L,i)}else{var F=n,G=x;Ve(F,G,M.x,M.y,270,180,!0,L,i)}else Ue(n,x,i);if(M=S.bl,me(M))if(M.convex){var F=M.x,G=x-M.y;Ve(F,G,M.x,M.y,90,180,!1,L,i)}else{var F=0,G=x;Ve(F,G,M.x,M.y,360,270,!0,L,i)}else Ue(0,x,i);return i.push(i[0],i[1]),this.pathIndexes=l2(i),this}setShapeType(t){return typeof t=="string"&&(t=u2[t]),this.shapeType=t,this}setSize(t,i){return i===void 0&&(i=t),this.geom.width===t&&this.geom.height===i?this:(this.geom.setSize(t,i),this.shapeType===1&&this.setRadius({x:t/2,y:i/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(t,i),this)}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}};const u2={rectangle:0,circle:1};W.register("roundRectangle",function(e,t,i,n,x,S,M){var L=new hn(this.scene,e,t,i,n,x,S,M);return this.scene.add.existing(L),L}),J(window,"RexPlugins.UI.RoundRectangle",hn);const d2=Phaser.Renderer.WebGL.Utils;var f2=function(e,t,i,n){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){i.addToRenderList(t);var x=t.frame,S=x.width,M=x.height,L=d2.getTintAppendFloatAlpha,F=e.pipelines.set(t.pipeline,t),G=F.setTexture2D(x.glTexture,t);e.pipelines.preBatch(t),F.batchTexture(t,x.glTexture,S,M,t.x,t.y,S/t.resolution,M/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,S,M,L(t.tintTopLeft,i.alpha*t._alphaTL),L(t.tintTopRight,i.alpha*t._alphaTR),L(t.tintBottomLeft,i.alpha*t._alphaBL),L(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,n,!1,G),e.pipelines.postBatch(t)}},c2=function(e,t,i,n){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,n))},v2={renderWebGL:f2,renderCanvas:c2};const p2=Phaser.Display.Color;var g2={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,t,i,n,x,S,M,L,F,G){var X=this.scene.sys.textures.getFrame(e,t);if(!X)return this;var Q=X.cutWidth,tt=X.cutHeight;i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=Q),S===void 0&&(S=tt),M===void 0&&(M=0),L===void 0&&(L=0),F===void 0&&(F=Q),G===void 0&&(G=tt);var _=X.cutX+M,nt=X.cutY+L;return this.context.drawImage(X.source.image,_,nt,F,G,i,n,x,S),this.dirty=!0,this},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,i){i===void 0&&(i=new p2);var n=this.context.getImageData(e,t,1,1);return i.setTo(n.data[0],n.data[1],n.data[2],n.data[3]),i},setPixel(e,t,i,n,x,S){if(typeof i!="number"){var M=i;i=M.red,n=M.green,x=M.blue,S=M.alpha}S===void 0&&(S=i!==0||n!==0||x!==0?255:0);var L=this.context.createImageData(1,1);return L.data[0]=i,L.data[1]=n,L.data[2]=x,L.data[3]=S,this.context.putImageData(L,e,t),this.dirty=!0,this}},rg=function(e,t,i,n,x,S,M){var L=e.sys.textures,F=e.renderer;n===void 0&&(n=0),x===void 0&&(x=0),S===void 0&&(S=t.width),M===void 0&&(M=t.height);var G;L.exists(i)?G=L.get(i):G=L.createCanvas(i,S,M);var X=G.getSourceImage();X.width!==S&&(X.width=S),X.height!==M&&(X.height=M);var Q=X.getContext("2d",{willReadFrequently:!0});Q.clearRect(0,0,S,M),Q.drawImage(t,n,x,S,M),F.gl&&G&&F.canvasToTexture(X,G.source[0].glTexture,!0,0)},m2={updateTexture(e,t){if(e){var i=this.resolution;i!==1&&(this.context.save(),this.context.scale(i,i)),t?e.call(t,this.canvas,this.context):e(this.canvas,this.context),i!==1&&this.context.restore()}(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=this.width,n.hitArea.height=this.height),this},generateTexture(e,t,i,n,x){var S=this.canvas;return n===void 0?n=S.width:n*=this.resolution,x===void 0?x=S.height:x*=this.resolution,rg(this.scene,S,e,t,i,n,x),this},loadTexture(e,t){var i=this.scene.sys.textures.getFrame(e,t);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.setSize(i.cutWidth,i.cutHeight):this.clear(),this.drawFrame(e,t),this.dirty=!0,this):this}};Et();const ng=Phaser.Display.Canvas.CanvasPool,x2=Phaser.GameObjects.GameObject,y2=Phaser.Utils.String.UUID;let cr=class extends x2{constructor(t,i,n,x,S,M){i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=1),S===void 0&&(S=1),M===void 0&&(M=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this._width=x,this._height=S,this.resolution=M,x=Math.max(Math.ceil(x*this.resolution),1),S=Math.max(Math.ceil(S*this.resolution),1),this.canvas=ng.create(this,x,S),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(i,n),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=y2(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){ng.remove(this.canvas),this.canvas=null,this.context=null;var t=this.texture;t&&t.destroy()}setResolution(t){if(this.resolution===t)return this;this.resolution=t;var i=Math.max(Math.ceil(this.width*t),1),n=Math.max(Math.ceil(this.height*t),1);return this.canvas.width=i,this.canvas.height=n,this.frame.source.resolution=t,this.dirty=!0,this}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,i){return this._width===t&&this._height===i?this:(this._width=t,this._height=i,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),i=Math.max(Math.ceil(i*this.resolution),1),this.canvas.width=t,this.canvas.height=i,this.frame.setSize(t,i),this.dirty=!0,this)}setSize(t,i){return this.setCanvasSize(t,i),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,i){return this.setSize(t,i),this}};const ui=Phaser.GameObjects.Components;Phaser.Class.mixin(cr,[ui.Alpha,ui.BlendMode,ui.Crop,ui.Depth,ui.Flip,ui.GetBounds,ui.Mask,ui.Origin,ui.Pipeline,ui.PostPipeline,ui.ScrollFactor,ui.Tint,ui.Transform,ui.Visible,v2,g2,m2]);const C2=Phaser.Utils.String.Pad;var Yt=function(e,t,i){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${C2(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,i);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}};const ag=Phaser.Math.DegToRad;var og=function(e,t,i,n,x,S,M){var L=new Hd(t,i,n,x,S),F=L.minWidth,G=L.minHeight,X=n>=F?1:n/F,Q=x>=G?1:x/G,tt=L.cornerRadius,_,nt,lt,ot,dt,ct,ft;e.save(),e.beginPath(),e.translate(t,i),_=tt.tl,Lh(_)?(nt=_.x*X,lt=_.y*Q,Rh(_)?(ot=nt,dt=lt,vr(e,ot,dt,nt,lt,180,270,!1,M)):(ot=0,dt=0,vr(e,ot,dt,nt,lt,90,0,!0,M)),ct=0,ft=lt):(e.lineTo(0,0),ct=0,ft=0),_=tt.tr,Lh(_)?(nt=_.x*X,lt=_.y*Q,Rh(_)?(ot=n-nt,dt=lt,vr(e,ot,dt,nt,lt,270,360,!1,M)):(ot=n,dt=0,vr(e,ot,dt,nt,lt,180,90,!0,M))):e.lineTo(n,0),_=tt.br,Lh(_)?(nt=_.x*X,lt=_.y*Q,Rh(_)?(ot=n-nt,dt=x-lt,vr(e,ot,dt,nt,lt,0,90,!1,M)):(ot=n,dt=x,vr(e,ot,dt,nt,lt,270,180,!0,M))):e.lineTo(n,x),_=tt.bl,Lh(_)?(nt=_.x*X,lt=_.y*Q,Rh(_)?(ot=nt,dt=x-lt,vr(e,ot,dt,nt,lt,90,180,!1,M)):(ot=0,dt=x,vr(e,ot,dt,nt,lt,360,270,!0,M))):e.lineTo(0,x),e.lineTo(ct,ft),e.closePath(),e.restore()},Rh=function(e){return!e.hasOwnProperty("convex")||e.convex},Lh=function(e){return e.x>0&&e.y>0},vr=function(e,t,i,n,x,S,M,L,F){if(L&&M>S?M-=360:!L&&M<S&&(M+=360),S=ag(S),M=ag(M),F==null)e.ellipse(t,i,n,x,0,S,M,L);else{F+=1;for(var G,X,Q,tt=(M-S)/F,_=0;_<=F;_++)Q=S+tt*_,G=t+n*Math.cos(Q),X=i+x*Math.sin(Q),e.lineTo(G,X)}},S2=function(e,t,i,n,x,S,M,L,F,G,X,Q,tt){if(og(t,i,n,x,S,M,tt),L!=null){if(X!=null){var _;Q?_=t.createLinearGradient(0,0,x,0):_=t.createLinearGradient(0,0,0,S),_.addColorStop(0,L),_.addColorStop(1,X),L=_}t.fillStyle=L,t.fill()}F!=null&&G>0&&(t.strokeStyle=F,t.lineWidth=G,t.stroke())},$d=function(e,t,i,n,x,S,M,L){if(!(t==null&&i==null)){var F=e.canvas.width,G=e.canvas.height;i==null&&(n=0);var X=n/2;F=Math.max(1,F-n),G=Math.max(1,G-n),S2(e.canvas,e.context,X,X,F,G,x,t,i,n,S,M,L)}},T2=function(){$d(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const hg=Phaser.Utils.Objects.GetValue;let lg=class extends cr{constructor(t,i,n,x,S,M,L,F,G,X,Q,tt){i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=1),S===void 0&&(S=x),M===void 0&&(M=0),tt===void 0&&(tt=1),super(t,i,n,x,S,tt),this.type="rexRoundRectangleCanvas";var _=hg(M,"radius",M),nt=hg(M,"iteration",void 0);this.setRadius(_),this.setIteration(nt),this.setFillStyle(L,X,Q),this.setStrokeStyle(F,G)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=Yt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=Yt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,i,n){return n===void 0&&(n=!0),this.fillStyle=t,this.fillColor2=i,this.isHorizontalGradient=n,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=Yt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,i){return this.strokeStyle=t,this.lineWidth=i,this}updateTexture(){return super.updateTexture(function(){this.clear(),T2.call(this)},this),this}};W.register("roundRectangleCanvas",function(e,t,i,n,x,S,M,L,F,G){var X=new lg(this.scene,e,t,i,n,x,S,M,L,F,G);return this.scene.add.existing(X),X}),J(window,"RexPlugins.UI.RoundRectangleCanvas",lg);var re=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},pr=function(e,t,i){!t||re(e,`${t}X`)||(Object.defineProperty(e,`${t}X`,{get:function(){return i.x},set:function(n){i.x=n,e.dirty=!0}}),Object.defineProperty(e,`${t}Y`,{get:function(){return i.y},set:function(n){i.y=n,e.dirty=!0}}),Object.defineProperty(e,`${t}T`,{get:function(){return i.t},set:function(n){i.t=n,e.dirty=!0}}))},E2={setTLPosition(e,t){return this.geom.setTLPosition(e,t),this.dirty=!0,this},setTRPosition(e,t){return this.geom.setTRPosition(e,t),this.dirty=!0,this},setBLPosition(e,t){return this.geom.setBLPosition(e,t),this.dirty=!0,this},setBRPosition(e,t){return this.geom.setBRPosition(e,t),this.dirty=!0,this},resetCornerPosition(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint(e,t,i,n){var x=this.geom.topSidePoints;if(Array.isArray(e))for(var x=e,S,M=0,L=x.length;M<L;M++)S=x[M],this.geom.insertTopSidePoint(S.t,S.x,S.y),pr(this,S.key,x[x.length-1]);else this.geom.insertTopSidePoint(e,t,i),pr(this,n,x[x.length-1]);return this.dirty=!0,this},insertRightSidePoint(e,t,i,n){var x=this.geom.rightSidePoints;if(Array.isArray(e))for(var x=e,S,M=0,L=x.length;M<L;M++)S=x[M],this.geom.insertRightSidePoint(S.t,S.x,S.y),pr(this,S.key,x[x.length-1]);else this.geom.insertRightSidePoint(e,t,i),pr(this,n,x[x.length-1]);return this.dirty=!0,this},insertBottomSidePoint(e,t,i,n){var x=this.geom.bottomSidePoints;if(Array.isArray(e))for(var x=e,S,M=0,L=x.length;M<L;M++)S=x[M],this.geom.insertBottomSidePoint(S.t,S.x,S.y),pr(this,S.key,x[x.length-1]);else this.geom.insertBottomSidePoint(e,t,i),pr(this,n,x[x.length-1]);return this.dirty=!0,this},insertLeftSidePoint(e,t,i,n){var x=this.geom.leftSidePoints;if(Array.isArray(e))for(var x=e,S,M=0,L=x.length;M<L;M++)S=x[M],this.geom.insertLeftSidePoint(S.t,S.x,S.y),pr(this,S.key,x[x.length-1]);else this.geom.insertLeftSidePoint(e,t,i),pr(this,n,x[x.length-1]);return this.dirty=!0,this},clearTopSidePoints(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}};class P2{constructor(t,i,n,x){t===void 0&&(t=0),i===void 0&&(i=t),n===void 0&&(n=0),x===void 0&&(x=0),this.setTo(t,i,n,x),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[]}setTo(t,i,n,x){return this.setPosition(t,i),this.setSize(n,x),this}setPosition(t,i){return this.x=t,this.y=i,this}setSize(t,i){return this.width=t,this.height=i,this}setTLPosition(t,i){return this.tlx=t,this.tly=i,this}setTRPosition(t,i){return this.trx=t,this.try=i,this}setBLPosition(t,i){return this.blx=t,this.bly=i,this}setBRPosition(t,i){return this.brx=t,this.bry=i,this}resetCornerPosition(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}insertTopSidePoint(t,i,n){return bh(this.topSidePoints,t,i,n),this}insertRightSidePoint(t,i,n){return bh(this.rightSidePoints,t,i,n),this}insertBottomSidePoint(t,i,n){return bh(this.bottomSidePoints,t,i,n),this}insertLeftSidePoint(t,i,n){return bh(this.leftSidePoints,t,i,n),this}clearTopSidePoints(){return this.topSidePoints.length=0,this}clearRightSidePoints(){return this.rightSidePoints.length=0,this}clearBottomSidePoints(){return this.bottomSidePoints.length=0,this}clearLeftSidePoints(){return this.leftSidePoints.length=0,this}clearAllSidesPoints(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}var bh=function(e,t,i,n){if(typeof t!="number"){var x=t;t=x.t,i=x.x,n=x.y}e.push({t,x:i,y:n})};const M2=Phaser.Utils.Objects.IsPlainObject,bi=Phaser.Utils.Objects.GetValue,gr=Phaser.Math.Linear,w2=Phaser.Geom.Polygon.Earcut;class Kd extends Yd{constructor(t,i,n,x,S,M,L){var F,G,X;if(M2(i)){var Q=i;i=Q.x,n=Q.y,x=Q.width,S=Q.height,M=Q.color,L=Q.alpha,F=Q.strokeColor,G=Q.strokeAlpha,X=Q.strokeWidth}i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=1),S===void 0&&(S=x);var tt=new P2;super(t,"rexQuadShape",tt),tt.setTo(0,0,x,S),this.setPosition(i,n),this.setFillStyle(M,L),F!==void 0&&X===void 0&&(X=2),this.setStrokeStyle(X,F,G),this.setTLPosition(bi(Q,"tlx",0),bi(Q,"tly",0)).setTRPosition(bi(Q,"trx",0),bi(Q,"try",0)).setBLPosition(bi(Q,"blx",0),bi(Q,"bly",0)).setBRPosition(bi(Q,"brx",0),bi(Q,"bry",0));var _=bi(Q,"leftSidePoints");_&&this.insertLeftSidePoint(_);var nt=bi(Q,"topSidePoints");nt&&this.insertTopSidePoint(nt);var lt=bi(Q,"rightSidePoints");lt&&this.insertRightSidePoint(lt);var ot=bi(Q,"bottomSidePoints");ot&&this.insertBottomSidePoint(ot),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var n=t.width,x=t.height,S=0+t.tlx,M=0+t.tly,L=n+t.trx,F=0+t.try,G=n+t.brx,X=x+t.bry,Q=0+t.blx,tt=x+t.bly,_=t.topSidePoints,nt=t.rightSidePoints,lt=t.bottomSidePoints,ot=t.leftSidePoints;Ue(S,M,i),Oh(_);for(var dt=0,ct=_.length;dt<ct;dt++){var ft=_[dt],xt=gr(S,L,ft.t)+ft.x,St=gr(M,F,ft.t)+ft.y;Ue(xt,St,i)}Ue(L,F,i),Oh(nt);for(var dt=0,ct=nt.length;dt<ct;dt++){var ft=nt[dt],xt=gr(L,G,ft.t)+ft.x,St=gr(F,X,ft.t)+ft.y;Ue(xt,St,i)}Ue(G,X,i),Oh(lt);for(var dt=lt.length-1;dt>=0;dt--){var ft=lt[dt],xt=gr(Q,G,ft.t)+ft.x,St=gr(tt,X,ft.t)+ft.y;Ue(xt,St,i)}Ue(Q,tt,i),Oh(ot);for(var dt=ot.length-1;dt>=0;dt--){var ft=ot[dt],xt=gr(S,Q,ft.t)+ft.x,St=gr(M,tt,ft.t)+ft.y;Ue(xt,St,i)}return i.push(i[0],i[1]),this.pathIndexes=w2(i),this}get tlx(){return this.geom.tlx}set tlx(t){this.geom.tlx=t,this.dirty=!0}get tly(){return this.geom.tly}set tly(t){this.geom.tly=t,this.dirty=!0}get trx(){return this.geom.trx}set trx(t){this.geom.trx=t,this.dirty=!0}get try(){return this.geom.try}set try(t){this.geom.try=t,this.dirty=!0}get blx(){return this.geom.blx}set blx(t){this.geom.blx=t,this.dirty=!0}get bly(){return this.geom.bly}set bly(t){this.geom.bly=t,this.dirty=!0}get brx(){return this.geom.brx}set brx(t){this.geom.brx=t,this.dirty=!0}get bry(){return this.geom.bry}set bry(t){this.geom.bry=t,this.dirty=!0}get leftSidePoints(){return this.geom.leftSidePoints}get topSidePoints(){return this.geom.topSidePoints}get bottomSidePoints(){return this.geom.bottomSidePoints}get rightSidePoints(){return this.geom.rightSidePoints}}var Oh=function(e){e.length<=1||e.sort(function(t,i){return t.t-i.t})};Object.assign(Kd.prototype,E2),W.register("QuadShape",function(e,t,i,n,x,S){var M=new Kd(this.scene,e,t,i,n,x,S);return this.scene.add.existing(M),M}),J(window,"RexPlugins.UI.QuadShape",Kd);var A2=Phaser.Renderer.WebGL.Utils,R2=function(e,t,i,n){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var x=t.frame,S=x.width,M=x.height,L=A2.getTintAppendFloatAlpha,F=e.pipelines.set(t.pipeline,t),G=F.setTexture2D(x.glTexture,t);e.pipelines.preBatch(t),F.batchTexture(t,x.glTexture,S,M,t.x,t.y,S/t.style.resolution,M/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,S,M,L(t.tintTopLeft,i.alpha*t._alphaTL),L(t.tintTopRight,i.alpha*t._alphaTR),L(t.tintBottomLeft,i.alpha*t._alphaBL),L(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,n,!1,G),e.pipelines.postBatch(t)}},L2=function(e,t,i,n){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,n))},b2={renderWebGL:R2,renderCanvas:L2};const Zd=Phaser.Display.Canvas.CanvasPool;var O2=function(e,t,i){i===void 0&&(i={});var n=Zd.create(this),x=n.getContext("2d",{willReadFrequently:!0});e.syncFont(n,x);var S=x.measureText(t),M=Math.ceil(S.width*e.baselineX),L=M,F=2*L;if(L=L*e.baselineY|0,n.width=M,n.height=F,x.fillStyle="#f00",x.fillRect(0,0,M,F),x.font=e._font,x.textBaseline="alphabetic",x.fillStyle="#000",x.fillText(e.testString,0,L),i.left=0,M===0||F===0||!x.getImageData(0,0,M,F))return Zd.remove(n),i;for(var G=x.getImageData(0,0,M,F).data,X=!1,Q=0;Q<M;Q++){for(var tt=0;tt<F;tt++){var _=(tt*M+Q)*4;if(G[_]!==255){i.left=Q,X=!0;break}}if(X)break}return Zd.remove(n),i};Et();const F2=Phaser.GameObjects.GameObject;class ug extends F2{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,n){return this.style.setBackgroundColor(t,i,n)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,n,x,S,M){return this.style.setShadow(t,i,n,x,S,M)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setUnderline(t,i,n){return this.style.setUnderline(t,i,n)}setUnderlineColor(t){return this.style.setUnderlineColor(t)}setUnderlineThickness(t){return this.style.setUnderlineThickness(t)}setUnderlineOffset(t){return this.style.setUnderlineOffset(t)}setStrikethrough(t,i,n){return this.style.setStrikethrough(t,i,n)}setStrikethroughColor(t){return this.style.setStrikethroughColor(t)}setStrikethroughThickness(t){return this.style.setStrikethroughThickness(t)}setStrikethroughOffset(t){return this.style.setStrikethroughOffset(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}get lineSpacing(){return this.style.lineSpacing}set lineSpacing(t){this.style.lineSpacing=t}setLineSpacing(t){return this.style.lineSpacing=t,this.updateText(!0),this}get letterSpacing(){return this.style.letterSpacing}set letterSpacing(t){this.style.letterSpacing=t}setLetterSpacing(t){return this.style.letterSpacing=t,this.updateText(!0),this}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}measureTextMargins(t,i){return O2(this.style,t,i)}}const si=Phaser.GameObjects.Components;Phaser.Class.mixin(ug,[si.Alpha,si.BlendMode,si.ComputedSize,si.Crop,si.Depth,si.Flip,si.GetBounds,si.Mask,si.Origin,si.Pipeline,si.PostPipeline,si.ScrollFactor,si.Tint,si.Transform,si.Visible,b2]);var D2={backgroundColor:["backgroundColor",null,Yt],backgroundColor2:["backgroundColor2",null,Yt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,Yt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",Yt],stroke:["stroke","#fff",Yt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",Yt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",Yt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",Yt],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],letterSpacing:["letterSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|Mqgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Fh=Phaser.Display.Canvas.CanvasPool;var dg=function(e){var t=Fh.create(this),i=t.getContext("2d",{willReadFrequently:!0});e.syncFont(t,i);var n=i.measureText(e.testString);if("actualBoundingBoxAscent"in n){var x=n.actualBoundingBoxAscent,S=n.actualBoundingBoxDescent,G={ascent:x,descent:S,fontSize:x+S};return Fh.remove(t),G}var M=Math.ceil(n.width*e.baselineX),L=M,F=2*L;L=L*e.baselineY|0,t.width=M,t.height=F,i.fillStyle="#f00",i.fillRect(0,0,M,F),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,L);var G={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,M,F))return G.ascent=L,G.descent=L+6,G.fontSize=G.ascent+G.descent,Fh.remove(t),G;var X=i.getImageData(0,0,M,F).data,Q=X.length,tt=M*4,_,nt,lt=0,ot=!1;for(_=0;_<L;_++){for(nt=0;nt<tt;nt+=4)if(X[lt+nt]!==255){ot=!0;break}if(!ot)lt+=tt;else break}for(G.ascent=L-_,lt=Q-tt,ot=!1,_=F;_>L;_--){for(nt=0;nt<tt;nt+=4)if(X[lt+nt]!==255){ot=!0;break}if(!ot)lt-=tt;else break}return G.descent=_-L,G.fontSize=G.ascent+G.descent,Fh.remove(t),G},be={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,MIX_WRAP:3,SPLITREGEXP:/(?:\r\n|\r|\n)/};const Dh={none:be.NO_WRAP,word:be.WORD_WRAP,char:be.CHAR_WRAP,character:be.CHAR_WRAP,mix:be.MIX_WRAP},B2=Phaser.Utils.Objects.GetAdvancedValue,mi=Phaser.Utils.Objects.GetValue;let Jd=class{constructor(t,i,n){this.parent=t,n===void 0&&(n=D2),this.propertyMap=n,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==be.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,n){if(i===void 0&&(i=!0),n===void 0&&(n=!1),t&&t.hasOwnProperty("wordWrap")){var x=t.wordWrap;x.hasOwnProperty("width")&&(t.wrap={mode:"word",width:x.width})}if(t&&t.hasOwnProperty("wrap")){var S=t.wrap;if(S.hasOwnProperty("mode")){var M=S.mode;typeof M=="string"&&(S.mode=Dh[M])}else S.hasOwnProperty("width")&&(S.mode=1)}t&&t.rtl&&n&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var L=this.propertyMap;for(var F in L){var G=L[F],X=G[0],Q=n?G[1]:this[F],tt=G[2];if(F==="wrapCallback"||F==="wrapCallbackScope")this[F]=mi(t,X,Q);else{var _=B2(t,X,Q);tt&&(_=tt(_)),this[F]=_}}var nt=mi(t,"font",null);nt===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=nt;var lt=mi(t,"fill",null);lt!==null&&(this.color=Yt(lt));var ot=mi(t,"metrics",!1);return ot?this.metrics={ascent:mi(ot,"ascent",0),descent:mi(ot,"descent",0),fontSize:mi(ot,"fontSize",0)}:(i||!this.metrics)&&(this.metrics=dg(this)),i?this.parent.updateText():this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=dg(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=mi(t,"fontFamily","Courier"),this.fontSize=mi(t,"fontSize","16px"),this.fontStyle=mi(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,i,n){return n===void 0&&(n=!0),this.backgroundColor=Yt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=Yt(i,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=n,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=Yt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=Yt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=Yt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=Yt(t,this.parent.canvas,this.parent.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,n,x,S,M){return t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n="#000"),x===void 0&&(x=0),S===void 0&&(S=!1),M===void 0&&(M=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=Yt(n,this.parent.canvas,this.parent.context),this.shadowBlur=x,this.shadowStroke=S,this.shadowFill=M,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=Yt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,n){return t===void 0&&(t="#000"),i===void 0&&(i=0),n===void 0&&(n=0),this.underlineColor=Yt(t,this.parent.canvas,this.parent.context),this.underlineThickness=i,this.underlineOffset=n,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=Yt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setStrikethrough(t,i,n){return t===void 0&&(t="#000"),i===void 0&&(i=0),n===void 0&&(n=0),this.strikethroughColor=Yt(t,this.parent.canvas,this.parent.context),this.strikethroughThickness=i,this.strikethroughOffset=n,this.update(!1)}setStrikethroughColor(t){return t===void 0&&(t="#000"),this.strikethroughColor=Yt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(t){return t===void 0&&(t=0),this.strikethroughThickness=t,this.update(!1)}setStrikethroughOffset(t){return t===void 0&&(t=0),this.strikethroughOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=Dh[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,i&&(typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=mi(i,"fontFamily",this.fontFamily),this.fontSize=mi(i,"fontSize",this.fontSize),this.fontStyle=mi(i,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.parent.lineSpacing}toJSON(){var t={},i=this.propertyMap;for(var n in i)t[n]=this[n];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}};var _n=function(e){return e==null?e="":Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e},I2={draw(e,t,i,n){var x=this.penManager;this.hitAreaManager.clear();var S=this.context;S.save();var M=this.defaultStyle;this.clear(),$d(this,M.backgroundColor,M.backgroundStrokeColor,M.backgroundStrokeLineWidth,M.backgroundCornerRadius,M.backgroundColor2,M.backgroundHorizontalGradient,M.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var L=M.halign,F=M.valign,G,X=M.lineHeight,Q=x.lines,tt=Q.length,_=M.maxLines,nt,lt,ot;_>0&&tt>_?(nt=_,F==="center"?lt=Math.floor((tt-nt)/2):F==="bottom"?lt=tt-nt:lt=0):(nt=tt,lt=0),ot=lt+nt;var dt,ct,ft=this.rtl,xt=ft?this.parent.width:void 0;F==="center"?ct=Math.max((n-nt*X)/2,0):F==="bottom"?ct=Math.max(n-nt*X-2,0):ct=0,ct+=t;for(var St=lt;St<ot;St++)if(G=x.getLineWidth(St),G!==0){for(var Pt=Q[St],wt=Pt.length,bt=L,kt=0;kt<wt;kt++){var Dt=Pt[kt].prop.align;if(Dt!==void 0){bt=Dt;break}}bt==="center"?dt=(i-G)/2:bt==="right"?dt=ft?0:i-G:dt=ft?i-G:0,dt+=e;for(var kt=0;kt<wt;kt++)this.drawPen(Pt[kt],dt,ct,xt)}S.restore()},drawPen(e,t,i,n){t+=e.x,i+=e.y+(e.prop.y||0),n!==void 0&&(t=n-t);var x=this.canvas,S=this.context;S.save();var M=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(M.bgcolor!==null&&e.width>0){var L=this.defaultStyle.metrics,F=i-L.ascent,G=L.fontSize;this.drawRectangle(t,F,e.width,G,M.bgcolor,M)}if(M.underlineThickness>0&&e.width>0){var X=i+M.underlineOffset-M.underlineThickness/2;this.drawLine(t,X,e.width,M.underlineThickness,M.underlineColor,M)}if(e.isTextPen&&(M.buildFont(),M.syncFont(x,S),M.syncStyle(x,S),this.drawText(t,i,e.text,M)),e.isImagePen&&this.drawImage(t,i,e.prop.img,e.prop.color,M),M.strikethroughThickness>0&&e.width>0){var X=i+M.strikethroughOffset-M.strikethroughThickness/2;this.drawLine(t,X,e.width,M.strikethroughThickness,M.strikethroughColor,M)}if(S.restore(),e.hasAreaMarker&&e.width>0){var Q,tt=e.prop.area;if(tt)Q={key:tt};else{var _=e.prop.url;Q={key:`url:${_}`,url:_}}this.hitAreaManager.add(t,i-this.startYOffset,e.width,this.defaultStyle.lineHeight,Q)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawRectangle(e,t,i,n,x,S){this.autoRound&&(e=Math.round(e),t=Math.round(t));var M=this.context;M.fillStyle=x,M.fillRect(e,t,i,n)},drawLine(e,t,i,n,x,S){this.autoRound&&(e=Math.round(e),t=Math.round(t));var M=this.context;S.syncShadow(M,S.shadowStroke);var L=M.lineCap;M.lineCap="butt",M.strokeStyle=x,M.lineWidth=n,M.beginPath(),M.moveTo(e,t),M.lineTo(e+i,t),M.stroke(),M.lineCap=L},drawText(e,t,i,n){this.autoRound&&(e=Math.round(e),t=Math.round(t));var x=this.context,S=n.letterSpacing;if(S===0)n.stroke&&n.stroke!=="none"&&n.strokeThickness>0&&(n.syncShadow(x,n.shadowStroke),x.strokeText(i,e,t)),n.color&&n.color!=="none"&&(n.syncShadow(x,n.shadowFill),x.fillText(i,e,t));else for(var M=i.split(""),L=0,F=M.length;L<F;L++){var G=M[L];n.stroke&&n.stroke!=="none"&&n.strokeThickness>0&&(n.syncShadow(x,n.shadowStroke),x.strokeText(G,e,t)),n.color&&n.color!=="none"&&(n.syncShadow(x,n.shadowFill),x.fillText(G,e,t)),e+=x.measureText(G).width+S}},drawImage(e,t,i,n,x){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,e,t,n,this.autoRound)}};const ln=Phaser.Utils.Objects.GetValue,G2=be.NO_NEWLINE,fg=be.RAW_NEWLINE;class k2{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=ln(t,"text",""),this.x=ln(t,"x",0),this.y=ln(t,"y",0),this.width=ln(t,"width",0);var i=ln(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=ln(t,"newLineMode",0),this.startIndex=ln(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===fg&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==G2&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===fg&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Hi=function(e,t){var i=Array.isArray(e);if(t===void 0?t=i?[]:{}:ve(t),i){t.length=e.length;for(var n=0,x=e.length;n<x;n++)t[n]=e[n]}else for(var S in e)t[S]=e[S];return t};const cg=Phaser.Utils.Objects.GetFastValue,vg=be.NO_NEWLINE,N2=be.WRAPPED_NEWLINE;class Qd{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=cg(t,"tagToText",a),this.tagToTextScope=cg(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,n,x,S,M){var L=this.pensPool.pop();return L==null&&(L=new k2),un.text=t,un.x=i,un.y=n,un.width=x,un.prop=S,un.newLineMode=M,L.resetFromJSON(un),this.addPen(L),this}addImagePen(t,i,n,x){return this.addTextPen("",t,i,n,x,vg),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,n=t?t.y:0,x=t?Hi(t.prop):null;return this.addTextPen("",i,n,0,x,N2),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var n=this.lastLine;n==null&&(n=this.linesPool.pop()||[],this.lines.push(n)),n.push(t),t.newLineMode!==vg&&(n=this.linesPool.pop()||[],this.lines.push(n)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new Qd),t.clear();for(var i=0,n=this.lines.length;i<n;i++)for(var x=this.lines[i],S=0,M=x.length;S<M;S++){var L=x[S];t.addPen(L.text,L.x,L.y,L.width,Hi(L.prop),L.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,n=!1,x;for(i=t;i>=0&&(x=this.lines[i],n=x!=null&&x.length>0,!n);i--);if(!n)return 0;var S=x[x.length-1];return S.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var n=i[i.length-1];if(n==null)return 0;var x=n.lastX;return x}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,n=0,x=this.lines.length;n<x;n++)t=this.getLineWidth(n),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,n=this.lines.length;i<n;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,n=0,x=i.length;n<x;n++)t+=i[n].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,n=0,x=this.pens.length;n<x;n++)t+=i[n].rawTextLength;return t}getSliceTagText(t,i,n){var x=this.lastPen;if(x==null)return"";var S=x.endIndex;(t===void 0||t===0)&&(t=-1),(i===void 0||i===S)&&(i=S+1),n===void 0&&(n=!1);for(var M="",L,F,G,X,Q,tt,_,nt=0,lt=this.pens.length;nt<lt&&(L=this.pens[nt],X=L.endIndex,!(!(X<=t)&&(L=this.pens[nt],F=n?L.wrapText:L.plainText,tt=L.prop,G=L.startIndex,Q=G>=t&&X<=i,Q||(F=F.substring(t-G,i-G)),this.tagToTextScope?M+=this.tagToText.call(this.tagToTextScope,F,tt,_):M+=this.tagToText(F,tt,_),_=tt,X>=i)));nt++);return M}get length(){return this.lines.length}set length(t){this.clear()}}var un={};const z2=Phaser.Geom.Rectangle;var pg=new mt;class U2{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,i=this.hitAreas.length;t<i;t++)this.hitAreas[t].data=null;return pg.pushMultiple(this.hitAreas),this}add(t,i,n,x,S){S===void 0&&(S={});var M=pg.pop();return M===null?M=new z2(t,i,n,x):M.setTo(t,i,n,x),M.data=S,this.hitAreas.push(M),this}getFirst(t,i){for(var n=0,x=this.hitAreas.length;n<x;n++){var S=this.hitAreas[n];if(S.contains(t,i))return S}return null}getByKey(t){for(var i=0,n=this.hitAreas.length;i<n;i++){var x=this.hitAreas[i];if(x.data.key===t)return x}return null}drawBounds(t,i,n){i===void 0&&(i=16777215),n&&t.save().translateCanvas(n.x,n.y).rotateCanvas(n.rotation).scaleCanvas(n.scaleX,n.scaleY);for(var x=0,S=this.hitAreas.length;x<S;x++){var M=this.hitAreas[x];t.lineStyle(1,i).strokeRect(M.x,M.y,M.width,M.height)}return n&&t.restore(),this}}var V2=function(){this.parent.on("pointerdown",X2,this).on("pointerup",W2,this).on("pointermove",jd,this).on("pointerover",jd,this).on("pointerout",function(e,t){jd.call(this,e,null,null,t)},this)},X2=function(e,t,i,n){var x=this.hitAreaManager.getFirst(t,i);if(x!==null){var S=x.data.key;ta.call(this,"areadown",S,e,t,i,n),x.data&&(x.data.isDown=!0)}},W2=function(e,t,i,n){var x=this.hitAreaManager.getFirst(t,i);if(x!==null){var S=x.data.key;if(ta.call(this,"areaup",S,e,t,i,n),!!x.data){if(x.data.isDown){if(ta.call(this,"areaclick",S,e,t,i,n),!x.data)return;var M=x.data.url;M&&window.open(M,"_blank")}x.data.isDown=!1}}},jd=function(e,t,i,n){if(t===null){if(this.lastHitAreaKey!==null){ta.call(this,"areaout",this.lastHitAreaKey,e,t,i,n);var x=this.hitAreaManager.getByKey(this.lastHitAreaKey);x&&x.data&&(x.data.isDown=!1),this.lastHitAreaKey=null}return}var x=this.hitAreaManager.getFirst(t,i),S=x?x.data.key:null;if(this.lastHitAreaKey!==S){if(this.lastHitAreaKey!==null){ta.call(this,"areaout",this.lastHitAreaKey,e,t,i,n);var M=this.hitAreaManager.getByKey(this.lastHitAreaKey);M&&(this.urlTagCursorStyle&&gg(this.scene,M,""),M.data.isDown=!1)}S!==null&&(ta.call(this,"areaover",S,e,t,i,n),x.data&&this.urlTagCursorStyle&&gg(this.scene,x,this.urlTagCursorStyle)),this.lastHitAreaKey=S}},ta=function(e,t,i,n,x,S){this.parent.emit(`${e}-${t}`,i,n,x,S),this.parent.emit(e,t,i,n,x,S)},gg=function(e,t,i){!t||!t.data||!t.data.url||(e.input.manager.canvas.style.cursor=i)};const mg=Phaser.GameObjects.Components.TransformMatrix,Y2=Phaser.Math.TransformXY;var xg=function(e,t,i,n,x){n===void 0&&(n=e.scene.cameras.main),x===void 0?x={}:x===!0&&(x=H2);var S=n.scrollX,M=n.scrollY,L=t+S*e.scrollFactorX-S,F=i+M*e.scrollFactorY-M;return e.parentContainer?(Bh===void 0&&(Bh=new mg,yg=new mg),e.getWorldTransformMatrix(Bh,yg),Bh.applyInverse(L,F,x)):Y2(L,F,e.x,e.y,e.rotation,e.scaleX,e.scaleY,x),x.x+=e.displayOriginX,x.y+=e.displayOriginY,x},Bh,yg,H2={},$2=function(e,t,i){var n=xg(this.parent,e,t,i,!0),x=this.hitAreaManager.getFirst(n.x,n.y);if(x!==null)return x.data.key},K2=/^[\x00-\x7F]+$/,_a=function(e){return K2.test(e)};const Z2=be.NO_NEWLINE,J2=be.RAW_NEWLINE,qd=be.WRAPPED_NEWLINE,Cg=be.NO_WRAP,Q2=be.WORD_WRAP,Sg=be.CHAR_WRAP,j2=be.SPLITREGEXP;var Tg=function(e,t,i,n,x,S,M){n<=0&&(i=Cg);var L=[];if(!e||!e.length)return L;for(var F=i===Cg,G=e.split(j2),X,Q,tt,_=0,nt=G.length;_<nt;_++){if(X=G[_],tt=_===nt-1?Z2:J2,F){var lt=t.measureText(X).width+x*X.length;L.push(M.getLine(X,lt,tt));continue}if(Q=_===0?n-S:n,X.length<=100){var lt=t.measureText(X).width+x*X.length;if(lt<=Q){L.push(M.getLine(X,lt,tt));continue}}for(var ot=q2(X,i),dt,ct,ft="",xt=0,St,Pt=0,wt=ot.length;Pt<wt;Pt++){if(dt=ot[Pt],ct=t.measureText(dt).width+x*dt.length,ct>n&&_2(dt)){ft!==""?L.push(M.getLine(ft,xt,qd)):Pt===0&&S>0&&L.push(M.getLine("",0,qd)),L.push(...Tg(dt,t,Sg,n,x,0,M));var bt=L.pop();ft=bt.text,xt=bt.width,M.freeLine(bt),ft===" "&&(ft="",xt=0)}else St=xt+ct,St>Q?(L.push(M.getLine(ft,xt,qd)),ft=dt,xt=ct,Q=n):(ft+=dt,xt=St);Pt===wt-1&&L.push(M.getLine(ft,xt,tt))}}return L},q2=function(e,t){var i;switch(t){case Q2:i=[],e=e.split(" ");for(var n=0,x=e.length;n<x;n++){var S=e[n];n<x-1?i.push(S+" "):S!==""&&i.push(S)}break;case Sg:i=e.split("");break;default:i=[],e=e.split(" ");for(var n=0,x=e.length;n<x;n++){var S=e[n];n<x-1?_a(S)?i.push(S+" "):(i.push(...S.split("")),i.push(" ")):S!==""&&(_a(S)?i.push(S):i.push(...S.split("")))}break}return i},_2=function(e){switch(e.length){case 1:return!1;case 2:return e.charAt(1)!==" ";default:return!0}};const _d=Phaser.Utils.Objects.GetValue,tE=be.NO_WRAP,Eg=be.NO_NEWLINE,eE=be.WRAPPED_NEWLINE;class Pg{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=_d(t,"context",null),this.canvas=this.context.canvas,this.parser=_d(t,"parser",null),this.defaultStyle=_d(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new U2,this.lastHitAreaKey=null,this.urlTagCursorStyle=null}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,i,n,x,S){if(S===void 0&&(S=this.penManager),S.clear(),t==="")return S;var M=this.parent.style;if(M.isWrapFitMode){var L=this.parent.padding;n=M.fixedWidth-L.left-L.right}for(var F=this.canvas,G=this.context,X=0,Q=0,tt=M.wrapCallback,_=M.wrapCallbackScope,nt=!tt,lt=!0,ot,dt,ct,ft=this.parser.splitText(t),xt,St,Pt=this.wrapTextLinesPool,wt=0,bt=ft.length;wt<bt;wt++)if(xt=this.parser.tagTextToProp(ft[wt],dt),ot=xt.plainText,dt=xt.prop,dt.img){var kt=this.imageManager.getOuterWidth(dt.img);n>0&&i!==tE&&n<X+kt&&(S.addNewLinePen(),Q+=x,X=0),S.addImagePen(X,Q,kt,Hi(dt)),X+=kt}else if(ot!==""){if(G.save(),ct=this.parser.propToContextStyle(this.defaultStyle,dt),ct.buildFont(),ct.syncFont(F,G),ct.syncStyle(F,G),nt)St=Tg(ot,G,i,n,ct.letterSpacing,X,Pt);else{St=tt.call(_,ot,G,n,ct.letterSpacing,X),typeof St=="string"&&(St=St.split(`
`));for(var Ht,Dt=0,Vt=St.length;Dt<Vt;Dt++)Ht=St[Dt],typeof Ht=="string"?St[Dt]=Pt.getLine(Ht,G.measureText(Ht).width,Dt<Vt-1?eE:Eg):lt=!1}for(var Ht,Dt=0,Vt=St.length;Dt<Vt;Dt++)Ht=St[Dt],S.addTextPen(Ht.text,X,Q,Ht.width,Hi(dt),Ht.newLineMode),Ht.newLineMode!==Eg?(X=0,Q+=x):X+=Ht.width;lt&&Pt.freeLines(St),St=null,G.restore()}for(var wt=0,bt=this.lines.length;wt<bt;wt++){var se=this.lines[wt],Ot=se[se.length-1];Ot&&(Ot.width+=this.parser.getStrokeThinkness(this.defaultStyle,Ot.prop),Ot.width-=this.parser.getLetterSpacing(this.defaultStyle,Ot.prop))}return S}get startXOffset(){return this.defaultStyle.xOffset}get startYOffset(){return this.defaultStyle.metrics.ascent}get lines(){return this.penManager.lines}get displayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.displayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Qd({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,n){var x;if(t==null)x=this.penManager.plainText;else{var S=this.parser.splitText(t,1);x="";for(var M=0,L=S.length;M<L;M++)x+=S[M]}return(i!=null||n!=null)&&(i==null&&(i=0),n==null&&(n=x.length),x=x.substring(i,n)),x}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var n=this.defaultStyle;return this.updatePenManager(t,n.wrapMode,n.wrapWidth,n.lineHeight,i),i}getText(t,i,n,x){if(t==null)return this.penManager.getSliceTagText(i,n,x);var S=this.tmpPenManager,M=this.defaultStyle;return this.updatePenManager(t,M.wrapMode,M.wrapWidth,M.lineHeight,S),S.getSliceTagText(i,n,x)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var iE={setInteractive:V2,getHitArea:$2};Object.assign(Pg.prototype,I2,iE);class Mg extends mt{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,i,n){var x=this.pop();return x===null&&(x={}),x.text=t,x.width=i,x.newLineMode=n,x}}const sE=Phaser.Utils.Objects.IsPlainObject,ea=Phaser.Utils.Objects.GetValue;var tf=function(e,t){sE(e)?(t=e,e=t.key):t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var i=t.key,n=t.frame,x=t.width,S=t.height;if(x===void 0||S===void 0){var M=this.textureManager.getFrame(i,n),L=M?M.cutWidth:0,F=M?M.cutHeight:0;x===void 0&&S===void 0?(x=L,S=F):x===void 0?x=L*(S/F):S===void 0&&(S=F*(x/L))}this.images[e]={key:i,frame:n,width:x,height:S,y:ea(t,"y",0),left:ea(t,"left",0),right:ea(t,"right",0),originX:ea(t,"originX",0),originY:ea(t,"originY",0),tintFill:ea(t,"tintFill",!1)}};const wg=Phaser.Display.Canvas.CanvasPool;var Ag=function(e,t,i,n,x,S,M,L){i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=e.cutWidth),S===void 0&&(S=e.cutHeight),L===void 0&&(L=!1),L&&(i=Math.round(i),n=Math.round(n));var F=t.getContext("2d",{willReadFrequently:!0});if(M){var G=wg.create(null,x,S,Phaser.CANVAS,!0),X=G.getContext("2d",{willReadFrequently:!0});X.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,x,S),X.globalCompositeOperation="source-in",X.fillStyle=M,X.fillRect(0,0,x,S),F.drawImage(G,0,0,x,S,i,n,x,S),wg.remove(G)}else F.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,i,n,x,S)},rE=function(e,t,i,n,x,S){var M=this.get(e);if(M){var L=this.textureManager.getFrame(M.key,M.frame),F=M.width,G=M.height;i+=M.left-M.originX*F,n+=M.y-M.originY*G,M.tintFill||(x=void 0),Ag(L,t.canvas,i,n,F,G,x,S)}};class ef{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")tf.call(this,t,i);else if(Array.isArray(t))for(var n=t,x=0,S=n.length;x<S;x++)tf.call(this,n[x]);else{var n=t;for(var t in n)tf.call(this,t,n[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var nE={draw:rE};Object.assign(ef.prototype,nE);var Rg=function(e,t){!e&&e!==0&&(e=""),t===void 0&&(t=!0),Array.isArray(e)&&(e=e.join(`
`));var i;return t?i=`${this.text}
${e}`:i=`${this.text}${e}`,i!=this.text&&this.setText(i),this};const aE=Phaser.Utils.Objects.IsPlainObject,Lg=Phaser.DOM.AddToDOM,bg=Phaser.Display.Canvas.CanvasPool,oE=Phaser.GameObjects.GameObject,di=Phaser.Utils.Objects.GetValue,hE=Phaser.DOM.RemoveFromDOM,lE=be.SPLITREGEXP,uE=Phaser.Utils.String.UUID;var ia=null,sf=null,rf=null;class nf extends ug{constructor(t,i,n,x,S,M,L){if(aE(i)){var F=i;i=di(F,"x",0),n=di(F,"y",0),x=di(F,"text",""),S=di(F,"style")}if(i===void 0&&(i=0),n===void 0&&(n=0),super(t,M),this.renderer=t.sys.game.renderer,this.setPosition(i,n),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=bg.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,S){if(S.hasOwnProperty("align")){var G=S.align;delete S.align,S.halign=G}S.hasOwnProperty("stroke")&&!S.hasOwnProperty("strokeThickness")&&(S.strokeThickness=1)}this.style=new Jd(this,S);var X=di(S,"images",void 0);X&&this.addImage(X),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=uE(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var Q=di(S,"sharedPool",!0),tt,_,nt;Q?(ia||(ia={},sf=new mt,rf=new Mg,this.scene.game.events.once("destroy",function(){ia=null,sf=null,rf=null})),ia.hasOwnProperty(M)||(ia[M]=new mt),tt=ia[M],_=sf,nt=rf):(tt=new mt,_=new mt,nt=new Mg),this.canvasText=new Pg({parent:this,context:this.context,parser:L,style:this.style,pensPool:tt,linesPool:_,wrapTextLinesPool:nt}),this.parser=L,this.initRTL(),S&&S.padding&&this.setPadding(S.padding),this.setText(x),this.setUrlTagCursorStyle(di(S,"urlTagCursorStyle","pointer")),di(S,"interactive",!1)&&this.setInteractive()}preDestroy(){hE(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),bg.remove(this.canvas);var t=this.texture;t&&t.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Lg(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var i=this.style;if(i.rtl===t)return this;if(i.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Lg(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),i.halign==="left"?i.halign="right":i.halign==="right"&&(i.halign="left"),this._imageManager){var n=this._imageManager.images;for(var x in n)n[x].originX=1-n[x].originX}return this}setText(t){return t=_n(t),t===this._text?this:(this._text=t,this.updateText(),this)}setPadding(t,i,n,x){if(typeof t=="object"){var S=t,M=di(S,"x",null);M!==null?(t=M,n=M):(t=di(S,"left",0),n=di(S,"right",t));var L=di(S,"y",null);L!==null?(i=L,x=L):(i=di(S,"top",0),x=di(S,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),n===void 0&&(n=t),x===void 0&&(x=i);return this.padding.left=t,this.padding.top=i,this.padding.right=n,this.padding.bottom=x,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,n=this.style;t&&i.updatePenManager(this._text,n.wrapMode,n.wrapWidth,n.lineHeight);var x=this.padding,S,M,L=Math.ceil(i.linesWidth);n.fixedWidth===0?(this.width=L+x.left+x.right,S=L):(this.width=n.fixedWidth,S=this.width-x.left-x.right,S<L&&(S=L)),n.fixedHeight===0?(this.height=i.linesHeight+x.top+x.bottom,M=i.linesHeight):(this.height=n.fixedHeight,M=this.height-x.top-x.bottom,M<i.linesHeight&&(M=i.linesHeight));var F=this.width,G=this.height;this.updateDisplayOrigin();var X=n.resolution;F*=X,G*=X,F=Math.max(Math.ceil(F),1),G=Math.max(Math.ceil(G),1);var Q=this.canvas,tt=this.context;Q.width!==F||Q.height!==G?(Q.width=F,Q.height=G,this.frame.setSize(F,G)):tt.clearRect(0,0,F,G),tt.save(),tt.scale(X,X);var _=this.style.rtl?x.right:x.left,nt=x.top;i.draw(_,nt,S,M),tt.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(Q,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var lt=this.input;return lt&&!lt.customHitArea&&(lt.hitArea.width=this.width,lt.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,n){var x=!!this.input;return oE.prototype.setInteractive.call(this,t,i,n),x||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,i,n){return typeof t=="number"&&(n=i,i=t,t=void 0),t=this.canvasText.getText(t,i,n,!0),t.split(lE)}getPlainText(t,i,n){return typeof t=="number"&&(n=i,i=t,t=void 0),this.canvasText.getPlainText(t,i,n)}getText(t,i,n,x){return typeof t=="number"&&(x=n,n=i,i=t,t=void 0),x===void 0&&(x=!1),this.canvasText.getText(t,i,n,x)}getSubString(t,i,n){return typeof t=="number"&&(n=i,i=t,t=void 0),this.getText(t,i,n)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}get imageManager(){return this._imageManager||(this._imageManager=new ef(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}generateTexture(t,i,n,x,S){var M=this.canvas;return x===void 0?x=M.width:x*=this.resolution,S===void 0?S=M.height:S*=this.resolution,rg(this.scene,M,t,i,n,x,S),this}getHitArea(t,i,n){return this.canvasText.getHitArea(t,i,n)}}var dE={appendText:Rg};Object.assign(nf.prototype,dE);var fE=function(e,t){for(var i=this.tagRegex,n=[],x=0,S=!1,M=!1;;){var L=i.RE_SPLITTEXT.exec(e);if(!L)break;var F=L[0];if(M)if(i.RE_ESC_CLOSE.test(F))M=!1;else continue;else if(S)if(i.RE_RAW_CLOSE.test(F))S=!1;else continue;else i.RE_ESC_OPEN.test(F)?M=!0:i.RE_RAW_OPEN.test(F)&&(S=!0);var G=i.RE_SPLITTEXT.lastIndex,X=G-F.length;if(x<X){var Q=e.substring(x,X);n.push(Q)}t===void 0&&n.push(F),x=G}var tt=e.length;return x<tt&&n.push(e.substring(x,tt)),n};const Ce=!1,pe=!0;var cE={plainText:null,prevProp:null},vE=function(e,t){var i=this.tagRegex;t==null&&(t={});var n="";if(t.img&&Xt(t,Ce,"img"),t.esc)i.RE_ESC_CLOSE.test(e)?Xt(t,Ce,"esc"):n=e;else if(t.raw)i.RE_RAW_CLOSE.test(e)?Xt(t,Ce,"raw"):n=e;else if(i.RE_ESC_OPEN.test(e))Xt(t,pe,"esc",!0);else if(i.RE_ESC_CLOSE.test(e))Xt(t,Ce,"esc");else if(i.RE_RAW_OPEN.test(e))Xt(t,pe,"raw",!0);else if(i.RE_RAW_CLOSE.test(e))Xt(t,Ce,"raw");else if(i.RE_BLOD_OPEN.test(e))Xt(t,pe,"b",!0);else if(i.RE_BLOD_CLOSE.test(e))Xt(t,Ce,"b");else if(i.RE_ITALICS_OPEN.test(e))Xt(t,pe,"i",!0);else if(i.RE_ITALICS_CLOSE.test(e))Xt(t,Ce,"i");else if(i.RE_WEIGHT_OPEN.test(e)){var x=e.match(i.RE_WEIGHT_OPEN);Xt(t,pe,"weight",x[1])}else if(i.RE_WEIGHT_CLOSE.test(e))Xt(t,Ce,"weight");else if(i.RE_SIZE_OPEN.test(e)){var x=e.match(i.RE_SIZE_OPEN);Xt(t,pe,"size",`${x[1]}px`)}else if(i.RE_SIZE_CLOSE.test(e))Xt(t,Ce,"size");else if(i.RE_FAMILY_OPEN.test(e)){var x=e.match(i.RE_FAMILY_OPEN);Xt(t,pe,"family",x[1])}else if(i.RE_FAMILY_CLOSE.test(e))Xt(t,Ce,"family");else if(i.RE_COLOR_OPEN.test(e)){var x=e.match(i.RE_COLOR_OPEN);Xt(t,pe,"color",x[1])}else if(i.RE_COLOR_CLOSE.test(e))Xt(t,Ce,"color");else if(i.RE_UNDERLINE_OPEN.test(e))Xt(t,pe,"u",!0);else if(i.RE_UNDERLINE_OPENC.test(e)){var x=e.match(i.RE_UNDERLINE_OPENC);Xt(t,pe,"u",x[1])}else if(i.RE_UNDERLINE_CLOSE.test(e))Xt(t,Ce,"u");else if(i.RE_STRIKETHROUGH_OPEN.test(e))Xt(t,pe,"s",!0);else if(i.RE_STRIKETHROUGH_OPENC.test(e)){var x=e.match(i.RE_STRIKETHROUGH_OPENC);Xt(t,pe,"s",x[1])}else if(i.RE_STRIKETHROUGH_CLOSE.test(e))Xt(t,Ce,"s");else if(i.RE_SHADOW_OPEN.test(e))Xt(t,pe,"shadow",!0);else if(i.RE_SHADOW_OPENC.test(e)){var x=e.match(i.RE_SHADOW_OPENC);Xt(t,pe,"shadow",x[1])}else if(i.RE_SHADOW_CLOSE.test(e))Xt(t,Ce,"shadow");else if(i.RE_STROKE_OPEN.test(e))Xt(t,pe,"stroke",!0);else if(i.RE_STROKE_OPENC.test(e)){var x=e.match(i.RE_STROKE_OPENC);Xt(t,pe,"stroke",x[1])}else if(i.RE_STROKE_CLOSE.test(e))Xt(t,Ce,"stroke");else if(i.RE_BGCOLOR_OPEN.test(e)){var x=e.match(i.RE_BGCOLOR_OPEN);Xt(t,pe,"bgcolor",x[1])}else if(i.RE_BGCOLOR_CLOSE.test(e))Xt(t,Ce,"bgcolor");else if(i.RE_OFFSETY_OPEN.test(e)){var x=e.match(i.RE_OFFSETY_OPEN);Xt(t,pe,"y",parseFloat(x[1]))}else if(i.RE_OFFSETY_CLOSE.test(e))Xt(t,Ce,"y");else if(i.RE_SPACING_OPEN.test(e)){var x=e.match(i.RE_SPACING_OPEN);Xt(t,pe,"spacing",parseFloat(x[1]))}else if(i.RE_SPACING_CLOSE.test(e))Xt(t,Ce,"spacing");else if(i.RE_IMAGE_OPEN.test(e)){var x=e.match(i.RE_IMAGE_OPEN);Xt(t,pe,"img",x[1])}else if(i.RE_IMAGE_CLOSE.test(e))Xt(t,Ce,"img");else if(i.RE_AREA_OPEN.test(e)){var x=e.match(i.RE_AREA_OPEN);Xt(t,pe,"area",x[1])}else if(i.RE_AREA_CLOSE.test(e))Xt(t,Ce,"area");else if(i.RE_URL_OPEN.test(e)){var x=e.match(i.RE_URL_OPEN);Xt(t,pe,"url",x[1])}else if(i.RE_URL_CLOSE.test(e))Xt(t,Ce,"url");else if(i.RE_ALIGN_OPEN.test(e)){var x=e.match(i.RE_ALIGN_OPEN);Xt(t,pe,"align",x[1])}else if(i.RE_ALIGN_CLOSE.test(e))Xt(t,Ce,"align");else if(i.RE_ID_OPEN.test(e)){var x=e.match(i.RE_ID_OPEN);Xt(t,pe,"id",x[1])}else i.RE_ID_CLOSE.test(e)?Xt(t,Ce,"id"):n=e;var S=cE;return S.plainText=n,S.prop=t,S},Xt=function(e,t,i,n){return t===pe?e[i]=n:e.hasOwnProperty(i)&&delete e[i],e},pE=function(e,t){var i=mE;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var n=t.size;typeof n=="number"&&(n=`${n}px`),i.fontSize=n}else i.fontSize=e.fontSize;i.fontStyle=gE(t),t.hasOwnProperty("color")?i.color=t.color:i.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=e.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(i.strikethroughColor=e.strikethroughColor,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset):(i.strikethroughColor=t.s,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset):(i.strikethroughColor="#000",i.strikethroughThickness=0,i.strikethroughOffset=0),t.hasOwnProperty("bgcolor")?i.bgcolor=t.bgcolor:i.bgcolor=null,t.hasOwnProperty("spacing")?i.letterSpacing=t.spacing:i.letterSpacing=e.letterSpacing,i},gE=function(e){var t=e.b,i=e.weight,n=e.i;return t||i||n?n?t?"bold italic":i?`${i} italic`:"italic":t?"bold":i.toString():""},mE=new Jd,xE=function(e,t,i){i==null&&(i=yE);var n=this.delimiters[0],x=this.delimiters[1],S=[];for(var M in i)t.hasOwnProperty(M)||S.push(`${n}/${M}${x}`);for(var M in t){var L=t[M];if(M!=="img"){if(i[M]===L)continue}switch(M){case"size":S.push(`${n}size=${L.replace("px","")}${x}`);break;case"color":case"weight":case"family":case"stroke":case"bgcolor":case"y":case"spacing":case"img":case"area":case"url":case"align":case"id":S.push(`${n}${M}=${L}${x}`);break;case"u":case"s":L===!0?S.push(`${n}${M}${x}`):S.push(`${n}${M}=${L}${x}`);break;default:S.push(`${n}${M}${x}`);break}}return S.push(e),S.join("")},yE={},sa=function(e){return e.replace(CE,"\\$&").replace(SE,"\\x2d")},CE=/[|\\{}()[\]^$+*?.]/g,SE=/-/g,Og,Fg,Wt={},xe=function(e,t,i,n){return n===void 0?`${e}${i}${t}`:`${e}${i}=(${n})${t}`},De=function(e,t,i){return`${e}/${i}${t}`},TE=function(e){return`[^${e}]+`},Ih="[-.0-9]+",EE=["[a-zA-Z]+","#[0-9abcdef]+","rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)"],ra=EE.join("|"),Dg=function(e,t){if(t===void 0){var i=e;e=i[0],t=i[1]}if(Og===e&&Fg===t)return!1;Og=e,Fg=t,e=sa(e),t=sa(t);var n=TE(t),x="esc",S=xe(e,t,x),M=De(e,t,x),L="raw",F=xe(e,t,L),G=De(e,t,L),X="b",Q=xe(e,t,X),tt=De(e,t,X),_="i",nt=xe(e,t,_),lt=De(e,t,_),ot="weight",dt=xe(e,t,ot,Ih),ct=De(e,t,ot),ft="size",xt=xe(e,t,ft,Ih),St=De(e,t,ft),Pt="family",wt=xe(e,t,Pt,n),bt=De(e,t,Pt),kt="color",Dt=xe(e,t,kt,ra),Vt=De(e,t,kt),Ht="u",se=xe(e,t,Ht),Ot=xe(e,t,Ht,ra),ue=De(e,t,Ht),ge="s",Ee=xe(e,t,ge),ze=xe(e,t,ge,ra),Ge=De(e,t,ge),oi="shadow",Xi=xe(e,t,oi),Wi=xe(e,t,oi,ra),ws=De(e,t,oi),Vn="stroke",ed=xe(e,t,Vn),hi=xe(e,t,Vn,ra),yh=De(e,t,Vn),Ch="bgcolor",id=xe(e,t,Ch,ra),Zs=De(e,t,Ch),a1="y",o1=xe(e,t,a1,Ih),h1=De(e,t,a1),l1="spacing",u1=xe(e,t,l1,Ih),d1=De(e,t,l1),f1="img",c1=xe(e,t,f1,n),v1=De(e,t,f1),p1="area",g1=xe(e,t,p1,n),m1=De(e,t,p1),x1="url",y1=xe(e,t,x1,n),C1=De(e,t,x1),S1="align",T1=xe(e,t,S1,n),E1=De(e,t,S1),P1="id",M1=xe(e,t,P1,n),w1=De(e,t,P1);return Wt.RE_ESC_OPEN=new RegExp(S,"i"),Wt.RE_ESC_CLOSE=new RegExp(M,"i"),Wt.RE_RAW_OPEN=new RegExp(F,"i"),Wt.RE_RAW_CLOSE=new RegExp(G,"i"),Wt.RE_BLOD_OPEN=new RegExp(Q,"i"),Wt.RE_BLOD_CLOSE=new RegExp(tt,"i"),Wt.RE_ITALICS_OPEN=new RegExp(nt,"i"),Wt.RE_ITALICS_CLOSE=new RegExp(lt,"i"),Wt.RE_WEIGHT_OPEN=new RegExp(dt,"i"),Wt.RE_WEIGHT_CLOSE=new RegExp(ct,"i"),Wt.RE_SIZE_OPEN=new RegExp(xt,"i"),Wt.RE_SIZE_CLOSE=new RegExp(St,"i"),Wt.RE_FAMILY_OPEN=new RegExp(wt,"i"),Wt.RE_FAMILY_CLOSE=new RegExp(bt,"i"),Wt.RE_COLOR_OPEN=new RegExp(Dt,"i"),Wt.RE_COLOR_CLOSE=new RegExp(Vt,"i"),Wt.RE_UNDERLINE_OPEN=new RegExp(se,"i"),Wt.RE_UNDERLINE_OPENC=new RegExp(Ot,"i"),Wt.RE_UNDERLINE_CLOSE=new RegExp(ue,"i"),Wt.RE_STRIKETHROUGH_OPEN=new RegExp(Ee,"i"),Wt.RE_STRIKETHROUGH_OPENC=new RegExp(ze,"i"),Wt.RE_STRIKETHROUGH_CLOSE=new RegExp(Ge,"i"),Wt.RE_SHADOW_OPEN=new RegExp(Xi,"i"),Wt.RE_SHADOW_OPENC=new RegExp(Wi,"i"),Wt.RE_SHADOW_CLOSE=new RegExp(ws,"i"),Wt.RE_STROKE_OPEN=new RegExp(ed,"i"),Wt.RE_STROKE_OPENC=new RegExp(hi,"i"),Wt.RE_STROKE_CLOSE=new RegExp(yh,"i"),Wt.RE_BGCOLOR_OPEN=new RegExp(id,"i"),Wt.RE_BGCOLOR_CLOSE=new RegExp(Zs,"i"),Wt.RE_OFFSETY_OPEN=new RegExp(o1,"i"),Wt.RE_OFFSETY_CLOSE=new RegExp(h1,"i"),Wt.RE_SPACING_OPEN=new RegExp(u1,"i"),Wt.RE_SPACING_CLOSE=new RegExp(d1,"i"),Wt.RE_IMAGE_OPEN=new RegExp(c1,"i"),Wt.RE_IMAGE_CLOSE=new RegExp(v1,"i"),Wt.RE_AREA_OPEN=new RegExp(g1,"i"),Wt.RE_AREA_CLOSE=new RegExp(m1,"i"),Wt.RE_URL_OPEN=new RegExp(y1,"i"),Wt.RE_URL_CLOSE=new RegExp(C1,"i"),Wt.RE_ALIGN_OPEN=new RegExp(T1,"i"),Wt.RE_ALIGN_CLOSE=new RegExp(E1,"i"),Wt.RE_ID_OPEN=new RegExp(M1,"i"),Wt.RE_ID_CLOSE=new RegExp(w1,"i"),Wt.RE_SPLITTEXT=new RegExp([F,G,S,M,Q,tt,nt,lt,dt,ct,xt,St,wt,bt,Dt,Vt,se,Ot,ue,Ee,ze,Ge,Xi,Wi,ws,ed,hi,yh,id,Zs,o1,h1,u1,d1,c1,v1,g1,m1,y1,C1,T1,E1,M1,w1].join("|"),"ig"),!0},Bg=function(e,t){return e!==void 0&&Dg(e,t),Object.assign({},Wt)};const PE=Phaser.Utils.Objects.GetValue;let Ig=class{constructor(t){var i=PE(t,"delimiters","[]");this.tagRegex=Bg(i),this.delimiters=i}getStrokeThinkness(t,i){var n;return i.hasOwnProperty("stroke")?n=t.strokeThickness:n=0,n}getLetterSpacing(t,i){var n;return i.hasOwnProperty("spacing")?n=i.spacing:n=t.letterSpacing,n}setDelimiters(t,i){return Dg(t,i)&&(this.tagRegex=Bg()),this}};var ME={splitText:fE,tagTextToProp:vE,propToContextStyle:pE,propToTagText:xE};Object.assign(Ig.prototype,ME);class af extends nf{constructor(t,i,n,x,S){var M=new Ig(S);super(t,i,n,x,S,"rexBBCodeText",M)}setDelimiters(t,i){return this.parser.setDelimiters(t,i),this}}W.register("BBCodeText",function(e,t,i,n){var x=new af(this.scene,e,t,i,n);return this.scene.add.existing(x),x}),J(window,"RexPlugins.UI.BBCodeText",af);var wE={plainText:null,prevProp:null},AE=new Jd;let RE=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,i){this.tags[t]=i}getTag(t){return this.tags[t]}splitText(t,i){for(var n=[],x=0;;){var S=of.exec(t);if(!S)break;var M=S[0],L=of.lastIndex-M.length;if(x<L&&n.push(t.substring(x,L)),i===void 0)n.push(M);else if(i===1){if(kg.test(M)){var F=M.match(Ng);n.push(F[2])}else if(zg.test(M)){var F=M.match(Ug);n.push(F[2])}}x=of.lastIndex}var G=t.length;return x<G&&n.push(t.substring(x,G)),n}tagTextToProp(t,i){var n,x;if(kg.test(t)){var S=t.match(Ng);if(S!=null){var M=S[1],L=this.tags;L.hasOwnProperty(M)?x=L[M]:x={},x._class=M,n=S[2]}}else if(zg.test(t)){var S=t.match(Ug);if(S!=null){var F=S[1];x=LE(F),x._style=F,n=S[2]}}n==null&&(n=t),x==null&&(x={});var G=wE;return G.plainText=n,G.prop=x,G}propToContextStyle(t,i){var n=AE;if(i.hasOwnProperty("img"))n.image=i.img;else{if(n.image=null,i.hasOwnProperty("family")||i.hasOwnProperty("fontFamily")||i.hasOwnProperty("font-family")){var x=i.hasOwnProperty("family")?i.family:i.hasOwnProperty("fontFamily")?i.fontFamily:i["font-family"];n.fontFamily=x}else n.fontFamily=t.fontFamily;if(i.hasOwnProperty("size")||i.hasOwnProperty("fontSize")||i.hasOwnProperty("font-size")){var S=i.hasOwnProperty("size")?i.size:i.hasOwnProperty("fontSize")?i.fontSize:i["font-size"];typeof S=="number"&&(S=`${S}px`),n.fontSize=S}else n.fontSize=t.fontSize;if(i.hasOwnProperty("style")||i.hasOwnProperty("fontStyle")||i.hasOwnProperty("font-style")){var M=i.hasOwnProperty("style")?i.style:i.hasOwnProperty("fontStyle")?i.fontStyle:i["font-style"];n.fontStyle=M}else n.fontStyle=t.fontStyle;if(i.hasOwnProperty("color")||i.hasOwnProperty("font-color")){var L=i.hasOwnProperty("color")?i.color:i["font-color"];n.color=L}else n.color=t.color;if(i.hasOwnProperty("stroke")){var F=i.stroke;n.stroke=F.hasOwnProperty("color")?F.color:t.stroke,n.strokeThickness=F.hasOwnProperty("thickness")?F.thickness:t.strokeThickness}else n.stroke=t.stroke,n.strokeThickness=t.strokeThickness}if(i.hasOwnProperty("shadow")){var G=i.shadow;n.shadowColor=G.hasOwnProperty("color")?G.color:t.shadowColor,n.shadowOffsetX=G.hasOwnProperty("offsetX")?G.offsetX:t.shadowOffsetX,n.shadowOffsetY=G.hasOwnProperty("offsetY")?G.offsetY:t.shadowOffsetY,n.shadowBlur=G.hasOwnProperty("blur")?G.blur:t.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0}else n.shadowColor=t.shadowColor,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY,n.shadowBlur=t.shadowBlur,n.shadowStroke=t.shadowStroke,n.shadowFill=t.shadowFill;if(i.hasOwnProperty("u")||i.hasOwnProperty("underline")){var X=i.hasOwnProperty("u")?i.u:i.underline;n.underlineColor=X.hasOwnProperty("color")?X.color:t.underlineColor,n.underlineThickness=X.hasOwnProperty("thickness")?X.thickness:t.underlineThickness,n.underlineOffset=X.hasOwnProperty("offset")?X.offset:t.underlineOffset}else n.underlineColor=t.underlineColor,n.underlineThickness=t.underlineThickness,n.underlineOffset=t.underlineOffset;if(i.hasOwnProperty("s")||i.hasOwnProperty("strikethrough")){var Q=i.hasOwnProperty("s")?i.s:i.strikethrough;n.strikethroughColor=Q.hasOwnProperty("color")?Q.color:t.strikethroughColor,n.strikethroughThickness=Q.hasOwnProperty("thickness")?Q.thickness:t.strikethroughThickness,n.strikethroughOffset=Q.hasOwnProperty("offset")?Q.offset:t.strikethroughOffset}else n.strikethroughColor=t.strikethroughColor,n.strikethroughThickness=t.strikethroughThickness,n.strikethroughOffset=t.strikethroughOffset;return i.hasOwnProperty("bgcolor")?n.bgcolor=i.bgcolor:n.bgcolor=null,i.hasOwnProperty("spacing")?n.letterSpacing=i.spacing:n.letterSpacing=t.letterSpacing,n}getStrokeThinkness(t,i){var n;if(i.hasOwnProperty("stroke")){var x=i.stroke;n=x.hasOwnProperty("thickness")?x.thickness:t.strokeThickness}else n=t.strokeThickness;return n}getLetterSpacing(t,i){var n;return i.hasOwnProperty("spacing")?n=i.spacing:n=t.letterSpacing,n}propToTagText(t,i,n){return i.hasOwnProperty("_class")?t===""&&this.isTextTag(i._class)?"":`<class='${i._class}'>${t}</class>`:i.hasOwnProperty("_style")?`<style='${i._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var i=this.tags[t];return i?i.img==null:!1}};var LE=function(e){e=e.split(";");for(var t={},i,n,x,S=0,M=e.length;S<M;S++)if(i=e[S].split(":"),n=i[0],x=i[1],!(Gg(n)||Gg(x))){switch(n){case"stroke":var L=x.split(" "),F=L.length;x={},F>=1&&(x.color=L[0]),F>=2&&(x.thickness=parseInt(L[1].replace("px","")));break;case"shadow":var L=x.split(" "),F=L.length;x={},F>=1&&(x.color=L[0]),F>=2&&(x.offsetX=parseInt(L[1].replace("px",""))),F>=3&&(x.offsetY=parseInt(L[2].replace("px",""))),F>=4&&(x.blur=parseInt(L[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var L=x.split(" "),F=L.length;x={},F>=1&&(x.color=L[0]),F>=2&&(x.thickness=parseInt(L[1].replace("px",""))),F>=3&&(x.offset=parseInt(L[2].replace("px",""))),n==="underline"?n="u":n==="strikethrough"&&(n="s");break;case"y":case"spacing":x=parseFloat(x);break}t[n]=x}return t},Gg=function(e){return e=e.replace(bE,""),e.length===0},of=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,kg=/<\s*class=/i,Ng=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,zg=/<\s*style=/i,Ug=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,bE=/^\s+|\s+$/;const OE=Phaser.Utils.Objects.GetValue;class Vg extends nf{constructor(t,i,n,x,S){var M=OE(S,"tags",void 0),L=new RE(M);super(t,i,n,x,S,"rexTagText",L)}addTag(t,i){return this.parser.addTag(t,i),this.updateText(!0)}addTags(t){for(var i in t)this.parser.addTag(i,t[i]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}W.register("tagText",function(e,t,i,n){var x=new Vg(this.scene,e,t,i,n);return this.scene.add.existing(x),x}),J(window,"RexPlugins.UI.TagText",Vg);const Gh=Phaser.Utils.Objects.GetValue;var kh=function(e,t){return t===void 0?e:e[t]},mr=function(e,t,i){e===void 0&&(e={}),t===void 0&&(t=0);var n=typeof t;return n==="string"?e[t]=i:n==="number"?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=Gh(t,"left",0),e.right=Gh(t,"right",0),e.top=Gh(t,"top",0),e.bottom=Gh(t,"bottom",0)),e};let hf=class{constructor(t,i){this.setParent(t),this.type=i,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,i){return!1}};Object.assign(hf.prototype,Li);var FE={renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,i=this.drawY;this.autoRound&&(t=Math.round(t),i=Math.round(i)),e.translate(t,i),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}};const DE=Phaser.Math.RotateAround;var BE=function(e,t,i,n){return n===void 0?n={}:n===!0&&(lf===void 0&&(lf={}),n=lf),n.x=(e-i.drawX)/i.scaleX,n.y=(t-i.drawY)/i.scaleY,i.rotation!==0&&DE(n,0,0,-i.rotation),n},lf;const IE=Phaser.Geom.Rectangle;var GE=function(e,t){if(this.width===0||this.height===0)return!1;var i=BE(e,t,this,!0);return kE(this).contains(i.x,i.y)},kE=function(e){Nh===void 0&&(Nh=new IE);var t=e.drawTLX,i=e.drawTLY;return Nh.setTo(t,i,e.drawTRX-t,e.drawBLY-i),Nh},Nh;const NE=Phaser.Math.RotateAround;var Xg=function(e,t,i,n){return n===void 0?n={}:n===!0&&(uf===void 0&&(uf={}),n=uf),n.x=t,n.y=i,e.rotation!==0&&NE(n,0,0,e.rotation),n.x=n.x*e.scaleX+e.drawX,n.y=n.y*e.scaleY+e.drawY,n},uf;const Wg=Phaser.GameObjects.Components.TransformMatrix;var zE=function(e,t,i,n){n===void 0?n={}:n===!0&&(n=UE);var x=t-e.width*e.originX,S=i-e.height*e.originY;return to===void 0&&(to=new Wg,Yg=new Wg),e.parentContainer?e.getWorldTransformMatrix(to,Yg):to.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),to.transformPoint(x,S,n),n},to,Yg,UE={},VE=function(e,t,i,n,x){var S=Xg(t,i,n,!0),M=zE(e,S.x,S.y,x);return M},Hg=function(e,t,i,n,x){typeof i!="number"&&(x=i,i=0,n=0);var S=t.drawCenterX+i,M=t.drawCenterY+n;return VE(e,t,S,M,x)},XE=function(e,t,i){return Hg(this.parent,this,e,t,i)},$g={contains:GE,getWorldPosition:XE};Object.assign($g,FE);const WE=Phaser.Math.DegToRad,YE=Phaser.Math.RadToDeg,zh=Phaser.Utils.Objects.GetValue;class dn extends hf{constructor(t,i){super(t,i),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setInitialPosition(t,i){return this.x0=t,this.y0=i,this}setScrollFactorX(t){return this.scrollFactorX=t,this}setScrollFactorY(t){return this.scrollFactorY=t,this}setScrollFactor(t,i){return i===void 0&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return YE(this._rotation)}set angle(t){this.rotation=WE(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=zh(t,"width",void 0),n=zh(t,"height",void 0),x=zh(t,"scaleX",void 0),S=zh(t,"scaleY",void 0);return i!==void 0?n===void 0&&S===void 0?this.setWidth(i,!0):this.setWidth(i):x!==void 0&&this.setScaleX(x),n!==void 0?i===void 0&&x===void 0?this.setHeight(n,!0):this.setHeight(n):S!==void 0&&this.setScaleY(S),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+t}get drawY(){var t=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+t}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(dn.prototype,$g);var xr=function(e,t,i){return t.hasOwnProperty(e)?t[e]:i[e]};const fn=Phaser.Utils.Objects.GetValue;class HE extends dn{constructor(t,i){super(t,"background"),this.setScrollFactor(0),this.setColor(fn(i,"color",null),fn(i,"color2",null),fn(i,"horizontalGradient",!0)),this.setStroke(fn(i,"stroke",null),fn(i,"strokeThickness",2)),this.setCornerRadius(fn(i,"cornerRadius",0),fn(i,"cornerIteration",null))}set color(t){t=Yt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Yt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,n){return n===void 0&&(n=!0),this.color=t,this.color2=i,this.horizontalGradient=n,this}set stroke(t){t=Yt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return t!=null&&i===void 0&&(i=2),this.stroke=t,this.strokeThickness=i,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,xr("color2",t,this),xr("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,xr("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,xr("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,i){return this.cornerRadius=t,this.cornerIteration=i,this}renderContent(){$d(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const yr=Phaser.Utils.Objects.GetValue;class $E extends dn{constructor(t,i){super(t,"innerbounds"),this.setScrollFactor(0),this.setColor(yr(i,"color",null),yr(i,"color2",null),yr(i,"horizontalGradient",!0)),this.setStroke(yr(i,"stroke",null),yr(i,"strokeThickness",2))}set color(t){t=Yt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Yt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,n){return n===void 0&&(n=!0),this.color=t,this.color2=i,this.horizontalGradient=n,this}set stroke(t){t=Yt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return t!=null&&i===void 0&&(i=2),this.stroke=t,this.strokeThickness=i,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,yr(t,"color2",null),yr(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,yr(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,i=t.left,n=t.top,x=this.parent.width-t.left-t.right,S=this.parent.height-t.top-t.bottom,M=this.context;if(this.color!=null){var L;if(this.color2!=null){var F;this.horizontalGradient?F=M.createLinearGradient(0,0,x,0):F=M.createLinearGradient(0,0,0,S),F.addColorStop(0,this.color),F.addColorStop(1,this.color2),L=F}else L=this.color;M.fillStyle=L,M.fillRect(i,n,x,S)}this.stroke!=null&&this.strokeThickness>0&&(M.strokeStyle=this.stroke,M.lineWidth=this.strokeThickness,M.strokeRect(i,n,x,S))}}const Oe=Phaser.Utils.Objects.GetValue;class Uh{constructor(t,i){this.parent=t,this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(Oe(t,"bold",!1)),this.setItalic(Oe(t,"italic",!1)),this.setFontSize(Oe(t,"fontSize","16px")),this.setFontFamily(Oe(t,"fontFamily","Courier")),this.setColor(Oe(t,"color","#fff")),this.setStrokeStyle(Oe(t,"stroke",null),Oe(t,"strokeThickness",0)),this.setShadow(Oe(t,"shadowColor",null),Oe(t,"shadowOffsetX",0),Oe(t,"shadowOffsetY",0),Oe(t,"shadowBlur",0)),this.setOffset(Oe(t,"offsetX",0),Oe(t,"offsetY",0)),this.setSpace(Oe(t,"leftSpace",0),Oe(t,"rightSpace",0)),this.setAlign(Oe(t,"align",void 0)),this.setBackgroundColor(Oe(t,"backgroundColor",null)),this.setBackgroundHeight(Oe(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(Oe(t,"backgroundBottomY",void 0)),this.setBackgroundLeftX(Oe(t,"backgroundLeftX",0)),this.setBackgroundRightX(Oe(t,"backgroundRightX",0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(xr("stroke",t,this),xr("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(xr("shadowOffsetX",t,this),xr("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),t.hasOwnProperty("backgroundLeftX")&&this.setBackgroundLeftX(t.backgroundLeftX),t.hasOwnProperty("backgroundRightX")&&this.setBackgroundRightX(t.backgroundRightX),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new Uh(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=Yt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,i){return this.stroke=Yt(t),i!==void 0&&(this.strokeThickness=i),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=Yt(t),this}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=0),this.shadowOffsetX=t,this.shadowOffsetY=i,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,i,n,x){return this.setShadowColor(t).setShadowOffset(i,n).setShadowBlur(x),this}setBackgroundColor(t){return this.backgroundColor=Yt(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setBackgroundLeftX(t){return this.backgroundLeftX=t,this}setBackgroundRightX(t){return this.backgroundRightX=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,i){return this.setOffsetX(t).setOffsetY(i),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,i){return this.setLeftSpace(t).setRightSpace(i),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var i=this.hasFill,n=this.hasStroke;return t.fillStyle=i?this.color:"#000",t.strokeStyle=n?this.stroke:"#000",t.lineWidth=n?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,i){return this.syncFont(t).syncStyle(t),t.measureText(i)}}var KE=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.fixedWidth===e&&this.fixedHeight===t?this:(this.fixedWidth=e,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,t>0?t:this.height),this)},ZE=function(e,t){var i=this.padding,n=i.left,x=i.right,S=i.top,M=i.bottom;return mr(i,e,t),this.dirty=this.dirty||n!=i.left||x!=i.right||S!=i.top||M!=i.bottom,this},JE=function(e){return kh(this.padding,e)},QE=function(e){return this.textStyle.modify(e),this},jE=function(e){return this.defaultTextStyle.modify(e),this},qE=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},_E=function(e){return this.testString=e,this};const tP=Phaser.Utils.Array.Remove;var eP=function(e){return this.poolManager.free(e),tP(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},iP=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const sP=Phaser.Utils.Array.Remove;var rP=function(e){return sP(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},nP=function(){return this.setText(),this},aP=function(e,t){var i=Array.isArray(e);return t===void 0||t===this.children.length?i?this.children.push(...e):this.children.push(e):i?this.children.splice(t,0,...e):this.children.splice(t,0,e),this.lastAppendedChildren.length=0,i?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this};const Os="text",Kg="image",Zg="drawer",Jg="space",df="command";var Qg=function(e){return e.type===Os&&e.text===`
`},jg=function(e){return e.type===Os&&e.text==="\f"},oP=function(e){return e.type===Os&&e.text===" "},cn=function(e){return e.type===Os},hP=function(e){return e.type===df};class qg extends dn{constructor(t,i,n){super(t,Os),this.updateTextFlag=!1,this.style=new Uh(this,n),this.setText(i)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.clearTextSize();else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var n,x;"actualBoundingBoxAscent"in i?(n=i.actualBoundingBoxAscent,x=i.actualBoundingBoxDescent):(n=0,x=0),this.textHeight=n+x,this.ascent=n,this.descent=x}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(t){return this.textWidth=t.textWidth,this.textHeight=t.textHeight,this.ascent=t.ascent,this.descent=t.descent,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){return this.textWidth===0?!1:super.willRender}renderContent(){var t=this.context,i=this.style;if(i.hasBackgroundColor){t.fillStyle=i.backgroundColor;var n=this.drawTLX+i.backgroundLeftX,x=this.drawTRX+i.backgroundRightX,S=n,M=x-n+1;if(M>0){var L=i.backgroundBottomY;L==null&&(L=this.drawBLY);var F=i.backgroundHeight;F==null&&(F=L-this.drawTLY);var G=L-F;t.fillRect(S,G,M,F)}}var X=i.hasFill,Q=i.hasStroke;!X&&!Q||(i.syncFont(t).syncStyle(t),Q&&(i.syncShadow(t),t.strokeText(this.text,0,0)),X&&(i.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var lP=function(e,t){t&&this.textStyle.modify(t);var i=this.poolManager.allocate(Os);return i===null?i=new qg(this,e,this.textStyle):i.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),i},uP=function(e,t){t&&this.textStyle.modify(t);for(var i=[],n=0,x=e.length;n<x;n++){var S=e.charAt(n),M=this.poolManager.allocate(Os);M===null?M=new qg(this,S,this.textStyle):M.setParent(this).setActive().modifyStyle(this.textStyle).setText(S),i.push(M)}return i},eo=function(e,t){var i=this.createCharChildren(e,t);return this.addChild(i),this},dP=function(e,t){return e===void 0&&(e=""),this.removeChildren(),eo.call(this,e,t),this.dirty=!0,this},fP=function(e,t,i){var n=this.createCharChildren(t,i);return e=this.getCharChildIndex(e,!0),this.addChild(n,e),this},cP=function(e,t){t===void 0&&(t=1);for(var i=0;i<t;i++){var n=this.getCharChildIndex(e,!0);if(n===void 0)break;this.removeChild(this.children[n])}return this},vP=function(e){var t="";return this.forEachCharChild(function(i){t+=i.text},void 0,e),t};Phaser.Display.Canvas.CanvasPool;class pP extends dn{constructor(t,i,n){super(t,Kg),this.setTexture(i,n),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,i){return this.key=t,this.frame=i,this.frameObj=this.scene.sys.textures.getFrame(t,i),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setColor(t){return this.color=t,this}modifyPorperties(t){return t.hasOwnProperty("color")&&this.setColor(t.color),super.modifyPorperties(t),this}renderContent(){Ag(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var gP=function(e,t,i){var n=this.poolManager.allocate(Kg);return n===null?n=new pP(this,e,t):n.setParent(this).setActive().setTexture(e,t),n.modifyPorperties(i),n},_g=function(e,t,i){var n=this.createImageChild(e,t,i);return this.addChild(n),this};class mP extends dn{constructor(t,i,n,x){super(t,Zg),this.setRenderCallback(i),this.setDrawerSize(n,x)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,i){return t===!0?(this.toLocalPosition=!1,t=void 0,i=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),i===void 0&&(i=t),this.drawerWidth=t,this.drawerHeight=i,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var xP=function(e,t,i){var n=this.poolManager.allocate(Zg);return n===null?n=new mP(this,e,t,i):n.setParent(this).setActive().setRenderCallback(e).setDrawerSize(t,i),n},yP=function(e,t,i){var n=this.createDrawerChild(e,t,i);return this.addChild(n),this};let CP=class extends dn{constructor(t,i){super(t,Jg),this.setSpaceWidth(i)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}};var SP=function(e){var t=this.poolManager.allocate(Jg);return t===null?t=new CP(this,e):t.setParent(this).setActive().setSpaceWidth(e),t},t0=function(e){var t=this.createSpaceChild(e);return this.addChild(t),this};class TP extends hf{constructor(t,i,n,x,S){super(t,df),this.setName(i).setParameter(x).setCallback(n,S)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,i){return this.callback=t,this.scope=i,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var EP=function(e,t,i,n){var x=this.poolManager.allocate(df);return x===null?x=new TP(this,e,t,i,n):x.setParent(this).setActive().setName(e).setCallback(t,n).setParameter(i),x},It=function(e,t,i,n){var x=this.createCommandChild(e,t,i,n);return this.addChild(x),this},PP=function(e){return e===void 0?e={}:typeof e=="object"&&(e=ht(e)),this.wrapConfig=e,this},e0=function(e){var t={callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0};return Object.assign(t,e)};const MP={none:0,word:1,char:2,character:2,mix:3};var wP=function(e,t,i,n){n===void 0&&(n={word:[],width:0}),n.word.length=0;for(var x=i===2,S=i===3,M=!x&&!S,L=e.length,F=t,G=n.word,X=0,Q=!1;F<L;){var tt=e[F];if(!tt.renderable){G.push(tt),F++;continue}var _=tt.type===Os?tt.text:null;if(_===null||_===`
`||_==="\f"){F===t&&(G.push(tt),X+=tt.outerWidth);break}if(M){if(G.push(tt),X+=tt.outerWidth,_===" ")break;F++}else if(x){G.push(tt),X+=tt.outerWidth;break}else if(S)if(_a(_)){if(G.push(tt),X+=tt.outerWidth,_===" ")break;F++,Q=!0}else{if(Q)break;G.push(tt),X+=tt.outerWidth;var nt=e[F+1];nt&&nt.type===Os&&nt.text===" "&&(G.push(nt),X+=nt.outerWidth);break}}return n.width=X,n},i0=function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];if(n.align!==void 0)return n.align}},s0=function(e,t,i){if(!(t===0&&i===0))for(var n=0,x=e.length;n<x;n++){var S=e[n];S.renderable&&(S.x+=t,S.y+=i)}},AP=function(e,t,i){for(var n=e.hAlign,x=e.vAlign,S=e.justifyPercentage,M=e.lines,L,F,G=0,X=M.length;G<X;G++){var Q=M[G],tt=Q.width,_=Q.children,nt=i0(_);switch(nt===void 0&&(nt=n),nt){case 0:case"left":L=0;break;case 1:case"center":var lt=t-tt;L=lt/2;break;case 2:case"right":var lt=t-tt;L=lt;break;case 3:case"justify":case"justify-left":var lt=t-tt,ot=lt/t;ot<S&&ff(_,lt),L=0;break;case 4:case"justify-center":var lt=t-tt,ot=lt/t;ot<S?(ff(_,lt),L=0):L=lt/2;break;case 5:case"justify-right":var lt=t-tt,ot=lt/t;ot<S?(ff(_,lt),L=0):L=lt;break;default:L=0;break}var dt=e.linesHeight;switch(x){case 1:case"center":F=(i-dt)/2;break;case 2:case"bottom":F=i-dt;break;default:F=0;break}s0(_,L,F)}},ff=function(e,t){for(var i=t/e.length,n=0,x=e.length;n<x;n++){var S=e[n];S.renderable&&(S.x+=i*n)}},r0=function(){var e=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,i;return"actualBoundingBoxAscent"in e?(t=e.actualBoundingBoxAscent,i=e.actualBoundingBoxDescent):(t=0,i=0),Vh.ascent=t,Vh.descent=i,Vh.height=t+i,Vh},Vh={};const ri=Phaser.Utils.Objects.GetValue;var RP=function(e){var t=ri(e,"start",0);mr(this.wrapPadding,ri(e,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,n=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,x=ri(e,"lineHeight"),S=ri(e,"ascent",x),M;if(x===void 0){var L=ri(e,"useDefaultTextHeight",!1);if(M=ri(e,"maxLines",0),this.fixedHeight>0&&!L){var Zs=this.fixedHeight-i;if(M>0)x=Zs/M;else{var F=r0.call(this);x=F.height,S=F.ascent,M=Math.floor((Zs-S)/x)}}else{var F=r0.call(this);x=F.height,S=F.ascent}}else if(this.fixedHeight>0){if(M=ri(e,"maxLines"),M===void 0){var Zs=this.fixedHeight-i;M=Math.floor(Zs/x)}}else M=ri(e,"maxLines",0);S===void 0&&(S=x);var G=M===0,X=ri(e,"wrapMode");if(X===void 0){var Q=ri(e,"charWrap",!1);X=Q?"char":"word"}typeof X=="string"&&(X=MP[X]);var tt=ri(e,"wrapWidth",void 0);tt===void 0&&(this.fixedWidth>0?tt=this.fixedWidth-n:(tt=1/0,X=0));for(var _=ri(e,"letterSpacing",0),nt=ri(e,"hAlign",0),lt=ri(e,"vAlign",0),ot=ri(e,"justifyPercentage",.25),dt=e0({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:_,maxLines:M,hAlign:nt,vAlign:lt,justifyPercentage:ot,ascent:S,lineHeight:x,wrapWidth:tt,wrapMode:X}),ct=this.children,ft=0,xt=ct.length;ft<xt;ft++)ct[ft].setActive(!1);tt+=_;for(var St=this.padding.left+this.wrapPadding.left,Pt=this.padding.top+this.wrapPadding.top+S,wt=St,bt=Pt,kt=tt,Dt=t,Vt=ct.length,Ht=dt.children,se=dt.lines,Ot=[],ue=0,ge=0,Ee,ze=!1;Dt<Vt;){Ee=wP(ct,Dt,X,Ee);var Ge=Ee.word,oi=Ge.length,Xi=Ee.width+oi*_;Dt+=oi;var Wi=Qg(Ge[0]);ze=jg(Ge[0]);var ws=Wi||ze;if(kt<Xi||ws){if(ws){var Vn=Ge[0];Vn.setActive().setPosition(wt,bt),Ht.push(Vn),Ot.push(Vn)}wt=St,bt+=x,kt=tt,se.push({children:Ot,width:ue}),ge=Math.max(ge,ue),ue=0,Ot=[];var ed=ze||!G&&se.length===M;if(ed)break;if(ws)continue}kt-=Xi,ue+=Xi;for(var ft=0,xt=Ge.length;ft<xt;ft++){var hi=Ge[ft];hi.setActive(),Ht.push(hi),Ot.push(hi),hi.renderable&&(hi.setPosition(wt,bt),wt+=hi.outerWidth+_)}}Ot.length>0&&(se.push({children:Ot,width:ue}),ge=Math.max(ge,ue)),dt.start+=Ht.length,dt.isLastPage=!ze&&dt.start===Vt,dt.maxLineWidth=ge,dt.linesHeight=se.length*x;var yh=this.fixedWidth>0?this.fixedWidth:dt.maxLineWidth+n,Ch=this.fixedHeight>0?this.fixedHeight:dt.linesHeight+i,id=yh-n,Zs=Ch-i;AP(dt,id,Zs),this.setCanvasSize(yh,Ch);for(var ft=0,xt=Ht.length;ft<xt;ft++){var hi=Ht[ft];hi.renderable&&(hi.x0=hi.x,hi.y0=hi.y)}return dt};const LP=Phaser.Utils.Objects.Merge;var bP=function(e){return e===void 0&&(e={}),RP.call(this,LP(e,this.wrapConfig))},OP=function(e,t,i){var n=e.hAlign,x=e.vAlign,S,M,L=e.rtl,F=e.lines,G=e.lineWidth,X=e.linesWidth;switch(n){case 1:case"center":S=(t-X)/2;break;case 2:case"right":S=t-X;break;default:S=0;break}L&&(S+=G);for(var Q=0,tt=F.length;Q<tt;Q++){var _=F[L?tt-Q-1:Q],nt=_.children,lt=_.height,ot=i0(nt);switch(ot===void 0&&(ot=x),ot){case 1:case"center":M=(i-lt)/2;break;case 2:case"bottom":M=i-lt;break;default:M=0;break}s0(nt,S,M),S+=G}};const xi=Phaser.Utils.Objects.GetValue;var FP=function(e){var t=xi(e,"start",0);mr(this.wrapPadding,xi(e,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,n=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,x=xi(e,"lineWidth",void 0),S;if(x===void 0)if(S=xi(e,"maxLines",0),this.fixedWidth>0){var Wi=this.fixedWidth-n;x=Wi/S}else x=0;else if(this.fixedWidth>0){if(S=xi(e,"maxLines",void 0),S===void 0){var Wi=this.fixedWidth-n;S=Math.floor(Wi/x)+1}}else S=xi(e,"maxLines",0);var M=S===0,L=xi(e,"fixedCharacterHeight",void 0);if(L===void 0){var F=xi(e,"charPerLine",void 0);if(F!==void 0){var ws=this.fixedHeight-i;L=Math.floor(ws/F)}}var G=xi(e,"wrapHeight",void 0);G===void 0&&(this.fixedHeight>0?G=this.fixedHeight-i:G=1/0);for(var X=xi(e,"letterSpacing",0),Q=xi(e,"rtl",!0),tt=xi(e,"hAlign",Q?2:0),_=xi(e,"vAlign",0),nt=e0({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:X,maxLines:S,hAlign:tt,vAlign:_,lineWidth:x,fixedCharacterHeight:L,wrapHeight:G,rtl:Q}),lt=this.children,ot=0,dt=lt.length;ot<dt;ot++)lt[ot].setActive(!1);G+=X;for(var ct=this.padding.left+this.wrapPadding.left,ft=this.padding.top+this.wrapPadding.top,xt=ct,St=ft,Pt=G,wt=t,bt=lt.length,kt=nt.children,Dt=nt.lines,Vt=[],Ht=0,se=0;wt<bt;){var Ot=lt[wt];if(wt++,!Ot.renderable){Ot.setActive(),kt.push(Ot),Vt.push(Ot);continue}var ue=(L!==void 0?L:Ot.height)+X,ge=Qg(Ot),Ee=jg(Ot),ze=ge||Ee;if(Pt<ue||ze){ge&&(Ot.setActive().setPosition(xt,St).setOrigin(.5),kt.push(Ot),Vt.push(Ot)),xt=ct,St=ft,Pt=G,Dt.push({children:Vt,height:Ht}),se=Math.max(se,Ht),Ht=0,Vt=[];var Ge=Ee||!M&&Dt.length===S;if(Ge)break;if(ze)continue}Pt-=ue,Ht+=ue,Ot.setActive().setPosition(xt,St).setOrigin(.5),kt.push(Ot),Vt.push(Ot),St+=ue}Vt.length>0&&(Dt.push({children:Vt,height:Ht}),se=Math.max(se,Ht)),nt.start+=kt.length,nt.isLastPage=nt.start===bt,nt.maxLineHeight=se,nt.linesWidth=Dt.length*x;var oi=this.fixedWidth>0?this.fixedWidth:nt.linesWidth+n,Xi=this.fixedHeight>0?this.fixedHeight:nt.maxLineHeight+i,Wi=oi-n,ws=Xi-i;OP(nt,Wi,ws),this.setCanvasSize(oi,Xi);for(var ot=0,dt=kt.length;ot<dt;ot++){var Ot=kt[ot];Ot.renderable&&(Ot.x0=Ot.x,Ot.y0=Ot.y)}return nt};const DP=Phaser.Utils.Objects.Merge;var BP=function(e){return e===void 0&&(e={}),FP.call(this,DP(e,this.wrapConfig))};const n0=Phaser.Utils.Objects.GetValue;var IP=function(e){var t=n0(this.wrapConfig,"callback");return t||(t=n0(e,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,e)},GP={setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}},kP={setTextOX(e){return e===this._textOX?this:(this._textOX=e,this)},setTextOY(e){return e===this._textOY?this:(this._textOY=e,this)},setTextOXY(e,t){if(!(e===this._textOX&&t===this._textOY))return this._textOX=e,this._textOY=t,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,t){return this.setTextOXY(this._textOX+e,this._textOY+t),this}},NP=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var e,t=0,i=this.children.length;t<i;t++)e=this.children[t],e.active&&e.render();this.innerBounds.active&&this.innerBounds.render()},zP=function(e,t,i){i===void 0&&(i=!0);for(var n=this.children.filter(function(F){return!(i&&!F.active)}),x=0,S=n.length;x<S;x++){var M=n[x],L;if(t?L=e.call(this,M,x,n):L=e(M,x,n),L)break}return this},UP=function(e,t,i){i===void 0&&(i=!0);for(var n=this.children.filter(function(F){return!(i&&!F.active||!F.renderable||F.removed)}),x=0,S=n.length;x<S;x++){var M=n[x],L;if(t?L=e.call(this,M,x,n):L=e(M,x,n),L)break}return this},VP=function(e,t,i){i===void 0&&(i=!0);for(var n=this.children.filter(function(F){return!(i&&!F.active||!cn(F)||F.removed)}),x=0,S=n.length;x<S;x++){var M=n[x],L;if(t?L=e.call(this,M,x,n):L=e(M,x,n),L)break}return this},XP=function(){return this.children};const WP=Phaser.Utils.Array.GetAll;var YP=function(){return WP(this.children,"active",!0)},HP=function(e,t){return t===void 0&&(t=[]),this.forEachCharChild(function(i){t.push(i)},void 0,e),t},$P=function(){return this.lastAppendedChildren},KP=function(e,t,i,n){typeof t!="number"&&(n=t,t=0,i=0);var x=e.drawCenterX+t,S=e.drawCenterY+i;return Xg(e,x,S,n)};const ZP=Phaser.Math.Distance.BetweenPointsSquared;var JP=function(e,t){var i={x:e,y:t},n=1/0,x=null;return this.forEachRenderableChild(function(S){var M=ZP(i,KP(S,!0));n>M&&(n=M,x=S)}),x},QP=function(e,t,i,n){return typeof e=="number"&&(e=this.getCharChild(e,!0)),Hg(this,e,t,i,n)},jP=function(){for(var e=this.children,t=0,i=0,n=0,x=e.length;n<x;n++){var S=e[n];if(!(!S.renderable||!S.active||!S.visible)){var M=S.x0!==void 0?S.x0:S.x,L=S.y0!==void 0?S.y0:S.y;t=Math.max(t,M),i=Math.max(i,L)}}var F=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,G=i+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==F||this.height!==G)&&(this.dirty=!0,this.setCanvasSize(F,G)),this},qP=function(e,t){t===void 0&&(t=!0);for(var i=this.children,n=0,x=i.length;n<x;n++){var S=i[n];if(!(t&&!S.active)&&cn(S)&&!S.removed){if(e===0)return n;e--}}},_P=function(e,t){t===void 0&&(t=!0);for(var i=this.children,n=0,x=i.length;n<x;n++){var S=i[n];if(!(t&&!S.active)&&cn(S)&&!S.removed){if(e===0)return S;e--}}},tM=function(e,t){if(typeof e!="number"&&(e=this.children.indexOf(e),e<0))return null;t===void 0&&(t=!0);var i=this.children;e>=i.length&&(e=i.length);for(var n=0,x=0;x<e;x++){var S=i[x];t&&!S.active||cn(S)&&!S.removed&&n++}return n},eM=function(e){return e===void 0&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},cf=function(n,t,i){for(var n=n,x=0,S=n.length;x<S;x++){var M=n[x];if(!(!M.active||!M.renderable)&&M.contains(t,i))return M}return null},iM=function(){return this.on("pointerdown",sM,this).on("pointerdown",rM,this).on("pointermove",vf,this).on("pointerover",vf,this).on("pointerout",function(e,t){vf.call(this,e,null,null,t)},this),this},sM=function(e,t,i,n){if(this.childrenInteractiveEnable){var x=cf(this.children,t,i);x&&this.emit("child.pointerdown",x,e,t,i,n)}},rM=function(e,t,i,n){if(this.childrenInteractiveEnable){var x=cf(this.children,t,i);x&&this.emit("child.pointerup",x,e,t,i,n)}},vf=function(e,t,i,n){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,e,t,i,n),this.lastOverChild=null);return}var x=cf(this.children,t,i);x!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,e,t,i,n),x!==null&&this.emit("child.pointerover",x,e,t,i,n),this.lastOverChild=x)}};const nM=Phaser.GameObjects.GameObject;var aM=function(e,t,i){var n=!!this.input;return nM.prototype.setInteractive.call(this,e,t,i),n||iM.call(this),this};const oM=Phaser.Utils.Array.BringToTop,hM=Phaser.Utils.Array.SendToBack,lM=Phaser.Utils.Array.MoveUp,uM=Phaser.Utils.Array.MoveDown,dM=Phaser.Utils.Array.MoveAbove,fM=Phaser.Utils.Array.MoveBelow;var cM={moveChildToFist(e){return hM(this.children,e),this},moveChildToLast(e){return oM(this.children,e),this},movechildUp(e){return lM(this.children,e),this},movechildDown(e){return uM(this.children,e),this},movechildAbove(e,t){return dM(this.children,e,t),this},movechildBelow(e,t){return fM(this.children,e,t),this}},vM={setBackgroundColor(e,t,i){return this.background.setColor(e,t,i),this},setBackgroundStroke(e,t){return this.background.setStroke(e,t),this},setBackgroundCornerRadius(e,t){return this.background.setCornerRadius(e,t),this}},pM={setInnerBoundsColor(e,t,i){return this.innerBounds.setColor(e,t,i),this},setInnerBoundsStroke(e,t){return this.innerBounds.setStroke(e,t),this}},a0={setFixedSize:KE,setPadding:ZE,getPadding:JE,modifyTextStyle:QE,modifyDefaultTextStyle:jE,resetTextStyle:qE,setTestString:_E,removeChild:eP,removeChildren:iP,popChild:rP,clearContent:nP,addChild:aP,createCharChild:lP,createCharChildren:uP,setText:dP,appendText:eo,insertText:fP,removeText:cP,getText:vP,createImageChild:gP,appendImage:_g,createDrawerChild:xP,appendDrawer:yP,createSpaceChild:SP,appendSpace:t0,createCommandChild:EP,appendCommand:It,setWrapConfig:PP,runWordWrap:bP,runVerticalWrap:BP,runWrap:IP,renderContent:NP,forEachChild:zP,forEachRenderableChild:UP,forEachCharChild:VP,getChildren:XP,getActiveChildren:YP,getCharChildren:HP,getLastAppendedChildren:$P,getNearestChild:JP,getCharWorldPosition:QP,setToMinSize:jP,getCharChildIndex:qP,getCharChild:_P,getCharIndex:tM,setChildrenInteractiveEnable:eM,setInteractive:aM};Object.assign(a0,cM,vM,pM,GP,kP);const gM=Phaser.Utils.Objects.GetFastValue;var mM={};class xM{constructor(t){this.pools=gM(t,"pools",mM)}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new mt),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,n=t.length;i<n;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const pf=Phaser.Utils.Objects.IsPlainObject,He=Phaser.Utils.Objects.GetValue;class na extends cr{constructor(t,i,n,x,S,M,L){pf(i)?(L=i,i=He(L,"x",0),n=He(L,"y",0),x=He(L,"width",0),S=He(L,"height",0),M=He(L,"resolution",1)):pf(x)?(L=x,x=He(L,"width",0),S=He(L,"height",0),M=He(L,"resolution",1)):pf(M)&&(L=M,M=He(L,"resolution",1));var F=x===0?1:x,G=S===0?1:S;super(t,i,n,F,G,M),this.type="rexDynamicText",this.autoRound=!0,this.padding=mr(),this.wrapPadding=mr();var X=He(L,"style",void 0);this.defaultTextStyle=new Uh(null,X),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(He(L,"testString","|Mqgy")),this._textOX=0,this._textOY=0,this.background=new HE(this,He(L,"background",void 0)),this.innerBounds=new $E(this,He(L,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new xM(L),this.setFixedSize(x,S),this.setPadding(He(L,"padding",0)),this.setWrapConfig(He(L,"wrap",void 0)),this.setChildrenInteractiveEnable(He(L,"childrenInteractive",!1));var Q=He(L,"text",void 0);Q&&this.setText(Q)}updateTexture(){return super.updateTexture(function(){this.renderContent()},this),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,i){return this.setFixedSize(t,i),this}get textOX(){return this._textOX}set textOX(t){this.setTextOX(t)}get textOY(){return this._textOY}set textOY(t){this.setTextOY(t)}}Object.assign(na.prototype,a0),W.register("dynamicText",function(e,t,i,n,x){var S=new na(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.DynamicText",na);var io={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},yM={hasProperty(e){var t=this.gameObject;if(t.hasOwnProperty(e))return!0;var i=t[e];return i!==void 0},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(tt){var t=tt.property,i=tt.value,n=tt.duration,x=tt.delay,S=tt.ease,M=tt.repeat,L=tt.yoyo,F=tt.from,G=tt.complete,X=tt.target;if(n===void 0&&(n=1e3),x===void 0&&(x=0),S===void 0&&(S="Linear"),M===void 0&&(M=0),L===void 0&&(L=!1),X===void 0&&(X=this.gameObject),F){var Q=i;i=X[t],X[t]=Q}var tt={targets:X,duration:n,delay:x,ease:S,repeat:M,yoyo:L,onComplete:G};return tt[t]=i,this.addTweenTask(t,tt),this},addTweenTask(e,t){var i=this.tweens,n=i[e];n&&n.remove();var x=t.onComplete;return t.onComplete=function(){i[e].remove(),i[e]=null,x&&x(t.targets,e)},n=this.scene.tweens.add(t),n.timeScale=this.timeScale,i[e]=n,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e=this.tweens,t;for(var i in e)t=e[i],t&&t.remove(),e[i]=null;return this}},CM={hasMethod(e){return typeof this.gameObject[e]=="function"},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var i=this.gameObject;return i[e].apply(i,t),this}},SM={hasData(e){var t=this.gameObject;return t.data?t.data.has(e):!1},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};class gf{constructor(t,i,n){this.GOManager=t,this.tweens={},this.effects={},this.setGO(i,n)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,i){return t.goName=i,t.goType=this.GOManager.name,t.bob=this,this.gameObject=t,this.name=i,this.freeTweens(),this}setTimeScale(t){var i=this.tweens;for(var n in i){var x=i[n];x&&(x.timeScale=t)}return this}}Object.assign(gf.prototype,yM,CM,SM);var so=function(e){for(var t in e)return!1;return!0},vn=function(e){return e&&e.charAt(0)!=="!"},TM={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(vn(e))return this.bobs[e];t===void 0&&(t=[]),e&&(e=e.substring(1));for(var i in this.bobs)e&&i===e||t.push(this.bobs[i]);return t},getFitst(e){e&&e.charAt(0)==="!"&&(e=e.substring(1));for(var t in this.bobs)if(!(e&&e===t))return this.bobs[t];return null},getGO(e,t){var i=this.get(e);if(i)if(Array.isArray(i)){t===void 0&&(t=[]);var n=i;return n.forEach(function(x){t.push(x.gameObject)}),t}else return i.gameObject;else return null},forEachGO(e,t){for(var i in this.bobs){var n=this.bobs[i].gameObject,x;if(t?x=e.call(t,n,i,this):x=e(n,i,this),x)break}return this},getAllGO(e){e===void 0&&(e=[]);for(var t in this.bobs){var i=this.bobs[t].gameObject;e.push(i)}return e}},ro=function(e){return e>>16&255},no=function(e){return e>>8&255},ao=function(e){return e&255},o0=function(e,t){return t===void 0&&(t={}),t.r=e>>16&255,t.g=e>>8&255,t.b=e&255,t};const EM=65535,PM=16711935,MM=16776960;var wM=function(e,t){return(t&255)<<16|e&EM},AM=function(e,t){return(t&255)<<8|e&PM},RM=function(e,t){return t&255|e&MM},LM=function(e,t,i,n){return(t&255)<<16|(i&255)<<8|n&255},bM=function(e,t){if(e.hasOwnProperty("tintR"))return e;t===void 0&&(t=16777215);var i=ro(t),n=no(t),x=ao(t);return Object.defineProperty(e,"tint",{get:function(){return t},set:function(S){S=Math.floor(S)&16777215,e.setTint&&e.setTint(S),t!==S&&(t=S,i=ro(t),n=no(t),x=ao(t))}}),Object.defineProperty(e,"tintR",{get:function(){return i},set:function(S){S=Math.floor(S)&255,i!==S&&(i=S,e.tint=wM(t,S))}}),Object.defineProperty(e,"tintG",{get:function(){return n},set:function(S){S=Math.floor(S)&255,n!==S&&(n=S,e.tint=AM(t,S))}}),Object.defineProperty(e,"tintB",{get:function(){return x},set:function(S){S=Math.floor(S)&255,x!==S&&(x=S,e.tint=RM(t,S))}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((i+n+x)/3)},set:function(S){S=Math.floor(S)&255,(i!==S||n!==S||x!==S)&&(i=S,n=S,x=S,e.tint=LM(t,S,S,S))}}),e.tint=t,e};const OM=Phaser.Events.EventEmitter;var FM=function(e){if(e.events)return e;var t=new OM,i=e.x;Object.defineProperty(e,"x",{get:function(){return i},set:function(M){i!==M&&(i=M,t.emit("update",e))}});var n=e.y;Object.defineProperty(e,"y",{get:function(){return n},set:function(M){n!==M&&(n=M,t.emit("update",e))}});var x=e.width;Object.defineProperty(e,"width",{get:function(){return x},set:function(M){x!==M&&(x=M,t.emit("update",e))}});var S=e.height;return Object.defineProperty(e,"height",{get:function(){return S},set:function(M){S!==M&&(S=M,t.emit("update",e))}}),e.events=t,e},DM=function(e,t,i,n,x,S){return S===void 0?S={}:S===!0&&(S=BM),typeof i!="number"&&(i=0,n=0),S.x=x.x+x.width*e+i,S.y=x.y+x.height*t+n,S},BM={},IM=function(e,t,i,n,x,S,M){if(e.hasOwnProperty("vp"))return e;typeof i=="function"&&(M=i,i=void 0),typeof x=="function"&&(M=x,x=void 0),i===void 0&&(i=.5),n===void 0&&(n=.5),x===void 0&&(x=0),S===void 0&&(S=0),M===void 0&&(M=DM),FM(t);var L=t.events;e.vp=t;var F=function(){M(i,n,x,S,t,e)};L.on("update",F),e.once("destroy",function(){L.off("update",F),e.vp=void 0}),Object.defineProperty(e,"vpx",{get:function(){return i},set:function(G){i!==G&&(i=G,F())}}),Object.defineProperty(e,"vpy",{get:function(){return n},set:function(G){n!==G&&(n=G,F())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return x},set:function(G){x!==G&&(x=G,F())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return S},set:function(G){S!==G&&(S=G,F())}}),F()},je=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},Pe=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var i=e._effectSwitchNames,n=0,x=i.length;n<x;n++)e[i[n]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},GM=function(e){if(re(e,"barrel"))return e;var t=je(e);if(!t)return e;var i;return Object.defineProperty(e,"barrel",{get:function(){return i},set:function(n){i!==n&&(i=n,i===null||i===!1?e._barrelEffect&&(t.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=t.addBarrel()),e._barrelEffect.amount=i))}}),e.barrel=null,Pe(e,"barrel"),e},$e=function(e,t,i){if(re(e,t))return e;var n=je(e);if(!n)return e;var x=`_${t}Effect`,S;return Object.defineProperty(e,t,{get:function(){return S},set:function(M){if(S!==M)if(S=M,S===null||S===!1)e[x]&&(n.remove(e[x]),e[x]=void 0);else{e[x]||(e[x]=n.addColorMatrix());var L=e[x];L[t](i===1?M:void 0)}}}),e[t]=null,Pe(e,t),e},kM=function(e){return $e(e,"blackWhite"),e},NM=function(e){if(re(e,"bloomColor"))return e;var t=je(e);if(!t)return e;var i,n=1,x=1,S=1,M=1,L=4;return Object.defineProperty(e,"bloomColor",{get:function(){return i},set:function(F){i!==F&&(i=F,i===null||i===!1?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(i,n,x,S,M,L),t.setPadding(Math.max(n,x)+1)),e._bloom.color=i))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return n},set:function(F){if(n!==F&&(n=F,e._bloom)){var G=Math.max(n,x);t.setPadding(G+1),e._bloom.offsetX=n}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return x},set:function(F){if(x!==F&&(x=F,e._bloom)){var G=Math.max(n,x);t.setPadding(G+1),e._bloom.offsetY=x}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return S},set:function(F){S!==F&&(S=F,e._bloom&&(e._bloom.blurStrength=S))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return M},set:function(F){M!==F&&(M=F,e._bloom&&(e._bloom.strength=M))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return L},set:function(F){L!==F&&(L=F,e._bloom&&(e._bloom.steps=L))}}),e.bloomColor=null,Pe(e,"bloomColor"),e},zM=function(e){if(re(e,"blurColor"))return e;var t=je(e);if(!t)return e;var i,n=0,x=1,S=1,M=1,L=4;return Object.defineProperty(e,"blurColor",{get:function(){return i},set:function(F){i!==F&&(i=F,i===null||i===!1?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(n,x,S,M,i,L),t.setPadding(Math.max(x,S)+1)),e._blur.color=i))}}),Object.defineProperty(e,"blurQuality",{get:function(){return n},set:function(F){n!==F&&(n=F,e._blur&&(e._blur.quality=n))}}),Object.defineProperty(e,"blurX",{get:function(){return x},set:function(F){if(x!==F&&(x=F,e._blur)){var G=Math.max(x,S);t.setPadding(G+1),e._blur.x=x}}}),Object.defineProperty(e,"blurY",{get:function(){return S},set:function(F){if(S!==F&&(S=F,e._blur)){var G=Math.max(x,S);t.setPadding(G+1),e._blur.y=S}}}),Object.defineProperty(e,"blurStrength",{get:function(){return M},set:function(F){M!==F&&(M=F,e._blur&&(e._blur.strength=M))}}),Object.defineProperty(e,"blurSteps",{get:function(){return L},set:function(F){L!==F&&(L=F,e._blur&&(e._blur.steps=L))}}),e.blurColor=null,Pe(e,"blurColor"),e},UM=function(e){if(re(e,"bokehRadius"))return e;var t=je(e);if(!t)return e;var i,n=1,x=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return i},set:function(S){i!==S&&(i=S,i===null||i===!1?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(i,n,x)),e._bokeh.radius=i))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return n},set:function(S){n!==S&&(n=S,e._bokeh&&(e._bokeh.amount=n))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return x},set:function(S){x!==S&&(x=S,e._bokeh&&(e._bokeh.contrast=x))}}),e.bokehRadius=null,Pe(e,"bokehRadius"),e},VM=function(e){return $e(e,"brightness",1),e},XM=function(e){return $e(e,"brown"),e},WM=function(e){if(re(e,"circleColor"))return e;var t=je(e);if(!t)return e;var i,n=8,x=0,S=.4,M=1,L=.005;return Object.defineProperty(e,"circleColor",{get:function(){return i},set:function(F){i!==F&&(i=F,i===null||i===!1?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(n,i,x,M,L),e.circleBackgroundAlpha=S),e._circle.color=i))}}),Object.defineProperty(e,"circleThickness",{get:function(){return n},set:function(F){n!==F&&(n=F,e._circle&&(e._circle.thickness=n))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return x},set:function(F){x!==F&&(x=F,e._circle&&(e._circle.backgroundColor=x))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return S},set:function(F){S!==F&&(S=F,e._circle&&(e._circle.glcolor2[3]=S))}}),Object.defineProperty(e,"circleScale",{get:function(){return M},set:function(F){M!==F&&(M=F,e._circle&&(e._circle.scale=M))}}),Object.defineProperty(e,"circleFeather",{get:function(){return L},set:function(F){L!==F&&(L=F,e._circle&&(e._circle.feather=L))}}),e.circleColor=null,Pe(e,"circleColor"),e},YM=function(e){return $e(e,"contrast",1),e},HM=function(e){return $e(e,"desaturate",1),e},$M=function(e){return $e(e,"desaturateLuminance"),e},KM=function(e){if(re(e,"displacementKey"))return e;var t=je(e);if(!t)return e;var i,n=.005,x=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return i},set:function(S){i!==S&&(i=S,i===null||i===!1?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(i,n,x)),e._displacement.setTexture(i)))}}),Object.defineProperty(e,"displacementX",{get:function(){return n},set:function(S){n!==S&&(n=S,e._displacement&&(e._displacement.x=n))}}),Object.defineProperty(e,"displacementY",{get:function(){return x},set:function(S){x!==S&&(x=S,e._displacement&&(e._displacement.y=x))}}),e.displacementKey=null,Pe(e,"displacementKey"),e},ZM=function(e){if(re(e,"glowColor"))return e;var t=je(e);if(!t)return e;var i,n=4,x=0;return Object.defineProperty(e,"glowColor",{get:function(){return i},set:function(S){i!==S&&(i=S,i===null||i===!1?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(i,n,x),t.setPadding(n+1)),e._glow.color=i))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return n},set:function(S){n!==S&&(n=S,e._glow&&(t.setPadding(n+1),e._glow.outerStrength=n))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return x},set:function(S){x!==S&&(x=S,e._glow&&(e._glow.innerStrength=x))}}),e.glowColor=null,Pe(e,"glowColor"),e},JM=function(e){if(re(e,"gradientColor"))return e;var t=je(e);if(!t)return e;var i,n,x=.5,S=0,M=0,L=0,F=1,G=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[i,n]},set:function(X){var Q,tt;X===null||X===!1?(Q=null,tt=null):(Q=X[0],tt=X[1]),!(i===Q&&n===tt)&&(i=Q,n=tt,i===null||i===!1?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(i,n,x,S,M,L,F,G)),e._gradient.color1=i,e._gradient.color2=n))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return i},set:function(X){if(X===null||X===!1){e.gradientColor=X;return}i!==X&&(i=X,e._gradient&&(e._gradient.color1=i))}}),Object.defineProperty(e,"gradientColor2",{get:function(){return n},set:function(X){if(X===null||X===!1){e.gradientColor=X;return}n!==X&&(n=X,e._gradient&&(e._gradient.color2=n))}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return x},set:function(X){x!==X&&(x=X,e._gradient&&(e._gradient.alpha=x))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return S},set:function(X){S!==X&&(S=X,e._gradient&&(e._gradient.fromX=S))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return M},set:function(X){M!==X&&(M=X,e._gradient&&(e._gradient.fromY=M))}}),Object.defineProperty(e,"gradientToX",{get:function(){return L},set:function(X){L!==X&&(L=X,e._gradient&&(e._gradient.toX=L))}}),Object.defineProperty(e,"gradientToY",{get:function(){return F},set:function(X){F!==X&&(F=X,e._gradient&&(e._gradient.toY=F))}}),Object.defineProperty(e,"gradientSize",{get:function(){return G},set:function(X){G!==X&&(G=X,e._gradient&&(e._gradient.size=G))}}),e.gradientColor=null,Pe(e,"gradientColor"),e},QM=function(e){return $e(e,"grayscale",1),e},jM=function(e){return $e(e,"hue",1),e},qM=function(e){return $e(e,"kodachrome"),e},_M=function(e){return $e(e,"lsd"),e},tw=function(e){return $e(e,"negative"),e},ew=function(e){if(re(e,"pixelate"))return e;var t=je(e);if(!t)return e;var i;return Object.defineProperty(e,"pixelate",{get:function(){return i},set:function(n){i!==n&&(i=n,i===null||i===!1?e._pixelateEffect&&(t.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=t.addPixelate()),e._pixelateEffect.amount=i))}}),e.pixelate=null,Pe(e,"pixelate"),e},iw=function(e){return $e(e,"polaroid"),e},sw=function(e){if(re(e,"revealLeft"))return e;var t=je(e);if(!t)return e;var i,n,x,S,M=.1,L=function(){i=null,n=null,x=null,S=null},F=function(G){G._revealEffect&&(t.remove(G._revealEffect),G._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return i},set:function(G){i!==G&&(L(),i=G,i===null||i===!1?F(e):(e._revealEffect||(e._revealEffect=t.addReveal(M,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=i))}}),Object.defineProperty(e,"revealRight",{get:function(){return n},set:function(G){n!==G&&(L(),n=G,n===null||n===!1?F(e):(e._revealEffect||(e._revealEffect=t.addReveal(M,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=n))}}),Object.defineProperty(e,"revealUp",{get:function(){return x},set:function(G){x!==G&&(L(),x=G,x===null||x===!1?F(e):(e._revealEffect||(e._revealEffect=t.addReveal(M,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=x))}}),Object.defineProperty(e,"revealDown",{get:function(){return S},set:function(G){S!==G&&(L(),S=G,S===null||S===!1?F(e):(e._revealEffect||(e._revealEffect=t.addReveal(M,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=S))}}),Object.defineProperty(e,"revealWidth",{get:function(){return M},set:function(G){M!==G&&(M=G,e._revealEffect&&(e._revealEffect.wipeWidth=M))}}),e.revealLeft=null,Pe(e,"revealLeft"),Pe(e,"revealRight"),Pe(e,"revealUp"),Pe(e,"revealDown"),e},rw=function(e){return $e(e,"saturate",1),e},nw=function(e){return $e(e,"sepia"),e},aw=function(e){if(re(e,"shadowColor"))return e;var t=je(e);if(!t)return e;var i,n=0,x=0,S=.1,M=1,L=6,F=1;return Object.defineProperty(e,"shadowColor",{get:function(){return i},set:function(G){i!==G&&(i=G,i===null||i===!1?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(n,x,S,M,i,L,F)),e._shadow.color=i))}}),Object.defineProperty(e,"shadowX",{get:function(){return n},set:function(G){n!==G&&(n=G,e._shadow&&(e._shadow.x=n))}}),Object.defineProperty(e,"shadowY",{get:function(){return x},set:function(G){x!==G&&(x=G,e._shadow&&(e._shadow.y=x))}}),Object.defineProperty(e,"decay",{get:function(){return S},set:function(G){S!==G&&(S=G,e._shadow&&(e._shadow.decay=S))}}),Object.defineProperty(e,"shadowPower",{get:function(){return M},set:function(G){M!==G&&(M=G,e._shadow&&(e._shadow.power=M))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return L},set:function(G){L!==G&&(L=G,e._shadow&&(e._shadow.samples=L))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return F},set:function(G){F!==G&&(F=G,e._shadow&&(e._shadow.intensity=F))}}),e.shadowColor=null,Pe(e,"shadowColor"),e},ow=function(e){return $e(e,"shiftToBGR"),e},hw=function(e){if(re(e,"shineSpeed"))return e;var t=je(e);if(!t)return e;var i,n=.5,x=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return i},set:function(S){i!==S&&(i=S,i===null||i===!1?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(i,n,x)),e._shine.speed=i))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return n},set:function(S){n!==S&&(n=S,e._shine&&(e._shine.lineWidth=n))}}),Object.defineProperty(e,"shineGradient",{get:function(){return x},set:function(S){x!==S&&(x=S,e._shine&&(e._shine.gradient=x))}}),e.shineSpeed=null,Pe(e,"shineSpeed"),e},lw=function(e){return $e(e,"technicolor"),e},uw=function(e){if(re(e,"tiltShiftRadius"))return e;var t=je(e);if(!t)return e;var i,n=1,x=.2,S=1,M=1,L=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return i},set:function(F){i!==F&&(i=F,i===null||i===!1?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(i,n,x,S,M,L)),e._tiltShift.radius=i))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return n},set:function(F){n!==F&&(n=F,e._tiltShift&&(e._tiltShift.amount=n))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return x},set:function(F){x!==F&&(x=F,e._tiltShift&&(e._tiltShift.contrast=x))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return S},set:function(F){S!==F&&(S=F,e._tiltShift&&(e._tiltShift.blurX=S))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return M},set:function(F){M!==F&&(M=F,e._tiltShift&&(e._tiltShift.blurY=M))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return L},set:function(F){L!==F&&(L=F,e._tiltShift&&(e._tiltShift.strength=L))}}),e.tiltShiftRadius=null,Pe(e,"tiltShiftRadius"),e},dw=function(e){if(re(e,"vignetteRadius"))return e;var t=je(e);if(!t)return e;var i,n=.5,x=.5,S=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return i},set:function(M){i!==M&&(i=M,i===null||i===!1?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(n,x,i,S)),e._vignette.radius=i))}}),Object.defineProperty(e,"vignetteX",{get:function(){return n},set:function(M){n!==M&&(n=M,e._vignette&&(e._vignette.x=n))}}),Object.defineProperty(e,"vignetteY",{get:function(){return x},set:function(M){x!==M&&(x=M,e._vignette&&(e._vignette.y=x))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return S},set:function(M){S!==M&&(S=M,e._vignette&&(e._vignette.strength=S))}}),e.vignetteRadius=null,Pe(e,"vignetteRadius"),e},fw=function(e){return $e(e,"vintagePinhole"),e},cw=function(e){if(re(e,"wipeLeft"))return e;var t=je(e);if(!t)return e;var i,n,x,S,M=.1,L=function(){i=null,n=null,x=null,S=null},F=function(G){G._wipeEffect&&(t.remove(G._wipeEffect),G._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return i},set:function(G){i!==G&&(L(),i=G,i===null||i===!1?F(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(M,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=i))}}),Object.defineProperty(e,"wipeRight",{get:function(){return n},set:function(G){n!==G&&(L(),n=G,n===null||n===!1?F(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(M,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=n))}}),Object.defineProperty(e,"wipeUp",{get:function(){return x},set:function(G){x!==G&&(L(),x=G,x===null||x===!1?F(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(M,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=x))}}),Object.defineProperty(e,"wipeDown",{get:function(){return S},set:function(G){S!==G&&(L(),S=G,S===null||S===!1?F(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(M,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=S))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return M},set:function(G){M!==G&&(M=G,e._wipeEffect&&(e._wipeEffect.wipeWidth=M))}}),e.wipeLeft=null,Pe(e,"wipeLeft"),Pe(e,"wipeRight"),Pe(e,"wipeUp"),Pe(e,"wipeDown"),e};const Xh={barrel:GM,blackWhite:kM,bloom:NM,blur:zM,bokeh:UM,brightness:VM,brown:XM,circle:WM,contrast:YM,desaturate:HM,desaturateLuminance:$M,displacement:KM,glow:ZM,gradient:JM,grayscale:QM,hue:jM,kodachrome:qM,lsd:_M,negative:tw,pixelate:ew,polaroid:iw,reveal:sw,saturate:rw,sepia:nw,shadow:aw,shiftToBGR:ow,shine:hw,technicolor:lw,tiltShift:uw,vignette:dw,vintagePinhole:fw,wipe:cw};var aa=function(e,t){if(t===void 0)t=!0;else if(typeof t=="string")t={config:!0};else if(Array.isArray(t))for(var i=t,t={},n=0,x=i.length;n<x;n++)t[i[n]]=!0;if(t===!0)for(var S in Xh)Xh[S](e);else for(var S in t)t[S]&&Xh[S]&&Xh[S](e);return e};const vw=Phaser.Utils.Array.Remove;var pw={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&bM(t),this.viewportCoordinateEnable&&IM(t,this.viewport),this.effectPropertiesConfig&&aa(t,this.effectPropertiesConfig),t.setName(e).once("destroy",function(){vw(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var i=new this.BobClass(this,t,e);return this.bobs[e]=i,this},add(e,...t){var i=this.createGameObjectCallback,n=this.createGameObjectScope,x=i.call(n,this.scene,...t);this.addGO(e,x),this.gameObjectDepth!=null&&x.setDepth(this.gameObjectDepth);var S=this.get(e);return this.fadeBob(S,0,1),this}},gw={remove(e,t){var i=this.get(e);if(i)Array.isArray(i)||(i=[i]);else return this;var n=this;return i.forEach(function(x){delete n.bobs[x.name];var S=x.gameObject;n.removedGOs.push(S),S.setName(),t?x.destroy():n.fadeBob(x,void 0,0,function(){x.destroy()})}),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){e===void 0&&(e=!0);var t=this.bobs;for(var i in t)e&&t[i].destroy(),delete t[i];return this.removedGOs.length=0,this}},mw={hasProperty(e,t){var i=vn(e)?this.get(e):this.getFitst(e);return i?i.hasProperty(t):!1},getProperty(e,t){var i=vn(e)?this.get(e):this.getFitst(e);if(i)return i.getProperty(t)},isNumberProperty(e,t){var i=this.getProperty(e,t);return typeof i=="number"},setProperty(e,t,i){var n=this.get(e);if(n)Array.isArray(n)||(n=[n]);else return this;return this.symbols&&typeof i=="string"&&this.isNumberProperty(e,t)&&(i in this.symbols?i=this.symbols[i]:console.warn(`Can't find symbol ${i}`)),n.forEach(function(x){x.setProperty(t,i)}),this},easeProperty(e,t){var i=this.get(e);if(i)Array.isArray(i)||(i=[i]);else return this;var n=t.value,x=t.property;return this.symbols&&typeof n=="string"&&this.isNumberProperty(e,x)&&n in this.symbols&&(t.value=this.symbols[n]),i.forEach(function(S){S.easeProperty(t)}),this},hasTweenTask(e,t){var i=vn(e)?this.get(e):this.getFitst(e);return i?i.tweens.hasOwnProperty(t):!1},getTweenTask(e,t){var i=vn(e)?this.get(e):this.getFitst(e);return i&&i.tweens[t]||null}},xw={hasMethod(e,t){var i=vn(e)?this.get(e):this.getFitst(e);return i?i.hasMethod(t):!1},call(e,t,...i){var n=this.get(e);if(n)Array.isArray(n)||(n=[n]);else return this;return n.forEach(function(x){x.call(t,...i)}),this}},yw={hasData(e,t){var i=vn(e)?this.get(e):this.getFitst(e);return i?i.hasData(t):!1},getData(e,t){if(this.has(e))return this.get(e).getData(t)},setData(e,t,i){var n=this.get(e);if(n)Array.isArray(n)||(n=[n]);else return this;return n.forEach(function(x){x.setData(t,i)}),this}};const h0=0,l0=1,mf=2,u0=3,d0=4,xf=5,Cw={tint:h0,alpha:l0,revealUp:mf,revealDown:u0,revealLeft:d0,revealRight:xf};var Sw={setGOFadeMode(e){return typeof e=="string"&&(e=Cw[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===h0)&&this.fadeTime>0&&e.setTint!==void 0},useAlphaFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===l0)&&this.fadeTime>0&&e.setAlpha!==void 0},useRevealEffect(e){return this.fadeMode>=mf&&this.fadeMode<=xf&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,i,n){var x=e.gameObject;if(this.useTintFadeEffect(x))t!==void 0&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*i),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:n});else if(this.useAlphaFadeEffect(x))t!==void 0&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:i,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:n});else if(this.useRevealEffect(x)){aa(x,"reveal");var S;switch(this.fadeMode){case mf:S="revealUp";break;case u0:S="revealDown";break;case d0:S="revealLeft";break;case xf:S="revealRight";break}t===void 0&&(t=0),x[S]=t,e.easeProperty({property:S,value:i,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:n}),e.getTweenTask(S).once("complete",function(){x[S]=null})}else n&&n(x);return this}},_t=function(e){return e.displayWidth!==void 0?e.displayWidth:e.width},te=function(e){return e.displayHeight!==void 0?e.displayHeight:e.height};const f0=Phaser.Geom.Rectangle,ls=Phaser.Math.Vector2,Tw=Phaser.Math.RotateAround,Ew=Phaser.GameObjects.Container;var yf=function(e,t){if(t===void 0?t=new f0:t===!0&&(Cf===void 0&&(Cf=new f0),t=Cf),e.getBounds&&!(e instanceof Ew))return e.getBounds(t);var i,n,x,S,M,L,F,G;if(e.parentContainer){var X=e.parentContainer.getBoundsTransformMatrix();pn(e,t),X.transformPoint(t.x,t.y,t),i=t.x,n=t.y,oo(e,t),X.transformPoint(t.x,t.y,t),x=t.x,S=t.y,ho(e,t),X.transformPoint(t.x,t.y,t),M=t.x,L=t.y,Sf(e,t),X.transformPoint(t.x,t.y,t),F=t.x,G=t.y}else pn(e,t),i=t.x,n=t.y,oo(e,t),x=t.x,S=t.y,ho(e,t),M=t.x,L=t.y,Sf(e,t),F=t.x,G=t.y;return t.x=Math.min(i,x,M,F),t.y=Math.min(n,S,L,G),t.width=Math.max(i,x,M,F)-t.x,t.height=Math.max(n,S,L,G)-t.y,t},Cf=void 0,pn=function(e,t,i){return t===void 0?t=new ls:t===!0&&(ni===void 0&&(ni=new ls),t=ni),e.getTopLeft?e.getTopLeft(t,i):(t.x=e.x-_t(e)*e.originX,t.y=e.y-te(e)*e.originY,lo(e,t,i))},oo=function(e,t,i){return t===void 0?t=new ls:t===!0&&(ni===void 0&&(ni=new ls),t=ni),e.getTopRight?e.getTopRight(t,i):(t.x=e.x-_t(e)*e.originX+_t(e),t.y=e.y-te(e)*e.originY,lo(e,t,i))},ho=function(e,t,i){return t===void 0?t=new ls:t===!0&&(ni===void 0&&(ni=new ls),t=ni),e.getBottomLeft?e.getBottomLeft(t,i):(t.x=e.x-_t(e)*e.originX,t.y=e.y-te(e)*e.originY+te(e),lo(e,t,i))},Sf=function(e,t,i){return t===void 0?t=new ls:t===!0&&(ni===void 0&&(ni=new ls),t=ni),e.getBottomRight?e.getBottomRight(t,i):(t.x=e.x-_t(e)*e.originX+_t(e),t.y=e.y-te(e)*e.originY+te(e),lo(e,t,i))},c0=function(e,t,i){t===void 0?t=new ls:t===!0&&(ni===void 0&&(ni=new ls),t=ni);var n=_t(e),x=te(e);return t.x=e.x+n*(.5-e.originX),t.y=e.y+x*(.5-e.originY),lo(e,t,i)},ni=void 0,lo=function(e,t,i){if(i===void 0&&(i=!1),e.rotation!==0&&Tw(t,e.x,e.y,e.rotation),i&&e.parentContainer){var n=e.parentContainer.getBoundsTransformMatrix();n.transformPoint(t.x,t.y,t)}return t};const oa=Phaser.Utils.Objects.GetValue;var v0=function(e,t,i){var n,x,S,M,L,F;if(typeof i=="number"?n=i:(n=oa(i,"color"),x=oa(i,"lineWidth"),S=oa(i,"fillColor"),M=oa(i,"fillAlpha"),L=oa(i,"padding"),F=oa(i,"includeParent")),n===void 0&&(n=16777215),x===void 0&&(x=1),S===void 0&&(S=null),M===void 0&&(M=1),L===void 0&&(L=0),F===void 0&&(F=!0),Array.isArray(e))for(var G=0,X=e.length;G<X;G++)p0(e[G],t,n,x,S,M,L,F);else p0(e,t,n,x,S,M,L,F)},p0=function(e,t,i,n,x,S,M,L){var F=e.getBounds||e.width!==void 0&&e.height!==void 0;if(F){var G=pn(e,ha[0],L);G.x-=M,G.y-=M;var X=oo(e,ha[1],L);X.x+=M,X.y-=M;var Q=Sf(e,ha[2],L);Q.x+=M,Q.y+=M;var tt=ho(e,ha[3],L);tt.x-=M,tt.y+=M,x!==null&&t.fillStyle(x,S).fillPoints(ha,!0,!0),i!==null&&t.lineStyle(n,i).strokePoints(ha,!0,!0)}},ha=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],Pw=function(e,t){return this.forEachGO(function(i){i.drawBounds?i.drawBounds(e,t):v0(i,e,t)}),this},g0=function(e,t){var i=e.cameras,n;if(t===void 0)n=i.main;else{var x=typeof t;switch(x){case"string":n=i.getCamera(t);break;case"number":n=i.cameras[t];break;default:n=t;break}}return n},Mw={setCamera(e,t){var i=this.get(e);if(!i)return this;var n=g0(this.scene,t);return n?(i.gameObject.cameraFilter=4294967295^n.id,i.camera=n,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}},m0={drawGameObjectsBounds:Pw};Object.assign(m0,TM,pw,gw,mw,xw,yw,Sw,Mw);const ww=Phaser.Cameras.Scene2D.BaseCamera;var Aw=function(e){return e instanceof ww};const x0=Phaser.Geom.Rectangle;var la=function(e,t,i){return Aw(t)||(i=t,t=void 0),i===void 0?i=new x0:i===!0&&(i=Rw),t?e.scale.getViewPort(t,i):e.scale.getViewPort(i)},Rw=new x0;const fi=Phaser.Utils.Objects.GetValue;class ua{constructor(t,i){this.scene=t,this.BobClass=fi(i,"BobClass",gf),this.setCreateGameObjectCallback(fi(i,"createGameObject"),fi(i,"createGameObjectScope")),this.setEventEmitter(fi(i,"eventEmitter",void 0)),this.setGameObjectDepth(fi(i,"depth",void 0));var n=fi(i,"fade",500);typeof n=="number"?(this.setGOFadeMode(),this.setGOFadeTime(n)):(this.setGOFadeMode(fi(n,"mode")),this.setGOFadeTime(fi(n,"time",500)));var x=fi(i,"viewportCoordinate",!1);x!==!1?(this.setViewportCoordinateEnable(fi(i,"enable",!0)),this.setViewport(fi(x,"viewport"))):this.setViewportCoordinateEnable(!1);var S=fi(i,"effectProperties",!1);this.setEffectPropertiesConfig(S),this.setSymbols(fi(i,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=fi(i,"name")}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var i=this.bobs;for(var n in i)i[n].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,i){return this.createGameObjectCallback=t,this.createGameObjectScope=i,this}setGameObjectDepth(t){return this.gameObjectDepth=t,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setEffectPropertiesConfig(t){return t===void 0&&(t=!0),this.effectPropertiesConfig=t,this}setViewport(t){return t===void 0&&(t=la(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return so(this.bobs)&&this.removedGOs.length===0}}Object.assign(ua.prototype,io,m0);const Lw=Phaser.GameObjects.GameObject,bw=Phaser.GameObjects.Layer;var ci=function(e){return e instanceof Lw||e instanceof bw};const Ow=Phaser.GameObjects.Layer;var uo=function(e){return e instanceof Ow},y0=function(e){var t=e.displayList;return uo(t)?t:null},Oi=function(e,t){if(e.length<=1)return e;t===void 0&&(t=!1);for(var i,n=0,x=e.length;n<x;n++){var S=e[n];if(S.displayList?i=S.displayList:S.parentContainer&&(i=S.parentContainer.list),i)break}return i||(i=S.scene.sys.displayList),i.depthSort&&(i.depthSort(),i=i.list),t?e.sort(function(M,L){return i.indexOf(L)-i.indexOf(M)}):e.sort(function(M,L){return i.indexOf(M)-i.indexOf(L)}),e},Fw={getLayer(e){return this.getGO(e)},getLayers(e){return e===void 0&&(e=[]),this.forEachGO(function(t){e.push(t)}),Oi(e,!1),e},addToLayer(e,t){var i=this.getGO(e);if(!i){console.warn(`[LayerManager] Can't get layer "${e}"`);return}Array.isArray(t)||(t=[t]);for(var n=0,x=t.length;n<x;n++){var S=t[n];S.isRexContainerLite?S.addToLayer(i):i.add(S)}return i.scrollFactorX!==void 0&&S.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},addToBottomLayer(e){var t=this.getLayers()[0];return this.addToLayer(t.goName,e),this},addToTopLayer(e){var t=this.getLayers(),i=t[t.length-1];return this.addToLayer(i.goName,e),this},removeFromLayer(e,t,i){var n=this.getGO(e);if(!n){console.warn(`[LayerManager] Can't get layer "${e}"`);return}return i===void 0&&(i=!0),t.isRexContainerLite?t.removeFromLayer(n,i):(n.remove(t),i&&t.addToDisplayList()),this},clearLayer(e,t){t===void 0&&(t=!0);var i=this.getGO(e);if(!i){console.warn(`Can't get layer "${e}"`);return}if(t)for(var n=i.getAll(),x=0,S=n.length;x<S;x++)n[x].destroy();else i.removeAll();return this}},Dw={setScrollFactor(e,t,i){i===void 0&&(i=t);var n=this.getLayer(e);if(!n)return this;n.scrollFactorX=t,n.scrollFactorY=i;for(var x=n.getAll(),S=0,M=x.length;S<M;S++)x[S].setScrollFactor(t,i);return this}};const Wh=Phaser.Utils.Array,Bw=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(Wh.BringToTop(e,this),this):this},Iw=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(Wh.SendToBack(e,this),this):this},C0=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&e.parentContainer.add(this)):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&e.displayList.add(this)),t?(Wh.MoveBelow(t,this,e),this):this},S0=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e))):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e))),t?(Wh.MoveAbove(t,this,e),this):this};var Yh={bringMeToTop:Bw,sendMeToBack:Iw,moveMyDepthBelow:C0,moveMyDepthAbove:S0},Gw={bringLayerToTop(e){var t=this.getLayer(e);return t?(Yh.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(Yh.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var i=this.getLayer(e),n=this.getLayer(t);return!i||!n?this:(Yh.moveMyDepthBelow.call(i,n),this)},moveLayerAbove(e,t){if(e===t)return this;var i=this.getLayer(e),n=this.getLayer(t);return!i||!n?this:(Yh.moveMyDepthAbove.call(i,n),this)}};const kw=ua.prototype.setCamera;var Nw={setCamera(e,t){var i=g0(this.scene,t);return i||(i=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),kw.call(this,e,i),this}},T0={};Object.assign(T0,Fw,Dw,Gw,Nw);const Hh=Phaser.Utils.Objects.GetValue;class $h extends ua{constructor(t,i){i===void 0?i={}:Array.isArray(i)&&(i={layers:i}),i.hasOwnProperty("fade")||(i.fade=0),i.viewportCoordinate=!1,super(t,i);var n=Hh(i,"rootLayer");this.setRootLayer(n);var x=Hh(i,"layers");if(x)for(var S=0,M=x.length;S<M;S++){var L=x[S];if(typeof L=="string")this.add(L);else{var F=L.name;this.add(F);var G=L.scrollFactor,X=Hh(L,"scrollFactorX",G),Q=Hh(L,"scrollFactorY",G);X!==void 0&&this.setScrollFactor(F,X,Q),this.setCamera(F,L.cameraName)}}}setCreateGameObjectCallback(t,i){return t||(t=zw),super.setCreateGameObjectCallback(t,i),this}setRootLayer(t){if(t===this.rootLayer)return this;var i=this.getAllGO();return t?t.add(i):this.scene.displayList.add(i),this.rootLayer=t,this}addGO(t,i){return super.addGO(t,i),i.name=t,this.rootLayer&&this.rootLayer.add(i),this}get(t,i){if(ci(t)){var n=y0(t);if(!n||(t=n.name,!t))return}return super.get(t,i)}}var zw=function(e,t){var i=e.add.layer();return t!==void 0&&i.setDepth(t),i};Object.assign($h.prototype,T0);var Uw=function(e){return P(e)?e.sys.sound:e.sound},Vw=function(e){return this.sound.game.cache.audio.has(e)},da=function(e){return e==null||typeof e!="object"?null:P(e)?e:e.scene&&P(e.scene)?e.scene:e.parent&&e.parent.scene&&P(e.parent.scene)?e.parent.scene:null};const Xw=Phaser.Utils.Objects.GetValue;class ye{constructor(t,i){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(Xw(i,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}setParent(t){return this.parent=t,this.scene=da(t),this.game=w(t),this}}Object.assign(ye.prototype,io);const Ww=Phaser.Utils.Objects.GetValue;class Kh extends ye{constructor(t,i){super(t,i),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(Ww(i,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=Yw[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isPaused=!1,this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const Yw={no:0,lazy:1,always:2},Hw=Phaser.Utils.Objects.GetValue;class $w extends Kh{constructor(t,i){super(t,i);var n=this.scene?"update":"step";this.tickEventName=Hw(i,"tickEventName",n),this.isSceneTicker=!Kw(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var Kw=function(e){return e==="step"||e==="poststep"};const Fs=Phaser.Utils.Objects.GetValue,E0=Phaser.Math.Clamp;let P0=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Fs(t,"state",fo),this.timeScale=Fs(t,"timeScale",1),this.delay=Fs(t,"delay",0),this.repeat=Fs(t,"repeat",0),this.repeatCounter=Fs(t,"repeatCounter",0),this.repeatDelay=Fs(t,"repeatDelay",0),this.duration=Fs(t,"duration",0),this.nowTime=Fs(t,"nowTime",0),this.justRestart=Fs(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?fa:co,this.repeatCounter=0,this}stop(){return this.state=fo,this}update(t,i){this.state===fo||this.state===Zh||i===0||this.timeScale===0||(this.nowTime+=i*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=M0)):(this.nowTime=this.duration,this.state=Zh):this.nowTime>=0&&(this.state=fa))}get t(){var t;switch(this.state){case fo:case co:case M0:t=0;break;case fa:t=this.nowTime/this.duration;break;case Zh:t=1;break}return E0(t,0,1)}set t(t){t=E0(t,-1,1),t<0?(this.state=co,this.nowTime=-this.delay*t):(this.state=fa,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===fo}get isDelay(){return this.state===co}get isCountDown(){return this.state===fa}get isRunning(){return this.state===co||this.state===fa}get isDone(){return this.state===Zh}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}};const fo=0,co=1,fa=2,M0=3,Zh=-1;class Zw extends $w{constructor(t,i){super(t,i),this.timer=new P0}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const vo=Phaser.Utils.Objects.GetValue,w0=Phaser.Utils.Objects.GetAdvancedValue,Jw=Phaser.Tweens.Builders.GetEaseFunction;class gn extends Zw{resetFromJSON(t){return this.timer.resetFromJSON(vo(t,"timer")),this.setEnable(vo(t,"enable",!0)),this.setTarget(vo(t,"target",this.parent)),this.setDelay(w0(t,"delay",0)),this.setDuration(w0(t,"duration",1e3)),this.setEase(vo(t,"ease","Linear")),this.setRepeat(vo(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=Jw(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateTarget(this.target,this.timer),this.complete()),this}update(t,i){if(!this.isRunning||!this.enable||this.parent.hasOwnProperty("active")&&!this.parent.active)return this;var n=this.target,x=this.timer;return x.update(t,i),x.isDelay||this.updateTarget(n,x),this.emit("update",n,this),x.isDone&&this.complete(),this}updateTarget(t,i){}}const Qw=Phaser.Sound.BaseSound;var Tf=function(e){return e instanceof Qw};const A0=Phaser.Utils.Objects.GetValue,R0=Phaser.Utils.Objects.GetAdvancedValue,jw=Phaser.Math.Linear;let L0=class extends gn{constructor(t,i,n){Tf(t)&&(n=i,i=t,t=void 0),i.active=!0,i.scene=t,i.game=i.manager.game,super(i,n),this.volume={},this.resetFromJSON(n)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(A0(t,"mode",0)),this.setEnable(A0(t,"enable",!0)),this.setVolumeRange(R0(t,"volume.start",this.parent.volume),R0(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=qw[t]),this.mode=t,this}setVolumeRange(t,i){return this.volume.start=t,this.volume.end=i,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateTarget(t,i){t.volume=jw(this.volume.start,this.volume.end,i.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy();break}return this}};const qw={stop:1,destroy:2};var Jh=function(e,t,i,n,x){Tf(e)&&(x=n,n=i,i=t,t=e,e=void 0),n===void 0&&(n=1),x===void 0&&(x=0);var S={mode:0,volume:{start:x,end:n},duration:i};typeof t=="string"&&(t=e.sys.sound.add(t));var M;return t.hasOwnProperty("_fade")?(M=t._fade,M.stop().resetFromJSON(S)):(M=new L0(e,t,S),t._fade=M),M.start(),t.isPlaying||t.setVolume(x).play(),t},ca=function(e,t,i,n){Tf(e)&&(n=i,i=t,t=e,e=void 0),n===void 0&&(n=!0);var x={mode:n?2:1,volume:{start:t.volume,end:0},duration:i},S;return t.hasOwnProperty("_fade")?(S=t._fade,S.stop().resetFromJSON(x)):(S=new L0(e,t,x),t._fade=S),S.start(),t.isPlaying||t.play(),t};const po=Phaser.Utils.Objects.GetValue;var _w={setBackgroundMusicLoop(e){return e===void 0&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var i=this.sound.add(e,{loop:po(t,"loop",this.backgroundMusicLoop),mute:po(t,"mute",this.backgroundMusicMute),volume:po(t,"volume",this.backgroundMusicVolume),detune:po(t,"detune",0),rate:po(t,"rate",1)});return this.setCurrentBackgroundMusic(i),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&Jh(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,t){return this.backgroundMusic&&ca(this.backgroundMusic,e,t),this},crossFadeBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(e).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=i,this},setBackgroundMusicMute(e){return e===void 0&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}};const go=Phaser.Utils.Objects.GetValue;var tA={setBackgroundMusic2Loop(e){return e===void 0&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var i=this.sound.add(e,{loop:go(t,"loop",this.backgroundMusicLoop),mute:go(t,"mute",this.backgroundMusic2Mute),volume:go(t,"volume",this.backgroundMusic2Volume),detune:go(t,"detune",0),rate:go(t,"rate",1)});return this.setCurrentBackgroundMusic2(i),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&Jh(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,t){return this.backgroundMusic2&&ca(this.backgroundMusic2,e,t),this},crossFadeBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=i,this},setBackgroundMusic2Mute(e){return e===void 0&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}};const b0=Phaser.Utils.Array.Remove,Qh=Phaser.Utils.Objects.GetValue;var eA={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.sound.add(e,{mute:Qh(t,"mute",this.soundEffectsMute),volume:Qh(t,"volume",this.soundEffectsVolume),detune:Qh(t,"detune",0),rate:Qh(t,"rate",1)});return this.soundEffects.push(i),i.once("complete",function(){i.destroy(),this.sound&&b0(this.soundEffects,i)},this).once("destroy",function(){this.sound&&b0(this.soundEffects,i)},this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect(e){var t=this.getLastSoundEffect();return t&&Jh(t,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,t){var i=this.getLastSoundEffect();return i&&ca(i,e,t),this},fadeOutAllSoundEffects(e,t){for(var i=this.soundEffects.length-1;i>=0;i--)ca(this.soundEffects[i],e,t);return this},setSoundEffectMute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,t){if(t===void 0&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect()]:i=this.soundEffects;for(var n=0,x=i.length;n<x;n++)i[n].setDetune(e);return this},setSoundEffectRate(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect()]:i=this.soundEffects;for(var n=0,x=i.length;n<x;n++)i[n].setRate(e);return this}};const O0=Phaser.Utils.Array.Remove,jh=Phaser.Utils.Objects.GetValue;var iA={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.sound.add(e,{mute:jh(t,"mute",this.soundEffects2Mute),volume:jh(t,"volume",this.soundEffects2Volume),detune:jh(t,"detune",0),rate:jh(t,"rate",1)});return this.soundEffects2.push(i),i.once("complete",function(){i.destroy(),this.sound&&O0(this.soundEffects2,i)},this).once("destroy",function(){this.sound&&O0(this.soundEffects2,i)},this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect2(e){var t=this.getLastSoundEffect2();return t&&Jh(t,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,t){var i=this.getLastSoundEffect2();return i&&ca(i,e,t),this},fadeOutAllSoundEffects2(e,t){for(var i=this.soundEffects2.length-1;i>=0;i--)ca(this.soundEffects2[i],e,t);return this},setSoundEffect2Mute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,t){if(t===void 0&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect2()]:i=this.soundEffects2;for(var n=0,x=i.length;n<x;n++)i[n].setDetune(e);return this},setSoundEffect2Rate(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect2()]:i=this.soundEffects2;for(var n=0,x=i.length;n<x;n++)i[n].setRate(e);return this}},F0={hasAudio:Vw};Object.assign(F0,_w,tA,eA,iA);const Fi=Phaser.Utils.Objects.GetValue;class D0{constructor(t,i){this.sound=Uw(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=Fi(i,"bgm.volume",1),this._backgroundMusicMute=Fi(i,"bgm.mute",!1),this.setBackgroundMusicLoop(Fi(i,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Fi(i,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=Fi(i,"bgm2.volume",1),this._backgroundMusic2Mute=Fi(i,"bgm2.mute",!1),this.setBackgroundMusic2Loop(Fi(i,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(Fi(i,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=Fi(i,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=Fi(i,"soundEffect2.volume",1);var n=Fi(i,"bgm.initial",void 0);n&&this.setCurrentBackgroundMusic(n);var x=Fi(i,"bgm2.initial",void 0);x&&this.setCurrentBackgroundMusic2(x)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var i=this.soundEffects,n=0,x=i.length;n<x;n++)i[n].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var i=this.soundEffects,n=0,x=i.length;n<x;n++)i[n].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var i=this.soundEffects,n=0,x=soundEffects2.length;n<x;n++)i[n].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var i=this.soundEffects2,n=0,x=i.length;n<x;n++)i[n].setVolume(t)}}Object.assign(D0.prototype,F0);const Ef=Phaser.Utils.Objects.GetValue;class sA extends Kh{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=Ef(t,"isRunning",!1),this.timeScale=Ef(t,"timeScale",1),this.now=Ef(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class B0 extends sA{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,i){return!this.isRunning||this.timeScale===0?this:(this.tick(i),this)}}var le=function(e,t){return t===void 0&&(t=.5),e<=t?e=e/t:e=1-(e-t)/(1-t),e};const I0=Phaser.Math.Clamp;class rA{constructor(t,i){this.setTimeline(t).reset(i)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,i,n,x){return this.target=t,this.onStart=i,this.onProgress=n,this.onComplete=x,this}setDuration(t,i){return i===void 0&&(i=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=i,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=I0(t,0,1),this.yoyo&&(t=le(t)),t}setProgress(t){t=I0(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,i){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=i,this.t=this.getProgress(),this.runCallback(this.onProgress);var n=this.remainder<=0;return n&&this.runCallback(this.onComplete),n}}let nA=class extends mt{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var i=0,n=t.length;i<n;i++)this.free(t[i]);return this}};const aA=Phaser.Utils.Objects.GetValue,oA=new nA;class hA extends B0{constructor(t,i){super(t,i),this.addedTimers=[],this.timers=[],this.timerPool=aA(i,"pool",oA)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var i=this.timerPool.allocate();return i?i.setTimeline(this).reset(t):i=new rA(this,t),this.addedTimers.push(i),i.runCallback(i.onStart),this.isRunning||this.start(),i}delayCall(t,i,n,x){var S=this.addTimer({duration:t,onComplete:function(M,L,F){n===void 0&&(n=[]),n.push(F),i.apply(x,n)}});return S}delayEvent(t,i){this.removeDelayEvent(i);var n=this.delayCall(t,function(){this.removeDelayEvent(i),this.emit(i)},[],this);return this.once(`_remove.${i}`,function(){n.remove(),n=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var i=[],n=[this.addedTimers,this.timers],x=0,S=n.length;x<S;x++)for(var M=n[x],L=0,F=M.length;L<F;L++){var G=M[L];G.name===t&&i.push(G)}return i}update(t,i){if(super.update(t,i),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var n=[],x=0,S=this.timers.length;x<S;x++){var M=this.timers[x],L=M.update(this.now,this.delta);L?this.timerPool.free(M):n.push(M)}this.timers=n,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const lA="_wait.complete",uA="_remove.wait";var dA=function(e,t,i,n,x){var S=da(e),M=S.time.delayedCall(t,function(){S.sys.events.once("preupdate",function(){i.call(n,x)})});return M};let G0=class{constructor(t){t||(this.setEventEmitter(!0),t=this),this.parent=t,this.waitId=0,this.waitCompleteEventName=lA,this.removeWaitEventsEventName=uA}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(t,i,n){var x=this.getWaitCompleteTriggerCallback(n);return t.once(i,x,this),this.parent.once(this.removeWaitEventsEventName,function(){t.off(i,x,this)}),this.parent}getWaitCompleteTriggerCallback(t){t===void 0&&(t=!0);var i=this.waitId,n=this,x=function(){i<n.waitId||(n.waitId++,n.removeWaitEvents(),n.parent.emit(n.waitCompleteEventName))};if(t){var S=function(){dA(n.parent,0,x)};return S}else return x}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(t,i){return this.parent.on(this.waitCompleteEventName,t,i),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(G0.prototype,io);var fA={waitTime(e){var t=this.parent.timeline;return t.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}},cA=function(e,t){var i=`(?<!\\\\)\\${t}`,n=`\\${t}`;return e.split(new RegExp(i,"g")).map(function(x){return x.replace(n,t)})},vA={setClickTarget(e){return this.clickTarget=e,e?P(e)?this.touchEE=e.input:this.touchEE=e.setInteractive():this.touchEE=null,this},clearClickTarget(){return this.setClickTarget(),this},setClickShortcutKeys(e){return this.clickShortcutKeys=e,this},clearClickShortcutKeys(){return this.setClickShortcutKeys(),this},waitClick(){var e=this.touchEE,t=this.clickShortcutKeys;return e||t?(e&&this.waitEvent(e,"pointerdown"),t&&this.waitKeyDown(t)):this.waitTime(0),this},waitKeyDown(e){var t=this.scene.input.keyboard;if(typeof e=="string"){if(e.indexOf("|")===-1)return this.waitEvent(t,`keydown-${e.toUpperCase()}`);for(var i=cA(e,"|"),n=0,x=i.length;n<x;n++)this.waitEvent(t,`keydown-${i[n].toUpperCase()}`);return this.parent}else return this.waitEvent(t,"keydown")}},pA={waitGameObjectTweenComplete(e,t,i){var n=this.parent.getGameObjectTweenTask(e,t,i);return n?this.waitEvent(n,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,t,i,n){var x=this.parent.getGameObject(e,t);if(!x)return this.waitTime(0);if(x.getData(i)===n)return this.waitTime(0);var S=`changedata-${i}`,M=function(L,F,G){F=!!F,F===n&&L.emit("_dataFlagMatch")};return x.on(S,M),this.parent.once(this.removeWaitEventsEventName,function(){x.off(S,M)}),this.waitEvent(x,"_dataFlagMatch")},waitGameObjectDestroy(e,t){var i=this.parent.getGameObject(e,t);return i?this.waitEvent(i,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var t=this.parent.getGameObjectManager(e);return t?this.waitEvent(t,"empty"):this.waitTime(0)}else{var i=this.parent.gameObjectManagers,n=!1;for(var x in i)n=!0,this.waitEvent(i[x],"empty");return n?this.parent:this.waitTime(0)}}},gA={setCameraTarget(e){return this.cameraTarget=e,this},clearCameraTarget(){return this.setCameraTarget(),this},waitCameraEffectComplete(e,t){var i;if(t?i=this.scene.cameras.getCamera(t):i=this.cameraTarget,!i)return this.waitTime(0);var n,x;switch(e){case"camera.fadein":n=i.fadeEffect,x="camerafadeincomplete";break;case"camera.fadeout":n=i.fadeEffect,x="camerafadeoutcomplete";break;case"camera.flash":n=i.flashEffect,x="cameraflashcomplete";break;case"camera.shake":n=i.shakeEffect,x="camerashakecomplete";break;case"camera.zoom":n=i.zoomEffect,x="camerazoomcomplete";break;case"camera.rotate":n=i.rotateToEffect,x="camerarotatecomplete";break;case"camera.scroll":n=i.panEffect,x="camerapancomplete";break}return n.isRunning?this.waitEvent(i,x):this.waitTime(0)}},mA={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}},xA=function(e){if(!e)return this.waitTime(0);var t=!1;for(var i in e)switch(i){case"time":t=!0,this.waitTime(e.time);break;case"click":t=!0,this.waitClick();break;case"key":t=!0,this.waitKeyDown(e.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`,e.cameraName);break;default:var n=i.split(".");if(n.length===2){var x=n[0],S=n[1],M=this.parent.getGameObjectManager(void 0,x);if(!M)continue;if(S==="destroy")return this.waitGameObjectDestroy(void 0,x);var L=M.getProperty(x,S);if(typeof L=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,x,S);continue}var F=S,G=F.startsWith("!");if(G&&(F=F.substring(1)),M.hasData(x,S)){t=!0,this.waitGameObjectDataFlag(void 0,x,F,!G);continue}this.waitEvent(gameObject,S);continue}else n.length;break}return t||this.waitTime(0),this.parent},k0={waitAny:xA};Object.assign(k0,fA,vA,pA,gA,mA);class N0 extends G0{constructor(t,i){super(t),this.waitCompleteEventName=Gt(i,"completeEventName",this.waitCompleteEventName),this.setClickTarget(Gt(i,"clickTarget",this.scene)),this.setClickShortcutKeys(Gt(i,"clickShortcutKeys",void 0)),this.setCameraTarget(Gt(i,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get clickShortcutKeys(){return this.parent.clickShortcutKeys}set clickShortcutKeys(t){this.parent.clickShortcutKeys=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){this.clearClickTarget(),this.clearClickShortcutKeys(),this.clearCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}}Object.assign(N0.prototype,k0);const qh=Phaser.Utils.Objects.GetValue;var yA=function(e,t){this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var i=qh(t,"layers",!1);if(i!==!1){var n=new $h(e,{name:"LAYER",layers:i,rootLayer:qh(t,"rootLayer",void 0),depth:qh(t,"layerDepth",void 0)});this.addGameObjectManager(n),this.layerManager=n}var x=qh(t,"sounds");return x!==!1&&(this.soundManager=new D0(e,x)),this.timeline=new hA(this),this.waitEventManager=new N0(this,t),this},CA=function(e){this.timeline.timeScale=e;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(e);return this},SA=function(){return this.timeline.timeScale},TA=function(e){this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(e),delete this.gameObjectManagers[t];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=void 0},z0={addGameObjectManager(e,t){var i;return e instanceof ua?i=e:typeof e=="string"?(i=t,i.name=e):(e===void 0&&(e={}),t===void 0&&(t=ua),e.createGameObjectScope||(e.createGameObjectScope=this),i=new t(this.managersScene,e)),this.gameObjectManagers[i.name]=i,this},getGameObjectManager(e,t){if(e){var i=this.gameObjectManagers[e];return i}else{t&&t.charAt(0)==="!"&&(t=t.substring(1));for(var e in this.gameObjectManagers){var i=this.gameObjectManagers[e];if(i.has(t))return i}}},getGameObjectManagerNames(){var e=[];for(var t in this.gameObjectManagers)e.push(t);return e},getGameObjectManagerName(e){var t=this.getGameObjectManager(void 0,e);if(t)return t.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}},EA={createGameObject(e,t,...i){return this.getGameObjectManager(e,t).add(t,...i),this},destroyGameObject(e,t){var i=this.getGameObjectManager(e,t);return t===void 0?i.removeAll():i.remove(t),this},hasGameObject(e,t){return!!this.getGameObjectManager(e,t)},callGameObjectMethod(e,t,i,...n){return this.getGameObjectManager(e,t).call(t,i,...n),this},setGameObjectProperty(e,t,i,n){return this.getGameObjectManager(e,t).setProperty(t,i,n),this},easeGameObjectProperty(e,t,i){return this.getGameObjectManager(e,t).easeProperty(t,i),this},getGameObjectTweenTask(e,t,i){return this.getGameObjectManager(e,t).getTweenTask(t,i)},getGameObject(e,t,i){var n=this.getGameObjectManager(e,t);if(!n)return i;if(typeof t=="string")return n.getGO(t);i===void 0&&(i=[]);var x=t;x===void 0&&(x=Object.keys(n.bobs));for(var S=Array.isArray(i),M=0,L=x.length;M<L;M++){t=x[M];var F=n.getGO(t);F&&(S?i.push(F):i[t]=F)}return i},addGameObject(e,t,i){var n=this.getGameObjectManager(e,t);if(typeof t=="string")n.addGO(t,i);else{var x=t;for(t in x)n.addGO(t,x[t])}return this},drawGameObjectsBounds(e,t,i){e instanceof Phaser.GameObjects.Graphics&&(i=t,t=e,e=void 0),e===void 0&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var n=0,x=e.length;n<x;n++)this.getGameObjectManager(e[n]).drawGameObjectsBounds(t,i);return this}},PA=function(e){class t extends e{}var i={initManagers:yA,setTimeScale:CA,getTimeScale:SA,destroyManagers:TA};return Object.assign(t.prototype,i,z0,EA),t};function MA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U0={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function x(F,G,X){this.fn=F,this.context=G,this.once=X||!1}function S(F,G,X,Q,tt){if(typeof X!="function")throw new TypeError("The listener must be a function");var _=new x(X,Q||F,tt),nt=i?i+G:G;return F._events[nt]?F._events[nt].fn?F._events[nt]=[F._events[nt],_]:F._events[nt].push(_):(F._events[nt]=_,F._eventsCount++),F}function M(F,G){--F._eventsCount===0?F._events=new n:delete F._events[G]}function L(){this._events=new n,this._eventsCount=0}L.prototype.eventNames=function(){var G=[],X,Q;if(this._eventsCount===0)return G;for(Q in X=this._events)t.call(X,Q)&&G.push(i?Q.slice(1):Q);return Object.getOwnPropertySymbols?G.concat(Object.getOwnPropertySymbols(X)):G},L.prototype.listeners=function(G){var X=i?i+G:G,Q=this._events[X];if(!Q)return[];if(Q.fn)return[Q.fn];for(var tt=0,_=Q.length,nt=new Array(_);tt<_;tt++)nt[tt]=Q[tt].fn;return nt},L.prototype.listenerCount=function(G){var X=i?i+G:G,Q=this._events[X];return Q?Q.fn?1:Q.length:0},L.prototype.emit=function(G,X,Q,tt,_,nt){var lt=i?i+G:G;if(!this._events[lt])return!1;var ot=this._events[lt],dt=arguments.length,ct,ft;if(ot.fn){switch(ot.once&&this.removeListener(G,ot.fn,void 0,!0),dt){case 1:return ot.fn.call(ot.context),!0;case 2:return ot.fn.call(ot.context,X),!0;case 3:return ot.fn.call(ot.context,X,Q),!0;case 4:return ot.fn.call(ot.context,X,Q,tt),!0;case 5:return ot.fn.call(ot.context,X,Q,tt,_),!0;case 6:return ot.fn.call(ot.context,X,Q,tt,_,nt),!0}for(ft=1,ct=new Array(dt-1);ft<dt;ft++)ct[ft-1]=arguments[ft];ot.fn.apply(ot.context,ct)}else{var xt=ot.length,St;for(ft=0;ft<xt;ft++)switch(ot[ft].once&&this.removeListener(G,ot[ft].fn,void 0,!0),dt){case 1:ot[ft].fn.call(ot[ft].context);break;case 2:ot[ft].fn.call(ot[ft].context,X);break;case 3:ot[ft].fn.call(ot[ft].context,X,Q);break;case 4:ot[ft].fn.call(ot[ft].context,X,Q,tt);break;default:if(!ct)for(St=1,ct=new Array(dt-1);St<dt;St++)ct[St-1]=arguments[St];ot[ft].fn.apply(ot[ft].context,ct)}}return!0},L.prototype.on=function(G,X,Q){return S(this,G,X,Q,!1)},L.prototype.once=function(G,X,Q){return S(this,G,X,Q,!0)},L.prototype.removeListener=function(G,X,Q,tt){var _=i?i+G:G;if(!this._events[_])return this;if(!X)return M(this,_),this;var nt=this._events[_];if(nt.fn)nt.fn===X&&(!tt||nt.once)&&(!Q||nt.context===Q)&&M(this,_);else{for(var lt=0,ot=[],dt=nt.length;lt<dt;lt++)(nt[lt].fn!==X||tt&&!nt[lt].once||Q&&nt[lt].context!==Q)&&ot.push(nt[lt]);ot.length?this._events[_]=ot.length===1?ot[0]:ot:M(this,_)}return this},L.prototype.removeAllListeners=function(G){var X;return G?(X=i?i+G:G,this._events[X]&&M(this,X)):(this._events=new n,this._eventsCount=0),this},L.prototype.off=L.prototype.removeListener,L.prototype.addListener=L.prototype.on,L.prefixed=i,L.EventEmitter=L,e.exports=L})(U0);var wA=U0.exports,AA=MA(wA);class V0 extends AA{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}var X0={setEventEmitter(e,t){return t===void 0&&(t=V0),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},RA=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,LA=/^0x[0-9A-F]+$/i,Pf=function(e){if(typeof e!="string")return e;if(e==="")e=null;else if(RA.test(e))e=parseFloat(e);else if(LA.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0;break}return e};let W0=class{constructor(t){this.setEventEmitter(Gt(t,"eventEmitter",void 0)),this.setValueConverter(Gt(t,"valueConvert",!0)),this.setLoopEnable(Gt(t,"loop",!1)),this.setMultipleLinesTagEnable(Gt(t,"multipleLinesTag",!1));var i=Gt(t,"delimiters","<>");this.setDelimiters(i[0],i[1]),this.setTranslateTagNameCallback(Gt(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,i){i===void 0&&(i=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=i,t=sa(this.delimiterLeft),i=sa(this.delimiterRight);var n=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${i}`,n),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=Pf:t||(t=bA),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,i=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var n=this.reSplit.exec(t);if(!n){if(this.progressIndex<i&&(this.onContent(t.substring(this.progressIndex,i)),this.isPaused)){this.progressIndex=i;break}this.onComplete(),this.isRunning=!1;return}var x=this.reSplit.lastIndex,S=x-n[0].length;if(this.progressIndex<S&&(this.onContent(t.substring(this.progressIndex,S)),this.isPaused)){this.progressIndex=S;break}if(this.lastTagSource=n[0],this.onTag(n[1]),this.lastTagSource=void 0,this.progressIndex=x,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,i){return this.isPaused?this:(this.pause(),t.once(i,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const bA=function(e){return e};Object.assign(W0.prototype,X0);var OA=function(e,t,i){if(e==null)return[];t===void 0&&(t=Pf),i===void 0&&(i=",");for(var n=e.split(i),x=0,S=n.length;x<S;x++)n[x]=t(n[x]);return n};class FA extends W0{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Gt(t,"regex.tag",void 0)),this.setValueExpression(Gt(t,"regex.value",void 0));var i=Gt(t,"delimiters","<>");this.setDelimiters(i[0],i[1])}setTagExpression(t){return t||(t=_h),this.tagExpression=t,this}setValueExpression(t){return t||(t=_h),this.valueExpression=t,this}setDelimiters(t,i){super.setDelimiters(t,i);var n=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(n,"i"),this.tagExpression!==_h||this.valueExpression!==_h){var x=`${this.tagExpression}(=${this.valueExpression})?`,S=`/${this.tagExpression}`;t=sa(this.delimiterLeft),i=sa(this.delimiterRight);var M=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${x})|(${S}))${i}`,M)}return this}onTag(t){var i=t.match(this.reTag),n=i[1],x=n.charAt(0)==="/";if(x&&(n=n.substring(1,n.length)),this.translateTagNameCallback&&(n=this.translateTagNameCallback(n)),this.skipEventFlag=!1,x)this.emit(`-${n}`),this.skipEventFlag||this.emit("-",n),this.lastTagEnd=n;else{var S=OA(i[3],this.valueConverter);this.emit(`+${n}`,...S),this.skipEventFlag||this.emit("+",n,...S),this.lastTagStart=n}}}const _h="[^=]+";var DA=function(e,t,i){var n="color",x;t.on("start",function(){x=e.textStyle.color}).on(`+${n}`,function(S){e.textStyle.setColor(S),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setColor(x),t.skipEvent()}).on("complete",function(){e.textStyle.setColor(x)})},BA=function(e,t,i){var n="stroke",x;t.on("start",function(){x=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${n}`,function(S){S===void 0&&(S=x),e.textStyle.setStrokeStyle(S),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(x)})},IA=function(e,t,i){var n="b";t.on("start",function(){e.textStyle.setBold(!1)}).on(`+${n}`,function(){e.textStyle.setBold(!0),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setBold(!1),t.skipEvent()})},GA=function(e,t,i){var n="i";t.on("start",function(){e.textStyle.setItalic(!1)}).on(`+${n}`,function(){e.textStyle.setItalic(!0),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setItalic(!1),t.skipEvent()})},kA=function(e,t,i){var n="size",x;t.on("start",function(){x=e.textStyle.fontSize}).on(`+${n}`,function(S){e.textStyle.setFontSize(S),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setFontSize(x),t.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(x)})},NA=function(e,t,i){var n="y",x;t.on("start",function(){x=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on(`+${n}`,function(S){S===void 0&&(S=x),e.textStyle.setOffsetY(S),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})},zA=function(e,t,i){var n="x",x;t.on("start",function(){x=e.textStyle.offsetY,e.textStyle.setOffsetX(0)}).on(`+${n}`,function(S){S===void 0&&(S=x),e.textStyle.setOffsetX(S),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetX(0)})},UA=function(e,t,i){var n="left",x;t.on("start",function(){x=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)}).on(`+${n}`,function(S){S===void 0&&(S=x),e.textStyle.setLeftSpace(S),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setLeftSpace(0)})},VA=function(e,t,i){var n="right",x;t.on("start",function(){x=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)}).on(`+${n}`,function(S){S===void 0&&(S=x),e.textStyle.setRightSpace(S),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setRightSpace(0)})},XA=function(e,t,i){var n="shadow",x;t.on("start",function(){x=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${n}`,function(S){S===void 0&&(S=x),e.textStyle.setShadowColor(S),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(x)})},WA=function(e,t,i){var n="align";t.on(`+${n}`,function(x){e.textStyle.setAlign(x),t.skipEvent()}).on(`-${n}`,function(){e.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})},YA=function(e,t,i){var n="img";t.on(`+${n}`,function(x){var S=e.imageManager.get(x);S&&_g.call(e,S.key,S.frame,{width:S.width,hieght:S.height,leftSpace:S.left,rightSpace:S.right,color:S.tintFill?e.textStyle.color:void 0}),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},HA=function(e,t,i){var n="space";t.on(`+${n}`,function(x){t0.call(e,x),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},$A=function(e,t,i){var n="speed";t.on(`+${n}`,function(x){Y0(e,x),t.skipEvent()}).on(`-${n}`,function(){Y0(e,void 0),t.skipEvent()})},KA=function(e){this.typeWriter.setTypingSpeed(e)},Y0=function(e,t){It.call(e,"speed",KA,t,e)},ZA=function(e,t,i){var n="se";t.on(`+${n}`,function(x,S){It.call(e,n,JA,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="se2";t.on(`+${n}`,function(x,S){It.call(e,n,QA,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},JA=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect(t),i&&this.soundManager.fadeInSoundEffect(i)}},QA=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect2(t),i&&this.soundManager.fadeInSoundEffect2(i)}},jA=function(e,t,i){var n="se.fadein";t.on(`+${n}`,function(x){It.call(e,n,qA,x,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="se2.fadein";t.on(`+${n}`,function(x){It.call(e,n,_A,x,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},qA=function(e){this.soundManager.fadeInSoundEffect(e)},_A=function(e){this.soundManager.fadeInSoundEffect2(e)},tR=function(e,t,i){var n="se.fadeout";t.on(`+${n}`,function(x,S){S=S==="stop",It.call(e,n,eR,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="se2.fadeout";t.on(`+${n}`,function(x,S){S=S==="stop",It.call(e,n,iR,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},eR=function(e){this.soundManager.fadeOutSoundEffect(...e)},iR=function(e){this.soundManager.fadeOutSoundEffect2(...e)},sR=function(e,t,i){var n="se.volume";t.on(`+${n}`,function(x){It.call(e,n,rR,x,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="se2.volume";t.on(`+${n}`,function(x){It.call(e,n,nR,x,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},rR=function(e){this.soundManager.setSoundEffectVolume(e,!0)},nR=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},aR=function(e,t,i){var n="se.mute";t.on(`+${n}`,function(){It.call(e,n,oR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="se2.mute";t.on(`+${n}`,function(){It.call(e,n,hR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="se.unmute";t.on(`+${n}`,function(){It.call(e,n,lR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="se2.unmute";t.on(`+${n}`,function(){It.call(e,n,uR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},oR=function(){this.soundManager.setSoundEffectMute(!0)},hR=function(){this.soundManager.setSoundEffect2Mute(!0)},lR=function(){this.soundManager.setSoundEffectMute(!1)},uR=function(){this.soundManager.setSoundEffect2Mute(!1)},dR=function(e,t,i){var n="bgm";t.on(`+${n}`,function(x,S){It.call(e,n,fR,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){It.call(e,"bgm.stop",cR,void 0,e),t.skipEvent()});var n="bgm2";t.on(`+${n}`,function(x,S){It.call(e,n,vR,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){It.call(e,"bgm2.stop",pR,void 0,e),t.skipEvent()})},fR=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic(t),i&&this.soundManager.fadeInBackgroundMusic(i)},cR=function(){this.soundManager.stopBackgroundMusic()},vR=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic2(t),i&&this.soundManager.fadeInBackgroundMusic2(i)},pR=function(){this.soundManager.stopBackgroundMusic2()},gR=function(e,t,i){var n="bgm.fadein";t.on(`+${n}`,function(x){It.call(e,n,mR,x,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="bgm2.fadein";t.on(`+${n}`,function(x){It.call(e,n,xR,x,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},mR=function(e){this.soundManager.fadeInBackgroundMusic(e)},xR=function(e){this.soundManager.fadeInBackgroundMusic2(e)},yR=function(e,t,i){var n="bgm.fadeout";t.on(`+${n}`,function(x,S){S=S==="stop",It.call(e,n,CR,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="bgm2.fadeout";t.on(`+${n}`,function(x,S){S=S==="stop",It.call(e,n,SR,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},CR=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},SR=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},TR=function(e,t,i){var n="bgm.cross";t.on(`+${n}`,function(x,S){It.call(e,n,ER,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="bgm2.cross";t.on(`+${n}`,function(x,S){It.call(e,n,PR,[x,S],e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},ER=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},PR=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},MR=function(e,t,i){var n="bgm.pause";t.on(`+${n}`,function(){It.call(e,n,wR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){It.call(e,"bgm.resume",AR,void 0,e),t.skipEvent()});var n="bgm2.pause";t.on(`+${n}`,function(){It.call(e,n,RR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){It.call(e,"bgm2.resume",LR,void 0,e),t.skipEvent()})},wR=function(){this.soundManager.pauseBackgroundMusic()},AR=function(){this.soundManager.resumeBackgroundMusic()},RR=function(){this.soundManager.pauseBackgroundMusic2()},LR=function(){this.soundManager.resumeBackgroundMusic2()},bR=function(e,t,i){var n="bgm.volume";t.on(`+${n}`,function(x){It.call(e,n,OR,x,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="bgm2.volume";t.on(`+${n}`,function(x){It.call(e,n,FR,x,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},OR=function(e){this.soundManager.setBackgroundMusicVolume(e)},FR=function(e){this.soundManager.setBackgroundMusicVolume2(e)},DR=function(e,t,i){var n="bgm.mute";t.on(`+${n}`,function(){It.call(e,n,BR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="bgm2.mute";t.on(`+${n}`,function(){It.call(e,n,IR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="bgm.unmute";t.on(`+${n}`,function(){It.call(e,n,GR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()});var n="bgm2.unmute";t.on(`+${n}`,function(){It.call(e,n,kR,void 0,e),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},BR=function(){this.soundManager.setBackgroundMusicMute(!0)},IR=function(){this.soundManager.setBackgroundMusic2Mute(!0)},GR=function(){this.soundManager.setBackgroundMusicMute(!1)},kR=function(){this.soundManager.setBackgroundMusic2Mute(!1)},NR=function(e,t,i){var n="camera.fadein";t.on(`+${n}`,function(x,S,M,L){It.call(e,n,zR,[x,S,M,L],e),t.skipEvent()})},zR=function(e){this.cameraTarget.fadeIn(...e)},UR=function(e,t,i){var n="camera.fadeout";t.on(`+${n}`,function(x,S,M,L){It.call(e,n,VR,[x,S,M,L],e),t.skipEvent()})},VR=function(e){this.cameraTarget.fadeOut(...e)},XR=function(e,t,i){var n="camera.shake";t.on(`+${n}`,function(x,S){It.call(e,n,WR,[x,S],e),t.skipEvent()})},WR=function(e){this.cameraTarget.shake(...e)},YR=function(e,t,i){var n="camera.flash";t.on(`+${n}`,function(x,S,M,L){It.call(e,n,HR,[x,S,M,L],e),t.skipEvent()})},HR=function(e){this.cameraTarget.flash(...e)},$R=function(e,t,i){var n="camera.zoom";t.on(`+${n}`,function(x){It.call(e,n,KR,x,e),t.skipEvent()}).on(`+${n}.to`,function(x,S,M){It.call(e,"camera.zoom.to",ZR,[x,S,M],e),t.skipEvent()})},KR=function(e){this.cameraTarget.setZoom(e)},ZR=function(e){this.cameraTarget.zoomTo(...e)};const H0=Phaser.Math.DegToRad;var JR=function(e,t,i){var n="camera.rotate";t.on(`+${n}`,function(x){x=H0(x),It.call(e,n,QR,x,e),t.skipEvent()}).on(`+${n}.to`,function(x,S,M){x=H0(x),It.call(e,"camera.rotate.to",jR,[x,S,M],e),t.skipEvent()})},QR=function(e){this.cameraTarget.setRotation(e)},jR=function(e){var t=e[0],i=e[1],n=e[2];this.cameraTarget.rotateTo(t,!1,i,n)},qR=function(e,t,i){var n="camera.scroll";t.on(`+${n}`,function(x,S){It.call(e,n,_R,[x,S],e),t.skipEvent()}).on(`+${n}.to`,function(x,S,M,L){It.call(e,"camera.scroll.to",tL,[x,S,M,L],e),t.skipEvent()})},_R=function(e){this.cameraTarget.setScroll(...e)},tL=function(e){var t=e[0],i=e[1],n=e[2],x=e[3],S=this.cameraTarget,M=S.scrollX,L=S.scrollY;S.setScroll(t,i),t+=S.centerX,i+=S.centerY,S.setScroll(M,L),S.pan(t,i,n,x)},eL=function(e,t,i){var n="wait",x="click";t.on(`+${n}`,function(S){$0(e,S),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()}).on(`+${x}`,function(){$0(e,"click"),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},iL=function(e){this.typeWriter.wait(e)},$0=function(e,t){It.call(e,"wait",iL,t,e)},sL=function(e,t,i){var n="r";t.on(`+${n}`,function(){eo.call(e,`
`),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},rL=function(e,t,i){for(var n=["pagebreak","pb"],x=0,S=n.length;x<S;x++){var M=n[x];t.on(`+${M}`,function(){eo.call(e,"\f"),t.skipEvent()}).on(`-${M}`,function(){t.skipEvent()})}},nL=function(e,t,i){var n="content.off";t.on(`+${n}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},aL=function(e,t,i){var n="content.on";t.on(`+${n}`,function(){t.setContentOutputEnable(),t.skipEvent()})},oL=function(e,t,i){t.on("content",function(n){if(t.contentOutputEnable)eo.call(e,n);else{var x=`+${t.lastTagStart}`;e.emit(`parser.${x}#content`,t,n)}})},hL=function(e,t,i){t.on("start",function(){e.emit("parser.start",t)}).on("+",function(n,...x){if(!t.skipEventFlag){var S=`+${n}`,M=x;e.emit(`parser.${S}`,t,...x,M),K0(e,S,M)}}).on("-",function(n){if(!t.skipEventFlag){var x=`-${n}`,S=[];e.emit(`parser.${x}`,t,S),K0(e,x,S)}}).on("complete",function(){e.emit("parser.complete",t)})},lL=function(e,t){var i=`tag.${t}`;e==null?this.emit(i):this.emit(i,...e)},K0=function(e,t,i){It.call(e,t,lL,i,e)};const Z0=[DA,BA,IA,GA,kA,XA,WA,NA,zA,UA,VA,YA,HA,$A,ZA,jA,tR,sR,aR,dR,gR,yR,TR,MR,bR,DR,NR,UR,XR,YR,$R,JR,qR,eL,sL,rL,nL,aL,oL,hL];var uL=function(e,t,i){for(var n=0,x=Z0.length;n<x;n++)Z0[n](e,t,i)},dL=function(e,t){for(var i=e.commentLineStart,n=t.split(`
`),x=0,S=n.length;x<S;x++){var M=n[x];M===""||(M.trim().length===0||i&&M.startsWith(i))&&(n[x]="")}return n.join("")};const fL=Phaser.Utils.Objects.GetValue;class cL extends FA{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("delimiters")||(i.delimiters="[]"),super(i),uL(t,this,i),this.setCommentLineStartSymbol(fL(i,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(dL(this,t)),this}}var vL={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return e===void 0&&(e=this.defaultSpeed),this.speed=e,this}};const mn="page.fadeout",Mf="_remove.play",J0=[mn,Mf];var pL=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(mn),this;var e=this.children.filter(function(n){return n.renderable}),t=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(!t)this.emit(mn);else if(t.once)t.once("complete",function(){this.emit(mn)},this);else if(t.then){var i=this;t.then(function(){i.emit(mn)})}else this.emit(mn);return this},tl=function(e,t){return new Promise(function(i,n){e.once(t,function(){i()})})},Ke=function(e){return tl(e,"complete")},gL=function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),Ke(this)};const mL="delay",Q0="anim";var j0=function(e){e===void 0&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(i.renderable){var n=this.animationConfig;if(n.duration>0){var x=this.timeline.addTimer({name:Q0,target:i,duration:n.duration,yoyo:n.yoyo,onStart:n.onStart,onProgress:n.onProgress,onComplete:n.onComplete});this.skipTypingAnimation&&x.seek(1)}else n.onStart&&n.onStart(i,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",i);var S=this.nextChild;if(S&&!(this.skipSpaceEnable&&oP(S))){if(t+=this.speed+e,e=0,t>0){this.typingTimer=this.timeline.addTimer({name:mL,target:this,duration:t,onComplete:function(M,L,F){M.typingTimer=void 0,j0.call(M,F.remainder)}});break}}}else hP(i)&&i.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},xL=function(){return this.timeline.pause(),this},yL=function(){return this.timeline.resume(),this},CL=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},SL=function(e){return this.isTypingPaused?(e===void 0&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this},TL=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},EL=function(e,t){var i=t.split(".");return e.gameObjectManagers.hasOwnProperty(i[0])},PL=function(e,t,i,n){var x=e.waitEventManager,S=t.split("."),M=S[0],L=e.getGameObjectManager(M),F=`wait.${M}`;switch(S.length){case 1:x.waitGameObjectManagerEmpty(M),e.emit(F);return;case 2:var G=S[1];x.waitGameObjectDestroy(M,G),e.emit(F,G);return;case 3:var G=S[1],X=S[2],Q=L.getProperty(G,X);if(typeof Q=="number"){x.waitGameObjectTweenComplete(M,G,X),e.emit(F,G,X);return}var tt=X,_=tt.startsWith("!");if(_&&(tt=tt.substring(1)),L.hasData(G,tt)){x.waitGameObjectDataFlag(M,G,tt,!_),e.emit(F,G,tt);return}else{x.waitTime(0);return}}};const ML=Phaser.Input.Keyboard.KeyCodes;var q0=function(e,t,i,n){var x=e.waitEventManager;x.clearWaitCompleteCallbacks().addWaitCompleteCallback(i,n),typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var S=0,M=t.length;S<M;S++){var L=t[S];if(L==null||L==="wait"){var F=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",F)}else if(typeof L=="number"||!isNaN(L)){var G=parseFloat(L);x.waitTime(G),e.emit("wait.time",G)}else if(L==="click")x.waitClick(),e.emit("wait.click");else if(L==="se"){x.waitSoundEffectComplete();var X=e.soundManager.getLastSoundEffect();e.emit("wait.music",X)}else if(L==="se2"){x.waitSoundEffect2Complete();var X=e.soundManager.getLastSoundEffect2();e.emit("wait.music",X)}else if(L==="bgm"){x.waitBackgroundMusicComplete();var X=e.soundManager.getBackgroundMusic();e.emit("wait.music",X)}else if(L==="bgm2"){x.waitBackgroundMusic2Complete();var X=e.soundManager.getBackgroundMusic2();e.emit("wait.music",X)}else if(ML.hasOwnProperty(L.toUpperCase()))x.waitKeyDown(L),e.emit("wait.keydown",L);else if(TL(L))x.waitCameraEffectComplete(L),e.emit("wait.camera",L);else if(EL(e,L))PL(e,L);else{var F=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit(`wait.${L}`,F)}}},wL=function(e){return this.ignoreWait?this:(this.pauseTyping(),q0(this.textPlayer,e,this.resumeTyping,this),this)},AL=function(e){return e===void 0&&(e=!0),this.ignoreWait=e,this},RL=function(e){return e===void 0&&(e=!0),this.skipSpaceEnable=e,this},LL=function(e){if(e===void 0&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(Q0),i=0,n=t.length;i<n;i++)t[i].seek(1);return this},bL=function(e){if(e===void 0&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},OL=function(){return this.typingTimer&&this.typingTimer.seek(1),this},_0={fadeOutPage:pL,start:gL,typing:j0,pause:xL,resume:yL,pauseTyping:CL,resumeTyping:SL,wait:wL,setIgnoreWait:AL,setSkipSpaceEnable:RL,setSkipTypingAnimation:LL,setSkipSoundEffect:bL,skipCurrentTypingDelay:OL};Object.assign(_0,vL);const va=Phaser.Utils.Objects.GetValue;class tm{constructor(t,i){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(va(i,"onTypingStart",DL)),this.setDefaultTypingSpeed(va(i,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(va(i,"skipSpace",!1)),this.setAnimationConfig(va(i,"animation",void 0)),this.setMinSizeEnable(va(i,"minSizeEnable",!1)),this.setFadeOutPageCallback(va(i,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=FL),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var FL=function(e){e.setVisible&&e.setVisible()},DL=function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];n.setVisible&&n.setVisible(!1)}};Object.assign(tm.prototype,io,_0);class BL extends gf{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}var IL={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this}},em={};Object.assign(em,IL);var im=function(e){return!e||e==="sprite"?e=GL:e==="image"&&(e=kL),e},GL=function(e,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),e.add.sprite(0,0,t,i)},kL=function(e,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),e.add.image(0,0,t,i)};class sm extends ua{constructor(t,i){i===void 0&&(i={}),i.BobClass=BL,super(t,i)}setCreateGameObjectCallback(t,i){return t=im(t),super.setCreateGameObjectCallback(t,i),this}}Object.assign(sm.prototype,em);var rm=function(e,t){return e.length===3&&e[0]===t&&e[2]==="play"},NL=function(e,t){return e.length===3&&e[0]===t&&e[2]==="stop"},zL=function(e,t,i){var n=i.name;t.on("+",function(x,...S){if(!t.skipEventFlag){var M=x.split("."),L;if(rm(M,n))L=M[1];else return;It.call(e,`${n}.play`,UL,[n,L,S],e),t.skipEvent()}}).on("+",function(x){if(!t.skipEventFlag){var S=x.split("."),M;if(NL(S,n))M=S[1];else return;It.call(e,`${n}.stop`,nm,[n,M],e),t.skipEvent()}}).on("-",function(x){if(!t.skipEventFlag){var S=x.split("."),M;if(rm(S,n))M=S[1];else return;It.call(e,`${n}.stop`,nm,[n,M],e),t.skipEvent()}})},UL=function(e){var t,i,n;[t,i,n]=e;var x=n.shift(),S=this.getGameObjectManager(t);S.playAnimation(i,x),n.length>0&&S.chainAnimation(i,n)},nm=function(e){var t,i;[t,...i]=e;var n=this.getGameObjectManager(t);n.stopAnimation(...i)},VL=function(e,t){return e.length===3&&e[0]===t&&e[2]==="pause"},XL=function(e,t,i){var n=i.name;t.on("+",function(x){if(!t.skipEventFlag){var S=x.split("."),M;if(VL(S,n))M=S[1];else return;It.call(e,`${n}.pause`,WL,[n,M],e),t.skipEvent()}})},WL=function(e){var t,i;[t,...i]=e;var n=this.getGameObjectManager(t);n.pauseAnimation(...i)},YL=function(e,t){return e.length===3&&e[0]===t&&e[2]==="chain"},HL=function(e,t,i){var n=i.name;t.on("+",function(x){if(!t.skipEventFlag){var S=x.split("."),M;if(YL(S,n))M=S[1];else return;var L=Array.prototype.slice.call(arguments,1);It.call(e,`${n}.chain`,$L,[n,M,L],e),t.skipEvent()}})},$L=function(e){var t,i;[t,...i]=e;var n=this.getGameObjectManager(t);n.chainAnimation(...i)};const KL=[zL,XL,HL];var ZL=function(e){e===void 0&&(e={}),e.name="sprite",e.parseCallbacks=KL,e.createGameObject=im(e.createGameObject),this.addGameObjectManager(e,sm)},am=function(e,t){return e.length===2&&e[0]===t},JL=function(e,t,i){var n=i.name;t.on("+",function(x,...S){if(!t.skipEventFlag){var M=x.split("."),L;if(am(M,n))L=M[1];else return;It.call(e,`${n}.add`,QL,[n,L,...S],e),t.skipEvent()}}).on("-",function(x){if(!t.skipEventFlag){var S=x.split("."),M;if(am(S,n))M=S[1];else return;It.call(e,`${n}.remove`,jL,[n,M],e),t.skipEvent()}})},QL=function(e){var t,i;[t,...i]=e;var n=this.getGameObjectManager(t);n.add(...i)},jL=function(e){var t,i;[t,...i]=e;var n=this.getGameObjectManager(t);n.remove(...i)},qL=function(e,t,i){var n=i.name;t.on("-",function(x){t.skipEventFlag||x===n&&(It.call(e,`${n}.removeall`,_L,n,e),t.skipEvent())})},_L=function(e){var t=this.getGameObjectManager(e);t.removeAll()},tb=function(e,t){return e.length===3&&e[0]===t},eb=function(e,t,i){var n=i.name;t.on("+",function(x,...S){if(!t.skipEventFlag){var M=x.split("."),L,F;if(tb(M,n))L=M[1],F=M[2];else return;It.call(e,`${n}.call`,ib,[n,L,F,...S],e),t.skipEvent()}})},ib=function(e){var t,i,n,x;[t,i,n,...x]=e;var S=`${t}.${n}`;if(this.emit(S,i,...x),!(this.listenerCount(S)>0)){var M=this.getGameObjectManager(t);M.hasMethod(i,n)?M.call(i,n,...x):M.setProperty(i,n,x[0])}},sb={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},rb=function(e,t){return e.length===4&&e[0]===t&&sb[e[3]]},nb=function(e,t,i){var n=i.name;e.getGameObjectManager(n),t.on("+",function(x,S,M,L,F){if(!t.skipEventFlag){var G=x.split("."),X,Q,tt;if(rb(G,n))X=G[1],Q=G[2],tt=G[3];else return;typeof L=="number"&&(F=L,L=void 0),It.call(e,`${n}.ease`,ab,[n,X,Q,S,M,L,F,tt],e),t.skipEvent()}})},ab=function(e){var t,i,n,x,S,M,L,F;[t,i,n,x,S,M,L,F]=e;var G=this.getGameObjectManager(t),X=G.getProperty(i,n);if(typeof X=="number"){F.endsWith("Left")||F.endsWith("Up")?F.startsWith("to")||F.startsWith("yoyo")?x=X-x:F.startsWith("from")&&(G.setProperty(i,n,X-x),x=X):F.endsWith("Right")||F.endsWith("Down")?F.startsWith("to")||F.startsWith("yoyo")?x=X+x:F.startsWith("from")&&(G.setProperty(i,n,X+x),x=X):F==="from"&&(G.setProperty(i,n,x),x=X);var Q=F.startsWith("yoyo");G.easeProperty(i,{property:n,value:x,duration:S,ease:M,repeat:L,yoyo:Q})}};const om=[JL,qL,eb,nb],ob=z0.addGameObjectManager;var hb={addGameObjectManager(e,t){e=e?Hi(e):{};var i=e.name;i||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var n=e.defaultLayer,x=e.createGameObject,S=this.layerManager;e.createGameObject=function(G,...X){var Q=x.call(this,G,...X);return n&&S&&S.addToLayer(n,Q),Q},ob.call(this,e,t);var M=e.parseCallbacks;M?M=[...M,...om]:M=om;for(var L=0,F=M.length;L<F;L++)M[L](this,this.parser,e);return this}},lb=function(e){return this.waitEventManager.setClickTarget(e),this},ub=function(e){return this.waitEventManager.setCameraTarget(e),this},db=function(e){var t=this;e?typeof e=="function"?this.nextPageInput=function(i,n){var x=t.waitEventManager;x.clearWaitCompleteCallbacks().addWaitCompleteCallback(i,n);var S=x.getWaitCompleteTriggerCallback();e.call(t,S)}:this.nextPageInput=function(i,n){q0(t,e,i,n)}:this.nextPageInput=null},fb=function(e,t){return this.imageManager.add(e,t),this},cb={play(e){return this.isPlaying?this:(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(e){var t=Ke(this);return this.play(e),t}},wf=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once(mn,vb,this).fadeOutPage(),this)},vb=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var t=function(){this.emit(Mf),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?wf.call(this):this.nextPageInput&&this.nextPageInput(wf,this))};this.once(Mf,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(e.children)},pb={pauseTyping(){return this.typeWriter.pauseTyping(),this},pause(){return this.pauseTyping(),this.timeline.pause(),this}},gb={resumeTyping(e){return this.typeWriter.resumeTyping(e),this},resume(){return this.resumeTyping(),this.timeline.resume(),this}},mb=function(e){return this.typeWriter.wait(e),this},xb={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}},yb=function(e){return this.typeWriter.setIgnoreWait(e),this},Cb=function(e){return e===void 0&&(e=!0),this.ignoreNextPageInput=e,this},Sb=function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,n=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(i).setSkipSoundEffect(n)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},Tb={getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,t){return this.addGameObject("sprite",e,t),this}},Eb={setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,t){return this.contentCallback=e,this.contentCallbackScope=t,this}},hm={setClickTarget:lb,setCameraTarget:ub,setNextPageInput:db,addImage:fb,typingNextPage:wf,wait:mb,setIgnoreWait:yb,setIgnoreNextPageInput:Cb,showPage:Sb};Object.assign(hm,hb,cb,pb,gb,xb,Tb,Eb);var Pb=function(e){for(var t=0,i=J0.length;t<i;t++)e.emit(J0[t])};const lm=Phaser.Utils.Objects.IsPlainObject,pa=Phaser.Utils.Objects.GetValue;class Af extends PA(na){constructor(t,i,n,x,S,M){lm(i)?M=i:lm(x)&&(M=x),M===void 0&&(M={});var L=M.text;delete M.text,super(t,i,n,x,S,M),this.type="rexTextPlayer",this.initManagers(t,M),this.parser=new cL(this,pa(M,"parser",void 0)),this.typeWriter=new tm(this,pa(M,"typing",void 0)),this._imageManager=void 0;var F=pa(M,"images",void 0);F&&this.addImage(F);var G=pa(M,"sprites");G!==!1&&G!==null&&ZL.call(this,G),this.setIgnoreNextPageInput(pa(M,"ignoreNextPageInput",!1)),this.setNextPageInput(pa(M,"nextPageInput",null)),this.isPlaying=!1,L&&this.play(L)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new ef(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(Pb(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(Af.prototype,hm),W.register("textPlayer",function(e,t,i,n,x){var S=new Af(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.TextPlayer",Af);const um={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},dm={direction:["direction",void 0]};var Cr=function(e,t,i){if(typeof i=="string")e.hasOwnProperty(i)&&(t[i]=e[i]);else{var n=i;if(Array.isArray(n))for(var x=0,S=n.length;x<S;x++)Cr(e,t,n[x]);else for(var i in n)Cr(e,t,i)}},Mb=function(e){e===void 0&&(e={});var t={};return Cr(e,t,"inputType"),Cr(e,t,"type"),Cr(e,t,"style"),Cr(e,t,dm),Cr(e,t,um),t},Rf=function(e,t,i,n,x){if(t)return!(i&&!i(e,t)||!fm(e,t)||n&&!n(e,t));x===void 0&&(x=!1);for(var S=e.scene.input.manager,M=S.pointersTotal,L=S.pointers,t,F=0;F<M;F++)if(t=L[F],!(i&&!i(e,t))&&fm(e,t)&&!(n&&!n(e,t)))return x?t:!0;return!1},fm=function(e,t){for(var i=e.scene,n=i.input.cameras.getCamerasBelowPointer(t),x=i.input.manager,S=[e],M=0,L=n.length;M<L;M++)if(x.hitTest(t,S,n[M],el),el.length>0)return el.length=0,!0;return el.length=0,!1},el=[],ga=void 0,wb=function(e){e!==ga&&(ga!==void 0&&ga.close(),ga=e)},Ab=function(e){e===ga&&(ga=void 0)};const Rb=Phaser.Utils.Objects.GetValue;var il=function(e,t,i){i===void 0&&(i={});var n,x;for(var S in e)n=e[S],x=Rb(t,S,n[1]),x!==void 0&&(i[n[0]]=x);return i},cm=function(e){e.addEventListener("touchstart",ma,!1),e.addEventListener("touchmove",ma,!1),e.addEventListener("touchend",ma,!1),e.addEventListener("mousedown",ma,!1),e.addEventListener("mouseup",ma,!1),e.addEventListener("mousemove",ma,!1)},ma=function(e){e.stopPropagation()},vm=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},Lb=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",vm,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.clickOutSideTarget?(S0.call(this.clickOutSideTarget,this.parent),C0.call(this.clickOutSideTarget,this.parent),this.clickOutSideTarget.setInteractive().on("pointerdown",this.onClickOutside,this)):this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},bb=function(e){if(e){var t=e.parentElement;t&&t.removeChild(e)}},Ob=function(){this.isOpened=!1,this.updateText(),this.enterCloseEnable&&this.scene.input.keyboard.off("keydown-ENTER",vm,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.clickOutSideTarget?this.clickOutSideTarget.disableInteractive().off("pointerdown",this.onClickOutside,this):this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),bb(this.node),this.node=void 0,this.emit("close",this)};const Lf=Phaser.Utils.Objects.GetValue;var Fb=function(e,t){var i,n=Lf(t,"inputType",void 0);n===void 0&&(n=Lf(t,"type","text")),n==="textarea"?(i=document.createElement("textarea"),i.style.resize="none"):(i=document.createElement("input"),i.type=n);var x=Lf(t,"style",void 0),S=i.style;il(dm,x,S),S.position="absolute",S.opacity=0,S.pointerEvents="none",S.zIndex=0,S.transform="scale(0)",il(um,t,i),cm(i);var M=e.scene.sys.scale,L=M.isFullscreen?M.fullscreenTarget:document.body;return L.appendChild(i),i.addEventListener("focus",function(F){Lb.call(e)}),i.addEventListener("blur",function(F){Ob.call(e)}),i},Db=function(){return this.isOpened?this:this.readOnly?this:(wb(this),this.node||(this.node=Fb(this,this.nodeConfig)),this.setFocus(),this)},Bb=function(){return this.isOpened?(Ab(this),this.setBlur(),this):this},Ib={open:Db,close:Bb};const Ds=Phaser.Utils.Objects.GetValue;class bf extends ye{constructor(t,i){super(t);var n=Ds(i,"inputType",void 0);n===void 0&&(n=Ds(i,"type","text")),this.setEnterCloseEnable(Ds(i,"enterClose",n!=="textarea"));var x=Ds(i,"onOpen",void 0);x||(x=Ds(i,"onFocus",void 0)),this.onOpenCallback=x,this.clickOutSideTarget=Ds(i,"clickOutSideTarget",void 0);var S=Ds(i,"onClose",void 0);S||(S=Ds(i,"onBlur",void 0)),this.onCloseCallback=S,this.onUpdateCallback=Ds(i,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=Mb(i),this.node=void 0}destroy(){this.close(),this.clickOutSideTarget&&this.clickOutSideTarget.destroy(),super.destroy()}onClickOutside(t){Rf(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,i),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node?(this.node.style[t]=i,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(bf.prototype,Ib);var pm=function(e,t,i){e=e.replace(" ","");var n=i.previousText;if(e===n)return e;if(isNaN(e)){i.emit("nan",e,i),e=n;var x=i.cursorPosition-1;i.setText(e),i.setCursorPosition(x)}else i.previousText=e;return e},Gb=function(e){var t=e.parent,i=e.isOpened?e.selectionStart:null,n=e.isOpened?e.selectionEnd:null,x=e.prevSelectionStart,S=e.prevSelectionEnd;if(!(x===i&&S===n)){var M,L;x===null?(M=i,L=n):i===null?(M=x,L=S):(M=Math.min(x,i),L=Math.max(S,n));for(var F=M;F<L;F++){var G;x===null?G=!1:G=F>=x&&F<S;var X;if(i===null?X=!1:X=F>=i&&F<n,G!==X){var Q=t.getCharChild(F);if(Q){var tt=G?"rangeout":"rangein";t.emit(tt,Q,F,t)}}}e.prevSelectionStart=i,e.prevSelectionEnd=n}},kb=function(e){var t=e.parent,i=0,n=t.width,x=0,S=t.height,M=e.drawX,L=e.drawY,F=M+e.drawTLX,G=M+e.drawTRX,X=L+e.drawTLY,Q=L+e.drawBLY,tt;F<i?tt=i-F:G>n?tt=n-G:tt=0;var _;X<x?_=x-X:Q>S?_=S-Q:_=0,t._textOX+=tt,t._textOY+=_},Nb=function(e){var t=e.parent,i=t.text;e.requestCursorPosition!==null&&(e.setCursorPosition(e.requestCursorPosition),e.requestCursorPosition=null);var n=e.cursorPosition;if(e.prevCursorPosition!==n){if(e.prevCursorPosition!==null&&e.prevCursorPosition>i.length&&(e.prevCursorPosition=null),e.prevCursorPosition!==null){var x=t.getCharChild(e.prevCursorPosition);x&&(x.text===`
`&&x.clearTextSize(),t.emit("cursorout",x,e.prevCursorPosition,t))}if(n!=null){var x=t.getCharChild(n);x&&(x.text===`
`&&x.copyTextSize(t.lastInsertCursor),kb(x),t.emit("cursorin",x,n,t))}t.emit("movecursor",n,e.prevCursorPosition,t),e.prevCursorPosition=n}},gm=function(e){var t=e.prevSelectionStart;if(t!==null){for(var i=e.prevSelectionEnd,n=e.parent,x=t;x<i;x++){var S=n.getCharChild(x);S&&n.emit("cursorout",S,x,n)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},mm=function(e){var t=e.prevCursorPosition;if(t!==null){var i=e.parent,n=i.getCharChild(t);n&&i.emit("cursorout",n,t,i),e.prevCursorPosition=null}};const zb=Phaser.Utils.Objects.GetValue;let Ub=class extends bf{constructor(t,i){super(t,i),this.setSelectAllWhenFocusEnable(zb(i,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,this.requestCursorPosition=null,t.on("pointerdown",function(n,x,S,M){var L=t.getNearestChild(x,S),F=t.getCharIndex(L);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(F),this.cursorMoveStartIndex=F,this.firstClickAfterOpen=!1},this).on("pointermove",function(n,x,S,M){if(n.isDown){var L=t.getNearestChild(x,S),F=t.getCharIndex(L);this.cursorMoveStartIndex<F?this.selectText(this.cursorMoveStartIndex,F+1):this.selectText(F,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")}).on("keydown-ENTER",function(){t.emit("keydown-ENTER")})}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,i=this.text;if(this.onUpdateCallback){var n=this.onUpdateCallback(i,t,this);n!=null&&(i=n)}return t.text!==i&&t.setText(i),this.isOpened?this.selectionStart!==this.selectionEnd?(mm(this),Gb(this)):(gm(this),Nb(this)):(gm(this),mm(this)),this}setNumberInput(){return this.onUpdateCallback=pm,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}setRequestCursorPosition(t){return this.isOpened?(this.requestCursorPosition=t,this):this}};const Vb=Phaser.Utils.Objects.GetValue,Xb=["inputType","onOpen","clickOutSideTarget","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var Wb=function(e,t){var i=Vb(t,"edit");return i===void 0&&(i={}),Cr(t,i,Xb),new Ub(e,i)},Bs=function(e,t){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var i=t.split("."),n=e,x=0;x<i.length;x++)if(n.hasOwnProperty(i[x]))n=n[i[x]];else return!1;return!0}else return!1},Of=function(e){if(e.parentContainer)return Of(e.parentContainer);var t=y0(e);return t?Of(t):e},Yb=function(e){for(var t=Of(e).cameraFilter,i=e.scene.sys.cameras.cameras,n,x,S=0,M=i.length;S<M;S++)if(n=i[S],x=(t&n.id)>0,!x)return n;return null};class xm extends ye{constructor(t,i){super(t),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}resize(){var t=this.scene,i=this.parent,n=Yb(i);if(n){i.setScrollFactor(0).setOrigin(.5);var x=t.sys.scale.gameSize,S=x.width,M=x.height,L=1/n.zoom,F=S/2,G=M/2,X=S*L,Q=M*L;(i.x!==F||i.y!==G)&&i.setPosition(F,G),(i.width!==X||i.height!==Q)&&i.setSize(X,Q)}}}const Hb=Phaser.GameObjects.Zone;let Ff=class extends Hb{constructor(t){super(t,0,0,2,2),this.fullWindow=new xm(this)}};var $b=function(e,t){var i=!t.textArea;if(!Bs(t,"wrap.vAlign")){var n=i?"center":"top";J(t,"wrap.vAlign",n)}if(Bs(t,"wrap.wrapMode")||J(t,"wrap.wrapMode","char"),!Bs(t,"wrap.maxLines")){var n=i?1:void 0;J(t,"wrap.maxLines",n)}if(i&&J(t,"wrap.wrapWidth",1/0),Bs(t,"wrap.useDefaultTextHeight")||J(t,"wrap.useDefaultTextHeight",!0),t.edit||(t.edit={}),!Bs(t.edit,"inputType")){var n=i?"text":"textarea";J(t.edit,"inputType",n)}if(t.clickOutSideTarget===!0){var x=new Ff(e);e.add.existing(x),t.clickOutSideTarget=x}return t},sl=function(e,t,i,n){if(i===void 0&&(i="."),n===void 0&&(n={}),!e)return n;if(t in e)return Object.assign(n,e[t]);t+=i;for(var x in e)x.startsWith(t)&&(n[x.replace(t,"")]=e[x]);return n},Kb=function(){var e=this.scene.input.keyboard;this.textEdit.on("open",function(){e.on("keydown-UP",this.cursorMoveUp,this).on("keydown-DOWN",this.cursorMoveDown,this)},this).on("close",function(){e.off("keydown-UP",this.cursorMoveUp,this).off("keydown-DOWN",this.cursorMoveDown,this)},this)},rl=function(e,t,i){if(i===void 0&&(i={}),Array.isArray(t))for(var n,x=0,S=t.length;x<S;x++)n=t[x],i[n]=e[n];else for(var n in t)i[n]=e[n];return i},mo=function(e,t){for(var i in e)if(!(i in t)||e[i]!==t[i])return!1;for(var i in t)if(!(i in e))return!1;return!0},Zb=function(e){so(e)||this.setCursorStyle(e).on("cursorin",function(t){var i=this.cursorStyle,n=rl(t.style,i);mo(i,n)||(t.styleSave=n,t.modifyStyle(i))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},Jb=function(e){so(e)||this.setRangeStyle(e).on("rangein",function(t){var i=this.rangeStyle,n=rl(t.style,i);mo(i,n)||(t.styleSave=n,t.modifyStyle(i))},this).on("rangeout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},Qb=function(e){so(e)||this.setFocusStyle(e).on("open",function(){var t=this.background,i=this.focusStyle,n=rl(t,i);mo(i,n)||(t.styleSave=n,t.modifyStyle(i))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},jb=function(e){var t=e.createCharChild("|");return t.text="",t};function Is(){}Is.prototype={diff(e,t,i={}){let n=i.callback;typeof i=="function"&&(n=i,i={}),this.options=i;let x=this;function S(_){return n?(setTimeout(function(){n(void 0,_)},0),!0):_}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));let M=t.length,L=e.length,F=1,G=M+L;i.maxEditLength&&(G=Math.min(G,i.maxEditLength));let X=[{newPos:-1,components:[]}],Q=this.extractCommon(X[0],t,e,0);if(X[0].newPos+1>=M&&Q+1>=L)return S([{value:this.join(t),count:t.length}]);function tt(){for(let _=-1*F;_<=F;_+=2){let nt,lt=X[_-1],ot=X[_+1],dt=(ot?ot.newPos:0)-_;lt&&(X[_-1]=void 0);let ct=lt&&lt.newPos+1<M,ft=ot&&0<=dt&&dt<L;if(!ct&&!ft){X[_]=void 0;continue}if(!ct||ft&&lt.newPos<ot.newPos?(nt=_b(ot),x.pushComponent(nt.components,void 0,!0)):(nt=lt,nt.newPos++,x.pushComponent(nt.components,!0,void 0)),dt=x.extractCommon(nt,t,e,_),nt.newPos+1>=M&&dt+1>=L)return S(qb(x,nt.components,t,e,x.useLongestToken));X[_]=nt}F++}if(n)(function _(){setTimeout(function(){if(F>G)return n();tt()||_()},0)})();else for(;F<=G;){let _=tt();if(_)return _}},pushComponent(e,t,i){let n=e[e.length-1];n&&n.added===t&&n.removed===i?e[e.length-1]={count:n.count+1,added:t,removed:i}:e.push({count:1,added:t,removed:i})},extractCommon(e,t,i,n){let x=t.length,S=i.length,M=e.newPos,L=M-n,F=0;for(;M+1<x&&L+1<S&&this.equals(t[M+1],i[L+1]);)M++,L++,F++;return F&&e.components.push({count:F}),e.newPos=M,L},equals(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty(e){let t=[];for(let i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},castInput(e){return e},tokenize(e){return e.split("")},join(e){return e.join("")}};function qb(e,t,i,n,x){let S=0,M=t.length,L=0,F=0;for(;S<M;S++){let X=t[S];if(X.removed){if(X.value=e.join(n.slice(F,F+X.count)),F+=X.count,S&&t[S-1].added){let Q=t[S-1];t[S-1]=t[S],t[S]=Q}}else{if(!X.added&&x){let Q=i.slice(L,L+X.count);Q=Q.map(function(tt,_){let nt=n[F+_];return nt.length>tt.length?nt:tt}),X.value=e.join(Q)}else X.value=e.join(i.slice(L,L+X.count));L+=X.count,X.added||(F+=X.count)}}let G=t[M-1];return M>1&&typeof G.value=="string"&&(G.added||G.removed)&&e.equals("",G.value)&&(t[M-2].value+=G.value,t.pop()),t}function _b(e){return{newPos:e.newPos,components:e.components.slice(0)}}const tO=new Is;function eO(e,t,i){return tO.diff(e,t,i)}const ym=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,Cm=/\S/,Sm=new Is;Sm.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Cm.test(e)&&!Cm.test(t)},Sm.tokenize=function(e){let t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let i=0;i<t.length-1;i++)!t[i+1]&&t[i+2]&&ym.test(t[i])&&ym.test(t[i+2])&&(t[i]+=t[i+2],t.splice(i+1,2),i--);return t};const Tm=new Is;Tm.tokenize=function(e){let t=[],i=e.split(/(\n|\r\n)/);i[i.length-1]||i.pop();for(let n=0;n<i.length;n++){let x=i[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=x:(this.options.ignoreWhitespace&&(x=x.trim()),t.push(x))}return t};const iO=new Is;iO.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};const sO=new Is;sO.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};const rO=Object.prototype.toString,xo=new Is;xo.useLongestToken=!0,xo.tokenize=Tm.tokenize,xo.castInput=function(e){const{undefinedReplacement:t,stringifyReplacer:i=(n,x)=>typeof x>"u"?t:x}=this.options;return typeof e=="string"?e:JSON.stringify(Df(e,null,null,i),i,"  ")},xo.equals=function(e,t){return Is.prototype.equals.call(xo,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Df(e,t,i,n,x){t=t||[],i=i||[],n&&(e=n(x,e));let S;for(S=0;S<t.length;S+=1)if(t[S]===e)return i[S];let M;if(rO.call(e)==="[object Array]"){for(t.push(e),M=new Array(e.length),i.push(M),S=0;S<e.length;S+=1)M[S]=Df(e[S],t,i,n,x);return t.pop(),i.pop(),M}if(e&&e.toJSON&&(e=e.toJSON()),typeof e=="object"&&e!==null){t.push(e),M={},i.push(M);let L=[],F;for(F in e)e.hasOwnProperty(F)&&L.push(F);for(L.sort(),S=0;S<L.length;S+=1)F=L[S],M[F]=Df(e[F],t,i,n,F);t.pop(),i.pop()}else M=e;return M}const Bf=new Is;Bf.tokenize=function(e){return e.slice()},Bf.join=Bf.removeEmpty=function(e){return e};const nO=Phaser.Utils.Array.Remove;var aO=function(e,t){var i=e.text;if(t!==i){if(i==null&&(i=""),nO(e.children,e.lastInsertCursor),t==="")e.removeChildren();else for(var n=eO(i,t),x=0,S=0,M=n.length;S<M;S++){var L=n[S];L.removed?e.removeText(x,L.count):(L.added&&e.insertText(x,L.value),x+=L.count)}e.children.push(e.lastInsertCursor),e.runWrap(),e.isOpened&&e.textEdit.setText(t),e.emit("textchange",t,e)}},oO={setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return e===0?0:this._textOY/-e},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return e===0?0:this._textOX/-e}};const nl=Phaser.Math.Clamp;var Em=function(e,t){var i={lineIndex:0,position:0};if(t<0)return i;for(var n=0,x=e.length;n<x;n++){var S=e[n];if(t<=S){i.lineIndex=n;break}t-=S}return i.position=t,i},Pm=function(e,t){var i=0,n=t.lineIndex;if(n<0)return i;for(var x=0,S=e.length;x<S;x++){var M=e[x];if(n>x)i+=M;else if(n===x)i+=Math.min(t.position,M);else break}return i},hO={cursorMoveLeft(){if(!this.isOpened)return this;var e=nl(this.cursorPosition-1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveRight(){if(!this.isOpened)return this;var e=nl(this.cursorPosition+1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveUp(){if(!this.isOpened)return this;var e=Em(this.characterCountOfLines,this.cursorPosition);e.lineIndex-=1;var t=nl(Pm(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this},cursorMoveDown(){if(!this.isOpened)return this;var e=Em(this.characterCountOfLines,this.cursorPosition);e.lineIndex+=1;var t=nl(Pm(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this}};const Mm=Phaser.Utils.Objects.IsPlainObject;class yo extends na{constructor(t,i,n,x,S,M){Mm(i)?M=i:Mm(x)&&(M=x),M===void 0&&(M={}),$b(t,M);var L=M.text;L&&delete M.text;var F=sl(M.background,"focus"),G=sl(M.style,"cursor"),X=sl(M.style,"range");super(t,i,n,x,S,M),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this.characterCountOfLines=[],this._text,this.textEdit=Wb(this,M),Kb.call(this),M.focusStyle&&Object.assign(F,M.focusStyle),Qb.call(this,F),M.cursorStyle&&Object.assign(G,M.cursorStyle),Zb.call(this,G),M.rangeStyle&&Object.assign(X,M.rangeStyle),so(X)&&Object.assign(X,G),Jb.call(this,X);var Q=M.onAddChar;Q&&this.on("addchar",Q);var tt=M.onCursorIn;tt&&this.on("cursorin",tt);var _=M.onCursorOut;_&&this.on("cursorout",_);var nt=!M.onRangeIn&&!M.onRangeOut,lt=nt?M.onCursorIn:M.onRangeIn;lt&&this.on("rangein",lt);var ot=nt?M.onCursorOut:M.onRangeOut;ot&&this.on("rangeout",ot);var dt=M.onMoveCursor;dt&&this.on("movecursor",dt),this.setParseTextCallback(M.parseTextCallback),this.lastInsertCursor=jb(this),L||(L=""),this.setText(L)}addChild(t,i){if(super.addChild(t,i),Array.isArray(t))for(var n=t,x=0,S=n.length;x<S;x++){var t=n[x];cn(t)&&this.emit("addchar",t,i+x,this)}else cn(t)&&this.emit("addchar",t,i,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(aO(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}runWrap(t){var i=super.runWrap(t);this.contentWidth=i.maxLineWidth,this.contentHeight=i.linesHeight,this.lineHeight=i.lineHeight,this.linesCount=i.lines.length,this.characterCountOfLines.length=0;for(var n=i.lines,x=0,S=n.length;x<S;x++){for(var M=n[x].children,L=0,F=0,G=M.length;F<G;F++){var X=M[F];X.active&&!X.removed&&cn(X)&&L++}this.characterCountOfLines.push(L)}return i}setSize(t,i){return this.width===t&&this.height===i?this:(super.setSize(t,i),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=lO),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setRangeStyle(t){return this.rangeStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}get cursorPosition(){return this.textEdit.cursorPosition}set cursorPosition(t){this.isOpened&&(this.textEdit.cursorPosition=t,this.textEdit.requestCursorPosition=t)}setCursorPosition(t){return this.cursorPosition=t,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var t=this.contentHeight-this.height;return t<0&&(t=0),t}get textVisibleWidth(){var t=this.contentWidth-this.width;return t<0&&(t=0),t}set t(t){this.setTextOYByPercentage(t).updateTexture()}get t(){return this.getTextOYPercentage()}set s(t){this.setTextOXByPercentage(t).updateTexture()}get s(){return this.getTextOXPercentage()}}var lO=function(e){return e};Object.assign(yo.prototype,oO,hO),W.register("canvasInput",function(e,t,i,n,x){var S=new yo(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.CanvasInput",yo);var If=function(e){return w(e).loop.delta};const wm=Phaser.Utils.Objects.GetValue,uO=Phaser.Math.Wrap;class Am extends bf{constructor(t,i){i===void 0&&(i={}),i.onUpdate==="number"&&(i.onUpdate=pm),super(t,i),this.setCursor(wm(i,"cursor","|")),this.setCursorFlashDuration(wm(i,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,i=this.text;if(this.onUpdateCallback){var n=this.onUpdateCallback(i,t,this);n!=null&&(i=n)}if(this.isOpened&&this.hasCursor){var x=this.cursorPosition;i=i.substring(0,x)+this.cursor+i.substring(x),this.prevCursorPosition!==x&&(this.prevCursorPosition=x)}return t.text!==i&&(t.setText(i),this.emit("textchange",i,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var i=this.cursorFlashTimer+If(this.scene);return this.cursorFlashTimer=uO(i,0,this.cursorFlashDuration),t}}W.register("hiddenEdit",function(e,t){var i=new Am(e,t);return i}),J(window,"RexPlugins.UI.HiddenEdit",Am);const dO=Phaser.GameObjects.GetCalcMatrix;var fO=function(e,t,i,n){t.updateData(),i.addToRenderList(t);var x=e.pipelines.set(t.pipeline),S=dO(t,i,n),M=x.calcMatrix.copyFrom(S.calc),L=t._displayOriginX,F=t._displayOriginY,G=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var X=t.geom,Q,tt=0,_=X.length;tt<_;tt++)Q=X[tt],Q.visible&&Q.webglRender(x,M,G,L,F);e.pipelines.postBatch(t)};const cO=Phaser.Renderer.Canvas.SetTransform;var vO=function(e,t,i,n){t.updateData(),i.addToRenderList(t);var x=e.currentContext;if(cO(e,x,t,i,n)){for(var S=t._displayOriginX,M=t._displayOriginY,L=t.geom,F,G=0,X=L.length;G<X;G++)F=L[G],F.visible&&F.canvasRender(x,S,M);x.restore()}},pO={renderWebGL:fO,renderCanvas:vO};const gO=Phaser.GameObjects.Shape,mO=Phaser.Utils.Array.Remove;class Gs extends gO{constructor(t,i,n,x,S){i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=2),S===void 0&&(S=x),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(i,n),this.setSize(x,S),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,i){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==i,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=i,this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=t,n.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==i,this._fillColor=t,this._fillAlpha=i,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,i,n){return n===void 0&&(n=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==i||this.strokeAlpha!==n,this._lineWidth=t,this._strokeColor=i,this._strokeAlpha=n,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,i=0,n=t.length;i<n;i++){var x=t[i];x.dirty&&x.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,ve(this.shapes),this.dirty=!0,this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var i=t.name;return i&&(this.shapes[i]=t),this.dirty=!0,this}deleteShape(t){var i=this.getShape(t);return i&&(delete this.shapes[t],mO(this.geom,i)),this}}Object.assign(Gs.prototype,pO);var xO={setBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==t,this.boxFillColor=e,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(e,t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==t||this.boxStrokeAlpha!==i,this.boxLineWidth=e,this.boxStrokeColor=t,this.boxStrokeAlpha=i,this},setUncheckedBoxStrokeStyle(e,t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==i,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=i,this},setCheckerStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==t,this.checkerColor=e,this.checkAlpha=t,this},setBoxShape(e){return e===void 0&&(e=!1),this.isCircleShape===e?this:(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0,this)}},yO={setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}},CO=function(e,t){return e==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},SO=function(e,t,i){return e==null||t==null?this.isStroked=!1:(i===void 0&&(i=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i),this},TO={fillStyle:CO,lineStyle:SO};class al{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(t,i,n,x,S){}canvasRender(t,i,n){}updateData(){this.dirty=!1}}Object.assign(al.prototype,TO,Li);const EO=Phaser.Geom.Polygon.Earcut;class Co extends al{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=EO(this.pathData),super.updateData(),this}webglRender(t,i,n,x,S){this.isFilled&&tg(t,i,this,n,x,S),this.isStroked&&Mh(t,this,n,x,S)}canvasRender(t,i,n){var x=this.pathData,S=x.length-1,M=x[0]-i,L=x[1]-n;t.beginPath(),t.moveTo(M,L),this.closePath||(S-=2);for(var F=2;F<S;F+=2){var G=x[F]-i,X=x[F+1]-n;t.lineTo(G,X)}this.closePath&&t.closePath(),this.isFilled&&(ja(t,this),t.fill()),this.isStroked&&(qa(t,this),t.stroke())}}const Rm=Phaser.Math.DegToRad;class xa extends Co{constructor(t,i,n,x,S,M,L,F){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=0),S===void 0&&(S=0),M===void 0&&(M=360),L===void 0&&(L=!1),F===void 0&&(F=!1),super(),this.setCenterPosition(t,i),this.setRadius(n,x),this.setAngle(S,M,L),this.setPie(F),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,i){return i===void 0&&(i=t),this.x=t,this.y=i,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,i){return i===void 0&&(i=t),this.radiusX=t,this.radiusY=i,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,i,n){return n===void 0&&(n=!1),this.startAngle=t,this.endAngle=i,this.anticlockwise=n,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Ve(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,i,n){t.beginPath();var x=this.x-i,S=this.y-n,M=Rm(this.startAngle),L=Rm(this.endAngle);this.pie&&(t.moveTo(x,S),t.lineTo(x+Math.cos(M)*this.radiusX,S+Math.sin(M)*this.radiusY)),t.ellipse(x,S,this.radiusX,this.radiusY,0,M,L,this.anticlockwise),this.pie&&t.lineTo(x,S),this.isFilled&&(ja(t,this),t.fill()),this.isStroked&&(qa(t,this),t.stroke())}}class Di extends xa{constructor(t,i,n){super(t,i,n,n,0,360)}}class PO extends Co{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),i=0,n=t.length;i<n;i++)this.pathData.push(t[i].x,t[i].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class MO extends xa{constructor(t,i,n,x){super(t,i,n,x,0,360)}}class Sr extends Co{constructor(t,i,n,x){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=0),super(),this.setP0(t,i),this.setP1(n,x)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var wO=function(e,t,i){return i.length=0,e!=null&&i.push(e,t),i};const Lm=Phaser.Math.Interpolation.QuadraticBezier;var AO=function(e,t,i,n,x,S){for(var M=S.length,L=S[M-2],F=S[M-1],G=1,X=x-1;G<=X;G++){var Q=G/X;S.push(Lm(Q,L,e,i),Lm(Q,F,t,n))}return S};const bm=Phaser.Math.Interpolation.CubicBezier;var RO=function(e,t,i,n,x,S,M,L){for(var F=L.length,G=L[F-2],X=L[F-1],Q=1,tt=M-1;Q<=tt;Q++){var _=Q/tt;L.push(bm(_,G,e,i,x),bm(_,X,t,n,S))}return L};const Om=Phaser.Math.Interpolation.CatmullRom;var LO=function(e,t,i){for(var n=i.length,x=i[n-2],S=i[n-1],M=[x],L=[S],F=0,G=e.length;F<G;F+=2)M.push(e[F]),L.push(e[F+1]);for(var F=1,X=t-1;F<=X;F++){var Q=F/X;i.push(Om(M,Q),Om(L,Q))}return i},Fm=function(e){var t=e.length;if(t<2)return e;var i=e[t-2],n=e[t-1];return e.push(i),e.push(n),e},bO={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,t){return this.restorePathData(),this.accumulationLengths=void 0,wO(e,t,this.pathData),this.firstPointX=e,this.firstPointY=t,this.lastPointX=e,this.lastPointY=t,this},lineTo(e,t,i){return i===void 0&&(i=!1),i&&(e+=this.lastPointX,t+=this.lastPointY),Ue(e,t,this.pathData),this.lastPointX=e,this.lastPointY=t,this},verticalLineTo(e,t){return this.lineTo(e,this.lastPointY,t),this},horizontalLineTo(e,t){return this.lineTo(this.lastPointX,e,t),this},ellipticalArc(e,t,i,n,x,S,M){return M===void 0&&(M=!1),Ve(e,t,i,n,x,S,M,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,t,i,n,x,S){return this.ellipticalArc(e,t,i,i,n,x,S),this},quadraticBezierTo(e,t,i,n){return AO(e,t,i,n,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=n,this},cubicBezierTo(e,t,i,n,x,S){return RO(e,t,i,n,x,S,this.iterations,this.pathData),this.lastPointX=x,this.lastPointY=S,this},catmullRomTo(...e){return LO(e,this.iterations,this.pathData),this.lastPointX=e[e.length-2],this.lastPointY=e[e.length-1],this},close(){var e=this.pathData[0],t=this.pathData[1];return(e!==this.lastPointX||t!==this.lastPointY)&&this.lineTo(e,t),this.closePath=!0,this},end(){return Fm(this.pathData),this}};const OO=Phaser.Math.RotateAround;var FO=function(e,t,i,n){for(var x={x:0,y:0},S=0,M=n.length-1;S<M;S+=2)x.x=n[S],x.y=n[S+1],OO(x,e,t,i),n[S]=x.x,n[S+1]=x.y;return n},DO=function(e,t,i,n,x){for(var S=0,M=x.length-1;S<M;S+=2){var L=x[S]-e,F=x[S+1]-t;L*=i,F*=n,x[S]=L+e,x[S+1]=F+t}return x},Dm=function(e,t,i){for(var n=0,x=i.length-1;n<x;n+=2)i[n]+=e,i[n+1]+=t;return i};const BO=Phaser.Math.DegToRad;Phaser.Math.RotateAround;var IO={rotateAround(e,t,i){if(this.pathData.length===0)return this;i=BO(i),FO(e,t,i,this.pathData);var n=this.pathData.length;return this.lastPointX=this.pathData[n-2],this.lastPointY=this.pathData[n-1],this},scale(e,t,i,n){return this.pathData.length===0?this:(DO(e,t,i,n,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this)},offset(e,t){return Dm(e,t,this.pathData),this}},ol=function(e,t,i,n){i===void 0&&(i=0),n===void 0&&(n=t.length),e.length=n-i;for(var x=0,S=e.length;x<S;x++)e[x]=t[x+i];return e},GO={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(ol(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}};const kO=Phaser.Math.Distance.Between,NO=Phaser.Math.Wrap,zO=Phaser.Math.Linear;var Bm=function(e,t,i,n,x){if(n===void 0&&(n=i,i=0),i=Im(i),n=Im(n),i!==n){var S=t[t.length-1],M=S*i,L=S*n;i<n?Gf(e,t,M,L,x):(Gf(e,t,M,S,x),Gf(e,t,0,L,x)),Fm(x)}},Gf=function(e,t,i,n,x){for(var S=i>0,M=0,L=t.length;M<L;M++){var F=M*2,G=t[M];if(S){if(G<i)continue;if(G==i)S=!1;else{var X=G-t[M-1],Q=1-(G-i)/X;x.push(hl(e,F-2,F,Q)),x.push(hl(e,F-1,F+1,Q)),S=!1}}if(G<=n){if(x.push(e[F]),x.push(e[F+1]),G===n)break}else{var X=G-t[M-1],Q=1-(G-n)/X;x.push(hl(e,F-2,F,Q)),x.push(hl(e,F-1,F+1,Q));break}}},hl=function(e,t,i,n){var x=e[t],S=e[i];return zO(x,S,n)},Im=function(e){return e===0?0:e%1===0?1:NO(e,0,1)},UO={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e=this.accumulationLengths,t=this.pathData,i,n,x,S,M,L=0,F=0,G=t.length;F<G;F+=2)x=t[F],S=t[F+1],M=i===void 0?0:kO(i,n,x,S),L+=M,e.push(L),i=x,n=S;return this.totalPathLength=L,this},setDisplayPathSegment(e,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,Bm(this.pathDataSave,this.accumulationLengths,e,t,this.pathData),this},appendFromPathSegment(e,t,i){return t===void 0?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),Bm(e.pathData,e.accumulationLengths,t,i,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},VO={draw(e,t,i){var n=this.toPoints();return t&&e.fillPoints(n,this.closePath,this.closePath),i&&e.strokePoints(n,this.closePath,this.closePath),this}},XO=function(e,t){t===void 0&&(t=[]);for(var i=0,n=e.length-1;i<n;i+=2)t.push({x:e[i],y:e[i+1]});return t};const WO=Phaser.Geom.Polygon;var YO=function(e,t){return t===void 0&&(t=new WO),t.setTo(e),t};class Gm{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return XO(this.pathData)}toPolygon(t){return YO(this.pathData,t)}}Object.assign(Gm.prototype,bO,IO,GO,UO,VO);class Ze extends Co{constructor(){super(),this.builder=new Gm(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,i){return this.builder.startAt(t,i),this.dirty=!0,this}lineTo(t,i,n){return this.builder.lineTo(t,i,n),this.dirty=!0,this}verticalLineTo(t,i){return this.builder.verticalLineTo(t,i),this.dirty=!0,this}horizontalLineTo(t,i){return this.builder.horizontalLineTo(t,i),this.dirty=!0,this}ellipticalArc(t,i,n,x,S,M,L){return this.builder.ellipticalArc(t,i,n,x,S,M,L),this.dirty=!0,this}arc(t,i,n,x,S,M){return this.builder.arc(t,i,n,x,S,M),this.dirty=!0,this}quadraticBezierTo(t,i,n,x){return this.builder.quadraticBezierTo(t,i,n,x),this.dirty=!0,this}cubicBezierTo(t,i,n,x,S,M){return this.builder.cubicBezierTo(t,i,n,x,S,M),this.dirty=!0,this}catmullRomTo(...t){return this.builder.catmullRomTo(...t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,i,n){return this.builder.rotateAround(t,i,n),this.dirty=!0,this}scale(t,i,n,x){return this.builder.scale(t,i,n,x),this.dirty=!0,this}offset(t,i){return this.builder.offset(t,i),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,i,n){return this.builder.appendFromPathSegment(t.builder,i,n),this}copyPathFrom(t,i,n){return this.builder.clear().appendFromPathSegment(t.builder,i,n),this}setDisplayPathSegment(t,i){return this.builder.setDisplayPathSegment(t,i),this}}const HO=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let $O=class extends al{constructor(t,i,n,x){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=n),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,i),this.setSize(n,x)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,i){return this.centerX=t,this.centerY=i,this}updateData(){this.pathData.length=0;var t=this.x,i=t+this.width,n=this.y,x=n+this.height;return this.pathData.push(t,n),this.pathData.push(i,n),this.pathData.push(i,x),this.pathData.push(t,x),this.pathData.push(t,n),super.updateData(),this}webglRender(t,i,n,x,S){if(this.isFilled){var M=t.fillTint,L=HO(this.fillColor,this.fillAlpha*n);M.TL=L,M.TR=L,M.BL=L,M.BR=L,t.batchFillRect(-x+this.x,-S+this.y,this.width,this.height)}this.isStroked&&Mh(t,this,n,x,S)}canvasRender(t,i,n){this.isFilled&&(ja(t,this),t.fillRect(-i,-n,this.width,this.height)),this.isStroked&&(qa(t,this),t.beginPath(),t.rect(-i,-n,this.width,this.height),t.stroke())}};const ll=Phaser.Utils.Objects.GetValue;class ul extends Co{constructor(t,i,n,x,S,M){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=n),S===void 0&&(S=0),M===void 0&&(M=6),super(),this.setTopLeftPosition(t,i),this.setSize(n,x),this.setRadius(S),this.setIterations(M),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,i){return this.centerX=t,this.centerY=i,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var i=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==i,this._convexTL=i,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var i=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==i,this._convexTR=i,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var i=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==i,this._convexBL=i,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var i=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==i,this._convexBR=i,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=ll(t,"tl",0),this.radiusTR=ll(t,"tr",0),this.radiusBL=ll(t,"bl",0),this.radiusBR=ll(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var i=this.width,n=this.height,x,S=this.iterations+1;if(x=this.radiusTL,x>0)if(this._convexTL){var M=x,L=x;Ve(M,L,x,x,180,270,!1,S,t)}else{var M=0,L=0;Ve(M,L,x,x,90,0,!0,S,t)}else Ue(0,0,t);if(x=this.radiusTR,x>0)if(this._convexTR){var M=i-x,L=x;Ve(M,L,x,x,270,360,!1,S,t)}else{var M=i,L=0;Ve(M,L,x,x,180,90,!0,S,t)}else Ue(i,0,t);if(x=this.radiusBR,x>0)if(this._convexBR){var M=i-x,L=n-x;Ve(M,L,x,x,0,90,!1,S,t)}else{var M=i,L=n;Ve(M,L,x,x,270,180,!0,S,t)}else Ue(i,n,t);if(x=this.radiusBL,x>0)if(this._convexBL){var M=x,L=n-x;Ve(M,L,x,x,90,180,!1,S,t)}else{var M=0,L=n;Ve(M,L,x,x,360,270,!0,S,t)}else Ue(0,n,t);return t.push(t[0],t[1]),Dm(this.x,this.y,t),super.updateData(),this}}const KO=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let ZO=class extends al{constructor(t,i,n,x,S,M){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=0),S===void 0&&(S=0),M===void 0&&(M=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,i),this.setP1(n,x),this.setP2(S,M)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,i){return this.dirty=this.dirty||this.x2!==t||this.y2!==i,this.x2=t,this.y2=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,i,n,x,S){if(this.isFilled){var M=KO(this.fillColor,this.fillAlpha*n),L=this.x0-x,F=this.y0-S,G=this.x1-x,X=this.y1-S,Q=this.x2-x,tt=this.y2-S,_=i.getX(L,F),nt=i.getY(L,F),lt=i.getX(G,X),ot=i.getY(G,X),dt=i.getX(Q,tt),ct=i.getY(Q,tt);t.batchTri(this,_,nt,lt,ot,dt,ct,0,0,1,1,M,M,M,2)}this.isStroked&&Mh(t,this,n,x,S)}canvasRender(t,i,n){var x=this.x1-i,S=this.y1-n,M=this.x2-i,L=this.y2-n,F=this.x3-i,G=this.y3-n;t.beginPath(),t.moveTo(x,S),t.lineTo(M,L),t.lineTo(F,G),t.closePath(),this.isFilled&&(ja(t,this),t.fill()),this.isStroked&&(qa(t,this),t.stroke())}};var JO={buildShapes(){this.addShape(new ul().setName("box")).addShape(new Ze().setName("checker"))},updateShapes(){var e=this.width/2,t=this.height/2,i=Math.min(e,t),n=i*2,x=e-i,S=t-i,M=this.boxLineWidth,L=Math.max(n/10,2),F=this.getShape("box"),G=this.getShape("checker");if(this.isSizeChanged){var tt=n*(1-this.boxSize)/2,X=M/2,Q=n*this.boxSize-M;F.setTopLeftPosition(x+X+tt,S+X+tt).setSize(Q,Q),this.isCircleShape?F.setRadius(Q/2):F.setRadius(0);var tt=n*(1-this.checkerSize)/2,_=n*this.checkerSize/4,nt=_*1,lt=_*2,ot=_*3;G.startAt(nt,lt).lineTo(lt,ot).lineTo(ot,nt).offset(x+tt,S+tt).end()}this.checked?(F.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(M,this.boxStrokeColor,this.boxStrokeAlpha),G.lineStyle(L,this.checkerColor)):(F.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(M,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),G.lineStyle()),this.checked&&G.setDisplayPathSegment(this.checkerAnimProgress)}};const Tr=Phaser.Utils.Objects.GetValue,QO=Phaser.Math.Linear;class $i extends gn{constructor(t,i){super(t,i),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var i=this.target;this.propertyKey=Tr(t,"key","value");var n=i[this.propertyKey];return this.fromValue=Tr(t,"from",n),this.toValue=Tr(t,"to",n),this.setEase(Tr(t,"ease",this.ease)),this.setDuration(Tr(t,"duration",this.duration)),this.setRepeat(Tr(t,"repeat",0)),this.setDelay(Tr(t,"delay",0)),this.setRepeatDelay(Tr(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),i[this.propertyKey]=this.fromValue,super.start(),this}updateTarget(t,i){var n=i.t;n=this.easeFn(n),t[this.propertyKey]=QO(this.fromValue,this.toValue,n)}}var jO={setCheckerAnimationDuration(e){return e===void 0&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new $i(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}},km={};Object.assign(km,xO,yO,JO,jO);const So=23730,qO=16777215,Me=Phaser.Utils.Objects.GetValue,Nm=Phaser.Utils.Objects.IsPlainObject;class zm extends Gs{constructor(t,i,n,x,S,M,L){Nm(i)?(L=i,i=Me(L,"x",0),n=Me(L,"y",0),x=Me(L,"width",2),S=Me(L,"height",2),M=Me(L,"color",So)):Nm(M)&&(L=M,M=Me(L,"color",So)),super(t,i,n,x,S),this.type="rexCheckbox",M===void 0&&(M=So),this.setBoxShape(Me(L,"circleBox",!1)),this.setBoxFillStyle(M,Me(L,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Me(L,"uncheckedColor",null),Me(L,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Me(L,"boxLineWidth",4),Me(L,"boxStrokeColor",M),Me(L,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Me(L,"uncheckedBoxStrokeColor",this.boxStrokeColor),Me(L,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Me(L,"checkerColor",qO),Me(L,"checkerAlpha",1)),this.setBoxSize(Me(L,"boxSize",1)),this.setCheckerSize(Me(L,"checkerSize",1)),this.setCheckerAnimationDuration(Me(L,"animationDuration",150)),this.buildShapes();var F=Me(L,"checked");F===void 0&&(F=Me(L,"value",!1)),this.setValue(F)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(zm.prototype,km);const To=Phaser.Utils.Objects.GetValue;class us extends ye{constructor(t,i){super(t,i),this._enable=void 0,t.setInteractive(To(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(To(t,"enable",!0)),this.setMode(To(t,"mode",1)),this.setClickInterval(To(t,"clickInterval",100)),this.setDragThreshold(To(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=_O[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,i,n,x){this.pointer===void 0&&(this.pointer=t,this.isDown=!0,this.emit("down",this,this.parent,t,x),this.mode===0&&this.click(t.downTime,t,x))}onRelease(t,i,n,x){this.pointer===t&&(this.isDown=!1,this.emit("up",this,this.parent,t,x),this.mode===1&&this.click(t.upTime,t,x),this.pointer=void 0)}onPointOut(t,i){this.pointer===t&&this.cancel()}onMove(t,i,n,x){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&t.getDistance()>=this.dragThreshold&&this.cancel()}onOver(t,i,n,x){return this.enable?(this.isOver=!0,this.emit("over",this,this.parent,t,x),this):this}onOut(t,i){return this.enable?(this.isOver=!1,this.emit("out",this,this.parent,t,i),this):this}click(t,i,n){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,i,n),this;this.pointer=void 0;var x=this.lastClickTime;return x!==void 0&&t-x<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,i,n),this)}cancel(){return this.pointer=void 0,this}}const _O={press:0,pointerdown:0,release:1,pointerup:1},Er=Phaser.Utils.Objects.GetValue,Um=Phaser.Utils.Objects.IsPlainObject;class kf extends zm{constructor(t,i,n,x,S,M,L){Um(i)?(L=i,i=Er(L,"x",0),n=Er(L,"y",0),x=Er(L,"width",2),S=Er(L,"height",2),M=Er(L,"color",So)):Um(M)&&(L=M,M=Er(L,"color",So)),super(t,i,n,x,S,M,L),this._click=new us(this,Er(L,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Er(L,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}W.register("checkbox",function(e,t,i,n,x,S){var M=new kf(this.scene,e,t,i,n,x,S);return this.scene.add.existing(M),M}),J(window,"RexPlugins.UI.Checkbox",kf);var tF={setTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==t,this.trackFillColor=e,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=t,this},setThumbStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==t,this.thumbColor=e,this.thumbAlpha=t,this}},eF={setTrackSize(e,t){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==t,this.trackWidth=e,this.trackHeight=t,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,t){return t===void 0&&(t=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==t,this.thumbWidth=e,this.thumbHeight=t,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}},iF={setThumbPosition(e,t){return t===void 0&&(t=1-e),this.thumbLeftX=e,this.thumbRightX=t,this},setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Nf=function(e,t,i){return(t-e)*i+e},sF=function(e,t,i){var n=Nf(ro(e),ro(t),i),x=Nf(no(e),no(t),i),S=Nf(ao(e),ao(t),i);return(n&255)<<16|(x&255)<<8|S&255};const Vm=Phaser.Math.Linear;var rF={buildShapes(){this.addShape(new ul().setName("track")).addShape(new ul().setName("thumb"))},updateShapes(){var e=this.width,t=this.height,i=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,n=this.getShape("track");if(this.isSizeChanged){var x=e*this.trackWidth,S=t*this.trackHeight,M=(e-x)/2,L=(t-S)/2,F=t*this.trackRadius;n.setTopLeftPosition(M,L).setSize(x,S).setRadius(F)}var G=sF(this.falseValueTrackColor,this.trackFillColor,i),X=Vm(this.falseValueTrackFillAlpha,this.trackFillAlpha,i);n.fillStyle(G,X);var Q=this.getShape("thumb");if(this.isSizeChanged){var tt=e*this.thumbWidth,_=t*this.thumbHeight,nt=t*this.thumbRadius;Q.setSize(tt,_).setRadius(nt)}var lt=Vm(this.thumbLeftX,this.thumbRightX,i)*e;this.rtl&&(lt=e-lt);var ot=t/2;Q.setCenterPosition(lt,ot),Q.fillStyle(this.thumbColor,this.thumbAlpha)}},nF={setToggleAnimationDuration(e){return e===void 0&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new $i(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}},Xm={};Object.assign(Xm,tF,eF,iF,rF,nF);var aF=function(e){var t=.3*ro(e)+.59*no(e)+.11*ao(e);return(t&255)<<16|(t&255)<<8|t&255};const we=Phaser.Utils.Objects.GetValue,Wm=Phaser.Utils.Objects.IsPlainObject,zf=23730,oF=16777215;class Ym extends Gs{constructor(t,i,n,x,S,M,L){Wm(i)?(L=i,i=we(L,"x",0),n=we(L,"y",0),x=we(L,"width",2),S=we(L,"height",2),M=we(L,"color",zf)):Wm(M)&&(L=M,M=we(L,"color",zf)),super(t,i,n,x,S),this.type="rexToggleSwitch",M===void 0&&(M=zf),this.setTrackFillStyle(M,we(L,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(we(L,"falseValueTrackColor",aF(M)),we(L,"falseValueTrackFillAlpha",1)),this.setThumbStyle(we(L,"thumbColor",oF),we(L,"thumbAlpha",1)),this.setTrackSize(we(L,"trackWidth",.9),we(L,"trackHeight",.5)),this.setTrackRadius(we(L,"trackRadius",this.trackHeight*.5));var F=we(L,"thumbHeight",void 0),G=we(L,"thumbWidth",F);G===void 0&&(G=this.trackHeight*.9),this.setThumbSize(G,F),this.setThumbRadius(we(L,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(we(L,"thumbLeft",.3),we(L,"thumbRight",void 0)),this.setRTL(we(L,"rtl",!1)),this.setToggleAnimationDuration(we(L,"animationDuration",150)),this.buildShapes(),this.setValue(we(L,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,i){i===void 0&&(i=this.toggleAnimDuration);var n=this.toggleAnimDuration;return this.toggleAnimDuration=i,this.value=t,this.toggleAnimDuration=n,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(Ym.prototype,Xm);const Hm=Phaser.Utils.Objects.GetValue;class Uf extends Ym{constructor(t,i,n,x,S,M,L){super(t,i,n,x,S,M,L),this._click=new us(this,Hm(L,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Hm(L,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}W.register("toggleSwitch",function(e,t,i,n,x,S){var M=new Uf(this.scene,e,t,i,n,x,S);return this.scene.add.existing(M),M}),J(window,"RexPlugins.UI.ToggleSwitch",Uf);var hF={loadFromURL(e,t){var i=this,n=new Image;return n.onload=function(){i.width!==n.width||i.height!==n.height?i.resize(n.width,n.height):i.clear(),i.context.drawImage(n,0,0),i.updateTexture(),t&&t(),n.onload=null,n.src="",n.remove()},n.src=e,this},loadFromURLPromise(e){var t=this;return new Promise(function(i,n){t.loadFromURL(e,i)})},loadFromFile(e,t){var i=URL.createObjectURL(e);return this.loadFromURL(i,function(){URL.revokeObjectURL(i),t&&t()}),this},loadFromFilePromise(e){var t=this;return new Promise(function(i,n){t.loadFromFile(e,i)})}};class xn extends cr{}Object.assign(xn.prototype,hF),W.register("canvas",function(e,t,i,n){var x=new xn(this.scene,e,t,i,n);return this.scene.add.existing(x),x}),J(window,"RexPlugins.UI.Canvas",xn);const ya=Phaser.Utils.Objects.GetValue;class $m extends cr{constructor(t,i,n,x,S,M){super(t,i,n),this.type="rexCircleMaskImage",this.setTexture(x,S,M)}setTexture(t,i,n){typeof i=="object"&&(n=i,i=void 0),typeof n=="string"&&(n={maskType:n});var x=ya(n,"maskType",0),S=ya(n,"backgroundColor",void 0),M=ya(n,"strokeColor",void 0),L=M!=null?10:0,F=ya(n,"strokeWidth",L);if(x===void 0?x=0:typeof x=="string"&&(x=lF[x]),this._textureKey=t,this._frameName=i,x===null)return this.loadTexture(t,i),this.dirty=!0,this;var G=this.scene.sys.textures.getFrame(t,i);if(!G)return this;G.cutWidth!==this.width||G.cutHeight!==this.height?this.setCanvasSize(G.cutWidth,G.cutHeight):this.clear();var X=this.canvas,Q=this.context,tt=X.width,_=X.height;S!=null&&(Q.fillStyle=S,Q.fillRect(0,0,tt,_)),Q.save(),Q.beginPath();var nt=F/2;switch(x){case 1:var ft=Math.floor(tt/2),xt=Math.floor(_/2),lt=ft-nt,ot=xt-nt;Q.ellipse(ft,xt,lt,ot,0,0,2*Math.PI);break;case 2:var dt=ya(n,"radius",0),ct=ya(n,"iteration",void 0);og(Q,nt,nt,tt-F,_-F,dt,ct);break;default:var ft=Math.floor(tt/2),xt=Math.floor(_/2),St=Math.min(ft,xt)-nt;Q.arc(ft,xt,St,0,2*Math.PI);break}return M!=null&&(Q.strokeStyle=M,Q.lineWidth=F,Q.stroke()),Q.clip(),this.loadTexture(t,i),Q.restore(),this.dirty=!0,this}resize(t,i){return this.setDisplaySize(t,i),this}}const lF={circle:0,ellipse:1,roundRectangle:2};W.register("circleMaskImage",function(e,t,i,n,x){var S=new $m(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.CircleMaskImage",$m);const Eo=Phaser.Utils.Objects.GetValue;class Km extends cr{constructor(t,i,n,x,S,M){super(t,i,n),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(x,S,M)}setTexture(t,i,n){typeof i=="object"&&(n=i,i=void 0),typeof n=="string"&&(n={mask:{key:n}});var x=Eo(n,"mask.key"),S=Eo(n,"mask.frame"),M=Eo(n,"mask.invertAlpha",!1),L=Eo(n,"mask.scale"),F=Eo(n,"backgroundColor");if(x){this._maskKey=x,this._maskFrame=S,this._maskScale=L;var G=x?this.scene.sys.textures.get(x):null;this.maskFrame=G?G.get(S):null}this._textureKey=t,this._frameName=i;var X=this.maskFrame;if(X===null)return this.loadTexture(t,i),this.dirty=!0,this;var Q=F!=null;this.loadTexture(t,i);var tt=this.canvas,_=this.context,nt=tt.width,lt=tt.height;_.save(),_.globalCompositeOperation=M?"destination-out":"destination-in";var ot,dt;this._maskScale!=null?(ot=X.cutWidth*this._maskScale,dt=X.cutHeight*this._maskScale):(ot=nt,dt=lt);var ct=(nt-ot)/2,ft=(lt-dt)/2;return this.drawFrame(this._maskKey,this._maskFrame,ct,ft,ot,dt),_.restore(),Q&&(_.save(),_.globalCompositeOperation="destination-over",_.fillStyle=F,_.fillRect(0,0,nt,lt),_.restore()),this.dirty=!0,this}resize(t,i){return this.setDisplaySize(t,i),this}}W.register("alphaMaskImage",function(e,t,i,n,x){var S=new Km(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.AlphaMaskImage",Km);const uF=Phaser.Math.Linear,Zm=Phaser.Math.Percent;var dF={setValue(e,t,i){return e==null?this:(t!==void 0&&(e=Zm(e,t,i)),this.value=e,this)},addValue(e,t,i){return t!==void 0&&(e=Zm(e,t,i)),this.value+=e,this},getValue(e,t){var i=this.value;return e!==void 0&&t!==void 0&&(i=uF(e,t,i)),i}};const fF=Phaser.Math.Percent;var cF={setEaseValuePropName(e){return this.easeValuePropName=e,this},setEaseValueDuration(e){return this.easeValueDuration=e,this},setEaseValueFunction(e){return this.easeFunction=e,this},stopEaseValue(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo(e,t,i){return e==null?this:(t!==void 0&&(e=fF(e,t,i)),this.easeValueTask===void 0&&(this.easeValueTask=new $i(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction}),this)},easeValueRepeat(e,t,i,n){return i===void 0&&(i=-1),n===void 0&&(n=0),this.easeValueTask===void 0&&(this.easeValueTask=new $i(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:i,repeatDelay:n}),this}};const Po=Phaser.Utils.Objects.GetValue,vF=Phaser.Math.Clamp;function Pr(e){class t extends e{bootProgressBase(n){this.eventEmitter=Po(n,"eventEmitter",this);var x=Po(n,"valuechangeCallback",null);if(x!==null){var S=Po(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",x,S)}return this.setEaseValuePropName("value").setEaseValueDuration(Po(n,"easeValue.duration",0)).setEaseValueFunction(Po(n,"easeValue.ease","Linear")),this}get value(){return this._value}set value(n){n=vF(n,0,1);var x=this._value,S=x!=n;this.dirty=this.dirty||S,this._value=n,S&&this.eventEmitter.emit("valuechange",this._value,x,this.eventEmitter)}}return Object.assign(t.prototype,dF,cF),t}const pF=Phaser.Math.RadToDeg,Jm=Phaser.Math.DegToRad;var Qm=function(e,t,i,n,x,S,M,L){var F=Math.abs(M-S)===360,G=Jm(S),X=Jm(M),Q=Math.cos(G),tt=Math.sin(G),_=Math.cos(X),nt=Math.sin(X);return e.startAt(t+Q*n,i+tt*n),e.arc(t,i,n,S,M,L),F&&x===0||(e.lineTo(t+_*x,i+nt*x),x>0&&e.arc(t,i,x,M,S,!L)),e.close(),e},gF={buildShapes(){var e=this.iterations;this.addShape(new Ze().setIterations(e).setName("track")).addShape(new Ze().setIterations(e).setName("bar")).addShape(new Di().setIterations(e).setName("center"))},updateShapes(){var e=this.radius,t=this.thickness*this.radius,i=this.radius,n=i-t,x=this.getShape("track");this.trackColor!=null&&this.thickness>0?(x.fillStyle(this.trackColor,this.trackAlpha),Qm(x,e,e,i,n,0,360,!1)):x.reset();var S=this.getShape("bar");if(this.barColor!=null&&this.thickness>0){var M,L,F;if(this.value===1)M=!1,L=0,F=360;else{M=this.anticlockwise,L=pF(this.startAngle);var G=360*(M?1-this.value:this.value);F=G+L}S.fillStyle(this.barColor,this.barAlpha),Qm(S,e,e,i+1,n-1,L,F,!1)}else S.reset();var X=this.getShape("center");this.centerColor&&n>0?X.setCenterPosition(e,e).setRadius(n).fillStyle(this.centerColor,this.centerAlpha):X.reset()}};const vi=Phaser.Utils.Objects.GetValue,mF=Phaser.Utils.Objects.IsPlainObject,xF=Phaser.Math.Clamp,yF=Phaser.Math.DegToRad(270);let Vf=class extends Pr(Gs){constructor(t,i,n,x,S,M,L){var F,G,X,Q,tt;mF(i)&&(L=i,i=vi(L,"x",0),n=vi(L,"y",0),x=vi(L,"radius",1),S=vi(L,"barColor",void 0),M=vi(L,"value",0)),F=vi(L,"barAlpha",1),G=vi(L,"trackColor",void 0),X=vi(L,"trackAlpha",1),Q=vi(L,"centerColor",void 0),tt=vi(L,"centerAlpha",1),x===void 0&&(x=1);var _=x*2;super(t,i,n,_,_),this.type="rexCircularProgress",this.bootProgressBase(L),this.setRadius(x),this.setTrackColor(G,X),this.setBarColor(S,F),this.setCenterColor(Q,tt),this.setThickness(vi(L,"thickness",.2)),this.setStartAngle(vi(L,"startAngle",yF)),this.setAnticlockwise(vi(L,"anticlockwise",!1)),this.iterations=vi(L,"iterations",128),this.buildShapes(),this.setValue(M)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}get trackAlpha(){return this._trackColor}set trackAlpha(t){this.dirty=this.dirty||this._trackAlpha!=t,this._trackAlpha=t}setTrackColor(t,i){return i===void 0&&(i=1),this.trackColor=t,this.trackAlpha=i,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barAlpha(){return this._barAlpha}set barAlpha(t){this.dirty=this.dirty||this._barAlpha!=t,this._barAlpha=t}setBarColor(t,i){return i===void 0&&(i=1),this.barColor=t,this.barAlpha=i,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=xF(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerAlpha(){return this._centerAlpha}set centerAlpha(t){this.dirty=this.dirty||this._centerAlpha!=t,this._centerAlpha=t}setCenterColor(t,i){return i===void 0&&(i=1),this.centerColor=t,this.centerAlpha=i,this}};Object.assign(Vf.prototype,gF),W.register("circularProgress",function(e,t,i,n,x,S){var M=new Vf(this.scene,e,t,i,n,x,S);return this.scene.add.existing(M),M}),J(window,"RexPlugins.UI.CircularProgress",Vf);var Xf=function(e,t,i,n,x,S,M,L,F,G,X,Q){G===void 0&&(G=0),X===void 0&&(X=2*Math.PI),Q===void 0&&(Q=!1),t.beginPath(),t.ellipse(i,n,x,S,0,G,X,Q),M!=null&&(t.fillStyle=M,t.fill()),L!=null&&(t.strokeStyle=L,t.lineWidth=F,t.stroke())};const jm=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],CF=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];for(var Wf={},qm,dl=0,SF=jm.length;dl<SF;dl++)qm=jm[dl].toLowerCase(),Wf[qm]=CF[dl];var TF=function(e){return e=e.toLowerCase(),Wf.hasOwnProperty(e)?Wf[e]:null},Yf=function(e){return typeof e!="string"||(e.startsWith("#")?e=parseInt(e.substring(1),16):e.startsWith("0x")?e=parseInt(e.substring(2),16):e=TF(e)),e};const EF=Phaser.Math.DegToRad,Hf=Phaser.Math.Linear;var PF=function(e,t,i,n,x,S,M,L,F,G,X,Q,tt){G===void 0&&(G=0),X===void 0&&(X=2*Math.PI),Q===void 0&&(Q=!1),tt===void 0&&(tt=2),M=Yf(M),L=Yf(L),Mo=o0(M,Mo),wo=o0(L,wo);var _=EF(tt),nt;Q?nt=G-X:nt=X-G,nt<0&&(nt+=2*Math.PI);var lt=Math.ceil(nt/_),ot=nt/lt;Q&&(ot=-ot);for(var dt=0;dt<lt;dt++){var ct=dt/lt,ft=Math.round(Hf(Mo.r,wo.r,ct)),xt=Math.round(Hf(Mo.g,wo.g,ct)),St=Math.round(Hf(Mo.b,wo.b,ct)),Pt=G+dt*ot,wt=Pt+ot;dt<lt-1&&(wt+=ot/2),t.beginPath(),t.ellipse(i,n,x,S,0,Pt,wt,Q),t.strokeStyle=`rgb(${ft},${xt},${St})`,t.lineWidth=F,t.stroke()}},Mo,wo,MF=function(e,t,i,n,x,S,M,L,F,G,X){F===void 0&&L!=null&&(F=2),t.font=S,t.textAlign=G,t.textBaseline=X,t.fillStyle=M,t.strokeStyle=L,t.lineWidth=F,t.lineCap="round",t.lineJoin="round",L!=null&&L!=="none"&&F>0&&t.strokeText(x,i,n),M!=null&&M!=="none"&&t.fillText(x,i,n)};const $f=Phaser.Math.PI2;var wF=function(){var e=this.radius,t=this.thickness*this.radius,i=this.radius-t/2,n=this.radius-t,x=this.canvas,S=this.context,M=this.anticlockwise,L=this.startAngle,F=this.endAngle,G=this._deltaAngle;if(this.trackColor&&t>0&&(S.save(),Xf(x,S,e,e,i,i,void 0,this.trackColor,t,L,F,M),S.restore()),this.barColor&&i>0){var X;this.value>=1?X=F:M?X=(L-G*this.value+$f)%$f:X=(L+G*this.value)%$f,S.save(),this.barColor2?PF(x,S,e,e,i,i,this.barColor2,this.barColor,t,L,X,M):Xf(x,S,e,e,i,i,void 0,this.barColor,t,L,X,M),S.restore()}if(this.centerColor&&n>0){var Q;this.centerColor2?(Q=this.context.createRadialGradient(e,e,0,e,e,n),Q.addColorStop(0,this.centerColor),Q.addColorStop(1,this.centerColor2)):Q=this.centerColor,S.save(),Xf(x,S,e,e,n,n,Q),S.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(S.save(),MF(x,S,e,e,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),S.restore())};const Se=Phaser.Utils.Objects.GetValue,AF=Phaser.Utils.Objects.IsPlainObject,RF=Phaser.Math.Clamp,LF=Phaser.Math.DegToRad(270),fl=Phaser.Math.PI2;class cl extends Pr(cr){constructor(t,i,n,x,S,M,L){AF(i)&&(L=i,i=Se(L,"x",0),n=Se(L,"y",0),x=Se(L,"radius",1),S=Se(L,"barColor",void 0),M=Se(L,"value",0));var F=x*2,G=Se(L,"resolution",1);super(t,i,n,F,F,G),this.type="rexCircularProgressCanvas",this.bootProgressBase(L),this.setRadius(x),this.setTrackColor(Se(L,"trackColor",void 0)),this.setBarColor(S),this.setBarColor2(Se(L,"barColor2",void 0)),this.setCenterColor(Se(L,"centerColor",void 0)),this.setThickness(Se(L,"thickness",.2)),this.setAnticlockwise(Se(L,"anticlockwise",!1)),this.setStartAngle(Se(L,"startAngle",LF));var X=Se(L,"endAngle");X===void 0&&(this.anticlockwise?X=this.startAngle-fl:X=this.startAngle+fl),this.setEndAngle(Se(L,"endAngle",X)),this.setTextColor(Se(L,"textColor",void 0)),this.setTextStrokeColor(Se(L,"textStrokeColor",void 0),Se(L,"textStrokeThickness",void 0));var Q=Se(L,"textFont",void 0);Q?this.setTextFont(Q):this.setTextFont(Se(L,"textSize","16px"),Se(L,"textFamily","Courier"),Se(L,"textStyle","")),this.setTextFormatCallback(Se(L,"textFormatCallback",void 0),Se(L,"textFormatCallbackScope",void 0)),this.setValue(M)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get barColor2(){return this._barColor2}set barColor2(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}setBarColor2(t){return this.barColor2=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t,this._deltaAngle=Kf(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(t){return this.startAngle=t,this}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!=t,this._endAngle=t,this._deltaAngle=Kf(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(t){return this.endAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t,this._deltaAngle=Kf(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=RF(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,i){return this.centerColor=t,this.centerColor2=i,this}get textColor(){return this._textColor}set textColor(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,i){return i===void 0&&(i=2),this.textStrokeColor=t,this.textStrokeThickness=i,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,i,n){var x;return i===void 0?x=t:x=n+" "+t+" "+i,this.textFont=x,this}setTextFormatCallback(t,i){return this.textFormatCallback=t,this.textFormatCallbackScope=i,this}updateTexture(){return super.updateTexture(function(){this.clear(),wF.call(this)},this),this}getFormatText(t){t===void 0&&(t=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(t):i=this.textFormatCallback.call(this.textFormatCallbackScope,t),i}}var Kf=function(e,t,i){return i?e<=t?fl+e-t:e-t:e>=t?fl+t-e:t-e};W.register("circularProgressCanvas",function(e,t,i,n,x,S){var M=new cl(this.scene,e,t,i,n,x,S);return this.scene.add.existing(M),M}),J(window,"RexPlugins.UI.CircularProgressCanvas",cl);var bF=function(){var e=this.skewX,t=this.width-Math.abs(e),i=this.height,n=this.getShape("trackFill");n.fillStyle(this.trackColor),n.isFilled&&Zf(n,0,0,t,i,e);var x=this.getShape("bar");if(x.fillStyle(this.barColor),x.isFilled){var S,M;this.rtl?(S=t*(1-this.value),M=t):(S=0,M=t*this.value),Zf(x,S,0,M,i,e)}var L=this.getShape("trackStroke");L.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),L.isStroked&&Zf(L,0,0,t,i,e)},Zf=function(e,t,i,n,x,S){var M=(t+n)/2;return S>=0?e.startAt(M+S,i).lineTo(n+S,i).lineTo(n,x).lineTo(t,x).lineTo(t+S,i).lineTo(M+S,i):e.startAt(M,i).lineTo(n,i).lineTo(n-S,x).lineTo(t-S,x).lineTo(t,i).lineTo(M,i),e.close(),e};const Ao=Phaser.Utils.Objects.GetValue,Jf=Phaser.Utils.Objects.IsPlainObject;let vl=class extends Pr(Gs){constructor(t,i,n,x,S,M,L,F){Jf(i)?(F=i,i=F.x,n=F.y,x=F.width,S=F.height,M=F.barColor,L=F.value):Jf(x)?(F=x,x=F.width,S=F.height,M=F.barColor,L=F.value):Jf(M)&&(F=M,M=F.barColor,L=F.value),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=2),S===void 0&&(S=x),L===void 0&&(L=0),super(t,i,n,x,S,F),this.type="rexLineProgress",this.bootProgressBase(F),this.addShape(new Ze().setName("trackFill")).addShape(new Ze().setName("bar")).addShape(new Ze().setName("trackStroke")),this.setTrackColor(Ao(F,"trackColor",void 0)),this.setBarColor(M),this.setTrackStroke(Ao(F,"trackStrokeThickness",2),Ao(F,"trackStrokeColor",void 0)),this.setSkewX(Ao(F,"skewX",0)),this.setRTL(Ao(F,"rtl",!1)),this.setValue(L)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}};var OF={updateShapes:bF};Object.assign(vl.prototype,OF),W.register("lineProgress",function(e,t,i,n,x,S,M){var L=new vl(this.scene,e,t,i,n,x,S,M);return this.scene.add.existing(L),L}),J(window,"RexPlugins.UI.LineProgress",vl);var Qf=function(e,t,i,n,x){e.setIterations(x).start();var L=n.tl;if(me(L))if(L.convex){var S=L.x,M=L.y;e.ellipticalArc(S,M,L.x,L.y,180,270,!1)}else{var S=0,M=0;e.ellipticalArc(S,M,L.x,L.y,90,0,!0)}else e.lineTo(0,0);var L=n.tr;if(me(L))if(L.convex){var S=t-L.x,M=L.y;e.ellipticalArc(S,M,L.x,L.y,270,360,!1)}else{var S=t,M=0;e.ellipticalArc(S,M,L.x,L.y,180,90,!0)}else e.lineTo(t,0);var L=n.br;if(me(L))if(L.convex){var S=t-L.x,M=i-L.y;e.ellipticalArc(S,M,L.x,L.y,0,90,!1)}else{var S=t,M=i;e.ellipticalArc(S,M,L.x,L.y,270,180,!0)}else e.lineTo(t,i);var L=n.bl;if(me(L))if(L.convex){var S=L.x,M=i-L.y;e.ellipticalArc(S,M,L.x,L.y,90,180,!1)}else{var S=0,M=i;e.ellipticalArc(S,M,L.x,L.y,360,270,!0)}else e.lineTo(0,i);return e.close(),e},pl=Phaser.Math.RadToDeg,FF=function(e,t,i,n,x){var S=t*x,G=n.tl;if(me(G)){var M;S>G.x?M=90:M=pl(Math.acos((G.x-S)/G.x));var L=G.x,F=G.y;e.ellipticalArc(L,F,G.x,G.y,180,180+M,!1)}else e.lineTo(0,0);var G=n.tr;if(me(G)&&S>t-G.x){var M=90-pl(Math.acos((S-(t-G.x))/G.x)),L=t-G.x,F=G.y;e.ellipticalArc(L,F,G.x,G.y,270,270+M,!1)}else e.lineTo(S,0);var G=n.br;if(me(G)&&S>t-G.x){var M=90-pl(Math.acos((S-(t-G.x))/G.x)),L=t-G.x,F=i-G.y;e.ellipticalArc(L,F,G.x,G.y,90-M,90,!1)}else e.lineTo(S,i);var G=n.bl;if(me(G)){var M;S>G.x?M=90:M=pl(Math.acos((G.x-S)/G.x));var L=G.x,F=i-G.y;e.ellipticalArc(L,F,G.x,G.y,180-M,180,!1)}else e.lineTo(0,i)},gl=Phaser.Math.RadToDeg,DF=function(e,t,i,n,x){var S=i*x,G=n.tl;if(me(G)){var M;S>G.y?M=90:M=gl(Math.acos((G.y-S)/G.y));var L=G.x,F=G.y;e.ellipticalArc(L,F,G.x,G.y,270-M,270,!1)}else e.lineTo(0,0);var G=n.tr;if(me(G)){var M;S>G.y?M=90:M=gl(Math.acos((G.y-S)/G.y));var L=t-G.x,F=G.y;e.ellipticalArc(L,F,G.x,G.y,270,270+M,!1)}else e.lineTo(t,0);var G=n.br;if(me(G)&&S>i-G.y){var M=90-gl(Math.acos((S-(i-G.y))/G.y)),L=t-G.x,F=i-G.y;e.ellipticalArc(L,F,G.x,G.y,0,0+M,!1)}else e.lineTo(t,S);var G=n.bl;if(me(G)&&S>i-G.y){var M=90-gl(Math.acos((S-(i-G.y))/G.y)),L=G.x,F=i-G.y;e.ellipticalArc(L,F,G.x,G.y,180-M,180,!1)}else e.lineTo(0,S)},ml=Phaser.Math.RadToDeg,BF=function(e,t,i,n,x){var S=t*x,G=n.tr;if(me(G)){var M;S>G.x?M=90:M=ml(Math.acos((G.x-S)/G.x));var L=t-G.x,F=G.y;e.ellipticalArc(L,F,G.x,G.y,360-M,360,!1)}else e.lineTo(t,0);var G=n.br;if(me(G)){var M;S>G.x?M=90:M=ml(Math.acos((G.x-S)/G.x));var L=t-G.x,F=i-G.y;e.ellipticalArc(L,F,G.x,G.y,0,0+M,!1)}else e.lineTo(t,i);var G=n.bl;if(me(G)&&S>t-G.x){var M=90-ml(Math.acos((S-(t-G.x))/G.x)),L=G.x,F=i-G.y;e.ellipticalArc(L,F,G.x,G.y,90,90+M,!1)}else e.lineTo(t-S,i);var G=n.tl;if(me(G)&&S>t-G.x){var M=90-ml(Math.acos((S-(t-G.x))/G.x)),L=G.x,F=G.y;e.ellipticalArc(L,F,G.x,G.y,270-M,270,!1)}else e.lineTo(t-S,0)},xl=Phaser.Math.RadToDeg,IF=function(e,t,i,n,x){var S=i*x,G=n.br;if(me(G)){S>G.y?F=90:F=xl(Math.acos((G.y-S)/G.y));var M=t-G.x,L=i-G.y;e.ellipticalArc(M,L,G.x,G.y,90-F,90,!1)}else e.lineTo(t,i);var G=n.bl;if(me(G)){S>G.y?F=90:F=xl(Math.acos((G.y-S)/G.y));var M=G.x,L=i-G.y;e.ellipticalArc(M,L,G.x,G.y,90,90+F,!1)}else e.lineTo(0,i);var G=n.tl;if(me(G)&&S>i-G.y){var F=90-xl(Math.acos((S-(i-G.y))/G.y)),M=G.x,L=G.y;e.ellipticalArc(M,L,G.x,G.y,180,180+F,!1)}else e.lineTo(0,i-S);var G=n.tr;if(me(G)&&S>i-G.y){var F=90-xl(Math.acos((S-(i-G.y))/G.y)),M=t-G.x,L=G.y;e.ellipticalArc(M,L,G.x,G.y,360-F,360,!1)}else e.lineTo(t,i-S)},GF=function(e,t,i,n,x,S,M,L){if(e.setIterations(L).start(),x===0)return e;if(x===1)return Qf(e,t,i,n,L);var F;return S===0?F=M?BF:FF:F=M?IF:DF,F(e,t,i,n,x),e.close(),e},kF=function(){var e=this.width,t=this.height,i=this.rrGeom.cornerRadius,n=this.value,x=this.orientation,S=this.rtl,M=this.iteration+1,L=this.getShape("trackFill");L.fillStyle(this.trackColor),L.isFilled&&Qf(L,e,t,i,M);var F=this.getShape("bar");F.fillStyle(this.barColor),F.isFilled&&GF(F,e,t,i,n,x,S,M);var G=this.getShape("trackStroke");G.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),G.isStroked&&Qf(G,e,t,i,M)},NF={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},yn=function(e){return typeof e=="string"&&(e=NF[e]),e};const Ca=Phaser.Utils.Objects.GetValue,jf=Phaser.Utils.Objects.IsPlainObject;class qf extends Pr(Gs){constructor(t,i,n,x,S,M,L,F,G){jf(i)?(G=i,i=G.x,n=G.y,x=G.width,S=G.height,M=G.radius,L=G.barColor,F=G.value):jf(x)?(G=x,x=G.width,S=G.height,M=G.radius,L=G.barColor,F=G.value):jf(M)&&(G=M,M=G.radius,L=G.barColor,F=G.value),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=1),S===void 0&&(S=x),M===void 0&&(M=0),F===void 0&&(F=0),super(t,i,n,x,S,G),this.type="rexRoundRectangleProgress",this.rrGeom=new Hd,this.bootProgressBase(G),this.addShape(new Ze().setName("trackFill")).addShape(new Ze().setName("bar")).addShape(new Ze().setName("trackStroke")),this.setTrackColor(Ca(G,"trackColor",void 0)),this.setBarColor(L),this.setTrackStroke(Ca(G,"trackStrokeThickness",2),Ca(G,"trackStrokeColor",void 0)),this.setOrientation(Ca(G,"orientation",0)),this.setRTL(Ca(G,"rtl",!1)),this.setRadius(M),this.setIteration(Ca(M,"iteration",void 0)),this.setValue(F)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get orientation(){return this._orientation}set orientation(t){t=yn(t),this.dirty=this.dirty||this._orientation!=t,this._orientation=t}setOrientation(t){return this.orientation=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get radius(){return this.rrGeom.radius}set radius(t){this.rrGeom.setRadius(t),this.dirty=!0}get radiusTL(){return this.rrGeom.radiusTL}set radiusTL(t){this.rrGeom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.rrGeom.radiusTR}set radiusTR(t){this.rrGeom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.rrGeom.radiusBL}set radiusBL(t){this.rrGeom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.rrGeom.radiusBR}set radiusBR(t){this.rrGeom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.rrGeom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var zF={updateShapes:kF};Object.assign(qf.prototype,zF),W.register("roundRectanleProgress",function(e,t,i,n,x,S,M,L){var F=new qf(this.scene,e,t,i,n,x,S,M,L);return this.scene.add.existing(F),F}),J(window,"RexPlugins.UI.RoundRectangleProgress",qf);var UF=function(e,t){e.save(),e.beginPath();var i=t[0];e.moveTo(i.x,i.y);for(var n=1,x=t.length;n<x;n++)i=t[n],e.lineTo(i.x,i.y);e.closePath(),e.restore()},_f=function(e,t,i,n,x,S,M){M===void 0&&(M="round"),UF(t,i),t.lineJoin=M,n!=null&&(t.fillStyle=n,t.fill()),x!=null&&(t.strokeStyle=x,t.lineWidth=S,t.stroke())},VF=function(){var e=this.skewX,t=this.width-Math.abs(e),i=this.height,n=this.canvas,x=this.context;(this.trackColor||this.trackStrokeColor)&&_m(0,0,t,i,e,this.trackPoints);var S,M;if(this.barColor&&(this.rtl?(S=t*(1-this.value),M=t):(S=0,M=t*this.value),_m(S,0,M,i,e,this.barPoints)),this.trackColor&&(x.save(),_f(n,x,this.trackPoints,this.trackColor),x.restore()),this.barColor){x.save();var L;if(this.barColor2){var F;if(this.isHorizontalGradient){var G=i/2;F=x.createLinearGradient(S,G,M,G)}else{var X=t/2;F=x.createLinearGradient(X,0,X,i)}F.addColorStop(0,this.rtl?this.barColor:this.barColor2),F.addColorStop(1,this.rtl?this.barColor2:this.barColor),L=F}else L=this.barColor;_f(n,x,this.barPoints,L),x.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(x.save(),_f(n,x,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),x.restore())},_m=function(e,t,i,n,x,S){S===void 0&&(S=[]),S.length=4;for(var M=0;M<4;M++)S[M]||(S[M]={});var L;return x>=0?(L=S[0],L.x=e+x,L.y=t,L=S[1],L.x=i+x,L.y=t,L=S[2],L.x=i,L.y=n,L=S[3],L.x=e,L.y=n):(L=S[0],L.x=e,L.y=t,L=S[1],L.x=i,L.y=t,L=S[2],L.x=i-x,L.y=n,L=S[3],L.x=e-x,L.y=n),S};const Be=Phaser.Utils.Objects.GetValue,tc=Phaser.Utils.Objects.IsPlainObject;class ec extends Pr(cr){constructor(t,i,n,x,S,M,L,F){tc(i)?(F=i,i=Be(F,"x",0),n=Be(F,"y",0),x=Be(F,"width",2),S=Be(F,"height",2),M=Be(F,"barColor",void 0),L=Be(F,"value",0)):tc(x)?(F=x,x=Be(F,"width",2),S=Be(F,"height",2),M=Be(F,"barColor",void 0),L=Be(F,"value",0)):tc(M)&&(F=M,M=Be(F,"barColor",void 0),L=Be(F,"value",0));var G=Be(F,"resolution",1);super(t,i,n,x,S,G),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(F),this.setTrackColor(Be(F,"trackColor",void 0)),this.setBarColor(M,Be(F,"barColor2",void 0),Be(F,"isHorizontalGradient",void 0)),this.setTrackStroke(Be(F,"trackStrokeThickness",2),Be(F,"trackStrokeColor",void 0)),this.setSkewX(Be(F,"skewX",0)),this.setRTL(Be(F,"rtl",!1)),this.setValue(L)}get trackColor(){return this._trackColor}set trackColor(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=Yt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,i,n){return n===void 0&&(n=!0),this.barColor=t,this.barColor2=i,this.isHorizontalGradient=n,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return super.updateTexture(function(){this.clear(),VF.call(this)},this),this}}W.register("circularProgressCanvas",function(e,t,i,n,x,S,M){var L=new ec(this.scene,e,t,i,n,x,S,M);return this.scene.add.existing(L),L}),J(window,"RexPlugins.UI.LineProgressCanvas",ec),Phaser.Math.Wrap;const Sa=Phaser.Math.Linear;var XF=function(){var e=this.getShape("triangle"),t=this.padding,i=this.width-t.right,n=0+t.left,x=this.height-t.bottom,S=0+t.top,M=(n+i)/2,L=(S+x)/2,F={0:{a:{x:n,y:S},b:{x:i,y:L},c:{x:n,y:x}},1:{a:{x:n,y:S},b:{x:M,y:x},c:{x:i,y:S}},2:{a:{x:i,y:S},b:{x:n,y:L},c:{x:i,y:x}},3:{a:{x:n,y:x},b:{x:M,y:S},c:{x:i,y:x}}},G,X,Q,tt,_,nt;if(this.previousDirection===void 0){var lt=F[this.direction],ot=lt.a,dt=lt.b,ct=lt.c;G=ot.x,X=ot.y,Q=dt.x,tt=dt.y,_=ct.x,nt=ct.y}else{var ft=F[this.previousDirection],xt=F[this.direction],St=this.easeDirectionProgress;G=Sa(ft.a.x,xt.a.x,St),X=Sa(ft.a.y,xt.a.y,St),Q=Sa(ft.b.x,xt.b.x,St),tt=Sa(ft.b.y,xt.b.y,St),_=Sa(ft.c.x,xt.c.x,St),nt=Sa(ft.c.y,xt.c.y,St)}e.startAt(G,X).lineTo(Q,tt).lineTo(_,nt),this.arrowOnly?e.end():e.close()};const WF=Phaser.Math.DegToRad,yl=WF(120);var YF=function(t){var t=this.getShape("triangle"),i=this.width/2,n=this.height/2,x=Math.min(i,n)*this.radius,S=this.verticeRotation;t.startAt(i+x*Math.cos(S+yl),n+x*Math.sin(S+yl)).lineTo(i+x*Math.cos(S),n+x*Math.sin(S)).lineTo(i+x*Math.cos(S-yl),n+x*Math.sin(S-yl)),this.arrowOnly?t.end():t.close()},HF={buildShapes(){this.addShape(new Ze().setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?XF.call(this):YF.call(this)}},$F={setEaseDuration(e){return e===void 0&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new $i(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}};const Ta=Phaser.Utils.Objects.GetValue,KF=Phaser.Utils.Objects.IsPlainObject,ZF=Phaser.Math.DegToRad,JF=Phaser.Math.RadToDeg;class Ro extends Gs{constructor(t,i,n,x,S,M,L){var F,G,X,Q,tt,_,nt,lt;if(KF(i)){var ot=i;i=ot.x,n=ot.y,x=ot.width,S=ot.height,M=ot.color,L=ot.alpha,F=ot.strokeColor,G=ot.strokeAlpha,X=ot.strokeWidth,Q=ot.arrowOnly,tt=ot.direction,_=ot.easeDuration,nt=ot.padding,lt=ot.radius}i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=1),S===void 0&&(S=x),Q===void 0&&(Q=!1),tt===void 0&&(tt=0),_===void 0&&(_=0),nt===void 0&&(nt=0),lt===void 0&&(lt=void 0),super(t,i,n,x,S),this.type="rexTriangle",this.setFillStyle(M,L),F!==void 0&&X===void 0&&(X=2),this.setStrokeStyle(X,F,G),this.setArrowOnly(Q),this.setDirection(tt,_),this.setPadding(nt),this.setRadius(lt),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=jF(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,i){return i!==void 0&&this.setEaseDuration(i),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,i,n,x){if(typeof t=="object"){var S=t,M=Ta(S,"x",null);M!==null?(t=M,n=M):(t=Ta(S,"left",0),n=Ta(S,"right",t));var L=Ta(S,"y",null);L!==null?(i=L,x=L):(i=Ta(S,"top",0),x=Ta(S,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),n===void 0&&(n=t),x===void 0&&(x=i);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=i||this.padding.right!=n||this.padding.bottom!=x,this.padding.left=t,this.padding.top=i,this.padding.right=n,this.padding.bottom=x,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return JF(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=ZF(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const QF={right:0,down:1,left:2,up:3};var jF=function(e){return typeof e=="string"&&(e=QF[e]),e=e%4,e};Object.assign(Ro.prototype,HF,$F),W.register("triangle",function(e,t,i,n,x,S){var M=new Ro(this.scene,e,t,i,n,x,S);return this.scene.add.existing(M),M}),J(window,"RexPlugins.UI.Triangle",Ro),Et();const qF=Phaser.GameObjects.Zone,_F=Phaser.Utils.Array.Add,t3=Phaser.Utils.Array.Remove;let Lo=class extends qF{constructor(t,i,n,x,S){i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=1),S===void 0&&(S=1),super(t,i,n,x,S),this.children=[]}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var i,n=this.children.length-1;n>=0;n--)i=this.children[n],!i.parentContainer&&!i.displayList&&i.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var i=this;return _F(this.children,t,0,function(n){n.once("destroy",i.onChildDestroy,i)},this),this}remove(t,i){var n=this;return t3(this.children,t,function(x){x.off("destroy",n.onChildDestroy,n),i&&x.destroy()}),this}onChildDestroy(t,i){this.remove(t,!1)}clear(t){for(var i=this,n,x=0,S=this.children.length;x<S;x++)n=this.children[x],n.off("destroy",i.onChildDestroy,i),t&&n.destroy();return this.children.length=0,this}};const tx=Phaser.GameObjects.Components;Phaser.Class.mixin(Lo,[tx.Alpha,tx.Flip]);var yi=function(e,t){var i;if(t===void 0)e.hasOwnProperty("rexContainer")&&(i=e.rexContainer.parent);else for(i=yi(e);i&&i.name!==t;)i=yi(i);return i},ex=function(e){for(var t=yi(e);t;)e=t,t=yi(t);return e};const e3=Phaser.Math.DegToRad,i3=Phaser.Math.RadToDeg;var Jt=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return i3(this.rotation)},set:function(i){this.rotation=e3(i)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(i){this.scaleX=i/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(i){this.scaleY=i/e.height}}),e.rexContainer=t}return e.rexContainer},s3={setParent(e,t){t===void 0&&(t=this);var i=Jt(e);return t?(i.parent=t,i.self=e):(i.parent=null,i.self=null),this},getParent(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),yi(e,t)},getTopmostParent(e){return e===void 0&&(e=this),ex(e)}};const Cn=Phaser.Utils.Objects.GetValue,ix=Lo.prototype.add;var sx=function(e,t){this.setParent(e);var i=Jt(e);return rx(i,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),ix.call(this,e),nx.call(this,e,i),this},ic=function(e,t){this.setParent(e);var i=Jt(e);return rx(i,t),i.x=e.x,i.y=e.y,i.rotation=e.rotation,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.alpha=e.alpha,i.visible=e.visible,i.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),ix.call(this,e),nx.call(this,e,i),this},rx=function(e,t){t===void 0&&(t=!0),typeof t=="boolean"?(e.syncPosition=t,e.syncRotation=t,e.syncScale=t,e.syncAlpha=t,e.syncScrollFactor=t,e.syncCameraFilter=t,e.syncDisplayList=t):(e.syncPosition=Cn(t,"syncPosition",!0),e.syncRotation=Cn(t,"syncRotation",!0),e.syncScale=Cn(t,"syncScale",!0),e.syncAlpha=Cn(t,"syncAlpha",!0),e.syncScrollFactor=Cn(t,"syncScrollFactor",!0),e.syncCameraFilter=Cn(t,"syncCameraFilter",!0),e.syncDisplayList=Cn(t,"syncDisplayList",!0))},nx=function(e,t){this.addToParentContainer(e),t.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)},r3={add(e){return Array.isArray(e)?this.addMultiple(e):sx.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):sx.call(this,e,t),this},addMultiple(e){for(var t=Array.from(arguments),i=0,n=e.length;i<n;i++)t[0]=e[i],this.add.apply(this,t);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):ic.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):ic.call(this,e,t),this},addLocalMultiple(e){for(var t=0,i=e.length;t<i;t++)ic.call(this,e[t]);return this}};const ax=Lo.prototype.remove,n3=Lo.prototype.clear;var a3={remove(e,t){return yi(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),ax.call(this,e,t),this)},unpin(e,t){return yi(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),ax.call(this,e,t),this)},clear(e){for(var t=this.children,i=0,n=t.length;i<n;i++){var x=t[i];this.setParent(x,null),e||this.removeFromRenderLayer(x)}return n3.call(this,e),this}},o3={getLocalState(e){return Jt(e)},resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,i=e.length;t<i;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},h3={worldToLocal(e){e.x-=this.x,e.y-=this.y;var t=Math.cos(-this.rotation),i=Math.sin(-this.rotation),n=e.x,x=e.y;return e.x=n*t-x*i,e.y=n*i+x*t,e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){e.x*=this.scaleX,e.y*=this.scaleY;var t=Math.cos(this.rotation),i=Math.sin(this.rotation),n=e.x,x=e.y;return e.x=n*t-x*i,e.y=n*i+x*t,e.x+=this.x,e.y+=this.y,e}},bo=function(e,t){return e===t?1:e/t},l3={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=Jt(e),i=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,i.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+i.rotation),t.syncScale&&(e.scaleX=t.scaleX*i.scaleX,e.scaleY=t.scaleY*i.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=Jt(e),i=t.parent;return t.x=e.x,t.y=e.y,i.worldToLocal(t),t.scaleX=bo(e.scaleX,i.scaleX),t.scaleY=bo(e.scaleY,i.scaleY),t.rotation=e.rotation-i.rotation,this},setChildPosition(e,t,i){return e.x=t,e.y=i,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,i){var n=Jt(e);return n.x=t,n.y=i,this.updateChildPosition(e),this},resetLocalPositionState(){var e=Jt(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX(e){var t=Jt(e);return t.x},getChildLocalY(e){var t=Jt(e);return t.y}};const u3=Phaser.Math.DegToRad;var d3={updateChildRotation(e){var t=Jt(e),i=t.parent;return t.syncRotation&&(e.rotation=i.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=Jt(e),i=t.parent;return t.rotation=e.rotation-i.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){var i=Jt(e);return i.rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){var i=Jt(e);return i.rotation=u3(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=Jt(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation(e){var t=Jt(e);return t.rotation}},f3={updateChildScale(e){var t=Jt(e),i=t.parent;return t.syncScale&&(e.scaleX=i.scaleX*t.scaleX,e.scaleY=i.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=Jt(e),i=t.parent;return t.scaleX=bo(e.scaleX,i.scaleX),t.scaleY=bo(e.scaleY,i.scaleY),this},setChildScale(e,t,i){return i===void 0&&(i=t),e.scaleX=t,e.scaleY=i,this.resetChildScaleState(e),this},setChildLocalScale(e,t,i){i===void 0&&(i=t);var n=Jt(e);return n.scaleX=t,n.scaleY=i,this.updateChildScale(e),this},setChildDisplaySize(e,t,i){return e.setDisplaySize(t,i),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=Jt(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX(e){var t=Jt(e);return t.scaleX},getChildLocalScaleY(e){var t=Jt(e);return t.scaleY}},c3={updateChildVisible(e){var t=Jt(e),i=t.parent,n=t.hasOwnProperty("maskVisible")?t.maskVisible:!0,x=i?i.visible:!0;return e.visible=x&&t.visible&&n,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=Jt(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){t===void 0&&(t=!0);var i=Jt(e);return i.visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){t===void 0&&(t=!0);var i=Jt(e);return i.maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=Jt(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible(e){var t=Jt(e);return t.visible}},v3={updateChildAlpha(e){var t=Jt(e),i=t.parent;return t.syncAlpha&&(e.alpha=i.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=Jt(e),i=t.parent;return t.alpha=bo(e.alpha,i.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){var i=Jt(e);return i.alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=Jt(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha(e){var t=Jt(e);return t.alpha}},p3={updateChildActive(e){var t=Jt(e),i=t.parent;return e.active=i.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){var t=Jt(e);return t.active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){t===void 0&&(t=!0);var i=Jt(e);return i.active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=Jt(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive(e){var t=Jt(e);return t.active}},g3={updateChildScrollFactor(e){var t=Jt(e),i=t.parent;return t.syncScrollFactor&&(e.scrollFactorX=i.scrollFactorX,e.scrollFactorY=i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},m3={updateCameraFilter(e){var t=Jt(e),i=t.parent;return t.syncCameraFilter&&(e.cameraFilter=i.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}},x3={updateChildMask(e){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){e===void 0&&(e=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(i){i.clearMask&&i.clearMask(!1),i.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(i)}),e&&this.mask&&this.mask.destroy(),this}},Cl=function(e){return e.filter(function(t){if(t.displayList)return!0;if(t.parentContainer)return!0})},y3={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var i=this.getAllChildren(),n=0,x=i.length;n<x;n++)i[n].depth=e;return this},swapDepth(e){var t=this.depth,i=e.depth;return this.setDepth(i),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),i=0,n=t.length;i<n;i++)t[i].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);Oi(t,!1);for(var i=0,n=t.length;i<n;i++){var x=t[i];e.exists(x)&&e.bringToTop(x)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);Oi(t,!0);for(var i=0,n=t.length;i<n;i++){var x=t[i];e.exists(x)&&e.sendToBack(x)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var i=this.getAllChildren([this]);Oi(i,!1);for(var n=0,x=i.length;n<x;n++){var S=i[n];if(t.exists(S)){t.moveBelow(e,S);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var i=this.getAllChildren([this]);Oi(i,!0);for(var n=0,x=i.length;n<x;n++){var S=i[n];if(t.exists(S)){t.moveAbove(e,S);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=Cl(t),t=Oi(t,!1)):t=[e];var i=this.getAllChildren([this]);i=Cl(i),i=Oi(i,!1);for(var n=i[i.length-1],x=0,S=t.length;x<S;x++){var M=t[x];n!==M&&(M!==this&&n.displayList!==M.displayList||(n.displayList.moveAbove(M,n),n=M))}return this},sendChildToBack(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=Cl(t),t=Oi(t,!1)):t=[e];var i=this.getAllChildren([this]);i=Cl(i),i=Oi(i,!1);for(var n=i[0],x=t.length-1;x>=0;x--){var S=t[x];n!==S&&(S!==this&&n.displayList!==S.displayList||(n.displayList.moveBelow(S,n),n=S))}return this}},ox=function(e,t){var i=t(e);if(!i&&e.isRexContainerLite)for(var n=e.children,x=0,S=n.length;x<S;x++)ox(n[x],t)},sc=function(e,t){for(var i=[e];i.length>0;){var n=i.shift(),x=t(n);!x&&n.isRexContainerLite&&i.push(...n.children)}};const Sn=Phaser.Utils.Array;var C3={getChildren(e){if(!e)e=this.children;else for(var t=0,i=this.children.length;t<i;t++)e.push(this.children[t]);return e},getAllChildren(e){e===void 0&&(e=[]);var t=this;return sc(t,function(i){i!==t&&e.push(i)}),e},getAllVisibleChildren(e){e===void 0&&(e=[]);var t=this;return sc(t,function(i){if(i!==t){if(!i.visible)return!0;e.push(i)}}),e},bfs(e,t){return t===void 0&&(t=this),sc(t,e),this},dfs(e,t){return t===void 0&&(t=this),ox(t,e),this},contains(e){var t=yi(e);return t?t===this?!0:this.contains(t):!1},getByName(e,t){if(t){for(var i=[this],n,x;i.length;){n=i.shift();for(var S=0,M=n.children.length;S<M;S++){if(x=n.children[S],x.name===e)return x;x.isRexContainerLite&&i.push(x)}}return null}else return Sn.GetFirst(this.children,"name",e)},getRandom(e,t){return Sn.GetRandom(this.children,e,t)},getFirst(e,t,i,n){return Sn.GetFirstElement(this.children,e,t,i,n)},getAll(e,t,i,n){return Sn.GetAll(this.children,e,t,i,n)},count(e,t,i,n){return Sn.CountAllMatching(this.children,e,t,i,n)},swap(e,t){return Sn.Swap(this.children,e,t),this},setAll(e,t,i,n){return Sn.SetAll(this.children,e,t,i,n),this}},hx=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var x=e[i];x.hasOwnProperty("rexContainer")&&t.push(x.rexContainer)}return t},S3=function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t].scene;if(n)return n}return null},lx=function(e,t,i){if(!i.parent){e.remove();return}var n=i.parent,x=i.self;switch(t){case"x":case"y":n.updateChildPosition(x);break;case"angle":case"rotation":n.updateChildRotation(x);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":n.updateChildScale(x);break;case"alpha":n.updateChildAlpha(x);break;default:n.updateChildPosition(x),n.updateChildRotation(x),n.updateChildScale(x),n.updateChildAlpha(x);break}},T3={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var i=this.scene||S3(t);if(i){e.targets=hx(t);var n=i.tweens.add(e);return n.on("update",lx),n}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=hx(t));var i=e.onUpdate;return e.onUpdate=function(n,x){i&&i(n,x),lx(n,void 0,x)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)}};const E3=Phaser.GameObjects.Container;var P3=function(e){return e instanceof E3},ux=function(e){var t=e.getAllChildren([e]);return t=t.filter(function(i){return!!i.displayList||!!i.parentContainer}),t},dx=function(e){var t=ux(this);t.indexOf(this)===-1&&t.push(this),Oi(t),e.add(t)},fx=function(e,t,i){if(this.scene){var n=ux(this);Oi(n,t),e.remove(n),i&&n.forEach(function(x){x.addToDisplayList()})}},M3={addToContainer(e){return P3(e)?(this._setParentContainerFlag=!0,dx.call(this,e),this._setParentContainerFlag=!1,this):this},addToLayer(e){return uo(e)?(dx.call(this,e),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,fx.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(e){return e===void 0&&(e=!0),uo(this.displayList)?(fx.call(this,this.displayList,!1,e),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var t=e.parentContainer;if(t)return t;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var t=this.getParentContainer();return t?(e.isRexContainerLite?e.addToContainer(t):t.add(e),this):this},addToPatentLayer(e){if(!e.displayList)return this;var t=this.displayList;return t===e.displayList?this:(uo(t)&&(e.isRexContainerLite?e.addToLayer(t):t.add(e)),this)}},w3={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var t=e.privateRenderLayer;if(t)return t;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var t=this.getRenderLayer();if(!t)return this;if(t===e.displayList)return this;e.isRexContainerLite?e.addToLayer(t):t.add(e);var i=Jt(e);return i.layer=t,this},removeFromRenderLayer(e){var t=Jt(e),i=t.layer;return i?(e.isRexContainerLite?e.removeFromLayer(!0):i.remove(e),t.layer=null,this):this}};const cx=Phaser.Geom.Rectangle,A3=Phaser.Geom.Rectangle.Union;var R3=function(e,t){t===void 0?t=new cx:t===!0&&(rc===void 0&&(rc=new cx),t=rc),t.setTo(0,0,0,0);for(var i,n=!0,x=0,S=e.length;x<S;x++)if(i=e[x],!!i.getBounds){var M=yf(i,!0);n?(t.setTo(M.x,M.y,M.width,M.height),n=!1):A3(M,t,t)}return t},rc,Tn=Phaser.Utils.Objects.GetValue,nc=function(e){if(e){var t=e.gameObjects,i=e.renderTexture,n=e.saveTexture,x=Tn(e,"x",void 0),S=Tn(e,"y",void 0),M=Tn(e,"width",void 0),L=Tn(e,"height",void 0),F=Tn(e,"originX",0),G=Tn(e,"originY",0),X=Tn(e,"padding",0),Q,tt;if(M===void 0||L===void 0||x===void 0||S===void 0){var _=R3(t,!0),nt=x!==void 0&&S!==void 0;nt?(M=Math.max(x-_.left,_.right-x)*2,L=Math.max(S-_.top,_.bottom-S)*2,F=.5,G=.5):(x=_.x,S=_.y,M=_.width,L=_.height,F=0,G=0),Q=_.x,tt=_.y}else Q=x+(0-F)*M,tt=S+(0-G)*L;Q-=X,tt-=X,M+=X*2,L+=X*2;var lt=t[0].scene,ot=lt.sys.textures;return n&&!i&&(i=ot.addDynamicTexture(n,M,L)),i||(i=lt.add.renderTexture(0,0,M,L)),i.setPosition&&i.setPosition(x,S),(i.width!==M||i.height!==L)&&i.setSize(M,L),i.setOrigin&&i.setOrigin(F,G),i.camera.setScroll(Q,tt),t=Oi(Hi(t)),i.draw(t),n&&(ci(i)?i.saveTexture(n):i.key!==n&&ot.renameTexture(i.key,key)),i}},L3={snapshot(e){var t=this.scaleX,i=this.scaleY,n=t===1&&i===1;n||this.setScale(1),e===void 0&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var x=nc(e),S=!!x.scene;return n||(this.setScale(t,i),S&&x.setScale(t,i)),S?x:this}};const vx=Phaser.Utils.Objects.GetValue;var b3=function(e,t){var i=vx(t,"drawContainer",!0),n=vx(t,"children");return n===void 0&&(n=this.getAllVisibleChildren([this])),i||(n=n.filter(function(x){return!x.isRexContainerLite})),v0(n,e,t),this};const O3=Phaser.Math.RotateAround;var F3=function(e,t,i){i===void 0&&(i=t);var n={x:(t-e.originX)*e.displayWidth,y:(i-e.originY)*e.displayHeight};return O3(n,0,0,e.rotation),e.originX=t,e.originY=i,e.x=e.x+n.x,e.y=e.y+n.y,e},D3=function(e,t){this.syncChildrenEnable=!1,F3(this,e,t),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),n=0,x=i.length;n<x;n++)this.resetChildPositionState(i[n]);return this},px={changeOrigin:D3,drawBounds:b3};Object.assign(px,s3,r3,a3,o3,h3,l3,d3,f3,c3,v3,p3,g3,m3,x3,y3,C3,T3,M3,w3,L3);class Ci extends Lo{constructor(t,i,n,x,S,M){Array.isArray(x)&&(M=x,x=void 0,S=void 0),super(t,i,n,x,S),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,M&&this.add(M)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&this.privateRenderLayer.scene&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,i){return this.setSize(t,i),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(t){this._cameraFilter!==t&&(this._cameraFilter=t,this.syncCameraFilter())}get list(){return this.children}static GetParent(t){return yi(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=yi(this);return t?t.setParentContainerFlag:!1}}Object.assign(Ci.prototype,px);var Sl=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer};function B3(e){return e===void 0&&(e=this),Sl(e)}var I3=function(e){var t=Sl(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},G3=function(e){return e===void 0&&(e=la(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this};const Ae=Phaser.Display.Align;var Ea={center:Ae.CENTER,left:Ae.LEFT_CENTER,right:Ae.RIGHT_CENTER,top:Ae.TOP_CENTER,bottom:Ae.BOTTOM_CENTER,"left-top":Ae.TOP_LEFT,"top-left":Ae.TOP_LEFT,"left-center":Ae.LEFT_CENTER,"center-left":Ae.LEFT_CENTER,"left-bottom":Ae.BOTTOM_LEFT,"bottom-left":Ae.BOTTOM_LEFT,"center-top":Ae.TOP_CENTER,"top-center":Ae.TOP_CENTER,"center-center":Ae.CENTER,"center-bottom":Ae.BOTTOM_CENTER,"bottom-center":Ae.BOTTOM_CENTER,"right-top":Ae.TOP_RIGHT,"top-right":Ae.TOP_RIGHT,"right-center":Ae.RIGHT_CENTER,"center-right":Ae.RIGHT_CENTER,"right-bottom":Ae.BOTTOM_RIGHT,"bottom-right":Ae.BOTTOM_RIGHT},ac=new Phaser.GameObjects.Zone({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1);ac.setOrigin(0);var ks={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_CENTER:4,CENTER:6,RIGHT_CENTER:8,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},oc=function(e){var t=te(e);return e.y+t-t*e.originY},hc=function(e){var t=_t(e);return e.x-t*e.originX+t*.5},lc=function(e,t){var i=te(e);return e.y=t-i+i*e.originY,e},uc=function(e,t){var i=_t(e),n=i*e.originX;return e.x=t+n-i*.5,e},k3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),uc(e,hc(t)+i),lc(e,oc(t)+n),e},dc=function(e){var t=_t(e);return e.x-t*e.originX},fc=function(e,t){var i=_t(e);return e.x=t+i*e.originX,e},N3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),fc(e,dc(t)-i),lc(e,oc(t)+n),e},cc=function(e){var t=_t(e);return e.x+t-t*e.originX},vc=function(e,t){var i=_t(e);return e.x=t-i+i*e.originX,e},z3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),vc(e,cc(t)+i),lc(e,oc(t)+n),e},pc=function(e,t){var i=te(e),n=i*e.originY;return e.y=t+n-i*.5,e},U3=function(e,t,i){return uc(e,t),pc(e,i)},gc=function(e){var t=te(e);return e.y-t*e.originY+t*.5},V3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),U3(e,hc(t)+i,gc(t)+n),e},X3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),fc(e,dc(t)-i),pc(e,gc(t)+n),e},W3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),vc(e,cc(t)+i),pc(e,gc(t)+n),e},mc=function(e){var t=te(e);return e.y-t*e.originY},xc=function(e,t){var i=te(e);return e.y=t+i*e.originY,e},Y3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),uc(e,hc(t)+i),xc(e,mc(t)-n),e},H3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),fc(e,dc(t)-i),xc(e,mc(t)-n),e},$3=function(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),vc(e,cc(t)+i),xc(e,mc(t)-n),e},ds=[];ds[ks.BOTTOM_CENTER]=k3,ds[ks.BOTTOM_LEFT]=N3,ds[ks.BOTTOM_RIGHT]=z3,ds[ks.CENTER]=V3,ds[ks.LEFT_CENTER]=X3,ds[ks.RIGHT_CENTER]=W3,ds[ks.TOP_CENTER]=Y3,ds[ks.TOP_LEFT]=H3,ds[ks.TOP_RIGHT]=$3;var gx=function(e,t,i,n,x){return ds[i](e,t,n,x)},Oo=function(e,t,i,n,x,S){ac.setPosition(t,i).setSize(n,x),gx(e,ac,S)};const Pa=Phaser.Utils.Objects.GetValue,K3=Phaser.GameObjects.Group,Z3=Phaser.GameObjects.Container;var J3=function(e,t){var i=e.scene,n,x,S,M,L;if(typeof t=="number")n=t;else{n=Pa(t,"color"),x=Pa(t,"lineWidth");var F=Pa(t,"name",!1);F&&(S=Pa(F,"createTextCallback",Q3),M=Pa(F,"createTextCallbackScope",void 0),L=Pa(F,"align","left-top"),typeof L=="string"&&(L=Ea[L]))}if(n===void 0&&(n=16777215),x===void 0&&(x=1),S&&!e.children){e.children=new K3(i),e.once("destroy",function(lt,ot){lt.children.destroy(!ot),lt.children=void 0});var G=e.clear.bind(e);e.clear=function(){G(),e.children.clear(!1,!0)}}var X=this.getAllShownChildren([this]);mx(X,X);for(var Q,tt,_=0,nt=X.length;_<nt;_++){if(Q=X[_],Q.getBounds||Q.width!==void 0&&Q.height!==void 0)En=yf(Q,En);else continue;n!=null&&e.lineStyle(x,n).strokeRectShape(En),Q.name&&S&&(M?tt=S.call(M,i):tt=S(i),tt&&(tt.setText(Q.name),e.children.add(tt),Oo(tt,En.x,En.y,En.width,En.height,L)))}return this},Q3=function(e,t,i){return e.add.text(0,0,"")},mx=function(e,t){Array.isArray(e)||(e=[e]),t===void 0&&(t=[]);for(var i=0,n=e.length;i<n;i++){var x=e[i];x instanceof Z3&&(t.push(...x.list),mx(x.list,t))}return t},En=void 0;const Tl=Phaser.Utils.Objects.GetValue;var Pn=function(e,t){return e===void 0&&(e=0),t===void 0&&(t={}),typeof e=="number"?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=Tl(e,"left",0),t.right=Tl(e,"right",0),t.top=Tl(e,"top",0),t.bottom=Tl(e,"bottom",0)),t};const j3=Ci.prototype.add;var Fo=function(e){return j3.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this},q3={addBackground(e,t,i){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(i=t,t=void 0),t===void 0&&(t=0),Fo.call(this,e),this.backgroundChildren.push(e);var n=this.getSizerConfig(e);return n.padding=Pn(t),i!==void 0&&this.addChildrenMap(i,e),this},isBackground(e){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(e)!==-1}},Mr=function(e,t){var i=null;if(t===void 0)e.hasOwnProperty("rexContainer")&&(i=e.rexContainer.parent,i?i.isRexSizer||(i=Mr(i)):i=null);else for(i=Mr(e);i&&i.name!==t;)i=Mr(i);return i},_3=function(e){for(var t=Mr(e);t;)e=t,t=Mr(t);return e},Ma={getParentSizer(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),Mr(e,t)},getTopmostSizer(e){return e===void 0&&(e=this),_3(e)},hasParentSizer(e,t){t===void 0&&(t=this);for(var i=Mr(t);i;){if(i===e)return!0;i=Mr(i)}return!1},hasChild(e,t){return t===void 0&&(t=this),this.hasParentSizer(t,e)}};const tD=Phaser.Utils.Array.Remove,eD=Ci.prototype.remove,xx=Ma.getParentSizer;var Do=function(e,t){for(var i=xx(e);i;)i.removeChildCallback&&i.removeChildCallback(e,t),i=xx(i);return this.isBackground(e)&&tD(this.backgroundChildren,e),eD.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};const iD=Phaser.Utils.Array.Remove,sD=Ma.getParentSizer;var rD={removeFromParentSizer(){var e=sD(gameObject);return e&&e.remove(this),this},removeBackground(e,t){return this.backgroundChildren===void 0?this:this.getParentSizer(e)!==this?this:(iD(this.backgroundChildren,e),Do.call(this,e,t),this)},removeAllBackgrounds(e){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],e);return this}},yx=function(e,t){if(typeof e=="string")this.childrenMap[e]=t;else{var i=e;for(e in i)this.childrenMap[e]=i[e]}return this},nD=function(e){if(typeof e=="object"){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},aD=function(e,t){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){t===void 0&&(t=!1);var i=e.shift(),n=null;if(i.charAt(0)==="#")i=i.substring(1),n=this.getByName(i,t);else if(e.length===0&&t){var x=this.childrenMap;if(x)for(var S=[x],M;S.length;){x=S.shift();for(var L in x)if(M=x[L],L===i){n=M;break}else M&&typeof M=="object"&&M.childrenMap&&S.push(M.childrenMap);if(n)break}}else if(i.indexOf("[")===-1)this.childrenMap&&(n=this.childrenMap[i]);else{var F=i.match(oD);if(F!=null&&this.childrenMap){var G=this.childrenMap[F[1]];G&&(n=G[F[2]])}}return e.length===0?n:n&&n.childrenMap?n.getElement(e):null}};const oD=/(\S+)\[(\d+)\]/i;var hD=function(e){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(e);return t===-1&&(t=null),t}else{if(this.getParentSizer(e)!==this)return null;for(var i in this.sizerChildren)if(this.sizerChildre[i]===e)return i;return null}},lD={getInnerPadding(e){return kh(this.space,e)},setInnerPadding(e,t){return mr(this.space,e,t),this},getOuterPadding(e){return kh(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return mr(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return typeof e=="string"&&(e=this.getElement(e)),kh(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,i){return typeof e=="string"&&(e=this.getElement(e)),mr(this.getSizerConfig(e).padding,t,i),this}},yc=function(e){var t=this.childrenWidth;if(t!==void 0){var i=this.minWidth!==void 0?this.minWidth*this.scaleX:0;return e===void 0?(e=Math.max(i,t),this.layoutWarnEnable&&i>0&&t>i&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${i}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(i>e||t>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${i}) or childrenWidth (${t} > targetWidth ${e})`),e}},Cc=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap)&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},uD=function(e){var t,i,n;for(var x in this.sizerChildren)t=this.sizerChildren[x],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildWidth(t,e),n=t.resolveWidth(i),n===void 0&&(n=i),t.resolveChildrenWidth(n))},Sc=function(e){var t,i,n;for(var x in this.sizerChildren)t=this.sizerChildren[x],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(i=this.getExpandedChildWidth(t,e),t.isRexSizer?(n=t.resolveWidth(i),n===void 0&&(n=i)):n=i,t.runWidthWrap(n));return this},Tc=function(e){var t=this.childrenHeight;if(t!==void 0){var i=this.minHeight!==void 0?this.minHeight*this.scaleY:0;return e===void 0?(e=Math.max(i,t),this.layoutWarnEnable&&i>0&&t>i&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${i}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(i>e||t>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${i}) or childrenHeight (${t}) > targetHeight (${e})`),e}},Ec=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runHeightWrap)&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},dD=function(e){var t,i,n;for(var x in this.sizerChildren)t=this.sizerChildren[x],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildHeight(t,e),n=t.resolveHeight(i),n===void 0&&(n=i),t.resolveChildrenHeight(n))},Pc=function(e){var t,i,n;for(var x in this.sizerChildren)t=this.sizerChildren[x],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(i=this.getExpandedChildHeight(t,e),t.isRexSizer?(n=t.resolveHeight(i),n===void 0&&(n=i)):n=i,t.runHeightWrap(n));return this},fD=function(e){var t;if(e.isRexSizer){var i=e.childrenWidth;if(i==null)return;var n=e.minWidth*e.scaleX;t=Math.max(n,i)}else e.minWidth!==void 0?t=e.minWidth:e._minWidth!==void 0?t=e._minWidth:t=_t(e);return t},cD=function(e){var t;if(e.isRexSizer){var i=e.childrenHeight;if(i===void 0)return;var n=e.minHeight*e.scaleY;t=Math.max(n,i)}else e.minHeight!==void 0?t=e.minHeight:e._minHeight!==void 0?t=e._minHeight:t=te(e);return t},vD=function(e,t){return t},pD=function(e,t){return t},gD=function(){return 0},mD=function(){return 0},xD=function(e){e===void 0&&(e=[]);for(var t=e.length,i=this.getChildrenSizers(e),n=e.length,x=t;x<n;x++)i[x].getAllChildrenSizers(e);return e},yD=function(e){return e===void 0&&(e=[]),e},CD={getShownChildren(e){e===void 0&&(e=[]);for(var t=this.children,i,n=0,x=t.length;n<x;n++)i=t[n],!(i.rexSizer&&i.rexSizer.hidden)&&e.push(i);return e},getAllShownChildren(e){e===void 0&&(e=[]);for(var t=[this];t.length>0;){var i=t.shift();i.rexSizer&&i.rexSizer.hidden||(i!==this&&e.push(i),i.isRexContainerLite&&t.push(...i.children))}return e}},Bo=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e=this.getChildrenSizers(),t,i=0,n=e.length;i<n;i++)t=e[i],!t.ignoreLayout&&t.preLayout()},SD=function(){return this.runLayout(),this},TD=function(e){if(e.resize)return!0;if(!e.setSize)return!1;for(var t=0,i=Cx.length;t<i;t++){var n=Cx[t];if(n&&e instanceof n)return!1}return!0},Cx=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],ED=function(e){if(e.displayWidth===void 0)return!1;for(var t=0,i=Sx.length;t<i;t++){var n=Sx[t];if(n&&e instanceof n)return!1}return!0},Sx=[Phaser.GameObjects.BitmapText],qe=function(e,t,i){if(!(!e||t===void 0&&i===void 0))if(TD(e)){var n,x;t===void 0?n=e.width:n=t/e.scaleX,i===void 0?x=e.height:x=i/e.scaleY,e.resize?e.resize(n,x):e.setSize(n,x)}else{var S=ED(e);t!==void 0&&(S?e.displayWidth=t:e.scaleX=t/e.width),i!==void 0&&(S?e.displayHeight=i:e.scaleY=i/e.height)}},PD=function(e,t,i){if(this.ignoreLayout)return this;var n=!e;n&&this.preLayout();var x,S;n||e.runChildrenWrapFlag?(x=this.hasWidthWrap(),S=this.hasHeightWrap()):(x=!1,S=!1);var M=MD(this,t,i,x,S);M||console.error("Can't resolve size of ",this);var L=M.width,F=M.height;return qe(this,L,F),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(e,L,F),n&&this._anchor&&this._anchor.updatePosition(),this},MD=function(e,t,i,n,x){var S=Tx(e,t,n),M=wD(e,i,x);return S===void 0&&(S=Tx(e,t,n)),S!==void 0&&M!==void 0?{width:S,height:M}:!1},Tx=function(e,n,i){var n=e.resolveWidth(n);return n!==void 0&&i&&(e.resolveChildrenWidth(n),e.runWidthWrap(n)),n},wD=function(e,n,i){var n=e.resolveHeight(n);return n!==void 0&&i&&(e.resolveChildrenHeight(n),e.runHeightWrap(n)),n},AD=function(){},RD=function(e,t,i){return this},LD=function(e,t,i,n){qe(i,e,t)};const El=Phaser.Utils.Objects.GetValue;class Mc extends ye{constructor(t,i){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(i)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var i=this.parent,n,x;t.x!==void 0?(n=null,x=t.x):t.left!==void 0?(n=0,x=t.left):t.right!==void 0?(n=1,x=t.right):t.centerX!==void 0&&(n=.5,x=t.centerX);var S,M;t.y!==void 0?(S=null,M=t.y):t.top!==void 0?(S=0,M=t.top):t.bottom!==void 0?(S=1,M=t.bottom):t.centerY!==void 0&&(S=.5,M=t.centerY);var L,F;x!==void 0&&(x=x.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),L=parseFloat(x[0])/100,F=x[1]===""?0:parseFloat(x[1]));var G,X;M!==void 0&&(M=M.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),G=parseFloat(M[0])/100,X=M[1]===""?0:parseFloat(M[1]));var Q=t.width,tt,_;Q!==void 0&&(Q=Q.split("%"),tt=parseFloat(Q[0])/100,_=Q[1]===""?0:parseFloat(Q[1]));var nt=t.height,lt,ot;nt!==void 0&&(nt=nt.split("%"),lt=parseFloat(nt[0])/100,ot=nt[1]===""?0:parseFloat(nt[1]));var dt=t.aspectRatio;dt===!0&&(dt=i.displayWidth/i.displayHeight),this.setAlign(n,S),this.setPercentage(L,G),this.setOffset(F,X),this.setSizePercentage(tt,lt),this.setSizePadding(_,ot),this.setAspectRatio(dt);var ct=El(t,"onResizeCallback",LD),ft=El(t,"onResizeCallbackScope");this.setResizeCallback(ct,ft);var xt=El(t,"onUpdateViewportCallback"),St=El(t,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(xt,St),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,i){return this.alignX=t,this.alignY=i,this}setPercentage(t,i){return this.percentageX=t,this.percentageY=i,this}setOffset(t,i){return this.offsetX=t,this.offsetY=i,this}setSizePercentage(t,i){return this.percentageWidth=t,this.percentageHeight=i,this}setSizePadding(t,i){return this.paddingWidth=t,this.paddingHeight=i,this}setAspectRatio(t){return this.aspectRatio=t,this}setResizeCallback(t,i){return this.onResizeCallback=t,this.onResizeCallbackScope=i,this}setUpdateViewportCallback(t,i){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=i,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,i=this.onResizeCallbackScope,n=this.anchorWidth,x=this.anchorHeight;if(!(n===void 0&&x===void 0||!t)){var S=this.parent;n===void 0&&(this.aspectRatio&&x?n=this.aspectRatio*x:n=S.width),x===void 0&&(this.aspectRatio&&n?x=n/this.aspectRatio:x=S.height),i?t.call(i,n,x,S,this):t(n,x,S,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=la(this.scene,t,this.viewport);var i=this.viewport,n=this.onUpdateViewportCallback,x=this.onUpdateViewportCallbackScope;n&&(x?n.call(x,i,this.parent,this):n(i,this.parent,this))}}var bD=function(e){e===void 0&&(e={});var t=e.hasOwnProperty("width"),i=e.hasOwnProperty("height"),n=e.hasOwnProperty("onResizeCallback");return(t||i)&&!n&&(e.onResizeCallback=function(x,S,M){x!==void 0&&M.setMinWidth(x),S!==void 0&&M.setMinHeight(S),M.layout()}),this._anchor===void 0?this._anchor=new Mc(this,e):this._anchor.resetFromJSON(e),this};const OD=Phaser.Utils.Objects.GetValue,wa=Phaser.Utils.Objects.GetAdvancedValue,Ex=Phaser.Math.Linear;class Io extends gn{constructor(t,i){super(t,i),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(OD(t,"mode",0)),this.setScaleRange(wa(t,"start",void 0),wa(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=FD[t]),this.mode=t,this}setScaleRange(t,i){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=wa(t,"x",this.parent.scaleX),this.startY=wa(t,"y",this.parent.scaleY)),typeof i=="number"?(this.endX=i,this.endY=i):(this.endX=wa(i,"x",void 0),this.endY=wa(i,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var i=this.repeat;return this.mode===2&&i!==-1&&(i=(i+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(i),super.start(),this}updateTarget(t,i){var n=i.t;i.isOddIteration&&(n=1-n),n=this.easeFn(n),this.hasScaleX&&(t.scaleX=Ex(this.startX,this.endX,n)),this.hasScaleY&&(t.scaleY=Ex(this.startY,this.endY,n))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const FD={stop:0,destroy:1,yoyo:2};var wc=function(e,t,i,n,x){n===void 0&&(n="Cubic");var S,M;switch(i){case 0:case"x":S={x:0},M={x:e.scaleX};break;case 1:case"y":S={y:0},M={y:e.scaleY};break;default:S=0,M=e.scale;break}var L={mode:0,start:S,end:M,duration:t,ease:n};return x===void 0?x=new Io(e,L):x.resetFromJSON(L),x.restart(),x},Px=function(e,t,i,n,x,S){n===void 0&&(n="Linear"),x instanceof Io&&(S=x,x=void 0),x===void 0&&(x=!0);var M={};switch(M.mode=x?1:0,i){case 0:case"x":M.end={x:0};break;case 1:case"y":M.end={y:0};break;default:M.end=0;break}return M.duration=t,M.ease=n,S===void 0?S=new Io(e,M):S.resetFromJSON(M),S.restart(),S},DD=function(e,t,i,n,x,S,M){i===void 0&&(i=1.2),n===void 0&&(n=0),S===void 0&&(S="Cubic");var L,F;switch(x){case 0:case"x":L={x:e.scaleX},F={x:i};break;case 1:case"y":L={y:e.scaleX},F={y:i};break;default:L=e.scaleX,F=i;break}var G={mode:2,start:L,end:F,duration:t/2,ease:S,repeat:n};return M===void 0?M=new Io(e,G):M.resetFromJSON(G),M.restart(),M};const Ac=Phaser.Utils.Objects.IsPlainObject;var Mx={onInitScale(){var e=this,t=this._scaleBehavior;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},popUp(e,t,i){if(Ac(e)){var n=e;e=n.duration,t=n.orientation,i=n.ease}var x=this._scaleBehavior===void 0;return this._scaleBehavior=wc(this,e,t,i,this._scaleBehavior),x&&this.onInitScale(),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,t,i){return this.popUp(e,t,i),Ke(this._scaleBehavior)},isRunningPopUp(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="popup.complete"},scaleDownDestroy(e,t,i,n){if(Ac(e)){var x=e;e=x.duration,t=x.orientation,i=x.ease,n=x.destroy}var S=this._scaleBehavior===void 0;return this._scaleBehavior=Px(this,e,t,i,n,this._scaleBehavior),S&&this.onInitScale(),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,i,n){return this.scaleDownDestroy(e,t,i,n),Ke(this._scaleBehavior)},scaleDown(e,t,i){return this.scaleDownDestroy(e,t,i,!1),this},scaleDownPromise(e,t,i){return this.scaleDown(e,t,i),Ke(this._scaleBehavior)},isRunningScaleDown(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="scaledown.complete"},scaleYoyo(e,t,i,n,x){if(Ac(e)){var S=e;e=S.duration,t=S.peakValue,i=S.repeat,n=S.orientation,x=S.ease}var M=this._scaleBehavior===void 0;return this._scaleBehavior=DD(this,e,t,i,n,x,this._scaleBehavior),M&&this.onInitScale(),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,i,n,x){return this.scaleYoyo(e,t,i,n,x),Ke(this._scaleBehavior)},isRunningScaleYoyo(){return this._scaleBehavior&&(this._scaleBehavior.completeEventName="scaleyoyo.complete")},isRunningEaseScale(){return this.isRunningPopUp()||this.isRunningScaleDown()||this.isRunningScaleYoyo()}},Ns={};Object.assign(Ns,Mx),Ns.onInitScale=function(){Mx.onInitScale.call(this);var e=this,t=this._scaleBehavior;t.on("update",function(){var i=Ma.getParentSizer(e);i&&i.resetChildPositionState(e)})};const BD=Phaser.Utils.Objects.GetValue,wx=Phaser.Utils.Objects.GetAdvancedValue,ID=Phaser.Math.Linear;let Rc=class extends gn{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(BD(t,"mode",0)),this.setAlphaRange(wx(t,"start",this.parent.alpha),wx(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=GD[t]),this.mode=t,this}setAlphaRange(t,i){return this.alphaStart=t,this.alphaEnd=i,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,i){var n=i.t;i.isOddIteration&&(n=1-n),t.alpha=ID(this.alphaStart,this.alphaEnd,n)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const GD={stop:0,destroy:1,yoyo:2},kD=Phaser.Utils.Objects.IsPlainObject;var Pl=function(e,t,i,n){var x,S;kD(i)?(x=i.start,S=i.end):S=i,x===void 0&&(x=0),S===void 0&&(S=1);var M={mode:0,start:x,end:S,duration:t};return n===void 0?n=new Rc(e,M):n.resetFromJSON(M),n.restart(),n},Ml=function(e,t,i,n){i instanceof Rc&&(n=i,i=void 0),i===void 0&&(i=!0);var x={mode:i?1:0,end:0,duration:t};return n===void 0?n=new Rc(e,x):n.resetFromJSON(x),n.restart(),n};const Ax=Phaser.Utils.Objects.IsPlainObject;var Rx={onInitFade(){var e=this,t=this._fade;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},fadeIn(e,t){if(Ax(e)){var i=e;e=i.duration,t=i.alpha}var n=this._fade===void 0;return this._fade=Pl(this,e,t,this._fade),n&&this.onInitFade(),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),Ke(this._fade)},isRunningFadeIn(){return this._fade&&this._fade.completeEventName==="fadein.complete"},fadeOutDestroy(e,t){if(Ax(e)){var i=e;e=i.duration,t=i.destroy}var n=this._fade===void 0;return this._fade=Ml(this,e,t,this._fade),n&&this.onInitFade(),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),Ke(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),Ke(this._fade)},isRunningFadeOut(){return this._fade&&this._fade.completeEventName==="fadeout.complete"},isRunningEaseFade(){return this.isRunningFadeIn()||this.isRunningFadeOut()}},Go={};Object.assign(Go,Rx),Go.onInitFade=function(){Rx.onInitFade.call(this);var e=this,t=this._fade;t.on("update",function(){var i=Ma.getParentSizer(e);i&&i.resetChildAlphaState(e)})};const ND=Phaser.Utils.Objects.GetValue,Aa=Phaser.Utils.Objects.GetAdvancedValue,Lx=Phaser.Math.Linear;class wl extends gn{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(ND(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=Aa(t,"x",void 0),n=Aa(t,"y",void 0);this.setTargetPosition(i,n)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=zD[t]),this.mode=t,this}setTargetPosition(t,i){if(typeof t=="number"||typeof i=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var n=t;this.startX=Aa(n,"startX",void 0),this.startY=Aa(n,"startY",void 0),this.endX=Aa(n,"endX",void 0),this.endY=Aa(n,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,i){var n=i.t;i.isOddIteration&&(n=1-n),n=this.easeFn(n),this.hasMoveX&&(t.x=Lx(this.startX,this.endX,n)),this.hasMoveY&&(t.y=Lx(this.startY,this.endY,n))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const zD={stop:0,destroy:1,yoyo:2};var Al=function(e,t){if(typeof e=="number")return e;var i=e[0],n=parseFloat(e.substr(2));switch(i){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n}},bx=function(e,t,i,n,x,S,M){S instanceof wl&&(M=S,S=void 0),S===void 0&&(S=!1);var L={};return L.mode=S?1:0,i!==void 0&&(L.startX=e.x,L.endX=Al(i,e.x)),n!==void 0&&(L.startY=e.y,L.endY=Al(n,e.y)),L.duration=t,L.ease=x===void 0?"Linear":x,M===void 0?M=new wl(e,L):M.resetFromJSON(L),M.restart(),M},Ox=function(e,t,i,n,x,S,M){S instanceof wl&&(M=S,S=void 0),S===void 0&&(S=!1);var L={};return L.mode=S?1:0,i!==void 0&&(L.startX=Al(i,e.x),L.endX=e.x),n!==void 0&&(L.startY=Al(n,e.y),L.endY=e.y),L.duration=t,L.ease=x===void 0?"Linear":x,M===void 0?M=new wl(e,L):M.resetFromJSON(L),M.restart(),M};const Fx=Phaser.Utils.Objects.IsPlainObject,Dx=Phaser.Math.Distance.Between;var Bx={onInitEaseMove(){var e=this,t=this._easeMove;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},moveFrom(e,t,i,n,x){if(Fx(e)){var S=e;t=S.x,i=S.y,S.hasOwnProperty("speed")?e=Dx(t,i,this.x,this.y)*1e3/S.speed:e=S.duration,n=S.ease}var M=this._easeMove===void 0;return this._easeMove=Ox(this,e,t,i,n,x,this._easeMove),M&&this.onInitEaseMove(),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,i,n,x){return this.moveFrom(e,t,i,n,x),Ke(this._easeMove)},moveFromDestroy(e,t,i,n){return this.moveFrom(e,t,i,n,!0),this},moveFromDestroyPromise(e,t,i,n){return this.moveFromDestroy(e,t,i,n),Ke(this._easeMove)},isRunningMoveFrom(){return this._easeMove&&(this._easeMove.completeEventName="movefrom.complete")},moveTo(e,t,i,n,x){if(Fx(e)){var S=e;t=S.x,i=S.y,S.hasOwnProperty("speed")?e=Dx(t,i,this.x,this.y)*1e3/S.speed:e=S.duration,n=S.ease}var M=this._easeMove===void 0;return this._easeMove=bx(this,e,t,i,n,x,this._easeMove),M&&this.onInitEaseMove(),this._easeMove.completeEventName,this},moveToPromise(e,t,i,n,x){return this.moveTo(e,t,i,n,x),Ke(this._easeMove)},moveToDestroy(e,t,i,n){return this.moveTo(e,t,i,n,!0),this},moveToDestroyPromise(e,t,i,n){return this.moveToDestroy(e,t,i,n,!0),Ke(this._easeMove)},isRunningMoveTo(){return this._easeMove&&this._easeMove.completeEventName==="moveto.complete"},isRunningEaseMove(){return this.isRunningMoveFrom()||this.isRunningMoveTo()},moveStop(e){return this._easeMove?(this._easeMove.stop(e),this):this}},Rl={};Object.assign(Rl,Bx),Rl.onInitEaseMove=function(){Bx.onInitEaseMove.call(this);var e=this,t=this._easeMove;t.on("update",function(){var i=Ma.getParentSizer(e);i&&i.resetChildPositionState(e)})};const Bi=Phaser.Utils.Objects.GetValue;class Lc extends Kh{constructor(t,i){super(t,i),this.timer=new P0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Bi(t,"timer")),this.setEnable(Bi(t,"enable",!0)),this.setMode(Bi(t,"mode",1)),this.isRunning=Bi(t,"isRunning",!1),this.setMagnitudeMode(Bi(t,"magnitudeMode",1)),this.setAxisMode(Bi(t,"axis",0)),this.setDuration(Bi(t,"duration",500)),this.setMagnitude(Bi(t,"magnitude",10)),this.ox=Bi(t,"ox",void 0),this.oy=Bi(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=UD[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=XD[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=VD[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,i){if(typeof t!="number"){var n=t;i=Bi(n,"magnitude",void 0),t=Bi(n,"duration",void 0)}return i!==void 0&&this.setMagnitude(i),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,i){return this.start(t,i),this}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.parent;if(!n.active)return this;if(this.timer.update(t,i),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=n.x,this.oy=n.y);var x=this.magnitude;this.magnitudeMode===1&&(x*=1-this.timer.t);var S=Math.random()*Math.PI*2,M=this.ox+Math.cos(S)*x,L=this.oy+Math.sin(S)*x;switch(this.axisMode){case 1:n.x=M;break;case 2:n.y=L;break;default:n.x=M,n.y=L;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const UD={effect:0,behavior:1},VD={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},XD={constant:0,decay:1},WD=Phaser.Utils.Objects.IsPlainObject;var YD=function(e,t){t.on("complete",function(){e.emit("shake.complete",e)})},HD={shake(e,t,i){if(WD(e)){var n=e;e=n.duration,t=n.magnitude,i=n.magnitudeMode}return this._shake===void 0&&(this._shake=new Lc(this,{mode:0,magnitudeMode:1}),YD(this,this._shake)),e!==void 0&&this._shake.setDuration(e),t!==void 0&&this._shake.setMagnitude(t),i!==void 0&&this._shake.setMagnitudeMode(i),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),Ke(this._shake)}};const Ix=Phaser.Utils.Objects.IsPlainObject;class $D extends ye{constructor(t,i){super(t,i),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var i=this.easeTasks[t];return i===void 0&&(i=new $i(this.parent),this.easeTasks[t]=i,i.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),i}easeTo(t,i,n,x){if(Ix(t)){var S=t;t=S.key,i=S.value,n=S.duration,x=S.ease;var M=S.speed;n===void 0&&M!==void 0&&(n=Math.abs(i-this.parent.data.values[t])/M*1e3)}n===void 0&&(n=1e3),x===void 0&&(x="Linear");var L=this.getEaseTask(t);return L.restart({key:t,to:i,duration:n,ease:x}),this}easeFrom(t,i,n,x){if(Ix(t)){var S=t;t=S.key,i=S.value,n=S.duration,x=S.ease;var M=S.speed;n===void 0&&M!==void 0&&(n=Math.abs(i-this.parent.data.values[t])/M*1e3)}n===void 0&&(n=1e3),x===void 0&&(x="Linear");var L=this.getEaseTask(t);return L.restart({key:t,from:i,duration:n,ease:x}),this}stopEase(t,i){i===void 0&&(i=!0);var n=this.easeTasks[t];return n&&n.stop(i),this}stopAll(t){t===void 0&&(t=!0);for(var i in this.easeTasks)this.stopEase(i,t);return this}}var KD=function(e,t){t.on("complete",function(i){e.emit(`easedata.${i}.complete`,e),e.emit("easedata.complete",i,e)})},ZD={easeDataTo(e,t,i,n){return this._easeData||(this._easeData=new $D(this),KD(this,this._easeData)),this._easeData.easeTo(e,t,i,n),this},easeDataToPromise(e,t,i,n){return this.easeDataTo(e,t,i,n),tl(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}},JD=Phaser.Utils.Array.Remove,QD=function(e){e._delayCallTimers=[],e.once("destroy",function(){for(var t=e._delayCallTimers,i=0,n=t.length;i<n;i++)t[i].remove();e._delayCallTimers=void 0})},Gx={delayCall(e,t,i){var n=this._delayCallTimers;n===void 0&&QD(this);var x,S=this,M=function(){JD(S._delayCallTimers,x),i?t.call(i):t()};return x=this.scene.time.delayedCall(e,M),this._delayCallTimers.push(x),this}},wr=function(e){kx(e,!1)},Ar=function(e){kx(e,!0)},bc=function(e){if(!e)return!1;var t=Sl(e);return!t.hidden},kx=function(e,t){if(e){var i=Sl(e);i.hidden=t;var n=yi(e);n?n.setChildVisible(e,!t):e.setVisible(!t)}},jD={show(e){return e===void 0&&(e=this),wr(e),this},hide(e){return e===void 0&&(e=this),Ar(e),this},isShow(e){return e===void 0&&(e=this),bc(e)}};const qD=["next","exit","enter"];let Nx=class{constructor(t){var i=Gt(t,"states",void 0);i&&this.addStates(i);var n=Gt(t,"extend",void 0);if(n)for(var x in n)(!this.hasOwnProperty(x)||this[x]===void 0)&&(this[x]=n[x]);var S=Gt(t,"eventEmitter",void 0),M=Gt(t,"EventEmitterClass",void 0);this.setEventEmitter(S,M),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Gt(t,"enable",!0)),this.start(Gt(t,"start",void 0));var i=Gt(t,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var i="exit_"+this._prevState,n=this[i];n&&n.call(this),this.emit(i,this)}if(this._stateLock=!1,this._state!=null){var x="enter_"+this._state,S=this[x];S&&S.call(this),this.emit(x,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,i=this["next_"+this.state];return i&&(typeof i=="string"?t=i:t=i.call(this)),this.goto(t),this}get stateProperties(){return qD}addState(t,i){typeof t!="string"&&(i=t,t=i.name);for(var n=this.stateProperties,x=0,S=n.length;x<S;x++){var M=n[x],L=i[M];L&&(this[`${M}_${t}`]=L)}return this}addStates(t){if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)this.addState(t[i]);else for(var x in t)this.addState(x,t[x]);return this}runMethod(t,i,n,x,S,M){var L=this[t+"_"+this.state];if(L){var F=arguments.length;switch(F){case 1:return L.call(this);case 2:return L.call(this,i);case 3:return L.call(this,i,n);case 4:return L.call(this,i,n,x);case 5:return L.call(this,i,n,x,S);case 6:return L.call(this,i,n,x,S,M)}for(var G=new Array(F-1),X=1;X<F;X++)G[X-1]=arguments[X];return L.apply(this,G)}}};Object.assign(Nx.prototype,X0);var Oc=function(e,t,i,n,x){x===void 0&&(x=!1);var S=e._events[t];if(!S)return!1;for(var M=0,L=S.length;M<L;M++){var F=S[M];if(F.fn===i&&F.context===n&&F.once===x)return!0}return!1};const _D=["next","exit","enter","update","preupdate","postupdate"];class zs extends Nx{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Gt(t,"scene",void 0),this}get stateProperties(){return _D}update(t,i){this.runMethod("update",t,i)}preupdate(t,i){this.runMethod("preupdate",t,i)}postupdate(t,i){this.runMethod("postupdate",t,i)}startUpdate(t){t||(t=this._scene);var i=t.sys.events;return Oc(i,"update",this.update,this)?this:(this._scene=t,i.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var i=t.sys.events;return Oc(i,"preupdate",this.preupdate,this)?this:(this._scene=t,i.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var i=t.sys.events;return Oc(i,"postupdate",this.postupdate,this)?this:(this._scene=t,i.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let t4=class extends zs{constructor(t,i){super(i),this.parent=t;var n=i.initState||"IDLE";this.start(n)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var i=t.runTransitionInCallback();t.delayCall(i,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var i=t.runTransitionOutCallback();t.delayCall(i,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};var e4=function(e,t,i,n,x){var S=da(e),M=S.time.delayedCall(t,function(){S.game.events.once("poststep",function(){i.call(n,x)})});return M},i4={delayCall(e,t,i){return this.delayCallTimer=e4(this,e,t,i),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},s4={setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=a),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=a),this.transitOutCallback=e,this}},r4={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var i=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=i,this}},n4={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var i=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=i,this}},zx={};Object.assign(zx,i4,s4,r4,n4);const Ra=Phaser.Utils.Objects.GetValue;class Ll extends ye{constructor(t,i){super(t,i),this.setTransitInTime(Ra(i,"duration.in",200)),this.setTransitOutTime(Ra(i,"duration.out",200)),this.setTransitInCallback(Ra(i,"transitIn")),this.setTransitOutCallback(Ra(i,"transitOut")),this.oneShotMode=Ra(i,"destroy",!1),this.delayCallTimer=void 0,this._state=new t4(this,{eventEmitter:!1,initState:Ra(i,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(Ll.prototype,zx);const a4=Phaser.GameObjects.Rectangle;class Fc extends a4{constructor(t,i,n){super(t,0,0,2,2,i,1),this.fullWindow=new xm(this),this.setAlpha(n)}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}}const Dc=Phaser.Utils.Objects.GetValue;class bl extends ye{constructor(t,i){super(t,{eventEmitter:!1}),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Dc(t,"hitAreaMode",0)),this.setEnable(Dc(t,"enable",!0)),this.setStopMode(Dc(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,i,n,x){this.stopAllLevels&&x.stopPropagation()},this).on("pointerup",function(t,i,n,x){this.stopAllLevels&&x.stopPropagation()},this).on("pointermove",function(t,i,n,x){this.stopAllLevels&&x.stopPropagation()},this).on("pointerover",function(t,i,n,x){this.stopAllLevels&&x.stopPropagation()},this).on("pointerout",function(t,i){this.stopAllLevels&&i.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=o4[t]);var i=this.parent;return i.input&&i.removeInteractive(),t===0?i.setInteractive():i.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var o4={default:0,fullWindow:1};const Ux=Phaser.Utils.Objects.GetValue;class Bc extends Fc{constructor(t,i){var n=Ux(i,"color",0),x=Ux(i,"alpha",.8);super(t,n,x),this.touchEventStop=new bl(this,{hitAreaMode:1})}}var h4=function(e,t){var i=e.scene,n=new Bc(i,t);return i.add.existing(n),e.isRexContainerLite?(e.pin(n,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),e.moveDepthBelow(n)):i.children.moveBelow(n,e),n},Ol={popUp(e,t){e._modalScaleSave!==void 0?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,wc(e,t)},scaleDown(e,t){Px(e,t,void 0,void 0,!1)},fadeIn(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,Pl(e,t)},fadeOut(e,t){Ml(e,t,!1)}},l4=function(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,Pl(e,t,e.alpha)},u4=function(e,t){Ml(e,t,!1)},Fl=function(e,t,i,n,x){if(!e||n&&!n(e,t,i))return!1;var S=yf(e,!0);return!(!S.contains(t,i)||x&&!x(e,t,i))};const fs=Phaser.Utils.Objects.GetValue;let d4=class extends Ll{constructor(t,i){i===void 0&&(i={}),i.transitIn==null&&(i.transitIn=Rr.popUp),i.transitOut==null&&(i.transitOut=Rr.scaleDown),i.destroy=fs(i,"destroy",!0),super(t,i);var n=fs(i,"cover");this.cover=n!==!1?h4(t,n):void 0,this.cover&&(this.setCoverTransitInCallback(fs(n,"transitIn",l4)),this.setCoverTransitOutCallback(fs(n,"transitOut",u4)));var x=fs(i,"touchOutsideClose",!1),S=fs(i,"duration.hold",-1),M=fs(i,"timeOutClose",S>=0),L=fs(i,"anyTouchClose",!1),F=fs(i,"manualClose",!1);F&&(x=!1,L=!1,M=!1),L&&(x=!1),M?this.setDisplayTime(S):this.setDisplayTime(-1),L?this.once("open",this.anyTouchClose,this):x&&this.once("open",this.touchOutsideClose,this),fs(i,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Fl(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),i=this.cover;return i&&this.coverTransitInCallback&&this.coverTransitInCallback(i,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),i=this.cover;return i&&this.coverTransitOutCallback&&this.coverTransitOutCallback(i,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Rr[t]),t){case Rr.popUp:t=Ol.popUp;break;case Rr.fadeIn:t=Ol.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Rr[t]),t){case Rr.scaleDown:t=Ol.scaleDown;break;case Rr.fadeOut:t=Ol.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}};const Rr={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Ic=function(e,t){var i=new d4(e,t);return i.on("open",function(){e.emit("modal.open",i)}),i.on("close",function(n){e.emit("modal.close",n,i)}),e.on("modal.requestClose",i.requestClose,i),i},f4=function(e,t){var i=Ic(e,t);return new Promise(function(n,x){i.once("close",function(S){n(S)})})},Vx=function(e,t){e.emit("modal.requestClose",t)},Ki=function(e){return e&&typeof e=="function"},Dl={modal(e,t){return Ki(e)&&(t=e,e=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=Ic(this,e)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(e){var t=this;return new Promise(function(i,n){t.modal(e,i)})},modalClose(e){return Vx(this,e),this}},c4=function(e,t,i,n,x,S){return S===void 0&&(S=!1),t[S?"once":"on"](i,n,x),e.once("destroy",function(){t.off(i,n,x)}),e},Us=function(e,t,i,n,x){Ki(t)&&(x=n,n=i,i=t,t=this);var S=this.scene.events;return this.bindEvent(t,S,e,i,n,x),this},v4={bindEvent(e,t,i,n,x,S){return typeof t=="string"&&(S=x,x=n,n=i,i=t,t=e,e=this),c4(e,t,i,n,x,S),this},bindScenePreupdateEvent(e,t,i,n){return Us.call(this,"preupdate",e,t,i,n),this},bindSceneUpdateEvent(e,t,i,n){return Us.call(this,"update",e,t,i,n),this},bindScenePostupdateEvent(e,t,i,n){return Us.call(this,"postupdate",e,t,i,n),this},bindSceneRenderEvent(e,t,i,n){return Us.call(this,"render",e,t,i,n),this},bindScenePauseEvent(e,t,i,n){return Us.call(this,"pause",e,t,i,n),this},bindSceneResumeEvent(e,t,i,n){return Us.call(this,"resume",e,t,i,n),this},bindSceneSleepEvent(e,t,i,n){return Us.call(this,"sleep",e,t,i,n),this},bindSceneWakeEvent(e,t,i,n){return Us.call(this,"wake",e,t,i,n),this},bindSceneShutdownEvent(e,t,i,n){return Us.call(this,"shutdown",e,t,i,n),this}},Bl=function(e,t,i){var n=e.camera;return n?(i===void 0?i={}:i===!0&&(i=p4),n===t?(i.x=e.worldX,i.y=e.worldY):n.getWorldPoint(e.x,e.y,i),i):null},p4={},g4=function(e,t,i,n,x){var S=e.scene.sys.cameras.main,M,L=e.scrollFactorX===0&&e.scrollFactorY===0;if(t)return L?i(e,t.x,t.y,n,x):(M=Bl(t,S,!0),M?i(e,M.x,M.y,n,x):!1);for(var F=e.scene.input.manager,G=F.pointersTotal,X=F.pointers,Q=0;Q<G;Q++)if(t=X[Q],L){if(i(e,t.x,t.y,n,x))return!0}else{if(M=Bl(t,S,!0),!M)continue;if(i(e,M.x,M.y,n,x))return!0}return!1},cs=function(e,t,i,n){return g4(e,t,Fl,i,n)},m4=function(e,t){return(ci(e)||typeof e=="string")&&(t=e,e=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),cs(t,e)},Zi=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Mn=function(e,t,i,n,x){return Fl(e,t,i,x4(n),x)},Xx=function(e){var t=e.rexSizer&&e.rexSizer.hidden;return!t},x4=function(e){return e?function(t,i,n){return Xx(t)?(e(t,i,n),!0):!1}:Xx},Wx=function(e,t,i,n,x){if(Ki(i)||(x=i,i=void 0,n=void 0),x===void 0&&(this.sizerChildren?x=this.sizerChildren:this.isRexContainerLite?x=this.children:x=this.list),Zi(x)){for(var S,M=0,L=x.length;M<L;M++)if(S=x[M],Mn(S,e,t,i,n))return S}else{var S;for(var F in x)if(S=x[F],Mn(S,e,t,i,n))return S}return null},y4=function(e,t){return t===void 0?t={}:t===!0&&(t=C4),t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.width=e.width,t.height=e.height,t.displayWidth=e.displayWidth,t.displayHeight=e.displayHeight,t},C4={},ko=function(e){this.sizerEventsEnable&&(y4(e,this.getChildPrevState(e)),this.layoutedChildren.push(e))},No=function(e,t,i,n,x,S,M,L){M===void 0&&(M=0),L===void 0&&(L=0),Oo(e,t,i,n,x,S),e.x+=M,e.y+=L,this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};const S4=Phaser.Display.Align.CENTER;var T4=function(){if(this.backgroundChildren!==void 0)for(var e=this.backgroundChildren,t=this.left,i=this.top,n=this.width*this.scaleX,x=this.height*this.scaleY,S,M,L,F,G,X,Q,tt=0,_=e.length;tt<_;tt++)S=e[tt],M=S.rexSizer,!M.hidden&&(L=M.padding,ko.call(this,S),F=t+L.left*this.scaleX,G=i+L.top*this.scaleY,X=n-(L.left+L.right)*this.scaleX,Q=x-(L.top+L.bottom)*this.scaleY,qe(S,X,Q),No.call(this,S,F,G,X,Q,S4,0,0))};const E4=Phaser.Utils.Objects.IsPlainObject;var P4=function(e,t,i){if(E4(e)){var n=e;e=n.sensor,i=n.target,t=n.draggable}else typeof t!="boolean"&&(i=t,t=void 0);var x=typeof e;if(x==="string"){var S=e;if(e=this.getElement(S),!e)return console.error(`Can get element '${S}'`),this}else(e===void 0||x!="object")&&(t=e,e=this);return t===void 0&&(t=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(M,L,F){var G=i===void 0?this.getTopmostSizer():i;G.x+=L-e.x,G.y+=F-e.y,G.emit("sizer.drag",M,L,F)},this).on("dragstart",function(M,L,F){var G=i===void 0?this.getTopmostSizer():i;G.emit("sizer.dragstart",M,L,F)},this).on("dragend",function(M,L,F,G){var X=i===void 0?this.getTopmostSizer():i;X.emit("sizer.dragend",M,L,F,G)},this).on("drop",function(M,L){var F=i===void 0?this.getTopmostSizer():i;F.emit("sizer.drop",M,L)}),e.input._rexUIDragSizer=!0),this},Gc={onClick(e,t,i,n){return e?(typeof e=="function"&&(n=i,i=t,t=e,e=this),e._click===void 0&&(e._click=new us(e,n)),e._click.on("click",t,i),this):this},offClick(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._click===void 0?this:(e._click.off("click",t,i),this)},enableClick(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(t),this)},disableClick(e){return e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(!1),this)}};const zo=Phaser.Utils.Objects.GetValue;class kc extends ye{constructor(t,i){super(t,i),this._enable=void 0;var n=zo(i,"inputConfig",void 0);n&&t.setInteractive(n),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(zo(t,"enable",!0)),this.setMode(zo(t,"mode",1)),this.setClickInterval(zo(t,"clickInterval",100)),this.setDragThreshold(zo(t,"threshold",void 0)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this),t.input.on("pointermove",this.onMove,this)}shutdown(t){if(!this.isShutdown){var i=this.parent.scene;i.input.off("pointerdown",this.onPress,this),i.input.off("pointerup",this.onRelease,this),i.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=M4[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}isPointerInside(t){var i=this.parent,n=i.input?Rf:cs;return n(i,t)}onPress(t){this.parent.willRender(t.camera)&&this.pointer===void 0&&(this.isPointerInside(t)||(this.pointer=t,this.mode===0&&(this.isPointerInside(t)||this.click(t.downTime,t))))}onRelease(t){this.parent.willRender(t.camera)&&this.pointer===t&&(this.mode===1&&(this.isPointerInside(t)||this.click(t.upTime,t)),this.pointer=void 0)}onMove(t,i,n,x){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&(t.getDistance()>=this.dragThreshold||this.isPointerInside(t))&&this.cancel()}click(t,i){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,i),this;this.pointer=void 0;var n=this.lastClickTime;return n!==void 0&&t-n<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,i),this)}cancel(){return this.pointer=void 0,this}}const M4={press:0,pointerdown:0,release:1,pointerup:1};var w4={onClickOutside(e,t,i,n){return e?(typeof e=="function"&&(n=i,i=t,t=e,e=this),e._clickOutside===void 0&&(e._clickOutside=new kc(e,n)),e._clickOutside.on("clickoutside",t,i),this):this},offClickOutside(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._clickOutside===void 0?this:(e._clickOutside.off("clickoutside",t,i),this)},enableClickOutside(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(t),this)},disableClickOutside(e){return e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(!1),this)}};class A4 extends zs{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,i){this.remainderTime-=i,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>i?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Nc=Phaser.Utils.Objects.GetValue;class La extends ye{constructor(t,i){super(t,i),this._enable=void 0,this.cooldown=new A4,this.parent.setInteractive(Nc(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(Nc(t,"enable",!0)),this.setCooldown(Nc(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,i,n){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,i){this.cooldown.update(t,i),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}var R4={isPointerInBounds(e){return e===void 0?e=this:typeof e=="string"&&(e=this.getElement(e)),e?cs(e):!1},onTouching(e,t,i,n){return e?(typeof e=="function"&&(n=i,i=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new La(e,n)),e._inTouching.on("intouch",t,i),this):this},offTouching(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("intouch",t,i),this)},onTouchingEnd(e,t,i,n){return e?(typeof e=="function"&&(n=i,i=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new La(e,n)),e._inTouching.on("touchend",t,i),this):this},offTouchingEnd(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("touchend",t,i),this)},enableTouching(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(t),this)},disableTouching(e){return e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(!1),this)}},L4={onOver(e,t,i){return e?(typeof e=="function"&&(i=t,t=e,e=this),e.setInteractive().on("pointerover",t,i),this):this},onOut(e,t,i){return e?(typeof e=="function"&&(i=t,t=e,e=this),e.setInteractive().on("pointerout",t,i),this):this}},Yx=function(e,t,i,n){if(e==="parent"){for(var x,S=0,M=t.length;S<M;S++)if(x=t[S],!!Mn(x,i,n))return x.pointToChild?x.pointToChild(i,n):Wx.call(x,i,n)}else for(var S=0,M=t.length;S<M;S++){var L=t[S];if(Mn(L,i,n))return L}return null},Ii=function(e,t,i,n,x,S,M,L){var F;if(S===void 0)F=x;else{var G=i[0];if(!G)return;var X=M.camera,Q=x+X.scrollX*(G.scrollFactorX-1),tt=S+X.scrollY*(G.scrollFactorY-1);F=Yx(n,i,Q,tt)}F&&e.emit(t,F,M,L)};const b4=Phaser.Utils.Objects.GetValue;var O4=function(e){var t=b4(e,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",F4,this))},F4=function(e,t,i,n){var x=this._childrenInteractive;Ii(x.eventEmitter,`${x.eventNamePrefix}down`,x.targetSizers,x.targetMode,e.worldX,e.worldY,e,n)};const D4=Phaser.Utils.Objects.GetValue;var B4=function(e){var t=D4(e,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",I4,this))},I4=function(e,t,i,n){var x=this._childrenInteractive;Ii(x.eventEmitter,`${x.eventNamePrefix}up`,x.targetSizers,x.targetMode,e.worldX,e.worldY,e,n)};const G4=Phaser.Utils.Objects.GetValue;var k4=function(e){var t=G4(e,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",Hx,this).on("pointerover",Hx,this).on("pointerout",N4,this))},Hx=function(e,t,i,n){var x=this._childrenInteractive,S=x.targetSizers[0];if(S){var M=e.camera,L=e.worldX+M.scrollX*(S.scrollFactorX-1),F=e.worldY+M.scrollY*(S.scrollFactorY-1),G=Yx(x.targetMode,x.targetSizers,L,F),X=x.lastOverChild;G&&X&&G===X||(x.lastOverChild=G,Ii(x.eventEmitter,`${x.eventNamePrefix}out`,x.targetSizers,x.targetMode,X,void 0,e,n),Ii(x.eventEmitter,`${x.eventNamePrefix}over`,x.targetSizers,x.targetMode,G,void 0,e,n))}},N4=function(e,t){var i=this._childrenInteractive,n=i.lastOverChild;i.lastOverChild=null,Ii(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,i.targetMode,n,void 0,e,t)};const z4=Phaser.Utils.Objects.GetValue;var U4=function(e){var t=z4(e,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var i=this._childrenInteractive;this._click=new us(this,t),this._click.on("click",function(n,x,S,M){Ii(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,i.targetMode,S.worldX,S.worldY,S,M)},this)}};const zc=Phaser.Utils.Objects.GetValue;class Il extends Kh{constructor(t,i){var n=da(t);n===t&&(t=void 0),super(n,i),this.gameObject=t,t&&t.setInteractive(zc(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(zc(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(zc(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Uc,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,i){if(this.enable&&this.pointer===void 0){var n=this.bounds?this.bounds.contains(t.x,t.y):!0;n&&this.pointer!==t&&(this.pointer=t,this.pointerCamera=t.camera,this.lastPointer=t,this.movedState=!1,this.tracerState=$x,this.gameObject===void 0&&(this.isTouchingAnyObject=i.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;i&&this.pointer===t&&(this.pointer=void 0,this.pointerCamera=void 0,this.movedState=!1,this.tracerState=Uc,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,n=this.pointer===t;!n&&i||(n&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===$x&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Uc,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,i){}postUpdate(t,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=V4,this}isPointerInGameObject(t,i,n){var x=this.lastPointer;return x?cs(t,x,i,n):!1}}const Uc=0,$x=1,V4="IDLE",wn=Phaser.Utils.Objects.GetValue,X4=Phaser.Math.Distance.Between;class Gl extends Il{constructor(t,i){super(t,i);var n=this,x={states:{IDLE:{enter:function(){n.stop(),n.tapsCount=0,n.x=0,n.y=0,n.worldX=0,n.worldY=0,n.lastPointer=void 0},exit:function(){var S=n.lastPointer;n.x=S.x,n.y=S.y,n.worldX=S.worldX,n.worldY=S.worldY}},BEGIN:{enter:function(){n.start(),n.tapsCount=0,n.emit("tappingstart",n,n.gameObject,n.lastPointer)}},RECOGNIZED:{enter:function(){n.start(),n.emit("tap",n,n.gameObject,n.lastPointer),n.emit(`${n.tapsCount}tap`,n,n.gameObject,n.lastPointer)}}},init:function(){this.state=An},eventEmitter:!1};this.setRecongizedStateObject(new zs(x))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(wn(t,"time",250)),this.setTapInterval(wn(t,"tapInterval",200)),this.setDragThreshold(wn(t,"threshold",9)),this.setTapOffset(wn(t,"tapOffset",10));var i=wn(t,"taps",void 0);return i!==void 0?this.setTaps(i):(this.setMaxTaps(wn(t,"maxTaps",void 0)),this.setMinTaps(wn(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case An:this.state=ba;break;case ba:var t=this.lastPointer,i=X4(t.upX,t.upY,t.x,t.y);i>this.tapOffset&&(this.state=Oa,this.state=ba);break;case Oa:this.state=ba;break}}onDragEnd(){this.state===ba&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Oa))}onDrag(){this.state!==An&&this.pointer.getDistance()>this.dragThreshold&&(this.state=An)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===ba){var n=this.lastPointer;if(n.isDown){var x=t-n.downTime;x>this.holdTime&&(this.state=An)}else{var S=t-n.upTime;S>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Oa:this.state=An)}}}postUpdate(t,i){!this.isRunning||!this.enable||this.state===Oa&&(this.state=An)}get isTapping(){return this.state===Oa}get isTapped(){return this.isTapping}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,i){return i===void 0&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}}const An="IDLE",ba="BEGIN",Oa="RECOGNIZED",Kx=Phaser.Utils.Objects.GetValue;class kl extends Il{constructor(t,i){super(t,i);var n=this,x={states:{IDLE:{enter:function(){n.x=0,n.y=0,n.worldX=0,n.worldY=0,n.lastPointer=void 0},exit:function(){var S=n.lastPointer;n.x=S.x,n.y=S.y,n.worldX=S.worldX,n.worldY=S.worldY}},BEGIN:{enter:function(){n.start()},exit:function(){n.stop()}},RECOGNIZED:{enter:function(){n.emit("pressstart",n,n.gameObject,n.lastPointer)},exit:function(){n.emit("pressend",n,n.gameObject,n.lastPointer)}}},init:function(){this.state=Nl},eventEmitter:!1};this.setRecongizedStateObject(new zs(x))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Kx(t,"threshold",9)),this.setHoldTime(Kx(t,"time",251)),this}onDragStart(){this.state=Zx,this.holdTime===0&&(this.state=Vc)}onDragEnd(){this.state=Nl}onDrag(){this.state!==Nl&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Nl)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===Zx){var n=t-this.pointer.downTime;n>=this.holdTime&&(this.state=Vc)}}get isPressing(){return this.state===Vc}get isPressed(){return this.isPressing}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Nl="IDLE",Zx="BEGIN",Vc="RECOGNIZED",W4=Phaser.Utils.Objects.GetValue;class Jx extends Il{constructor(t,i){super(t,i);var n=this,x={states:{IDLE:{},BEGIN:{enter:function(){var S=n.pointer;n.startX=S.x,n.startY=S.y,n.startWorldX=S.worldX,n.startWorldY=S.worldY}},RECOGNIZED:{enter:function(){n.emit("panstart",n,n.gameObject,n.lastPointer)},exit:function(){var S=n.lastPointer;n.endX=S.x,n.endY=S.y;var M=Bl(S,n.pointerCamera,!0);n.endWorldX=M.x,n.endWorldY=M.y,n.emit("panend",n,n.gameObject,n.lastPointer)}}},init:function(){this.state=Qx},eventEmitter:!1};this.setRecongizedStateObject(new zs(x))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(W4(t,"threshold",10)),this}onDragStart(){this.state=jx,this.dragThreshold===0&&(this.state=zl)}onDragEnd(){this.state=Qx}onDrag(){switch(this.state){case jx:if(this.pointer.getDistance()>=this.dragThreshold){this.state=zl,this.dx=0,this.dy=0,this.dWorldX=0,this.dWorldY=0;var x=this.pointer;this.x=x.x,this.y=x.y,this.worldX=x.worldX,this.worldY=x.worldY}break;case zl:var t=this.pointerCamera,i=this.pointer.position,n=this.pointer.prevPosition;this.dx=i.x-n.x,this.dy=i.y-n.y,this.dWorldX=this.dx/t.zoom,this.dWorldY=this.dy/t.zoom;var x=this.pointer;this.x=x.x,this.y=x.y;var S=Bl(x,t,!0);this.worldX=S.x,this.worldY=S.y,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanning(){return this.state===zl}get isPanned(){return this.isPanning}setDragThreshold(t){return this.dragThreshold=t,this}}const Qx="IDLE",jx="BEGIN",zl="RECOGNIZED",Y4=Phaser.Math.Distance.Between,H4=Phaser.Math.Angle.Between;var $4={getDt:function(){var e=If(this.scene);return e},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Y4(t.x,t.y,e.x,e.y),n=i/(this.getDt()*.001);return n},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(e.x-t.x),n=i/(this.getDt()*.001);return n},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(e.y-t.y),n=i/(this.getDt()*.001);return n},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=H4(t.x,t.y,e.x,e.y);return i}},K4={"up&down":0,"left&right":1,"4dir":2,"8dir":3},Z4=function(e,t,i){switch(i===void 0?i={}:i===!0&&(i=J4),i.left=!1,i.right=!1,i.up=!1,i.down=!1,e=(e+360)%360,t){case 0:e<180?i.down=!0:i.up=!0;break;case 1:e>90&&e<=270?i.left=!0:i.right=!0;break;case 2:e>45&&e<=135?i.down=!0:e>135&&e<=225?i.left=!0:e>225&&e<=315?i.up=!0:i.right=!0;break;case 3:e>22.5&&e<=67.5?(i.down=!0,i.right=!0):e>67.5&&e<=112.5?i.down=!0:e>112.5&&e<=157.5?(i.down=!0,i.left=!0):e>157.5&&e<=202.5?i.left=!0:e>202.5&&e<=247.5?(i.left=!0,i.up=!0):e>247.5&&e<=292.5?i.up=!0:(e>292.5&&e<=337.5&&(i.up=!0),i.right=!0);break}return i},J4={};const Xc=Phaser.Utils.Objects.GetValue,Q4=Phaser.Math.RadToDeg;class Uo extends Il{constructor(t,i){super(t,i);var n=this,x={states:{IDLE:{enter:function(){n.x=0,n.y=0,n.worldX=0,n.worldY=0},exit:function(){var S=n.lastPointer;n.x=S.x,n.y=S.y,n.worldX=S.worldX,n.worldY=S.worldY}},BEGIN:{enter:function(){n.validDrag=!1}},RECOGNIZED:{enter:function(){n.start(),n.updateDirectionStates(),n.emit("swipe",n,n.gameObject,n.lastPointer)},exit:function(){n.stop(),n.clearDirectionStates()}}},init:function(){this.state=Wc},eventEmitter:!1};this.setRecongizedStateObject(new zs(x)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Xc(t,"threshold",10)),this.setVelocityThreshold(Xc(t,"velocityThreshold",1e3)),this.setDirectionMode(Xc(t,"dir","8dir")),this}onDragStart(){this.state=qx}onDragEnd(){this.state=Wc}onDrag(){this.state===qx&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Yc))}postUpdate(t,i){!this.isRunning||!this.enable||this.state===Yc&&(this.state=Wc)}get isSwiping(){return this.state===Yc}get isSwiped(){return this.isSwiping}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=K4[t]),this.dirMode=t,this}updateDirectionStates(){var t=Q4(this.getVelocityAngle());return Z4(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Uo.prototype,$4);const Wc="IDLE",qx="BEGIN",Yc="RECOGNIZED",Ul=Phaser.Utils.Objects.GetValue,j4=Phaser.Utils.Array.SpliceOne,q4=Phaser.Math.Distance.Between,_4=Phaser.Math.Angle.Between;class Hc{constructor(t,i){var n=da(t);n===t&&(t=void 0);var x=n.input.manager.pointersTotal-1;x<2&&n.input.addPointer(2-x),this.scene=n,this.gameObject=t,t&&t.setInteractive(Ul(i,"inputConfig",void 0)),this.setEventEmitter(Ul(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(Ul(t,"enable",!0)),this.bounds=Ul(t,"bounds",void 0),this.tracerState=Vl,this.pointers.length=0,ve(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,ve(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(i){var n=this.pointers.indexOf(t);if(n===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.pointerCamera=t.camera,this.tracerState){case Vl:this.tracerState=Xo,this.onDrag1Start();break;case Xo:this.tracerState=vs,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(i){var n=this.pointers.indexOf(t);if(n!==-1)switch(delete this.movedState[t.id],j4(this.pointers,n),this.tracerState){case Xo:this.tracerState=Vl,this.onDrag1End();break;case vs:this.tracerState=Xo,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,n=this.pointers.indexOf(t)!==-1;if(!(!n&&i)){if(n&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Xo:this.onDrag1();break;case vs:this.onDrag2();break}}}}dragCancel(){return this.tracerState===vs&&this.onDrag2End(),this.pointers.length=0,ve(this.movedState),this.tracerState=Vl,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==vs)return 0;var t=this.pointers[0],i=this.pointers[1];return q4(t.x,t.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==vs)return 0;var t=this.pointers[0],i=this.pointers[1];return _4(t.x,t.y,i.x,i.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,n=t.prevPosition;Vo.x=i.x-n.x,Vo.y=i.y-n.y}else Vo.x=0,Vo.y=0;return Vo}get centerX(){if(this.tracerState!==vs)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}get centerY(){if(this.tracerState!==vs)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}get prevCenterX(){if(this.tracerState!==vs)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}get prevCenterY(){if(this.tracerState!==vs)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=t5,this}isPointer0InGameObject(t,i,n){var x=this.pointers[0];return x?cs(t,x,i,n):!1}isPointer1InGameObject(t,i,n){var x=this.pointers[1];return x?cs(t,x,i,n):!1}}Object.assign(Hc.prototype,io);var Vo={};const Vl=0,Xo=1,vs=2,t5="IDLE",e5=Phaser.Utils.Objects.GetValue;class _x extends Hc{constructor(t,i){super(t,i);var n=this,x={states:{IDLE:{enter:function(){n.prevDistance=void 0,n.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){n.emit("pinchstart",n)},exit:function(){n.emit("pinchend",n)}}},init:function(){this.state=ty},eventEmitter:!1};this.setRecongizedStateObject(new zs(x))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(e5(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=ey,this.dragThreshold===0&&(this.state=Xl)}onDrag2End(){this.state=ty}onDrag2(){switch(this.state){case ey:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Xl}break;case Xl:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinching(){return this.state===Xl}get isPinched(){return this.isPinching}setDragThreshold(t){return this.dragThreshold=t,this}}const ty="IDLE",ey="BEGIN",Xl="RECOGNIZED",i5=Phaser.Math.RotateAround;var iy=function(e,t,i,n){return i5(e,t,i,n),e.rotation+=n,e},s5=function(e,t,i,n){return n===void 0?n={}:n===!0&&(n=r5),i.getWorldPoint(e,t,n),n},r5={},n5=function(e,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var i=this.movementCenterX,n=this.movementCenterY,x=s5(this.centerX,this.centerY,t,!0),S=x.x,M=x.y,L=this.rotation;if(Array.isArray(e))for(var F=e,G=0,X=F.length;G<X;G++)e=F[G],e.x+=i,e.y+=n,iy(e,S,M,L);else e.x+=i,e.y+=n,iy(e,S,M,L);return this};const a5=Phaser.Utils.Objects.GetValue,$c=Phaser.Math.Angle.WrapDegrees,sy=Phaser.Math.Angle.ShortestBetween,Kc=Phaser.Math.RadToDeg,o5=Phaser.Math.DegToRad;class Zc extends Hc{constructor(t,i){super(t,i);var n=this,x={states:{IDLE:{enter:function(){n.prevAngle=void 0,n.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){n.emit("rotatestart",n)},exit:function(){n.emit("rotateend",n)}}},init:function(){this.state=ry},eventEmitter:!1};this.setRecongizedStateObject(new zs(x))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(a5(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=$c(Kc(this.angleBetween)),this.state=ny,this.dragThreshold===0&&(this.state=Wl)}onDrag2End(){this.state=ry}onDrag2(){switch(this.state){case ny:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=$c(Kc(this.angleBetween));this.angle=sy(this.prevAngle,t),this.prevAngle=t,this.state=Wl}break;case Wl:var t=$c(Kc(this.angleBetween));this.angle=sy(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotating(){return this.state===Wl}get isRotated(){return this.isRotating}get rotation(){return o5(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var h5={spinObject:n5};Object.assign(Zc.prototype,h5);const ry="IDLE",ny="BEGIN",Wl="RECOGNIZED",l5=Phaser.Utils.Objects.GetValue;var u5=function(e){var t=l5(e,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var i=this._childrenInteractive;this._tap=new Gl(this,t),this._tap.on("tap",function(n,x,S){Ii(i.eventEmitter,`${i.eventNamePrefix}${n.tapsCount}tap`,i.targetSizers,i.targetMode,n.worldX,n.worldY,S,n),Ii(i.eventEmitter,`${i.eventNamePrefix}tap`,i.targetSizers,i.targetMode,n.worldX,n.worldY,S,n)},this)}};const d5=Phaser.Utils.Objects.GetValue;var f5=function(e){var t=d5(e,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var i=this._childrenInteractive;this._press=new kl(this,t),this._press.on("pressstart",function(n,x,S){Ii(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,i.targetMode,n.worldX,n.worldY,S,n)},this).on("pressend",function(n,x,S){Ii(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,i.targetMode,n.worldX,n.worldY,S,n)},this)}};const c5=Phaser.Utils.Objects.GetValue;var v5=function(e){var t=c5(e,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var i=this._childrenInteractive;this._swipe=new Uo(this,t),this._swipe.on("swipe",function(n,x,S){var M=n.left?"left":n.right?"right":n.up?"up":"down";Ii(i.eventEmitter,`${i.eventNamePrefix}swipe${M}`,i.targetSizers,i.targetMode,n.worldX,n.worldY,S,n),Ii(i.eventEmitter,`${i.eventNamePrefix}swipe`,i.targetSizers,i.targetMode,n.worldX,n.worldY,S,n)},this)}};const Wo=Phaser.Utils.Objects.GetValue;var Yl=function(e,t){return e.setInteractive(),Wo(t,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:Wo(t,"targets",[e]),targetMode:Wo(t,"targetMode","parent"),eventEmitter:Wo(t,"eventEmitter",e),eventNamePrefix:Wo(t,"inputEventPrefix","child.")},O4.call(e,t),B4.call(e,t),k4.call(e,t),U4.call(e,t),u5.call(e,t),f5.call(e,t),v5.call(e,t),e},p5=function(e){return Yl(this,e),this},g5=function(){for(var e=this.getAllChildren([this]),t=0,i=e.length;t<i;t++){var n=e[t];n.emit.apply(n,arguments)}return this},ay={getSizerConfig:B3,getChildPrevState:I3,pushIntoBounds:G3,drawBounds:J3,resolveWidth:yc,hasWidthWrap:Cc,resolveChildrenWidth:uD,runWidthWrap:Sc,resolveHeight:Tc,hasHeightWrap:Ec,resolveChildrenHeight:dD,runHeightWrap:Pc,getChildWidth:fD,getChildHeight:cD,getExpandedChildWidth:vD,getExpandedChildHeight:pD,getChildrenWidth:gD,getChildrenHeight:mD,addChildrenMap:yx,addElement:yx,removeChildrenMap:nD,getElement:aD,getChildIndex:hD,getAllChildrenSizers:xD,getChildrenSizers:yD,preLayout:Bo,layout:SD,runLayout:PD,layoutChildren:AD,layoutBackgrounds:T4,postLayout:RD,setAnchor:bD,isInTouching:m4,pointToChild:Wx,setDraggable:P4,setChildrenInteractive:p5,broadcastEvent:g5};Object.assign(ay,lD,q3,rD,Ma,Ns,Go,Rl,HD,ZD,Gx,Gc,w4,R4,L4,jD,Dl,CD,v4);const Vs=Phaser.Utils.Objects.GetValue;let Rn=class extends Ci{constructor(t,i,n,x,S,M){super(t,i,n,1,1),this.isRexSizer=!0;var L=Vs(M,"origin",.5),F=Vs(M,"originX",L),G=Vs(M,"originY",L);this.setOrigin(F,G),this.setMinSize(x,S),this.setName(Vs(M,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.runChildrenWrapFlag=!1,this.enableLayoutWarn(!1);var X=Vs(M,"anchor",void 0);X&&this.setAnchor(X),this.setInnerPadding(Vs(M,"space",0));var Q=Vs(M,"draggable",!1);Q&&this.setDraggable(Q),this.setSizerEventsEnable(Vs(M,"sizerEvents",!1)),this.setDirty(!0),Vs(M,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var i=this.getAllChildrenSizers([this]),n=0,x=i.length;n<x;n++)i[n].sizerEventsEnable=!1;super.destroy(t),ve(this.backgroundChildren),ve(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,i){return this.setMinWidth(t).setMinHeight(i),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}enableLayoutWarn(t){return t===void 0&&(t=!0),this.layoutWarnEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-_t(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+_t(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+_t(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-te(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+te(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+te(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var t=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(t,0)}get minInnerHeight(){var t=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(t,0)}};Object.assign(Rn.prototype,ay);var m5=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,i,n,x,S=!1;for(var M in t)i=t[M],x=this.getChildWidth(i),x===void 0&&(S=!0),!S&&(n=i.rexSizer.padding,x+=(n.left+n.right)*this.scaleX,e=Math.max(x,e));if(!S)return e+(this.space.left+this.space.right)*this.scaleX},x5=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,i,n,x,S=!1;for(var M in t)i=t[M],x=this.getChildHeight(i),x===void 0&&(S=!0),!S&&(n=i.rexSizer.padding,x+=(n.top+n.bottom)*this.scaleY,e=Math.max(x,e));if(!S)return e+(this.space.top+this.space.bottom)*this.scaleY},y5=function(e,t){t===void 0&&(t=this.width*this.scaleX);var i,n=e.rexSizer;if(n.expandWidth){var x=t-(this.space.left+this.space.right)*this.scaleX,S=n.padding;i=x-(S.left+S.right)*this.scaleX}return i},C5=function(e,t){t===void 0&&(t=this.height);var i,n=e.rexSizer;if(n.expandHeight){var x=t-(this.space.top+this.space.bottom)*this.scaleY,S=n.padding;i=x-(S.top+S.bottom)*this.scaleY}return i},S5=function(e){e===void 0&&(e=[]);var t=this.sizerChildren,i;for(var n in t)i=t[n],i.isRexSizer&&e.push(i);return e},Jc=function(e,t,i,n){if(i===void 0)i=0;else{var x=typeof i;x==="boolean"?(n=i,i=0):x==="string"&&(i=T5[i])}n===void 0?n={}:n===!0&&(n=E5);var S=t.width/e.width,M=t.height/e.height,L=i?Math.max(S,M):Math.min(S,M);return n.width=e.width*L,n.height=e.height*L,n};const T5={fit:0,FIT:0,envelop:1,ENVELOP:1};var E5={},Qc=function(e,t){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`))},P5=function(){var e,t,i,n=this.innerLeft,x=this.innerTop,S=this.innerWidth,M=this.innerHeight,L,F,G,X,Q,tt,_,nt,lt,ot=this.sizerChildren;for(var dt in ot)e=ot[dt],!e.rexSizer.hidden&&(t=e.rexSizer,i=t.padding,ko.call(this,e),_=this.getExpandedChildWidth(e),nt=this.getExpandedChildHeight(e),t.aspectRatio>0&&(jc.width=t.aspectRatio,jc.height=1,qc.width=_,qc.height=nt,lt=Jc(jc,qc,"FIT",!0),_=lt.width,nt=lt.height),e.isRexSizer?(e.runLayout(this,_,nt),Qc(e,this)):qe(e,_,nt),L=n+i.left*this.scaleX,G=S-(i.left+i.right)*this.scaleX,F=x+i.top*this.scaleY,X=M-(i.top+i.bottom)*this.scaleY,_===void 0&&(_=_t(e)),nt===void 0&&(nt=te(e)),Q=(t.alignOffsetX+t.alignOffsetOriginX*_)*this.scaleX,tt=(t.alignOffsetY+t.alignOffsetOriginY*nt)*this.scaleY,No.call(this,e,L,F,G,X,t.align,Q,tt))},jc={},qc={};const oy=Phaser.Utils.Objects.IsPlainObject,Si=Phaser.Utils.Objects.GetValue,hy=Phaser.Display.Align.CENTER,M5=Phaser.Utils.String.UUID;var w5=function(e,t,i,n,x,S,M,L,F,G){var X,Q;if(Fo.call(this,e),oy(t)){var _=t;t=Si(_,"key",void 0),i=Si(_,"align",hy),n=Si(_,"padding",0),x=Si(_,"expand",!0),e.isRexSizer||(S=Si(_,"minWidth",e._minWidth),M=Si(_,"minHeight",e._minHeighted)),L=Si(_,"offsetX",0),F=Si(_,"offsetY",0),X=Si(_,"offsetOriginX",0),Q=Si(_,"offsetOriginY",0),G=Si(_,"aspectRatio",0)}var tt=t!==void 0;tt||(t=M5()),typeof i=="string"&&(i=Ea[i]),i===void 0&&(i=hy),n===void 0&&(n=0),x===void 0&&(x=!0),e.isRexSizer||(S===void 0&&(S=e._minWidth),M===void 0&&(M=e._minHeight)),L===void 0&&(L=0),F===void 0&&(F=0),X===void 0&&(X=0),Q===void 0&&(Q=0),G===void 0?G=0:G===!0&&(G=_t(e)/te(e)),G>0&&(x=!0,S===void 0&&(S=0),M===void 0&&(M=0));var _=this.getSizerConfig(e);return _.align=i,_.padding=Pn(n),oy(x)?(_.expandWidth=Si(x,"width",!1),_.expandHeight=Si(x,"height",!1)):(_.expandWidth=x,_.expandHeight=x),e.isRexSizer||(_.expandWidth&&(e.minWidth=S===void 0?_t(e):S),_.expandHeight&&(e.minHeight=M===void 0?te(e):M)),_.alignOffsetX=L,_.alignOffsetY=F,_.alignOffsetOriginX=X,_.alignOffsetOriginY=Q,_.aspectRatio=G,this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,tt&&this.addChildrenMap(t,e),this},A5={add:w5};const R5=Ci.prototype.clear;var Hl=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!e&&this.sizerEventsEnable,i;if(t&&(i=this.getChildren([])),R5.call(this,e),t)for(var n,x=0,S=i.length;x<S;x++)n=i[x],n.emit("sizer.remove",n,this),this.emit("remove",n,this);return this},L5={remove(e,t){var i;if(typeof e=="string"){if(i=e,e=this.sizerChildren[i],!e)return this}else{if(this.getParentSizer(e)!==this)return this;i=this.childToKey(e)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),Do.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Hl.call(this,e),this}},ly={getChildrenWidth:m5,getChildrenHeight:x5,getExpandedChildWidth:y5,getExpandedChildHeight:C5,getChildrenSizers:S5,layoutChildren:P5};Object.assign(ly,A5,L5);var $l=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var i in e)if(e[i]===t)return i;return null};const uy=Phaser.Utils.Objects.IsPlainObject,Fa=Phaser.Utils.Objects.GetValue;class Gi extends Rn{constructor(t,i,n,x,S,M){uy(i)?(M=i,i=Fa(M,"x",0),n=Fa(M,"y",0),x=Fa(M,"width",void 0),S=Fa(M,"height",void 0)):uy(x)&&(M=x,x=Fa(M,"width",void 0),S=Fa(M,"height",void 0)),super(t,i,n,x,S,M),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var i=t;if(this.sizerChildren.hasOwnPropery(i))return i}else return $l(this.sizerChildren,t);return null}}Object.assign(Gi.prototype,ly);var b5=Phaser.Math.Distance.Between,Kl=function(e,t,i){var n=e.width/2;return b5(n,n,t,i)<=n};const O5=Phaser.Math.Angle.Between,F5=Phaser.Math.Angle.Normalize;var dy=function(e,t,i){if(this.enable&&e.isDown){var n=this.sizerChildren.knob;if(Kl(n,t,i)){var x=n.width/2,S=n.startAngle,M=O5(x,x,t,i),L=n.anticlockwise?S-M:M-S,F=F5(L)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-F)<.1?this.value=F:this.easeValueTo(F)}}},D5=function(){var e=this.sizerChildren.knob;e.on("pointerdown",dy,this).on("pointermove",dy,this).setInteractive()};const fy=Phaser.Math.Angle.Between,B5=Phaser.Math.Angle.Wrap;var I5=function(e,t,i){if(!(!this.enable||this.panPointer)){var n=this.sizerChildren.knob;Kl(n,t,i)&&cy.call(this,e)}},G5=function(e,t,i){if(this.enable&&e.isDown){var n=this.sizerChildren.knob;switch(this.panState){case _c:Kl(n,t,i)&&cy.call(this,e);break;case py:Kl(n,t,i)?N5.call(this):vy.call(this);break}}},k5=function(e,t,i){!this.enable||this.panPointer!==e||vy.call(this)},cy=function(e){this.panPointer=e,this.panState=py},vy=function(){this.panPointer=void 0,this.panState=_c},N5=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,i=this.sizerChildren.knob,n=fy(i.x,i.y,e.x,e.y),x=fy(i.x,i.y,t.x,t.y),S=i.anticlockwise?n-x:x-n,M=B5(S)/(Math.PI*2);this.stopEaseValue(),this.value+=M};const _c=0,py=1;var z5=function(){var e=this.sizerChildren.knob;e.on("pointerdown",I5,this).on("pointermove",G5,this).on("pointerup",k5,this).setInteractive(),this.panPointer=void 0,this.panState=_c},U5=function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},gy=function(e){e===void 0&&(e=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(e):t=this.textFormatCallback.call(this.textFormatCallbackScope,e),t},V5=function(e){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(gy.call(this,e)),t.layout&&t.layout()),this},X5={setTextFormatCallback:U5,getFormatText:gy,updateText:V5};const Ji=Phaser.Utils.Objects.GetValue,W5=Phaser.Math.Snap.To;class tv extends Pr(Gi){constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexKnob",this.bootProgressBase(i);var n=Ji(i,"background",void 0),x=Ji(i,"text",void 0);n&&this.addBackground(n),x&&(i.textColor=void 0,i.textStrokeColor=void 0,this.setTextFormatCallback(Ji(i,"textFormatCallback",void 0),Ji(i,"textFormatCallbackScope",void 0)),i.textFormatCallback=void 0,i.textFormatCallbackScope=void 0);var S=new cl(t,i);S.setDepth(Ji(i,"knobDepth",0)),S._value=-1,t.add.existing(S),this.add(S,"knob"),x&&(this.add(x,"text","center",0,!1),t.children.moveBelow(S,x)),this.addChildrenMap("background",n),this.addChildrenMap("knob",S),this.addChildrenMap("text",x),this.setEnable(Ji(i,"enable",void 0)),this.setGap(Ji(i,"gap",void 0)),this.setValue(Ji(i,"value",0),Ji(i,"min",void 0),Ji(i,"max",void 0));var M=Ji(i,"input",0);switch(typeof M=="string"&&(M=Y5[M]),M){case 0:z5.call(this);break;case 1:D5.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=W5(t,this.gap));var i=this.value;this.sizerChildren.knob.value=t;var n=this.value;i!==n&&(this.updateText(),this.eventEmitter.emit("valuechange",n,i,this.eventEmitter))}}const Y5={pan:0,drag:0,click:1,none:-1};Object.assign(tv.prototype,X5),W.register("knob",function(e){var t=new tv(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Knob",tv);const H5={arc:xa,circle:Di,curve:PO,ellipse:MO,line:Sr,lines:Ze,rectangle:$O,roundRectangle:ul,triangle:ZO},my=Phaser.Utils.Objects.GetValue,$5=Phaser.Utils.Objects.IsPlainObject,K5=function(){for(var e=this.getShapes(),t=0,i=e.length;t<i;t++)e[t].lineStyle().fillStyle()};var Z5={createShape(e,t){var i=H5[e],n=new i;return t&&n.setName(t),n},buildShapes(e){var t=my(e,"create",void 0);if($5(t)){var i=t;for(var n in i){var x=i[n];switch(typeof x){case"number":for(var S=0;S<x;S++)this.addShape(this.createShape(n));break;case"string":this.addShape(this.createShape(n,x));break;default:for(var M=x,S=0,L=M.length;S<L;S++)this.addShape(this.createShape(n,M[S]));break}}}else if(Array.isArray(t))for(var i=t,S=0,L=i.length;S<L;S++){var F=i[S];this.addShape(this.createShape(F.type,F.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(my(e,"update"))},setUpdateShapesCallback(e){return e===void 0&&(e=K5),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}};const Yo=Phaser.Utils.Objects.GetValue,J5=Phaser.Utils.Objects.IsPlainObject;class Zl extends Gs{constructor(t,i,n,x,S,M){J5(i)&&(M=i,i=Yo(M,"x",0),n=Yo(M,"y",0),x=Yo(M,"width",2),S=Yo(M,"height",2)),super(t,i,n,x,S),this.type=Yo(M,"type","rexCustomShapes"),this.buildShapes(M)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,i,n,x){return typeof n=="boolean"&&(x=n,n=void 0),xg(this,t,i,n,x)}}Object.assign(Zl.prototype,Z5),W.register("customShapes",function(e,t,i,n,x){var S=new Zl(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.CustomShapes",Zl);const Ho=Phaser.Utils.Objects.GetValue,Q5=Phaser.Utils.Objects.IsPlainObject;class ps extends Pr(Zl){constructor(t,i,n,x,S,M){Q5(i)&&(M=i,i=Ho(M,"x",0),n=Ho(M,"y",0),x=Ho(M,"width",2),S=Ho(M,"height",2)),M===void 0&&(M={}),M.type||(M.type="rexCustomProgress"),super(t,i,n,x,S,M),this.bootProgressBase(M),this.setValue(Ho(M,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}W.register("customProgress",function(e,t,i,n,x){var S=new ps(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.CustomProgress",ps);var j5=function(e){return this.easeValueTask||(this.easeValueTask=new $i(this,{eventEmitter:null})),e!==void 0&&(this.duration=e,this.easeValueTask.stop()),this.easeValueTask.isRunning?this:(this.easeValueTask.restart({key:"value",from:0,to:1,duration:this.duration,ease:this.ease,repeat:-1,delay:this.delay,repeatDelay:this.repeatDelay}),this.setDirty(),this)},q5=function(){return this.easeValueTask?(this.easeValueTask.stop(),this.setDirty(),this):this},_5=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},tB=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},eB={start:j5,stop:q5,pause:_5,resume:tB};const Qi=Phaser.Utils.Objects.GetValue;class xy extends Gs{constructor(t,i){var n=Qi(i,"x",0),x=Qi(i,"y",0),S=Qi(i,"width",64),M=Qi(i,"height",64);super(t,n,x,S,M),this.resetFromConfig(i,!0),this.buildShapes(i),Qi(i,"start",!0)&&this.start()}resetFromConfig(t,i){i===void 0&&(i=!1);var n;return n=i?1e3:this.duration,this.setDuration(Qi(t,"duration",n)),n=i?"Linear":this.ease,this.setEase(Qi(t,"ease",n)),n=i?0:this.delay,this.setDelay(Qi(t,"delay",n)),n=i?0:this.repeatDelay,this.setRepeatDelay(Qi(t,"repeatDelay",n)),n=i?16777215:this.color,this.setColor(Qi(t,"color",n)),n=i?0:this.value,this.setValue(Qi(t,"value",n)),this}buildShapes(){}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get color(){return this._color}set color(t){this.isColorChanged=this.isColorChanged||this._color!==t,this.dirty=this.dirty||this.isColorChanged,this._color=t,this.setShapesColor(t)}setColor(t){return this.color=t,this}setShapesColor(t){}get value(){return this._value}set value(t){t=Phaser.Math.Clamp(t,0,1),this.dirty=this.dirty||this._value!=t,this._value=t}setValue(t){return this.value=t,this}setDuration(t){return this.duration=t,this}setDelay(t){return this.delay=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return this.ease=t,this}get isRunning(){return this.tweenTask?this.tweenTask.isRunning:!1}}Object.assign(xy.prototype,eB);const Lr=Phaser.Math.DegToRad,iB=Phaser.Math.Linear,sB=Phaser.Math.Easing.Expo.In,rB={right:0,down:1,left:2,up:3};var nB=function(e,t,i,n,x,S,M,L,F,G,X){var Q=Da(t,0,n,x,S,M,L,F,G,X);e.startAt(Q.x,Q.y);var tt=Da(i,0,n,x,S,M,L,F,G,X);e.lineTo(tt.x,tt.y);var _=Da(i,i,n,x,S,M,L,F,G,X);e.lineTo(_.x,_.y);var nt=Da(0,i,n,x,S,M,L,F,G,X);e.lineTo(nt.x,nt.y);var lt=Da(0,t,n,x,S,M,L,F,G,X);e.lineTo(lt.x,lt.y);var ot=Da(t,t,n,x,S,M,L,F,G,X);e.lineTo(ot.x,ot.y),e.close()},ev={},Da=function(e,t,i,n,x,S,M,L,F,G){var X=e*i,Q=t*n;return ev.x=M*X+L*Q+x,ev.y=F*X+G*Q+S,ev},Jl={setDirection(e){return typeof e=="string"&&(e=rB[e]),this.direction=e,this},buildShapes(){for(var e=0;e<3;e++)this.addShape(new Ze)},updateShapes(){var e,t,i,n,x,S;switch(this.direction){case 1:e=this.centerX,t=this.centerY-this.radius;var M=Lr(315);i=Math.cos(M),n=Math.sin(M);var L=Lr(45);x=Math.cos(L),S=Math.sin(L);break;case 3:e=this.centerX,t=this.centerY+this.radius;var M=Lr(135);i=Math.cos(M),n=Math.sin(M);var L=Lr(225);x=Math.cos(L),S=Math.sin(L);break;case 2:e=this.centerX+this.radius,t=this.centerY;var M=Lr(225);i=Math.cos(M),n=Math.sin(M);var L=Lr(315);x=Math.cos(L),S=Math.sin(L);break;default:e=this.centerX-this.radius,t=this.centerY;var M=Lr(45);i=Math.cos(M),n=Math.sin(M);var L=Lr(135);x=Math.cos(L),S=Math.sin(L);break}for(var F=this.radius/7,G=this.getShapes(),X=0,Q=G.length;X<Q;X++){var tt=G[X],_=(this.value+(Q-X)*.1)%1;_=sB(le(_));var nt=iB(.25,1,_);tt.fillStyle(this.color,nt);var lt=X*3+1,ot=lt+2;nB(tt,lt,ot,F,F,e,t,i,n,x,S)}}};const aB=Phaser.Math.Linear;var oB={buildShapes(){for(var e=0;e<4;e++)this.addShape(new Sr);this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,n=e-i,x=t+i,S=i*2,M=this.getShapes(),L=M.length,F=i*2/L,G=F*.7;if(this.prevValue===void 0||this.prevValue>this.value)for(var X=0;X<L;X++){var Q=M[X],tt=this.prevValue===void 0?Math.random():Q.getData("to");Q.setData("from",tt).setData("to",Math.random())}this.prevValue=this.value;for(var X=0;X<L;X++){var Q=M[X],tt=Q.getData("from"),_=Q.getData("to"),nt=aB(tt,_,this.value),lt=nt*S,ot=n+F*(X+.5);Q.lineStyle(G,this.color,1).setP0(ot,x).setP1(ot,x-lt)}}};const hB=Phaser.Math.Linear;var lB={buildShapes(){for(var e=0;e<3;e++)this.addShape(new Di)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=i*.1,x=Math.ceil(n*.25),S=1-le(this.value),M=hB(.3,.9,S)*i,L=this.getShapes(),F=0,G=L.length;F<G;F++){var X=L[F],S=(this.value+F/G)%1,Q=Math.PI*2*S;X.lineStyle(x,this.color).setRadius(n).setCenterPosition(e+Math.cos(Q)*M,t+Math.sin(Q)*M)}}};const uB=Phaser.Math.Linear,dB=Phaser.Math.Easing.Expo.In;var fB={buildShapes(){for(var e=5,t=0;t<e;t++){var i=new Sr;this.addShape(i);var n=le(t/(e-1))/2;i.setData("offset",n)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=e-i,x=i*2,S=this.getShapes(),M=S.length,L=i*2/M,F=L*.7,G=0;G<M;G++){var X=S[G],Q=(this.value+X.getData("offset"))%1;Q=dB(le(Q));var tt=uB(.4,1,Q)*x,_=n+L*(G+.5);X.lineStyle(F,this.color,1).setP0(_,t-tt/2).setP1(_,t+tt/2)}}},cB={buildShapes(){this.addShape(new Ze().setName("border")),this.addShape(new Ze().setName("fill"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,n=i*.7,x=e-n,S=t-n,M=n*2;if(this.getShape("border").lineStyle(2,this.color,1).startAt(x,S).lineTo(M,0,!0).lineTo(0,M,!0).lineTo(-M,0,!0).lineTo(0,-M,!0).close(),this.value<.5){var L=(.5-this.value)*2,F=M*L;this.getShape("fill").fillStyle(this.color,1).startAt(x,S).lineTo(M,0,!0).lineTo(0,F,!0).lineTo(-M,0,!0).lineTo(0,-F,!0).close()}else{var L=(this.value-.5)*2,G=180*L;this.getShape("border").rotateAround(e,t,G),this.getShape("fill").fillStyle().lineStyle()}}};const yy=Phaser.Math.RadToDeg,Cy=Phaser.Math.Angle.WrapDegrees,vB=Phaser.Math.Angle.Wrap,pB=Phaser.Math.Angle.ShortestBetween,gB=Phaser.Math.DegToRad,Sy=Phaser.Math.DegToRad(270);var mB={buildShapes(){this.addShape(new Di().setName("border")),this.addShape(new Sr().setName("minuteHand")),this.addShape(new Sr().setName("hourHand")),this.minuteHandAngle=0,this.hourHandAngle=0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,n=Math.ceil(i/25),x=i-n/2,S=i*.8,M=i*.5,L=this.minuteHandAngle;this.minuteHandAngle=Math.PI*2*this.value;var F=Cy(yy(L)),G=Cy(yy(this.minuteHandAngle)),X=pB(F,G);this.hourHandAngle=vB(this.hourHandAngle+gB(X)/12),this.getShape("border").lineStyle(n,this.color).setRadius(x).setCenterPosition(e,t);var Q=this.minuteHandAngle+Sy;this.getShape("minuteHand").lineStyle(n,this.color).setP0(e,t).setP1(e+Math.cos(Q)*S,t+Math.sin(Q)*S);var Q=this.hourHandAngle+Sy;this.getShape("hourHand").lineStyle(n,this.color).setP0(e,t).setP1(e+Math.cos(Q)*M,t+Math.sin(Q)*M)}};const Ty=Phaser.Math.Linear,xB=Phaser.Math.Easing.Expo.In,iv=2,sv=2;var yB={buildShapes(){for(var e=iv*sv,t=0;t<e;t++){var i=new Sr;this.addShape(i)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=e-i,x=t-i,S=i*2/sv,M=i*2/iv,L=this.getShapes(),F=L.length,G=0;G<F;G++){var X=G%sv,Q=Math.floor(G/iv),tt=n+S*(X+.5),_=x+M*(Q+.5),nt=L[G],lt=(this.value+(F-G)*.1)%1;lt=xB(le(lt));var ot=(F-G)/F,dt=Ty(.7,1,lt)*M,ct=Ty(.7,1,lt)*S;nt.lineStyle(ct,this.color,ot).setP0(tt-dt/2,_).setP1(tt+dt/2,_)}}};const Ey=Phaser.Math.Linear;var CB={buildShapes(){for(var e=3,t=0;t<e;t++){var i=new Di;this.addShape(i);var n=le(t/(e-1))/2;i.setData("offset",n)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=e-i,x=this.getShapes(),S=x.length,M=i*2/S,L=M/2,F=0;F<S;F++){var G=x[F],X=(this.value+G.getData("offset"))%1;X=le(X);var Q=Ey(.25,1,X),tt=Ey(.5,1,X)*L;G.fillStyle(this.color,Q).setRadius(tt).setCenterPosition(n+M*(F+.5),t)}}};const Py=Phaser.Math.Linear,SB=Phaser.Math.Easing.Expo.In;var TB={buildShapes(){for(var e=0;e<3;e++){var t=new Sr;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=e-i,x=this.getShapes(),S=x.length,M=i*2/S,L=i*2,F=0;F<S;F++){var G=x[F],X=(this.value+(S-F)*.1)%1;X=SB(le(X));var Q=(F+1)/S,tt=Py(.7,1,X)*L,_=Py(.7,1,X)*M,nt=n+M*(F+.5);G.lineStyle(_,this.color,Q).setP0(nt,t-tt/2).setP1(nt,t+tt/2)}}};const EB=Phaser.Math.Linear,rv=3,nv=3;var PB={buildShapes(){for(var e=rv*nv,t=0;t<e;t++){var i=new Di;this.addShape(i),i.setData("offset",Math.random())}this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=this.isInitialize||this.isSizeChanged,x=e-i,S=t-i,M=i*2/nv,L=i*2/rv,F=Math.min(M,L)/2*.8,G=this.getShapes(),X=0,Q=G.length;X<Q;X++){var tt=X%nv,_=Math.floor(X/rv),nt=x+M*(tt+.5),lt=S+L*(_+.5),ot=G[X],dt=(this.value+ot.getData("offset"))%1;dt=le(dt),ot.fillStyle(this.color,EB(.25,1,dt)),n&&ot.setRadius(F).setCenterPosition(nt,lt)}this.isInitialize=!1}},MB={buildShapes(){for(var e=0;e<2;e++)this.addShape(new Ze)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=Math.ceil(i/25),x=i-n,S=x*.6,M=x*.7,L=x*1.2,F=this.getShapes(),G=0,X=F.length;G<X;G++){var Q=F[G],tt=(this.value+G/X)%1,_=le(tt),nt=e,lt=t-15*tt,ot=x*tt,dt=S*tt,ct=M*tt,ft=L*tt;Q.lineStyle(n,this.color,_).startAt(nt,lt).cubicBezierTo(nt,lt-dt,nt-ot,lt-dt,nt-ot,lt).cubicBezierTo(nt-ot,lt+dt,nt,lt+ct,nt,lt+ft).cubicBezierTo(nt,lt+ct,nt+ot,lt+dt,nt+ot,lt).cubicBezierTo(nt+ot,lt-dt,nt,lt-dt,nt,lt).close()}}};const wB=Phaser.Math.Linear;var AB={buildShapes(){for(var e=0;e<12;e++)this.addShape(new Sr);this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.isInitialize||this.isSizeChanged,n=this.radius,x=n/2,S=Math.ceil(n/20),M=this.getShapes(),L=0,F=M.length;L<F;L++){var G=M[L],X=L/F,Q=Math.PI*2*X,tt=wB(.25,1,(1-this.value+X)%1);G.lineStyle(S,this.color,tt),i&&G.setP0(e+Math.cos(Q)*x,t+Math.sin(Q)*x).setP1(e+Math.cos(Q)*n,t+Math.sin(Q)*n)}this.isInitialize=!1}},RB={buildShapes(){this.addShape(new Di().setName("track")),this.addShape(new Di().setName("thumb"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,n=i*.9,x=Math.ceil(n/25),S=i*.1,M=Math.PI*2*this.value;this.getShape("track").lineStyle(x,this.color,.7).setRadius(n).setCenterPosition(e,t),this.getShape("thumb").fillStyle(this.color).setRadius(S).setCenterPosition(e+Math.cos(M)*n,t+Math.sin(M)*n)}},LB={buildShapes(){this.addShape(new Di().setName("track")),this.addShape(new xa().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,n=Math.ceil(i/25),x=i-n/2;this.getShape("track").lineStyle(n,this.color,.5).setRadius(x).setCenterPosition(e,t);var S=this.value*360,M=S+60;this.getShape("arc").lineStyle(n,this.color,1).setRadius(x).setCenterPosition(e,t).setAngle(S,M)}};const bB=Phaser.Math.Linear;var OB={buildShapes(){for(var e=0;e<4;e++){var t=new xa().setPie();this.addShape(t),t.setData("speed",bB(180,360,Math.random()))}this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,n;this.prevValue!==void 0&&(n=this.value-this.prevValue,this.prevValue>this.value&&(n+=1));for(var x=this.getShapes(),S=0,M=x.length;S<M;S++){var L=x[S],F=(S+1)/M;if(this.prevValue===void 0){var G=S/M*360,X=G+90;L.fillStyle(this.color,F).setRadius(i).setCenterPosition(e,t).setAngle(G,X).setData("angle",G)}else{var G=L.getData("angle")+L.getData("speed")*n;G=G%360;var X=G+90;L.fillStyle(this.color,F).setRadius(i).setCenterPosition(e,t).setAngle(G,X).setData("angle",G)}}this.prevValue=this.value}},FB={buildShapes(){this.addShape(new Di)},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,n=i*this.value,x=Math.ceil(i/25),S=le(this.value);this.getShapes()[0].lineStyle(x,this.color,S).setRadius(n).setCenterPosition(e,t)}};const DB=Phaser.Math.Linear,BB=Phaser.Math.Easing.Expo.In;var IB={buildShapes(){this.addShape(new Di().setName("center")),this.addShape(new Ze().setName("arc0")),this.addShape(new Ze().setName("arc1")),this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=this.isInitialize||this.isSizeChanged,x=i*2/6,S=e-i+x,M=t+i-x,L=this.getShapes(),F=0,G=L.length;F<G;F++){var X=L[F],Q=(this.value+(G-F)*.1)%1;Q=BB(le(Q));var tt=DB(.25,1,Q);switch(X.name){case"center":X.fillStyle(this.color,tt),n&&X.setRadius(x).setCenterPosition(S,M);break;case"arc0":if(X.fillStyle(this.color,tt),n){var _=x*2,nt=x*3;X.startAt(S,M-_).lineTo(S,M-nt).setIterations(8).arc(S,M,nt,270,360).lineTo(S+_,M).setIterations(6).arc(S,M,_,360,270,!0).close()}break;case"arc1":if(X.fillStyle(this.color,tt),n){var _=x*4,nt=x*5;X.startAt(S,M-_).lineTo(S,M-nt).setIterations(8).arc(S,M,nt,270,360).lineTo(S+_,M).setIterations(6).arc(S,M,_,360,270,!0).close()}break}}this.isInitialize=!1}},GB={buildShapes(){for(var e=0;e<2;e++)this.addShape(new Di)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,n=Math.ceil(i/25),x=i-n,S=this.getShapes(),M=0,L=S.length;M<L;M++){var F=S[M],G=(this.value+M/L)%1,X=le(G);F.lineStyle(n,this.color,X).setRadius(G*x).setCenterPosition(e,t)}}},kB={buildShapes(){this.addShape(new xa().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,n=Math.ceil(i/10),x=i-n,S=this.value*720,M=le(this.value)*180,L=S-M;this.getShape("arc").lineStyle(n,this.color,1).setRadius(x).setCenterPosition(e,t).setAngle(L+315,S+315)}};Phaser.Utils.Objects.GetValue;const av={leftArrow:Jl,rightArrow:Jl,upArrow:Jl,downArrow:Jl,audio:oB,ball:lB,bars:fB,box:cB,clock:mB,cube:yB,dots:CB,facebook:TB,grid:PB,hearts:MB,ios:AB,oribit:RB,oval:LB,pie:OB,puff:FB,radio:IB,rings:GB,spinner:kB},ov=[];for(var NB in av)ov.push(NB);const My=Phaser.Utils.Array.GetRandom;var zB={setAnimationMode(e,t){av.hasOwnProperty(e)||(e=My(ov)),this.animationMode=e;var i=av[e];switch(t&&this.resetFromConfig(t),e){case"leftArrow":i.setDirection.call(this,"left");break;case"rightArrow":i.setDirection.call(this,"right");break;case"upArrow":i.setDirection.call(this,"up");break;case"downArrow":i.setDirection.call(this,"down");break}return this.clear(),i.buildShapes.call(this),this.updateShapes=i.updateShapes.bind(this),this.stop().start(),this},setRandomAnimationMode(e){var t=My(ov);return this.setAnimationMode(t,e),this}};const UB=Phaser.Utils.Objects.GetValue;class hv extends xy{constructor(t,i){super(t,i),this.type="rexSpinnerAIO",this.setAnimationMode(UB(i,"animationMode"))}}Object.assign(hv.prototype,zB),W.register("aioSpinner",function(e){var t=new hv(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.AIOSpinner",hv);var VB={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}},wy=function(){for(var e=this.scaleMode-1,t=0,i=this.images.length;t<i;t++){var n=this.images[t],x=Jc(n,this,e,!0),S=x.width/n.width;this.setChildLocalScale(n,S),n.biasScale=S}},Ql=function(e){this.scaleMode===0?this.resize(e.width,e.height):wy.call(this)};const Ay=Phaser.Utils.Objects.IsPlainObject,lv=Phaser.Utils.Objects.GetValue,XB=Phaser.Utils.Array.GetRandom;var WB={out:0,in:1},gs=function(e,t,...i){for(var n=0,x=i.length;n<x;n++){var S=i[n];if(S&&S.hasOwnProperty(e))return S[e]}return t},YB={setTransitionDirection(e){return typeof e=="string"&&(e=WB[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),Ql.call(this,this.nextImage),this},transit(e,t,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),i!==void 0&&(e={key:e,frame:t,mode:i}),this.currentTransitionMode=void 0,Ay(e)){var n=e;e=lv(n,"key",void 0),t=lv(n,"frame",void 0),i=lv(n,"mode"),Array.isArray(i)&&(i=XB(i));var x;this.transitionModes&&this.transitionModes.hasOwnProperty(i)&&(x=this.transitionModes[i],this.currentTransitionMode=i),this.setDuration(gs("duration",this.duration,n,x)).setEaseFunction(gs("ease",this.easeFunction,n,x)).setTransitionDirection(gs("dir",this.dir,n,x));var S=gs("mask",void 0,n,x);S&&this.setMaskGameObject(S),this.setMaskEnable(S===!0);var M=gs("onStart",void 0,n,x),L=gs("onProgress",void 0,n,x),F=gs("onComplete",void 0,n,x);(M!==void 0||L!==void 0||F!==void 0)&&this.setTransitionStartCallback(M,gs("onStartScope",void 0,n,x)).setTransitionProgressCallback(L,gs("onProgressScope",void 0,n,x)).setTransitionCompleteCallback(F,gs("onCompleteScope",void 0,n,x))}return this.setNextTexture(e,t),this.start(),this},addTransitionMode(e,t){return this.transitionModes===void 0&&(this.transitionModes={}),Ay(e)&&(t=e,e=t.name,delete t.name),this.transitionModes[e]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new $i(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};const HB=Phaser.GameObjects.Graphics.prototype.setPosition;var $B=function(e,t){var i=this.parent;return e===void 0&&(e=i.x),t===void 0&&(t=i.y),HB.call(this,e,t),this};const Ry=Phaser.Geom.Rectangle,Ly=Phaser.Geom.Circle;var KB=function(e,t,i,n,x,S,M){switch(e){case 1:n=n.left;var L=-t*(x-.5),F=-i*(S-.5),G=Math.min(t,i)/2+n;(M===void 0||!(M instanceof Ly))&&(M=new Ly),M.setTo(L,F,G);break;default:var X=-(t*x)-n.left,Q=-(i*S)-n.top,tt=t+n.left+n.right,_=i+n.top+n.bottom;(M===void 0||!(M instanceof Ry))&&(M=new Ry),M.setTo(X,Q,tt,_);break}return M},by=function(e,t,i,n,x){switch(this.geom=KB(this.shapeType,e,t,i,n,x,this.geom),this.clear().fillStyle(16777215),this.shapeType){case 1:this.fillCircleShape(this.geom);break;default:this.fillRectShape(this.geom);break}},ZB=function(e,t,i){var n=this.parent;e===void 0&&(e=n.width),t===void 0&&(t=n.height),i===void 0?i=this.padding:typeof i=="number"&&(i=GetBoundsConfig(i));var x=this.width!==e||this.height!==t,S=this.padding!==i&&!mo(this.padding,i);return!x&&!S?this:(this.width=e,this.height=t,S&&Hi(i,this.padding),this.originX=n.originX,this.originY=n.originY,by.call(this,e,t,i,n.originX,n.originY),this)},JB=function(e,t){t===void 0&&(t=e);var i=this.parent;return e===void 0&&(e=i.originX),t===void 0&&(t=i.originY),this.originX===e&&this.originY===t?this:(this.originX=e,this.originY=t,by.call(this,this.width,this.height,this.padding,e,t),this)},QB=function(e,t){return e-=this.x,t-=this.y,this.geom.contains(e,t)},jB={setPosition:$B,resize:ZB,setOrigin:JB,contains:QB};const qB=Phaser.GameObjects.Graphics;class jl extends qB{constructor(t,i,n){i===void 0&&(i=0),typeof i=="string"&&(i=_B[i]),super(t.scene),this.parent=t,this.shapeType=i,this.padding=Pn(n),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}}const _B={rectangle:0,circle:1};Object.assign(jl.prototype,jB);var tI={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(e===!0&&this.maskGameObject instanceof jl)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return e===!0&&(e=new jl(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",function(){e._maskObject.destroy(),e._maskObject=void 0})),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return e===void 0&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!1),t?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(i)):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var i=this.getCellImages(),n=0,x=i.length;n<x;n++)this.setImageMaskEnable(i[n],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}},eI=function(e,t){typeof e=="object"&&(e=e.name),t===void 0&&(t=",");var i;return e==="__BASE"?i=function(n,x){return`${n}${t}${x}`}:i=function(n,x){return`${e}_${n}${t}${x}`},i},iI=function(e,t,i,n,x,S){i==null&&(i="__BASE"),S||(S=eI(i,S));for(var M=e.sys.textures.get(t),L=typeof i=="object"?i:M.get(i),F=L.width,G=L.height,X,Q,tt,_=F/n,nt=G/x,lt=L.cutX,ot=L.cutY,dt=0,ct=0,ft=0;ft<x;ft++){dt=0;for(var xt=0;xt<n;xt++)tt=S(xt,ft),X=dt+lt,Q=ct+ot,M.add(tt,0,X,Q,_,nt),dt+=_;ct+=nt}return{getFrameNameCallback:S,cellWidth:_,cellHeight:nt,columns:n,rows:x}};const Xs=Phaser.Utils.Objects.GetValue,sI=Phaser.GameObjects.Image,rI=Phaser.Utils.Objects.IsPlainObject,nI=Phaser.Math.RotateAround;var aI=function(e,t,i,n){rI(t)&&(n=t,t=Xs(n,"columns",1),i=Xs(n,"rows",1));var x=Xs(n,"createImageCallback");if(!x){var S=Xs(n,"ImageClass",sI);x=function(Ee,ze,Ge){return new S(Ee,0,0,ze,Ge)}}for(var M=Xs(n,"originX",.5),L=Xs(n,"originY",.5),F=Xs(n,"add",!0),G=Xs(n,"align",F),X=Xs(n,"objectPool",void 0),Q=e.scene,tt=e.texture,_=e.frame,nt=iI(Q,tt,_,t,i),lt=nt.getFrameNameCallback,ot=e.scaleX,dt=e.scaleY,ct=e.rotation,ft=e.getTopLeft(),xt=ft.x,St=ft.y,Pt=[],wt=nt.cellWidth*ot,bt=nt.cellHeight*dt,kt=0;kt<i;kt++)for(var Dt=0;Dt<t;Dt++){var Vt,Ht=lt(Dt,kt);if(X&&X.length>0?Vt=X.pop().setTexture(tt,Ht):Vt=x(Q,tt,Ht),F&&Q.add.existing(Vt),G){var se=xt+wt*Dt,Ot=St+bt*kt,ue=se+M*wt,ge=Ot+L*bt;Vt.setOrigin(M,L).setPosition(ue,ge).setScale(ot,dt).setRotation(ct),nI(Vt,xt,St,ct)}Pt.push(Vt)}return Pt},oI={gridCutImage(e,t,i,n){n===void 0&&(n={}),n.objectPool=this.imagesPool;for(var x=aI(e,t,i,n),S,M=0,L=x.length;M<L;M++)S=x[M],S.setVisible(!0),this.add(S);return this.cellImages=x,this.setChildLocalVisible(e,!1),x},gridCutCurrentImage(e,t,i){return this.gridCutImage(this.currentImage,e,t,i)},gridCutNextImage(e,t,i){return this.gridCutImage(this.nextImage,e,t,i)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var e=this.cellImages[0].texture,t=this.cellImages,i,n,x=0,S=t.length;x<S;x++)i=t[x],this.setChildLocalAlpha(i,1).setChildLocalScale(i,1).setChildLocalVisible(i,!1),i.clearMask(),n=i.frame.name,i.setTexture(),e.remove(n);return this.imagesPool.push(...t),t.length=0,this}},Oy={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,t){return this.flipX=e,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}},Fy={};Object.assign(Fy,VB,YB,tI,oI,Oy);var hI=function(e,t,i,n){},lI=function(e,t,i,n){e.setChildLocalAlpha(t,1-n).setChildLocalAlpha(i,n)},uI=function(e,t,i,n){e.setChildLocalAlpha(t,1)};const Dy=Phaser.Utils.Objects.IsPlainObject,ke=Phaser.Utils.Objects.GetValue,dI=Phaser.Math.Clamp;class ql extends Ci{constructor(t,i,n,x,S,M){Dy(i)?(M=i,i=ke(M,"x",0),n=ke(M,"y",0),x=ke(M,"key",void 0),S=ke(M,"frame",void 0)):Dy(S)&&(M=S,S=void 0);var L=ke(M,"back",void 0),F=ke(M,"front",void 0);L||(L=t.add.image(i,n,x,S)),F||(F=t.add.image(i,n,x,S));var G=ke(M,"width",void 0),X=ke(M,"height",void 0),Q=G!==void 0&&X!==void 0?1:0;G===void 0&&(G=F.width),X===void 0&&(X=F.height),super(t,i,n,G,X),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,Q=ke(M,"scaleMode",Q),typeof Q=="string"&&(Q=fI[Q]),this.scaleMode=Q,L.setVisible(!1),this.addMultiple([L,F]),this.backImage=L,this.frontImage=F,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var tt=ke(M,"onStart",void 0),_=ke(M,"onProgress",void 0),nt=ke(M,"onComplete",void 0),lt=ke(M,"dir",0);tt===void 0&&_===void 0&&nt===void 0&&(tt=hI,_=lI,nt=uI,lt=0),this.setTransitionStartCallback(tt,ke(M,"onStartScope",void 0)).setTransitionProgressCallback(_,ke(M,"onProgressScope",void 0)).setTransitionCompleteCallback(nt,ke(M,"onCompleteScope",void 0)).setTransitionDirection(lt).setDuration(ke(M,"duration",1e3)).setEaseFunction(ke(M,"ease","Linear"));var ot=ke(M,"mask",void 0);ot&&this.setMaskGameObject(ot),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,Ql.call(this,this.frontImage)}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(t){this._tint!==t&&(this._tint=t,this.backImage.setTint(t),this.frontImage.setTint(t))}setTint(t){return this.tint=t,this}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}setFlipX(t){return this.flipX=t,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}setFlipY(t){return this.flipY=t,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(t,i){return this.flipX=t,this.flipY=i,this}get t(){return this._t}set t(t){if(t=dI(t,0,1),this._t!==t){this._t=t;var i=this.currentImage,n=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),uv.call(this,this.onStartCallback,this.onStartCallbackScope,this,i,n,t)),uv.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,i,n,t),t===1){uv.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,i,n,t);var x=n.texture.key,S=n.frame.name;this.frontImage.setTexture(x,S),this.backImage.setTexture(x,S),Ql.call(this,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,i){return super.setOrigin(t,i),this.backImage.setOrigin(t,i),this.frontImage.setOrigin(t,i),this.maskGameObject&&this.maskGameObject.setOrigin(t,i),this}setTexture(t,i){return this.frontImage.setTexture(t,i),this.backImage.setTexture(t,i).setVisible(!1),Ql.call(this,this.frontImage),this}setSize(t,i){return super.setSize(t,i),this.scaleMode&&wy.call(this),this}}var uv=function(e,t,i,n,x,S){if(e){if(this.scaleMode){var M;n.biasScale>0&&(M=this.getChildLocalScaleX(n),M=M/n.biasScale,this.setChildLocalScale(n,M)),x.biasScale&&(M=this.getChildLocalScaleX(x),M=M/x.biasScale,this.setChildLocalScale(x,M))}if(t?e.call(t,i,n,x,S):e(i,n,x,S),this.scaleMode){var M;n.biasScale>0&&(M=this.getChildLocalScaleX(n),M=M*n.biasScale,this.setChildLocalScale(n,M)),x.biasScale&&(M=this.getChildLocalScaleX(x),M=M*x.biasScale,this.setChildLocalScale(x,M))}}};Object.assign(ql.prototype,Fy);const fI={fit:1,FIT:1,envelop:2,ENVELOP:2};W.register("transitionImage",function(e,t,i,n,x){var S=new ql(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.TransitionImage",ql);const cI="slideLeft",vI="slideRight",pI="slideUp",gI="slideDown",mI="slideAwayLeft",xI="slideAwayRight",yI="slideAwayUp",CI="slideAwayDown",SI="pushLeft",TI="pushRight",EI="pushUp",PI="pushDown",MI="zoomOut",wI="zoomIn",AI="zoomInOut",RI="fade",LI="crossFade",bI="wipeLeft",OI="wipeRight",FI="wipeUp",DI="wipeDown",BI="irisOut",II="irisIn",GI="irisInOut",kI="pieOut",NI="pieIn",zI="pieInOut",UI="blinds",VI="squares",XI="diamonds",WI="circles",YI="curtain",HI="pixellate",$I="dissolve",KI="revealLeft",ZI="revealRight",JI="revealUp",QI="revealDown";var jI=function(e){e.addTransitionMode(xI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=i.width*x;t.setChildLocalPosition(i,S,0)},onComplete:function(t,i,n,x){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(mI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=i.width*-x;t.setChildLocalPosition(i,S,0)},onComplete:function(t,i,n,x){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(CI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=i.height*x;t.setChildLocalPosition(i,0,S)},onComplete:function(t,i,n,x){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(yI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=i.height*-x;t.setChildLocalPosition(i,0,S)},onComplete:function(t,i,n,x){t.setChildLocalPosition(i,0,0)}})},qI=function(e){e.addTransitionMode(vI,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=n.width*(x-1);t.setChildLocalPosition(n,S,0)},onComplete:function(t,i,n,x){t.setChildLocalPosition(n,0,0)}}).addTransitionMode(cI,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=n.width*(1-x);t.setChildLocalPosition(n,S,0)},onComplete:function(t,i,n,x){t.setChildLocalPosition(n,0,0)}}).addTransitionMode(gI,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=n.height*(x-1);t.setChildLocalPosition(n,0,S)},onComplete:function(t,i,n,x){t.setChildLocalPosition(n,0,0)}}).addTransitionMode(pI,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=n.height*(1-x);t.setChildLocalPosition(n,0,S)},onComplete:function(t,i,n,x){t.setChildLocalPosition(n,0,0)}})},_I=function(e){e.addTransitionMode(TI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=i.width*x;t.setChildLocalPosition(i,S,0);var S=n.width*(x-1);t.setChildLocalPosition(n,S,0)},onComplete:function(t,i,n,x){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(n,0,0)}}).addTransitionMode(SI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=i.width*-x;t.setChildLocalPosition(i,S,0);var S=n.width*(1-x);t.setChildLocalPosition(n,S,0)},onComplete:function(t,i,n,x){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(n,0,0)}}).addTransitionMode(PI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=i.height*x;t.setChildLocalPosition(i,0,S);var S=n.height*(x-1);t.setChildLocalPosition(n,0,S)},onComplete:function(t,i,n,x){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(n,0,0)}}).addTransitionMode(EI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=i.height*-x;t.setChildLocalPosition(i,0,S);var S=n.height*(1-x);t.setChildLocalPosition(n,0,S)},onComplete:function(t,i,n,x){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(n,0,0)}})},t9=function(e){e.addTransitionMode(MI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=1-x;t.setChildLocalScale(i,S,S)},onComplete:function(t,i,n,x){t.setChildLocalScale(i,1,1)}}).addTransitionMode(wI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){var S=x;t.setChildLocalScale(n,S,S)},onComplete:function(t,i,n,x){t.setChildLocalScale(n,1,1)}}).addTransitionMode(AI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,n,x){n.tint=0},onProgress:function(t,i,n,x){var S;x<.5?(S=1-le(x),t.setChildLocalScale(i,S,S)):(i.visible&&t.setChildVisible(i,!1),S=1-le(x),t.setChildLocalScale(n,S,S))},onComplete:function(t,i,n,x){t.setChildLocalScale(i,1,1),t.setChildVisible(i,!0),i.tint=16777215,t.setChildLocalScale(n,1,1),t.setChildVisible(n,!0),n.tint=16777215}})},e9=function(e){e.addTransitionMode(RI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,n,x){n.tint=0},onProgress:function(t,i,n,x){var S;x<.5?(x=le(x),S=Math.floor(255*(1-x)),i.tint=(S<<16)+(S<<8)+S):(i.visible&&t.setChildVisible(i,!1),x=le(x),S=Math.floor(255*(1-x)),n.tint=(S<<16)+(S<<8)+S)},onComplete:function(t,i,n,x){t.setChildVisible(i,!0),i.tint=16777215,t.setChildVisible(n,!0),n.tint=16777215}}).addTransitionMode(LI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,n,x){},onProgress:function(t,i,n,x){t.setChildLocalAlpha(i,1-x),t.setChildLocalAlpha(n,x)},onComplete:function(t,i,n,x){t.setChildLocalAlpha(i,1)}})},i9=function(e){var t=new ps(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var i=this.getShape("rect").fillStyle(16777215),n=1-this.value;switch(this.wipeMode){case"right":i.setSize(this.width*n,this.height).setTopLeftPosition(this.width-i.width,0);break;case"left":i.setSize(this.width*n,this.height).setTopLeftPosition(0,0);break;case"down":i.setSize(this.width,this.height*n).setTopLeftPosition(0,this.height-i.height);break;case"up":i.setSize(this.width,this.height*n).setTopLeftPosition(0,0);break}}});return t},s9=function(e){var t=i9(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(OI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="right"},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}}).addTransitionMode(bI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="left"},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}}).addTransitionMode(DI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="down"},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}}).addTransitionMode(FI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="up"},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}})},r9=function(e){var t=new ps(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}});return t},n9=function(e){var t=r9(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(BI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}}).addTransitionMode(II,{ease:"Linear",dir:"in",mask:t,onStart:function(i,n,x,S){i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){i.maskGameObject.setValue(1-S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}}).addTransitionMode(GI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){x.tint=0,i.setCurrentImageMaskEnable(!0),i.setNextImageMaskEnable(!0)},onProgress:function(i,n,x,S){var M;S<.5?(S=le(S),M=Math.floor(255*(1-S)),i.maskGameObject.setValue(1-S),n.tint=(M<<16)+(M<<8)+M):(n.visible&&i.setChildVisible(n,!1),S=le(S),M=Math.floor(255*(1-S)),i.maskGameObject.setValue(1-S),x.tint=(M<<16)+(M<<8)+M)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1),i.setChildVisible(n,!0),n.tint=16777215,i.setChildVisible(x,!0),x.tint=16777215}})},a9=function(e){var t=new ps(e,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var i=Math.max(this.width,this.height)*2,n=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(i).setAngle(90-n,90+n).setPie()}});return t},o9=function(e){var t=a9(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(kI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}}).addTransitionMode(NI,{ease:"Linear",dir:"in",mask:t,onStart:function(i,n,x,S){i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){i.maskGameObject.setValue(1-S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}}).addTransitionMode(zI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){x.tint=0,i.setCurrentImageMaskEnable(!0),i.setNextImageMaskEnable(!0)},onProgress:function(i,n,x,S){var M;S<.5?(S=le(S),M=Math.floor(255*(1-S)),i.maskGameObject.setValue(1-S),n.tint=(M<<16)+(M<<8)+M):(n.visible&&i.setChildVisible(n,!1),S=le(S),M=Math.floor(255*(1-S)),i.maskGameObject.setValue(1-S),x.tint=(M<<16)+(M<<8)+M)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1),i.setChildVisible(n,!0),n.tint=16777215,i.setChildVisible(x,!0),x.tint=16777215}})},h9=function(e,t){var i=new ps(e,{type:"Graphics",create:{rectangle:t},update:function(){for(var n=this.getShapes(),x=this.width/t,S=0;S<t;S++)n[S].fillStyle(16777215).setSize(x*this.value,this.height).setTopLeftPosition(x*S,0)}});return i},l9=function(e){var t=h9(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(UI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}})},u9=function(e,t,i){var n=new ps(e,{type:"Graphics",create:{rectangle:t*i},update:function(){for(var x=this.getShapes(),S=this.width/t,M=this.height/i,L=0;L<i;L++)for(var F=0;F<t;F++)x[F*i+L].fillStyle(16777215).setSize(S*this.value,M*this.value).setCenterPosition(S*(F+.5),M*(L+.5))}});return n},d9=function(e){var t=u9(e.scene,Math.ceil(e.width/40),Math.ceil(e.height/40));e.once("destroy",function(){t.destroy()}).addTransitionMode(VI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}})},f9=function(e,t,i){var n=new ps(e,{type:"Graphics",create:{lines:t*i},update:function(){for(var x=this.getShapes(),S=this.width/(t-1),M=this.height/i,L=M*2,F=S*this.value,G=M*this.value,X=0;X<i;X++)for(var Q=0;Q<t;Q++){var tt=Q*S,_=X*L+Q%2*M;x[Q*i+X].fillStyle(16777215).start(tt+F,_).lineTo(tt,_+G).lineTo(tt-F,_).lineTo(tt,_-G).lineTo(tt+F,_).close()}}});return n},c9=function(e){var t=f9(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(XI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}})},v9=function(e,t,i){var n=new ps(e,{type:"Graphics",create:{circle:t*i},update:function(){for(var x=this.getShapes(),S=this.width/(t-1),M=this.height/i,L=M*2,F=Math.max(S,M)*this.value,G=0;G<i;G++)for(var X=0;X<t;X++){var Q=X*S,tt=G*L+X%2*M;x[X*i+G].fillStyle(16777215).setCenterPosition(Q,tt).setRadius(F)}}});return n},p9=function(e){var t=v9(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(WI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){i.maskGameObject.setValue(S)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1)}})},g9=function(e,t){var i=new ps(e,{type:"Graphics",create:{lines:t},update:function(){for(var n=this.getShapes(),x=this.width/t,S=x/2,M=0;M<t;M++){var L=x*M,F=this.height*this.value,G=L+S;n[M].fillStyle(16777215).start(L,0).horizontalLineTo(F).arc(G,F,S,180,0,!0).horizontalLineTo(-F).lineTo(L,0).close()}}});return i},m9=function(e){var t=g9(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(YI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,n,x,S){x.tint=0,i.setCurrentImageMaskEnable(!0,!0),i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,n,x,S){var M;S<.5?(S=le(S),M=Math.floor(255*(1-S)),i.maskGameObject.setValue(S),n.tint=(M<<16)+(M<<8)+M):(n.visible&&i.setChildVisible(n,!1),S=le(S),M=Math.floor(255*(1-S)),i.maskGameObject.setValue(S),x.tint=(M<<16)+(M<<8)+M)},onComplete:function(i,n,x,S){i.removeMaskGameObject(!1),i.setChildVisible(n,!0),n.tint=16777215,i.setChildVisible(x,!0),x.tint=16777215}})},x9=function(e){e.addTransitionMode(HI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,n,x){t.setChildVisible(n,!1),i.effect=i.preFX.addPixelate(0),n.effect=n.preFX.addPixelate(0)},onProgress:function(t,i,n,x){if(x<.5){x=le(x);var S=Math.min(i.width,i.height)/5;i.effect.amount=Math.ceil(S*x)}else{i.visible&&t.setChildVisible(i,!1),n.visible||t.setChildVisible(n,!0),x=le(x);var S=Math.min(n.width,n.height)/5;n.effect.amount=Math.ceil(S*x)}},onComplete:function(t,i,n,x){i.preFX.remove(i.effect),delete i.effect,t.setChildVisible(i,!0),n.preFX.remove(n.effect),delete n.effect}})};const y9=`#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
// Scene buffer
uniform sampler2D uMainSampler;
uniform sampler2D uMainSampler2;

uniform int resizeMode;
uniform float progress;
uniform float fromRatio;
uniform float toRatio;
varying vec2 outFragCoord;
// Effect parameters
uniform float noiseX;
uniform float noiseY;
uniform float noiseZ;
uniform float fromEdgeStart;
uniform float fromEdgeWidth;
uniform float toEdgeStart;
uniform float toEdgeWidth;

vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }
float Perlin(vec3 P) {
    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));
    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);
    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);
    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;
    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0); gx1 = fract(gx1);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),
        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),
        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),
        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));
    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));
    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;
    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;
    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),
        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),
        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),
            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);
    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);
}
float Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }


vec4 getFromColor (vec2 uv) {
  return texture2D(uMainSampler, uv);
}

vec4 getToColor (vec2 uv) {
  if (resizeMode == 2) {
    //  cover
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));
  } else if (resizeMode == 1) {
    //  contain
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));
  } else {
    //  stretch
    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));
  }
}

vec4 transition (vec2 uv) {    
  vec4 colorFront = getFromColor(uv);
  vec4 colorTo = getToColor(uv);

  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0
    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))
    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;
  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)
    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));
  return colorResult;
}

void main () {
  vec2 uv = outFragCoord;
  gl_FragColor = transition(uv);
}
`,C9=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,ji=Phaser.Utils.Objects.GetValue,S9=Phaser.Math.Clamp;class dv extends C9{constructor(t){super({name:"rexDissolvePostFx",game:t,renderTarget:!0,fragShader:y9}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(t){return this.setProgress(ji(t,"progress",0)),this.setTransitionTargetTexture(ji(t,"toTexture","__DEFAULT"),ji(t,"toFrame",void 0),ji(t,"resizeMode",1)),this.setNoise(ji(t,"noiseX",void 0),ji(t,"noiseY",void 0),ji(t,"noiseZ",void 0)),this.setFromEdge(ji(t,"fromEdgeStart",.01),ji(t,"fromEdgeWidth",.05)),this.setToEdge(ji(t,"toEdgeStart",.01),ji(t,"toEdgeWidth",.05)),this}onBoot(){}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(t){this.set1f("fromRatio",t.width/t.height),this.set1f("toRatio",this.toRatio),this.set1i("uMainSampler2",1),this.bindTexture(this.targetTexture,1),this.bindAndDraw(t)}get progress(){return this._progress}set progress(t){this._progress=S9(t,0,1)}setProgress(t){return this.progress=t,this}setTransitionTargetTexture(t,i,n){t===void 0&&(t="__DEFAULT");var x=this.game.textures.getFrame(t,i);return x||(x=this.game.textures.getFrame("__DEFAULT")),this.toRatio=x.width/x.height,this.toFrame=x,this.targetTexture=x.glTexture,n!==void 0&&(this.resizeMode=n),this}setResizeMode(t){return typeof t=="string"&&(t=T9[t]),this.resizeMode=t,this}setNoise(t,i,n){return t===void 0&&(t=4+Math.random()*6),i===void 0&&(i=4+Math.random()*6),n===void 0&&(n=Math.random()*10),this.noiseX=t,this.noiseY=i,this.noiseZ=n,this}setFromEdge(t,i){return this.fromEdgeStart=t,this.fromEdgeWidth=i,this}setToEdge(t,i){return this.toEdgeStart=t,this.toEdgeWidth=i,this}}var T9={stretch:0,contain:1,cover:2},E9=function(e,t,i){w(e).renderer.pipelines.addPostPipeline(t,i)},P9=function(e,t,i){i===void 0&&(i={}),e.setPostPipeline(t);var n=e.postPipelines[e.postPipelines.length-1];return n.resetFromJSON(i),i.name&&(n.name=i.name),n};const M9=Phaser.Utils.Array.SpliceOne;var w9=function(e,t,i){for(var n,x,S,n=e.postPipelines,x=n.length-1;x>=0;x--){var S=n[x];S instanceof t&&(S.destroy(),M9(n,x))}e.hasPostPipeline=e.postPipelines.length>0},A9=function(e){E9(e.scene.game,"rexDissolvePostFx",dv),e.addTransitionMode($I,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,n,x){i.effect=P9(i,dv)},onProgress:function(t,i,n,x){i.effect.setProgress(x)},onComplete:function(t,i,n,x){w9(i,dv),delete i.effect}})};const _l=.1,R9=0,L9=0,b9=1,O9=1,By=0,Iy=1;var F9=function(e){e.addTransitionMode(ZI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,n,x){n.effect=n.preFX.addReveal(_l,R9,By)},onProgress:function(t,i,n,x){n.effect.progress=x},onComplete:function(t,i,n,x){n.preFX.remove(n.effect),delete n.effect}}).addTransitionMode(KI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,n,x){n.effect=n.preFX.addReveal(_l,b9,By)},onProgress:function(t,i,n,x){n.effect.progress=x},onComplete:function(t,i,n,x){n.preFX.remove(n.effect),delete n.effect}}).addTransitionMode(QI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,n,x){n.effect=n.preFX.addReveal(_l,L9,Iy)},onProgress:function(t,i,n,x){n.effect.progress=x},onComplete:function(t,i,n,x){n.preFX.remove(n.effect),delete n.effect}}).addTransitionMode(JI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,n,x){n.effect=n.preFX.addReveal(_l,O9,Iy)},onProgress:function(t,i,n,x){n.effect.progress=x},onComplete:function(t,i,n,x){n.preFX.remove(n.effect),delete n.effect}})};const Gy=[jI,qI,_I,t9,e9,n9,o9,s9,l9,d9,c9,p9,m9,x9,A9,F9];class ky extends ql{constructor(t,i,n,x,S,M){super(t,i,n,x,S,M);for(var L=0,F=Gy.length;L<F;L++)Gy[L](this)}}W.register("transitionImagePack",function(e,t,i,n,x){var S=new ky(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.TransitionImagePack",ky);var D9=function(){var e=this.image;if(!this.scaleUp&&e.width<=this.width&&e.height<=this.height)return this;var t=Jc(e,this,"FIT",!0);return e.setDisplaySize(t.width,t.height),this.resetChildScaleState(e),this},Ny={scaleImage:D9};Object.assign(Ny,Oy);var B9=function(){var e=this.background;return e?(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),qe(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e),this):this};const zy=Phaser.Utils.Objects.IsPlainObject,Ws=Phaser.Utils.Objects.GetValue;class tu extends Ci{constructor(t,i,n,x,S,M){zy(i)?(M=i,i=Ws(M,"x",0),n=Ws(M,"y",0),x=Ws(M,"key",void 0),S=Ws(M,"frame",void 0)):zy(S)&&(M=S,S=void 0);var L=Ws(M,"image");L?L.setPosition(i,n).setOrigin(.5):(L=t.add.image(i,n,x,S),x===void 0&&L.setVisible(!1)),super(t,i,n,1,1),this.type="rexImageBox";var F=Ws(M,"background");F&&this.add(F),this.background=F,this.add(L),this.image=L,this.scaleUp=Ws(M,"scaleUp",!1);var G=Ws(M,"width",L.width),X=Ws(M,"height",L.height);this.resize(G,X)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}resize(t,i){return super.resize(t,i),B9.call(this),this.scaleImage(),this}setTexture(t,i){var n=this.image;return n.setTexture(t,i),t!==null?(this.setChildVisible(n,!0),this.scaleImage()):this.setChildVisible(n,!1),this}}Object.assign(tu.prototype,Ny),W.register("imageBox",function(e,t,i,n,x){var S=new tu(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.ImageBox",tu),W.register("fullWindowRectangle",function(e,t){var i=new Fc(this.scene,e,t);return this.scene.add.existing(i),i}),J(window,"RexPlugins.UI.FullWindowRectangle",Fc),W.register("fullWindowZone",function(){var e=new Ff(this.scene);return this.scene.add.existing(e),e}),J(window,"RexPlugins.UI.FullWindowZone",Ff),W.register("cover",function(e){var t=new Bc(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Cover",Bc);var fv=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var i=this.node.style;return i.width=`${e}px`,i.height=`${t}px`,this.updateSize(),this};const Uy={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"],autoCapitalize:["autocapitalize","off"]},Vy={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},I9={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},Xy=Phaser.Utils.Objects.GetValue;var Wy=function(e,t,i,n){var x=Xy(n,"preventDefault",!1),S=Xy(n,"preTest");for(let M in i)t.addEventListener(M,function(L){(!S||S(e,M))&&e.emit(i[M],e,L),x&&L.preventDefault()})};const G9=Phaser.GameObjects.DOMElement,Yy=Phaser.Utils.Objects.IsPlainObject,ms=Phaser.Utils.Objects.GetValue;class eu extends G9{constructor(t,i,n,x,S,M){Yy(i)?(M=i,i=ms(M,"x",0),n=ms(M,"y",0),x=ms(M,"width",0),S=ms(M,"height",0)):Yy(x)&&(M=x,x=ms(M,"width",0),S=ms(M,"height",0)),M===void 0&&(M={});var L,F=ms(M,"inputType",void 0);F===void 0&&(F=ms(M,"type","text")),F==="textarea"?(L=document.createElement("textarea"),L.style.resize="none"):(L=document.createElement("input"),L.type=F),il(Uy,M,L);var G=ms(M,"style",void 0);G=il(Vy,M,G);var X=L.style;for(var Q in M)if(!(Q in Uy||Q in Vy)){if(Q in X)G[Q]=M[Q];else if(Q in L){if(Q==="type")continue;L[Q]=M[Q]}}G["box-sizing"]="border-box",super(t,i,n,L,G),this.type="rexInputText",this.resize(x,S),Wy(this,L,I9),cm(L),ms(M,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return this.node.tagName.toLowerCase()==="textarea"?"textarea":this.node.type}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return t===void 0?this.node.select():this.node.setSelectionRange(t,i),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node.style[t]=i,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var k9={resize:fv};Object.assign(eu.prototype,k9),W.register("inputText",function(e){var t=new eu(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.InputText",eu);const Hy=Phaser.Utils.Objects.GetValue;var N9=function(e,t){var i=document.createElement("input");i.type="file";var n=Hy(t,"accept",""),x=Hy(t,"multiple",!1);return i.setAttribute("accept",n),x?i.setAttribute("multiple",""):i.removeAttribute("multiple"),i},$y=function(e,t){return e===void 0&&(e=0),new Promise(function(i,n){setTimeout(function(){i(t)},e)})},Ky=function({game:e,fileInput:t,closeDelay:i}){return tl(w(e).events,"focus").then(function(){return $y(i)}).then(function(){var n={files:t.files};return Promise.resolve(n)})};const z9=Phaser.Utils.Objects.GetValue,U9=Phaser.DOM.RemoveFromDOM;var Zy=function(e,t){var i=z9(t,"closeDelay",200),n=N9(e,t);return n.click(),Ky({game:e,fileInput:n,closeDelay:i}).then(function(x){return U9(n),n.remove(),Promise.resolve(x)})},Jy=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},V9=function(e,t,i){if(i===void 0)switch(t){case"image":case"svg":i="textures";break;case"animation":i="json";break;case"tilemapTiledJSON":case"tilemapCSV":i="tilemap";break;case"glsl":i="shader";break;default:i=t;break}e=w(e);var n;return i==="textures"?n=e.textures:n=e.cache[i],n},Qy=function(e,t,i,n,x,S){if(!(x===null||x===!1))if(Ki(x))x();else{var M=V9(e,i,x);M.exists(n)&&M.remove(n)}var L=e.load;if(S&&L.once(`filecomplete-${i}-${n}`,function(G,X,Q){S(Q)}),Ki(t))t();else{var F=window.URL.createObjectURL(t);L[i](n,F)}L.start()},X9=function(e,t,i,n,x){var S=this.scene;return Qy(S,e,t,i,n,x),this},W9=function(e,t,i,n){var x=this.scene;return new Promise(function(S,M){var L=function(F){S(F)};Qy(x,e,t,i,n,L)})},jy={loadFile:X9,loadFilePromise:W9};const Y9=Phaser.GameObjects.DOMElement,qy=Phaser.Utils.Objects.IsPlainObject,xs=Phaser.Utils.Objects.GetValue;class $o extends Y9{constructor(t,i,n,x,S,M){qy(i)?(M=i,i=xs(M,"x",0),n=xs(M,"y",0),x=xs(M,"width",0),S=xs(M,"height",0)):qy(x)&&(M=x,x=xs(M,"width",0),S=xs(M,"height",0));var L=document.createElement("input");L.type="file";var F=L.style;F.display="none";var G=document.createElement("label");G.appendChild(L);var X=xs(M,"style",void 0);super(t,i,n,G,X),this.type="rexFileChooser",this.resetFromJSON(M),this.resize(x,S);var Q=this;L.onchange=function(){Q.emit("change",Q)},this.setCloseDelay(xs(M,"closeDelay",200)),L.onclick=function(){Ky({game:t,fileInput:L,closeDelay:Q.closeDelay}).then(function(){Q.emit("select",Q)})}}resetFromJSON(t){return this.setAccept(xs(t,"accept","")),this.setMultiple(xs(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(t){return t===void 0&&(t=!0),this.fileInput.disabled=!t,this}}var H9={resize:fv,syncTo:Jy};Object.assign($o.prototype,H9,jy),W.register("fileChooser",function(e){var t=new $o(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.FileChooser",$o);var $9={setDropEnable(e){return e===void 0&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},K9={addFilter(e,t){return this.filters||(this.filters={}),this.filters[e]=t,this},addFilters(e){this.filters||(this.filters={});for(var t in e)this.filters[t]=e[t];return this}},_y={resize:fv,syncTo:Jy};Object.assign(_y,$9,K9,jy);const Z9={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},J9=Phaser.GameObjects.DOMElement,tC=Phaser.Utils.Objects.IsPlainObject,Ys=Phaser.Utils.Objects.GetValue;class cv extends J9{constructor(t,i,n,x,S,M){tC(i)?(M=i,i=Ys(M,"x",0),n=Ys(M,"y",0),x=Ys(M,"width",0),S=Ys(M,"height",0)):tC(x)&&(M=x,x=Ys(M,"width",0),S=Ys(M,"height",0)),M===void 0&&(M={});var L=document.createElement("div"),F=Ys(M,"style",void 0);super(t,i,n,L,F),this.type="rexFileDropZone",this.resize(x,S),this._files=[],this.setDropEnable(Ys(M,"dropEnable",!0));var G=Ys(M,"filters");G&&this.addFilters(G),Wy(this,L,Z9,{preventDefault:!0,preTest(X){return X.dropEnable}}),this.on("drop",function(X,Q){this._files=Q.dataTransfer.files;var tt=this._files;if(tt&&this.filters)for(var _ in this.filters){for(var nt=this.filters[_],lt=[],ot=0,dt=tt.length;ot<dt;ot++){var ct=tt[ot];nt(ct,tt)&&lt.push(ct)}lt.length>0&&this.emit(`drop.${_}`,lt)}},this)}get files(){return this._files}}Object.assign(cv.prototype,_y),W.register("fileDropZone",function(e){var t=new cv(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.FileDropZone",cv);var Q9=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i=this.sizerChildren,n,x,S,M,L,F=!1;if(this.childrenProportion,this.orientation===0)for(var G=!0,X=0,Q=i.length;X<Q;X++)n=i[X],n.hasOwnProperty("rexSizer")&&(x=n.rexSizer,!x.hidden&&(S=x.proportion,S===0||e?(L=this.getChildWidth(n),x.fitRatio>0&&!x.resolved&&(L=void 0),L===void 0&&(S!==0&&!this.hasProportion0Child?L=0:F=!0)):L=0,!F&&(M=n.rexSizer.padding,L+=(M.left+M.right)*this.scaleX,G?G=!1:L+=this.space.item*this.scaleX,t+=L)));else for(var X=0,Q=i.length;X<Q;X++)n=i[X],n.hasOwnProperty("rexSizer")&&(x=n.rexSizer,!x.hidden&&(L=this.getChildWidth(n),L===void 0&&(F=!0),!F&&(M=x.padding,L+=(M.left+M.right)*this.scaleX,t=Math.max(L,t))));if(!F)return t+(this.space.left+this.space.right)*this.scaleX},j9=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i=this.sizerChildren,n,x,S,M,L,F=!1;if(this.childrenProportion,this.orientation===0)for(var G=0,X=i.length;G<X;G++)n=i[G],n.hasOwnProperty("rexSizer")&&(x=n.rexSizer,!x.hidden&&(L=this.getChildHeight(n),L===void 0&&(F=!0),!F&&(M=x.padding,L+=(M.top+M.bottom)*this.scaleY,t=Math.max(L,t))));else for(var Q=!0,G=0,X=i.length;G<X;G++)n=i[G],n.hasOwnProperty("rexSizer")&&(x=n.rexSizer,!x.hidden&&(S=x.proportion,S===0||e?(L=this.getChildHeight(n),x.fitRatio>0&&!x.resolved&&(L=void 0),L===void 0&&(S!==0&&!this.hasProportion0Child?L=0:F=!0)):L=0,!F&&(M=x.padding,L+=(M.top+M.bottom)*this.scaleY,Q?Q=!1:L+=this.space.item*this.scaleY,t+=L)));if(!F)return t+(this.space.top+this.space.bottom)*this.scaleY},q9=function(e,t){t===void 0&&(t=this.width*this.scaleX);var i,n=e.rexSizer;if(this.orientation===0)n.proportion>0&&this.proportionLength>0&&(i=n.proportion*this.proportionLength);else if(n.expand){var x=this.space,S=t-(x.left+x.right)*this.scaleX,M=n.padding;i=S-(M.left+M.right)*this.scaleX}return i},_9=function(e,t){t===void 0&&(t=this.height);var i,n=e.rexSizer;if(this.orientation===0){if(n.expand){var x=this.space,S=t-(x.top+x.bottom)*this.scaleY,M=n.padding;i=S-(M.top+M.bottom)*this.scaleY}}else n.proportion>0&&this.proportionLength>0&&(i=n.proportion*this.proportionLength);return i},t8=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,n=0,x=t.length;n<x;n++)i=t[n],i.isRexSizer&&e.push(i);return e},e8=function(){this.hasRatioFitChild=!1;for(var e,t,i=this.sizerChildren,n=0,x=i.length;n<x;n++)e=i[n],t=e.rexSizer,!t.hidden&&t.fitRatio>0&&(qe(e,0,0),t.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,Bo.call(this),this};const i8=Phaser.Math.Wrap;var s8=function(){for(var e=this.sizerChildren,t,i,n,x=this.innerLeft,S=this.innerTop,M=this.innerWidth,L=this.innerHeight,F=x,G=S,X,Q,tt,_,nt,lt,ot,dt,ct,ft=this.startChildIndex,xt=0,St=e.length;xt<St;xt++)ft===0?ct=xt:ct=i8(xt+ft,0,St),this.rtl&&(ct=St-ct-1),t=e[ct],!t.rexSizer.hidden&&(i=t.rexSizer,n=i.padding,ko.call(this,t),t.isRexSpace?(ot=0,dt=0):(ot=this.getExpandedChildWidth(t),dt=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,ot,dt),Qc(t,this)):qe(t,ot,dt),ot===void 0&&(ot=_t(t)),dt===void 0&&(dt=te(t)),this.orientation===0?(X=F+n.left*this.scaleX,i.proportion===0||this.proportionLength===0?tt=ot:tt=i.proportion*this.proportionLength,Q=G+n.top*this.scaleY,_=L-(n.top+n.bottom)*this.scaleY):(X=F+n.left*this.scaleX,tt=M-(n.left+n.right)*this.scaleX,Q=G+n.top*this.scaleY,i.proportion===0||this.proportionLength===0?_=dt:_=i.proportion*this.proportionLength),ot===void 0&&(ot=_t(t)),dt===void 0&&(dt=te(t)),nt=(i.alignOffsetX+i.alignOffsetOriginX*ot)*this.scaleX,lt=(i.alignOffsetY+i.alignOffsetOriginY*dt)*this.scaleY,No.call(this,t,X,Q,tt,_,i.align,nt,lt),this.orientation===0?F+=tt+(n.left+n.right)*this.scaleX+this.space.item*this.scaleX:G+=_+(n.top+n.bottom)*this.scaleY+this.space.item*this.scaleY)},r8=function(t){var t=yc.call(this,t);if(t!==void 0&&this.orientation===0&&this.proportionLength===void 0){var i=t-this.childrenWidth;i>0?(i=t-this.getChildrenWidth(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return t},n8=function(t){var t=Tc.call(this,t);if(t!==void 0&&this.orientation===1&&this.proportionLength===void 0){var i=t-this.childrenHeight;i>0?(i=t-this.getChildrenHeight(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return t},a8=function(){return this.hasRatioFitChild&&this.orientation===1?!0:Cc.call(this)},eC=function(e,t){if(this.hasRatioFitChild){var i;this.orientation===0?i=t-(this.getInnerPadding("top")+this.getInnerPadding("bottom"))*this.scaleY:e-(this.getInnerPadding("left")+this.getInnerPadding("right"))*this.scaleX;for(var n,x,S,M,L=this.sizerChildren,F=0,G=L.length;F<G;F++){var n=L[F],x=n.rexSizer;if(!x.hidden){var X=x.fitRatio;X&&(this.orientation===0?(M=i-(this.getChildOuterPadding(n,"top")+this.getChildOuterPadding(n,"bottom"))*this.scaleY,S=M*X):(S=i-(this.getChildOuterPadding(n,"top")+this.getChildOuterPadding(n,"bottom"))*this.scaleX,M=S/X),qe(n,S,M),n.isRexSizer&&n.setMinSize(S,M),x.resolved=!0)}}}},o8=function(e){this.wrapResult||(this.orientation===1&&eC.call(this,e,void 0),Sc.call(this,e))},h8=function(){return this.hasRatioFitChild&&this.orientation===0?!0:Ec.call(this)},l8=function(e){this.wrapResult||(this.orientation===0&&eC.call(this,void 0,e),Pc.call(this,e))};const u8=Phaser.GameObjects.Zone;class vv extends u8{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var d8=function(e,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var n=-1,x=1/0,S=0,M=i.length;S<M;S++){var L=i[S],F;this.orientation===0?F=Math.abs(L.left-e):F=Math.abs(L.top-t),x>F&&(x=F,n=S)}var L=i[i.length-1],F;return this.orientation===0?F=Math.abs(L.right-e):F=Math.abs(L.bottom-t),x>F&&(x=F,n=S+1),n};const iC=Phaser.Utils.Objects.IsPlainObject,Ti=Phaser.Utils.Objects.GetValue,sC=Phaser.Display.Align.CENTER,f8={min:0,full:-1};var pv=function(e,t,i,n,x,S,M,L,F,G){var X,Q,tt,_;Fo.call(this,e);var nt=e.isRexSpace,lt=typeof t;if(t===null)return this;if(lt!=="number"){if(lt==="string")t=f8[t];else if(iC(t)){var ot=t;t=Ti(ot,"proportion",void 0),i=Ti(ot,"align",sC),n=Ti(ot,"padding",0),x=Ti(ot,"expand",!1),S=Ti(ot,"key",void 0),M=Ti(ot,"index",void 0),e.isRexSizer||(L=Ti(ot,"minWidth",void 0),F=Ti(ot,"minHeight",void 0)),G=Ti(ot,"fitRatio",0),X=Ti(ot,"offsetX",0),Q=Ti(ot,"offsetY",0),tt=Ti(ot,"offsetOriginX",0),_=Ti(ot,"offsetOriginY",0)}}typeof i=="string"&&(i=Ea[i]),t===void 0&&(t=nt?1:0),i===void 0&&(i=sC),n===void 0&&(n=0),x===void 0&&(x=!1),L===void 0&&(nt?L=0:e.isRexSizer||(L=e._minWidth)),F===void 0&&(nt?F=0:e.isRexSizer||(F=e._minHeight)),G===void 0||G===!1?G=0:G===!0&&(G=_t(e)/te(e)),X===void 0&&(X=0),Q===void 0&&(Q=0),tt===void 0&&(tt=0),_===void 0&&(_=0);var ot=this.getSizerConfig(e);return ot.proportion=t,ot.align=i,ot.padding=Pn(n),ot.expand=x,ot.fitRatio=t===0?G:0,ot.alignOffsetX=X,ot.alignOffsetY=Q,ot.alignOffsetOriginX=tt,ot.alignOffsetOriginY=_,M===void 0||M>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(M,0,e),e.isRexSizer||(t>0&&(this.orientation===0?e.minWidth=L===void 0?_t(e):L:e.minHeight=F===void 0?te(e):F),x&&(this.orientation===0?e.minHeight=F:e.minWidth=L)),S!==void 0&&this.addChildrenMap(S,e),this},c8={add:pv,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return t===void 0&&(t=1),pv.call(this,new vv(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,i,n,x,S,M,L){return iC(i)&&(i.index=e),pv.call(this,t,i,n,x,S,M,e,L),this},insertAtPosition(e,t,i,n,x,S,M,L,F){var G=d8.call(this,e,t);return G===-1&&(G=void 0),this.insert(G,i,n,x,S,M,L,F),this}};const v8=Phaser.Utils.Array.Remove;var p8={remove(e,t){return this.getParentSizer(e)!==this?this:(v8(this.sizerChildren,e),Do.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Hl.call(this,e),this}},g8={getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,t){return typeof t=="string"&&(t=Ea[t]),this.getSizerConfig(e).align=t,this}},m8={getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,t){return this.getSizerConfig(e).proportion=t,this}},x8={getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,t){return this.getSizerConfig(e).expand=t,this}},y8=function(e){e===void 0&&(e="left");var t=this.sizerChildren,i=t[0],n=i&&i.isRexSpace;e==="right"||e==="bottom"||e==="center"?n||this.insertSpace(0):n&&this.remove(i,!0);var x=t.length-1,S=t[x],M=S&&S.isRexSpace;return e==="center"?M||this.insertSpace(x+1):M&&this.remove(S,!0),this},gv={sortChildren(e){return this.sizerChildren.sort(e),this},sortChildrenByData(e,t){return this.sizerChildren.sort(function(i,n){var x=i.getData(e),S=n.getData(e);return t?S-x:x-S}),this},sortChildrenByProperty(e,t){return this.sizerChildren.sort(function(i,n){var x=i[e],S=n[e];return t?S-x:x-S}),this}},rC={getChildrenWidth:Q9,getChildrenHeight:j9,getExpandedChildWidth:q9,getExpandedChildHeight:_9,getChildrenSizers:t8,preLayout:e8,layoutChildren:s8,resolveWidth:r8,resolveHeight:n8,hasWidthWrap:a8,runWidthWrap:o8,hasHeightWrap:h8,runHeightWrap:l8,setChildrenAlignMode:y8};Object.assign(rC,c8,p8,g8,m8,x8,gv);var C8=function(){for(var e=0,t=this.sizerChildren,i,n,x=0,S=t.length;x<S;x++)i=t[x],!i.rexSizer.hidden&&(n=i.rexSizer.proportion,n>0?e+=n:n===0&&(this.hasProportion0Child=!0));return e};const mv=Phaser.Utils.Objects.IsPlainObject,ki=Phaser.Utils.Objects.GetValue;class qt extends Rn{constructor(t,i,n,x,S,M,L){mv(i)?(L=i,i=ki(L,"x",0),n=ki(L,"y",0),x=ki(L,"width",void 0),S=ki(L,"height",void 0),M=ki(L,"orientation",0)):mv(x)?(L=x,x=ki(L,"width",void 0),S=ki(L,"height",void 0),M=ki(L,"orientation",0)):mv(M)&&(L=M,M=ki(L,"orientation",0)),M===void 0&&(M=0),super(t,i,n,x,S,L),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(M),this.setItemSpacing(ki(L,"space.item",0)),this.setStartChildIndex(ki(L,"startChildIndex",0)),this.setRTL(ki(L,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=yn(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=C8.call(this)),this._childrenProportion}}Object.assign(qt.prototype,rC);var iu=function(e,t,i){if(e){var n=t==null,x=i==null;return n&&x||(n||(e.displayWidth=t),x||(e.displayHeight=i),n&&(e.scaleX=e.scaleY),x&&(e.scaleY=e.scaleX)),e}},S8=function(e){e===void 0?e={}:typeof e=="string"&&(e={text:e});var t=e.text||"";this.setText(t);var i=this.childrenMap.icon;if(i){e.icon?this.show(i):this.hide(i);var n=e.iconSize;n&&(this.setChildDisplaySize(i,n,n),this.iconWidth!==void 0&&this.setIconSize(n)),e.icon!==!0&&this.setIconTexture(e.icon,e.iconFrame)}var x=this.childrenMap.action;if(x){e.action?this.show(x):this.hide(x);var S=e.actionSize;S&&(this.setChildDisplaySize(x,S,S),this.actionWidth!==void 0&&this.setActionSize(S)),e.action!==!0&&this.setActionTexture(e.action,e.actionFrame)}return this},T8={appendText:Rg,resetDisplayContent:S8};class xv extends qt{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var i=this.childrenMap.text;i&&i.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,i){var n=this.childrenMap.icon;return!n||!n.setTexture?this:(n.setTexture(t,i),this.iconWidth!==void 0&&this.iconHeight!==void 0&&(iu(n,this.iconWidth,this.iconHeight),this.resetChildScaleState(n)),this)}setTexture(t,i){return this.setIconTexture(t,i),this}setIconSize(t,i){return i===void 0&&(i=t),this.iconWidth=t,this.iconHeight=i,this}get texture(){var t=this.childrenMap.icon;if(t)return t.texture}get frame(){var t=this.childrenMap.icon;if(t)return t.frame}setActionTexture(t,i){var n=this.childrenMap.action;return!n||!n.setTexture?this:(n.setTexture(t,i),this.actionWidth!==void 0&&this.actionHeight!==void 0&&(iu(n,this.actionWidth,this.actionHeight),this.resetChildScaleState(n)),this)}get actionTexture(){var t=this.childrenMap.action;if(t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t)return t.frame}setActionSize(t,i){return i===void 0&&(i=t),this.actionWidth=t,this.actionHeight=i,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&this.iconHeight!==void 0&&iu(t,this.iconWidth,this.iconHeight);var i=this.childrenMap.action;i&&this.actionWidth!==void 0&&this.actionHeight!==void 0&&iu(i,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(t,i,n){var x=this.childrenMap.iconMask;x&&(x.setPosition(),this.resetChildPositionState(x));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),super.postLayout(t,i,n),this}resize(t,i){super.resize(t,i);var n=this.childrenMap.iconMask;n&&n.resize();var x=this.childrenMap.actionMask;return x&&x.resize(),this}}Object.assign(xv.prototype,T8);var qi=function(e,t,i,n){var x=new jl(t,i,n);if(e&&!e.isRexSizer){var S=x.createGeometryMask();e.setMask(S),this.once("destroy",function(){e.setMask(),S.destroy()})}return this.pin(x),x};const E8=Phaser.GameObjects.Text;var yv=function(e){return e instanceof E8};const P8=Phaser.GameObjects.BitmapText;var nC=function(e){return e instanceof P8};const _e=0,ti=1,Ei=2;var br=function(e){var t;return nC(e)?t=Ei:yv(e)?t=_e:t=ti,t},M8=function(e,t){for(var i=[],n=e.split(`
`),x=t.style,S=x.wordWrapWidth,M=x.hasOwnProperty("wrapMode")?x.wrapMode:3,L=t.context,F=0,G=n.length;F<G;F++)A8(L,n[F],S,M,i);return i},w8=function(e,t){var i;if(t===2)i=e.split("");else{i=[];for(var n=e.split(" "),x,S=0,M=n.length;S<M;S++)x=n[S],S<M-1?_a(x)?i.push(x+" "):(i.push(...x.split("")),i.push(" ")):x!==""&&(_a(x)?i.push(x):i.push(...x.split("")))}return i},A8=function(e,t,i,n,x){if(t.length<=100){var S=e.measureText(t).width;if(S<=i)return x.push(t),x}for(var M=w8(t,n),L,F,G=[],X=i,Q=0,tt=M.length;Q<tt;Q++)L=M[Q],F=e.measureText(L).width,X-=F,X<0&&(x.push(G.join("")),G.length=0,X=i-F),G.push(L);return G.length>0&&x.push(G.join("")),x},Cv=function(e,t){var i=br(e);switch(i){case _e:switch(typeof t=="string"&&(t=Dh[t]||0),e.style.wrapMode=t,t){case 2:case 3:e.style.wordWrapCallback=M8;break;case 1:default:e.style.wordWrapCallback=null;break}break;case ti:typeof t=="string"&&(t=Dh[t]||0),e.style.wrapMode=t;break}},R8=function(e){var t=function(i){var n=e.padding,x=i-(n.left+n.right)*e.scaleX,S=e.style;return yv(e)?(S.wordWrapWidth=x,S.maxLines=0):(S.wrapMode===0&&(S.wrapMode=1),S.wrapWidth=x,S.maxLines=0),S.fixedWidth=i,S.fixedHeight=0,e.updateText(),e.minHeight=e.height,e};return t},L8=function(e){var t=function(i){return e.setFixedSize(i,0).runWordWrap(),e.minHeight=e.height,e};return t},b8=function(e){var t=function(i){return e.setMaxWidth(i),e.minHeight=e.height,e};return t},O8=function(e){return e instanceof na},su=function(e,t){return t===void 0&&(t=0),e._minWidth=t,e.runWidthWrap=O8(e)?L8(e):nC(e)?b8(e):R8(e),e};const Sv=65535;var ru=function(e,t,i){if(t==null)return e;if(t===0)return Tv(e,0,i),e;var n=e.text.length;if(n===0)return Tv(e,t,i),e;var x=Math.floor(t*1.5/n);i!==void 0&&x>i&&(x=Math.floor(i));for(var S={},M=oC(e,x,t,i,S),L=0;L<=Sv&&M!==0;L++){if(x+=M,x<0){x=0;break}M=oC(e,x,t,i,S)}return L===Sv&&console.warn(`FontSizeFit: Test count exceeds ${Sv}`),e.setFontSize(x),Tv(e,t,i),e},aC=function(e,t,i){return i[t]===void 0&&(e.setFontSize(t),i[t]={width:e.width,height:e.height}),i[t]},oC=function(e,t,i,n,x){var S=aC(e,t,x),M=aC(e,t+1,x),L;if(n!==void 0)if(S.height<=n&&M.height>n)L=0;else{if(S.height>n)return-1;L=Math.floor(n-S.height)}var F;if(S.width<=i&&M.width>i)return 0;if(S.width>i)return-1;var F=Math.floor(i-S.width);return L===void 0?F:Math.min(F,L)},Tv=function(e,t,i){var n=e.style;n&&(n.fixedWidth=t,n.parent.width=t,i!==void 0&&(n.fixedHeight=i,n.parent.height=i),n.update(!1))};const Ev=Phaser.Utils.Objects.GetValue;var nu=function(e,t){typeof t=="number"&&(t={minWidth:t});var i=Ev(t,"minWidth",0),n=Ev(t,"minHeight",0),x=Ev(t,"fitHeight",!1);return e._minWidth=i,e._minHeight=n,x?(e.runWidthWrap=function(S){return e.setFixedSize&&e.setFixedSize(0,0),e.setFontSize(1),e},e.resize=function(S,M){return ru(e,S,M),e}):(e.runWidthWrap=function(S){return e.setFixedSize&&e.setFixedSize(0,0),ru(e,S,void 0),e},e.resize=function(S,M){return e.width===S&&e.height===M||e.setFixedSize(S,M),e}),e};const ee=Phaser.Utils.Objects.GetValue;class Hs extends xv{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexLabel";var n=ee(i,"background",void 0),x=ee(i,"icon",void 0),S=ee(i,"iconMask",void 0),M=ee(i,"text",void 0),L=ee(i,"action",void 0),F=ee(i,"actionMask",void 0),G=ee(i,"align",void 0);if(n&&this.addBackground(n),x){var X;this.orientation===0?(M||L)&&(X={right:ee(i,"space.icon",0),top:ee(i,"space.iconTop",0),bottom:ee(i,"space.iconBottom",0),left:ee(i,"space.iconLeft",0)}):(M||L)&&(X={bottom:ee(i,"space.icon",0),left:ee(i,"space.iconLeft",0),right:ee(i,"space.iconRight",0),top:ee(i,"space.iconTop",0)});var Q=ee(i,"squareFitIcon",!1)?1:0;if(this.add(x,{proportion:0,padding:X,fitRatio:Q}),S&&(S=qi.call(this,x,x,1)),!Q){var tt=ee(i,"iconSize",void 0);this.setIconSize(ee(i,"iconWidth",tt),ee(i,"iconHeight",tt))}}if(M){var _=ee(i,"wrapText",!1),nt=ee(i,"adjustTextFontSize",!1);_?(_===!0&&(_="word"),Cv(M,_),i.expandTextWidth=!0,su(M)):nt&&(i.expandTextWidth=!0,i.expandTextHeight=!0,nu(M,{fitHeight:!0}));var lt=ee(i,"space.text",0),ot=ee(i,"expandTextWidth",!1),dt=ee(i,"expandTextHeight",!1),ct,X,ft;this.orientation===0?(ct=ot?1:0,L&&(X={right:lt}),ft=dt):(ct=dt?1:0,L&&(X={bottom:lt}),ft=ot),this.add(M,{proportion:ct,expand:ft,padding:X})}if(L){var X;this.orientation===0?X={top:ee(i,"space.actionTop",0),bottom:ee(i,"space.actionBottom",0),right:ee(i,"space.actionRight",0)}:X={left:ee(i,"space.actionLeft",0),right:ee(i,"space.actionRight",0),bottom:ee(i,"space.actionBottom",0)};var Q=ee(i,"squareFitAction",!1)?1:0;if(this.add(L,{proportion:0,padding:X,fitRatio:Q}),F&&(F=qi.call(this,L,L,1)),!Q){var xt=ee(i,"actionSize");this.setActionSize(ee(i,"actionWidth",xt),ee(i,"actionHeight",xt))}}this.setChildrenAlignMode(G),this.addChildrenMap("background",n),this.addChildrenMap("icon",x),this.addChildrenMap("iconMask",S),this.addChildrenMap("text",M),this.addChildrenMap("action",L),this.addChildrenMap("actionMask",F)}}const Or=Phaser.Utils.Objects.GetValue;var F8=function(e,t){var i=Or(t,"canvas"),n=Or(i,"width",128),x=Or(i,"height",128),S=new xn(e,0,0,n,x);e.add.existing(S);var M=Or(i,"key"),L=Or(i,"frame"),F=Or(i,"fill");return F!==void 0?S.fill(F):M!==void 0&&S.loadTexture(M,L),S.setTexture=S.loadTexture.bind(S),S},D8=function(e,t){var i=new tu(e,{scaleUp:Or(t,"scaleUpIcon",!1),background:Or(t,"iconBackground"),image:F8(e,t)});return e.add.existing(i),i};const B8=Phaser.Utils.Objects.GetValue;var hC=function(e,t){var i=B8(t,"clickTarget",this);return typeof i=="string"&&(i=e.getElement(i)),i};const I8=Phaser.Utils.Objects.GetValue;var G8=function(e,t){var i=hC(e,t);if(i){var n=I8(t,"click"),x=new us(i,n);return x.on("click",e.open,e),x}};const lC={accept:"image/*",multiple:!1};var uC=function(e,t){if(t.length!==0){var i=e.childrenMap.icon,n=i.image,x=t[0];return n.loadFromFilePromise(x).then(function(){return i.scaleImage(),e.emit("select",x,e),Promise.resolve(x)})}},k8=function(e,t){var i=e.scene,n=new $o(i,lC);return i.add.existing(n),e.pin(n),n.on("change",function(){uC(e,n.files)}),n},N8={async openPromise(){var e=this;return Zy(this.scene.game,lC).then(function(t){return uC(e,t.files)})},open(){return this.openPromise(),this},setClickOpenEnable(e){return e===void 0&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}},z8=function(e){if(!e)return null;var t=e.name;return t.substr(0,t.lastIndexOf("."))},U8=function(e){var t=this.childrenMap.canvas;return t.generateTexture(e),this},dC={getFileName:z8,saveTexture:U8};Object.assign(dC,N8);const V8=Phaser.Utils.Objects.GetValue;class Pv extends Hs{constructor(t,i){var n=D8(t,i);i.icon=n,super(t,i),this.type="rexImageFileInputLabel";var x=this.iconWidth,S=this.iconWidth;x!==void 0&&S!==void 0&&n.resize(x,S),this.clickTarget=hC(this,i),this.clickTarget&&(V8(i,"domButton",!0)?this.fileChooser=k8(this):this.clickBehavior=G8(this,i)),this.addChildrenMap("canvas",n.image),this.addChildrenMap("iconBackground",n.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(t,i,n){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser)),super.postLayout(t,i,n)}}Object.assign(Pv.prototype,dC),W.register("imageInputLabel",function(e){var t=new Pv(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ImageInputLabel",Pv);let X8=class extends ye{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(re(t,i))return t[i];var n=t.parent;if(re(n,i))return n[i]}set(t,i,n){return re(t,i)?t[i]=n:re(t.parent,i)&&(t.parent[i]=n),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.parent.setFrame(t)}get scale(){return this.parent.scaleX}set scale(t){this.parent.setScale(t)}};const Mv=Phaser.Utils.Objects.GetValue;class W8 extends ye{constructor(t,i){super(t,i),this.style=Mv(i,"style",this);var n=Mv(i,"propertiesMap");this.activeStyle=wv(i,"active",n),this.hoverStyle=wv(i,"hover",n),this.disableStyle=wv(i,"disable",n),this.onModifyStyle=Mv(i,"onModifyStyle")}getStyle(t){return rl(this.style,t)}modifyStyle(t){for(var i in t)this.style[i]=t[i];return this.onModifyStyle&&this.onModifyStyle(this.parent,t),this}applyStyle(t){if(t){var i=this.getStyle(t);if(!mo(i,t))return this.modifyStyle(t),i}}setActiveState(t){return Av.call(this,"active",t),this}setHoverState(t){return Av.call(this,"hover",t),this}setDisableState(t){return Av.call(this,"disable",t),this}}var wv=function(e,t,i){var n=sl(e,t);if(i)for(var x in n)i.hasOwnProperty(x)&&(n[i[x]]=n[x],delete n[x]);return n},Av=function(e,t){t===void 0&&(t=!0);var i=`${e}State`,n=`${e}Style`,x=`${e}StyleSave`;this[i]!==t&&(this[i]=t,t?this[x]=this.applyStyle(this[n]):(this.applyStyle(this[x]),this[x]=void 0))},Ln={addStyleManager(e){return this.styleManager=new W8(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}};const Y8=Phaser.GameObjects.Image,Ko=Phaser.Utils.Objects.GetValue;class Zo extends Y8{constructor(t,i){i===void 0&&(i={});var n=Ko(i,"x",0),x=Ko(i,"y",0),S=Ko(i,"key",""),M=Ko(i,"frame",void 0);super(t,n,x,S,M),this.type="rexStatesImage";var L=Ko(i,"effects",!0);L&&aa(this,L),this.style=new X8(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}}Object.assign(Zo.prototype,Ln),W.register("statesImage",function(e){var t=new Zo(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.StatesImage",Zo);class Jo extends hn{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexStatesRoundRectangleShape",i.style=this,i.propertiesMap=H8,this.addStyleManager(i),delete i.style,delete i.propertiesMap}}const H8={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(Jo.prototype,Ln),W.register("statesRoundRectangle",function(e){var t=new Jo(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.StatesRoundRectangle",Jo);let $8=class extends ye{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(re(t,i))return t[i];var n=t.parent;if(re(n,i))return n[i]}set(t,i,n){return re(t,i)?t[i]=n:re(t.parent,i)&&(t.parent[i]=n),!0}get key(){return this.parent.texture.key}set key(t){this.key!==t&&this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.frame!==t&&this.parent.setFrame(t)}};const K8=Phaser.GameObjects.NineSlice,_i=Phaser.Utils.Objects.GetValue;class Qo extends K8{constructor(t,i){i===void 0&&(i={});var n=_i(i,"x",0),x=_i(i,"y",0),S=_i(i,"key",null),M=_i(i,"frame",null),L=_i(i,"width",0),F=_i(i,"height",0),G=_i(i,"leftWidth",0),X=_i(i,"rightWidth",0),Q=_i(i,"topHeight",0),tt=_i(i,"bottomHeight",0);super(t,n,x,S,M,L,F,G,X,Q,tt),this.type="rexStatesNineSlice";var _=_i(i,"effects",!0);_&&aa(this,_),this.style=new $8(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}}Object.assign(Qo.prototype,Ln),W.register("statesNineSlice",function(e){var t=new Qo(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.StatesNineSlice",Qo);let Z8=class extends ye{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(re(t,i))return t[i];var n=t.parent;if(re(n,i))return n[i]}set(t,i,n){return re(t,i)?t[i]=n:re(t.parent,i)&&(t.parent[i]=n),!0}get key(){return this.parent.textureKey}set key(t){this.key!==t&&this.parent.setBaseTexture(t,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(t){this.frame!==t&&this.parent.setBaseTexture(this.parent.textureKey,t)}};const J8=Phaser.Utils.Objects.GetValue;class jo extends k{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexStatesNinePatch";var n=J8(i,"effects",!0);n&&aa(this,n),this.style=new Z8(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}}Object.assign(jo.prototype,Ln),W.register("statesNinePatch",function(e){var t=new jo(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.StatesNinePatch",jo);const Q8=Phaser.GameObjects.Text,Rv=Phaser.Utils.Objects.GetValue;class au extends Q8{constructor(t,i){i===void 0&&(i={});var n=Rv(i,"x",0),x=Rv(i,"y",0),S=Rv(i,"text","");super(t,n,x,S,i),this.type="rexStatesText",i.style=this.style,i.onModifyStyle=function(M,L){var F=L.hasOwnProperty("fontStyle")||L.hasOwnProperty("fontSize")||L.hasOwnProperty("fontFamily");M.style.update(F)},this.addStyleManager(i),delete i.style}}Object.assign(au.prototype,Ln),W.register("statesText",function(e){var t=new au(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.StatesText",au);class j8 extends ye{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(re(t,i))return t[i];var n=t.parent;if(re(n,i))return n[i]}set(t,i,n){return re(t,i)?t[i]=n:re(t.parent,i)&&(t.parent[i]=n),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(t){this.parent.setFontSize(t)}get tint(){return this.parent.tintTopLeft}set tint(t){this.parent.setTint(t)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(t){this.parent.setLetterSpacing(t)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(t){this.parent.setLineSpacing(t)}}const q8=Phaser.GameObjects.BitmapText,bn=Phaser.Utils.Objects.GetValue;class ou extends q8{constructor(t,i){i===void 0&&(i={});var n=bn(i,"x",0),x=bn(i,"y",0),S=bn(i,"font",""),M=bn(i,"fontSize",!1),L=bn(i,"align",0),F=bn(i,"tint");super(t,n,x,S,"",M,L),this.type="rexStatesBitmapText",F!==void 0&&this.setTint(F);var G=bn(i,"effects",!0);G&&aa(this,G),this.style=new j8(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}}Object.assign(ou.prototype,Ln),W.register("statesBitmapText",function(e){var t=new ou(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.StatesBitmapText",ou);class hu extends vl{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("value")||(i.value=0),i.hasOwnProperty("hover.bar")||(i["hover.bar"]=!0),i.hasOwnProperty("easeDuration")||(i.easeDuration=200),i.hasOwnProperty("ease")||(i.ease="Quad"),J(i,"easeValue.duration",i.easeDuration),J(i,"easeValue.ease",i.ease),super(t,i),this.type="rexStatesBarRectangleShape",this.barState=!1,i.style=this,i.propertiesMap=_8,this.addStyleManager(i),delete i.style,delete i.propertiesMap}get bar(){return this.barState}set bar(t){t=!!t,this.barState!==t&&(this.barState=t,this.easeValueTo(this.barState?1:0))}}const _8={color:"trackColor",strokeColor:"trackStrokeColor",strokeWidth:"trackStrokeThickness"};Object.assign(hu.prototype,Ln),W.register("statesBarRectangle",function(e){var t=new hu(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.StatesBarRectangle",hu);var tG=function(e){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,eG(this,e)),this},eG=function(e,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var i=t.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var n=!1;i.animation===void 0?i.animation={}:i.animation===!1&&(n=!0,i.animation={});var x=i.animation;n&&(x.duration=0);var S=x.onProgress;x.onProgress=function(L){S&&S(L),e.needRedraw()};var M=x.onComplete;return x.onComplete=function(L){M&&M(L),e.needRedraw()},t},iG=function(e){if(this.chart!==void 0)if(typeof e=="string"){for(var t=this.chart.data.datasets,i,n=0,x=t.length;n<x;n++)if(i=t[n],i.label===e)return i}else return this.chart.data.datasets[e]},sG=function(e,t){var i=this.getChartDataset(e);if(i!==void 0){if(typeof t=="string"){var n=this.chart.data.labels;if(t=n.indexOf(t),t===-1)return}return i.data[t]}},rG=function(e,t,i){if(this.chart===void 0)return this;var n=this.getChartDataset(e);if(typeof t=="string"){var x=this.chart.data.labels;if(t=x.indexOf(t),t===-1)return this}return n.data[t]=i,this},nG=function(){return this.chart===void 0?this:(this.chart.update(),this)};let Lv=class extends xn{constructor(t,i,n,x,S,M){super(t,i,n,x,S),this.type="rexChart",this.chart=void 0,M!==void 0&&this.setChart(M)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,i){if(t===this.width&&i===this.height)return this;if(super.resize(t,i),this.chart){var n=this.chart;n.height=this.canvas.height,n.width=this.canvas.width,n.aspectRatio=n.height?n.width/n.height:null,n.update()}return this}};var aG={setChart:tG,getChartDataset:iG,getChartData:sG,setChartData:rG,updateChart:nG};Object.assign(Lv.prototype,aG),W.register("chart",function(e,t,i,n,x){var S=new Lv(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.Chart",Lv),W.register("container",function(e,t,i,n,x){var S=new Ci(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.Container",Ci),W.register("sizer",function(e,t,i,n,x,S){var M=new qt(this.scene,e,t,i,n,x,S);return this.scene.add.existing(M),M}),J(window,"RexPlugins.UI.Sizer",qt);var fC=function(){return Array.prototype.reduce.call(arguments,oG,0)},oG=function(e,t){return e+t},hG=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i,n=this.sizerChildren,x,S,M,L,F=!1;this.totalColumnProportions;for(var G=0;G<this.columnCount;G++){if(L=this.columnProportions[G],i=0,L===0||e){for(var X=0;X<this.rowCount;X++)x=n[X*this.columnCount+G],x&&(x.rexSizer.hidden||(M=this.getChildWidth(x),M===void 0&&(L!==0&&!this.hasColumnProportion0Child?M=0:F=!0),!F&&(S=x.rexSizer.padding,M+=(S.left+S.right)*this.scaleX,i=Math.max(i,M))));F||(t+=i)}F||e&&(this.columnWidth[G]=i)}if(!F){var Q=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven),tt=fC(this.space.left,Q,...this.space.column,this.space.right);return t+tt*this.scaleX}},lG=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i,n=this.sizerChildren,x,S,M,L,F=!1;this.totalRowProportions;for(var G=0;G<this.rowCount;G++){if(L=this.rowProportions[G],i=0,L===0||e){for(var X=0;X<this.columnCount;X++)x=n[G*this.columnCount+X],x&&(x.rexSizer.hidden||(M=this.getChildHeight(x),M===void 0&&(L!==0&&!this.hasRowProportion0Child?M=0:F=!0),!F&&(S=x.rexSizer.padding,M+=(S.top+S.bottom)*this.scaleY,i=Math.max(i,M))));F||(t+=i)}F||e&&(this.rowHeight[G]=i)}if(!F){var Q=Math.max(this.space.indentTopOdd,this.space.indentTopEven),tt=fC(this.space.top,Q,...this.space.row,this.space.bottom);return t+tt*this.scaleY}},uG=function(e,t){var i,n=e.rexSizer;if(n.expandWidth){var x=n.padding;i=t-(x.left+x.right)*this.scaleX}return i},dG=function(e,t){var i,n=e.rexSizer;if(n.expandHeight){var x=n.padding;i=t-(x.top+x.bottom)*this.scaleY}return i},fG=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,n=0,x=t.length;n<x;n++)i=t[n],i&&i.isRexSizer&&e.push(i);return e},cG=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Bo.call(this),this},vG=function(){for(var e,t,i,n=this.innerLeft,x=this.innerTop,S,M=x,L,F,G,X,Q,tt,_,nt,lt,ot,dt,ct,ft=0;ft<this.rowCount;ft++){ot=this.getRowHeight(ft),dt=ft%2?this.space.indentLeftEven:this.space.indentLeftOdd,S=n+dt*this.scaleX;for(var xt=0;xt<this.columnCount;xt++){if(lt=this.getColumnWidth(xt),e=this.getChildAt(xt,ft),!e||e.rexSizer.hidden){S+=lt+this.space.column[xt]*this.scaleX;continue}ko.call(this,e),_=this.getExpandedChildWidth(e,lt),nt=this.getExpandedChildHeight(e,ot),e.isRexSizer?(e.runLayout(this,_,nt),Qc(e,this)):qe(e,_,nt),t=e.rexSizer,i=t.padding,L=S+i.left*this.scaleX,G=lt-(i.left+i.right)*this.scaleX,ct=xt%2?this.space.indentTopEven:this.space.indentTopOdd,F=M+ct*this.scaleY+i.top*this.scaleY,X=ot-(i.top+i.bottom)*this.scaleY,_===void 0&&(_=_t(e)),nt===void 0&&(nt=te(e)),Q=(t.alignOffsetX+t.alignOffsetOriginX*_)*this.scaleX,tt=(t.alignOffsetY+t.alignOffsetOriginY*nt)*this.scaleY,No.call(this,e,L,F,G,X,t.align,Q,tt),S+=lt+this.space.column[xt]*this.scaleX}M+=ot+this.space.row[ft]*this.scaleY}},pG=function(t){var t=yc.call(this,t);if(t!==void 0&&this.proportionWidthLength===void 0){var i=this.totalColumnProportions;if(i>0){var n=t-this.getChildrenWidth(!1);n>=0&&(this.proportionWidthLength=n/i)}else this.proportionWidthLength=0}return t},gG=function(t){var t=Tc.call(this,t);if(t!==void 0&&this.proportionHeightLength===void 0){var i=this.totalRowProportions;if(i>0){var n=t-this.getChildrenHeight(!1);n>=0&&(this.proportionHeightLength=n/i)}else this.proportionHeightLength=0}return t},mG=function(e){var t,i,n,x;for(var S in this.sizerChildren)t=this.sizerChildren[S],t&&t.isRexSizer&&!t.ignoreLayout&&(x=this.getColumnWidth(parseInt(S)%this.columnCount),i=this.getExpandedChildWidth(t,x),n=t.resolveWidth(i),n===void 0&&(n=i),t.resolveChildrenWidth(n))},xG=function(e){var t,i,n,x;for(var S in this.sizerChildren)t=this.sizerChildren[S],t&&t.isRexSizer&&!t.ignoreLayout&&(x=this.getRowHeight(Math.floor(parseInt(S)/this.rowCount)),i=this.getExpandedChildHeight(t,x),n=t.resolveHeight(i),n===void 0&&(n=i),t.resolveChildrenHeight(n))},yG=function(e){var t,i,n,x;for(var S in this.sizerChildren)t=this.sizerChildren[S],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(x=this.getColumnWidth(parseInt(S)%this.columnCount),i=this.getExpandedChildWidth(t,x),t.isRexSizer&&(n=t.resolveWidth(i),n===void 0&&(n=i)),t.runWidthWrap(n));return this},CG=function(e){var t,i,n,x;for(var S in this.sizerChildren)t=this.sizerChildren[S],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(x=this.getRowHeight(Math.floor(parseInt(S)/this.rowCount)),i=this.getExpandedChildHeight(t,x),t.isRexSizer&&(n=t.resolveHeight(i),n===void 0&&(n=i)),t.runHeightWrap(n));return this};const cC=Phaser.Utils.Objects.IsPlainObject,Ni=Phaser.Utils.Objects.GetValue,vC=Phaser.Display.Align.CENTER;var pC=function(e,t,i,n,x){if(typeof e=="number"||typeof t=="number")if(e===void 0){for(var S,M=0;M<n;M++)if(S=t*n+M,!i[S])return S}else if(t===void 0){for(var S,M=0;M<x;M++)if(S=M*n+e,!i[S])return S}else{var S=t*n+e;if(!i[S])return S}else if(t===!0){for(var S,M=0;M<n;M++)for(var L=0;L<x;L++)if(S=L*n+M,!i[S])return S}else for(var M=0,F=i.length;M<F;M++)if(!i[M])return M;return null},SG=function(e,t,i,n,x,S,M){var L,F,G,X;if(Fo.call(this,e),cC(t)){var tt=t;t=Ni(tt,"column",void 0),i=Ni(tt,"row",void 0),n=Ni(tt,"align",vC),x=Ni(tt,"padding",0),S=Ni(tt,"expand",!1),M=Ni(tt,"key",void 0),L=Ni(tt,"offsetX",0),F=Ni(tt,"offsetY",0),G=Ni(tt,"offsetOriginX",0),X=Ni(tt,"offsetOriginY",0)}var Q=pC(t,i,this.sizerChildren,this.columnCount,this.rowCount);if(Q===null){if(typeof t=="number"&&typeof i=="number")return this;i===!0||typeof i=="number"?this.addEmptyColumn():this.addEmptyRow(),Q=pC(t,i,this.sizerChildren,this.columnCount,this.rowCount)}typeof n=="string"&&(n=Ea[n]),n===void 0&&(n=vC),x===void 0&&(x=0),S===void 0&&(S=!0),L===void 0&&(L=0),F===void 0&&(F=0),G===void 0&&(G=0),X===void 0&&(X=0);var tt=this.getSizerConfig(e);return tt.align=n,tt.padding=Pn(x),cC(S)?(tt.expandWidth=Ni(S,"width",!1),tt.expandHeight=Ni(S,"height",!1)):(tt.expandWidth=S,tt.expandHeight=S),tt.alignOffsetX=L,tt.alignOffsetY=F,tt.alignOffsetOriginX=G,tt.alignOffsetOriginY=X,this.sizerChildren[Q]=e,M!==void 0&&this.addChildrenMap(M,e),this},TG={add:SG},Ba=function(e,t,i,n){i===void 0&&(i=0),n===void 0&&(n=e.length-1);for(var x=i;x<=n;x++)e[x]=t;return e},EG={remove(e,t){if(this.getParentSizer(e)!==this)return this;var i=this.sizerChildren.indexOf(e);return i!==-1&&(this.sizerChildren[i]=null),Do.call(this,e,t),this},removeAt(e,t,i){var n=this.getChildAt(e,t);return n&&this.remove(n,i),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var i=this.sizerChildren[t];i&&this.remove(i,e)}return this},clear(e){return Ba(this.sizerChildren,null),Hl.call(this,e),this}},PG={setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,typeof e=="number")this.space.column0=e,Ba(this.space.column,e);else{this.space.column0=e[0];for(var t=0,i=this.columnCount-1;t<i;t++)this.space.column[t]=e[t]||0}return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,typeof e=="number")this.space.row0=e,Ba(this.space.row,e);else{this.space.row0=e[t];for(var t=0,i=this.rowCount-1;t<i;t++)this.space.row[t]=e[t]||0}return this},setIndentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this},setIndentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}};const gC=Phaser.Utils.Objects.GetValue;var MG=function(e,t,i,n,x){if(e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.removeAll(),this.sizerChildren.length=e*t,Ba(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,typeof i=="number")Ba(this.columnProportions,i);else for(var S=0;S<e;S++)this.columnProportions[S]=i[S]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof n=="number")Ba(this.rowProportions,n);else for(var S=0;S<t;S++)this.rowProportions[S]=n[S]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(gC(x,"column",0)),this.setRowSpace(gC(x,"row",0));var M=this.scene,L=this.createCellContainerCallback;if(L)for(var F=0,G=this.rowCount;F<G;F++)for(var X=0,Q=this.columnCount;X<Q;X++){var tt={column:X,row:F},_=L(M,X,F,tt);_&&this.add(_,tt)}return this},mC=function(e,t,i){t===void 0&&(t=this.rowProportions[0]||0),i===void 0&&(i=this.space.row0||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var n=[e*this.columnCount,0],x=0;x<this.columnCount;x++)n.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,n),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,i),this},wG=function(e,t){return mC.call(this,this.rowCount,e,t),this},xC=function(e,t,i){t===void 0&&(t=this.columnProportions[0]||0),i===void 0&&(i=this.space.column0||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var n=this.rowCount-1;n>=0;n--){var x=n*this.columnCount+e;this.sizerChildren.splice(x,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,i),this},AG=function(e,t){return xC.call(this,this.columnCount,e,t),this},yC={getChildrenWidth:hG,getChildrenHeight:lG,getExpandedChildWidth:uG,getExpandedChildHeight:dG,getChildrenSizers:fG,preLayout:cG,layoutChildren:vG,resolveWidth:pG,resolveHeight:gG,resolveChildrenWidth:mG,resolveChildrenHeight:xG,runWidthWrap:yG,runHeightWrap:CG,resetGrid:MG,insertEmptyRow:mC,addEmptyRow:wG,insertEmptyColumn:xC,addEmptyColumn:AG};Object.assign(yC,TG,EG,PG,gv);var RG=function(){for(var e=0,t,i=0;i<this.columnCount;i++)t=this.columnProportions[i],t>0?e+=t:t===0&&(this.hasColumnProportion0Child=!0);return e},LG=function(){for(var e=0,t,i=0;i<this.rowCount;i++)t=this.rowProportions[i],t>0?e+=t:t===0&&(this.hasRowProportion0Child=!0);return e};const lu=Phaser.Utils.Objects.IsPlainObject,ce=Phaser.Utils.Objects.GetValue;class ts extends Rn{constructor(t,i,n,x,S,M,L,F,G,X){lu(i)?(X=i,i=ce(X,"x",0),n=ce(X,"y",0),x=ce(X,"width",void 0),S=ce(X,"height",void 0),M=ce(X,"column",X.col||0),L=ce(X,"row",0),F=ce(X,"columnProportions",0),G=ce(X,"rowProportions",0)):lu(x)?(X=x,x=ce(X,"width",void 0),S=ce(X,"height",void 0),M=ce(X,"column",X.col||0),L=ce(X,"row",0),F=ce(X,"columnProportions",0),G=ce(X,"rowProportions",0)):lu(M)?(X=M,M=ce(X,"column",X.col||0),L=ce(X,"row",0),F=ce(X,"columnProportions",0),G=ce(X,"rowProportions",0)):lu(F)&&(X=F,F=ce(X,"columnProportions",0),G=ce(X,"rowProportions",0)),super(t,i,n,x,S,X),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(ce(X,"createCellContainerCallback")),this.setIndentLeft(ce(X,"space.indentLeftOdd",0),ce(X,"space.indentLeftEven",0)),this.setIndentTop(ce(X,"space.indentTopOdd",0),ce(X,"space.indentTopEven",0)),this.resetGrid(M,L,F,G,ce(X,"space",void 0))}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(t,i){return t>=this.columnProportions.length?this:(this.columnProportions[t]=i,this)}setRowProportion(t,i){return t>=this.rowProportions.length?this:(this.rowProportions[t]=i,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=RG.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=LG.call(this)),this._totalRowProportions}getChildAt(t,i){return this.sizerChildren[i*this.columnCount+t]}childToGridIndex(t,i){if(!t)return null;var n=this.sizerChildren.indexOf(t);return n===-1?null:(i===void 0&&(i={}),i.x=n%this.columnCount,i.y=Math.floor(n/this.columnCount),i)}getColumnWidth(t){var i=this.columnProportions[t],n=i===0?this.columnWidth[t]:i*this.proportionWidthLength;return n}getRowHeight(t){var i=this.rowProportions[t],n=i===0?this.rowHeight[t]:i*this.proportionHeightLength;return n}setCreateCellContainerCallback(t){return this.createCellContainerCallback=t,this}}Object.assign(ts.prototype,yC),W.register("gridSizer",function(e,t,i,n,x,S,M,L,F){var G=new ts(this.scene,e,t,i,n,x,S,M,L,F);return this.scene.add.existing(G),G}),J(window,"RexPlugins.UI.GridSizer",ts);var bG=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===0?e?t=this.maxChildWidth:t=this.rexSizer.resolved?this.wrapResult.width:void 0:t=this.rexSizer.resolved?this.wrapResult.width:void 0,t!==void 0)return t+(this.space.left+this.space.right)*this.scaleX},OG=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===1?e?t=this.maxChildHeight:t=this.rexSizer.resolved?this.wrapResult.height:void 0:t=this.rexSizer.resolved?this.wrapResult.height:void 0,t!==void 0)return t+(this.space.top+this.space.bottom)*this.scaleY},FG=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,n=0,x=t.length;n<x;n++)i=t[n],i!==`
`&&i.isRexSizer&&e.push(i);return e},DG=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,Bo.call(this),this},BG=function(){for(var e=this.orientation===0,t=e?this.innerWidth:this.innerHeight,i,n,x,S=0,M,L,F=this.innerLeft,G=this.innerTop,X,Q,tt,_,nt,lt,ot=this.wrapResult.lines,dt,ct,ft,xt=F,St=G,Pt=0,wt=ot.length;Pt<wt;Pt++){switch(dt=ot[Pt],ct=dt.children,this.rtl&&ct.reverse(),e?(M=Pt%2?this.space.indentLeftEven:this.space.indentLeftOdd,xt=F+M*this.scaleX):(L=Pt%2?this.space.indentTopEven:this.space.indentTopOdd,St=G+L*this.scaleY),ft=t-(e?dt.width:dt.height),this.align){case 0:break;case 1:e?xt+=ft:St+=ft;break;case 2:e?xt+=ft/2:St+=ft/2;break;case 3:S=bv(t,ft,this.justifyPercentage,ct.length);break;case 4:S=bv(t,ft,this.justifyPercentage,ct.length),S===0&&(e?xt+=ft:St+=ft);break;case 5:S=bv(t,ft,this.justifyPercentage,ct.length),S===0&&(e?xt+=ft/2:St+=ft/2);break}for(var bt=!0,kt=0,Dt=ct.length;kt<Dt;kt++)i=ct[kt],!i.rexSizer.hidden&&(n=i.rexSizer,x=n.padding,ko.call(this,i),e?X=xt+x.left*this.scaleX:Q=St+x.top*this.scaleY,bt?bt=!1:e?X+=this.space.item*this.scaleX:Q+=this.space.item*this.scaleY,tt=_t(i),_=te(i),e?(L=kt%2?this.space.indentTopEven:this.space.indentTopOdd,Q=St+L*this.scaleY+x.top*this.scaleY,xt=X+tt+x.right*this.scaleX+S):(M=kt%2?this.space.indentLeftEven:this.space.indentLeftOdd,X=xt+M*this.scaleX+x.left*this.scaleX,St=Q+_+x.top*this.scaleY+S),nt=(n.alignOffsetX+n.alignOffsetOriginX*tt)*this.scaleX,lt=(n.alignOffsetY+n.alignOffsetOriginY*_)*this.scaleY,No.call(this,i,X,Q,tt,_,n.align,nt,lt));e?St+=dt.height+this.space.line*this.scaleY:xt+=dt.width+this.space.line*this.scaleX}},bv=function(e,t,i,n){return t/e<=i?t/(n-1):0},IG=function(){return this.orientation===0?!0:Cc.call(this)},CC=function(e){var t={lines:[],width:0,height:0},i=this.sizerChildren,n,x,S,M,L=0,F,G,X=t.lines,Q=void 0,tt;if(this.orientation===0){for(var _=0,nt=i.length;_<nt;_++){if(n=i[_],n===`
`)n=void 0,S=0,tt=!0;else{if(n.rexSizer.hidden)continue;n.isRexSizer&&n.runLayout(this),S=this.getChildWidth(n),x=n.rexSizer.padding,S+=(x.left+x.right)*this.scaleX,tt=L<S||Q===void 0}tt&&(Q&&(Q.width=e-(L+this.space.item*this.scaleX),t.width=Math.max(t.width,Q.width),t.height+=Q.height+this.space.line*this.scaleY),Q={children:[],width:0,height:0},X.push(Q),F=X.length%2?this.space.indentLeftOdd:this.space.indentLeftEven,L=e-F*this.scaleX),L-=S+this.space.item*this.scaleX,n&&(Q.children.push(n),M=this.getChildHeight(n),x=n.rexSizer.padding,M+=(x.top+x.bottom)*this.scaleY,Q.height=Math.max(Q.height,M))}Q&&(Q.width=e-(L+this.space.item*this.scaleX),t.width=Math.max(t.width,Q.width),t.height+=Q.height),t.height+=Math.max(this.space.indentTopOdd,this.space.indentTopEven)*this.scaleY}else{for(var lt=e,_=0,nt=i.length;_<nt;_++){if(n=i[_],n===`
`)n=void 0,S=0,tt=!0;else{if(n.rexSizer.hidden)continue;n.isRexSizer&&n.layout(),M=this.getChildHeight(n),x=n.rexSizer.padding,M+=(x.top+x.bottom)*this.scaleY,tt=L<M||Q===void 0}tt&&(Q&&(Q.height=lt-(L+this.space.item*this.scaleY),t.height=Math.max(t.height,Q.height),t.width+=Q.width+this.space.line*this.scaleX),Q={children:[],width:0,height:0},X.push(Q),G=X.length%2?this.space.indentTopOdd:this.space.indentTopEven,L=lt-G*this.scaleY),L-=M+this.space.item*this.scaleY,n&&(Q.children.push(n),S=this.getChildWidth(n),x=n.rexSizer.padding,S+=(x.left+x.right)*this.scaleX,Q.width=Math.max(Q.width,S))}Q&&(Q.height=lt-(L+this.space.item*this.scaleY),t.height=Math.max(t.height,Q.height),t.width+=Q.width),t.width+=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven)*this.scaleX}return t},GG=function(e){if(!this.wrapResult&&this.orientation===0){var t=e-(this.space.left+this.space.right)*this.scaleX;this.wrapResult=CC.call(this,t),this.rexSizer.resolved=!0,Sc.call(this,e)}},kG=function(){return this.orientation===1?!0:Ec.call(this)},NG=function(e){if(!this.wrapResult&&this.orientation===1){var t=e-(this.space.top+this.space.bottom)*this.scaleY;this.wrapResult=CC.call(this,t),this.rexSizer.resolved=!0,Pc.call(this,e)}},zG=function(e,t){},UG=function(e,t){};const SC=Phaser.Math.Distance.Between;var VG=function(e,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var n=-1,x=1/0,S=0,M=i.length;S<M;S++){var L=i[S];if(!(Math.abs(L.centerY-t)>L.height/2)){var G=SC(L.left,L.centerY,e,t);x>G&&(x=G,n=S);var F=i[S+1];if(!(F&&F.y===L.y)){var G=SC(L.right,L.centerY,e,t);x>G&&(x=G,n=S+1)}}}return n};const XG=Phaser.Utils.Objects.IsPlainObject,On=Phaser.Utils.Objects.GetValue,WG=Phaser.Display.Align.CENTER;var Ov=function(e,t,i,n){if(e===`
`)return this.addNewLine(),this;var x,S,M,L;if(Fo.call(this,e),XG(t)){var F=t;t=On(F,"padding",0),i=On(F,"key",void 0),n=On(F,"index",void 0),x=On(F,"offsetX",0),S=On(F,"offsetY",0),M=On(F,"offsetOriginX",0),L=On(F,"offsetOriginY",0)}t===void 0&&(t=0),x===void 0&&(x=0),S===void 0&&(S=0),M===void 0&&(M=0),L===void 0&&(L=0);var F=this.getSizerConfig(e);return F.align=WG,F.padding=Pn(t),F.alignOffsetX=x,F.alignOffsetY=S,F.alignOffsetOriginX=M,F.alignOffsetOriginY=L,n===void 0||n>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(n,0,e),i!==void 0&&this.addChildrenMap(i,e),this},YG={add(e,t,i){if(Zi(e))for(var n=e,x=0,S=n.length;x<S;x++)Ov.call(this,n[x],t);else Ov.call(this,e,t,i);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(e,t,i,n){return Ov.call(this,t,i,n,e),this},insertAtPosition(e,t,i,n,x){var S=VG.call(this,e,t);return S===-1&&(S=void 0),this.insert(S,i,n,x),this}};const HG=Phaser.Utils.Array.Remove;var $G={remove(e,t){return this.getParentSizer(e)!==this?this:(HG(this.sizerChildren,e),Do.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Hl.call(this,e),this}},TC={getChildrenWidth:bG,getChildrenHeight:OG,getChildrenSizers:FG,preLayout:DG,layoutChildren:BG,hasWidthWrap:IG,runWidthWrap:GG,hasHeightWrap:kG,runHeightWrap:NG,getExpandedChildWidth:zG,getExpandedChildHeight:UG};Object.assign(TC,YG,$G,gv);var KG=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,i,n,x=!1,S=0,M=e.length;S<M;S++)i=e[S],i!==`
`&&(n=this.getChildWidth(i),n===void 0&&(x=!0),!x&&(t=Math.max(n,t)));if(!x)return t},ZG=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,i,n,x=!1,S=0,M=e.length;S<M;S++)i=e[S],i!==`
`&&(n=this.getChildHeight(i),n===void 0&&(x=!0),!x&&(t=Math.max(n,t)));if(!x)return t};const EC=Phaser.Utils.Objects.IsPlainObject,ei=Phaser.Utils.Objects.GetValue;class Fr extends Rn{constructor(t,i,n,x,S,M){EC(i)?(M=i,i=ei(M,"x",0),n=ei(M,"y",0),x=ei(M,"width",void 0),S=ei(M,"height",void 0)):EC(x)&&(M=x,x=ei(M,"width",void 0),S=ei(M,"height",void 0)),super(t,i,n,x,S,M),this.type="rexFixWidthSizer",this.sizerChildren=[],this.runChildrenWrapFlag=!0,this.setOrientation(ei(M,"orientation",0)),this.setItemSpacing(ei(M,"space.item",0)),this.setLineSpacing(ei(M,"space.line",0)),this.setIntentLeft(ei(M,"space.indentLeftOdd",0),ei(M,"space.indentLeftEven",0)),this.setIntentTop(ei(M,"space.indentTopOdd",0),ei(M,"space.indentTopEven",0)),this.setAlign(ei(M,"align",0)),this.setJustifyPercentage(ei(M,"justifyPercentage",.25)),this.setRTL(ei(M,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=yn(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIntentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setAlign(t){return typeof t=="string"&&(t=JG[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=KG.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=ZG.call(this)),this._maxChildHeight}}const JG={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Fr.prototype,TC),W.register("fixWidthSizer",function(e,t,i,n,x){var S=new Fr(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.FixWidthSizer",Fr),W.register("overlapSizer",function(e,t,i,n,x){var S=new Gi(this.scene,e,t,i,n,x);return this.scene.add.existing(S),S}),J(window,"RexPlugins.UI.OverlapSizer",Gi),W.register("space",function(){var e=new vv(this.scene);return e}),J(window,"RexPlugins.UI.Space",vv),W.register("label",function(e){var t=new Hs(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Label",Hs);const PC=["alpha","tint","flipX","flipY"];var Fv=function(e,t){if(!t)return e;for(var i=0,n=PC.length;i<n;i++){var x=PC[i];x in t&&x in e&&(e[x]=t[x])}if("origin"in t&&"originX"in e)e.setOrigin(t.origin);else{var S,M;"originX"in t&&"originX"in e&&(S=t.originX),"originY"in t&&"originY"in e&&(M=t.originY),S!==void 0&&M!==void 0&&e.setOrigin(S,M)}return e},Ne=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("barColor")?i="bar":t.hasOwnProperty("leftWidth")?i="nineSlice":t.hasOwnProperty("key")&&(i="image"));var n;switch(i){case"bar":n=new hu(e,t);break;case"image":n=new Zo(e,t);break;case"nineSlice":t.hasOwnProperty("stretchMode")?n=new jo(e,t):n=new Qo(e,t);break;default:n=new Jo(e,t);break}return Fv(n,t),e.add.existing(n),n},QG=function(){switch(this.scrollMode){case 0:case 1:Dv.call(this),this.updateController(),Bv.call(this),Iv.call(this);break;default:Dv.call(this,"y"),Dv.call(this,"x"),this.updateController(),Bv.call(this,"y"),Bv.call(this,"x"),Iv.call(this,"y"),Iv.call(this,"x");break}return this},Dv=function(e){var t,i,n,x;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,i=this.bottomChildOY,n=this.childrenMap.scroller,x=this.childrenMap.slider,e=this.scrollMode===0?"Y":"X";break;default:e=e.toUpperCase(),e==="Y"?(t=this.topChildOY,i=this.bottomChildOY):(t=this.leftChildOX,i=this.rightChildOX),n=this.childrenMap[`scroller${e}`],x=this.childrenMap[`slider${e}`]}var S=e==="Y"?this.scaleY:this.scaleX;i*=S,n&&n.setBounds(t,i),x&&(x.setEnable(t!==i),x.tickLength&&x.setTick(x.tickLength,t,i))},Bv=function(e){switch(this.scrollMode){case 0:case 1:var i=this.childrenMap.slider;i&&this.hideUnscrollableSlider&&this.setChildVisible(i,this.isOverflow);var x=this.childrenMap.scroller;x&&this.disableUnscrollableDrag&&x.setEnable(this.isOverflow);break;default:e=e.toUpperCase();var t=this[`isOverflow${e}`],i=this.childrenMap[`slider${e}`],n=this[`hideUnscrollableSlider${e}`];i&&n&&this.setChildVisible(i,t);var x=this.childrenMap.scroller,S=this[`disableUnscrollableDrag${e}`];x&&S&&x.setEnable(t);break}},Iv=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;var S=this.childrenMap.slider;if(!S)return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),M=S.childrenMap.track,L=S.childrenMap.thumb,F=this.minThumbSize;if(this.scrollMode===0){var i=M.displayHeight*t;F!==void 0&&i<F&&(i=F),qe(L,void 0,i)}else{var n=M.displayWidth*t;F!==void 0&&n<F&&(n=F),qe(L,n,void 0)}MC(S);break;default:e=e.toUpperCase();var x=this[`adaptThumb${e}SizeMode`];if(!x)return;var S=this.childrenMap[`slider${e}`];if(!S)return;var M=S.childrenMap.track,L=S.childrenMap.thumb,F=this[`minThumb${e}Size`];if(e==="Y"){var t=Math.min(this.childVisibleHeight/this.childHeight,1),i=M.displayHeight*t;F!==void 0&&i<F&&(i=F),qe(L,void 0,i)}else{var t=Math.min(this.childVisibleWidth/this.childWidth,1),n=M.displayWidth*t;F!==void 0&&n<F&&(n=F),qe(L,n,void 0)}MC(S);break}},MC=function(e){var t=e.minWidth,i=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=i},jG=function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t);break;default:var i=this.childrenMap.scrollerY,n=this.childrenMap.sliderY,x=this.childrenMap.scrollerX,S=this.childrenMap.sliderX;i&&i.setValue(this.childOY),n&&n.setValue(this.t),x&&x.setValue(this.childOX),S&&S.setValue(this.s);break}};const uu=Phaser.Math.Clamp;var qG={setChildOY(e,t){return t===void 0&&(t=!1),t&&(e=uu(e,this.bottomChildOY,this.topChildOY)),this.childOY=e,this},addChildOY(e,t){return this.setChildOY(this.childOY+e,t),this},setT(e,t){return t===void 0&&(t=!1),t&&(e=uu(e,0,1)),this.t=e,this},addT(e,t){return this.setT(this.t+e,t),this},scrollToTop(){return this.t=0,this},scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this},setChildOX(e,t){return t===void 0&&(t=!1),t&&(e=uu(e,this.leftChildOX,this.rightChildOX)),this.childOX=e,this},addChildOX(e,t){return this.setChildOX(this.childOX+e,t),this},setS(e,t){return t===void 0&&(t=!1),t&&(e=uu(e,0,1)),this.s=e,this},addS(e,t){return this.setS(this.s+e,t),this},scrollToLeft(){return this.s=0,this},scrollToRight(){if(this.s=1,this.s===0)return this;do this.s=1;while(this.s!==1);return this}},wC={resizeController:QG,updateController:jG};Object.assign(wC,qG);var AC={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2},Gv=function(e,t){t===void 0&&(t="scrollMode"),e.hasOwnProperty(t)||(e[t]=_G(e));var i=e[t];return typeof i=="string"&&(i=AC[i]),i},_G=function(e){var t=!!e.sliderY||!!e.scrollerY,i=!!e.sliderX||!!e.scrollerX,n;return t&&i?n=2:t?n=0:i?n=1:n=0,n};const Xe=Phaser.Utils.Objects.GetValue;var t7=function(e,t,i){var n=Xe(i,"child"),x=Xe(n,"gameObject",void 0);if(x){var S=Xe(i,"space.child",0);e.childMargin={};var M=e.childMargin,L={};if(typeof S=="number")switch(e.scrollMode){case 0:case 1:M.top=0,M.bottom=0,M.left=0,M.right=0;break;default:M.top=S,M.bottom=S,M.left=S,M.right=S;break}else switch(e.scrollMode){case 0:M.top=Xe(S,"top",0),M.bottom=Xe(S,"bottom",0),L.left=Xe(S,"left",0),L.right=Xe(S,"right",0);break;case 1:M.top=Xe(S,"left",0),M.bottom=Xe(S,"right",0),L.top=Xe(S,"top",0),L.bottom=Xe(S,"bottom",0);break;default:M.top=Xe(S,"top",0),M.bottom=Xe(S,"bottom",0),M.left=Xe(S,"left",0),M.right=Xe(S,"right",0);break}t.add(x,{column:1,row:1,align:Xe(n,"align","center"),padding:L,expand:{width:Xe(n,"expandWidth",!0),height:Xe(n,"expandHeight",!0)}})}e.addChildrenMap("child",x)};const RC=Phaser.Math.Percent;var e7=function(e,t,i){var n;return e.y===t.y?n=RC(i.x,e.x,t.x):e.x===t.x&&(n=RC(i.y,e.y,t.y)),n},LC=function(e,t){kv.x=e,kv.y=t;var i,n;this.reverseAxis?(i=this.getEndPoint(),n=this.getStartPoint()):(i=this.getStartPoint(),n=this.getEndPoint());var x=e7(i,n,kv);return x},kv={},i7=function(e,t,i){!this.enable||!this.inputActive||(this.value=LC.call(this,t,i))},Nv=function(e){if(!(!this.enable||!this.inputActive)&&e.isDown){var t=LC.call(this,e.worldX,e.worldY);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-t)<.1?this.value=t:this.easeValueTo(t)}};const s7=Phaser.Utils.Objects.GetValue;var r7=function(e){this.inputActive=!1;var t=s7(e,"input",0);typeof t=="string"&&(t=n7[t]);var i=this.childrenMap.thumb;switch(t){case 0:i&&(i.setInteractive(),this.scene.input.setDraggable(i),i.on("dragstart",function(x){this.inputActive=!0,this.eventEmitter.emit("inputstart",x)},this).on("dragend",function(x){this.inputActive=!1,this.eventEmitter.emit("inputend",x)},this).on("drag",i7,this));break;case 1:this.setInteractive().on("pointerdown",function(x){this.inputActive=!0,this.eventEmitter.emit("inputstart",x)},this).on("pointerdown",Nv,this);var n=function(x){this.inputActive&&(this.inputActive=!1,this.eventEmitter.emit("inputend",x))};this.scene.input.on("pointerup",n,this).on("pointermove",Nv,this),this.once("destroy",function(){this.scene.input.on("pointerup",n,this).off("pointermove",Nv,this)},this);break}};const n7={pan:0,drag:0,click:1,none:-1};var bC=function(e,t){t===void 0&&(t=a7);var i=this.childrenMap.thumb,n=i.x,x=i.y;return Oo(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=i.x,t.y=i.y,i.x=n,i.y=x,t},a7={};const o7=Phaser.Display.Align.LEFT_CENTER,h7=Phaser.Display.Align.TOP_CENTER;var l7=function(e){if(e===void 0&&(e=u7),this.childrenMap.thumb){var t=this.orientation===0?o7:h7;bC.call(this,t,e)}else this.orientation===0?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},u7={};const d7=Phaser.Display.Align.RIGHT_CENTER,f7=Phaser.Display.Align.BOTTOM_CENTER;var c7=function(e){if(e===void 0&&(e=v7),this.childrenMap.thumb){var t=this.orientation===0?d7:f7;bC.call(this,t,e)}else this.orientation===0?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},v7={};const OC=Phaser.Math.Linear;var p7=function(e,t,i,n){return n===void 0&&(n=g7),n.x=OC(t.x,i.x,e),n.y=OC(t.y,i.y,e),n},g7={},m7=function(e){var t=this.childrenMap.thumb;if(t===void 0)return this;e===void 0&&(e=this.value);var i,n;return this.reverseAxis?(i=this.getEndPoint(),n=this.getStartPoint()):(i=this.getStartPoint(),n=this.getEndPoint()),p7(e,i,n,t),t.x+=this.thumbOffsetX,t.y+=this.thumbOffsetY,this.resetChildPositionState(t),this};const x7=Phaser.Display.Align.LEFT_CENTER,y7=Phaser.Display.Align.TOP_CENTER,C7=Phaser.Display.Align.RIGHT_CENTER,S7=Phaser.Display.Align.BOTTOM_CENTER;var T7=function(e){var t=this.childrenMap.indicator;if(t===void 0)return this;e===void 0&&(e=this.value);var i=this.reverseAxis,n,x,S=this.childrenMap.thumb;if(S)if(this.orientation===0){var M=_t(S);if(i){var L=S.x-M*S.originX;n=this.right-L}else{var L=S.x-M*S.originX,F=L+M;n=F-this.left}}else{var G=te(S);if(i){var X=S.y-G*S.originY;x=this.bottom-X}else{var X=S.y-G*S.originY,Q=X+G;x=Q-this.top}}else this.orientation===0?n=this.width*e:x=this.height*e;qe(t,n,x);var tt;i?tt=this.orientation===0?C7:S7:tt=this.orientation===0?x7:y7,gx(t,this,tt),this.resetChildPositionState(t)};const Pi=Phaser.Utils.Objects.GetValue,du=Phaser.Utils.Objects.IsPlainObject,E7=Phaser.Math.Clamp,P7=Phaser.Math.Snap.To;class Ia extends Pr(qt){constructor(t,i){super(t,i),this.type="rexSlider",this.bootProgressBase(i),this.reverseAxis=Pi(i,"reverseAxis",!1);var n=Pi(i,"background",void 0),x=Pi(i,"track",void 0),S=Pi(i,"indicator",void 0),M=Pi(i,"thumb",void 0);if(n&&(du(n)&&(n=Ne(t,n)),this.addBackground(n)),x&&(du(x)&&(x=Ne(t,x)),this.add(x,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),S&&(du(S)&&(S=Ne(t,S)),this.pin(S)),M){du(M)&&(M=Ne(t,M)),this.pin(M);var L=Pi(i,"thumbOffsetX",0),F=Pi(i,"thumbOffsetY",0);this.setThumbOffset(L,F)}this.addChildrenMap("background",n),this.addChildrenMap("track",x),this.addChildrenMap("indicator",S),this.addChildrenMap("thumb",M),this.setEnable(Pi(i,"enable",void 0));var G=Pi(i,"tick",void 0);G===void 0&&(G=Pi(i,"gap",void 0)),this.setGap(G),r7.call(this,i),this.setValue(Pi(i,"value",0),Pi(i,"min",void 0),Pi(i,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,i,n){return t&&i!==void 0&&(t=t/(n-i)),this.gap=t,this}setTick(t,i,n){return this.setGap(t,i,n),this}get tick(){return this.gap}set tick(t){this.gap=t}setThumbOffset(t,i){return this.thumbOffsetX=t,this.thumbOffsetY=i,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=P7(t,this.gap));var i=this._value;this._value=E7(t,0,1),i!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter))}postLayout(t,i,n){return this.updateThumb(),this.updateIndicator(),super.postLayout(t,i,n),this}}var M7={getStartPoint:l7,getEndPoint:c7,updateThumb:m7,updateIndicator:T7};Object.assign(Ia.prototype,M7);const pi=Phaser.Utils.Objects.GetValue;class zv extends qt{constructor(t,i){super(t,i),this.type="rexScrollBar";var n=pi(i,"background",void 0),x=pi(i,"buttons",void 0),S=pi(x,"top",pi(x,"left",void 0)),M=pi(x,"bottom",pi(x,"right",void 0)),L,F=pi(i,"slider",void 0);if(n&&this.addBackground(n),S){this.add(S);var G=new La(S);G.on("intouch",function(){if(this.enable){var ot=L.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=ot}},this)}if(F){F.orientation=this.orientation,F.eventEmitter=this,F.value=null;var X;if(this.orientation===0){var Q=pi(F,"width",void 0);X=Q===void 0?1:0}else{var tt=pi(F,"height",void 0);X=tt===void 0?1:0}L=new Ia(t,F),t.add.existing(L),this.add(L,{proportion:X})}if(M){this.add(M);var G=new La(M);G.on("intouch",function(){if(this.enable){var dt=L.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=dt}},this)}var _=[S,M];this.addChildrenMap("background",n),this.addChildrenMap("slider",L),this.addChildrenMap("buttons",_);var nt=pi(i,"valuechangeCallback",null);if(nt!==null){var lt=pi(i,"valuechangeCallbackScope",void 0);this.on("valuechange",nt,lt)}this.setEnable(pi(i,"enable",void 0)),this.setValue(pi(i,"value",0)),this.setScrollStep(pi(x,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,i,n){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,n),this}addValue(t,i,n){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,n),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,n){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,n),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}setGap(t,i,n){return this.childrenMap.slider&&this.childrenMap.slider.setGap(t,i,n),this}get gap(){if(this.childrenMap.slider)return this.childrenMap.slider.gap}set gap(t){this.childrenMap.slider&&(this.childrenMap.slider.gap=t)}setTick(t,i,n){return this.setGap(t,i,n),this}get tick(){if(this.childrenMap.slider)return this.childrenMap.slider.tick}set tick(t){this.childrenMap.slider&&(this.childrenMap.slider.tick=t)}}var w7=function(e,t){t===void 0&&(t={});var i=Hi(t);t={slider:i},t.orientation=i.orientation,delete i.orientation,t.background=i.background,delete i.background,t.buttons=i.buttons,delete i.buttons,t.value=null;var n=new zv(e,t);e.add.existing(n);var x=n.childrenMap.slider;return n.addChildrenMap("track",x.childrenMap.track),n.addChildrenMap("indicator",x.childrenMap.indicator),n.addChildrenMap("thumb",x.childrenMap.thumb),n};const A7=Phaser.Math.Snap.To;Phaser.Math.Clamp;var R7=function(){this.emit("dragstart")},L7=function(){this.emit("dragend")},b7=function(){this.value+=this.dragDelta},O7=function(){var e=this.value,t=this.dragSpeed,i=this.snapStep,n=!!i;if(n){var S=e,M=t===0?0:t*t/(2*this.slidingDeceleration);if(S+=t>0?M:-M,S=A7(S,i,this.minValue),M=Math.abs(S-e),M>0){var x;t===0?(x=this.backDeceleration,t=Math.sqrt(2*x*M)):(x=t*t/(2*M),x*=.99),this._slowDown.init(e,void 0,t,x,S)}else this._slowDown.stop(),this._state.next()}else if(t===0)this._slowDown.stop(),this._state.next();else{var x=this.slidingDeceleration;this._slowDown.init(e,t>0,t,x)}},F7=function(e,t){t*=.001;var i=this._slowDown.update(t).value;this.overMax(i)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(i)?(this.value=this.minValue,this._slowDown.stop()):this.value=i},D7=function(){var e=this.value,t=this.outOfMinBound?this.minValue:this.maxValue,i=Math.abs(t-e),n=this.backDeceleration,x=Math.sqrt(2*n*i);this._slowDown.init(e,void 0,x,n,t)},B7=function(e,t){t*=.001,this.value=this._slowDown.update(t).value,this._slowDown.isMoving||this._state.next()},FC=function(){this._slowDown.stop()};class I7 extends zs{constructor(t,i){super(i),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,i=this.parent,n=i.dragState;return n.isDown&&(t=i.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,i){this.next()}next_DRAGBEGIN(){var t,i=this.parent,n=i.dragState;return n.isDown?t=n.pointer.getDistance()>=i.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,i){this.next()}next_DRAG(){var t,i=this.parent,n=i.dragState;return n.isUp&&(i.outOfBounds?t="BACK":i.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,i){var n=this.parent,x=n.dragState;x.justMoved&&b7.call(n),this.next()}enter_DRAG(){R7.call(this.parent)}exit_DRAG(){L7.call(this.parent)}next_SLIDE(){var t,i=this.parent,n=i.dragState;return n.isDown?t="DRAG":i.isSliding||(t="IDLE"),t}enter_SLIDE(){O7.call(this.parent)}exit_SLIDE(){FC.call(this.parent)}update_SLIDE(t,i){F7.call(this.parent,t,i),this.next()}next_BACK(){var t,i=this.parent,n=i.dragState;return n.isDown?t="DRAG":i.isPullBack||(t="IDLE"),t}enter_BACK(){D7.call(this.parent)}exit_BACK(){FC.call(this.parent)}update_BACK(t,i){B7.call(this.parent,t,i),this.next()}}const qo=Phaser.Utils.Objects.GetValue,G7=Phaser.Math.Distance.Between;class k7 extends ye{constructor(t,i){super(t,i),this._enable=void 0,this.rectBoundsInteractive=qo(i,"rectBoundsInteractive",!1),this.rectBoundsInteractive||t.setInteractive(qo(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(qo(t,"enable",!0)),this.holdThreshold=qo(t,"holdThreshold",50),this.pointerOutReleaseEnable=qo(t,"pointerOutRelease",!0),this}boot(){var t=this.scene,i=this.parent;this.rectBoundsInteractive?(t.input.on("pointerdown",this.onPointIn,this),t.input.on("pointerup",this.onPointOut,this),t.input.on("pointermove",this.onPointerMove,this)):(i.on("pointerdown",this.onPointIn,this),i.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&i.on("pointerout",this.onPointOut,this),i.on("pointermove",this.onPointerMove,this)),t.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){if(!this.isShutdown){var i=this.scene;this.parent,this.rectBoundsInteractive&&(i.input.off("pointerdown",this.onPointIn,this),i.input.off("pointerup",this.onPointOut,this),i.input.off("pointermove",this.onPointerMove,this)),i.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t)}}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=If(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=G7(this.preX,this.preY,this.x,this.y),i=t/(this.dt*.001);return i}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,i,n){!this.enable||!t.isDown||this.pointer!==void 0||this.rectBoundsInteractive&&!cs(this.parent,t)||(this.pointer=t,this.localX=i,this.localY=n)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,i,n){if(!(!this.enable||!t.isDown||this.pointer!==t)){if(this.rectBoundsInteractive&&this.pointerOutReleaseEnable&&!cs(this.parent,t)){this.onPointOut(t);return}this.localX=i,this.localY=n}}preupdate(t,i){if(this.enable){var n=this.pointer;this.justMoved=!1,n&&!this.isInTouched?(this.x=n.worldX,this.y=n.worldY,this.preX=n.worldX,this.preY=n.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",n,this.localX,this.localY)):n&&this.isInTouched?this.x===n.x&&this.y===n.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=n.worldX,this.y=n.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",n,this.localX,this.localY)):!n&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",n))}}}const Uv=Phaser.Utils.Objects.GetValue;class N7{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(Uv(t,"value",0)),this.setSpeed(Uv(t,"speed",0)),this.setAcceleration(Uv(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class z7{constructor(){this.value,this.dir,this.movement=new N7}init(t,i,n,x,S){return this.value=t,this.end=S,S!==void 0?this.dir=t<S:this.dir=i,n=Math.abs(n),this.movement.setSpeed(n).setAcceleration(-x),this}stop(){this.movement.reset()}update(t){var i=this.movement.getDeltaValue(t);return this.dir||(i=-i),this.end===void 0?this.value+=i:i===0?this.value=this.end:(this.value+=i,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Re=Phaser.Utils.Objects.GetValue,U7=Phaser.Math.Clamp;class V7 extends ye{constructor(t,i){super(t,i);var n=Re(i,"enable",!0);this._state=new I7(this,{enable:n,eventEmitter:!1});var x={rectBoundsInteractive:Re(i,"rectBoundsInteractive",!1),inputConfig:Re(i,"inputConfig",void 0),enable:n,pointerOutRelease:Re(i,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new k7(t,x),this._enable=void 0,this._value=void 0,this._slowDown=new z7,this.setSnapStep(Re(i,"snapStep",void 0));var S=Re(i,"valuechangeCallback",null);if(S!==null){var M=Re(i,"valuechangeCallbackScope",void 0);this.on("valuechange",S,M)}if(S=Re(i,"overmaxCallback",null),S!==null){var M=Re(i,"overmaxCallbackScope",void 0);this.on("overmax",S,M)}if(S=Re(i,"overminCallback",null),S!==null){var M=Re(i,"overminCallbackScope",void 0);this.on("overmin",S,M)}this.resetFromJSON(i),this.boot()}resetFromJSON(t){this.setOrientationMode(Re(t,"orientation",0)),this.setDragThreshold(Re(t,"threshold",10)),this.setSlidingDeceleration(Re(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Re(t,"backDeceleration",2e3));var i=Re(t,"dragRate",1);i=i*(Re(t,"dragReverse",!1)?-1:1),this.setDragRate(i);var n=Re(t,"bounds",void 0);return n?this.setBounds(n):this.setBounds(Re(t,"max",0),Re(t,"min",0)),this.setValue(Re(t,"value",this.maxValue||0)),this.setEnable(Re(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=X7[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,i){if(Array.isArray(t)){var n=t;t=n[0],i=n[1]}return t<i?(this.minValue=t,this.maxValue=i):(this.minValue=i,this.maxValue=t),this}setSnapStep(t){return this.snapStep=t,this}get value(){return this._value}set value(t){if(t!==this._value){var i=this._value,n=this.overMax(t),x=this.overMin(t);n&&this.emit("overmax",t,i),x&&this.emit("overmin",t,i),this.backEnable||(n&&(t=this.maxValue),x&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,i)}}setValue(t,i){return i===void 0&&(i=!1),i&&(t=U7(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,i){return this.setValue(this.value+t,i),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}}const X7={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},fu=Phaser.Utils.Objects.GetValue;class W7 extends ye{constructor(t,i){switch(super(t,i),this.parent!==this.scene?this.focusMode=fu(i,"focus",!0):this.focusMode=!1,typeof this.focusMode=="boolean"&&(this.focusMode=this.focusMode?1:0),this.setSpeed(fu(i,"speed",.1)),this.setEnable(fu(i,"enable",!0)),this.focusMode){case 0:case 2:this.scene.input.on("wheel",this.onSceneScroll,this);break;default:t.setInteractive(fu(i,"inputConfig",void 0)).on("wheel",function(n,x,S,M,L){this.tryScroll(S)},this);break}}destroy(){switch(this.focusMode){case 0:case 2:this.scene.input.off("wheel",this.onSceneScroll,this);break}}onSceneScroll(t,i,n,x,S,M){this.focusMode===2&&!cs(this.parent,t)||this.tryScroll(x)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}tryScroll(t){if(this.enable)return this.scroll(t),this}scroll(t){return t*=this.speed,this.emit("scroll",t,this.parent,this),this}}const Te=Phaser.Utils.Objects.GetValue,Y7=Phaser.Math.Snap.To;var cu=function(e,t,i,n){i=i.toUpperCase();var x=i==="Y",S=e.scrollMode===2,M=e.childrenMap.child,L,F=`snapStep${i}`;if(S)L=Te(n,F,void 0);else{var L=Te(n,"snapStep",void 0);L===void 0&&(L=Te(n,F,void 0))}e[F]=L;var G,X,Q=`slider${i}`;if(S||n.hasOwnProperty(Q)?G=Te(n,Q,void 0):G=Te(n,"slider",void 0),G){G===!0&&(G={}),G.orientation=x?1:0,X=w7(e.scene,G);var tt,_,nt,lt=Te(G,"position",0);typeof lt=="string"&&(lt=H7[lt]);var ot=Te(n,`space.slider${i}`,void 0),dt;ot===void 0&&(ot=Te(n,"space.slider",void 0),ot===void 0&&(S?ot=0:dt=Te(n,"space.child",0)));var ct;dt===void 0?ct=typeof ot=="number":ct=typeof dt=="number",x?lt===0?(tt=2,_=1,dt===void 0?nt=ct?{left:ot}:ot:nt={left:Te(dt,"right",dt)}):(tt=0,_=1,dt===void 0?nt=ct?{right:ot}:ot:nt={right:Te(dt,"left",dt)}):lt===0?(tt=1,_=2,dt===void 0?nt=ct?{top:ot}:ot:nt={top:Te(dt,"bottom",dt)}):(tt=1,_=0,dt===void 0?nt=ct?{bottom:ot}:ot:nt={bottom:Te(dt,"top",dt)}),t.add(X,{column:tt,row:_,align:"center",padding:nt,expand:!0}),e[`hideUnscrollableSlider${i}`]=Te(G,"hideUnscrollableSlider",!1),e[`disableUnscrollableDrag${i}`]=Te(G,"disableUnscrollableDrag",!1),e[`adaptThumb${i}SizeMode`]=Te(G,"adaptThumbSize",!1),e[`minThumb${i}Size`]=Te(G,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${i}`]=!1,e[`disableUnscrollableDrag${i}`]=!1,e[`adaptThumb${i}SizeMode`]=!1,e[`minThumb${i}Size`]=void 0;var ft=Te(n,"scrollDetectionMode");typeof ft=="string"&&(ft=$7[ft]);var xt,St,Pt=`scroller${i}`;S||n.hasOwnProperty(Pt)?xt=Te(n,Pt,!0):xt=Te(n,"scroller",!0),xt&&M&&(xt===!0&&(xt={}),xt.orientation=x?0:1,ft!==void 0&&(xt.rectBoundsInteractive=ft===1),xt.snapStep=L,St=new V7(M,xt),M.isRexContainerLite&&M.sendChildToBack(M));var wt=Te(n,S?`mouseWheelScroller${i}`:"mouseWheelScroller",!1),bt;if(wt&&M&&(ft!==void 0&&(wt.focus=ft===1?2:0),bt=new W7(M,wt)),e.addChildrenMap(`slider${i}`,X),e.addChildrenMap(`scroller${i}`,St),e.addChildrenMap(`mouseWheelScroller${i}`,bt),(!S||x)&&(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${i}`],e.disableUnscrollableDrag=e[`disableUnscrollableDrag${i}`],e.adaptThumbSizeMode=e[`adaptThumb${i}SizeMode`],e.minThumbSize=e[`minThumb${i}Size`],e.addChildrenMap("slider",X),e.addChildrenMap("scroller",St),e.addChildrenMap("mouseWheelScroller",bt)),X){var kt,Dt;S?(kt=x?"t":"s",Dt=`scroll${i}`):(kt="t",Dt="scroll"),X.on("valuechange",function(se){e[kt]=se,e.emit(Dt,e)}).on("inputend",function(){var se=e[`snapStep${i}`];if(se){var Ot=e[x?"topChildOY":"leftChildOX"],ue=e[x?"bottomChildOY":"rightChildOX"],ge=e[`childO${i}`],Ee=Y7(ge,se,Ot),ze=500*(Math.abs(Ee-ge)/se);X.setEaseValueDuration(ze).easeValueTo(Ee,Ot,ue)}})}if(St){var Vt,Dt;S?(Vt=`childO${i}`,Dt=`scroll${i}`):(Vt="childOY",Dt="scroll"),St.on("valuechange",function(Ot){e[Vt]=Ot,e.emit(Dt,e)})}if(bt){var Ht;S?Ht=`addChildO${i}`:Ht="addChildOY",bt.on("scroll",function(se){var Ot=e[F];Ot&&(se=Ot),e[Ht](-se,!0)})}};const H7={right:0,left:1,bottom:0,top:1},$7={gameObject:0,rectBounds:1},vu=Phaser.Utils.Objects.GetValue;var K7=function(e,t){var i=e.scene,n=[0,1,0],x=[0,1,0],S=vu(t,"width"),M=vu(t,"height");if(!S){var L=vu(t,"child.expandWidth",!0);L||(n[1]=0)}if(!M){var F=vu(t,"child.expandHeight",!0);F||(x[1]=0)}var G=new ts(i,{column:3,row:3,columnProportions:n,rowProportions:x});switch(t7(e,G,t),e.scrollMode){case 0:cu(e,G,"y",t);break;case 1:cu(e,G,"x",t);break;default:cu(e,G,"y",t),cu(e,G,"x",t);break}return G};const ys=Phaser.Utils.Objects.GetValue;let _o=class extends qt{constructor(t,i){i===void 0&&(i={});var n=Gv(i),x=n===1;i.orientation=x?0:1,super(t,i),this.type=ys(i,"type","rexScrollable"),this.scrollMode=n;var S=ys(i,"background",void 0);S&&this.addBackground(S);var M=ys(i,"header",void 0);if(M){var L=ys(i,"align.header","center"),F=ys(i,"space.header",0),G;x?G={right:F}:G={bottom:F},this.add(M,{proportion:0,align:L,padding:G,expand:ys(i,"expand.header",!0)})}var X=K7(this,i);X&&this.add(X,{proportion:1,align:"center",padding:0,expand:!0});var Q=ys(i,"footer",void 0);if(Q){var L=ys(i,"align.footer","center"),tt=ys(i,"space.footer",0),G;x?G={left:tt}:G={top:tt},this.add(Q,{proportion:0,align:L,padding:G,expand:ys(i,"expand.footer",!0)})}this.addChildrenMap("background",S),this.addChildrenMap("header",M),this.addChildrenMap("footer",Q),this.runLayoutFlag=!1}postLayout(t,i,n){var x=0,S=0;return this.runLayoutFlag?(S=this.t,this.scrollMode===2&&(x=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(S),this.scrollMode===2&&this.setS(x),super.postLayout(t,i,n),this}set t(t){var i=this.childMargin;if(i.top!==0||i.bottom!==0){var n=this.childrenMap.child,x=n.topChildOY-n.bottomChildOY,S=x+i.top+i.bottom,M=S*t-i.top;t=x!==0?M/x:0}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,i=this.childMargin;if(i.top!==0||i.bottom!==0){var n=this.childrenMap.child,x=n.topChildOY-n.bottomChildOY,S=x+i.top+i.bottom,M=x*t+i.top;t=S!==0?M/S:0}return t}set s(t){var i=this.childMargin;if(i.left!==0||i.right!==0){var n=this.childrenMap.child,x=n.leftChildOX-n.rightChildOX,S=x+i.left+i.right,M=S*t-i.left;t=x!==0?M/x:0}this.childrenMap.child.s=t,this.updateController()}get s(){var t=this.childrenMap.child.s,i=this.childMargin;if(i.left!==0||i.right!==0){var n=this.childrenMap.child,x=n.leftChildOX-n.rightChildOX,S=x+i.left+i.right,M=x*t+i.left;t=S!==0?M/S:0}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(t){this.childrenMap.child.childOX=t,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var t=this.childrenMap.child;return t.leftChildOX!==t.rightChildOX}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var i=this.childrenMap.slider;i&&i.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(t){this.sliderEnable=t}setSliderYEnable(t){return this.setSliderEnable(t),this}get sliderXEnable(){var t=this.childrenMap.sliderX;return t?t.enable:!1}set sliderXEnable(t){var i=this.childrenMap.sliderX;i&&i.setEnable(t)}setSliderXEnable(t){return t===void 0&&(t=!0),this.sliderXEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var i=this.childrenMap.scroller;i&&i.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(t){this.scrollerEnable=t}setScrollerYEnable(t){return this.setScrollerEnable(t),this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var i=this.childrenMap.scrollerX;i&&i.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var i=this.childrenMap.scrollerX;i&&i.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var i=this.childrenMap.mouseWheelScroller;i&&i.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(t){this.mouseWheelScrollerEnable=t}setMouseWheelScrollerYEnable(t){return this.setMouseWheelScrollerEnable(t),this}get mouseWheelScrollerXEnable(){var t=this.childrenMap.mouseWheelScrollerX;return t?t.enable:!1}set mouseWheelScrollerXEnable(t){var i=this.childrenMap.mouseWheelScrollerX;i&&i.setEnable(t)}setMouseWheelScrollerXEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerXEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setInteractive(),i.input.dropZone=t,this}};Object.assign(_o.prototype,wC);var Vv=function(e,t,i){var n=br(e);switch(n){case _e:i=e.getWrappedText(t);break;case ti:i=e.getPenManager(t,i);break;case Ei:e.maxWidth>0?i=e.setText(t).getTextBounds().wrappedText.split(`
`):i=t.split(`
`);break}return i},Z7=function(e){return e!==void 0&&(this.text=e),this.lines=Vv(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},DC=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},BC=function(e){var t=e*(this.textLineHeight+this.textLineSpacing);return e>1&&(t-=this.textLineSpacing),t},J7=function(e){var t=e+this.visibleLinesCount+1,i;switch(this.textObjectType){case _e:i=this.lines.slice(e,t).join(`
`);break;case ti:var n=this.lines.getLineStartIndex(e),x=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(n,x,!0);break;case Ei:i=this.lines.slice(e,t).join(`
`);break}return i},pu=function(e,t){var i=br(e);switch(i){case _e:var S=e.style,n=S.wordWrapWidth,x=S.wordWrapCallback;S.wordWrapWidth=0,S.wordWrapCallback=void 0,e.setText(t),S.wordWrapWidth=n,S.wordWrapCallback=x;break;case ti:var S=e.style,M=S.wrapMode;S.wrapMode=0,e.setText(t),S.wrapMode=M;break;case Ei:var L=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=L;break}},IC=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&Q7.call(this)},Q7=function(){if(this.textObject.setCrop){var e=this.textObject.rexSizer.offsetY,t,i;e<=0?(t=-e,i=this.height):(t=0,i=this.height-e),this.textObject.setCrop(0,t,this.width,i)}},j7=function(){var e=Math.max(Math.floor(DC.call(this,-this.textOY)),0),t=BC.call(this,e)+this.textOY,i=J7.call(this,e);return pu(this.textObject,i),this.textObject.rexSizer.offsetY=t,IC.call(this),this},q7=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Bo.call(this),this},_7=function(e,t,i){if(i+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===i)){switch(this.textObjectWidth=t,this._textObjectRealHeight=i,this.textObjectType){case _e:case ti:e.setFixedSize(t,i);var n=e.style,x=Math.max(t,0);this.textObjectType===_e?n.wordWrapWidth=x:(n.wrapMode===0&&(n.wrapMode=1),n.wrapWidth=x);break;case Ei:e.setMaxWidth(t);break}this.setText()}},t6=function(){var e,t,i,n=this.left,x=this.top,S,M,L,F;e=this.textObject,e.rexSizer.hidden||(t=e.rexSizer,i=t.padding,S=n+i.left*this.scaleX,M=x+i.top*this.scaleY,L=this.width*this.scaleX-(i.left+i.right)*this.scaleX,F=this.height*this.scaleY-(i.top+i.bottom)*this.scaleY,_7.call(this,e,L,F),Oo(e,S,M,L,F,t.align),t.preOffsetY=0,IC.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},e6={setText:Z7,updateTextObject:j7,preLayout:q7,layoutChildren:t6};const GC=Phaser.Utils.Objects.IsPlainObject,Mi=Phaser.Utils.Objects.GetValue,i6=Phaser.Display.Align.TOP_LEFT;class kC extends Rn{constructor(t,i,n,x,S,M){GC(i)?(M=i,i=Mi(M,"x",0),n=Mi(M,"y",0),x=Mi(M,"width",void 0),S=Mi(M,"height",void 0)):GC(x)&&(M=x,x=Mi(M,"width",void 0),S=Mi(M,"height",void 0)),super(t,i,n,x,S,M),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=Mi(M,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Mi(M,"clampTextOY",!0)),this.alwaysScrollable=Mi(M,"alwaysScrollable",!1);var L=Mi(M,"background",void 0),F=Mi(M,"text",void 0);F===void 0&&(F=s6(t)),this.textCropEnable=Mi(M,"textCrop",!!F.setCrop);var G=Mi(M,"textMask",!this.textCropEnable);L&&this.addBackground(L),this.add(F),this.sizerChildren=[F];var X=this.getSizerConfig(F);X.align=i6,X.padding=Pn(0),X.expand=!0,this.textObject=F,this.textObjectType=br(F),X.preOffsetY=0,X.offsetY=0,G&&(this.textMask=qi.call(this,this.textObject,this)),this.addChildrenMap("background",L),this.addChildrenMap("text",F)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case _e:this.lines.length=0;break;case ti:this.lines.destroy();break;case Ei:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case _e:case ti:var i=this.textObject.style;t=i.metrics.fontSize+i.strokeThickness;break;case Ei:var n=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*n;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case _e:case ti:t=this.textObject.lineSpacing;break;case Ei:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(DC.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=BC.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var i=this.topTextOY,n=this.bottomTextOY,x=this.textOYExceedTop(t),S=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:x?t=i:S&&(t=n)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),x&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=x,S&&(this.execeedBottomState||this.emit("execeedbottom",this,t,n)),this.execeedBottomState=S}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var s6=function(e){return e.add.text(0,0,"")};Object.assign(kC.prototype,e6);var r6=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})},n6={setText(e){var t=this.childrenMap.child;return t.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}},a6={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};const Cs=Phaser.Utils.Objects.GetValue;class th extends _o{constructor(t,i){i===void 0&&(i={});var n=Cs(i,"text",void 0),x=Cs(i,"textWidth",void 0),S=Cs(i,"textHeight",void 0),M=Cs(i,"textCrop",!!n.setCrop),L=Cs(i,"textMask",!M),F=Cs(i,"content",""),G=new kC(t,{width:x,height:S,text:n,textMask:L,textCrop:M&&!L,content:F,clampTextOY:Cs(i,"clampChildOY",!1),alwaysScrollable:Cs(i,"alwaysScrollable",!1)});t.add.existing(G),r6(G),i.scrollMode=0,i.type="rexTextArea",i.child={gameObject:G,expandWidth:x===void 0,expandHeight:S===void 0};var X=Cs(i,"space",void 0);X&&(X.child=Cs(X,"text",0)),super(t,i),this.addChildrenMap("text",n)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.textHeight}}Object.assign(th.prototype,n6,a6);const gu=Phaser.Utils.Objects.GetValue;var NC=function(e,t,i){t=t?ht(t):{};var n=gu(i,"background",Ne),x=gu(i,"text",Xv),S=gu(i,"track",Ne),M=gu(i,"thumb",Ne);n?t.background=n(e,t.background):delete t.background,x?t.text=x(e,t.text):delete t.text;var L=t.slider;L!==!1&&L!==null&&(L===void 0&&(L={}),S?L.track=S(e,L.track):delete L.track,M?L.thumb=M(e,L.thumb):delete L.thumb,t.slider=L);var F=new th(e,t);return e.add.existing(F),F},Xv=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("key")&&(i="bitmaptext",t.font=t.key));var n;switch(i){case"bitmaptext":case"bitmap":n=new ou(e,t);break;case"bbcodetext":case"bbcode":n=new af(e,0,0,"",t);break;case"label":n=new eh(e,t);break;case"textarea":n=NC(e,t);break;default:n=new au(e,t);break}return Fv(n,t),e.add.existing(n),n},zC=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("leftWidth")?i="nineSlice":(t.hasOwnProperty("color")||t.hasOwnProperty("strokeColor"))&&(i="roundRectangle"));var n;switch(i){case"nineSlice":t.hasOwnProperty("stretchMode")?n=new jo(e,t):n=new Qo(e,t);break;case"roundRectangle":n=new Jo(e,t);break;default:n=new Zo(e,t);break}return Fv(n,t),e.add.existing(n),n};const mu=Phaser.Utils.Objects.GetValue;var xu=function(e,t,i){t=t?ht(t):{};var n=mu(i,"background",Ne),x=mu(i,"text",Xv),S=mu(i,"icon",zC),M=mu(i,"action",zC);return t.background!==null&&n?t.background=n(e,t.background):delete t.background,t.text!==null&&x?t.text=x(e,t.text):delete t.text,t.icon!==null&&S?t.icon=S(e,t.icon):delete t.icon,t.action!==null&&M?t.action=M(e,t.action):delete t.action,t};class eh extends Hs{constructor(t,i,n){i=xu(t,i,n),super(t,i),this.type="rexSimpleLabel"}setActiveState(t){return Wv(this.getChildren(),"setActiveState",t),this}setHoverState(t){return Wv(this.getChildren(),"setHoverState",t),this}setDisableState(t){return Wv(this.getChildren(),"setDisableState",t),this}}var Wv=function(e,t,i){for(var n=0,x=e.length;n<x;n++){var S=e[n];S&&S[t]&&S[t](i)}};W.register("simpleLabel",function(e,t){var i=new eh(this.scene,e,t);return this.scene.add.existing(i),i}),J(window,"RexPlugins.UI.SimpleLabel",eh);const Ut=Phaser.Utils.Objects.GetValue;var o6=function(e){var t=this.scene,i=Ut(e,"orientation",0);this.setOrientation(i);var n=Ut(e,"icon",void 0),x=Ut(e,"iconMask",void 0),S=Ut(e,"innerBackground",void 0),M=Ut(e,"title",void 0),L=Ut(e,"separator",void 0),F=Ut(e,"text",void 0),G=Ut(e,"action",void 0),X=Ut(e,"actionMask",void 0);if(n){var Q=Ut(e,"align.icon","center"),Pt;this.orientation===0?Pt={right:Ut(e,"space.icon",0),top:Ut(e,"space.iconTop",0),bottom:Ut(e,"space.iconBottom",0),left:Ut(e,"space.iconLeft",0)}:Pt={bottom:Ut(e,"space.icon",0),left:Ut(e,"space.iconLeft",0),right:Ut(e,"space.iconRight",0),top:Ut(e,"space.iconTop",0)};var tt=Ut(e,"squareFitIcon",!1)?1:0;if(this.add(n,{proportion:0,align:Q,padding:Pt,fitRatio:tt}),x&&(x=qi.call(this,n,n,1)),!tt){var _=Ut(e,"iconSize",void 0);this.setIconSize(Ut(e,"iconWidth",_),Ut(e,"iconHeight",_))}}var nt=new qt(t,{orientation:1});S&&nt.addBackground(S);var lt=Ut(e,"space.separator",0);if(M){var Q=Ut(e,"align.title","left"),ot=Ut(e,"expandTitleWidth",!1),dt=Ut(e,"expandTitleHeight",!1),ct,Pt,ft;ct=dt?1:0,ft=ot,Pt={bottom:!L&&F?Ut(e,"space.title",lt):0,left:Ut(e,"space.titleLeft",0),right:Ut(e,"space.titleRight",0)},nt.add(M,{proportion:ct,expand:ft,align:Q,padding:Pt})}if(L){var Pt={top:M?lt:0,bottom:F?lt:0,left:Ut(e,"space.separatorLeft",0),right:Ut(e,"space.separatorRight",0)};nt.add(L,{expand:!0,padding:Pt})}if(F){var Q=Ut(e,"align.text","left"),xt=Ut(e,"expandTextWidth",!1),St=Ut(e,"expandTextHeight",!1),ct,Pt,ft;ct=St?1:0,ft=xt,Pt={left:Ut(e,"space.textLeft",0),right:Ut(e,"space.textRight",0)},nt.add(F,{proportion:ct,expand:ft,align:Q,padding:Pt})}var Pt=void 0;if(G&&(Pt={right:Ut(e,"space.text",0)}),this.add(nt,{proportion:1,padding:Pt}),G){var Q=Ut(e,"align.action","center"),Pt;this.orientation===0?Pt={top:Ut(e,"space.actionTop",0),bottom:Ut(e,"space.actionBottom",0),right:Ut(e,"space.actionRight",0)}:Pt={left:Ut(e,"space.actionLeft",0),right:Ut(e,"space.actionRight",0),bottom:Ut(e,"space.actionBottom",0)};var tt=Ut(e,"squareFitAction",!1)?1:0;if(this.add(G,{proportion:0,align:Q,padding:Pt,fitRatio:tt}),X&&(X=qi.call(this,G,G,1)),!tt){var wt=Ut(e,"actionSize");this.setActionSize(Ut(e,"actionWidth",wt),Ut(e,"actionHeight",wt))}}this.addChildrenMap("icon",n),this.addChildrenMap("iconMask",x),this.addChildrenMap("innerSizer",nt),this.addChildrenMap("innerBackground",S),this.addChildrenMap("title",M),this.addChildrenMap("separator",L),this.addChildrenMap("text",F),this.addChildrenMap("action",G),this.addChildrenMap("actionMask",X)};const Nt=Phaser.Utils.Objects.GetValue;var h6=function(e){this.setOrientation(1),this.setRTL(!1);var t=this.scene,i=Nt(e,"title",void 0),n=Nt(e,"separator",void 0),x=Nt(e,"innerBackground",void 0),S=Nt(e,"icon",void 0),M=Nt(e,"iconMask",void 0),L=Nt(e,"text",void 0),F=Nt(e,"action",void 0),G=Nt(e,"actionMask",void 0);if(i){var X=Nt(e,"align.title","left"),Q=Nt(e,"expandTitleWidth",!1),tt=Nt(e,"expandTitleHeight",!1),_,nt,lt;_=tt?1:0,lt=Q,nt={bottom:Nt(e,"space.title",0),left:Nt(e,"space.titleLeft",0),right:Nt(e,"space.titleRight",0)},this.add(i,{proportion:_,expand:lt,align:X,padding:nt})}if(n){var ot=Nt(e,"space.separator",0),nt={top:i?ot:0,bottom:L?ot:0,left:Nt(e,"space.separatorLeft",0),right:Nt(e,"space.separatorRight",0)};this.add(n,{proportion:0,expand:!0,padding:nt})}var dt=Nt(e,"orientation",0),ct=new qt(t,{orientation:dt,rtl:Nt(e,"rtl",!1),space:{left:Nt(e,"space.innerLeft",0),right:Nt(e,"space.innerRight",0),top:Nt(e,"space.innerTop",0),bottom:Nt(e,"space.innerBottom",0)}});if(x&&ct.addBackground(x),this.add(ct,{proportion:1,expand:!0}),S){var X=Nt(e,"align.icon","center"),nt;ct.orientation===0?nt={right:Nt(e,"space.icon",0),top:Nt(e,"space.iconTop",0),bottom:Nt(e,"space.iconBottom",0),left:Nt(e,"space.iconLeft",0)}:nt={bottom:Nt(e,"space.icon",0),left:Nt(e,"space.iconLeft",0),right:Nt(e,"space.iconRight",0),top:Nt(e,"space.iconTop",0)};var ft=Nt(e,"squareFitIcon",!1)?1:0;if(ct.add(S,{proportion:0,align:X,padding:nt,fitRatio:ft}),M&&(M=qi.call(this,S,S,1)),!ft){var xt=Nt(e,"iconSize",void 0);this.setIconSize(Nt(e,"iconWidth",xt),Nt(e,"iconHeight",xt))}}if(L){var X=Nt(e,"align.text","left"),St=Nt(e,"space.text",0),Pt=Nt(e,"expandTextWidth",!1),wt=Nt(e,"expandTextHeight",!1),_,nt,lt;ct.orientation===0?(_=Pt?1:0,F&&(nt={right:St}),lt=wt):(_=wt?1:0,F&&(nt={bottom:St}),lt=Pt),ct.add(L,{proportion:_,expand:lt,align:X,padding:nt})}if(F){var X=Nt(e,"align.action","center"),nt;ct.orientation===0?nt={top:Nt(e,"space.actionTop",0),bottom:Nt(e,"space.actionBottom",0),right:Nt(e,"space.actionRight",0)}:nt={left:Nt(e,"space.actionLeft",0),right:Nt(e,"space.actionRight",0),bottom:Nt(e,"space.actionBottom",0)};var ft=Nt(e,"squareFitAction",!1)?1:0;if(ct.add(F,{proportion:0,align:X,padding:nt,fitRatio:ft}),G&&(G=qi.call(this,F,F,1)),!ft){var bt=Nt(e,"actionSize");this.setActionSize(Nt(e,"actionWidth",bt),Nt(e,"actionHeight",bt))}}this.addChildrenMap("title",i),this.addChildrenMap("separator",n),this.addChildrenMap("innerSizer",ct),this.addChildrenMap("innerBackground",x),this.addChildrenMap("icon",S),this.addChildrenMap("iconMask",M),this.addChildrenMap("text",L),this.addChildrenMap("action",F),this.addChildrenMap("actionMask",G)};const Dr=Phaser.Utils.Objects.GetValue,UC=[o6,h6];class yu extends xv{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexTitleLabel";var n=Dr(i,"background",void 0);n&&this.addBackground(n);var x=Dr(i,"title",void 0),S=Dr(i,"text",void 0);if(x){var M=Dr(i,"wrapTitle",!1),L=Dr(i,"adjustTitleFontSize",!1);M?(M===!0&&(M="word"),Cv(x,M),i.expandTitleWidth=!0,su(x)):L&&(i.expandTextWidth=!0,i.expandTextHeight=!0,nu(x,{fitHeight:!0}))}if(S){var F=Dr(i,"wrapText",!1),G=Dr(i,"adjustTextFontSize",!1);F?(F===!0&&(F="word"),Cv(S,F),i.expandTextWidth=!0,su(S)):G&&(i.expandTextWidth=!0,i.expandTextHeight=!0,nu(S,{fitHeight:!0}))}var X=Dr(i,"layoutMode",0),Q=UC[X]||UC[0];Q.call(this,i),this.addChildrenMap("background",i.background)}get title(){var t=this.childrenMap.title;return t?t.title:""}set title(t){var i=this.childrenMap.title;i&&i.setText(t)}setTitle(t){return this.title=t,this}resetDisplayContent(t){t===void 0?t={}:typeof t=="string"&&(t={text:t}),super.resetDisplayContent(t);var i=this.childrenMap.title;return i&&(t.title===void 0||(t.title?(this.show(i),this.setTitle(t.title)):this.hide(i))),this}}W.register("titleLabel",function(e){var t=new yu(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.TitleLabel",yu);const Yv=Phaser.Utils.Objects.GetValue;var VC=function(e,t,i){var n=Yv(i,"innerBackground",Ne),x=Yv(i,"separator",Ne),S=Yv(i,"title",Xv),M,L;t.innerBackground!==null&&n&&(M=n(e,t.innerBackground)),t.separator!==null&&x&&(L=x(e,t.separator)),t=xu(e,t,i),M?t.innerBackground=M:delete t.innerBackground,L?t.separator=L:delete t.separator,t.title!==null&&S?t.title=S(e,t.title):delete t.title;var F=t.background;return F&&(M?e.children.moveBelow(F,M):L&&e.children.moveBelow(F,L)),t};class XC extends yu{constructor(t,i,n){i=VC(t,i,n),super(t,i),this.type="rexSimpleTitleLabel"}setActiveState(t){return Hv(this.getChildren(),"setActiveState",t),this}setHoverState(t){return Hv(this.getChildren(),"setHoverState",t),this}setDisableState(t){return Hv(this.getChildren(),"setDisableState",t),this}}var Hv=function(e,t,i){for(var n=0,x=e.length;n<x;n++){var S=e[n];S&&S[t]&&S[t](i)}};W.register("simpleTitleLabel",function(e,t){var i=new XC(this.scene,e,t);return this.scene.add.existing(i),i}),J(window,"RexPlugins.UI.SimpleTitleLabel",XC);const ie=Phaser.Utils.Objects.GetValue,l6=Phaser.Utils.Objects.IsPlainObject;var u6=function(e,t){var i=ie(t,"background",void 0),n=ie(t,"icon",void 0),x=ie(t,"iconMask",void 0),S=ie(t,"nameText",void 0),M=ie(t,"valueText",void 0),L=ie(t,"bar",void 0),F=ie(t,"action",void 0),G=ie(t,"actionMask",void 0),X=ie(t,"barShape","line")==="line";if(l6(L)){var Q=X?ec:cl;L=new Q(e,L),e.add.existing(L),S&&e.children.moveBelow(L,S),M&&e.children.moveBelow(L,M)}var tt=S||M||L;if(i&&this.addBackground(i),n){var _=void 0;this.orientation===0?(tt||F)&&(_={right:ie(t,"space.icon",0),top:ie(t,"space.iconTop",0),bottom:ie(t,"space.iconBottom",0)}):(tt||F)&&(_={bottom:ie(t,"space.icon",0),left:ie(t,"space.iconLeft",0),right:ie(t,"space.iconRight",0)}),this.add(n,{proportion:0,padding:_}),x&&(x=qi.call(this,n,n,1))}if(tt){var nt=new qt(e,{orientation:1}),lt;if(S||M){if(lt=new qt(e,{orientation:0}),S){S.text===""&&S.setText(" "),S.setOrigin(0,S.originY);var _={left:ie(t,"space.name",0)};lt.add(S,{padding:_})}if(M){M.text===""&&M.setText(" "),M.setOrigin(1,M.originY),lt.addSpace();var _={right:ie(t,"space.value",0)};lt.add(M,{padding:_}),this.setValueTextFormatCallback(ie(t,"valueTextFormatCallback",d6),ie(t,"valueTextFormatCallbackScope",void 0))}nt.add(lt,{expand:!0})}if(L)if(X){var ot=lt?ie(t,"space.bar"):0;ot===void 0&&(ot=ie(t,"space.barTop",0));var _={top:ot,bottom:ie(t,"space.barBottom",0),left:ie(t,"space.barLeft",0),right:ie(t,"space.barRight",0)};nt.add(L,{expand:!0,padding:_})}else{var _={top:ie(t,"space.barTop",0),bottom:ie(t,"space.barBottom",0),left:ie(t,"space.barLeft",0),right:ie(t,"space.barRight",0)};this.addBackground(L,_)}var _=void 0;F&&(_={right:ie(t,"space.text",0)});var dt=ie(t,"align.text","bottom");this.add(nt,{proportion:1,align:dt,padding:_})}if(F){var _;this.orientation===0?_={top:ie(t,"space.actionTop",0),bottom:ie(t,"space.actionBottom",0)}:_={left:ie(t,"space.actionLeft",0),right:ie(t,"space.actionRight",0)},this.add(F,{proportion:0,padding:_}),G&&(G=qi.call(this,F,F,1))}this.addChildrenMap("background",i),this.addChildrenMap("icon",n),this.addChildrenMap("iconMask",x),this.addChildrenMap("name",S),this.addChildrenMap("value",M),this.addChildrenMap("bar",L),this.addChildrenMap("action",F),this.addChildrenMap("actionMask",G)},d6=function(e,t,i){return e.toString()};const f6=Phaser.Math.Clamp;var c6={setValueTextFormatCallback(e,t){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=t,this},getFormatValueText(e,t,i){e===void 0&&(e=this.value),t===void 0&&(t=this.minValue),i===void 0&&(i=this.maxValue);var n;return this.valueTextFormatCallbackScope?n=this.valueTextFormatCallback(e,t,i):n=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,t,i),n},updateValueText(e,t,i){var n=this.childrenMap.value;return n&&this.valueTextFormatCallback&&(n.setText(this.getFormatValueText(e,t,i)),n.layout&&n.layout()),this},setValue(e,t,i){return t===void 0?t=this.minValue:this.minValue=t,i===void 0?i=this.maxValue:this.maxValue=i,e=f6(e,t,i),this.value=e,this.updateValueText(e,t,i),this.setBarValue(e,t,i),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,t,i){return t===void 0?t=this.minValue:this.minValue=t,i===void 0?i=this.maxValue:this.maxValue=i,this.easeValueTask===void 0&&(this.easeValueTask=new $i(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}};class Cu extends qt{constructor(t,i){super(t,i),this.type="rexNameValueLabel",u6.call(this,t,i),this.setEaseValueDuration(1e3)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var i=this.childrenMap.name;i!==void 0&&i.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var i=this.childrenMap.value;i!==void 0&&i.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var i=this.childrenMap.bar;i!==void 0&&i.setValue(t)}setBarValue(t,i,n){var x=this.childrenMap.bar;return x===void 0?this:(x.setValue(t,i,n),this)}easeBarValueTo(t,i,n){var x=this.childrenMap.bar;return x===void 0?this:(x.easeValueTo(t,i,n),this)}setTexture(t,i){var n=this.childrenMap.icon;if(n!==void 0)return n.setTexture(t,i),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}postLayout(t,i,n){var x=this.childrenMap.iconMask;x&&(x.setPosition(),this.resetChildPositionState(x));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),super.postLayout(t,i,n),this}resize(t,i){super.resize(t,i);var n=this.childrenMap.iconMask;n&&n.resize();var x=this.childrenMap.actionMask;return x&&x.resize(),this}}Object.assign(Cu.prototype,c6),W.register("nameValueLabel",function(e){var t=new Cu(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.NameValueLabel",Cu);class v6 extends V0{constructor(t){super(),this.setTable(Gt(t,"table")),this.setMaxLevel(Gt(t,"maxLevel"));var i=Gt(t,"exp",0),n=Gt(t,"level",void 0);n!==void 0&&!this.checkLevel(n,i)&&(console.error(`Level ${n} and Exp ${i} are mismatch`),n=void 0),this.resetExp(i,n)}setTable(t){return this.levelTable=t,this.isLevelMapFunction=Ki(t),this}setMaxLevel(t){t===void 0&&(Array.isArray(this.levelTable)?t=this.levelTable.length-1:t=-1);var i;return t!==-1?i=this.getExp(t):i=-1,this.hasMaxLevel=t!==-1,this.maxLevel=t,this.maxExp=i,this}resetExp(t,i){return this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),i===void 0&&(i=this.getLevel(t)),this._exp=t,this._level=i,this._requiredExp=this.getRequiredExpToNextLevel(i,t),this}get exp(){return this._exp}set exp(t){if(this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),t<this._exp){this.resetExp(t);return}if(t!==this._exp){for(var i=this.getLevel(t,this._level),n=this._level,x=this._exp,S;;){var M=this.getExp(n),L=this.getExp(n+1);if(S=Math.min(L,t),this.emit("levelup",n,x,S,M,L),n===i&&S===t)break;n++,x=L}this.resetExp(t,i)}}get level(){return this._level}set level(t){this.hasMaxLevel&&t>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(t)}get requiredExp(){return this._requiredExp}getExp(t){return t===void 0?this._exp:this.isLevelMapFunction?this.levelTable(t):(this.hasMaxLevel&&t>this.maxLevel&&(t=this.maxLevel),this.levelTable[t])}getLevel(t,i){if(t===void 0)return this._level;for(i===void 0&&(i=0);;){var n=this.getExp(i+1);if(n>t||(i++,this.hasMaxLevel&&n===this.maxExp))break}return i}getRequiredExpToNextLevel(t,i){return t===void 0&&(t=this.level),i===void 0&&(i=this.exp),this.getExp(t+1)-i}checkLevel(t,i){return i>=this.getExp(t)&&i<this.getExp(t+1)}gainExp(t,i,n){return i&&this.on("levelup",i,n),this.exp+=t,i&&this.off("levelup",i,n),this}setExp(t,i,n){return i&&this.on("levelup",i,n),this.exp=t,i&&this.off("levelup",i,n),this}setLevel(t,i,n){return i&&this.on("levelup",i,n),this.level=t,i&&this.off("levelup",i,n),this}}var $v=function(e,t,i){var n=Gt(i,"reverse",!1),x;if(Zi(e[0]))if(n)for(var M=e.length,S=M-1;S>=0;S--)x=$v(e[S],t,i);else for(var S=0,M=e.length;S<M;S++)x=$v(e[S],t,i);else x=p6(e,t,i);return x},p6=function(e,t,i){var n=Gt(i,"argsConvert",void 0),x=Gt(i,"argsConvertScope",void 0),S=e[0];if(Br=ol(Br,e,1),n){n===!0&&(n=Pf,x=void 0);for(var M=0,L=Br.length;M<L;M++)x?Br[M]=n.call(x,Br[M],e):Br[M]=n(Br[M],e)}var F;typeof S=="string"?(F=t[S],F==null&&(F=Gt(t,S,null))):F=S;var G=F.apply(t,Br);return G},Br=[];const es=Phaser.Utils.Objects.GetValue;class WC extends ye{constructor(t,i){super(t,i);var n=es(i,"clock",void 0);n||(n=new B0(t)),this.clock=n,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(i)}resetFromJSON(t){return this.clock.resetFromJSON(es(t,"clock",void 0)),this.state=es(t,"state",0),this.commands=es(t,"commands",[]),this.scope=es(t,"scope",void 0),this.setTimeUnit(es(t,"timeUnit",0)),this.setDtMode(es(t,"dtMode",0)),this.index=es(t,"index",0),this.nextTime=es(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,i,n){this.stop();var x=es(n,"timeUnit",void 0);x!==void 0&&this.setTimeUnit(x);var S=es(n,"dtMode",void 0);return S!==void 0&&this.setDtMode(S),t=t.filter(function(M){var L=M[0];return!isNaN(L)}).map(function(M){var L=M[0];return typeof L=="string"&&(M[0]=parseFloat(M[0])),M}),this.dtMode===0&&t.sort(function(M,L){var F=M[0],G=L[0];return F>G?1:F<G?-1:0}),ol(this.commands,t),this.scope=i,this}clear(){return this.commands.length=0,this}append(t,i,...n){var x;return Array.isArray(i)?x=i:x=[i,...n],this.commands.push([t,x]),this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var i=this.commands;;){var n=i[this.index],x=n[1];if(Zi(x)||(x=ol(g6,n,1)),$v(x,this.scope),this.emit("runcommand",x,this.scope),this.index>=i.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var i=this.commands[this.index][0];return this.timeUnit===1&&(i=i*1e3),this.dtMode===1&&(i+=t),i}setDtMode(t){return typeof t=="string"&&(t=x6[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=m6[t]),this.timeUnit=t,this}}var g6=[];const m6={ms:0,s:1,sec:1},x6={abs:0,absolute:0,inc:1,increment:1};var y6=function(e,t,i,n,x){var S=(i-t)/(x-n)*this.totalEaseDuration,M=i===x?e+1:e;this.player.append(0,this.setEaseValueDuration,S).append(0,this.easeValueTo,i,n,x).append(0,this.emit,"levelup.start",e,t,i,this).append(S,a).append(0,this.emit,"levelup.end",M,t,i,this),this.player.isPlaying||this.player.start()},C6={setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,t){return this.levelCounter.getLevel(e,t)},getRequiredExpToNextLevel(e,t){return this.levelCounter.getRequiredExpToNextLevel(e,t)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}};const YC=Phaser.Utils.Objects.GetValue;class Kv extends Cu{constructor(t,i){super(t,i),this.type="rexExpBar",this.setTotalEaseDuration(YC(i,"easeDuration",1e3)),this.levelCounter=new v6(YC(i,"levelCounter")),this.player=new WC(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",y6,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(t){!this.scene||this.ignoreDestroy||(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(t))}get exp(){return this.levelCounter.exp}set exp(t){this.levelCounter.exp=t}get level(){return this.levelCounter.level}set level(t){this.levelCounter.level=t}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(t){return this.totalEaseDuration=t,this}}Object.assign(Kv.prototype,C6),W.register("expBar",function(e){var t=new Kv(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ExpBar",Kv);const Su=qt.prototype.add,HC=qt.prototype.addSpace;var Zv=function(e){var t=!e.isRexSpace,i=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var n=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");n&&HC.call(this),Su.call(this,e,{proportion:i,expand:!0});var x=!this.buttonsExpand&&this.buttonsAlign==="center";x&&HC.call(this),this.hasTailSpace=x}else Su.call(this,e,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var S=this.sizerChildren.length-1;Su.call(this,e,{index:S,proportion:i,expand:!0})}else Su.call(this,e,{proportion:i,expand:!0});return t&&this.buttonGroup.add(e),this},S6={addButton(e){if(Zi(e))for(var t=e,i=0,n=t.length;i<n;i++)Zv.call(this,t[i]);else Zv.call(this,e);return this},addButtons(e){for(var t=0,i=e.length;t<i;t++)Zv.call(this,e[t]);return this}};const T6=qt.prototype.remove,E6=qt.prototype.clear;var Jv=function(e,t){return this.getParentSizer(e)!==this?this:(this.buttonGroup.remove(e),T6.call(this,e,t),this)},P6={remove(e,t){if(Zi(e))for(var i=e,n=0,x=i.length;n<x;n++)Jv.call(this,i[n],t);else Jv.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,E6.call(this,e),this},removeButton(i,t){var i=this.getButton(i);return i?(this.remove(i,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Jv.call(this,t[i],e);return this}},M6=function(e,t,i){if(e){var n=this.setValueCallback,x=this.setValueCallbackScope;n&&(x?n.call(x,e,t,i):n(e,t,i)),this.fireEvent("button.statechange",e,t,i)}},w6=function(e){var t=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(i){if(e._selected!==i){var n=e._selected;e._selected=i,M6.call(t,e,i,n)}},enumerable:!0,configurable:!0}),e.selected=!1},A6={add(e){return this.buttons.push(e),e._click||(e._click=new us(e,this.clickConfig),e._click.on("click",function(t,i,n,x){this.fireEvent("button.click",i,n,x)},this).on("enable",function(t,i){this.fireEvent("button.enable",i)},this).on("disable",function(t,i){this.fireEvent("button.disable",i)},this).on("over",function(t,i,n,x){this.fireEvent("button.over",i,n,x)},this).on("out",function(t,i,n,x){this.fireEvent("button.out",i,n,x)},this).on("down",function(t,i,n,x){this.fireEvent("button.down",i,n,x)},this).on("up",function(t,i,n,x){this.fireEvent("button.up",i,n,x)},this),e.isRexContainerLite&&e.sendChildToBack(e)),this.buttonsType&&(e.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),w6.call(this,e)),this},addMultiple(e){for(var t=0,i=e.length;t<i;t++)this.add(e[t]);return this}};const R6=Phaser.Utils.Array.Remove;var L6={remove(e){return this.buttonsType&&delete e.selected,R6(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,t=0,i=e.length;t<i;t++)delete e[t].selected;return this.buttons.length=0,this}},b6=function(e,t,...i){if(this.buttons){var n;if(typeof t=="number"){if(n=t,t=this.buttons[n],!t)return}else if(n=this.buttons.indexOf(t),n===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,n,...i),this.groupName!==void 0?this.eventEmitter.emit(e,t,this.groupName,n,...i):this.eventEmitter.emit(e,t,n,...i)}};const ih=Phaser.Utils.Objects.GetValue;var O6={setButtonsType(e){e===void 0&&(e={});var t=ih(e,"buttonsType",e.type);if(this.buttonsType=t,!this.buttonsType)return this;var i,n;switch(i=ih(e,"setValueCallback",void 0),n=ih(e,"setValueCallbackScope",void 0),i===void 0&&(i=ih(e,"setButtonStateCallback",void 0),n=ih(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=i,this.setValueCallbackScope=n,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var e=this.parent,t=this.buttons;e._value=void 0;var i=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(n){if(e._value!==n){e._value=n;for(var x=0,S=t.length;x<S;x++){var M=t[x];M.rexSizer.hidden||(i===void 0?M.name===n?M.selected=!0:M.selected=!1:i===x?M.selected=!0:M.selected=!1)}}},enumerable:!0,configurable:!0}),e.on("button.click",function(n){i=this.buttons.indexOf(n),e.value=n.name,i=void 0},this),this},setCheckboxesType(){var e=this.parent;return e.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var e=this.buttons,t=0,i=e.length;t<i;t++){var n=e[t];n.selected=!1}return this},getAllButtonsState(){for(var e={},t=this.buttons,i=0,n=t.length;i<n;i++){var x=t[i];x.rexSizer.hidden||(e[x.name]=x.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){t===void 0&&(t=!0);for(var i=this.buttons,n=0,x=i.length;n<x;n++){var S=i[n];if(!S.rexSizer.hidden&&S.name===e){S.selected=t;break}}return this},getButtonState(e){for(var t=this.buttons,i=0,n=t.length;i<n;i++){var x=t[i];if(!x.rexSizer.hidden&&x.name===e)return x.selected}}},F6=function(e,t){if(e)if(Zi(e)){for(var i,n=0,x=e.length;n<x;n++)if(i=$C(e[n],t),i)return i}else{var i;for(var S in e)if(i=$C(e[S],t),i)return i}else return null},$C=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null},Tu={getButton(e){var t=this.buttons,i,n=typeof e;switch(n){case"number":i=t[e];break;case"string":i=F6(t,e);break;default:i=e,t.indexOf(i)===-1&&(i=void 0);break}return i},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,t){var i=this.buttons;if(e===void 0||typeof e=="boolean"){t=e;for(var n=0,x=i.length;n<x;n++)i[n]._click.setEnable(t)}else this.getButton(e)._click.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(e===void 0||typeof e=="boolean")for(var i=0,n=t.length;i<n;i++)t[i]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return e===void 0&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",e),this},emitButtonOver(e){for(var t=this.buttonGroup?this.buttonGroup:this,i=this.buttons,n=0,x=i.length;n<x;n++){var S=i[n];S._click.isOver&&(S._click.isOver=!1,t.fireEvent("button.out",S))}var S=this.getButton(e);return S&&(S._click.isOver=!0,t.fireEvent("button.over",S)),this},showButton(e){return wr(this.getButton(e)),this},hideButton(e){return Ar(this.getButton(e)),this},isButtonShown(e){return bc(this.getButton(e)),this},forEachButtton(e,t){for(var i=this.buttons,n=0,x=i.length;n<x;n++)t?e.call(t,i[n],n,i):e(i[n],n,i);return this}};class Eu{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var D6={fireEvent:b6};Object.assign(Eu.prototype,A6,L6,O6,Tu,D6);var Qv={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}};const Fn=Phaser.Utils.Objects.GetValue;let We=class extends qt{constructor(t,i){i===void 0&&(i={});var n=i.space;typeof n=="number"&&(i.space={item:n}),super(t,i),this.type="rexButtons",this.buttonGroup=new Eu({parent:this,eventEmitter:Fn(i,"eventEmitter",this),groupName:Fn(i,"groupName",void 0),clickConfig:Fn(i,"click",void 0)}).setButtonsType(i);var x=Fn(i,"background",void 0),S=Fn(i,"buttons",void 0);this.buttonsExpand=Fn(i,"expand",!1),this.buttonsAlign=Fn(i,"align",void 0),x&&this.addBackground(x),S&&this.addButtons(S),this.addChildrenMap("background",x),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(We.prototype,S6,P6,Tu,Qv),W.register("buttons",function(e){var t=new We(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Buttons",We);const B6=ts.prototype.add;var I6={addButton(e,t,i){return B6.call(this,e,t,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var i=0,n=e;i<n;i++)this.addButton(e[i],void 0,t);return this}};const G6=ts.prototype.remove,k6=ts.prototype.clear;var jv=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),G6.call(this,i,t),this):this},N6={remove(e,t){if(Zi(e))for(var i=e,n=0,x=i.length;n<x;n++)jv.call(this,i[n],t);else jv.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,k6.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)jv.call(this,t[i],e);return this}};const Ss=Phaser.Utils.Objects.GetValue;class Pu extends ts{constructor(t,i){i===void 0&&(i={});var n=Ss(i,"row",0),x=Ss(i,"column",i.col||0),S=Ss(i,"createCellContainerCallback"),M=Ss(i,"buttons",void 0),L=Ss(i,"expand",!0),F=L?1:0;if(S&&(i.createCellContainerCallback=void 0),M!==void 0){n=Math.max(n,M.length);for(var G=0,X=M.length;G<X;G++)x=Math.max(x,M[G].length)}i.row=n,i.column=x,i.columnProportions=F,i.rowProportions=F,super(t,i),this.type="rexGridButtons",this.buttonGroup=new Eu({parent:this,eventEmitter:Ss(i,"eventEmitter",this),groupName:Ss(i,"groupName",void 0),clickConfig:Ss(i,"click",void 0)}).setButtonsType(i);var Q=Ss(i,"background",void 0);if(this.buttonsExpand=L,Ss(i,"space",void 0),Q&&this.addBackground(Q),M)for(var tt,_,nt=0,lt=M.length;nt<lt;nt++){tt=M[nt];for(var ot=0,dt=tt.length;ot<dt;ot++)_=tt[ot],_&&this.addButton(_,ot,nt)}else if(S)for(var ct=0;ct<n;ct++)for(var ft=0;ft<x;ft++){var _=S(t,ft,ct);_&&this.addButton(_,ft,ct)}this.addChildrenMap("background",Q),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Pu.prototype,I6,N6,Tu,Qv),W.register("gridButtons",function(e){var t=new Pu(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.GridButtons",Pu);const KC=Fr.prototype.add;var Mu=function(e){return KC.call(this,e),this.buttonGroup.add(e),this},z6={addButton(e){if(Zi(e))for(var t=e,i=0,n=t.length;i<n;i++)Mu.call(this,t[i]);else Mu.call(this,e);return this},addButtons(e){if(Zi(e[0]))for(var t=e,i,n=0,x=t.length-1;n<=x;n++){i=t[n];for(var S=0,M=i.length;S<M;S++)Mu.call(this,i[S]);n>x&&KC.addNewLine(this)}else for(var S=0,M=e.length;S<M;S++)Mu.call(this,e[S]);return this}};const U6=Fr.prototype.remove,V6=Fr.prototype.clear;var qv=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),U6.call(this,i,t),this):this},X6={remove(e,t){if(Zi(e))for(var i=e,n=0,x=i.length;n<x;n++)qv.call(this,i[n],t);else qv.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,V6.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)qv.call(this,t[i],e);return this}};const Ga=Phaser.Utils.Objects.GetValue;class Ir extends Fr{constructor(t,i){i===void 0&&(i={});var n=i.space;typeof n=="number"&&(i.space={item:n,line:n}),super(t,i),this.type="rexFixWidthButtons",this.buttonGroup=new Eu({parent:this,eventEmitter:Ga(i,"eventEmitter",this),groupName:Ga(i,"groupName",void 0),clickConfig:Ga(i,"click",void 0)}).setButtonsType(i);var x=Ga(i,"background",void 0),S=Ga(i,"buttons",void 0);this.buttonsAlign=Ga(i,"align",void 0),x&&this.addBackground(x),S&&this.addButtons(S),this.addChildrenMap("background",x),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ir.prototype,z6,X6,Tu,Qv),W.register("fixWidthButtons",function(e){var t=new Ir(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.FixWidthButtons",Ir);var W6={setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,t,i,n,x){return this.childrenMap.fileChooser.loadFile(e,t,i,n,x),this},loadFilePromise(e,t,i,n){return this.childrenMap.fileChooser.loadFilePromise(e,t,i,n)}};const ZC=Phaser.Utils.Objects.GetValue;class _v extends Hs{constructor(t,i){super(t,i),this.type="rexFileSelectorButton";var n=new $o(t);t.add.existing(n),this.addBackground(n),this.addChildrenMap("fileChooser",n),this.setAccept(ZC(i,"accept","")),this.setMultiple(ZC(i,"multiple",!1)),n.on("change",function(x){var S=x.files;S.length!==0&&(S=Array.from(S),this.emit("select",S,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(_v.prototype,W6),W.register("fileSelectorButton",function(e){var t=new _v(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.FileSelectorButton",_v);var Y6={getChoice(e){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(e)},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(e):!1},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return e===void 0&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return e===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(e):!1},setChoicesButtonState(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return e?e.hasAnyButton():!1},hasAnyAction(){var e=this.childrenMap.actionsSizer;return e?e.hasAnyButton():!1},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return e?e.hasAnyButton():!1},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return e?e.hasAnyButton():!1}},H6={onCreateModalBehavior(e){e.on("button.click",function(t,i,n,x,S){var M=!1;switch(i){case"actions":M=!0;break;case"choices":e.hasAnyAction()||(M=!0);break}if(M){var L={index:n,text:t.text,button:t,dialog:e};switch(e.buttonsType){case"radio":L.value=e.getChoicesSelectedButtonName();break;case"checkboxes":L.value=e.getChoicesButtonStates();break;default:L.value=void 0}e.modalClose(L)}})},modal(e,t){return e&&e.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,Dl.modal.call(this,e,t),this}},JC={};Object.assign(JC,Y6,H6);const Ft=Phaser.Utils.Objects.GetValue;class sh extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexDialog",this.eventEmitter=Ft(i,"eventEmitter",this);var n=Ft(i,"background",void 0),x=Ft(i,"title",void 0),S=Ft(i,"toolbar",void 0),M=Ft(i,"toolbarBackground",void 0),L=Ft(i,"leftToolbar",void 0),F=Ft(i,"leftToolbarBackground",void 0),G=Ft(i,"content",void 0),X=Ft(i,"description",void 0),Q,tt=Ft(i,"choices",void 0),_=Ft(i,"choicesBackground",void 0),nt,lt=Ft(i,"actions",void 0),ot=Ft(i,"actionsBackground",void 0),dt=Ft(i,"click",void 0);n&&this.addBackground(n);var ct;S&&(ct=new We(t,{groupName:"toolbar",background:M,buttons:S,orientation:0,space:{item:Ft(i,"space.toolbarItem",0)},click:dt,eventEmitter:this.eventEmitter}),t.add.existing(ct));var ft;if(L&&(ft=new We(t,{groupName:"leftToolbar",background:F,buttons:L,orientation:0,space:{item:Ft(i,"space.leftToolbarItem",0)},click:dt,eventEmitter:this.eventEmitter}),t.add.existing(ft)),x||S||L){var xt=!!x&&Ft(i,"expand.title",!0),St=Ft(i,"align.title","center"),Pt=x&&!xt&&St==="center"||!x&&(S||L),wt=!Pt,bt;wt?bt=new qt(t,{orientation:0}):bt=new Gi(t),t.add.existing(bt);var kt=wt?!0:{height:!0};if(ft&&bt.add(ft,{align:"left",expand:kt}),x){wt&&!xt&&St==="right"&&bt.addSpace();var Dt={left:Ft(i,"space.titleLeft",0),right:Ft(i,"space.titleRight",0)},Vt=xt?1:0;bt.add(x,{align:St,proportion:Vt,expand:kt,padding:Dt}),wt&&!xt&&St==="left"&&bt.addSpace()}ct&&(wt&&!x&&bt.addSpace(),bt.add(ct,{align:"right",expand:kt}));var Dt;(G||X||tt||lt)&&(Dt={bottom:Ft(i,"space.title",0),top:Ft(i,"space.titleTop",0)});var Vt=Ft(i,"proportion.title",0);this.add(bt,{padding:Dt,proportion:Vt,expand:!0})}if(G){var Ht=Ft(i,"align.content","center"),se=Ft(i,"space.content",0),Dt={left:Ft(i,"space.contentLeft",0),right:Ft(i,"space.contentRight",0),bottom:X||tt||lt?se:0},Vt=Ft(i,"proportion.content",0),Ot=Ft(i,"expand.content",!0);this.add(G,{align:Ht,padding:Dt,proportion:Vt,expand:Ot})}if(X){var Ht=Ft(i,"align.description","center"),ue=Ft(i,"space.description",0),Dt={left:Ft(i,"space.descriptionLeft",0),right:Ft(i,"space.descriptionRight",0),bottom:tt||lt?ue:0},Vt=Ft(i,"proportion.description",0),Ot=Ft(i,"expand.description",!0);this.add(X,{align:Ht,padding:Dt,proportion:Vt,expand:Ot})}if(tt){var ge=Ft(i,"choicesType","").split("-"),Ee=rh(ge,"wrap")?Ir:rh(ge,"grid")?Pu:We,ze=rh(ge,"radio")?"radio":rh(ge,"checkboxes")?"checkboxes":void 0,Ge={left:Ft(i,"space.choicesBackgroundLeft",0),right:Ft(i,"space.choicesBackgroundRight",0),top:Ft(i,"space.choicesBackgroundTop",0),bottom:Ft(i,"space.choicesBackgroundBottom",0)},oi=Ft(i,"space.choice",0);Ee===We?Ge.item=oi:Ee===Ir?(Ge.item=oi,Ge.line=Ft(i,"space.choiceLine",oi)):(Ge.column=Ft(i,"space.choiceColumn",oi),Ge.row=Ft(i,"space.choiceRow",oi));var Xi={width:Ft(i,"choicesWidth",void 0),height:Ft(i,"choicesHeight",void 0),groupName:"choices",buttonsType:ze,background:_,buttons:tt,space:Ge,click:dt,eventEmitter:this.eventEmitter,setValueCallback:Ft(i,"choicesSetValueCallback",void 0),setValueCallbackScope:Ft(i,"choicesSetValueCallbackScope",void 0)};Ee===We&&(Xi.orientation=rh(ge,"x")?0:1),Q=new Ee(t,Xi),t.add.existing(Q);var Wi=Ft(i,"space.choices",0),Dt={left:Ft(i,"space.choicesLeft",0),right:Ft(i,"space.choicesRight",0),bottom:lt?Wi:0},Ht=Ft(i,"align.choices","center"),Vt=Ft(i,"proportion.choices",0),Ot=Ft(i,"expand.choices",!0);this.add(Q,{align:Ht,padding:Dt,proportion:Vt,expand:Ot}),this.buttonsType=ze}if(lt){nt=new We(t,{groupName:"actions",background:ot,buttons:lt,orientation:0,space:{item:Ft(i,"space.action",0)},expand:Ft(i,"expand.actions",!1),align:Ft(i,"align.actions","center"),click:dt,eventEmitter:this.eventEmitter}),t.add.existing(nt);var Dt={left:Ft(i,"space.actionsLeft",0),right:Ft(i,"space.actionsRight",0),bottom:Ft(i,"space.actionsBottom",0)},Vt=Ft(i,"proportion.action",0);this.add(nt,{align:"center",padding:Dt,proportion:Vt,expand:!0})}nh(this,"click"),nh(this,"over"),nh(this,"out"),nh(this,"enable"),nh(this,"disable"),this.addChildrenMap("background",n),this.addChildrenMap("title",x),this.addChildrenMap("toolbar",S),this.addChildrenMap("leftToolbar",L),this.addChildrenMap("content",G),this.addChildrenMap("description",X),this.addChildrenMap("choices",Q?Q.buttons:void 0),this.addChildrenMap("actions",nt?nt.buttons:void 0),this.addChildrenMap("choicesSizer",Q),this.addChildrenMap("actionsSizer",nt),this.addChildrenMap("toolbarSizer",ct),this.addChildrenMap("leftToolbarSizer",ft)}}var rh=function(e,t){return e.indexOf(t)!==-1},QC={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},nh=function(e,t){e.on(`button.${t}`,function(i,n,x,S,M){QC.hasOwnProperty(n)&&e.emit(`${QC[n]}.${t}`,i,x,S,M)})};Object.assign(sh.prototype,JC),W.register("dialog",function(e){var t=new sh(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Dialog",sh);var Ye=function(e,t,i){var n=new eh(e,t,i);return e.add.existing(n),n},$6=function(e){return e===void 0&&(e={}),K6.call(this,e),Z6.call(this,e),J6.call(this,e),Q6.call(this,e),this},K6=function(e){var t=this.childrenMap.title;e=e.title,e===null?t.hide():(t.show(),t.resetDisplayContent(e))},Z6=function(e){var t=this.childrenMap.content;if(e=e.content,e===null)t.hide();else if(t.show(),t.resetDisplayContent)t.resetDisplayContent(e);else{var i=e||"";t.setText(i)}},J6=function(e){var t=this.childrenMap.actions;if(t){var i=e.buttons;if(i){for(var S=this.scene,M=this.defaultActionConfig,L=this.defaultActionButtonCreator,F=0,G=i.length;F<G;F++){var X=i[F],Q=t[F];Q||(Q=Ye(S,M,L),this.addAction(Q)),Q.show().resetDisplayContent(X)}this.buttonMode=i.length;for(var F=i.length,G=t.length;F<G;F++)t[F].hide()}else{var n=t[0];n&&(e.buttonA===null?n.hide():(n.show(),n.resetDisplayContent(e.buttonA)));var x=t[1];x&&(e.buttonB===null?x.hide():(x.show(),x.resetDisplayContent(e.buttonB)))}}},Q6=function(e){var t=this.childrenMap.choices;if(t){var i=e.choices;i||(i=[]);for(var n=this.scene,x=this.defaultChoiceConfig,S=this.defaultActionButtonCreator,M=0,L=i.length;M<L;M++){var F=i[M];typeof F=="string"&&(F={text:F});var G=t[M];G||(G=Ye(n,x,S),this.addChoice(G)),G.show().resetDisplayContent(F);var X;F.hasOwnProperty("value")?X=F.value:X=F.text,G.setName(X)}for(var M=i.length,L=t.length;M<L;M++)t[M].hide()}};const j6=Phaser.Utils.Objects.Merge;var q6=function(e,t){Ki(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=j6(e,this.modalStyle);var i;this.buttonMode===0?this.hasAnyChoice()?i=!1:i=!0:i=!1,e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=i),e.hasOwnProperty("manualClose")||(e.manualClose=!i);var n=this,x=function(S){var M=S.index;M===n.confirmButtonIndex?n.emit("confirm",S):M===n.cancelButtonIndex&&n.emit("cancel",S),t&&t(S)};return Dl.modal.call(this,e,x),this},_6={setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}},jC={resetDisplayContent:$6,modal:q6};Object.assign(jC,_6);var tk=function(e){e.setHoverState&&e.setHoverState(!0)},ek=function(e){e.setHoverState&&e.setHoverState(!1)},ik=function(e,t,i,n){e.setActiveState&&e.setActiveState(n)},sk=function(e){e.setDisableState&&e.setDisableState(!1)},rk=function(e){e.setDisableState&&e.setDisableState(!0)},qC=function(){this.on("button.over",tk).on("button.out",ek).on("button.enable",sk).on("button.disable",rk).on("button.statechange",ik)};const nk=Phaser.Utils.Objects.GetValue;var ak=function(e,t,i){var n=nk(t,"$type");n===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(n="textarea");var x;switch(n){case"textarea":x=new NC(e,t,i);break;default:x=new Ye(e,t,i);break}return e.add.existing(x),x};const tp=Phaser.Utils.Objects.GetValue;class wu extends sh{constructor(t,i,n){i=i?ht(i):{},n===void 0&&(n={});var x=tp(n,"background",Ne);i.background=x(t,i.background),i.title=Ye(t,i.title,n.title),i.content=ak(t,i.content,n.content),i.content instanceof th&&Bs(i,"height")&&!Bs(i,"proportion.content")&&J(i,"proportion.content",1);var S=i.button,M=i.buttonA||S,L=i.buttonB||S,F=i.buttonMode;F===void 0&&(F=M&&L?2:M?1:0);var G=n.button,X=n.buttonA||G,Q=n.buttonB||G;switch(F){case 2:i.actions=[Ye(t,M,X),Ye(t,L,Q)];break;case 1:i.actions=[Ye(t,M,X)];break;case 0:break;default:i.actions=[];break}var tt=i.choice;tt&&(i.choices=[]),super(t,i),this.type="rexConfirmDialog",this.buttonMode=F,this.defaultActionConfig=S,this.defaultActionButtonCreator=G,this.defaultChoiceConfig=tt,this.defaultChoiceCreator=n.choice;var _=this.childrenMap.actions;this.addChildrenMap("buttonA",_?_[0]:null),this.addChildrenMap("buttonB",_?_[1]:null),qC.call(this),this.setConfirmButtonIndex(tp(i,"confirmButtonIndex",0)),this.setCancelButtonIndex(tp(i,"cancelButtonIndex",1)),this.modalStyle=i.modal||{}}}Object.assign(wu.prototype,jC),W.register("confirmDialog",function(e,t){var i=new wu(this.scene,e,t);return this.scene.add.existing(i),i}),J(window,"RexPlugins.UI.ConfirmDialog",wu);const _C=Phaser.Utils.Objects.GetValue;var tS=function(e,t){var i=t.dialog,n=!i;if(n){var x=t.style;x.buttonMode=2,i=new wu(e,x,t.creators),e.add.existing(i)}i.setConfirmButtonIndex(_C(t,"confirmButtonIndex",0)).setCancelButtonIndex(_C(t,"cancelButtonIndex",1)).resetDisplayContent(t.content).layout(),n&&t.onCreateDialog&&t.onCreateDialog(i);var S=t.modal;S&&!S.hasOwnProperty("destroy")&&(S.destroy=n);var M=t.confirm,L=t.cancel,F=t.confirmScope,G=t.cancelScope;M&&i.once("confirm",M,F),L&&i.once("cancel",L,G);var X=function(Q){i.off("confirm",M,F),i.off("cancel",L,G)};return i.modal(S,X),i};class eS extends Hs{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexConfirmActionButton",this.setConfirmDialogEnable(),this.confirmActionConfig=Hi(i.confirmDialog||{}),i.confirm&&this.setConfirmCallback(i.confirm,i.confirmScope),i.cancel&&this.setCancelCallback(i.cancel,i.cancelScope),this.onClickCallback=function(){if(this.confirmDialogEnable){if(this.confirmDialog)return;this.confirmDialog=tS(t,this.confirmActionConfig),this.confirmDialog.once("destroy",function(){this.confirmDialog=void 0},this)}else this.runConfirmCallback()},this.onClick(this.onClickCallback,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.confirmDialog&&this.confirmDialog.destroy(),super.destroy(t),this.confirmActionConfig=void 0,this.onClickCallback=void 0,this.confirmDialog=void 0)}setConfirmCallback(t,i){return this.confirmActionConfig.confirm=t,this.confirmActionConfig.confirmScope=i,this}setCancelCallback(t,i){return this.confirmActionConfig.cancel=t,this.confirmActionConfig.cancelScope=i,this}setConfirmDialogContent(t){return this.confirmActionConfig.content=t,this}setConfitmDialogStyle(t){return this.confirmActionConfig.style=t,this}setConfitmDialogModalConfig(t){return this.confirmActionConfig.modal=t,this}setConfirmDialogEnable(t){return t===void 0&&(t=!0),this.confirmDialogEnable=t,this}runConfirmCallback(){var t=this.confirmActionConfig.confirm,i=this.confirmActionConfig.confirmScope;return t&&t.call(i),this}}W.register("confirmActionButton",function(e){var t=new eS(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ConfirmActionButton",eS);var ok=function(e){return e===void 0&&(e={}),hk.call(this,e),lk.call(this,e),uk.call(this,e),this},hk=function(e){var t=this.childrenMap.title;e.title===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.title))},lk=function(e){var t=this.childrenMap.firstNameTitle;if(e.firstNameTitle===null)this.hide(t);else{this.show(t);var i=e.firstNameTitle||"";t.resetDisplayContent(i)}var n=this.childrenMap.firstNameInput;if(e.firstName===null)this.hide(n);else{this.show(n);var x=e.firstName||"";n.setText(x)}var S=this.childrenMap.lastNameTitle;if(e.lastNameTitle===null)this.hide(S);else{this.show(S);var M=e.lastNameTitle||"";S.resetDisplayContent(M)}var L=this.childrenMap.lastNameInput;if(e.lastName===null)this.hide(L);else{this.show(L);var F=e.lastName||"";L.setText(F)}},uk=function(e){var t=this.childrenMap.actions[0];e.button===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.button))};const dk=Phaser.Utils.Objects.Merge;var fk=function(e,t){Ki(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=dk(e,this.modalStyle),e.anyTouchClose=!1,e.manualClose=!1;var i=this,n=function(x){x.firstName=i.firstName,x.lastName=i.lastName,i.emit("confirm",x),t&&t(x)};return Dl.modal.call(this,e,n),this},ck={resetDisplayContent:ok,modal:fk},Gr=function(e,t,i){i===void 0&&(i=!0),i?t=t?ht(t):{}:t||(t={});var n=new yo(e,t);return e.add.existing(n),n};const zi=Phaser.Utils.Objects.GetValue;var vk=function(e,t,i){var n=yn(zi(t,"layoutMode",0)),x=n===0,S=new qt(e,{orientation:n,space:{item:zi(t,"space.firstName",0)}});e.add.existing(S);var M=new qt(e,{orientation:"x"});e.add.existing(M);var L=zi(t,"firstNameTitle",t.nameTitle),F=Ye(e,L,i.firstNameTitle||i.nameTitle);M.add(F,{expand:!0,proportion:zi(t,"proportion.firstNameTitle",0),padding:{right:zi(t,"space.firstNameTitle",0)}});var G=t.nameInput||{},X=zi(t,"firstNameInput",G),Q=Gr(e,X,i.firstNameInput||i.nameInput),tt=!X.hasOwnProperty("width");M.add(Q,{expand:!0,proportion:tt?1:0});var _=new qt(e,{orientation:"x"});e.add.existing(_);var nt=zi(t,"lastNameTitle",t.nameTitle),lt=Ye(e,nt,i.lastNameTitle||i.nameTitle);_.add(lt,{expand:!0,proportion:zi(t,"proportion.lastNameTitle",0),padding:{right:zi(t,"space.lastNameTitle",0)}});var ot=zi(t,"firstNameInput",G),dt=Gr(e,ot,i.lastNameInput||i.nameInput),ct=!ot.hasOwnProperty("width");if(_.add(dt,{expand:!0,proportion:ct?1:0}),x){var ft=tt?1:0,xt=zi(t,"proportion.firstName",ft);S.add(M,{expand:!0,proportion:xt});var St=ct?1:0,Pt=zi(t,"proportion.lastName",St);S.add(_,{expand:!0,proportion:Pt})}else S.add(M,{expand:tt,proportion:0}),S.add(_,{expand:ct,proportion:0});return S.addChildrenMap("firstNameTitle",F),S.addChildrenMap("firstNameInput",Q),S.addChildrenMap("lastNameTitle",lt),S.addChildrenMap("lastNameInput",dt),S};const pk=Phaser.Utils.Objects.GetValue;class ep extends sh{constructor(t,i,n){i===void 0&&(i={}),n===void 0&&(n={}),i.orientation="y";var x=i.space;x&&(x.hasOwnProperty("names")&&(x.content=x.names),x.hasOwnProperty("namesLeft")&&(x.contentLeft=x.namesLeft),x.hasOwnProperty("namesRight")&&(x.contentRight=x.namesRight));var S=pk(n,"background",Ne);i.background=S(t,i.background),i.title=Ye(t,i.title,n.title),i.content=vk(t,i,n),i.actions=[Ye(t,i.button,n.button)],super(t,i),this.type="rexNameInputDialog";var M=i.content.childrenMap;this.addChildrenMap("firstNameTitle",M.firstNameTitle),this.addChildrenMap("firstNameInput",M.firstNameInput),this.addChildrenMap("lastNameTitle",M.lastNameTitle),this.addChildrenMap("lastNameInput",M.lastNameInput),this.addChildrenMap("button",i.actions[0]),qC.call(this),this.modalStyle=i.modal||{}}get firstName(){return this.childrenMap.firstNameInput.text}set firstName(t){this.childrenMap.firstNameInput.setText(t)}setFirstName(t){return this.firstName=t,this}get lastName(){return this.childrenMap.lastNameInput.text}set lastName(t){this.childrenMap.lastNameInput.setText(t)}setLastName(t){return this.lastName=t,this}}Object.assign(ep.prototype,ck),W.register("nameInputDialog",function(e,t){var i=new ep(this.scene,e,t);return this.scene.add.existing(i),i}),J(window,"RexPlugins.UI.NameInputDialog",ep);var Dn=function(e,t){if(e){var i=yi(e);i&&i.remove(e,t)}};const Au=Phaser.Utils.Objects.GetValue;var ah=function(e,t,i){var n=Au(e,`proportion.${t}`,i.proportion),x=Au(e,`align.${t}`,"center"),S=Au(e,`space.${t}`,void 0);if(typeof S=="number"&&i.paddingKey){var M=S;S={},S[i.paddingKey]=M}var L=Au(e,`expand.${t}`,!0);return{proportion:n,align:x,padding:S,expand:L}},Ru=function(e){return ah(e,"header",{proportion:0,paddingKey:"bottom"})},Lu=function(e){return ah(e,"leftSide",{proportion:0,paddingKey:"right"})},bu=function(e){return ah(e,"content",{proportion:1})},Ou=function(e){return ah(e,"rightSide",{proportion:0,paddingKey:"left"})},Fu=function(e){return ah(e,"footer",{proportion:0,paddingKey:"top"})},$s=function(e){return{proportion:1,align:"center",padding:0,expand:!0}},Ks=function(e,t){var i=new qt(e,{orientation:t});return e.add.existing(i),i},gk=function(e){var t=this.scene,i=e.header;i&&this.add(i,Ru(e));var n=Ks(t,0);this.add(n,$s());var x=e.leftSide;x&&n.add(x,Lu(e));var S=e.content;S&&n.add(S,bu(e));var M=e.rightSide;M&&n.add(M,Ou(e));var L=e.footer;L&&this.add(L,Fu(e))},mk=function(e){var t=this.scene,i=e.header;i&&this.add(i,Ru(e));var n=Ks(t,0);this.add(n,$s());var x=e.leftSide;x&&n.add(x,Lu(e));var S=Ks(t,1);n.add(S,$s());var M=Ks(t,0);S.add(M,$s());var L=e.content;L&&M.add(L,bu(e));var F=e.rightSide;F&&M.add(F,Ou(e));var G=e.footer;G&&S.add(G,Fu(e))},xk=function(e){var t=this.scene,i=e.header;i&&this.add(i,Ru(e));var n=Ks(t,0);this.add(n,$s());var x=Ks(t,1);n.add(x,$s());var S=Ks(t,0);x.add(S,$s());var M=e.leftSide;M&&S.add(M,Lu(e));var L=e.content;L&&S.add(L,bu(e));var F=e.footer;F&&x.add(F,Fu(e));var G=e.rightSide;G&&n.add(G,Ou(e))},yk=function(e){var t=this.scene,i=e.header;i&&this.add(i,Ru(e));var n=Ks(t,0);this.add(n,$s());var x=e.leftSide;x&&n.add(x,Lu(e));var S=Ks(t,1);n.add(S,$s());var M=e.content;M&&S.add(M,bu(e));var L=e.footer;L&&S.add(L,Fu(e));var F=e.rightSide;F&&n.add(F,Ou(e))};const Ck=Phaser.Utils.Objects.GetValue,iS=[gk,mk,xk,yk];var Sk=function(e){e===void 0&&(e={});var t=e.background,i=e.header,n=e.leftSide,x=e.content,S=e.rightSide,M=e.footer;Dn(t),Dn(i),Dn(n),Dn(x),Dn(S),Dn(M),this.clear(!0),t&&this.addBackground(t);var L=Ck(e,"layoutMode",0);typeof L=="string"&&(L=Tk[L.toUpperCase()]);var F=iS[L]||iS[0];return F.call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("header",i),this.addChildrenMap("leftSide",n),this.addChildrenMap("content",x),this.addChildrenMap("rightSide",S),this.addChildrenMap("footer",M),this};const Tk={FFF:0,LFF:1,FFR:2,LFR:3};class ip extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexHolyGrail",this.build(i)}}var Ek={build:Sk};Object.assign(ip.prototype,Ek),W.register("holyGrail",function(e){var t=new ip(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.HolyGrail",ip);var Pk={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var i=this.getButtonsSizer(e);return i?i.getButton(t):void 0},setButtonEnable(e,t,i){return this.getButtonsSizer(e).setButtonEnable(t,i),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var i=this.getButtonsSizer(e);return i?(i.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return wr(this.getButton(e,t)),this},showLeftButton(e){return wr(this.getLeftButton(e)),this},showRightButton(e){return wr(this.getRightButton(e)),this},showTopButton(e){return wr(this.getTopButton(e)),this},showBottomButton(e){return wr(this.getBottomButton(e)),this},hideButton(e,t){return Ar(this.getButton(e,t)),this},hideLeftButton(e){return Ar(this.getLeftButton(e)),this},hideRightButton(e){return Ar(this.getRightButton(e)),this},hideTopButton(e){return Ar(this.getTopButton(e)),this},hideBottomButton(e){return Ar(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,i){return this.getButtonsSizer(e).removeButton(t,i),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,i){return this.getButtonsSizer(e).forEachButtton(t,i),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}};const ne=Phaser.Utils.Objects.GetValue;class sp extends ts{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,i.columnProportions=[0,0,0],i.rowProportions=[0,0,0];var n=ne(i,"expand.panel",!1);n&&(i.columnProportions[1]=1,i.rowProportions[1]=1),super(t,i),this.type="rexTabs",this.eventEmitter=ne(i,"eventEmitter",this);var x=ne(i,"background",void 0),S=ne(i,"panel",void 0),M=ne(i,"leftButtons",void 0),L=ne(i,"leftButtonsBackground",void 0),F,G=ne(i,"rightButtons",void 0),X=ne(i,"rightButtonsBackground",void 0),Q,tt=ne(i,"topButtons",void 0),_=ne(i,"topButtonsBackground",void 0),nt,lt=ne(i,"bottomButtons",void 0),ot=ne(i,"bottomButtonsBackground",void 0),dt,ct=ne(i,"click",void 0);if(x&&this.addBackground(x),S&&this.add(S,{column:1,row:1,expand:n}),M){var ft=ne(i,"space.leftButtonsOffset",0),xt=ne(i,"space.leftButton",0),St=ne(i,"expand.leftButtons",!1),Pt=ne(i,"align.leftButtons","top");F=new We(t,{groupName:"left",background:L,buttons:M,orientation:"y",space:{item:xt},expand:St,click:ct,eventEmitter:this.eventEmitter}),this.add(F,{column:0,row:1,align:Pt,padding:{top:ft},expand:St})}if(G){var wt=ne(i,"space.rightButtonsOffset",0),bt=ne(i,"space.rightButton",0),kt=ne(i,"expand.rightButtons",!1),Dt=ne(i,"align.rightButtons","top");Q=new We(t,{groupName:"right",background:X,buttons:G,orientation:"y",space:{item:bt},expand:kt,click:ct,eventEmitter:this.eventEmitter}),this.add(Q,{column:2,row:1,align:Dt,padding:{top:wt},expand:kt})}if(tt){var Vt=ne(i,"space.topButtonsOffset",0),Ht=ne(i,"space.topButton",0),se=ne(i,"expand.topButtons",!1),Ot=ne(i,"align.topButtons","left");nt=new We(t,{groupName:"top",background:_,buttons:tt,orientation:"x",space:{item:Ht},expand:se,align:ne(i,"align.topButtons",void 0),click:ct,eventEmitter:this.eventEmitter}),this.add(nt,{column:1,row:0,align:Ot,padding:{left:Vt},expand:se})}if(lt){var ue=ne(i,"space.bottomButtonsOffset",0),ge=ne(i,"space.bottomButton",0),Ee=ne(i,"expand.bottomButtons",!1),ze=ne(i,"align.bottomButtons","left");dt=new We(t,{groupName:"bottom",background:ot,buttons:lt,orientation:"x",space:{item:ge},expand:Ee,align:ne(i,"align.bottomButtons",void 0),click:ct,eventEmitter:this.eventEmitter}),this.add(dt,{column:1,row:2,align:ze,padding:{left:ue},expand:Ee})}this.addChildrenMap("background",x),this.addChildrenMap("panel",S),this.addChildrenMap("leftButtons",M),this.addChildrenMap("rightButtons",G),this.addChildrenMap("topButtons",tt),this.addChildrenMap("bottomButtons",lt),this.addChildrenMap("leftButtonsSizer",F),this.addChildrenMap("rightButtonsSizer",Q),this.addChildrenMap("topButtonsSizer",nt),this.addChildrenMap("bottomButtonsSizer",dt)}}Object.assign(sp.prototype,Pk),W.register("tabs",function(e){var t=new sp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Tabs",sp),W.register("slider",function(e){var t=new Ia(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Slider",Ia);class sS{constructor(t,i){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,i){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,i),this}setCellContainerAlign(t){return typeof t=="string"&&(t=Ea[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var i=this.parent;this._deltaHeight===0&&t!==0?i.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&i.nonZeroDeltaHeightCount--;var n=this._deltaHeight!==t;if(this._deltaHeight=t,n){i.resetTotalRowsHeight();var x=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(x,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(sS.prototype,Li);const rS=Phaser.Utils.Objects.GetValue,Mk=Phaser.Utils.Array.SpliceOne;class wk{constructor(t,i){this.parent=t,this.cells=[],this.cellPool=new mt,this.resetFromJSON(i)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var i=t.cellHeight;i===void 0&&(i=60);var n=t.cellWidth;return n===void 0&&(n=60),this.setDefaultCellHeight(i),this.setDefaultCellWidth(n),this.initCells(rS(t,"cellsCount",0)),this.setColumnCount(rS(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var i=this.cells;i.length=t;for(var n=0;n<t;n++)i[n]=null;return this}insertNewCells(t,i){var n=this.cells;if(t===n.length){var x=t+i;n.legth=x;for(var S=t;S<x;S++)n[S]=null}else{var M=[];M.length=i;for(var S=0;S<i;S++)M[S]=null;this.cells.splice(t,0,...M)}return this.resetTotalRowsHeight(),this}removeCells(t,i){for(var n=t+i,x=t;x<n;x++)this.freeCell(x);return n===this.cells.length?this.cells.length=t:(i===1?Mk(this.cells,t):this.cells.splice(t,i),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){this.colCount=t,this.resetTotalRowsHeight();var i=this.parent;if(i.expandCellSize){var n=i.scrollMode===0?i.width:i.height,x=n/t;this.setDefaultCellWidth(x)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,i){if(i===void 0&&(i=0),t===0)return 0;if(this.defaultCellHeightMode){var L=t/this.defaultCellHeight;switch(i){case 1:L=Math.ceil(L);break;default:L=Math.floor(L);break}return L}for(var n=this.rowCount,x=t,S,M,L=0;;)if(M=this.getRowHeight(L),x-=M,S=L>=0&&L<n,x>0&&S)L+=1;else{if(x===0)return i===2&&(L+=1),L;if(i===1){var F=L;L+=1,S=L>=0&&L<n,S||(L=F)}return L}}widthToColIndex(t,i){if(t===0)return 0;var n=t/this.defaultCellWidth;return i?n=Math.ceil(n):n=Math.floor(n),n}colRowToCellIndex(t,i){return t>=this.colCount?null:i*this.colCount+t}rowIndexToHeight(t,i){if(this.defaultCellHeightMode)return(i-t+1)*this.defaultCellHeight;for(var n,x=0,S=t;S<=i;S++)n=this.getRowHeight(S),x+=n;return x}colIndexToWidth(t,i){return(i-t+1)*this.defaultCellWidth}getRowHeight(t){var i=this.colCount;if(i<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var n=0,x,S=0;S<i;S++)x=this.getCellHeight(this.colRowToCellIndex(S,t)),n<x&&(n=x);return n}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var i;if(this.defaultCellHeightMode)i=this.defaultCellHeight;else{var n=this.getCell(t,!1),x=n?n.deltaHeight:0;i=this.defaultCellHeight+x}return i}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,i){if(!this.isValidCellIdx(t))return null;if(i===void 0&&(i=!0),this.cells[t]===null&&i){var n=this.newCell(t);this.cells[t]=n}return this.cells[t]}newCell(t){var i=this.cellPool.pop();return i===null?i=new sS(this):i.setParent(this),i.index=t,i}buildCellIndex(t){t===void 0&&(t=0);for(var i=this.cells,n,x=t,S=i.length;x<S;x++)n=i[x],n&&(n.index=x);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var Ak=function(e){var t=this.table,i=this.topTableOY,n=this.bottomTableOY,x=e>i,S=e<n;if(this.clampTableOXY){var M=t.rowCount,L=t.heightToRowIndex(this.instHeight,1);M<L?e=0:x?e=i:S&&(e=n)}return this._tableOY!==e&&(this._tableOY=e),x&&(this.execeedTopState||this.emit("execeedtop",this,e,i)),this.execeedTopState=x,S&&(this.execeedBottomState||this.emit("execeedbottom",this,e,n)),this.execeedBottomState=S,this},Rk=function(e){var t=this.table,i=this.leftTableOX,n=this.rightTableOX,x=e>this.leftTableOX,S=e<this.rightTableOX;if(this.clampTableOXY){var M=t.colCount,L=t.widthToColIndex(this.instWidth,!0);M<L?e=0:x?e=i:S&&(e=n)}return this._tableOX!==e&&(this._tableOX=e),x&&(this.execeedLeftState||this.emit("execeedleft",this,e,i)),this.execeedLeftState=x,S&&(this.execeedRightState||this.emit("execeedright",this,e,n)),this.execeedRightState=S,this},rp=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};const Lk=Phaser.Geom.Intersects.RectangleToRectangle,bk=Phaser.Geom.Rectangle.Overlaps;var Ok=function({parent:e,mask:t,children:i,onVisible:n,onInvisible:x,scope:S}){if(t){i===void 0&&(i=e.getAllChildren());for(var M=!!n||!!x,L=e.getBounds(),F=rp(t),G,X,Q,tt,_=0,nt=i.length;_<nt;_++)if(G=i[_],G!==F&&Fk(G)){if(tt=G.visible,G.getBounds)switch(X=G.getBounds(X),Q=Dk(L,X),Q){case 4:Bk(e,G);break;case 0:Lk(L,X)||bk(L,X)?np(e,G,t):Ik(e,G);break;default:np(e,G,t);break}else np(e,G,t);if(M&&G.visible!==tt){var lt=G.visible?n:x;lt&&(S?lt.call(S,G,e):lt(G,e))}}}},Fk=function(e){if(!e.displayList)return!1;for(;;){var t=e.rexContainer;if(t)if(t.visible){var i=t.parent;if(i){e=i;continue}else return!0}else return!1;else return e.visible}},Dk=function(e,t){var i=t.top,n=t.bottom,x=t.left,S=t.right,M=0;return M+=e.contains(x,i)?1:0,M+=e.contains(x,n)?1:0,M+=e.contains(S,i)?1:0,M+=e.contains(S,n)?1:0,M},Bk=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!0))},np=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(i),e.setChildMaskVisible(t,!0))},Ik=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!1))};const ka=Phaser.Utils.Objects.GetValue,Gk={update:0,everyTick:1};var nS={setupChildrenMask(e){return e===!1?this:(this.setMaskUpdateMode(ka(e,"updateMode",0)),this.enableChildrenMask(ka(e,"padding",0)),this.setMaskLayer(ka(e,"layer",void 0)),this.onMaskGameObjectVisible=ka(e,"onVisible"),this.onMaskGameObjectInvisible=ka(e,"onInvisible"),this.maskGameObjectCallbackScope=ka(e,"scope"),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this.onMaskGameObjectVisible=null,this.onMaskGameObjectInvisible=null,this.maskGameObjectCallbackScope=null,this):this},setMaskUpdateMode(e){return typeof e=="string"&&(e=Gk[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=qi.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return e===void 0&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):Ok({parent:this,mask:this.childrenMask,onVisible:this.onMaskGameObjectVisible,onInvisible:this.onMaskGameObjectInvisible,scope:this.maskGameObjectCallbackScope}),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var e=rp(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}},kk=function(){if(this.cellsCount!==0){var e=this.scaleX,t=this.scaleY,i=e===1&&t===1;i||this.setScale(1);var n=this.table,x=this.tableOYOffset,S=this.tableOY+x,M=this.tableOX;this.startRowIndex=Math.max(n.heightToRowIndex(-S,2),0);for(var L=this.startRowIndex,F=Math.max(n.widthToColIndex(-M),0),G=F,X=n.colRowToCellIndex(G,L),Q=this.bottomBound,tt=this.rightBound,_=n.cellsCount-1,nt=n.colCount-1,lt=this.getCellTLX(G),ot=lt,dt=this.getCellTLY(L)+x,ct=dt;ct<Q&&X<=_;){if(this.table.isValidCellIdx(X)){var ft=n.getCell(X,!0);this.visibleCells.set(ft),this.preVisibleCells.contains(ft)||this.showCell(ft);var xt,St;if(this.scrollMode===0?(xt=ot,St=ct):(xt=ct,St=ot),ft.cellContainerAlign==null)ft.setXY(xt,St);else{var Pt=ft.getContainer();Oo(Pt,xt,St,ft.width,ft.height,ft.cellContainerAlign),ft.setXY(Pt.x,Pt.y)}}ot<tt&&G<nt?(ot+=n.getColWidth(G),G+=1):(ot=lt,ct+=n.getRowHeight(L),G=F,L+=1),X=n.colRowToCellIndex(G,L)}i||this.setScale(e,t)}},aS=function(e){var t=null,i=e.getContainer();if(i?(t=i,e.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",e,t,this),this.cellContainersPool){var i=e.getContainer();i?t===null?this.cellContainersPool.add(i):t!==i&&(this.cellContainersPool.add(i),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},Nk=function(e){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,i=this.tableOX+this.table.colIndexToWidth(0,e-1)+t;return i},zk=function(e){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,i=this.tableOY+this.table.rowIndexToHeight(0,e-1)+t;return i},Uk=function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate(function(i){t.contains(i)||this.hideCell(i)},this)},oS=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&(t.setScale(1).setAlpha(1),this.cellContainersPool.killAndHide(t))}e.destroyContainer()},Vk=function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),e&&(hS.call(this),this.hideCells()),hS.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),t&&(this.layoutChildrenMask(),this.maskChildren()),this},hS=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},Xk=function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},lS=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var i=this.tableOY-(this.scrollMode===0?t:e),n=this.tableOX-(this.scrollMode===0?e:t),x=this.table,S=x.heightToRowIndex(-i,0),M=x.widthToColIndex(-n),L=x.colRowToCellIndex(M,S);return L===null||!this.isCellVisible(L)?null:L},Wk=function(e,t){var i=lS.call(this,e,t);if(i!==null)return this.getCellContainer(i)},Yk=function(e,t){return this.visibleCells.each(e,t),this},Hk=function(e,t){return this.visibleCells.iterate(e,t),this},$k=function(e,t){return this.table.cells.slice().forEach(e,t),this},Kk=function(e,t){return this.table.cells.forEach(e,t),this},Zk=function(e){var t=this.cellsCount;return t===e?this:(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t),this)};const Jk=Phaser.Math.Clamp;var Qk=function(e,t){return typeof e=="object"&&(e=e.index),t===void 0&&(t=1),t<=0?this:(e=Jk(e,0,this.cellsCount),this.table.insertNewCells(e,t),this)},jk=function(e,t){if(typeof e=="object"&&(e=e.index),t===void 0&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var i,n=e,x=e+t;n<x;n++)i=this.getCell(n,!1),i&&(this.visibleCells.contains(i)&&(oS.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(e,t),this},qk=function(e){return this.table.colCount===e?this:(this.table.setColumnCount(e),this)},_k=function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},tN=function(e){var t=this.table.getCell(e,!1);return!t||!t.container?this:(aS.call(this,t),this)},uS={setTableOY:Ak,setTableOX:Rk,showCells:kk,showCell:aS,getCellTLX:Nk,getCellTLY:zk,hideCells:Uk,hideCell:oS,updateTable:Vk,isCellVisible:Xk,pointToCellIndex:lS,pointToCellContainer:Wk,eachVisibleCell:Yk,iterateVisibleCell:Hk,eachCell:$k,iterateCell:Kk,setCellsCount:Zk,insertNewCells:Qk,removeCells:jk,setColumnCount:qk,setGridSize:_k,updateVisibleCell:tN};Object.assign(uS,nS);const eN=Phaser.GameObjects.Group,dS=Phaser.Structs.Set,Ui=Phaser.Utils.Objects.GetValue;let fS=class extends Ci{constructor(t,i,n,x,S,M){M===void 0&&(M={}),super(t,i,n,x,S),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new dS,this.preVisibleCells=new dS,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var L=Ui(M,"reuseCellContainer",!1);L&&(this.cellContainersPool=new eN(t));var F=Ui(M,"cellVisibleCallback",null);if(F!==null){var G=Ui(M,"cellVisibleCallbackScope",void 0);this.on("cellvisible",F,G)}if(F=Ui(M,"cellInvisibleCallback",null),F!==null){var G=Ui(M,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",F,G)}Ui(M,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(Ui(M,"mask",void 0)),this.setScrollMode(Ui(M,"scrollMode",0)),this.setClampMode(Ui(M,"clampTableOXY",!0)),this.setStartFromBottomEnable(Ui(M,"startFromBottom",!1));var X,Q,tt,_=this.scrollMode===0;if(_?(X=M.cellWidth,Q=M.cellHeight,tt=M.columns):(X=M.cellHeight,Q=M.cellWidth,tt=Ui(M,"rows",M.columns)),this.fixedCellSize=Ui(M,"fixedCellSize",!1),this.expandCellSize=!this.fixedCellSize&&X===void 0,tt||(tt=1),this.fixedCellSize)tt=Math.max(Math.floor(this.instWidth/X),1);else if(this.expandCellSize){var x=_?this.width:this.height;X=x/tt}M.cellWidth=X,M.cellHeight=Q,M.columns=tt,this.table=new wk(this,M),this.updateTable()}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=iN[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}setStartFromBottomEnable(t){return t===void 0&&(t=!0),this.startFromBottomEnable=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,i){return this.setTableOY(i).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,i){return this.addTableOY(i).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}setTableOXByPercentage(t){return this.setTableOX(-this.tableVisibleWidth*t),this}getTableOXPercentage(){var t=this.tableVisibleWidth;return t===0?0:this.tableOX/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}set s(t){this.setTableOXByPercentage(t).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var i=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-i).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var i=this.table.getCell(t,!1),n;return i&&(n=i.getContainer()),n}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,i){var n;return typeof t=="number"?n=this.table.getCell(t,!0):n=t,n.height=i,this}setCellWidth(t,i){var n;return typeof t=="number"?n=this.table.getCell(t,!0):n=t,n.width=i,this}resetAllCellsSize(t,i){if(this.scrollMode===1){var n=t;t=i,i=n}this.table.setDefaultCellHeight(i).setDefaultCellWidth(t);for(var x=this.table.cells,S=0,M=x.length;S<M;S++){var L=x[S];L&&(L.deltaHeight=0)}if(this.fixedCellSize){var F=Math.floor(this.instWidth/t);this.table.setColumnCount(F)}return this.updateTable(!0,!0),this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get tableOYOffset(){if(this.startFromBottomEnable){var t=this.tableHeight-this.instHeight;if(t<0)return-t}return 0}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t=this.tableWidth-this.instWidth;return t<0&&(t=0),t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,i){if(this.width===t&&this.height===i)return this;if(super.resize(t,i),this.fixedCellSize){var n=Math.floor(this.instWidth/this.table.defaultCellWidth);this.table.setColumnCount(n)}else this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount);return this.updateTable(!0,!0),this}};Object.assign(fS.prototype,uS);const iN={v:0,vertical:0,h:1,horizontal:1};var sN=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(t){e.tableOY=t}}),Object.defineProperty(e,"childOX",{configurable:!0,get:function(){return e.tableOX},set:function(t){e.tableOX=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"leftChildOX",{get:function(){return e.leftTableOX}}),Object.defineProperty(e,"rightChildOX",{get:function(){return e.rightTableOX}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}}),Object.defineProperty(e,"childVisibleWidth",{get:function(){return e.instWidth}}),Object.defineProperty(e,"childWidth",{get:function(){return e.tableWidth}})},rN=function(e){e.on("cellvisible",function(t,M,n){var x=this.createCellContainerCallback,S=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var M;S?M=x.call(S,t,M,n):M=x(t,M,n),M&&(t.cellContainerAlign==null&&M.setOrigin&&M.setOrigin(0),M.isRexSizer&&M.layout()),t.item=void 0,t.items=void 0,t.setContainer(M)},this)},Ts=function(e,t,i,n,x,S,M){var L;if(x===void 0)L=n;else{var F=S.camera,G=n+F.scrollX*(i.scrollFactorX-1),X=x+F.scrollY*(i.scrollFactorY-1);L=i.pointToCellIndex(G,X)}if(L!=null){var Q=i.getCellContainer(L);Q&&e.emit(t,Q,L,S,M)}},nN=function(e,t){e.on("pointerdown",function(i,n,x,S){Ts(this.eventEmitter,"cell.down",e,i.worldX,i.worldY,i,S)},this).on("pointerup",function(i,n,x,S){Ts(this.eventEmitter,"cell.up",e,i.worldX,i.worldY,i,S)},this)},aN=function(e,t){e.on("pointermove",cS,this).on("pointerover",cS,this).on("pointerout",oN,this)},cS=function(e,t,i,n){var x=this.childrenMap.child,S=e.camera,M=e.worldX+S.scrollX*(x.scrollFactorX-1),L=e.worldY+S.scrollY*(x.scrollFactorY-1),F=x.pointToCellIndex(M,L);if(F!==x.input.lastOverCellIndex){var G=x.input.lastOverCellIndex;x.input.lastOverCellIndex=F,Ts(this.eventEmitter,"cell.out",x,G,void 0,e,n),Ts(this.eventEmitter,"cell.over",x,F,void 0,e,n)}},oN=function(e,t){var i=this.childrenMap.child,n=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,Ts(this.eventEmitter,"cell.out",i,n,void 0,e,t)};const hN=Phaser.Utils.Objects.GetValue;var lN=function(e,t){var i=hN(t,"click",void 0);i!==!1&&(i===void 0&&(i={}),i.threshold=10,e._click=new us(e,i),e._click.on("click",function(n,x,S,M){Ts(this.eventEmitter,"cell.click",x,S.worldX,S.worldY,S,M)},this))};const uN=Phaser.Utils.Objects.GetValue;var dN=function(e,t){var i=uN(t,"tap",void 0);i!==!1&&(e._tap=new Gl(e,i),e._tap.on("tap",function(n,x,S){var M=`cell.${n.tapsCount}tap`;Ts(this.eventEmitter,M,n.gameObject,n.worldX,n.worldY,S)},this))};const fN=Phaser.Utils.Objects.GetValue;var cN=function(e,t){var i=fN(t,"press",void 0);i!==!1&&(e._press=new kl(e,i),e._press.on("pressstart",function(n,x,S){Ts(this.eventEmitter,"cell.pressstart",e,n.worldX,n.worldY,S)},this).on("pressend",function(n,x,S){Ts(this.eventEmitter,"cell.pressend",e,n.worldX,n.worldY,S)},this))};const vN=Phaser.Utils.Objects.GetValue;var pN=function(e,t){var i=vN(t,"swipe",void 0);i!==!1&&(i===void 0&&(i={}),i.dir="4dir",e._swipe=new Uo(e,i),e._swipe.on("swipe",function(n,x,S){var M=n.left?"left":n.right?"right":n.up?"up":"down";Ts(this.eventEmitter,`cell.swipe${M}`,e,n.worldX,n.worldY,S)},this))},gN=function(e,t){e.setInteractive(),nN.call(this,e,t),aN.call(this,e,t),lN.call(this,e,t),dN.call(this,e,t),cN.call(this,e,t),pN.call(this,e,t)},mN=function(e,t){e===void 0?this.items=[]:this.items=e,t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setCellsCount(this.items.length),t&&(i.updateTable(!0),this.resizeController()),this},xN={scrollToRow(e){var t=this.childrenMap.child;return t.scrollToRow(e),this},scrollToNextRow(e){var t=this.childrenMap.child;return t.scrollToNextRow(e),this}};const is=Phaser.Utils.Objects.GetValue;class ap extends _o{constructor(t,i){i===void 0&&(i={});var n=Gv(i),x=is(i,"table",void 0);x===void 0&&(x={}),x.scrollMode=n===2?0:n,x.clampTableOXY=is(i,"clampChildOY",!1);var S=is(x,"width",void 0),M=is(x,"height",void 0),L=new fS(t,0,0,S,M,x);t.add.existing(L);var F,G;x.scrollMode===0?(F=S===void 0,G=M===void 0):(F=M===void 0,G=S===void 0),sN(L),L._minWidth=S===void 0?0:void 0,L._minHeight=M===void 0?0:void 0,i.type="rexGridTable",i.child={gameObject:L,expandWidth:F,expandHeight:G};var X=is(i,"space",void 0);X&&(X.child=is(X,"table",0)),super(t,i),this.addChildrenMap("table",L),this.addChildrenMap("tableLayer",L.maskLayer),this.eventEmitter=is(i,"eventEmitter",this);var Q=is(i,"createCellContainerCallback",a),tt=is(i,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(Q,tt),rN.call(this,L),this.resizeControllerFlag=!1;var _=n===0?"cellheightchange":"cellwidthchange";L.on(_,function(){this.resizeControllerFlag=!0},this),is(x,"interactive",!0)&&gN.call(this,L,x),this.setItems(is(i,"items",[]),!1),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,i){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=i,this}refresh(){return this.setItems(this.items),this}getCell(t){var i=this.childrenMap.child;return i.getCell(t)}getCellContainer(t){var i=this.childrenMap.child;return i.getCellContainer(t)}updateVisibleCell(t){var i=this.childrenMap.child;return i.updateVisibleCell(t)}resetAllCellsSize(t,i){var n=this.childrenMap.child;return n.resetAllCellsSize(t,i),this}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var yN={setItems:mN};Object.assign(ap.prototype,xN,yN),W.register("gridTable",function(e){var t=new ap(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.GridTable",ap);var op=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=t.orientation===0?1:0,e},CN=function(e,t){e.popUp(op(e.root.easeIn,e))},SN=function(e,t){e.scaleDown(op(e.root.easeOut,e))},TN={setTransitInCallback(e){return e===void 0&&(e=CN),this.transitInCallback=e,this},setTransitOutCallback(e){return e===void 0&&(e=SN),this.transitOutCallback=e,this}},EN=function(e,t,i,n,x){var S=da(e),M=S.time.delayedCall(t,function(){S.sys.events.once("postupdate",function(){i.call(n,x)})});return M},PN={delayCall(e,t,i){return this.timer=EN(this,e,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},MN=function(e,t){var n=this.childrenMap.subMenu;if(n&&n.parentButton===e)return this;this.collapseSubMenu();var i;this.root.toggleOrientation?i=this.orientation===0?1:0:i=this.orientation;var n=new this.constructor(this.scene,{items:t,orientation:i,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(n),this.childrenMap.subMenu=n,this.root.emit("expand",n,e,this),this},wN=function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},AN=function(){var e=this.childrenMap.subMenu;return e===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse(),this)},vS={expandSubMenu:MN,collapse:wN,collapseSubMenu:AN};Object.assign(vS,TN,PN);var RN=function(e,t,i,n){var x;return i&&(t.scene=e,n?x=i.call(n,t):x=i(t),t.scene=void 0),x},LN=function(e,t,i,n){var x,S=[],M;if(t&&i)for(var L=0,F=t.length;L<F;L++)x=t[L],x.scene=e,n?M=i.call(n,x,L,t):M=i(x,L,t),x.scene=void 0,S.push(M);return S},bN=function(e){e.on(e.root.expandEventName,function(t,i){if(!this._isPassedEvent){var n=this.root.childrenKey,x=this.items[i][n];x&&this.expandSubMenu(t,x)}},e).on("button.click",function(t,i,n,x){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,i,n,x),this.root._isPassedEvent=!1)},e).on("button.over",function(t,i,n,x){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,i,n,x),this.root._isPassedEvent=!1)},e).on("button.out",function(t,i,n,x){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,i,n,x),this.root._isPassedEvent=!1)},e)},pS=function(e,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=yn(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},ON=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const ai=Phaser.Utils.Objects.GetValue;class hp extends We{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1);var n=i._rootMenu,x=i._parentMenu,S=i._parentButton,M=ai(i,"popup",!0),L=ai(i,"items",void 0),F=ai(i,"createBackgroundCallback",void 0),G=ai(i,"createBackgroundCallbackScope",void 0);i.background=RN(t,L,F,G);var X=ai(i,"createButtonCallback",void 0),Q=ai(i,"createButtonCallbackScope",void 0);if(i.buttons=LN(t,L,X,Q),super(t,i),this.type="rexMenu",this.items=L,this.root=n===void 0?this:n,this.isRoot=this.root===this,this.parentMenu=x,this.parentButton=S,this.timer=void 0,this.isRoot){this.isPopUpMode=M;var tt=i.bounds;tt===void 0&&(tt=la(t)),this.bounds=tt,this.subMenuSide=[this.y<tt.centerY?up:Bu,this.x<tt.centerX?lp:Du];var _=ai(i,"subMenuSide",void 0);_!==void 0&&(typeof _=="string"&&(_=FN[_]),this.subMenuSide[this.orientation]=_),this.toggleOrientation=ai(i,"toggleOrientation",!1),this.expandEventName=ai(i,"expandEvent","button.click"),this.easeIn=pS(this,ai(i,"easeIn",0)),this.easeOut=pS(this,ai(i,"easeOut",0)),this.setTransitInCallback(ai(i,"transitIn")),this.setTransitOutCallback(ai(i,"transitOut")),this.createBackgroundCallback=F,this.createBackgroundCallbackScope=G,this.createButtonCallback=X,this.createButtonCallbackScope=Q,this.childrenKey=ai(i,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=ai(i,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var nt=0,lt=0;if(!this.root.easeIn.sameOrientation){var ot=op(this.root.easeIn,this).orientation,dt=x?x.orientation:this.orientation,_=this.root.subMenuSide[dt];ot===0&&_===Du&&(nt=1),ot===1&&_===Bu&&(lt=1)}if(M&&this.setOrigin(nt,lt).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var _=this.root.subMenuSide[x.orientation];switch(_){case Du:this.alignTop(S.top).alignRight(S.left);break;case lp:this.alignTop(S.top).alignLeft(S.right);break;case Bu:this.alignLeft(S.left).alignBottom(S.top);break;case up:this.alignLeft(S.left).alignTop(S.bottom);break}}bN(this),M&&(this.pushIntoBounds(this.root.bounds),ON.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const Du=2,lp=0,Bu=3,up=1,FN={up:Bu,down:up,left:Du,right:lp};Object.assign(hp.prototype,vS),W.register("menu",function(e){var t=new hp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Menu",hp);var DN={setWrapEnable(e){return e===void 0&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setCreateListSliderTrackCallback(e){return this.listCreateSliderTrackCallback=e,this},setCreateListSliderThumbCallback(e){return this.listCreateSliderThumbCallback=e,this},setListSliderAdaptThumbSizeEnable(e){return e===void 0&&(e=!0),this.listSliderAdaptThumbSizeEnable=e,this},setListScrollerConfig(e){return e===void 0&&(e={}),this.listScrollerConfig=e,this},setListMouseWheelScrollerConfig(e){return this.listMouseWheelScrollerConfig=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return typeof e=="string"&&(e=BN[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return e===void 0&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return e===void 0&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListMaxHeight(e){return this.listMaxHeight=e,this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return e===void 0&&(e=""),this.listAlignSide=e,this},setListSpace(e){return e===void 0&&(e={}),this.listSpace=e,this},setListDraggable(e){return e===void 0&&(e=!0),this.listDraggable=e,this}};const BN={down:0,up:1};var IN=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=t.rexSizer,n=!1;if(i.hidden)e=0;else switch(this.scrollMode){case 0:e=this.getChildWidth(t),e===void 0&&(n=!0);break;case 1:e=0;break;default:e=0;break}if(!n)return e},GN=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=t.rexSizer,n=!1;if(i.hidden)e=0;else switch(this.scrollMode){case 0:e=0;break;case 1:e=this.getChildHeight(t),e===void 0&&(n=!0);break;default:e=0;break}if(!n)return e},kN=function(e){return e===void 0&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},NN=function(){var e=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:e+=this.childOY;break;default:t+=this.childOY,e+=this.childOX;break}this.setChildTopLeftPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},zN=function(){var e=this.child,t,i;if(!e.rexSizer.hidden){switch(this.scrollMode){case 0:t=this.width*this.scaleX;break;case 1:i=this.height*this.scaleY;break}e.isRexSizer?e.runLayout(this,t,i):qe(e,t,i),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},UN=function(e,t){t||e.clearMask&&e.clearMask(!1)},gS={getChildrenWidth:IN,getChildrenHeight:GN,getChildrenSizers:kN,resetChildPosition:NN,layoutChildren:zN,removeChildCallback:UN};Object.assign(gS,nS);const mS=Phaser.Utils.Objects.IsPlainObject,wi=Phaser.Utils.Objects.GetValue,VN=Phaser.Display.Align.TOP_LEFT;class xS extends Rn{constructor(t,i,n,x,S,M){mS(i)?(M=i,i=wi(M,"x",0),n=wi(M,"y",0),x=wi(M,"width",void 0),S=wi(M,"height",void 0)):mS(x)&&(M=x,x=wi(M,"width",void 0),S=wi(M,"height",void 0)),super(t,i,n,x,S,M),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(wi(M,"scrollMode",0));var L=wi(M,"clampChildOY",!0),F=wi(M,"clampChildOX",L);this.setClampMode(L,F);var G=wi(M,"child",void 0),X=wi(M,"expand",!0),Q=wi(M,"childOrigin0",!0);Q&&G.setOrigin&&G.setOrigin(0),this.add(G),this.sizerChildren=[G];var tt=this.getSizerConfig(G);tt.align=VN,tt.expand=X,this.child=G;var _=wi(M,"mask");this.setupChildrenMask(_),this.childrenMask&&(this.maskGameObject=rp(this.childrenMask))}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=AC[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t,i){return this.clampChildOY=t,this.clampChildOX=i,this}get instHeight(){return this.scrollMode===0||this.scrollMode===2?this.displayHeight:this.displayWidth}get instWidth(){return this.scrollMode===0||this.scrollMode===2?this.displayWidth:this.displayHeight}get childHeight(){return this.scrollMode===0||this.scrollMode===2?te(this.child):_t(this.child)}get childWidth(){return this.scrollMode===0||this.scrollMode===2?_t(this.child):te(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}get visibleWidth(){var t=this.childWidth-this.childVisibleWidth;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}childOXExceedLeft(t){return t===void 0&&(t=this.childOX),t>this.leftChildOX}childOXExeceedRight(t){return t===void 0&&(t=this.childOX),t<this.rightChildOX}get childOY(){return this._childOY}set childOY(t){var i=this.topChildOY,n=this.bottomChildOY,x=this.childOYExceedTop(t),S=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:x?t=i:S&&(t=n)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),x&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=x,S&&(this.execeedBottomState||this.emit("execeedbottom",this,t,n)),this.execeedBottomState=S}get childOX(){return this._childOX}set childOX(t){var i=this.leftChildOX,n=this.rightChildOX,x=this.childOXExceedLeft(t),S=this.childOXExeceedRight(t);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?t=0:x?t=i:S&&(t=n)),this._childOX!==t&&(this._childOX=t,this.resetChildPosition()),x&&(this.execeedLeftState||this.emit("execeedleft",this,t,i)),this.execeedLeftState=x,S&&(this.execeedRightState||this.emit("execeedright",this,t,n)),this.execeedRightState=S}setChildOY(t){return this.childOY=t,this}setChildOX(t){return this.childOX=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}set s(t){this.childOX=-this.visibleWidth*t}get s(){var t=this.visibleWidth;return t===0?0:this.childOX/-t}setChildOYByPercentage(t){return this.t=t,this}setChildOXByPercentage(t){return this.s=t,this}setChildTopLeftPosition(t,i){var n=this.child;return t+=_t(n)*n.originX,i+=te(n)*n.originY,n.setPosition(t,i),this}}Object.assign(xS.prototype,gS);var XN=function(e,t,i,n){if(!this.hasChild(e))return this;var x,S;switch(this.scrollMode){case 0:x=this.childOY+Iu.call(this,e,"y",t);break;case 1:x=this.childOY+Iu.call(this,e,"x",t);break;default:x=this.childOY+Iu.call(this,e,"y",t),S=this.childOX+Iu.call(this,e,"x",t);break}return i===void 0||i<=0?(this.childOY=x,this.scrollMode===2&&(this.childOX=S)):(this._easeScrollChildOY===void 0&&(this._easeScrollChildOY=new $i(this)),this._easeScrollChildOY.restart({key:"childOY",to:x,duration:i,ease:n}),this.scrollMode===2&&(this._easeScrollChildOX===void 0&&(this._easeScrollChildOX=new $i(this)),this._easeScrollChildOX.restart({key:"childOX",to:S,duration:i,ease:n}))),this};const yS=["top","bottom","centerY","center"],CS=["left","right","centerX","center"];var Iu=function(e,t,i){t=t.toUpperCase();var n=t==="Y",x=this.childrenMap.child,S;if(n){if(i)for(var M=0,L=yS.length;M<L;M++){var F=yS[M];if(i.indexOf(F)!==-1){i=F;break}}switch(i){case"top":S=x.top-pn(e).y;break;case"bottom":S=x.bottom-ho(e).y;break;case"centerY":case"center":S=x.centerY-c0(e).y;break;default:var G=x.top-pn(e).y,X=x.bottom-ho(e).y;G<=0&&X>=0?S=0:S=Math.abs(G)<=Math.abs(X)?G:X;break}}else{if(i)for(var M=0,L=CS.length;M<L;M++){var F=CS[M];if(i.indexOf(F)!==-1){i=F;break}}switch(i){case"left":S=x.left-pn(e).x;break;case"right":S=x.right-oo(e).x;break;case"centerX":case"center":S=x.centerX-c0(e).x;break;default:var Q=x.left-pn(e).x,tt=x.right-oo(e).x;Q<=0&&tt>=0?S=0:S=Math.abs(Q)<=Math.abs(tt)?Q:tt;break}}return S};const kr=Phaser.Utils.Objects.GetValue;class oh extends _o{constructor(t,i){i===void 0&&(i={});var n=Gv(i),x=kr(i,"panel",void 0);x===void 0&&(x={}),x.scrollMode=n,x.clampChildOY=kr(i,"clampChildOY",!1),x.clampChildOX=kr(i,"clampChildOX",!1);var S=new xS(t,x);t.add.existing(S);var M,L;switch(n){case 0:M=kr(i,"expand.panel",!0),L=!0;break;case 1:M=!0,L=kr(i,"expand.panel",!0);break;default:M=!0,L=!0}i.type="rexScrollablePanel",i.child={gameObject:S,expandWidth:M,expandHeight:L,align:kr(i,"align.panel","center")};var F=kr(i,"space",void 0);F&&(F.child=kr(F,"panel",0)),super(t,i),this.addChildrenMap("panel",S.child),this.addChildrenMap("panelLayer",S.maskLayer),this.addChildrenMap("mask",S.maskGameObject),this.addChildrenMap("scrollableBlock",S)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),Yl(this.childrenMap.child,t),this}}var WN={scrollToChild:XN};Object.assign(oh.prototype,WN);const YN=Phaser.Utils.Objects.GetValue;var HN=function(){var e=this.scene,t,i=this.listCreateBackgroundCallback;i&&(t=i.call(this,e),e.add.existing(t));var Q=[],n=this.listCreateButtonCallback;if(n)for(var x=this.options,S=0,M=x.length;S<M;S++){var L=n.call(this,e,x[S],S,x);L&&(e.add.existing(L),Q.push(L))}var F=this.listWidth;F===void 0&&(this.listAlignMode==="text"?F=this.getElement("text").width:F=this.width);var G=this.listHeight,X={width:F,buttons:Q,space:this.listSpace},Q,tt,_;if(this.listCreateSliderThumbCallback?_=G>0||this.listMaxHeight>0:_=!1,!_)X.height=G,Q=SS(e,X,this.listWrapEnable),tt=Q;else{var Q=SS(e,X,this.listWrapEnable);if(this.listMaxHeight>0&&(Q.layout(),Q.height<=this.listMaxHeight&&(tt=Q)),!tt){G===0&&(G=this.listMaxHeight);var nt=TS(e,this.listCreateSliderTrackCallback),lt=TS(e,this.listCreateSliderThumbCallback);tt=new oh(e,{height:G,scrollMode:0,panel:{child:Q,mask:{padding:1}},slider:{track:nt,thumb:lt,adaptThumbSize:this.listSliderAdaptThumbSizeEnable},scrollDetectionMode:1,scroller:this.listScrollerConfig,mouseWheelScroller:this.listMouseWheelScrollerConfig,space:{panel:YN(this.listSpace,"panel",0)}}),e.add.existing(tt)}}return t&&tt.addBackground(t,"background"),this.listDraggable&&tt.setDraggable(!0),tt!==Q&&Q.on("button.over",function(ot,dt,ct,ft){tt.emit("button.over",ot,dt,ct,ft)}).on("button.out",function(ot,dt,ct,ft){tt.emit("button.out",ot,dt,ct,ft)}).on("button.click",function(ot,dt,ct,ft){tt.emit("button.click",ot,dt,ct,ft)}),tt},SS=function(e,t,i){var n;return i?(t.orientation="x",n=new Ir(e,t)):(t.orientation="y",n=new We(e,t)),e.add.existing(n),n},TS=function(e,t,i){var n;return t&&(n=t.call(i,e),e.add.existing(n)),n},$N=function(e,t,i,n,x){var S={};switch(S.mode=0,i){case 0:case"x":S.end={x:0};break;case 1:case"y":S.end={y:0};break;default:S.end=0;break}return S.duration=t,S.ease=n,x===void 0?x=new Io(e,S):x.resetFromJSON(S),x.restart(),x},KN=function(e,t,i,n,x){return Bs(e,t)?Gt(e,t):Bs(e,i)?Gt(e,i):x};const Na=Phaser.Utils.Objects.GetValue;var ZN=function(e,t){var i=Na(t,"expandDirection",void 0);typeof i=="string"&&(i=JN[i]);var n=KN(t,"alignTarget","alignTargetX"),x=Na(t,"alignTargetY",n),S=Na(t,"alignOffsetX",0),M=Na(t,"alignOffsetY",0),L=Na(t,"alignSide",""),F=L.includes("right"),G=Na(t,"bounds"),X=i===0,Q=i===1,tt=!X&&!Q,_=F?1:0,nt=X||tt?0:1;e.setOrigin(_,nt);var lt,ot;F?lt=n.getTopRight().x:lt=n.getTopLeft().x,ot=x.getBottomLeft().y,e.setPosition(lt+S,ot+M);var dt=G;dt||(dt=la(e.scene)),tt&&e.getBottomLeft().y>dt.bottom&&(ot=x.getTopLeft().y,e.setOrigin(0,1).setPosition(lt+S,ot+M))};const JN={down:0,up:1},ES=Phaser.Utils.Objects.GetValue;class PS extends Ll{constructor(t,i){i===void 0&&(i={}),i.transitIn==null&&(i.transitIn=function(S,M){wc(S,M,"y","Cubic")}),i.transitOut==null&&(i.transitOut=function(S,M){$N(S,M,"y","Linear")}),i.manualClose=!0,i.clickOutsideClose=!0,i.destroy=!0,super(t,i),ZN(t,i),t.isRexSizer&&t.layout();var n=ES(i,"touchOutsideClose",!1),x=ES(i,"anyTouchClose",!1);x&&(n=!1),x?this.once("open",this.anyTouchClose,this):n&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Fl(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var QN=function(){if(this.listPanel)return this;if(this.options.length===0)return this;var e=HN.call(this);e.on("button.over",function(n,x,S,M){this.currentOverIndex=x,this.listOnButtonOver&&this.listOnButtonOver.call(this,n,x,S,M),this.emit("button.over",this,e,n,x,S,M)},this).on("button.out",function(n,x,S,M){this.currentOverIndex===x&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,n,x,S,M),this.emit("button.out",this,e,n,x,S,M)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var i=new PS(e,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds}).on("open",function(){e.on("button.click",function(n,x,S,M){this.listOnButtonClick&&this.listOnButtonClick.call(this,n,x,S,M),this.emit("button.click",this,e,n,x,S,M),this.dropDownBehavior.requestClose()},this),this.emit("list.open",this,e)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)},this);return e.onClickOutside(function(){i.requestClose()}),this.listPanel=e,this.dropDownBehavior=i,this.pin(e),this},jN=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0,this):this},qN=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},_N=function(e){if(e===void 0&&(e=this.currentOverIndex),e===void 0)return this;var t=this.listPanel,i=t?t.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,i,e),this.emit("button.click",this,t,i,e),this},tz=function(e){var t=this.listPanel;return t?(t.emitButtonOver(e),this):this},ez={focusNextButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var i=this.listPanel.getButtons().length;t=(e+1)%i}return this.emitButtonOver(t),this},focusPrevButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var i=this.listPanel.getButtons().length;t=(e-1+i)%i}return this.emitButtonOver(t),this}},MS={openListPanel:QN,closeListPanel:jN,toggleListPanel:qN,emitButtonClick:_N,emitButtonOver:tz};Object.assign(MS,DN,ez);const ae=Phaser.Utils.Objects.GetValue;class hh extends Hs{constructor(t,i){super(t,i),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(ae(i,"options"));var n=ae(i,"list");this.setWrapEnable(ae(n,"wrap",!1)),this.setCreateButtonCallback(ae(n,"createButtonCallback")),this.setCreateListBackgroundCallback(ae(n,"createBackgroundCallback")),this.setCreateListSliderTrackCallback(ae(n,"createTrackCallback")),this.setCreateListSliderThumbCallback(ae(n,"createThumbCallback")),this.setListSliderAdaptThumbSizeEnable(ae(n,"sliderAdaptThumbSize",!1)),this.setListScrollerConfig(ae(n,"scroller")),this.setListMouseWheelScrollerConfig(ae(n,"mouseWheelScroller")),this.setButtonClickCallback(ae(n,"onButtonClick")),this.setButtonOverCallback(ae(n,"onButtonOver")),this.setButtonOutCallback(ae(n,"onButtonOut")),this.setListExpandDirection(ae(n,"expandDirection")),this.setListEaseInDuration(ae(n,"easeIn",500)),this.setListEaseOutDuration(ae(n,"easeOut",100)),this.setListTransitInCallback(ae(n,"transitIn")),this.settListTransitOutCallback(ae(n,"transitOut")),this.setListMaxHeight(ae(n,"maxHeight",0)),this.setListSize(ae(n,"width"),ae(n,"height",0)),this.setListAlignmentMode(ae(n,"alignParent","text")),this.setListAlignmentSide(ae(n,"alignSide","")),this.setListBounds(ae(n,"bounds")),this.setListSpace(ae(n,"space")),this.setListDraggable(ae(n,"draggable",!1)),this.setValueChangeCallback(ae(i,"setValueCallback"),ae(i,"setValueCallbackScope")),this.setValue(ae(i,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}get isOpened(){return!!this.listPanel}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,i){return this.valueChangeCallback=t,this.valueChangeCallbackScope=i,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t;var n=this.valueChangeCallback,x=this.valueChangeCallbackScope;n&&(x?n.call(x,this,t,i):n(this,t,i)),this.emit("valuechange",this,t,i)}}}Object.assign(hh.prototype,MS),W.register("dropDownList",function(e){var t=new hh(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.DropDownList",hh);var wS=function(e,t,i){t=t?ht(t):{},i===void 0&&(i={});var n=t.label||t.button,x=t.button||t.label;delete t.label,delete t.button;var S=i.label||i.button||i,M=i.button||i.label||i,L=xu(e,n,S);L.list=t.list||{},L.list.createButtonCallback=function(X,Q){var tt=Ye(X,x,M).resetDisplayContent(Q);return Q.hasOwnProperty("value")&&(tt.value=Q.value),tt};var F=t.track;F&&(L.list.createTrackCallback=function(X){return Ne(X,F)},delete t.track);var G=t.thumb;return G&&(L.list.createThumbCallback=function(X){return Ne(X,G)},delete t.thumb),L.list.onButtonOver=function(X,Q,tt,_){X.setHoverState&&X.setHoverState(!0)},L.list.onButtonOut=function(X,Q,tt,_){X.setHoverState&&X.setHoverState(!1)},L};class AS extends hh{constructor(t,i,n){i=wS(t,i,n),super(t,i),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var i=0,n=t.length;i<n;i++){var x=t[i];typeof x=="string"&&(t[i]={text:x,value:x})}return super.setOptions(t),this}}W.register("simpleDropDownList",function(e,t){var i=new AS(this.scene,e,t);return this.scene.add.existing(i),i}),J(window,"RexPlugins.UI.SimpleDropDownList",AS);var iz=function(e){var t=br(e),i,n,x;switch(t){case _e:case ti:i=e.height-e.padding.top-e.padding.bottom,n=e.lineSpacing,x=e.style.metrics.fontSize+e.style.strokeThickness;break;case Ei:i=e.height,n=0;var S=e.fontSize/e.fontData.size;x=e.fontData.lineHeight*S;break}return(i-n)/(x+n)},sz=function(e,t){if(e===void 0&&(e=this.startLineIndex),t===void 0){var i=this.pageLinesCount;i>0?t=e+i:t=this.totalLinesCount}t>this.totalLinesCount&&(t=this.totalLinesCount);var n;switch(this.textObjectType){case _e:case Ei:n=this.lines.slice(e,t).join(`
`);break;case ti:var x=this.lines.getLineStartIndex(e),S=this.lines.getLineEndIndex(t-1);n=this.lines.getSliceTagText(x,S,!0);var M=(n.match(/\n/g)||[]).length;M>t-e-1&&(n=n.substring(0,n.length-1));break}return n},rz={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(i){var t=this.totalLinesCount;this.sections.push(_n(i));var i=this.sections.join(`
`);this.lines=Vv(this.parent,i,this.lines);var n=this.totalLinesCount-t,x=this.pageLinesCount,S;x>0?S=Math.ceil(n/this.pageLinesCount):S=1;for(var M=0;M<S;M++)this.pageStartIndexes.push(t+M*this.pageLinesCount);return this},setText(e,t){t===void 0&&(t=!0),t&&this.resetIndex(),this.clearText();for(var i=_n(e).split(this.pageBreak),n=0,x=i.length;n<x;n++)this.appendPage(i[n]);return this},appendText(e){var t=this.content+_n(e);return this.setText(t,!1),this}};const RS=Phaser.Math.Clamp;var nz={resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=RS(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return e===void 0&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var t=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=RS(e,0,t),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}},az={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){pu(this.parent,e)}},LS={getLines:sz};Object.assign(LS,rz,nz,az);const za=Phaser.Utils.Objects.GetValue;Phaser.Math.Clamp;class Gu extends ye{constructor(t,i){super(t,{eventEmitter:!1}),this.textObjectType=br(this.parent),this.pageStartIndexes=[],this.lines=Vv(this.parent,""),this.sections=[],this.resetFromJSON(i)}resetFromJSON(t){this.setMaxLines(za(t,"maxLines",void 0)),this.setPageBreak(za(t,"pageBreak",`\f
`)),this.setText(za(t,"text","")),this.startLineIndex=za(t,"start",-1),this.endLineIndex=za(t,"end",void 0);var i=za(t,"page");return i===void 0?this.resetIndex():this.setPageIndex(i),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case _e:this.lines.length=0;break;case ti:this.lines.destroy();break;case Ei:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case _e:case ti:var i=this.parent.style.maxLines;i>0?t=i:t=Math.floor(iz(this.parent));break;case Ei:t=this.totalLinesCount;break}return t}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Gu.prototype,LS);var oz={setText(e){this.setTextCallback&&(this.setTextCallbackScope?e=this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):e=this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?pu(this.parent,e):this.parent.setText(e)},appendText(e){var t=this.text.concat(_n(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLength),this}},hz=function(e,t,i,n){return e!==void 0&&this.setTypingContent(e),t!==void 0&&(this.speed=t),i===void 0&&(i=0),this.typingIndex=i+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(n)),this},bS=function(e,t){return e.getPlainText&&(t=e.getPlainText(t)),t},lz=function(e,t,i,n,x){var S;if(t>0){n===void 0&&(n=0);var M=bS(this.parent,e);S=uz(M,t)+n}return this.start(e,i,S,x)},uz=function(e,t){for(var i=void 0,n=0;n<t&&(i=e.indexOf(`
`,i+1),i!==-1);n++);return i},lh=function(e,t,i,n){var x;return e.getSubString?x=e.getSubString(t,i,n):x=t.slice(i,n),x},OS=function(e,t,i,n){var x=this.parent,S;if(n===0){var M=0,L=t;this.insertIndex=L,S=lh(x,e,M,L)}else if(n===1){var L=i,M=L-t;this.insertIndex=0,S=lh(x,e,M,L)}else if(n===2){var F=i/2,M=Math.floor(F-t/2),L=M+t;this.insertIndex=t%2?t:0,S=lh(x,e,M,L)}else if(n===3){var G=Math.floor(t/2),X;if(G>0){var L=i,M=L-G;X=lh(x,e,M,L)}else X="";var Q=t-G,tt;if(Q>0){var M=0,L=M+Q;this.insertIndex=L,tt=lh(x,e,M,L)}else tt="",this.insertIndex=0;S=tt+X}return this.insertChar=S.charAt(this.insertIndex-1),S},dz=function(e){var t=this.getTimer();if(t&&this.freeTimer(),e){for(;!this.isLastChar;)OS.call(this,this.text,this.typingIndex,this.textLength,this.typeMode),this.emit("typechar",this.insertChar),this.typingIndex++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},fz=function(){var e=this.getTimer();return e&&(e.paused=!0),this},cz=function(){var e=this.getTimer();return e&&(e.paused=!1),this},FS={start:hz,startFromLine:lz,stop:dz,pause:fz,resumeTyping:cz};Object.assign(FS,oz);var vz=function(e,t){var i=br(e);switch(i){case _e:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case ti:t=e.getText(t,void 0,void 0,!0);break;case Ei:t=e.setText(t).getTextBounds().wrappedText;break}return t};const uh=Phaser.Utils.Objects.GetFastValue,dp=Phaser.Utils.Objects.GetValue;class ku extends ye{constructor(t,i){super(t,i),this.timer=null,this.resetFromJSON(i)}resetFromJSON(t){this.setTextWrapEnable(dp(t,"wrap",!1)),this.setTypeMode(dp(t,"typeMode",0)),this.setTypingSpeed(dp(t,"speed",333)),this.setTextCallback=uh(t,"setTextCallback",null),this.setTextCallbackScope=uh(t,"setTextCallbackScope",null),this.setTypingContent(uh(t,"text","")),this.typingIndex=uh(t,"typingIndex",0),this.insertIndex=null,this.insertChar=null;var i=uh(t,"elapsed",null);return i!==null&&this.start(void 0,void 0,this.typingIndex,i),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=pz[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var i=_n(t);this.textWrapEnable&&(i=vz(this.parent,i)),this._text=i}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIndex===this.textLength}setTypingContent(t){return this.text=t,this.textLength=bS(this.parent,this.text).length,this}onTyping(){var t=OS.call(this,this.text,this.typingIndex,this.textLength,this.typeMode);this.setText(t),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.scene.sys.events.once("preupdate",function(){this.emit("complete",this,this.parent)},this)):(this.timer.delay=this.speed,this.typingIndex++)}startTimer(t){this.timer&&this.freeTimer();var i;return t===void 0?i=0:(this.speed,i=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:i,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIndex):t=this.setTextCallback(t,this.isLastChar,this.insertIndex)),this.textWrapEnable?pu(this.parent,t):this.parent.setText(t)}}const pz={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign(ku.prototype,FS);const dh=Phaser.Utils.Objects.GetValue;var gz=function(e,t){t===void 0&&(t="rexTextBox");class i extends e{constructor(x,S){super(x,S),this.type=t,this.isRunning=!1,this._isPageEnd=!1;var M=this.childrenMap.text,L=dh(S,"expandTextWidth",!1),F=dh(S,"expandTextHeight",!1);if(L||F){var G=br(M);switch(G){case _e:case ti:if(M.resize=function(Q,tt){var _=L?Q:0,nt=F?tt:0;M.setFixedSize(_,nt),_>0&&M.setWordWrapWidth(_)},G===ti){var X=M.style;X.wrapMode===0&&(X.wrapMode=1)}break}L&&(M._minWidth=0),F&&(M._minHeight=0)}this.setTypingMode(dh(S,"typingMode","page")),this.page=new Gu(M,dh(S,"page",void 0)),this.typing=new ku(M,dh(S,"typing",S.type)),this.typing.on("complete",this.onTypingComplete,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidthSave=M.width,this.textHeightSave=M.height}setTypingMode(x){return typeof x=="string"&&(x=mz[x]),this.typingMode=x,this}start(x,S){return S!==void 0&&this.setTypingSpeed(S),this.isRunning=!0,this.page.setText(x),this.emit("start"),this.typingMode===0?this.typeNextPage():this.typeNextLine(),this}more(x,S){if(S!==void 0&&this.setTypingSpeed(S),this.isRunning)this.page.appendText(x),this.typing.appendText(x);else{if(this.isRunning=!0,this.page.appendText(x),this.emit("start"),this.typingMode===0){this._isPageEnd=!1;var M=this.page.getPage(),L=this.typing.textLength;this.typing.start(M,void 0,L)}return this}}typeNextPage(){if(!this.isRunning)return this;if(this.isLastPage)this.emit("complete");else{this._isPageEnd=!1;var x=this.page.getNextPage();this.typing.start(x)}return this}typeNextLine(){if(!this.isRunning)return this;if(this.isLastLine)this.isRunning=!1,this.emit("pageend"),this.emit("complete");else{var x=this.page.getPageOfNextLine(),S;this.isFirstLine?S=0:S=this.page.pageLinesCount-1,this.typing.startFromLine(x,S)}}pause(){return this.isRunning?(this.isTyping&&(this.typing.pause(),this.emit("pause")),this):this}resume(){return this.isRunning?(this.isTyping||(this.emit("resume"),this.typing.resume()),this):this}stop(x){return this.isRunning?(this.typing.stop(x),this):this}showLastPage(){return this.isRunning?(this.typing.stop(),this.typingMode===0?this.page.showLastPage():this.page.showLastLine(),this.emit("type"),this.onTypingComplete(),this):this}setTypeSpeed(x){return this.typing.setTypingSpeed(x),this}setTypingSpeed(x){return this.typing.setTypingSpeed(x),this}get isTyping(){return this.typing.isTyping}get isPageEnd(){return this._isPageEnd}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get isLastLine(){return this.page.isLastLine}get isFirstLine(){return this.page.isFirstLine}get lineCound(){return this.page.totalLinesCount}get startLineIndex(){return this.page.startLineIndex}get endLineIndex(){return this.page.endLineIndex}get typingSpeed(){return this.typing.speed}onType(){var x=this.childrenMap.text;(this.textWidthSave!==x.width||this.textHeightSave!==x.height)&&(this.textWidthSave=x.width,this.textHeightSave=x.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(x){this.emit("typechar",x)}onTypingComplete(){if(this.typingMode===0){this._isPageEnd=!0;var x=this.isLastPage;this.isRunning=!x,this.emit("pageend"),x&&this.emit("complete")}else this.typeNextLine()}}return i};const mz={page:0,line:1};class fp extends gz(yu){constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("layoutMode")||(i.layoutMode=1),super(t,i)}}W.register("textBox",function(e){var t=new fp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.TextBox",fp);class DS extends fp{constructor(t,i,n){i=VC(t,i,n),super(t,i)}}W.register("simpleTextBox",function(e){var t=new DS(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.SimpleTextBox",DS);const Ai=Phaser.Utils.Objects.GetValue;class BS extends qt{constructor(t,i){super(t,i),this.type="rexNumberBar";var n=Ai(i,"background",void 0),x=Ai(i,"icon",void 0),S=Ai(i,"iconMask",void 0),M=Ai(i,"slider",void 0),L=Ai(i,"text",void 0),F=Ai(i,"space.icon",0),G=Ai(i,"space.slider",0);if(n&&this.addBackground(n),x){var X;this.orientation===0?(M||L)&&(X={right:F}):(M||L)&&(X={bottom:F}),this.add(x,{proportion:0,align:"center",padding:X}),S&&(S=qi.call(this,x,x,1))}var Q;if(M){M.orientation=this.orientation,M.eventEmitter=this,M.value=null,M.hasOwnProperty("input")||(M.input=-1),Q=new Ia(t,M),t.add.existing(Q);var X;this.orientation===0?L&&(X={right:G}):L&&(X={bottom:G});var tt;if(this.orientation===0){var _=Ai(M,"width",void 0);tt=_===void 0?1:0}else{var nt=Ai(M,"height",void 0);tt=nt===void 0?1:0}this.add(Q,{proportion:tt,align:"center",padding:X})}L&&this.add(L),this.addChildrenMap("background",n),this.addChildrenMap("icon",x),this.addChildrenMap("iconMask",S),this.addChildrenMap("slider",Q),this.addChildrenMap("text",L);var lt=Ai(i,"valuechangeCallback",null);if(lt!==null){var ot=Ai(i,"valuechangeCallbackScope",void 0);this.on("valuechange",lt,ot)}this.setEnable(Ai(i,"enable",void 0)),this.setValue(Ai(i,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,i,n){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,n),this}addValue(t,i,n){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,n),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,n){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,n),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var i;return t.text?i=t.text:i=t.getData("text"),i}set text(t){var i=this.childrenMap.text;i!==void 0&&(i.setText?i.setText(t):i.setData("text",t))}setText(t){return this.text=t,this}}W.register("numberBar",function(e){var t=new BS(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.NumberBar",BS),W.register("scrollBar",function(e){var t=new zv(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ScrollBar",zv);const cp=Phaser.Utils.Objects.GetValue,IS={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class GS extends Gi{constructor(t,i){super(t,i),this.type="rexBadge";var n=cp(i,"background",void 0);n&&this.addBackground(n),this.addChildrenMap("background",n);var x=cp(i,"main",void 0);x&&this.add(x,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",x);for(var S in IS){var M=cp(i,S,void 0);M&&(this.add(M,{key:S,align:IS[S],expand:!1}),this.addChildrenMap(S,M))}}}W.register("badgeLabel",function(e){var t=new GS(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.BadgeLabel",GS);const xz=Gi.prototype.add;var kS=function(e,t,i,n,x,S,M,L,F){return e.setVisible(!1),xz.call(this,e,t,i,n,x,S,M,L,F),this},yz={add:kS,addPage:kS},Cz=function(e){return e===void 0?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null};const NS=Ci.prototype.setChildVisible;var Sz=function(e,t){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?(NS.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var n=this.currentPage;return n&&(NS.call(this,n,!0),this.emit("pagevisible",n,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&n.setAlpha(0).fadeIn(t,1)),this},Tz=function(e){return this.sizerChildren.hasOwnProperty(e)},zS={getPage:Cz,swapPage:Sz,hasPage:Tz};Object.assign(zS,yz);const US=Phaser.Utils.Objects.GetValue;class Nu extends Gi{constructor(t,i){super(t,i),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(US(i,"swapMode",0)),this.setFadeInDuration(US(i,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=Ez[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Nu.prototype,zS);const Ez={invisible:0,destroy:1};W.register("pages",function(e){var t=new Nu(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Pages",Nu);const Pz=Phaser.GameObjects.Mesh;class VS extends Pz{get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}}const XS=Phaser.Math.Vector3,Mz=Phaser.Math.Matrix4;var WS=new XS,YS=new XS,HS=new Mz,wz=function(e,t,i,n,x,S,M){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=0),S===void 0&&(S=0),M===void 0&&(M=0),WS.set(t,i,n),YS.set(x,S,M),HS.fromRotationXYTranslation(YS,WS,!0);for(var L=0,F=e.vertices.length;L<F;L++)e.vertices[L].transformMat4(HS)};const Az=Phaser.Utils.Objects.IsPlainObject,Bn=Phaser.Utils.Objects.GetValue,Rz=Phaser.Geom.Mesh.GenerateGridVerts,vp=Phaser.Math.RadToDeg,zu=Phaser.Math.DegToRad,$S=45,Lz=1+1/Math.sin(zu($S));let KS=class extends VS{constructor(t,i,n,x,S,M){Az(i)&&(M=i,i=Bn(M,"x",0),n=Bn(M,"y",0),x=Bn(M,"key",null),S=Bn(M,"frame",null)),super(t,i,n,x,S),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(Lz),this.hideCCW=Bn(M,"hideCCW",!0);var L=Bn(M,"gridWidth",0),F=Bn(M,"gridHeight",L);this.resetVerts(L,F),this.prevFrame=this.frame}preUpdate(t,i){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(t,i)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,$S),this}resetVerts(S,M){if(S!==void 0&&(this.gridWidth=S),M!==void 0&&(this.gridHeight=M),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var n=this.frame.cutWidth,x=this.frame.cutHeight,S,M;this.gridWidth===0?S=Math.max(n/8,32):M=this.gridWidth,this.gridHeight===0?M=Math.max(x/8,32):M=this.gridHeight,Rz({mesh:this,width:n/this.height,height:x/this.height,widthSegments:Math.ceil(n/S),heightSegments:Math.ceil(x/M)});var L=this.transformInfo;return L&&this.transformVerts(L.x,L.y,L.z,L.rotateX,L.rotateY,L.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return vp(this.rotationX)}set angleX(t){this.rotationX=zu(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return vp(this.rotationY)}set angleY(t){this.rotationY=zu(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return vp(this.rotationZ)}set angleZ(t){this.rotationZ=zu(t)}transformVerts(t,i,n,x,S,M){return t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=0),S===void 0&&(S=0),M===void 0&&(M=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=i,this.transformInfo.rotateX=x,this.transformInfo.rotateY=S,this.transformInfo.rotateZ=M,wz(this,t,i,n,x,S,M),this}};const bz=Phaser.Textures.DynamicTexture;var ZS=function(e,t,i){t===void 0&&(t=2),i===void 0&&(i=2);var n=new bz(e.sys.textures,null,t,i);return n};const Oz=Phaser.Utils.Objects.IsPlainObject,Uu=Phaser.Utils.Objects.GetValue;class JS extends KS{constructor(t,i,n,x,S,M){Oz(i)&&(M=i,i=Uu(M,"x",0),n=Uu(M,"y",0),x=Uu(M,"width",32),S=Uu(M,"height",32));var L=ZS(t,x,S);super(t,i,n,L,null,M),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,i){return i===void 0&&(i={}),i.gameObjects=t,i.renderTexture=this.rt,nc(i),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var ss=function(e,t,i,n){if(Array.isArray(e))for(var x=!1,S=0,M=e.length;S<M;S++){var L=e[S];if(!(n&&!L)&&(i?x=t.call(i,L,S,e):x=t(L,S,e),x))return}else{var x=!1;for(var F in e){var L=e[F];if(!(n&&!L)&&(i?x=t.call(i,L,F,e):x=t(L,F,e),x))return}}};const Ua=Phaser.Math.RadToDeg,Va=Phaser.Math.DegToRad;class Fz extends Ci{constructor(t,i,n,x,S,M){super(t,i,n,x,S),this.faces=M,ss(M,function(L){L.setPosition(i,n),this.add(L)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return Ua(this.rotationX)}set angleX(t){this.rotationX=Va(t)}get rotateX(){return Ua(this.rotationX)}set rotateX(t){this.rotationX=Va(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return Ua(this.rotationY)}set angleY(t){this.rotationY=Va(t)}get rotateY(){return Ua(this.rotationY)}set rotateY(t){this.rotationY=Va(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return Ua(this.rotationZ)}set angleZ(t){this.rotationZ=Va(t)}get rotateZ(){return Ua(this.rotationZ)}set rotateZ(t){this.rotationZ=Va(t)}setDebug(t,i){return ss(this.faces,function(n){n.setDebug(t,i)},null,!0),this}panX(t){return ss(this.faces,function(i){i.panX(t)},null,!0),this}panY(t){return ss(this.faces,function(i){i.panY(t)},null,!0),this}panZ(t){return ss(this.faces,function(i){i.panZ(t)},null,!0),this}transformVerts(t,i,n,x,S,M){return ss(this.faces,function(L){L.transformVerts(t,i,n,x,S,M)},null,!0),this}forEachFace(t,i,n){return ss(this.faces,t,i,n),this}}const Dz=Phaser.Utils.Objects.IsPlainObject,Bz={key:"__WHITE"},Iz={image:KS,rendertexture:JS};var QS=function(e,t){t===void 0&&(t=Bz);var i;return Dz(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),i=new Iz[t.type](e,t),e.add.existing(i)):i=t,i},Gz=function(e,t,i){var n;if(i===void 0){n=[];for(var x,S,M=0,L=t.length;M<L;M++)S=t[M],S?x=QS(e,S):x=null,n.push(x)}else{n={};for(var x,F,M=0,L=i.length;M<L;M++)F=i[M],t.hasOwnProperty(F)?x=QS(e,t[F]):x=null,n[F]=x}return n};const kz=Phaser.Math.DegToRad,jS=kz(180);var Nz=function(e,t){var i=t.back;i&&(e.orientation===0?i.transformVerts(0,0,0,0,jS,0):i.transformVerts(0,0,0,jS,0,0))};const pp=Phaser.Utils.Objects.GetValue,zz=Phaser.Math.Linear;let Uz=class extends gn{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(pp(t,"ease","Cubic")),this.setFrontToBackDirection(pp(t,"frontToBack",0)),this.setBackToFrontDirection(pp(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=qS[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=qS[t]),this.endAngleBF=t===0?-180:180,this}start(t,i){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var n=i+1,x=this.parent;return x.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*n):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*n),super.start(),this}flip(t,i){return this.isRunning?this:(t===void 0&&(t=this.duration),i===void 0&&(i=0),this.start(t,i),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+i+1)%2,this)}flipRight(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,i),this}flipLeft(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,i),this}updateTarget(t,i){var n=this.easeFn(i.t),x=zz(this.startAngle,this.endAngle,n);t.orientation===0?t.angleY=x:t.angleX=x}};const qS={right:0,"left-to-right":0,left:1,"right-to-left":1},Vz=Phaser.Utils.Objects.IsPlainObject,In=Phaser.Utils.Objects.GetValue,Xz=["back","front"];class Wz extends Fz{constructor(t,i,n,x){Vz(i)&&(x=i,i=In(x,"x",0),n=In(x,"y",0));var S=Gz(t,x,Xz),M=S.back,L=S.front,F=In(x,"width"),G=In(x,"height");if(F===void 0||G===void 0){if(F===void 0){var X=L?L.width:0,Q=M?M.width:0;F=Math.max(X,Q)}if(G===void 0){var tt=L?L.height:0,_=M?M.height:0;G=Math.max(tt,_)}}super(t,i,n,F,G,S),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,ss(S,function(lt,ot){this[`${ot}Face`]=lt},this);var nt=In(x,"flip",void 0);nt!==!1&&(this.flip=new Uz(this,nt)),this.setOrientation(In(x,"orientation",0)),Nz(this,S),this.setFace(In(x,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,ss(this.faces,function(i){i.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,ss(this.faces,function(i){i.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,ss(this.faces,function(i){i.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=Yz[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=Hz[t]),this.currentFaceIndex=t;var i=t===1,n=i?180:0;this.orientation===0?this.angleY=n:this.angleX=n}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const Yz={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},Hz={front:0,back:1};Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;const $z=Phaser.Utils.Objects.GetValue;var Kz=function(e,t,i){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=$z(i,"useParentBounds",!1),t.setPosition(e.x,e.y).setVisible(!1),e.pin(t)},_S=function(e,t){if(!e)return!1;for(var i=t.visibleSibling,n=0,x=i.length;n<x;n++)e.setChildVisible(i[n],!0);return i.length=0,e.setChildVisible(t,!1),t.isRunning=!1,!0},Zz=function(e,t){if(!e)return!1;_S(e,t);var i=t.useParentBounds;nc({gameObjects:e.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:i?e.displayWidth:void 0,height:i?e.displayHeighth:void 0,originX:i?e.originX:void 0,originY:i?e.originY:void 0}),e.setChildVisible(t,!0);for(var n=t.visibleSibling,x=e.children,S=0,M=x.length;S<M;S++){var L=x[S];L.visible&&L!==t&&(e.setChildVisible(L,!1),n.push(L))}return t.isRunning=!0,!0},tT=function(e){return class extends e{constructor(i,n){var x=i.scene;super(x,0,0,1,1,n),x.add.existing(this),Kz(i,this,n)}destroy(i){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(i))}enter(){var i=Zz(this.rexContainer.parent,this);return i&&this.syncSize(),this}exit(){return _S(this.rexContainer.parent,this),this}}};class eT extends tT(JS){get perspectiveState(){return this.isRunning}}const Jz=Phaser.Utils.Objects.GetValue;var Qz=function(e){var t=this.scene;this.setSnapshotPadding(Jz(e,"snapshotPadding",0)),e=Hi(e),delete e.width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var i=new Wz(t,e);t.add.existing(i);var n=i.flip;if(n){var x=this;n.on("start",function(){x.enterPerspectiveMode()}).on("complete",function(){x.exitPerspectiveMode()})}return i};const jz=["front","back"];var qz={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){typeof e=="number"&&(e=jz[e]);var t=this.perspectiveCard.faces[e],i=this.childrenMap[e];t.rt.clear();var n=i.visible;i.visible=!0;var x=i.isRexContainerLite?i.getAllVisibleChildren():i;return t.snapshot(x,{padding:this.snapshotPadding}),i.visible=n,this}};const iT=Phaser.Utils.Objects.GetValue;class gp extends Gi{constructor(t,i){super(t,i),this.type="rexPerspectiveCard";var n=i.back,x=iT(i,"expand.back",!0);this.add(n,{key:"back",expand:x});var S=i.front,M=iT(i,"expand.front",!0);this.add(S,{key:"front",expand:M}),this.perspectiveCard=Qz.call(this,i),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var i=t===0,n=this.childrenMap.front,x=this.childrenMap.back;this.setChildVisible(n,i),this.setChildVisible(x,!i)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,i,n,x,S,M){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,i,n,x,S,M),this}forEachFace(t,i,n){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,i,n),this}}Object.assign(gp.prototype,qz),W.register("perspectiveCard",function(e){var t=new gp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.PerspectiveCard",gp);var _z=function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},tU=function(e){for(var t=this.getElement("tabs.buttons"),i=0,n=t.length;i<n;i++)if(t[i].name===e)return i};const eU=Phaser.Utils.Objects.IsPlainObject,mp=Phaser.Utils.Objects.GetValue,iU=Phaser.Utils.String.UUID;var sU=function(e,t,i){if(eU(e)){var n=e;e=mp(n,"key"),t=mp(n,"tab"),i=mp(n,"page")}return e||(e=iU()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(i,{key:e}),this},rU=function(e,t){var i;if(typeof e=="number"?i=e:i=this.getPageIndex(e),i!=null){var n;t!==void 0&&(n=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(i),n!==void 0&&(this.childrenMap.pages.fadeInDuration=n)}return this},nU=function(e){return this.swapPage(0,e),this},aU=function(e){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,e),this},oU={swapPage:rU,swapFirstPage:nU,swapLastPage:aU},hU={removePage(e,t){typeof e=="number"&&(e=this.getPageKey(e));var i=this.childrenMap.tabs,n=i.getByName(e),x=this.childrenMap.pages,S=x.getElement(e);return!n||!S?this:(x.removeChildrenMap(e),i.removeButton(n,t),x.remove(S,t),this)},removeAllPages(e){for(var t=this.getElement("tabs.buttons"),i=t.length-1;i>=0;i--)this.removePage(t[i].name,e);return this}},lU=function(e){return typeof e=="number"&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},uU=function(e){var t;return typeof e=="number"?t=e:t=this.getPageIndex(e),this.getElement("tabs.buttons")[t]},dU={top:1,left:3,right:5,bottom:7},sT={top:"bottom",left:"right",right:"left",bottom:"top"},fU=function(e){var t=dU[e];if(t===void 0)return this;var i=this.childrenMap.tabs,n=this.sizerChildren.indexOf(i);if(n===t)return this;this.sizerChildren[n]=null,this.sizerChildren[t]=i;var x=this.getSizerConfig(i).padding,S=sT[this.tabsPosition],M=sT[e];return x[M]=x[S],x[S]=0,this.tabsPosition=e,this},cU={setTabsPadding(e,t){var i=this.childrenMap.tabs;return i.setOuterPadding(e,t),this},getTabsPadding(e){var t=this.childrenMap.tabs;return t.getOuterPadding(e)}},rT={getPageKey:_z,getPageIndex:tU,addPage:sU,getPage:lU,getTab:uU,setTabPosition:fU};Object.assign(rT,oU,hU,cU);const rs=Phaser.Utils.Objects.GetValue,nT=ts.prototype.add;let Vu=class extends ts{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,i.columnProportions=[0,0,0],i.rowProportions=[0,0,0];var n=rs(i,"expand.pages",!0);n&&(i.columnProportions[1]=1,i.rowProportions[1]=1),super(t,i),this.type="rexTabPages";var x=rs(i,"background",void 0);x&&this.addBackground(x);var S=rs(i,"pages"),M=new Nu(t,S);t.add.existing(M);var L=rs(i,"tabsPosition",void 0);L===void 0&&(L=rs(i,"tabPosition","top"));var F=rs(i,"wrapTabs",!1),G=F?Ir:We,X=rs(i,"tabs",void 0);X===void 0&&(X={}),X.orientation=L==="top"||L==="bottom"?"x":"y",X.buttonsType="radio",!F&&!X.hasOwnProperty("expand")&&(X.expand=rs(i,"expand.tabs",!1));var Q=new G(t,X);t.add.existing(Q),nT.call(this,M,{column:1,row:1,expand:n});var tt,_,nt=rs(i,"space.item",0);switch(L){case"top":tt=1,_=0,nt={bottom:nt};break;case"bottom":tt=1,_=2,nt={top:nt};break;case"left":tt=0,_=1,nt={right:nt};break;case"right":tt=2,_=1,nt={left:nt};break}nT.call(this,Q,{column:tt,row:_,padding:nt,expand:F?!0:rs(i,"expand.tabs",!1),align:rs(i,"align.tabs","left")}),this.addChildrenMap("background",x),this.addChildrenMap("tabs",Q),this.addChildrenMap("pages",M),this.tabsPosition=L,Q.on("button.click",function(lt){var ot=lt.name;M.hasPage(ot)&&M.swapPage(ot)}),Q.on("button.statechange",function(lt,ot,dt,ct){var ft=dt?"tab.focus":"tab.blur";this.emit(ft,lt,lt.name)},this),M.on("pagevisible",function(lt,ot,dt){this.emit("page.focus",lt,ot)}),M.on("pageinvisible",function(lt,ot,dt){this.emit("page.blur",lt,ot)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(Vu.prototype,rT),W.register("tabPages",function(e){var t=new Vu(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.TabPages",Vu);class vU extends Ll{constructor(t,i){i===void 0&&(i={}),i.destroy=!1,super(t,i)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var pU={expand(e){if(this.expanded===!0)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,i=this.childrenMap.child;if(this.show(i),this.reLayoutEnable){var n=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();n.layout()}return t.emit("folder.expand",e,this),i.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,e),this},collapse(e){if(this.expanded===!1)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,i=this.childrenMap.child;return t.emit("folder.collapse",e,this),i.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){if(this.setChildScale(i,1,1).hide(i),this.reLayoutEnable){var n=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();n.layout()}this.emit("collapse.complete",this)},this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,e===void 0?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}},gU=function(e,t){Ns.popUp.call(e,t,this.expandDirection)},mU=function(e,t){Ns.scaleDown.call(e,t,this.expandDirection)},xU={setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return e===void 0&&(e=gU.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return e===void 0&&(e=mU.bind(this)),this.childTransition.setTransitOutCallback(e),this}};const Fe=Phaser.Utils.Objects.GetValue;let fh=class extends qt{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1),super(t,i),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var n=i.background,x=i.title,S=i.child;n&&this.addBackground(n);var M=Fe(i,"space"),L=this.orientation===1?"left":"top",tt=Fe(i,"align.title",L),_=Fe(i,"expand.title",!0);this.add(x,{proportion:0,align:tt,expand:_,padding:{left:Fe(M,"titleLeft",0),right:Fe(M,"titleRight",0),top:Fe(M,"titleTop",0),bottom:Fe(M,"titleBottom",0)}});var F=Fe(i,"toggleByTarget",void 0),G=Fe(i,"toggleClickConfig");F===void 0&&(F=x),F&&Gc.onClick.call(F,function(){this.toggle()},this,G),this.childTransition=new vU(S);var X=Fe(i,"customChildOrigin",!1);if(!X){var Q=this.rtl?1:0;S.setOrigin(Q)}var tt=Fe(i,"align.child","left"),_=Fe(i,"expand.child",!0),nt=_?1:0;this.add(S,{proportion:nt,align:tt,expand:_,padding:{left:Fe(M,"childLeft",0),right:Fe(M,"childRight",0),top:Fe(M,"childTop",0),bottom:Fe(M,"childBottom",0)}}),this.addChildrenMap("title",x),this.addChildrenMap("child",S),this.addChildrenMap("background",n);var lt=i.transition;this.setTransitionDuration(Fe(lt,"duration",200)),this.setExpandCallback(Fe(lt,"expandCallback",void 0)),this.setCollapseCallback(Fe(lt,"collapseCallback",void 0)),this.reLayoutTarget=Fe(i,"reLayoutTarget",void 0);var ot=i.onExpandStart;ot&&this.on("expand.start",ot);var dt=i.onExpandComplete;dt&&this.on("expand.complete",dt);var ct=i.onCollapseStart;ct&&this.on("collapse.start",ct);var ft=i.onCollapseComplete;ft&&this.on("collapse.complete",ft);var xt=Fe(i,"expanded",void 0);xt!==void 0&&this.setExpandedState(xt)}};Object.assign(fh.prototype,pU,xU),W.register("folder",function(e){var t=new fh(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Folder",fh);var yU=function(e,t,i,n){for(var x in this.treesMap){var S=this.treesMap[x];if(Mn(S.nodeBody,e,t,i,n))return S;var M=S.pointToChild(e,t,i,n);if(M)return M}return null},CU=function(e){return e===void 0&&(e={}),e.targetMode="parent",e.targetSizers=[this],Yl(this,e),this},aT=function(e){return class extends e{get isTree(){return!1}get isNode(){return!1}setText(i){return this.text=i,this}get text(){var i=this.nodeBody;return i.text}set text(i){var n=this.nodeBody;n.setText&&n.setText(i)}setTexture(i,n){var x=this.nodeBody;return x.setTexture&&x.setTexture(i,n),this}get texture(){var i=this.nodeBody;if(i)return i.texture}get frame(){var i=this.nodeBody;if(i)return i.frame}}},SU=function(e,t,i,n){for(var x in this.nodesMap){var S=this.nodesMap[x];if(this.isTreeObject(S)){var M=S;if(Mn(M.nodeBody,e,t,i,n))return M;var L=M.pointToChild(e,t,i,n);if(L)return L}else if(Mn(S,e,t,i,n))return S}return null},TU={getTreePatent(e){if(e===void 0&&(e=this),!!e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){e===void 0&&(e=this);for(var t;;){if(!e.rexSizer)return;if(t=e.rexSizer.treeParent,t===null)return e;e=t}},getTreesSizer(e){var t=this.getTreeRoot(e);return t?t.getParentSizer():null},isGrandsonNode(e){if(e===void 0||!e.rexSizer)return!1;for(var t;;){if(!e.rexSizer)return!1;if(t=e.rexSizer.treeParent,t===this)return!0;if(t===null)return!1;e=t}return!1}},ch=function(e,t,i,n,x=!1){var S;if(ci(t))S=t,delete t[key];else if(Ki(t)){var M=t;S=M(e,i),S&&e.add.existing(S)}else(x||t)&&n&&(S=n(e,t,i));return S},xp=function(e,t,i){var n=Ne(e,t);return n},EU=function(e,t,i){var n=new eh(e,t);return e.add.existing(n),n.resetDisplayContent(""),n};const Xa=Phaser.Utils.Objects.GetValue;class oT extends aT(qt){constructor(t,i,n){var x=i.space;super(t,{orientation:"x",space:{left:Xa(x,"nodeLeft",0),right:Xa(x,"nodeRight",0),top:Xa(x,"nodeTop",0),bottom:Xa(x,"nodeBottom",0)}}),this.type="rexTreeNode";var S=ch(t,Xa(i,"nodeBackground"),n,xp,!1),M=ch(t,Xa(i,"nodeBody"),n,EU,!0);S&&this.addBackground(S),this.add(M,{proportion:1}),this.nodeBody=M,this.addChildrenMap("background",S),this.addChildrenMap("nodeBody",M)}get isNode(){return!0}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var t=this.rexSizer.treeParent;return t?t.getTreeRoot():null}getTreesSizer(){var t=this.getTreeRoot();return t?t.getParentSizer():null}}var hT=function(e,t){var i=e.parentContainer;if(i){t.isRexContainerLite?t.addToContainer(i):i.add(t);return}var n=e.displayList;if(uo(n)){t.isRexContainerLite?t.addToLayer(n):n.add(t);return}e.scene.add.existing(t)};const lT=Phaser.Utils.String.UUID;var PU={addTree(e,t){if(ci(e)){var i=e;e={nodeBody:i,nodeKey:t}}return this.insertTree(void 0,e)},insertTree(e,t){var i;typeof t=="string"?(i=t,t=void 0):t&&(i=t.nodeKey,delete t.nodeKey),i===void 0&&(i=lT());var n=this.createTree(t);return hT(this,n),this.insertNode(e,n,{expand:!0}),n._postAddCallback(),n},addNode(e,t){return this.insertNode(void 0,e,t)},insertNode(e,t,i){var n;ci(t)||(i=t,t=new oT(this.scene,this.configSave,{isLeaf:!0})),typeof i=="string"?(n=i,i=void 0):i&&(n=i.nodeKey,delete i.nodeKey),n===void 0&&(n=lT()),i===void 0&&(i={}),i.hasOwnProperty("expand")||(i.expand=!0),this.removeNode(t,!1),t.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(n)&&(console.error(`[Trees] Duplicate nodeKey '${n}'`),this.removeNode(this.nodesMap[n],!0)),t.nodeKey=n,this.nodesMap[n]=t;var x=this.childrenMap.child;return x.insert(e,t,i),t}},MU={removeNode(e,t){if(typeof e=="string"&&(e=this.getTree(e)),!e)return this;var i=this.getTreePatent(e);if(!i)return this;delete i.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null;var n=i.childrenMap.child;return n.remove(e,t),this},removeAllNodes(e){var t=this.nodesMap;for(var i in t)this.removeNode(t[i],e);return this}},wU={getNode(e){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){var t=e.shift(),i=this.nodesMap[t];return e.length===0?i:i&&this.isTreeObject(i)?i.getNode(e):null}},getNodes(e){var t=this.nodesMap;if(!e)e=nodes;else for(var i in t)e.push(t[i]);return e},getAllNodes(e){}},uT={pointToChild:SU};Object.assign(uT,TU,PU,MU,wU);var AU=function(e,t,i){var n=new Ro(e,t);return e.add.existing(n),n.on("expand.start",function(x){x.setDirection("down")}).on("collapse.complete",function(x){x.setDirection("right")}),n};const dT=Phaser.Utils.Objects.GetValue;var RU=function(e,t){var i=new oT(e,t,{isLeaf:!1});e.add.existing(i);var n=ch(e,dT(t,"toggleButton"),{isLeaf:!1},AU,!0);return i.insert(0,n,{padding:{right:dT(t,"space.toggleButton",0)},fitRatio:1}),i.addChildrenMap("toggleButton",n),i};const fT=Phaser.Utils.Objects.GetValue;var LU=function(e,t){var i=new qt(e,{orientation:fT(t,"childrenOrientation","y")});e.add.existing(i);var n=ch(e,fT(t,"childrenBackground"),{isLeaf:!1},xp,!1);return n&&i.addBackground(n),i};const bU=Phaser.Utils.Objects.Clone;var OU=function(e,t){var i=e?bU(e):{};if(!t)return i;for(var n in t)i[n]=t[n];return i};const Nr=Phaser.Utils.Objects.GetValue;class Gn extends aT(fh){constructor(t,i){i===void 0&&(i={});var n=ch(t,Nr(i,"background"),{isLeaf:!1},xp,!1),x=LU(t,i),S=x.childrenMap.items,M=RU(t,i),L=M.childrenMap.toggleButton,F=M.childrenMap.nodeBody,G=yn(Nr(i,"orientation","y")),X=i.space;if(X){var Q=Nr(X,"indent",0);X.childLeft=Nr(X,"indentLeft",G===1?Q:0),X.childRight=Nr(X,"indentRight",0),X.childTop=Nr(X,"indentTop",G===0?Q:0),X.childBottom=Nr(X,"indentBottom",0)}var tt={background:n,title:M,child:x,toggleByTarget:L,transition:i.transition,orientation:G,space:X,align:i.align,expand:i.expand};super(t,tt),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=i,this.nodeBody=F,this.addChildrenMap("toggleButton",L),this.addChildrenMap("nodeBody",F),this.addChildrenMap("childrenNodes",S),this.on("expand.start",function(){L.emit("expand.start",L),Xu(this,"expand.start")},this).on("expand.complete",function(){L.emit("expand.complete",L),Xu(this,"expand.complete")}).on("collapse.start",function(){L.emit("collapse.start",L),Xu(this,"collapse.start")}).on("collapse.complete",function(){L.emit("collapse.complete",L),Xu(this,"collapse.complete")});var _=this;_._postAddCallback=function(){var nt=Nr(i,"expanded",!0);nt!==void 0&&_.setExpandedState(nt),delete _._postAddCallback}}destroy(t){!this.scene||this.ignoreDestroy||(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(t))}get isTree(){return!0}createTree(t){return Gn.CreateTree(this.scene,this.configSave,t)}isTreeObject(t){return t&&t instanceof Gn}}Gn.CreateTree=function(e,t,i){return new Gn(e,OU(t,i))};var Xu=function(e,t){var i=e.getTreesSizer();i&&i.emit(t,e)};Object.assign(Gn.prototype,uT);const FU=Phaser.Utils.String.UUID;var DU={addTree(e){if(ci(e)){var t=e;e={nodeBody:t,nodeKey}}return this.insertTree(void 0,e)},insertTree(e,t){var i;typeof t=="string"?(i=t,t=void 0):t&&(i=t.nodeKey,delete t.nodeKey),i===void 0&&(i=FU());var n=Gn.CreateTree(this.scene,this.treeConfig,t);return hT(this,n),n.nodeKey=i,this.treesMap[i]=n,this.insert(e,n,{expand:!0}),n._postAddCallback(),n}},BU={removeTree(e,t){return typeof e=="string"&&(e=this.getTree(e)),e?(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,t),this):this},removeAllNodes(e){var t=this.treesMap;for(var i in t)this.removeTree(t[i],e);return this}},IU={getTree(e){return this.treesMap[e]},getTrees(e){e===void 0&&(e=[]);for(var t in this.treesMap)e.push(this.treesMap[t]);return e},getNode(e){var t=e.indexOf(".");if(t===-1)return this.getTree(e);var i=this.getTree(e.substring(0,t));if(i)return i.getNode(e.substring(t+1))}},cT={pointToChild:yU,setChildrenInteractive:CU};Object.assign(cT,DU,BU,IU);const GU=Phaser.Utils.Objects.GetValue;class yp extends qt{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation="y"),super(t,i),this.type="rexTrees",this.treesMap={},this.treeConfig=GU(i,"tree")}destroy(t){!this.scene||this.ignoreDestroy||(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(t))}}Object.assign(yp.prototype,cT),W.register("trees",function(e){var t=new yp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Trees",yp),W.register("textArea",function(e){var t=new th(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.TextArea",th);var kU=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textVisibleHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.contentHeight}})},NU={setText(e){var t=this.childrenMap.child;return t.setText(e),this},appendText(e){return this.setText(this.text+e),this}},zU={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};const Wu=Phaser.Utils.Objects.GetValue;class Yu extends _o{constructor(t,i){i===void 0&&(i={});var n=Wu(i,"text"),x;ci(n)?x=n:(n===void 0&&(n={}),n.textArea=!0,x=new yo(t,n),t.add.existing(x)),kU(x);var S=n.width===void 0,M=n.height===void 0;S&&(x.minWidth=0),M&&(x.minHeight=0),i.scrollMode=0,i.type="rexTextAreaInput",i.child={gameObject:x,expandWidth:S,expandHeight:M};var L=Wu(i,"space",void 0);L&&(L.child=Wu(L,"text",0)),i.scroller=!1,super(t,i),this.addChildrenMap("text",x);var F,G;x.on("cursorin",function(){var Q=x.textOY,tt=x.contentHeight,_=F!==Q,nt=G!==tt;F=Q,G=tt,nt&&this.resizeController(),(_||nt)&&(this.t=x.t)},this),x.on("textchange",function(Q){this.emit("textchange",Q,this)},this).on("close",function(){this.emit("close",this.text,this)},this);var X=Wu(i,"content",void 0);X&&this.setText(X)}get text(){return this.childrenMap.child.text}set text(t){t==null?t="":t=t.toString(),this.childrenMap.child.text!==t&&this.setText(t)}get lineHeight(){var t=this.childrenMap.child;return t.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.contentHeight}get readOnly(){var t=this.childrenMap.child;return t.readOnly}set readOnly(t){var i=this.childrenMap.child;i.readOnly=t}setReadOnly(t){var i=this.childrenMap.child;return i.setReadOnly(t),this}get value(){return this.text}set value(t){this.text=t}}Object.assign(Yu.prototype,NU,zU),W.register("textAreaInput",function(e){var t=new Yu(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.TextAreaInput",Yu),W.register("scrollablePanel",function(e){var t=new oh(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ScrollablePanel",oh);var Hu={popUp:function(e,t){e.popUp(t)},scaleDown:function(e,t){e.scaleDown(t)},fadeIn:function(e,t){e.fadeIn(t)},fadeOut:function(e,t){e.fadeOut(t)}};const zr={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var UU={setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch(typeof e=="string"&&(e=zr[e]),e){case zr.popUp:e=Hu.popUp;break;case zr.fadeIn:e=Hu.fadeIn;break}return e||(e=a),this.transitInCallback=e,this},setTransitOutCallback(e){switch(typeof e=="string"&&(e=zr[e]),e){case zr.scaleDown:e=Hu.scaleDown;break;case zr.fadeOut:e=Hu.fadeOut;break}return e||(e=a),this.transitOutCallback=e,this}},VU={showMessage(e){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),e===void 0){if(this.messages.length===0)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof e=="string"?this.setText(e):e(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[a]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[a]]];return this.player.load(t,this).once("complete",function(){this.showMessage()},this).start(),this},removeAllMessages(){return this.messages.length=0,this}};const vh=Phaser.Utils.Objects.GetValue;class Cp extends Hs{constructor(t,i){i===void 0&&(i={text:createDefaultTextObject(t)}),super(t,i),this.type="rexToast",this.setTransitInTime(vh(i,"duration.in",200)),this.setDisplayTime(vh(i,"duration.hold",1200)),this.setTransitOutTime(vh(i,"duration.out",200)),this.setTransitInCallback(vh(i,"transitIn",zr.popUp)),this.setTransitOutCallback(vh(i,"transitOut",zr.scaleDown)),this.player=new WC(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setScale(t,i){return i===void 0&&(i=t),this.scaleX0=t,this.scaleY0=i,super.setScale(t,i),this}get isShowingMessage(){return this.player.isPlaying}}Object.assign(Cp.prototype,UU,VU),W.register("toast",function(e){var t=new Cp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Toast",Cp);var XU={"bottom-to-top":1,"top-to-bottom":0,"right-to-left":1,"left-to-right":0},WU={setQueueDirection(e){return typeof e=="string"&&(e=XU[e]),this.rtl=e===0,this.orientation===1?e?this.queueDirection=0:this.queueDirection=1:e?this.queueDirection=2:this.queueDirection=3,this},setCreateMessageLabelCallback(e){return this.createMessageLabelCallback=e,this},setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){return e||(e=a),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=a),this.transitOutCallback=e,this}};const YU=Gc.onClick,vT=Gx.delayCall,HU=Rl.moveTo;var $U=function(e,t,i){var n=t(e.scene,i,e);if(YU.call(n,function(){e.removeMessage(n)}),e.displayTime){var x=e.transitInTime+e.displayTime+10;vT.call(n,x,function(){e.removeMessage(n)})}return n},pT=function(e){for(var t=e.childrenMap.items,i,n=[],x=0,S=t.length;x<S;x++)i=t[x],n.push({x:i.x,y:i.y});return n},KU=function(e){for(var t=e.childrenMap.items,i,n=[],x=0,S=t.length;x<S;x++)i=t[x],n.push({x:i.scaleX,y:i.scaleY}),i.setScale(1);e.layout();for(var M=pT(e),x=0,S=t.length;x<S;x++){var L=n[x];t[x].setScale(L.x,L.y)}return M},ZU=function(e,t,i,n){for(var x=e.childrenMap.items,S=Math.min(t.length,i.length,x.length),M,L,F,G=e.queueDirection,X=0;X<S;X++){switch(M=x[X],L=t[X],F=i[X],M.setPosition(L.x,L.y),G){case 0:if(L.y<=F.y)continue;break;case 1:if(L.y>=F.y)continue;break;case 2:if(L.x<=F.x)continue;break;case 3:if(L.x>=F.x)continue;break}HU.call(M,n,F.x,F.y)}},JU=function(e,t,i){var n=pT(e);e.add(t);var x=KU(e);ZU(e,n,x,i),e.transitInCallback(t,i,e)},QU={showMessage(e){var t=$U(this,this.createMessageLabelCallback,e);return JU(this,t,this.transitInTime),this},removeMessage(e){if(this.getParentSizer(e)!==this)return this;if(!e.__isDestroying){e.__isDestroying=!0;var t=this.transitOutTime;return this.transitOutCallback(e,t,this),vT.call(e,t+10,function(){delete e.__isDestroying,e.destroy()}),this}},removeAllMessages(){for(var e=this.childrenMap.items,t=0,i=e.length;t<i;t++)this.removeMessage(e[t]);return this}},gT={};Object.assign(gT,WU,QU);var mT={transitIn(e,t,i){switch(i.queueDirection){case 0:e.setOrigin(.5,1),Ns.popUp.call(e,t,"y");break;case 1:e.setOrigin(.5,0),Ns.popUp.call(e,t,"y");break;case 2:e.setOrigin(1,.5),Ns.popUp.call(e,t,"x");break;case 3:e.setOrigin(0,.5),Ns.popUp.call(e,t,"x");break}Go.fadeIn.call(e,t)},transitOut(e,t,i){Go.fadeOut.call(e,t)}};const kn=Phaser.Utils.Objects.GetValue;class Sp extends qt{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1),super(t,i),this.type="rexToastQueue",this.setCreateMessageLabelCallback(kn(i,"createMessageLabelCallback")),this.setQueueDirection(kn(i,"queueDirection",1)),this.setTransitInTime(kn(i,"duration.in",200)),this.setDisplayTime(kn(i,"duration.hold",2e3)),this.setTransitOutTime(kn(i,"duration.out",200)),this.setTransitInCallback(kn(i,"transitIn",mT.transitIn)),this.setTransitOutCallback(kn(i,"transitOut",mT.transitOut))}}Object.assign(Sp.prototype,gT),W.register("toastQueue",function(e){var t=new Sp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ToastQueue",Sp);var jU=function(e,t){if(t===!1)return null;if(ci(t))return t;var i=new hn(e,t);return e.add.existing(i),i};const qU=Phaser.Utils.String.Pad;var xT=function(e,t){t===void 0&&(t="0x");var i=e.toString(16).toUpperCase();return i=qU(i,6,0,1),i=t+i,i},_U=function(e,t){e&&(e.setTint?e.setTint(t):e.setFillStyle&&e.setFillStyle(t))};const Vi=Phaser.Utils.Objects.GetValue,tV=Phaser.Utils.Objects.IsPlainObject,eV=Phaser.Math.Clamp;let Tp=class extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=0,super(t,i),this.type="rexColorInputLite";var n=Vi(i,"background",void 0),x=Vi(i,"swatch"),S;tV(x)&&(S=Vi(x,"size"));var M=jU(t,Vi(i,"swatch")),L=Vi(i,"inputText",{}),F;if(L&&(F=Gr(t,L)),n&&this.addBackground(n),M){S=Vi(i,"swatchSize",S);var G;S!==void 0?(qe(M,S,S),G=!1):G=Vi(i,"squareExpandSwatch",!0);var X=G?1:0;this.add(M,{proportion:0,expand:!0,fitRatio:X})}if(F){var Q=Vi(L,"width")===void 0?1:0,tt=Vi(L,"height")===void 0;this.add(F,{proportion:Q,expand:tt})}this.addChildrenMap("background",n),this.addChildrenMap("swatch",M),this.addChildrenMap("inputText",F),F&&F.on("close",function(){this.setValue(F.value)},this);var _=Vi(i,"valuechangeCallback",null);if(_!==null){var nt=Vi(i,"valuechangeCallbackScope",void 0);this.on("valuechange",_,nt)}this.setValue(Vi(i,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=Yf(t),t==null){var n=this.childrenMap.inputText;n&&n.setText(xT(this._value));return}}else t=eV(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var i=this.childrenMap.swatch;i&&_U(i,t);var n=this.childrenMap.inputText;n&&n.setText(xT(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}};var iV={setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return typeof e=="string"&&(e=sV[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return e===void 0&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return e===void 0&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,t){return this.setColorPickerWidth(e).setColorPickerHeight(t),this},setColorPickerSpace(e){return e===void 0&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return e===void 0&&(e={}),this.colorComponentsSpace=e,this}};const sV={down:0,up:1},yT=Phaser.Display.Color,$u=Phaser.Math.Percent;var rV=function(e,t,i){i===void 0&&(i=!1);var n=e.width,x=e.height,S=new yT;if(i)for(var M=0;M<x;M++){var L=$u(M,0,x);S.setFromHSV(L,1,1),t.fillStyle=S.rgba,t.fillRect(0,M,n,1)}else for(var F=0;F<n;F++){var L=$u(F,0,n);S.setFromHSV(L,1,1),t.fillStyle=S.rgba,t.fillRect(F,0,1,x)}},nV=function(e,t,i){for(var n=e.width,x=e.height,S=t.getImageData(0,0,n,x),M=S.data,L=new yT,F=0;F<x;F++)for(var G=0;G<n;G++){var X=$u(G,0,n),Q=1-$u(F,0,x);L.setFromHSV(i,X,Q);var tt=(F*n+G)*4;M[tt]=L.red,M[tt+1]=L.green,M[tt+2]=L.blue,M[tt+3]=255}t.putImageData(S,0,0)};const aV=Phaser.Display.Color,CT=Phaser.Math.Percent,oV=Phaser.Display.Color.ColorToRGBA,hV=Phaser.Display.Color.HSVToRGB;class lV extends xn{constructor(t,i,n,x,S,M){i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=2),S===void 0&&(S=2),super(t,i,n,x,S),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new aV,this.setOrientation(M),this.setSize(x,S)}setOrientation(t){return this.orientation=yn(t),this}updateTexture(){return rV(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,i){return t===void 0?this.hue:(this.orientation===0?this.hue=CT(t,0,this.width):this.hue=CT(i,0,this.height),this.hue)}getColor(t,i){if(t===void 0)return this.color;var n=this.getHue(t,i);return this.colorObject.setFromRGB(hV(n,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,i){return i===void 0?i={}:i===!0&&(Ep===void 0&&(Ep={}),i=Ep),this.colorObject.setFromRGB(oV(t)),this.orientation===0?(i.x=this.width*this.colorObject.h,i.y=this.height/2):(i.x=this.width/2,i.y=this.height*this.colorObject.h),i}}var Ep=void 0,uV=Phaser.Math.RotateAround,ST=function(e,t,i,n){n===void 0?n={}:n===!0&&(Pp===void 0&&(Pp={}),n=Pp),t-=e.width*e.originX,i-=e.height*e.originY;var x={x:t*e.scaleX,y:i*e.scaleY};return uV(x,0,0,-e.rotation),n.x=e.x+t,n.y=e.y+i,n},Pp;class dV extends Gi{constructor(t,i){i===void 0&&(i={}),super(t,i);var n=i.width!=null?1:0,x=new lV(t).setOrientation(n);t.add.existing(x),this.type="rexColorPicker.HPalette",x.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var S=new hn(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(S),this.add(x,{key:"paletteCanvas",expand:!0}).add(S,{key:"marker",expand:!1})}resize(t,i){if(this.width===t&&this.height===i)return this;super.resize(t,i);var n=Math.min(t,i);return this.childrenMap.marker.setSize(n,n),this}onPaletteCanvasPointerDown(t,i,n,x){if(t.isDown){var S=this.childrenMap.paletteCanvas,M=S.getColor(i,n);this.setMarkerPosition(M),this.emit("input",M)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var i=this.childrenMap.paletteCanvas;return i.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var i=this.childrenMap.paletteCanvas,n=this.childrenMap.marker,x=i.colorToLocalPosition(t,!0);return ST(i,x.x,x.y,n),this.resetChildPositionState(n),this}getHue(t,i){var n=this.childrenMap.paletteCanvas;return n.getHue(t,i)}}const fV=Phaser.Display.Color,TT=Phaser.Math.Percent,ET=Phaser.Display.Color.ColorToRGBA,cV=Phaser.Display.Color.HSVToRGB;class vV extends xn{constructor(t,i,n,x,S,M){i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=2),S===void 0&&(S=2),super(t,i,n,x,S),this.type="rexColorPicker.SVPaletteCanvas",M===void 0&&(M=1),this.colorObject=new fV,this.setHue(M),this.setSize(x,S)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return nV(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,i){if(t===void 0)return this.colorObject.color;var n=TT(t,0,this.width),x=1-TT(i,0,this.height);return this.colorObject.setFromRGB(cV(this.hue,n,x)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(ET(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,i){return i===void 0?i={}:i===!0&&(Mp===void 0&&(Mp={}),i=Mp),this.colorObject.setFromRGB(ET(t)),i.x=this.width*this.colorObject.s,i.y=this.height*(1-this.colorObject.v),i}}var Mp=void 0;class pV extends Gi{constructor(t,i){super(t,i);var n=new vV(t);t.add.existing(n),this.type="rexColorPicker.SVPalette",n.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var x=new hn(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(x),this.add(n,{key:"paletteCanvas",expand:!0}).add(x,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,i,n,x){if(t.isDown){var S=this.childrenMap.paletteCanvas,M=S.getColor(i,n);this.setMarkerPosition(M),this.emit("input",M)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var i=this.childrenMap.paletteCanvas;return i.setHue(t),this}setColor(t){if(this.color===t)return this;var i=this.childrenMap.paletteCanvas;return i.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var i=this.childrenMap.paletteCanvas,n=this.childrenMap.marker,x=i.colorToLocalPosition(t,!0);return ST(i,x.x,x.y,n),this.resetChildPositionState(n),this}}const ns=Phaser.Utils.Objects.GetValue;class wp extends qt{constructor(t,i){super(t,i),this.type="rexColorPicker",this.freezePalettes=!1;var n=ns(i,"hPalette.position",0);typeof n=="string"&&(n=gV[n]);var x=n===0||n===2?1:0;this.setOrientation(x);var S=ns(i,"background",void 0),M,L;if(this.orientation===0){var M=ns(i,"hPalette.width",void 0);M===void 0&&(M=ns(i,"hPalette.size",10))}else L=ns(i,"hPalette.height",void 0),L===void 0&&(L=ns(i,"hPalette.size",10));var F=new dV(t,{width:M,height:L});t.add.existing(F);var G=ns(i,"svPalette.width",void 0),X=ns(i,"svPalette.height",void 0),Q=new pV(t,{width:G,height:X});t.add.existing(Q),S&&this.addBackground(S);var tt={proportion:0,expand:!0},_,nt;this.orientation===0?(_=G===void 0?1:0,nt=X===void 0):(_=X===void 0?1:0,nt=G===void 0);var lt={proportion:_,expand:nt};n===0||n===3?this.add(Q,lt).add(F,tt):this.add(F,tt).add(Q,lt),F.on("input",function(){Q.setHue(F.getHue()),this.setValue(Q.color,!0)},this),Q.on("input",function(){this.setValue(Q.color,!0)},this),this.addChildrenMap("background",S),this.addChildrenMap("hPalette",F),this.addChildrenMap("svPalette",Q);var ot=ns(i,"valuechangeCallback",null);if(ot!==null){var dt=ns(i,"valuechangeCallbackScope",void 0);this.on("valuechange",ot,dt)}this.setValue(ns(i,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,i,this)}}setValue(t,i){return this.freezePalettes=!!i,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(t,i,n){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),super.postLayout(t,i,n),this}}var gV={bottom:0,left:1,top:2,right:3};const Es=Phaser.Utils.Objects.GetValue,mV=Phaser.Display.Color,xV=Phaser.Display.Color.ColorToRGBA,yV=Phaser.Display.Color.HSVToRGB,Nn=Phaser.Math.Clamp;class Ap extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=0,super(t,i),this.type="rexColorComponents",this.colorObject=new mV;var n=Es(i,"background",void 0),x=Es(i,"formatLabel",void 0);ci(x)||(x=Ye(t,x).resetDisplayContent());var S=[];if(i.inputText0&&i.inputText1&&i.inputText2)S.push(i.inputText0),S.push(i.inputText1),S.push(i.inputText2);else for(var M=Es(i,"inputText"),L=0;L<3;L++){var F=Gr(t,M).setMaxLength(3).setNumberInput();S.push(F)}n&&this.addBackground(n);var X=Es(i,"proportion.formatLabel",0),G=!!x.isRexContainerLite,Q=Es(i,"expand.formatLabel",G);this.add(x,{proportion:X,expand:Q});for(var X=Es(M,"width")===void 0?1:0,Q=Es(M,"height")===void 0,L=0,tt=S.length;L<tt;L++)this.add(S[L],{proportion:X,expand:Q});this.addChildrenMap("background",n),this.addChildrenMap("formatLabel",x),this.addChildrenMap("components",S),this.onClick(x,this.toggleColorFormat,this);for(var L=0,tt=S.length;L<tt;L++)S[L].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var _=Es(i,"valuechangeCallback",null);if(_!==null){var nt=Es(i,"valuechangeCallbackScope",void 0);this.on("valuechange",_,nt)}x.setText("RGB"),this.setValue(Es(i,"value",16777215))}get value(){return this._value}set value(t){t=Nn(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(xV(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,i,n,x;return this.colorFormat==="RGB"?(i=this.colorObject.red,n=this.colorObject.green,x=this.colorObject.blue):(i=Math.floor(this.colorObject.h*360),n=Math.floor(this.colorObject.s*100),x=Math.floor(this.colorObject.v*100)),t[0].setValue(i),t[1].setValue(n),t[2].setValue(x),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var i=Nn(t[0].value,0,255),n=Nn(t[1].value,0,255),x=Nn(t[2].value,0,255);this.colorObject.setTo(i,n,x)}else{var S=Nn(t[0].value,0,359)/360,M=Nn(t[1].value,0,100)/100,L=Nn(t[2].value,0,100)/100;this.colorObject.setFromRGB(yV(S,M,L))}return this}}const Rp=Phaser.Utils.Objects.GetValue;class CV extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexColorInput.ColorPickerPanel";var n=Rp(i,"background",void 0),x=new wp(t,{hPalette:i.hPalette||{},svPalette:i.svPalette||{},space:{item:Rp(i,"space.hPalette",8)}});t.add.existing(x);var S;i.colorComponents&&(S=new Ap(t,i.colorComponents),t.add.existing(S)),n&&(this.addBackground(n),new bl(n,{stopAllLevels:!1})),this.add(x,{proportion:1,expand:!0}),S&&this.add(S,{proportion:0,expand:!0}),this.addChildrenMap("background",n),this.addChildrenMap("colorPicker",x),this.addChildrenMap("colorComponents",S),x.on("valuechange",function(M){this.setValue(M)},this),S&&S.on("valuechange",function(M){this.setValue(M)},this),this.setValue(Rp(i,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var i=this.childrenMap.colorPicker;i.setValue(t);var n=this.childrenMap.colorComponents;n&&n.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var SV=function(t){var t=this.scene,i,n=this.colorPickerCreateBackgroundCallback;n&&(i=n.call(this,t),t.add.existing(i));var x=this.colorPickerWidth;x===void 0&&(x=this.width);var S=this.colorPickerHeight;S===void 0&&(S=x);var M;this.colorComponentsHeight>0?M={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:M=!1;var L=new CV(t,{width:x,height:S,background:i,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:M,value:this.value});return t.add.existing(L),L},TV=function(){if(!this.colorPicker){var e=SV.call(this).layout(),t=new PS(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){e.on("valuechange",function(i){this.setValue(i)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=e,this.dropDownBehavior=t,this.pin(e),this}},PT={openColorPicker:TV};Object.assign(PT,iV);const Je=Phaser.Utils.Objects.GetValue;class Ku extends Tp{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexColorInput",i.hasOwnProperty("colorPicker")||(i.colorPicker={background:{color:0}});var n=i.colorPicker,x=n!==!1&&n!==null;if(x){this.setColorPickerSize(Je(n,"width",160),Je(n,"height",170));var S,M=Je(n,"background");M?S=function(_){return Ne(_,M)}:S=Je(n,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(S),this.setColorPickerHPalettePosition(Je(n,"hPalettePosition",0)),this.setColorPickerExpandDirection(Je(n,"expandDirection")),this.setColorPickerEaseInDuration(Je(n,"easeIn",200)),this.setColorPickerEaseOutDuration(Je(n,"easeOut",200)),this.setColorPickerTransitInCallback(Je(n,"transitIn")),this.setColorPickerTransitOutCallback(Je(n,"transitOut")),this.setColorPickerBounds(Je(n,"bounds"));var L=Je(n,"space");L===void 0&&(L={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(L)}var F=i.colorComponents,G=F!==!1&&F!==null;if(x&&G){this.setColorComponentsHeight(Je(F,"height",30)),this.setColorComponentsFormatLabelConfig(Je(F,"formatLabel"));var X=Je(F,"inputText");X||(X=Je(i,"inputText")),this.setColorComponentsInputTextConfig(X);var Q=Je(F,"space");Q===void 0&&(Q={item:8}),this.setColorComponentsSpace(Q)}var tt=this.childrenMap.swatch;tt&&x&&this.onClick(tt,this.openColorPicker,this)}}Object.assign(Ku.prototype,PT),W.register("colorInput",function(e){var t=new Ku(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ColorInput",Ku),W.register("colorInputLite",function(e){var t=new Tp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ColorInputBase",Tp),W.register("colorPicker",function(e){var t=new wp(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ColorPicker",wp),W.register("colorComponents",function(e){var t=new Ap(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.ColorComponents",Ap);var MT=function(e){for(var t=e.scene.input,i=t.manager,n=i.pointersTotal,x=i.pointers,S,M=0;M<n;M++)if(S=x[M],!(!S.primaryDown||t.getDragState(S)!==0||!Rf(e,S)))return t.setDragState(S,1),t._drag[S.id]=[e],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(S,3),t.processDragStartList(S)):t.setDragState(S,2),!0;return!1};const Zu=Phaser.Utils.Objects.GetValue,wT=Phaser.Math.Distance.Between,AT=Phaser.Math.RotateAroundDistance;class Lp extends ye{constructor(t,i){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Zu(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Zu(t,"enable",!0)),this.setAxisMode(Zu(t,"axis",0)),this.setAxisRotation(Zu(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=EV[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return MT(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,i,n){this.isDragging||(this.pointer=t)}onDrag(t,i,n){if(this.pointer===t){var x=this.parent;if(this.axisMode===0)x.x=i,x.y=n;else if(this.axisRotation===0)this.axisMode===1?x.x=i:this.axisMode===2&&(x.y=n);else{var S,M={x:i,y:n};S=wT(M.x,M.y,x.x,x.y),M=AT(M,x.x,x.y,-this.axisRotation,S),this.axisMode===1?M.y=x.y:this.axisMode===2&&(M.x=x.x),S=wT(M.x,M.y,x.x,x.y),M=AT(M,x.x,x.y,this.axisRotation,S),x.x=M.x,x.y=M.y}}}onDragEnd(t,i,n,x){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const EV={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var PV=function(){var e=this.sizerChildren[0],t=this.sizerChildren[1],i=this.sizerChildren[2],n=this.getSizerConfig(e).padding,x=this.getSizerConfig(t).padding,S=this.getSizerConfig(i).padding;if(this.orientation===0){var M=this.innerLeft+n.left,L=this.innerRight-S.right,F=_t(t),G=t.x+F*(0-t.originX),X=t.x+F*(1-t.originX),Q=G-x.left-this.space.item-n.right,tt=X+x.right+this.space.item+S.left,_=Q-M,nt=L-tt,lt=_+nt;this.minFirstChildSize>0&&_<this.minFirstChildSize&&(_=this.minFirstChildSize,nt=lt-_),this.minSecondChildSize>0&&nt<this.minSecondChildSize&&(nt=this.minSecondChildSize,_=lt-nt),this.setSplitRatio(_/lt)}else{var ot=this.innerTop+n.top,dt=this.innerBottom-S.bottom,ct=te(t),ft=t.y+ct*(0-t.originY),xt=t.y+ct*(1-t.originY),St=ft-x.top-this.space.item-n.bottom,Pt=xt+x.bottom+this.space.item+S.top,wt=St-ot,bt=dt-Pt,kt=wt+bt;this.minFirstChildSize>0&&wt<this.minFirstChildSize&&(wt=this.minFirstChildSize,bt=kt-wt),this.minSecondChildSize>0&&bt<this.minSecondChildSize&&(bt=this.minSecondChildSize,wt=kt-bt),this.setSplitRatio(wt/kt)}var Dt=this.minWidth,Vt=this.minHeight;this.setMinSize(this.width,this.height).layout().setMinSize(Dt,Vt)};const Ie=Phaser.Utils.Objects.GetValue,MV=Phaser.Math.Clamp;class RT extends qt{constructor(t,i){i.hasOwnProperty("orientation")||(i.orientation=i.hasOwnProperty("leftPanel")?0:1),super(t,i),this.type="rexSplit";var n=Ie(i,"background",void 0),x,S,M,L;this.orientation===0?(x="leftPanel",S="rightPanel",M="minLeftPanelWidth",L="minRightPanelWidth"):(x="topPanel",S="bottomPanel",M="minTopPanelHeight",L="minBottomPanelHeight");var F=Ie(i,x,void 0),G=Ie(i,"splitter",void 0),X=Ie(i,S,void 0);n&&this.addBackground(n);var Q=Ie(i,"space",void 0);this.add(F,{proportion:1,expand:!0,padding:{left:Ie(Q,`${x}Left`,0),right:Ie(Q,`${x}Right`,0),top:Ie(Q,`${x}Top`,0),bottom:Ie(Q,`${x}Bottom`,0)}}),this.add(G,{proportion:0,expand:!0,padding:{left:Ie(Q,"splitterLeft",0),right:Ie(Q,"splitterRight",0),top:Ie(Q,"splitterTop",0),bottom:Ie(Q,"splitterBottom",0)}}),this.add(X,{proportion:1,expand:!0,padding:{left:Ie(Q,`${S}Left`,0),right:Ie(Q,`${S}Right`,0),top:Ie(Q,`${S}Top`,0),bottom:Ie(Q,`${S}Bottom`,0)}}),this.addChildrenMap("background",n),this.addChildrenMap(x,F),this.addChildrenMap("splitter",G),this.addChildrenMap(S,X),this.minFirstChildSize=Ie(i,M,0),this.minSecondChildSize=Ie(i,L,0),this.setSplitRatio(Ie(i,"splitRatio",.5)),this.splitterDragBehavior=new Lp(G,{axis:this.orientation===0?1:2}),G.on("dragstart",function(){this.emit("splitter.dragstart",G,this.splitRatio)},this).on("dragend",function(){this.emit("splitter.dragend",G,this.splitRatio)},this).on("drag",function(){PV.call(this),this.emit("splitter.drag",G,this.splitRatio)},this).on("pointerover",function(){this.emit("splitter.over",G,this.splitRatio)},this).on("pointerout",function(){this.emit("splitter.out",G,this.splitRatio)},this)}get splitterEnable(){return this.splitterDragBehavior.enable}set splitterEnable(t){this.splitterDragBehavior.setEnable(t)}setSplitterEnable(t){return t===void 0&&(t=!0),this.splitterEnable=t,this}set minLeftPanelWidth(t){this.minFirstChildSize=t}get minLeftPanelWidth(){return this.minFirstChildSize}set minRightPanelWidth(t){this.minSecondChildSize=t}get minRightPanelWidth(){return this.minSecondChildSize}set minTopPanelHeight(t){this.minFirstChildSize=t}get minTopPanelHeight(){return this.minFirstChildSize}set minBottomPanelHeight(t){this.minSecondChildSize=t}get minBottomPanelHeight(){return this.minSecondChildSize}setMinLeftPanelWidth(t){return this.minLeftPanelWidth=t,this}setMinRightPanelWidth(t){return this.minRightPanelWidth=t,this}setMinTopPanelHeight(t){return this.minTopPanelHeight=t,this}setMinBottomPanelHeight(t){return this.minBottomPanelHeight=t,this}get splitRatio(){return this._splitRatio}set splitRatio(t){t=MV(t,0,1),this._splitRatio!==t&&(this._splitRatio=t,this.getSizerConfig(this.sizerChildren[0]).proportion=t,this.getSizerConfig(this.sizerChildren[2]).proportion=1-t)}setSplitRatio(t){return this.splitRatio=t,this}}W.register("splitPanels",function(e){var t=new RT(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.SplitPanels",RT);var wV=function(){return function(e,t,i,n){t!=="panel"&&i.setChildVisible(e,!0)}},AV=function(){return function(e,t,i,n){t!=="panel"&&i.setChildVisible(e,!1)}},RV={show:wV,hide:AV},LV=function(e,t){return t===void 0&&(t=1),function(i,n,x,S){n!=="panel"&&x.fadeChild(i,S?0:e,t)}},bV=function(e,t){return t===void 0&&(t=0),function(i,n,x,S){n!=="panel"&&x.fadeChild(i,S?0:e,t)}},OV={show:LV,hide:bV},LT=function(e,t){return function(i,n,x,S){n!=="panel"&&x.moveChild(i,S?0:e,t)}},FV={show:LT,hide:LT},bT=function(e,t){return function(i,n,x,S){n==="panel"&&x.moveChild(i,S?0:e,t)}},DV={show:bT,hide:bT};const bp={visible:RV,fade:OV,move:FV,"move-panel":DV};var BV=function(e){var t,i;[t,...i]=typeof e=="string"?[e]:e;var n,x;return bp.hasOwnProperty(t)?(n=bp[t].show.apply(null,i),x=bp[t].hide.apply(null,i)):(n=a,x=a),{show:n,hide:x}},IV={showChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("showchild",i,e,this,t),this.resetChildState(i)),this},hideChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("hidechild",i,e,this,t),this.resetChildState(i)),this},swapChild(e,t){return this.currentChildKey===e||(this.currentChildKey==="panel"||e==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var e=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(e),this}};const GV=Ci.prototype.setChildVisible;var kV={setChildVisible(e,t){var i;if(typeof e=="string"){var i=e;e=this.sizerChildren[i]}else i=$l(this.sizerChildren,e);return t===void 0&&(t=this.currentChildKey===i),GV.call(this,e,t),this}},NV={fadeChild(e,t,i){var n;return typeof e=="string"?(n=e,e=this.sizerChildren[n]):n=$l(this.sizerChildren,e),t===void 0&&(t=500),i===void 0&&(i=this.currentChildKey===n?1:0),e.fadeIn(t,{start:e.alpha,end:i}),this},fadeChildPromise(e,t,i){return typeof e=="string"&&(e=this.sizerChildren[key]),this.fadeChild(e,t,i),e._fade?Ke(e._fade):Promise.resolve()}},zV={moveChild(e,t,i,n){var x;typeof e=="string"?(x=e,e=this.sizerChildren[x]):x=$l(this.sizerChildren,e),t===void 0&&(t=500);var S=this.currentChildKey===x;if(n===void 0)switch(x){case"leftSide":case"rightSide":n=_t(e);break;case"topSide":case"bottomSide":n=te(e);break;default:if(S)switch(this.previousChildKey){case"leftSide":case"rightSide":n=_t(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":n=te(this.sizerChildren[this.previousChildKey]);break;default:n=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":n=_t(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":n=te(this.sizerChildren[this.currentChildKey]);break;default:n=0;break}break}var M,L,F,G;if(S)switch(x){case"panel":switch(this.previousChildKey){case"leftSide":M=!0;break;case"rightSide":L=!0;break;case"topSide":F=!0;break;case"bottomSide":G=!0;break}break;case"leftSide":L=!0;break;case"rightSide":M=!0;break;case"topSide":G=!0;break;case"bottomSide":F=!0;break}else switch(x){case"panel":switch(this.currentChildKey){case"leftSide":L=!0;break;case"rightSide":M=!0;break;case"topSide":G=!0;break;case"bottomSide":F=!0;break}break;case"leftSide":M=!0;break;case"rightSide":L=!0;break;case"topSide":F=!0;break;case"bottomSide":G=!0;break}return M?e.moveTo(t,`-=${n}`,void 0,i):L?e.moveTo(t,`+=${n}`,void 0,i):F?e.moveTo(t,void 0,`-=${n}`,i):G?e.moveTo(t,void 0,`+=${n}`,i):e.moveTo(0),this},moveChildPromise(e,t,i,n){return typeof e=="string"&&(e=this.sizerChildren[key]),this.moveChild(e,t,i,n),e._easeMove?Ke(e._easeMove):Promise.resolve()}},OT={};Object.assign(OT,kV,NV,zV);const gi=Phaser.Utils.Objects.GetValue;class Op extends Gi{constructor(t,i){super(t,i),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var n=gi(i,"showChildCallback",void 0);if(n)if(Ki(n)){var x=gi(i,"showChildCallbackScope",void 0);this.on("showchild",n,x);var S=gi(i,"hideChildCallback",void 0),M=gi(i,"hideChildCallbackScope",void 0);this.on("hidechild",S,M)}else{var L=BV(n);this.on("showchild",L.show),this.on("hidechild",L.hide)}var F=gi(i,"background",void 0),G=gi(i,"panel",void 0),X=gi(i,"leftSide",void 0),Q=gi(i,"rightSide",void 0),tt=gi(i,"topSide",void 0),_=gi(i,"bottomSide",void 0);if(F&&this.addBackground(F),G&&this.add(G,"panel","center",0,!0),X){var nt=gi(i,"expand.left",!0);this.add(X,"leftSide","left-top",0,{height:nt})}if(Q){var nt=gi(i,"expand.right",!0);this.add(Q,"rightSide","right-top",0,{height:nt})}if(tt){var nt=gi(i,"expand.top",!0);this.add(tt,"topSide","left-top",0,{width:nt})}if(_){var nt=gi(i,"expand.bottom",!0);this.add(_,"bottomSide","left-bottom",0,{width:nt})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Op.prototype,IV,OT),W.register("sides",function(e){var t=new Op(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Sides",Op);var UV=function(e){var t=!0;return e.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(e),this};const VV=Phaser.Utils.Array.GetFirst,XV=Phaser.Utils.Array.Remove;var WV=function(e){var t=VV(this.inputHandlers,"name",e);return t&&XV(this.inputHandlers,t),this};class ph extends Hs{constructor(t,i){i=xu(t,i),super(t,i),this.type="rexTweaker.Title"}setTitle(t){return t=t?ht(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class YV extends ph{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexTweaker.FolderTitle";var n=new Ro(t,i.expandedIcon);t.add.existing(n),this.addSpace().add(n,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",n)}setExpandedState(t){t===void 0&&(t=!0);var i=t?"down":"right",n=this.childrenMap.expandedIcon;return n.setDirection(i),this}}/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var FT=function(e,t){var i=Hi(e);for(var n in t)i.hasOwnProperty(n)||(i[n]=t[n]);return i},gh=function(e,t,i){return Ne(e,FT(t,i))},HV={setBindingTarget(e){var t=this.childrenMap.child;return t.setBindingTarget(e),this}},$V={getMaxInputRowTitleWidth(){var e=this.childrenMap.child,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(e),this}};class DT extends fh{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexTweaker.Folder"}setTitle(t){var i=this.childrenMap.title;return i.setTitle(t),this}}Object.assign(DT.prototype,HV,$V);const Wa=Phaser.Utils.Objects.GetValue;var KV=function(e,t,i){var n=e.scene,x=Wa(i,"title")||{},S=new YV(n,x);n.add.existing(S),S.on("folder.expand",function(){S.setExpandedState(!0)}).on("folder.collapse",function(){S.setExpandedState(!1)});var M={root:Wa(i,"root"),styles:Wa(i,"tweaker"),space:Wa(i,"space")||{}},L=e.createTweaker(M),F=Wa(i,"background"),G=gh(n,t,F),X=new DT(n,{title:S,child:L,background:G,transition:{duration:Wa(i,"transition.duration",200)}});return n.add.existing(X),X};const BT=Phaser.Utils.Objects.GetValue;var ZV=function(e){e===void 0&&(e={});var t=BT(this.styles,"folder")||{};t.tweaker=this.styles,t.root=this.root;var i=KV(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var n=BT(e,"expanded",!0);n!==void 0&&i.setExpandedState(n);var x=i.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,x),x},JV={setBindingTarget(e){for(var t=this.childrenMap.pages.children,i=0,n=t.length;i<n;i++)t[i].setBindingTarget(e);return this}},QV={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.pages.children,i=0,n=t.length;i<n;i++)e=Math.max(e,t[i].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,i=0,n=t.length;i<n;i++)t[i].setInputRowTitleWidth(e);return this}};class IT extends Vu{constructor(t,i){super(t,i),this.type="rexTweaker.TabPages"}}Object.assign(IT.prototype,JV,QV);const Ju=Phaser.Utils.Objects.GetValue;var jV=function(e,t,i){var n=e.scene,x=new IT(n,i);n.add.existing(x);for(var S=Ju(i,"tab"),M={root:Ju(i,"root"),styles:Ju(i,"tweaker")},L=Ju(t,"pages")||[],F=0,G=L.length;F<G;F++){var X=L[F];x.addPage({key:X.title,tab:Ye(n,S).setActiveState(!1).resetDisplayContent({text:X.title}),page:e.createTweaker(M)})}return x.on("tab.focus",function(Q,tt){Q.setActiveState(!0)}).on("tab.blur",function(Q,tt){Q.setActiveState(!1)}),x};const GT=Phaser.Utils.Objects.GetValue;var qV=function(e){e===void 0&&(e={});var t=GT(this.styles,"tab")||{};t.tweaker=this.styles,t.root=this.root;var i=jV(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0});for(var n=GT(e,"pages")||[],x=[],S=0,M=0,L=n.length;M<L;M++){var F=i.getPage(M),G=n[M].show;G&&(S=M);var X=n[M].key;X&&this.root.addChildrenMap(X,F),x.push(F)}return i.swapPage(S,0),x},_V={setBindingTarget(e){for(var t=this.childrenMap.columns,i=0,n=t.length;i<n;i++)t[i].setBindingTarget(e);return this}},tX={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.columns,i=0,n=t.length;i<n;i++)e=Math.max(e,t[i].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.columns,i=0,n=t.length;i<n;i++)t[i].setInputRowTitleWidth(e);return this}};const Ya=Phaser.Utils.Objects.GetValue;class kT extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation="y",super(t,i),this.type="rexTweaker.Columns";var n=Ya(i,"background",void 0),x=Ya(i,"title",void 0);n&&this.addBackground(n),x&&this.add(x,{expand:!0,space:{bottom:Ya(i,"space.title",0)}});var S=new qt(t,{orientation:"x",space:{item:Ya(i,"space.column",0)}});t.add.existing(S);for(var M=Ya(i,"columns",void 0),L,F,G=0,X=M.length;G<X;G++)L=M[G],F=L.child,S.add(L.child,{proportion:F.minWidth===0?1:0,expand:Ya(L,"expand",!0)});this.add(S,{expand:!0}),this.addChildrenMap("title",x),this.addChildrenMap("columnsSizer",S),this.addChildrenMap("columns",S.childrenMap.items)}setTitle(t){var i=this.childrenMap.title;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}getColumns(){return this.childrenMap.columns}getColumn(t){return this.childrenMap.columns[t]}}Object.assign(kT.prototype,_V,tX);const zn=Phaser.Utils.Objects.GetValue;var eX=function(e,t,i){var n=e.scene,x=zn(i,"title")||{},S=new ph(n,x);n.add.existing(S);var M={root:zn(i,"root"),styles:zn(i,"tweaker")},L=zn(i,"background");L&&!Array.isArray(L)&&(L=[L]);var F=zn(t,"columns",2);if(typeof F=="number"){var G=F;F=[];for(var X=0,Q=G;X<Q;X++)F.push({})}for(var X=0,Q=F.length;X<Q;X++){var tt=F[X];L&&(M.background=L[X%L.length]),M.width=zn(tt,"width",0);var _=e.createTweaker(M);tt.child=_}var nt=new kT(n,{title:S,columns:F,space:zn(i,"space")});return n.add.existing(nt),nt};const NT=Phaser.Utils.Objects.GetValue;var iX=function(e){e===void 0&&(e={}),typeof e=="number"&&(e={columns:e});var t=NT(this.styles,"columns")||{};t.tweaker=this.styles,t.root=this.root;var i=eX(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var n=NT(e,"columns",void 0);if(n&&Array.isArray(n))for(var x=0,S=n.length;x<S;x++){var M=n[x].key;M&&this.root.addChildrenMap(M,i.getColumn(x))}return i.getColumns()},sX={setBindingTarget(e){for(var t=this.childrenMap.child,i=0,n=t.length;i<n;i++)t[i].setBindingTarget(e);return this}},rX={getMaxInputRowTitleWidth(){return 0},setInputRowTitleWidth(e){return this}};const Qu=Phaser.Utils.Objects.GetValue;class zT extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation="y",super(t,i),this.type="rexTweaker.Wrap";var n=Qu(i,"background",void 0),x=Qu(i,"title",void 0);n&&this.addBackground(n),x&&this.add(x,{expand:!0,space:{bottom:Qu(i,"space.title",0)}});var S=Qu(i,"child",void 0);this.add(S,{expand:!0}),this.addChildrenMap("title",x),this.addChildrenMap("child",S)}setTitle(t){var i=this.childrenMap.title;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}}Object.assign(zT.prototype,sX,rX);const Ps=Phaser.Utils.Objects.GetValue;var nX=function(e,t,i){var n=e.scene,x=Ps(i,"title")||{},S=new ph(n,x);n.add.existing(S);var M=Ps(i,"itemWidth",0),L=Ps(i,"itemHeight",0),F={root:Ps(i,"root"),styles:Ps(i,"tweaker"),space:Ps(i,"space"),align:Ps(i,"align",5),wrap:!0,itemWidth:Ps(t,"itemWidth",M),itemHeight:Ps(t,"itemHeight",L)};Ps(i,"background");var G=e.createTweaker(F),X=new zT(n,{title:S,child:G});return n.add.existing(X),X};const aX=Phaser.Utils.Objects.GetValue;var oX=function(e){e===void 0&&(e={});var t=aX(this.styles,"wrap")||{};t.tweaker=this.styles,t.root=this.root;var i=nX(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var n=i.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,n),n},hX={setBindingTarget(e){var t=this.childrenMap.panel;return t.setBindingTarget(e),this}},lX={getMaxInputRowTitleWidth(){var e=this.childrenMap.panel,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.panel;return t.setInputRowTitleWidth(e),this}};class UT extends oh{constructor(t,i){super(t,i),this.type="rexTweaker.Scrollable"}setTitle(t){var i=this.childrenMap.header;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}}Object.assign(UT.prototype,hX,lX);const Ur=Phaser.Utils.Objects.GetValue;var uX=function(e,t,i){var n=e.scene,x=Ur(i,"title")||{},S=new ph(n,x);n.add.existing(S);var M={root:Ur(i,"root"),styles:Ur(i,"tweaker"),space:Ur(i,"space")||{}},L=e.createTweaker(M),F=Ur(i,"slider");if(F){F=ht(F);var G=F.track;G&&(F.track=gh(n,t,G));var X=F.thumb;X&&(F.thumb=gh(n,t,X))}var Q=Ur(i,"background"),tt=gh(n,t,Q),_=new UT(n,{scrollMode:0,header:S,panel:{child:L,mask:{padding:1}},slider:F,background:tt,height:Ur(t,"height",0),space:Ur(i,"space",void 0)});return n.add.existing(_),_};const dX=Phaser.Utils.Objects.GetValue;var fX=function(e){e===void 0&&(e={});var t=dX(this.styles,"scrollable")||{};t.tweaker=this.styles,t.root=this.root;var i=uX(this,e,t);delete t.tweaker,delete t.root,this.add(i,{proportion:i.minWidth===0?1:0,expand:!0}),i.setTitle(e);var n=i.childrenMap.panel;return e.key&&this.root.addChildrenMap(e.key,n),n};const VT=Phaser.Utils.Objects.GetValue;var cX={setupBinding(){var e=this.childrenMap.inputField;return e.on("valuechange",function(t){this.autoUpdateEnable&&this.setTargetValue(t)},this),this},setAutoUpdateEnable(e){return e===void 0&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,t){this.bindingTarget=e,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue();var i=this.childrenMap.inputField;return i.onBindTarget&&i.onBindTarget(e,t),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=VT(e,"onGetValue"),this.onSetValue=VT(e,"onSetValue"),this},getTargetValue(){if(this.bindingTarget){if(this.bindTargetKey!=null)return this.bindingTarget[this.bindTargetKey];if(this.onGetValue)return this.onGetValue(this.bindingTarget)}},setTargetValue(e){return this.bindingTarget?this.bindTargetKey!=null?(this.bindingTarget[this.bindTargetKey]=e,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,e),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}},vX={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var e=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==e&&t.syncValue(e)}}},pX={getMinTitleWidth(){var e=this.childrenMap.title;if(!e||e.orientation!==0)return 0;var t=e.rexSizer.padding,i=this.getChildWidth(this.childrenMap.title)+(t.left+t.right)*e.scaleX;return i+this.getInnerPadding("left")},setMinTitleWidth(e){var t=this.childrenMap.title;if(!t||t.orientation!==0)return this;var i=t.rexSizer.padding;return e-=(i.left+i.right)*t.scaleX,t.minWidth=e,this}};const Fp=Phaser.Utils.Objects.GetValue;class Dp extends qt{constructor(t,i){super(t,i),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var n=i.inputTitle,x=i.inputField,S=i.background,G=Fp(i,"proportion.title",0),M=Fp(i,"space.title",0),L;this.orientation===0?L={right:M}:L={bottom:M},this.add(n,{proportion:G,expand:!0,padding:L});var F=x.defaultProportion;F===void 0&&(F=i.defaultExpandWidth?1:0);var G=Fp(i,"proportion.inputField",F);this.add(x,{proportion:G,expand:!0}),S&&this.addBackground(S),this.addChildrenMap("title",n),this.addChildrenMap("inputField",x),this.addChildrenMap("background",S),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var i=this.childrenMap.title;return i.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(Dp.prototype,cX,vX,pX);var XT=function(e,t,i){var n=new ph(e,i);return e.add.existing(n),n},gX=function(e){e===void 0&&(e=qt);class t extends e{get bindingTarget(){var n=this.getParentSizer();return n.bindingTarget}get bindingKey(){var n=this.getParentSizer();return n.bindTargetKey}get value(){return this._value}get root(){var n=this.getParentSizer(),x=n.getParentSizer();return x.root}onBindTarget(n,x){this.onBindTargetCallback&&this.onBindTargetCallback(this,n,x)}validate(n){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(n,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(n){return this.textFormatCallback?n=this.textFormatCallback(n):n=n.toString(),n}set value(n){if(this._value!==n&&(this.validate(n)||(n=this._value),this.filterValueCallback&&(n=this.filterValueCallback(this,n)),this.displayValueCallback&&this.displayValueCallback(this,n),this._value!==n)){var x=this._value;if(this._value=n,!this.syncValueFlag){var S=this.bindingTarget,M=this.bindingKey;this.emit("valuechange",n,x,S,M),this.root.emit("valuechange",n,x,S,M)}}}getValue(){return this.value}setValue(n){return this.value=n,this}syncValue(n){return this.syncValueFlag=!0,this.value=n,this.syncValueFlag=!1,this}setup(n,x){return x===void 0&&(x=!1),(x||n.hasOwnProperty("format"))&&this.setTextFormatCallback(n.format),(x||n.hasOwnProperty("onValidate"))&&this.setValidateCallback(n.onValidate),this.setupCallback&&this.setupCallback(this,n,x),this}setSetupCallback(n){return this.setupCallback=n,this}setFilterValueCallback(n){return this.filterValueCallback=n,this}setDisplayValueCallback(n){return this.displayValueCallback=n,this}setOnBindTargetCallback(n){return this.onBindTargetCallback=n,this}setTextFormatCallback(n){return this.textFormatCallback=n,this}setValidateCallback(n){return this.validateCallback=n,this}}return t},mX=function(e,t,i){for(var n,x=this.inputHandlers,S=0,M=x.length;S<M;S++){var L=x[S];if(L.accept(t)){var F=gX(L.baseClass);n=new F(e),e.add.existing(n),n.setSetupCallback(L.setup).setFilterValueCallback(L.filterValue).setDisplayValueCallback(L.displayValue).setOnBindTargetCallback(L.onBindTarget),L.build(n,i);break}}return n&&n.setup(t,!0),n};const WT=Phaser.Utils.Objects.GetValue;var xX=function(e,t,i){var n=mX.call(this,e,t,i);if(!n)return null;var x=WT(i,"title")||{},S=XT(e,t,x),M=WT(i,"background")||{},L=Ne(e,M),F=new Dp(e,{...i,...t,inputTitle:S,inputField:n,background:L});return e.add.existing(F),F.setTitle(t),F.setValueCallbacks(t),F},yX=function(e,t,i){arguments.length===1?(i=e,e=i.bindingTarget,t=i.bindingKey):(i===void 0&&(i={}),i.bindingTarget=e,i.bindingKey=t),i.title||(i.title=t),i.bindingTarget&&i.bindingKey?i.value=i.bindingTarget[i.bindingKey]:i.value=void 0;var n=this.styles.inputRow||{};this.isWrapMode?n.defaultExpandWidth=!0:n.defaultExpandWidth=this.styles.orientation===1;var x=xX.call(this,this.scene,i,n);if(!x)return console.error(`[Tweaker] Can't add Input
    title: ${i.title}
    view: ${i.view}
`),this;if(this.isWrapMode)x.setMinWidth(this.itemWidth),x.setMinHeight(this.itemHeight),this.add(x);else{var S;this.orientation===1?S=0:(S=this.itemWidth>0?0:1,x.minWidth===0&&x.setMinWidth(this.itemWidth)),x.minHeight===0&&x.setMinHeight(this.itemHeight),this.add(x,{proportion:S,expand:!0})}if(i.onValueChange){var M=x.childrenMap.inputField;M.on("valuechange",i.onValueChange)}return x.setAutoUpdateEnable(i.autoUpdate),x.setBindingTarget(e,t),i.monitor&&x.startMonitorTarget(),i.key&&this.root.addChildrenMap(i.key,x),this},CX=function(e,t){var i=new hn(e,t);return e.add.existing(i),i};const SX=Phaser.Utils.Objects.GetValue;var TX=function(e,t){var i=SX(t,"wrap",!1),n=i?Ir:We,x=new n(e,t);return e.add.existing(x),x};const ju=Phaser.Utils.Objects.GetValue;var EX=function(e,t,i){for(var n=ju(i,"title")||{},x=XT(e,t,n),S=t.buttons,M=ju(i,"button")||{},L=[],F=0,G=S.length;F<G;F++){var X=Ye(e,M);L.push(X);var Q=S[F];X.resetDisplayContent(Q.label),X.callback=Q.callback}var tt=TX(e,{buttons:L,expand:!0,wrap:ju(t,"wrap",!1)});tt.defaultProportion=1;var _=ju(i,"background")||{},nt=CX(e,_),lt=new Dp(e,{...i,inputTitle:x,inputField:tt,background:nt});return e.add.existing(lt),lt.setTitle(t),tt.on("button.click",function(ot){ot.callback(lt.bindingTarget)}),lt};const PX=Phaser.Utils.Objects.GetValue;var MX=function(e){e===void 0&&(e={});var t=this.scene,i=e.bindingTarget;delete e.bindingTarget;var n=PX(this.styles,"inputRow")||{},x=EX(t,e,n);return this.add(x,{expand:!0}),i&&x.setBindingTarget(i),e.key&&this.root.addChildrenMap(e.key,x),this},wX=function(e){return e===void 0&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this},AX=function(e,t,i){return Ne(e,FT(t,i))};const RX=Phaser.Utils.Objects.GetValue;var LX=function(e){e===void 0&&(e={});var t=this.scene,i=RX(this.styles,"separator"),n=AX(t,e,i);return this.add(n,{expand:!0}),this},bX=function(e,t,i){return typeof t=="boolean"&&(i=t,t=void 0),i===void 0&&(i=!0),mh(this,ht(e),t,i),this},mh=function(e,t,i,n){if(t)for(var x=0,S=t.length;x<S;x++){var M=t[x];M.hasOwnProperty("$target")&&(i=M.$target,delete M.$target);var L=M.$type;switch(delete M.$type,L){case"folder":var F=e.addFolder(M);mh(F,M.$properties,i,n);break;case"tab":for(var G=e.addTab(M),X=0,Q=G.length;X<Q;X++)mh(G[X],M.pages[X].$properties,i,n);break;case"columns":for(var tt=e.addColumns(M),X=0,Q=tt.length;X<Q;X++)mh(tt[X],M.columns[X].$properties,i,n);break;case"scrollable":var _=e.addScrollable(M);mh(_,M.$properties,i,n);break;case"separator":e.addSeparator();break;case"button":M.bindingTarget=i,e.addButton(M);break;case"buttons":M.bindingTarget=i,e.addButtons(M);break;default:var nt=M.$key;if(delete M.$key,nt.indexOf(".")===-1)M.bindingTarget=i,M.bindingKey=nt;else{var lt=nt.split(".");M.bindingKey=lt.pop();for(var ot=i,dt=0,ct=lt.length;dt<ct;dt++)if(ot=ot[lt[dt]],!i){console.warn(`[Monitor] Key path '${nt}' is invalid`);continue}M.bindingTarget=ot}M.hasOwnProperty("monitor")||(M.monitor=n),e.addInput(M);break}}},OX=function(e){for(var t=this.sizerChildren,i=0,n=t.length;i<n;i++){var x=t[i];x.setBindingTarget&&x.setBindingTarget(e)}return this},FX=function(){for(var e=0,t=this.sizerChildren,i=0,n=t.length;i<n;i++){var x=t[i];x.rexSizer.hidden||(x.getMinTitleWidth?e=Math.max(e,x.getMinTitleWidth()):x.getMaxInputRowTitleWidth&&(e=Math.max(e,x.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},DX=function(e){this.isWrapMode||(e-=this.getInnerPadding("left"));for(var t=this.sizerChildren,i=0,n=t.length;i<n;i++){var x=t[i];x.rexSizer.hidden||(x.setMinTitleWidth?x.setMinTitleWidth(e):x.setInputRowTitleWidth&&x.setInputRowTitleWidth(e))}return this},BX={registerInputHandler:UV,removeInputHandler:WV,addFolder:ZV,addTab:qV,addColumns:iX,addWrap:oX,addScrollable:fX,addInput:yX,addButtons:MX,addButton:wX,addSeparator:LX,addRows:bX,setBindingTarget:OX,getMaxInputRowTitleWidth:FX,setInputRowTitleWidth:DX};const Vr=Phaser.Utils.Objects.GetValue;var YT=function(e){var t=Vr(e,"wrap",!1),i=t?Fr:qt;class n extends i{constructor(S,M){M===void 0&&(M={}),M.orientation===void 0&&(M.orientation=t?0:1),super(S,M),this.type="rexTweakerShell",this.isWrapMode=t,M.root?(this.root=M.root,this.inputHandlers=this.root.inputHandlers):(this.root=this,this.inputHandlers=[]),this.styles=Vr(M,"styles")||{},this.styles.orientation=this.orientation;var L=Vr(M,"itemWidth");L===void 0&&(L=Vr(this.styles,"itemWidth",0)),this.itemWidth=L;var F=Vr(M,"itemHeight");if(F===void 0&&(F=Vr(this.styles,"itemHeight",0)),this.itemHeight=F,t||this.root===this&&this.orientation===1){var G=Vr(M,"inputRow.alignTitle");if(G===void 0){var X=Vr(this.styles,"inputRow.proportion.title");G=!X}else G&&J(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitleStartFlag=G}else this.alignInputRowTitleStartFlag=!1;var Q=gh(S,void 0,M.background);Q&&this.addBackground(Q)}preLayout(){super.preLayout(),this.alignInputRowTitleStartFlag&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}createTweaker(S,M){M===void 0&&(M=!0);var L=YT(S),F=new L(this.scene,S);return M&&this.scene.add.existing(F),F}}return Object.assign(n.prototype,BX),n},IX=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},GX={name:"TextInput",accept(e){return e.hasOwnProperty("view")?e.view==="string":typeof e.value=="string"},build(e,t){var i=e.scene;e.type="rexTweaker.TextInput";var n=t.inputText,x=Gr(i,n);e.add(x,{proportion:1,expand:!0,key:"inputText"}),x.on("close",function(){e.setValue(x.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&IX(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))}},kX=function(e,t,i){i===void 0&&(i=!0),i?t=t?ht(t):{}:t||(t={});var n=new Yu(e,t);return e.add.existing(n),n},NX=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},zX={name:"TextAreaInput",accept(e){return e.hasOwnProperty("view")?e.view==="textarea":!1},build(e,t){var i=e.scene;this.type="rexTweaker.TextAreaInput";var n=t.inputTextArea;n===void 0&&(n={}),n.hasOwnProperty("text")||(n.text=t.inputText),n.hasOwnProperty("slider")||(n.slider=t.slider);var x=kX(i,n);e.add(x,{proportion:1,expand:!0,key:"inputText"}),x.on("close",function(){e.setValue(x.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&NX(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))},onBindTarget(e){var t=e.childrenMap.inputText;t.scrollToTop()}},UX=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},VX={name:"NumberInput",accept(e){return e.hasOwnProperty("view")?e.view==="number":typeof e.value=="number"},build(e,t){var i=e.scene;e.type="rexTweaker.NumberInput";var n=t.inputNumber||t.inputText,x=Gr(i,n).setNumberInput();e.add(x,{proportion:1,expand:!0,key:"inputText"}),x.on("close",function(){e.setValue(x.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&UX(e,!!t.inputTextReadOnly),e.isFloatType=!t.int},filterValue(e,t){return e.isFloatType?t:Math.floor(t)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))}},XX=function(e,t){var i=new Ia(e,t);return e.add.existing(i),i};const Bp=Phaser.Utils.Objects.GetValue,WX=Phaser.Math.Linear,YX=Phaser.Math.Snap.Floor;var HX=function(e,t,i,n){e.minValue=t,e.maxValue=i,e.step=n;var x=e.childrenMap.slider;x.setGap(n,t,i)},$X=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},KX={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="range":typeof e.value=="number"&&e.hasOwnProperty("min")&&e.hasOwnProperty("max")},build(e,t){var i=e.scene;e.type="rexTweaker.RangeInput";var n=t.slider,x=e.orientation===0?"track.height":"track.width",S=Bp(n,x),M=XX(i,n),X=t.defaultExpandWidth?2:0,Q=Bp(t,"proportion.range.slider",X),L=S===void 0;e.add(M,{proportion:Q,expand:L,key:"slider"});var F=t.inputNumber||t.inputText,G=Gr(i,F).setNumberInput(),X=t.defaultExpandWidth?1:0,Q=Bp(t,"proportion.range.inputText",X);e.add(G,{proportion:Q,expand:!0,key:"inputText"}),G.on("close",function(){e.setValue(G.value)}),M.on("valuechange",function(){var tt=WX(e.minValue,e.maxValue,M.value);e.step&&(tt=YX(tt,e.step,e.minValue)),e.setValue(tt)})},setup(e,t,i){(i||t.hasOwnProperty("max"))&&HX(e,t.min,t.max,t.step),(i||t.hasOwnProperty("inputTextReadOnly"))&&$X(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.slider;i.setValue(t,e.minValue,e.maxValue);var n=e.childrenMap.inputText;n.setText("").setText(e.getFotmatText(t))}},HT=function(e,t){var i=new We(e,t);return e.add.existing(i),i};const ZX=Phaser.Utils.Objects.GetValue;var JX=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},QX={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="incdec":!1},build(e,t){var i=e.scene;e.type="rexTweaker.IncDecInput";var n=ZX(t,"incDec")||{},x={text:null,action:null},S=HT(i,{expand:!1}),M=t.defaultExpandWidth?1:0;e.add(S,{proportion:M,expand:!0});var L=t.inputNumber||t.inputText,F=Gr(i,L).setNumberInput();F.on("close",function(){e.setValue(F.value)});var G=Object.assign(ht(x),n.incButton||{}),X=Ye(i,G),Q=Object.assign(ht(x),n.decButton||{}),tt=Ye(i,Q);S.addButton(X),S.addButton(tt);var _=n.inputTextIndex||0;S.insert(_,F,{proportion:1,expand:!0}),e.step=1,e.minValue=void 0,e.maxValue=void 0,S.on("button.click",function(nt,lt,ot,dt){var ct=e.value;lt===0?ct+=e.step:ct-=e.step,e.maxValue!==void 0&&ct>e.maxValue&&(ct=e.maxValue),e.minValue!==void 0&&ct<e.minValue&&(ct=e.minValue),e.setValue(ct)}),e.addChildrenMap("incButton",X),e.addChildrenMap("decButton",tt),e.addChildrenMap("inputText",F)},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&JX(e,!!t.inputTextReadOnly),(i||t.hasOwnProperty("step"))&&(e.step=t.hasOwnProperty("step")?t.step:1),(i||t.hasOwnProperty("min"))&&(e.minValue=t.min),(i||t.hasOwnProperty("max"))&&(e.maxValue=t.max)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText("").setText(e.getFotmatText(t))}},jX=function(e,t,i){i===void 0&&(i=!0),i?t=t?ht(t):{}:t||(t={});var n=new Ku(e,t);return e.add.existing(n),n},qX={name:"ColorInput",accept(e){return e.hasOwnProperty("view")?e.view==="color":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ColorInput";var n=t.colorInput;n===void 0&&(n={}),n.hasOwnProperty("inputText")||(n.inputText=t.inputText);var x=jX(i,n);e.add(x,{proportion:1,expand:!0,key:"colorInput"}),x.on("valuechange",function(S){e.setValue(S)})},displayValue(e,t){var i=e.childrenMap.colorInput;i.setValue(t)}},_X=function(e,t){var i=new kf(e,t);return e.add.existing(i),i},tW={name:"CheckboxInput",accept(e){return e.hasOwnProperty("view")?e.view==="boolean":typeof e.value=="boolean"},build(e,t){var i=e.scene;e.type="rexTweaker.CheckboxInput";var n=t.checkbox,x=_X(i,n),S=n.size;S!==void 0&&x.setSize(S,S);var M=S!==void 0?0:1;e.add(x,{proportion:0,expand:!1,fitRatio:M,key:"checkbox"}),x.on("valuechange",function(L){e.setValue(L)})},displayValue(e,t){var i=e.childrenMap.checkbox;i.setValue(t)}},eW=function(e,t){var i=new Uf(e,t);return e.add.existing(i),i},iW={name:"ToggleSwitchInput",accept(e){return e.hasOwnProperty("view")?e.view==="toggleSwitch":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ToggleSwitchInput";var n=t.toggleSwitch,x=eW(i,n),S=n.size;S!==void 0&&x.setSize(S,S);var M=S!==void 0?0:1;e.addSpace().add(x,{proportion:0,expand:!1,fitRatio:M,key:"toggleSwitch"}),x.on("valuechange",function(L){e.setValue(L)})},displayValue(e,t){var i=e.childrenMap.toggleSwitch;i.setValue(t)}},sW=function(e,t){t=wS(e,t);var i=new hh(e,t);return e.add.existing(i),i},$T=function(e,t){for(var i=0,n=e.length;i<n;i++){var x=e[i];if(x.value===t)return i}},rW=function(e,t){var i=$T(e,t);if(i!=null)return e[i]},nW=function(e,t){var i=e.childrenMap.list;i.setOptions(t)},aW={name:"ListInput",accept(e){return e.hasOwnProperty("view")?e.view==="list":e.hasOwnProperty("options")},build(e,t){var i=e.scene;e.type="rexTweaker.ListInput";var n=sW(i,t.list);e.add(n,{proportion:1,expand:!0,key:"list"}),n.on("button.click",function(x,S,M,L,F,G){e.setValue(M.value)})},setup(e,t,i){(i||t.hasOwnProperty("options"))&&nW(e,t.options)},displayValue(e,t){var i=e.childrenMap.list,n=rW(i.options,t);i.resetDisplayContent(n).setMinSize(i.width,i.height).layout().setMinSize(0,0)}},oW=function(e,t){for(var i=0,n=e.length;i<n;i++){var x=e[i];x&&x.setActiveState(i===t)}};const hW=Phaser.Utils.Objects.GetValue;var lW=function(e,t){var i=e.childrenMap.list;i.options=t;var n=e.scene,x=i.buttonConfig;i.clearButtons(!0);for(var S=0,M=t.length;S<M;S++){var L=t[S],F=Ye(n,x).setActiveState(!1).resetDisplayContent({text:L.text});i.addButton(F)}},uW={name:"ButtonsInput",accept(e){return e.hasOwnProperty("view")?e.view==="buttons":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ButtonsInput";var n=t.button?ht(t.button):{},x=hW(n,"expand",!0);x&&(n.align="center"),delete n.expand;var S=HT(i,{expand:x});S.buttonConfig=n,e.add(S,{proportion:1,expand:!0,key:"list"}),S.on("button.click",function(M,L,F,G){var X=S.options[L];X&&(e._selectedIndex=L,e.setValue(X.value),e._selectedIndex=void 0)})},setup(e,t,i){(i||t.hasOwnProperty("options"))&&lW(e,t.options)},displayValue(e,t){var i=e.childrenMap.list,n=e._selectedIndex;n===void 0&&(n=$T(i.options,t)),oW(i.childrenMap.buttons,n)}},dW=function(){this.registerInputHandler(GX).registerInputHandler(zX).registerInputHandler(VX).registerInputHandler(KX).registerInputHandler(QX).registerInputHandler(qX).registerInputHandler(tW).registerInputHandler(iW).registerInputHandler(aW).registerInputHandler(uW)};class KT extends YT(){constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("style")&&(i.styles=i.style),i.styles===void 0&&(i.styles={}),i.background=i.styles.background||{},i.space=i.styles.space||{},super(t,i),this.type="rexTweaker",dW.call(this)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.inputHandlers=void 0)}}W.register("tweaker",function(e){var t=new KT(this.scene,e);return this.scene.add.existing(t),t}),J(window,"RexPlugins.UI.Tweaker",KT),W.register("click",function(e,t){return new us(e,t)}),J(window,"RexPlugins.UI.Click",us),W.register("clickOutside",function(e,t){return new kc(e,t)}),J(window,"RexPlugins.UI.ClickOutside",kc),W.register("inTouching",function(e,t){return new La(e,t)}),J(window,"RexPlugins.UI.InTouching",La),W.register("tap",function(e,t){return ci(e)||(t=e,e=this.scene),new Gl(e,t)}),J(window,"RexPlugins.UI.Tap",Gl),W.register("press",function(e,t){return ci(e)||(t=e,e=this.scene),new kl(e,t)}),J(window,"RexPlugins.UI.Press",kl),W.register("swipe",function(e,t){return ci(e)||(t=e,e=this.scene),new Uo(e,t)}),J(window,"RexPlugins.UI.Swipe",Uo),W.register("pan",function(e,t){return ci(e)||(t=e,e=this.scene),new Jx(e,t)}),J(window,"RexPlugins.UI.Pan",Jx),W.register("drag",function(e,t){return new Lp(e,t)}),J(window,"RexPlugins.UI.Drag",Lp),W.register("pinch",function(e){return new _x(this.scene,e)}),J(window,"RexPlugins.UI.Pinch",_x),W.register("rotate",function(e){return new Zc(this.scene,e)}),J(window,"RexPlugins.UI.Rotate",Zc);const fW=Phaser.Utils.Objects.IsPlainObject,ZT=Phaser.Utils.Objects.GetValue;var JT=function(e,t,i){var n;if(e===void 0)e=i.texture.key,t=i.frame.name;else if(fW(e)){var x=e;e=ZT(x,"key",i.texture.key),t=ZT(x,"frame",i.frame.name)}else typeof e=="string"||(n=e);return n===void 0&&(n=function(S){S.setTexture(e,t)}),n};const xh=Phaser.Utils.Objects.GetValue,cW=Phaser.Utils.Objects.GetAdvancedValue,vW=Phaser.Math.Linear;class QT extends gn{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(cW(t,"duration",500)),this.setEase(xh(t,"ease","Sine")),this.setOrientation(xh(t,"orientation",0)),this.setFrontFace(xh(t,"front",void 0)),this.setBackFace(xh(t,"back",void 0)),this.setFace(xh(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=pW[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=gW[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,i){return this.frontFaceCallback=JT(t,i,this.parent),this}setBackFace(t,i){return this.backFaceCallback=JT(t,i,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateTarget(t,i){i.justRestart&&this.toggleFace();var n=i.t;i.isOddIteration&&(n=1-n),n=this.easeFn(n);var x=vW(this.scale0,0,n);this.orientation===0?t.scaleX=x:t.scaleY=x}}const pW={x:0,horizontal:0,y:1,vertical:1},gW={front:0,back:1};W.register("flip",function(e,t){return new QT(e,t)}),J(window,"RexPlugins.UI.Flip",QT),W.register("shake",function(e,t){return new Lc(e,t)}),J(window,"RexPlugins.UI.Shake",Lc),W.register("touchEventStop",function(e,t){return new bl(e,t)}),J(window,"RexPlugins.UI.TouchEventStop",bl),W.register("perspective",function(e,t){return new eT(e,t)}),J(window,"RexPlugins.UI.Perspective",eT);const jT=Phaser.Math.RotateAround;var Ip=function(e,t,i){var n=e.width/2,x=e.height/2;return ii.x=t-n,ii.y=i-x,jT(ii,0,0,e.rotation),ii.x*=e.scaleX,ii.y*=e.scaleY,ii.x+=e.x,ii.y+=e.y,ii},mW=function(e,t,i){var n=e.width/2,x=e.height/2;return ii.x=t-e.x,ii.y=i-e.y,ii.x/=e.scaleX,ii.y/=e.scaleY,jT(ii,0,0,-e.rotation),ii.x+=n,ii.y+=x,ii},ii={x:0,y:0};class xW{constructor(t,i){this.parent=t,this.vertex=i,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,i){var n=this.parent,x=n.height,S=n.frame.cutWidth/x/2,M=n.frame.cutHeight/x/2,L=t/x-S,F=i/x-M,G=this.vertex;return G.x=L,G.y=-F,n.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,i){return this._localXOrigin=t,this._localYOrigin=i,this._localX=t,this._localY=i,this}setLocalXY(t,i,n){return this._localX===t&&this._localY===i?this:(this._localX=t,this._localY=i,n||this.updateVertexPosition(t,i),this)}setWorldXY(t,i){if(this._worldX===t&&this._worldY===i)return this;var n=mW(this.parent,t,i);return this.setLocalXY(n.x,n.y),this}setPosition(t,i){return this.setWorldXY(t,i),this}getWorldXY(){return Ip(this.parent,this._localX,this._localY)}get x(){var t=Ip(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Ip(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const yW=Phaser.Geom.Mesh.Vertex,CW=Phaser.Geom.Mesh.Face;var SW=function(e){for(var t=e.isNinePointMode,i=t?9:4,n=e.vertices,x=e.faces,S=e.controlPoints,M=0;M<i;M++){var L=new yW;n.push(L),S.push(new xW(e,L))}var F;t?F=PW:e.fourPointsModeRTL?F=EW:F=TW;for(var M=0,G=F.length;M<G;M+=3){var X=n[F[M+0]],Q=n[F[M+1]],tt=n[F[M+2]];x.push(new CW(X,Q,tt))}t?(e.topLeft=S[0],e.topCenter=S[1],e.topRight=S[2],e.centerLeft=S[3],e.center=S[4],e.centerRight=S[5],e.bottomLeft=S[6],e.bottomCenter=S[7],e.bottomRight=S[8]):(e.topLeft=S[0],e.topRight=S[1],e.bottomLeft=S[2],e.bottomRight=S[3])};const TW=[0,2,3,0,3,1],EW=[1,3,2,1,2,0],PW=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var MW=function(e){var t,i=0,n=e.height,x=0,S=e.width;if(e.isNinePointMode){var M=(x+S)/2,L=(i+n)/2;t=[x,i,M,i,S,i,x,L,M,L,S,L,x,n,M,n,S,n]}else t=[x,i,S,i,x,n,S,n];return t};const wW=Phaser.Utils.Objects.IsPlainObject,Ha=Phaser.Utils.Objects.GetValue;let AW=class extends VS{constructor(t,i,n,x,S,M){wW(i)&&(M=i,i=Ha(M,"x",0),n=Ha(M,"y",0),x=Ha(M,"key",null),S=Ha(M,"frame",null)),super(t,i,n,x,S),this.type="rexQuadImage",this.isNinePointMode=Ha(M,"ninePointMode",!1),this.fourPointsModeRTL=Ha(M,"rtl",!1),this.controlPoints=[],SW(this),this.hideCCW=!1,this.syncSize()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){super.destroy(t);for(var i=0,n=this.controlPoints.length;i<n;i++)this.controlPoints[i].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var t=MW(this),i=this.width,n=this.height,x=this.frame.cutWidth/n/2,S=this.frame.cutHeight/n/2,M=this.frame.u0,L=this.frame.u1,F=this.frame.v0,G=this.frame.v1,X=L-M,Q=G-F,tt=this.controlPoints,_=0,nt=t.length;_<nt;_+=2){var lt=t[_+0],ot=t[_+1],dt=_/2,ct=lt/n-x,ft=ot/n-S,xt=M+X*(lt/i),St=F+Q*(ot/n);this.vertices[dt].set(ct,-ft,0).setUVs(xt,St),tt[dt].resetLocalXY(lt,ot)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}};Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var qT=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=0);for(var n=e.width,x=e.height,S=n*.5,M=x*.5,L=Math.tan(t)*M,F=Math.tan(i)*S,G=e.controlPoints,X=0,Q=G.length;X<Q;X++){var tt=G[X],_=tt.localXOrigin,nt=tt.localYOrigin;tt.localX=_+(nt>M?L:-L),tt.localY=nt+(_>S?F:-F)}};const RW=Phaser.Utils.Objects.IsPlainObject,qu=Phaser.Utils.Objects.GetValue,_T=Phaser.Math.DegToRad,t1=Phaser.Math.RadToDeg;class LW extends AW{constructor(t,i,n,x,S){if(RW(i)){var M=i;i=qu(M,"x",0),n=qu(M,"y",0),x=qu(M,"key",null),S=qu(M,"frame",null)}super(t,i,n,x,S),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,qT(this,this._skewX,this._skewY)}get skewXDeg(){return t1(this._skewX)}set skewXDeg(t){this.skewX=_T(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,qT(this,this._skewX,this._skewY)}get skewYDeg(){return t1(this._skewY)}set skewYDeg(t){this.skewY=_T(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,i){return i===void 0&&(i=t),this.skewX=t,this.skewY=i,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,i){return i===void 0&&(i=t),this.skewXDeg=t,this.skewYDeg=i,this}}const bW=Phaser.Utils.Objects.IsPlainObject,_u=Phaser.Utils.Objects.GetValue;class OW extends LW{constructor(t,i,n,x,S){if(bW(i)){var M=i;i=_u(M,"x",0),n=_u(M,"y",0),x=_u(M,"width",32),S=_u(M,"height",32)}var L=ZS(t,x,S);super(t,i,n,L,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}}class e1 extends tT(OW){get skewState(){return this.isRunning}}W.register("skew",function(e,t){return new e1(e,t)}),J(window,"RexPlugins.UI.Skew",e1),W.register("anchor",function(e,t){return new Mc(e,t)}),J(window,"RexPlugins.UI.Anchor",Mc),W.register("textTyping",function(e,t){return new ku(e,t)}),J(window,"RexPlugins.UI.TextTyping",ku),W.register("textPage",function(e,t){return new Gu(e,t)}),J(window,"RexPlugins.UI.TextPage",Gu);var $a=void 0,FW=function(e){e!==$a&&($a!==void 0&&$a.close(),$a=e)},DW=function(e){e===$a&&($a=void 0)};const Ms=Phaser.Utils.Objects.GetValue,BW=Phaser.Utils.Objects.Clone;var IW=function(e,t){t===void 0&&(t={}),t=BW(t);var i=e.scene,n=e.style,x=Ms(t,"backgroundColor",n.backgroundColor);x===null&&(x="transparent"),t.text=Ms(t,"text",e.text),t.fontFamily=Ms(t,"fontFamily",n.fontFamily),t.fontSize=Ms(t,"fontSize",n.fontSize),t.color=Ms(t,"color",n.color),t.backgroundColor=x,t.direction=Ms(t,"rtl",n.rtl)?"rtl":"ltr",t.align=Ms(t,"align",GW(n)),t.direction==="rtl"&&yv(e)&&(t.align="right");var S=e.padding;S.left>0&&(t.paddingLeft=`${S.left}px`),S.right>0&&(t.paddingRight=`${S.right}px`),n.backgroundCornerRadius&&(t.borderRadius=Ms(t,"borderRadius",`${n.backgroundCornerRadius}px`));var M=new eu(i,e.x,e.y,Ms(t,"width",e.width),Ms(t,"height",e.height),t);M.setScale(e.scaleX,e.scaleY).setOrigin(e.originX,e.originY).setScrollFactor(e.scrollFactorX,e.scrollFactorY);var L=e.parentContainer;return L?L.add(M):i.add.existing(M),M},GW=function(e){return e.hasOwnProperty("align")?e.align:e.hasOwnProperty("halign")?e.halign:"left"},kW=function(e,t,i){return e.time.delayedCall(0,t,[],i)};const Un=Phaser.Utils.Objects.GetValue,NW=Phaser.Utils.Objects.Merge;var zW=function(e,t){e===void 0&&(e={}),e=NW(e,this.openConfig),FW(this),Ki(e)&&(t=e,e=void 0);var i=Un(e,"inputType",void 0);i===void 0&&(i=Un(e,"type","text")),t===void 0&&(t=Un(e,"onClose",void 0));var n=Un(e,"onCreate",void 0),x=Un(e,"onOpen",void 0),S=Un(e,"onTextChanged",void 0);return this.inputText=IW(this.parent,e),n&&n(this.parent,this.inputText),this.inputText.on("textchange",function(M){var L=M.text;S?S(this.parent,L):this.parent.text=L},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,Un(e,"enterClose",i!=="textarea")&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=kW(this.scene,function(){this.scene.input.once("pointerdown",this.close,this),x&&x(this.parent,this.inputText),this.emit("open",this.parent,this.inputText)},this),this},UW=function(){return DW(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},VW={open:zW,close:UW};const XW=Phaser.Utils.Objects.GetValue;class td extends ye{constructor(t,i){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(i);var n=XW(i,"clickEnable",!0);n&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(td.prototype,VW);var WW=function(e,t,i){return e._edit||(e._edit=new td(e,{clickEnable:!1})),e._edit.open(t,i),e._edit};W.register("textEdit",function(e,t){return new td(e,t)}),J(window,"RexPlugins.UI.TextEdit",td);const i1=Phaser.Utils.Objects.GetValue,YW=Phaser.Utils.Objects.IsPlainObject;class s1 extends us{constructor(t,i){super(t,i);var n=r1(i1(i,"onEnter")),x=r1(i1(i,"onLeave")),S=t.scene.scale;this.on("click",function(M,L,F,G){S.isFullscreen?(S.stopFullscreen(),x&&x(L)):(S.startFullscreen(),n&&n(L))})}}var r1=function(e){var t;if(typeof e=="string"){var i=e;t=function(x){x.setTexture(i)}}else if(YW(e)){var i=e.key,n=e.frame;t=function(S){S.setTexture(i,n)}}else t=e;return t};W.register("fullscreenButton",function(e,t){return new s1(e,t)}),J(window,"RexPlugins.UI.FullscreenButton",s1),W.register("layerManager",function(e){return new $h(this.scene,e)}),J(window,"RexPlugins.UI.LayerManager",$h);class n1 extends Phaser.Plugins.ScenePlugin{constructor(t,i){super(t,i),this.add=new W(t)}boot(){var t=this.scene.events;t.on("destroy",this.destroy,this)}destroy(){this.add.destroy(),super.destroy()}isInTouching(t,i,n,x){return t.visible?cs(t,i,n,x):!1}get viewport(){return la(this.scene,this.scene.cameras.main,!0)}}var HW={getParentSizer:yi,getTopmostSizer:ex,removeFromParent:Dn,hide:Ar,show:wr,isShown:bc,confirmAction:tS,edit:WW,wrapExpandText:su,fontSizeExpandText:nu,fontSizeResize:ru,setFontSizeToFitWidth:ru,waitEvent:tl,waitComplete:Ke,delayPromise:$y,setChildrenInteractive:Yl,fadeIn:Pl,fadeOutDestroy:Ml,easeMoveTo:bx,easeMoveFrom:Ox,modal:Ic,modalPromise:f4,modalClose:Vx,requestDrag:MT,openFileChooser:Zy};return Object.assign(n1.prototype,HW),n1}))})(nd)),nd.exports}var jW=QW();const qW=V1(jW),_W=[{key:"slash-animations",path:"assets/images/animations/Slash.png"},{key:"bomb-animations",path:"assets/images/animations/Explosion1.png"},{key:"breathe-fire-animations",path:"assets/images/animations/Breath.png"}],tY=[{key:"sword-sound",path:"assets/sounds/SE/sword.mp3"},{key:"bomb-sound",path:"assets/sounds/SE/explosive.mp3"},{key:"breathe-fire-sound",path:"assets/sounds/SE/breathe-fire.mp3"},{key:"move-sound",path:"assets/sounds/SE/move.mp3"}],eY=[{key:"eula-sprite",path:"assets/images/cards/character-sprite/eula.webp"},{key:"furina-sprite",path:"assets/images/cards/character-sprite/furina.webp"},{key:"mavuika-sprite",path:"assets/images/cards/character-sprite/mavuika.webp"},{key:"nahida-sprite",path:"assets/images/cards/character-sprite/nahida.webp"},{key:"raiden-sprite",path:"assets/images/cards/character-sprite/raiden.webp"},{key:"venti-sprite",path:"assets/images/cards/character-sprite/venti.webp"},{key:"zhongli-sprite",path:"assets/images/cards/character-sprite/zhongli.webp"}],iY=[{key:"empty",path:"resources/cards/empty.webp"}],sY=[{key:"background",path:"assets/images/ui/background.webp"}],rY={"healing-potion":{frame:{x:0,y:0,w:256,h:256}},"black-hole":{frame:{x:256,y:0,w:256,h:256}},catalyst:{frame:{x:512,y:0,w:256,h:256}},claw:{frame:{x:768,y:0,w:256,h:256}},cooldown:{frame:{x:1024,y:0,w:256,h:256}},corruption:{frame:{x:0,y:256,w:256,h:256}},refinement:{frame:{x:256,y:256,w:256,h:256}},repair:{frame:{x:512,y:256,w:256,h:256}},seasoning:{frame:{x:768,y:256,w:256,h:256}},sword:{frame:{x:1024,y:256,w:256,h:256}},"tax-waiver":{frame:{x:0,y:512,w:256,h:256}},toxic:{frame:{x:256,y:512,w:256,h:256}},compass:{frame:{x:512,y:512,w:256,h:256}},library:{frame:{x:768,y:512,w:256,h:256}},equip:{frame:{x:1024,y:512,w:256,h:256}},fontaine:{frame:{x:0,y:768,w:256,h:256}},inazuma:{frame:{x:256,y:768,w:256,h:256}},liyue:{frame:{x:512,y:768,w:256,h:256}},mondstadt:{frame:{x:768,y:768,w:256,h:256}},natlan:{frame:{x:1024,y:768,w:256,h:256}},"nod-krai":{frame:{x:0,y:1024,w:256,h:256}},sumeru:{frame:{x:256,y:1024,w:256,h:256}},"equipment-slot":{frame:{x:512,y:1024,w:256,h:256}}},nY={image:"item.webp",size:{w:1280,h:1280},scale:"1",path:"assets\\images\\item\\item.webp"},L1={frames:rY,meta:nY},aY={eula:{frame:{x:0,y:0,w:420,h:720}},furina:{frame:{x:420,y:0,w:420,h:720}},mavuika:{frame:{x:840,y:0,w:420,h:720}},nahida:{frame:{x:1260,y:0,w:420,h:720}},raiden:{frame:{x:1680,y:0,w:420,h:720}},venti:{frame:{x:0,y:720,w:420,h:720}},zhongli:{frame:{x:420,y:720,w:420,h:720}},"unlock-furina":{frame:{x:840,y:720,w:420,h:720}},"unlock-mavuika":{frame:{x:1260,y:720,w:420,h:720}},"unlock-nahida":{frame:{x:1680,y:720,w:420,h:720}},"unlock-raiden":{frame:{x:0,y:1440,w:420,h:720}},"unlock-venti":{frame:{x:420,y:1440,w:420,h:720}},"unlock-zhongli":{frame:{x:840,y:1440,w:420,h:720}}},oY={image:"character.webp",size:{w:2100,h:2160},scale:"1",path:"assets\\images\\cards\\character\\character.webp"},b1={frames:aY,meta:oY},hY={"element-pyro":{frame:{x:0,y:0,w:30,h:30}},"element-hydro":{frame:{x:30,y:0,w:30,h:30}},"element-electro":{frame:{x:60,y:0,w:30,h:30}},"element-cryo":{frame:{x:0,y:30,w:30,h:30}},"element-dendro":{frame:{x:30,y:30,w:30,h:30}},"element-anemo":{frame:{x:60,y:30,w:30,h:30}},"element-geo":{frame:{x:0,y:60,w:30,h:30}}},lY={image:"element.webp",size:{w:90,h:90},scale:"1",path:"assets\\images\\element\\element.webp"},uY={frames:hY,meta:lY},dY={"anemo-fragment":{frame:{x:0,y:0,w:420,h:720}},"anemo-resonance":{frame:{x:420,y:0,w:420,h:720}},"cryo-fragment":{frame:{x:840,y:0,w:420,h:720}},"cryo-resonance":{frame:{x:1260,y:0,w:420,h:720}},"dendro-fragment":{frame:{x:1680,y:0,w:420,h:720}},"dendro-resonance":{frame:{x:0,y:720,w:420,h:720}},"electro-fragment":{frame:{x:420,y:720,w:420,h:720}},"electro-resonance":{frame:{x:840,y:720,w:420,h:720}},"geo-fragment":{frame:{x:1260,y:720,w:420,h:720}},"geo-resonance":{frame:{x:1680,y:720,w:420,h:720}},"hydro-fragment":{frame:{x:0,y:1440,w:420,h:720}},"hydro-resonance":{frame:{x:420,y:1440,w:420,h:720}},"pyro-fragment":{frame:{x:840,y:1440,w:420,h:720}},"pyro-resonance":{frame:{x:1260,y:1440,w:420,h:720}},empty:{frame:{x:1680,y:1440,w:420,h:720}}},fY={image:"coin.webp",size:{w:2100,h:2160},scale:"1",path:"assets\\images\\cards\\coin\\coin.webp"},O1={frames:dY,meta:fY},cY={"sword-steampunk":{frame:{x:0,y:0,w:420,h:720}},"sword-forest":{frame:{x:420,y:0,w:420,h:720}},"sword-skyward":{frame:{x:840,y:0,w:420,h:720}},"sword-sacrificial":{frame:{x:1260,y:0,w:420,h:720}},"sword-traveler":{frame:{x:0,y:720,w:420,h:720}},"sword-splendor":{frame:{x:420,y:720,w:420,h:720}},"sword-foliar-incision":{frame:{x:840,y:720,w:420,h:720}},"sword-favonius":{frame:{x:1260,y:720,w:420,h:720}},"sword-aquila":{frame:{x:0,y:1440,w:420,h:720}}},vY={image:"weapon-sword.webp",size:{w:1680,h:2160},scale:"1",path:"assets\\images\\cards\\weapon\\sword\\weapon-sword.webp"},F1={frames:cY,meta:vY},pY={"catalyst-steampunk":{frame:{x:0,y:0,w:420,h:720}},"catalyst-forest":{frame:{x:420,y:0,w:420,h:720}},"catalyst-skyward":{frame:{x:840,y:0,w:420,h:720}},"catalyst-sacrificial":{frame:{x:1260,y:0,w:420,h:720}},"catalyst-dreams":{frame:{x:0,y:720,w:420,h:720}},"catalyst-magic-guide":{frame:{x:420,y:720,w:420,h:720}},"catalyst-flowing-purity":{frame:{x:840,y:720,w:420,h:720}},"catalyst-eternal-flow":{frame:{x:1260,y:720,w:420,h:720}},"catalyst-remembrance":{frame:{x:0,y:1440,w:420,h:720}},"catalyst-sacred-winds":{frame:{x:420,y:1440,w:420,h:720}}},gY={image:"weapon-catalyst.webp",size:{w:1680,h:2160},scale:"1",path:"assets\\images\\cards\\weapon\\catalyst\\weapon-catalyst.webp"},mY={frames:pY,meta:gY},xY={"polearm-steampunk":{frame:{x:0,y:0,w:420,h:720}},"polearm-forest":{frame:{x:420,y:0,w:420,h:720}},"polearm-skyward":{frame:{x:840,y:0,w:420,h:720}},"polearm-engulfing-lightning":{frame:{x:1260,y:0,w:420,h:720}},"polearm-tassel":{frame:{x:0,y:720,w:420,h:720}},"polearm-vanquisher":{frame:{x:420,y:720,w:420,h:720}},"polearm-rightful":{frame:{x:840,y:720,w:420,h:720}},"polearm-jade":{frame:{x:1260,y:720,w:420,h:720}},"polearm-lithic":{frame:{x:0,y:1440,w:420,h:720}}},yY={image:"weapon-polearm.webp",size:{w:1680,h:2160},scale:"1",path:"assets\\images\\cards\\weapon\\polearm\\weapon-polearm.webp"},CY={frames:xY,meta:yY},SY={"claymore-steampunk":{frame:{x:0,y:0,w:420,h:720}},"claymore-forest":{frame:{x:420,y:0,w:420,h:720}},"claymore-skyward":{frame:{x:840,y:0,w:420,h:720}},"claymore-sacrificial":{frame:{x:1260,y:0,w:420,h:720}},"claymore-iron":{frame:{x:0,y:720,w:420,h:720}},"claymore-overlord":{frame:{x:420,y:720,w:420,h:720}},"claymore-gravestone":{frame:{x:840,y:720,w:420,h:720}},"claymore-beacon":{frame:{x:1260,y:720,w:420,h:720}},"claymore-bell":{frame:{x:0,y:1440,w:420,h:720}}},TY={image:"weapon-claymore.webp",size:{w:1680,h:2160},scale:"1",path:"assets\\images\\cards\\weapon\\claymore\\weapon-claymore.webp"},EY={frames:SY,meta:TY},PY={"bow-forest":{frame:{x:0,y:0,w:420,h:720}},"bow-elegy":{frame:{x:420,y:0,w:420,h:720}},"bow-skyward":{frame:{x:840,y:0,w:420,h:720}},"bow-sacrificial":{frame:{x:1260,y:0,w:420,h:720}},"bow-raven":{frame:{x:0,y:720,w:420,h:720}},"bow-amos":{frame:{x:420,y:720,w:420,h:720}},"bow-simulacra":{frame:{x:840,y:720,w:420,h:720}},"bow-fish":{frame:{x:1260,y:720,w:420,h:720}}},MY={image:"weapon-bow.webp",size:{w:1680,h:1440},scale:"1",path:"assets\\images\\cards\\weapon\\bow\\weapon-bow.webp"},wY={frames:PY,meta:MY},AY={"anemo-samachurl":{frame:{x:0,y:0,w:420,h:720}},"electro-samachurl":{frame:{x:420,y:0,w:420,h:720}},"hydro-samachurl":{frame:{x:840,y:0,w:420,h:720}},"dendro-samachurl":{frame:{x:1260,y:0,w:420,h:720}},"geo-samachurl":{frame:{x:1680,y:0,w:420,h:720}},shooter:{frame:{x:2100,y:0,w:420,h:720}},"electro-shooter":{frame:{x:0,y:720,w:420,h:720}},"cryo-shooter":{frame:{x:420,y:720,w:420,h:720}},crackling:{frame:{x:840,y:720,w:420,h:720}},blazing:{frame:{x:1260,y:720,w:420,h:720}},berserker:{frame:{x:1680,y:720,w:420,h:720}},fighter:{frame:{x:2100,y:720,w:420,h:720}},"ice-shieldwall":{frame:{x:0,y:1440,w:420,h:720}},"rock-shieldwall":{frame:{x:420,y:1440,w:420,h:720}},"wooden-shieldwall":{frame:{x:840,y:1440,w:420,h:720}},lawachurl:{frame:{x:1260,y:1440,w:420,h:720}},"hilistray-water":{frame:{x:1680,y:1440,w:420,h:720}}},RY={image:"enemy-hilichurl.webp",size:{w:2520,h:2160},scale:"1",path:"assets\\images\\cards\\enemy\\hilichurl\\enemy-hilichurl.webp"},D1={frames:AY,meta:RY},LY={"electro-mage":{frame:{x:0,y:0,w:420,h:720}},"cryo-mage":{frame:{x:420,y:0,w:420,h:720}},"hydro-mage":{frame:{x:840,y:0,w:420,h:720}},"pyro-mage":{frame:{x:1260,y:0,w:420,h:720}},rockfond:{frame:{x:0,y:720,w:420,h:720}},thundercraven:{frame:{x:420,y:720,w:420,h:720}},"deacon-fire":{frame:{x:840,y:720,w:420,h:720}},"invoker-electric":{frame:{x:1260,y:720,w:420,h:720}},"herald-water":{frame:{x:0,y:1440,w:420,h:720}}},bY={image:"enemy-abyss.webp",size:{w:1680,h:2160},scale:"1",path:"assets\\images\\cards\\enemy\\abyss\\enemy-abyss.webp"},OY={frames:LY,meta:bY},FY={"slime-electro":{frame:{x:0,y:0,w:420,h:720}},"slime-cryo":{frame:{x:420,y:0,w:420,h:720}},"slime-hydro":{frame:{x:840,y:0,w:420,h:720}},"slime-large-hydro":{frame:{x:0,y:720,w:420,h:720}},"slime-large-cryo":{frame:{x:420,y:720,w:420,h:720}},"hydro-phantasm":{frame:{x:840,y:720,w:420,h:720}}},DY={image:"enemy-slime.webp",size:{w:1260,h:1440},scale:"1",path:"assets\\images\\cards\\enemy\\slime\\enemy-slime.webp"},BY={frames:FY,meta:DY},IY={geoshroom:{frame:{x:0,y:0,w:420,h:720}},hydroshroom:{frame:{x:420,y:0,w:420,h:720}},"pyro-flower":{frame:{x:840,y:0,w:420,h:720}},cryoshroom:{frame:{x:0,y:720,w:420,h:720}},dendroshroom:{frame:{x:420,y:720,w:420,h:720}}},GY={image:"enemy-shroom.webp",size:{w:1260,h:1440},scale:"1",path:"assets\\images\\cards\\enemy\\shroom\\enemy-shroom.webp"},kY={frames:IY,meta:GY},NY={"annihilation-ousia":{frame:{x:0,y:0,w:420,h:720}},"annihilation-pneuma":{frame:{x:420,y:0,w:420,h:720}},"assault-pneuma":{frame:{x:840,y:0,w:420,h:720}},"assault-ousia":{frame:{x:1260,y:0,w:420,h:720}},"arithmetic-pneuma":{frame:{x:0,y:720,w:420,h:720}},"arithmetic-ousia":{frame:{x:420,y:720,w:420,h:720}},"suppression-pneuma":{frame:{x:840,y:720,w:420,h:720}},"suppression-ousia":{frame:{x:1260,y:720,w:420,h:720}},earthdrake:{frame:{x:0,y:1440,w:420,h:720}},guard:{frame:{x:420,y:1440,w:420,h:720}}},zY={image:"enemy-automatons.webp",size:{w:1680,h:2160},scale:"1",path:"assets\\images\\cards\\enemy\\Automatons\\enemy-automatons.webp"},UY={frames:NY,meta:zY},VY={"dancing-thunder":{frame:{x:0,y:0,w:420,h:720}},"fiery-might":{frame:{x:420,y:0,w:420,h:720}},kikouban:{frame:{x:840,y:0,w:420,h:720}},jintouban:{frame:{x:0,y:720,w:420,h:720}},hitsukeban:{frame:{x:420,y:720,w:420,h:720}}},XY={image:"enemy-kairagi.webp",size:{w:1260,h:1440},scale:"1",path:"assets\\images\\cards\\enemy\\kairagi\\enemy-kairagi.webp"},WY={frames:VY,meta:XY},YY={sunfrost:{frame:{x:0,y:0,w:420,h:720}},"stone-enchanter":{frame:{x:420,y:0,w:420,h:720}},"desert-clearwater":{frame:{x:840,y:0,w:420,h:720}},daythunder:{frame:{x:0,y:720,w:420,h:720}},"floral-dancer":{frame:{x:420,y:720,w:420,h:720}},muscleman:{frame:{x:840,y:720,w:420,h:720}}},HY={image:"enemy-eremite.webp",size:{w:1260,h:1440},scale:"1",path:"assets\\images\\cards\\enemy\\eremite\\enemy-eremite.webp"},$Y={frames:YY,meta:HY},KY={pyroslinger:{frame:{x:0,y:0,w:420,h:720}},hydrogunner:{frame:{x:420,y:0,w:420,h:720}},geochanter:{frame:{x:840,y:0,w:420,h:720}},electrohammer:{frame:{x:1260,y:0,w:420,h:720}},cryogunner:{frame:{x:1680,y:0,w:420,h:720}},anemoboxer:{frame:{x:0,y:720,w:420,h:720}},"electro-cicin-mage":{frame:{x:420,y:720,w:420,h:720}},"pyro-agent":{frame:{x:840,y:720,w:420,h:720}},"cryo-cicin-mage":{frame:{x:1260,y:720,w:420,h:720}},"escadron-ice":{frame:{x:1680,y:720,w:420,h:720}},"maiden-water":{frame:{x:0,y:1440,w:420,h:720}}},ZY={image:"enemy-fatui.webp",size:{w:2100,h:2160},scale:"1",path:"assets\\images\\cards\\enemy\\fatui\\enemy-fatui.webp"},JY={frames:KY,meta:ZY},QY={dvalin:{frame:{x:0,y:0,w:420,h:720}},yumkasaur:{frame:{x:420,y:0,w:420,h:720}},"golden-wolflord":{frame:{x:840,y:0,w:420,h:720}},terrorshroom:{frame:{x:1260,y:0,w:420,h:720}},"seahorse-primo":{frame:{x:1680,y:0,w:420,h:720}},"maguu-kenki":{frame:{x:2100,y:0,w:420,h:720}},xiuhcoatl:{frame:{x:0,y:720,w:420,h:720}},apep:{frame:{x:420,y:720,w:420,h:720}},azhdaha:{frame:{x:840,y:720,w:420,h:720}},"chrysopelea-sacred":{frame:{x:1260,y:720,w:420,h:720}},"scorpion-sacred":{frame:{x:1680,y:720,w:420,h:720}},raijin:{frame:{x:2100,y:720,w:420,h:720}},"hermit-crab-promo":{frame:{x:0,y:1440,w:420,h:720}},"effigy-electric":{frame:{x:420,y:1440,w:420,h:720}},narwhal:{frame:{x:840,y:1440,w:420,h:720}},oceanid:{frame:{x:1260,y:1440,w:420,h:720}},"la-signora":{frame:{x:1680,y:1440,w:420,h:720}},"effigy-ice":{frame:{x:2100,y:1440,w:420,h:720}}},jY={image:"enemy-boss.webp",size:{w:2520,h:2160},scale:"1",path:"assets\\images\\cards\\enemy\\boss\\enemy-boss.webp"},qY={frames:QY,meta:jY},_Y={macarons:{frame:{x:0,y:0,w:420,h:720}},"mystique-soup":{frame:{x:420,y:0,w:420,h:720}},pizza:{frame:{x:840,y:0,w:420,h:720}},"roast-chicken":{frame:{x:0,y:720,w:420,h:720}},"life-essence":{frame:{x:420,y:720,w:420,h:720}}},tH={image:"food.webp",size:{w:1260,h:1440},scale:"1",path:"assets\\images\\cards\\food\\food.webp"},B1={frames:_Y,meta:tH},eH={"breathe-fire":{frame:{x:0,y:0,w:420,h:720}},quicksand:{frame:{x:420,y:0,w:420,h:720}},"abyss-call":{frame:{x:840,y:0,w:420,h:720}},spike:{frame:{x:0,y:720,w:420,h:720}}},iH={image:"trap.webp",size:{w:1260,h:1440},scale:"1",path:"assets\\images\\cards\\trap\\trap.webp"},I1={frames:eH,meta:iH},sH={bribery:{frame:{x:0,y:0,w:420,h:720}},"gold-mine":{frame:{x:420,y:0,w:420,h:720}},chest:{frame:{x:0,y:720,w:420,h:720}}},rH={image:"treasure.webp",size:{w:840,h:1440},scale:"1",path:"assets\\images\\cards\\treasure\\treasure.webp"},G1={frames:sH,meta:rH},nH={explosive:{frame:{x:0,y:0,w:420,h:720}},scare:{frame:{x:420,y:0,w:420,h:720}}},aH={image:"bomb.webp",size:{w:840,h:720},scale:"1",path:"assets\\images\\cards\\bomb\\bomb.webp"},k1={frames:nH,meta:aH},oH={"sword-traveler-badge":{frame:{x:0,y:0,w:256,h:256}},"sword-steampunk-badge":{frame:{x:256,y:0,w:256,h:256}},"sword-forest-badge":{frame:{x:512,y:0,w:256,h:256}},"sword-sacrificial-badge":{frame:{x:0,y:256,w:256,h:256}},"sword-favonius-badge":{frame:{x:256,y:256,w:256,h:256}},"sword-splendor-badge":{frame:{x:512,y:256,w:256,h:256}},"sword-foliar-incision-badge":{frame:{x:0,y:512,w:256,h:256}},"sword-skyward-badge":{frame:{x:256,y:512,w:256,h:256}},"sword-aquila-badge":{frame:{x:512,y:512,w:256,h:256}}},hH={image:"weapon-sword-badge.webp",size:{w:768,h:768},scale:"1",path:"assets\\images\\badge\\sword\\weapon-sword-badge.webp"},lH={frames:oH,meta:hH};class Sh{constructor(){if(Sh.instance)return Sh.instance;Sh.instance=this,this.scene=null}setScene(z){this.scene=z}preloadSceneAssets(z,W){if(!this.scene){console.warn("AssetManager: Scene cha c set"),W&&W();return}switch(this.scene.load.on("complete",W||(()=>{})),z){case"MenuScene":this.loadAtlas(L1),this.loadAtlas(b1),this.loadImages([...sY,...eY]);break;case"GameScene":this.loadAudios([...tY]),this.loadImages([..._W]),this.getLoadImagesListGameScene();break;case"EquipScene":console.log("EquipScene load item assets");break;case"LibraryScene":this.loadAtlas(F1),this.loadAtlas(mY),this.loadAtlas(CY),this.loadAtlas(EY),this.loadAtlas(wY),this.loadAtlas(D1),this.loadAtlas(OY),this.loadAtlas(BY),this.loadAtlas(kY),this.loadAtlas(UY),this.loadAtlas(WY),this.loadAtlas($Y),this.loadAtlas(JY),this.loadAtlas(qY),this.loadAtlas(B1),this.loadAtlas(I1),this.loadAtlas(G1),this.loadAtlas(k1),this.loadAtlas(O1),this.loadImages([...iY]),console.log("LibraryScene load all card atlas assets");break;case"MapScenes":break;case"SelectCharacterScene":this.loadAtlas(uY);break;default:console.warn(`AssetManager: Khng tm thy scene "${z}"`),W&&W();return}this.scene.load.start()}loadImage(z,W){if(!this.scene){console.warn("AssetManager: Scene cha c set");return}this.scene.textures.exists(z)||(z.endsWith("sprite")?this.scene.load.spritesheet(z,W,{frameWidth:350,frameHeight:590}):z.endsWith("animations")?this.scene.load.spritesheet(z,W,{frameWidth:192,frameHeight:192}):this.scene.load.image(z,W))}loadImages(z){z.forEach(W=>this.loadImage(W.key,W.path))}loadAtlas(z){if(!this.scene){console.warn("AssetManager: Scene cha c set");return}const W=z.meta.image.replace(".webp","");if(this.scene.textures.exists(W))return;const j=z.meta.path.replace(/^\.\.\\public\\/,"").replace(/\\/g,"/");this.scene.load.atlas(W,j,z)}loadAudio(z,W){if(!this.scene){console.warn("AssetManager: Scene cha c set");return}this.scene.cache.audio.exists(z)||this.scene.load.audio(z,W)}loadAudios(z){z.forEach(W=>this.loadAudio(W.key,W.path))}getLoadImagesListGameScene(){let z=[];return this.loadAtlas(L1),this.loadAtlas(b1),this.loadAtlas(O1),this.loadAtlas(F1),this.loadAtlas(D1),this.loadAtlas(B1),this.loadAtlas(I1),this.loadAtlas(G1),this.loadAtlas(k1),this.loadAtlas(lH),z}}const N1=new Sh;class uH extends Kt.Scene{constructor(){super({key:"LoadingScene"})}init(z){const{targetScene:W,dataTargetScene:j}=z||{};this.targetScene=W||"MenuScene",this.dataTargetScene=j||{}}preload(){}create(){const{width:z,height:W}=this.scale;this.add.rectangle(z/2,W/2,z,W,9852778);const j=this.add.text(z/2-120,W*.5,"",{fontSize:"64px",fontFamily:"Arial, sans-serif"}).setOrigin(.5),it=this.add.text(z/2,W*.5+48,"loading",{fontSize:"48px",fontStyle:"bold",stroke:"#000000",strokeThickness:2,color:"#ecf0f1",fontFamily:"Arial, sans-serif"}).setOrigin(.5,0),ht=this.add.text(z/2,W*.6,"",{fontSize:"48px",fontFamily:"Arial, sans-serif",color:"#622945"}).setOrigin(.5,.5);this.tweens.add({targets:j,rotation:Math.PI*2,duration:1500,repeat:-1,repeatDelay:1500,ease:"Linear"});let C=0,R=0;this.time.addEvent({delay:1e3,callback:()=>{if(R<9){R++;const g="".repeat(R),y="".repeat(10-R);ht.setText(g+y)}C=(C+1)%4;const s=".".repeat(C);it.setText("loading"+s)},loop:!0}),N1.setScene(this),N1.preloadSceneAssets(this.targetScene,()=>{this.scene.start(this.targetScene,this.dataTargetScene)})}}const Qp=class Qp{static isValidMove(z,W){if(z===W)return!1;const j={row:Math.floor(z/3),col:z%3},it={row:Math.floor(W/3),col:W%3},ht=Math.abs(j.row-it.row),C=Math.abs(j.col-it.col);return ht===1&&C===0||ht===0&&C===1}static calculateMovement(z,W){const{first:j,second:it}=this.MOVEMENT_TABLE[z][W]||{first:null,second:null},ht=[];return ht.push({from:z,to:W}),ht.push({from:j,to:z}),it!==null&&ht.push({from:it,to:j}),ht}static getAdjacentPositions(z){if(z<0||z>8)return console.warn(`CalculatePositionCard: Invalid index ${z}`),[];const W=[],j=Math.floor(z/3),it=z%3;return j>0&&W.push(z-3),j<2&&W.push(z+3),it>0&&W.push(z-1),it<2&&W.push(z+1),W}static shuffleArray(z){const W=[...z];for(let j=W.length-1;j>0;j--){const it=Math.floor(Math.random()*(j+1));[W[j],W[it]]=[W[it],W[j]]}return W}};Qp.MOVEMENT_TABLE={0:{3:{first:1,second:2},1:{first:3,second:6}},2:{5:{first:1,second:0},1:{first:5,second:8}},6:{3:{first:7,second:8},7:{first:3,second:0}},8:{5:{first:7,second:6},7:{first:5,second:2}},4:{1:{first:7,second:null},3:{first:5,second:null},5:{first:3,second:null},7:{first:1,second:null}},5:{2:{first:8,second:null},8:{first:2,second:null},4:{first:2,second:null}},3:{0:{first:6,second:null},4:{first:6,second:null},6:{first:0,second:null}},1:{0:{first:2,second:null},2:{first:0,second:null},4:{first:0,second:null}},7:{6:{first:8,second:null},4:{first:8,second:null},8:{first:6,second:null}}};let jn=Qp;class Za{static animationEffect(z,W,j,it,ht=null,C=null,R,s=10){const g=z.add.sprite(W,j,it);ht!==null&&g.setDisplaySize(ht,C??ht);const y=`${it}_effect_${R.start}_${R.end}`;return z.anims.exists(y)||z.anims.create({key:y,frames:z.anims.generateFrameNumbers(it,{start:R.start,end:R.end}),frameRate:s,repeat:0}),g.setDepth(200),g.play(y),g.on("animationcomplete",()=>{g.destroy()}),g}static animationSlash(z,W,j){return this.animationEffect(z,W,j,"slash-animations",170,170,{start:0,end:4},12)}static animationBomb(z,W,j){return this.animationEffect(z,W,j,"bomb-animations",170,170,{start:0,end:11},24)}static animationBreatheFire(z,W,j){return this.animationEffect(z,W,j,"breathe-fire-animations",170,170,{start:0,end:14},30)}static CharacterAnimation(z,W,j,it,ht=null,C=null,R=76){const s=z.add.sprite(W,j,it);ht&&C&&s.setDisplaySize(ht,C);const g=`${it}-animation`;return z.anims.exists(g)||z.anims.create({key:g,frames:z.anims.generateFrameNumbers(it,{start:0,end:R-1}),frameRate:12,repeat:-1}),s.play(g),s}static setSpriteTint(z,W){return z.setTint(W),z}static setSpriteTintWithAlpha(z,W,j){return z.setTintFill(W),z.setAlpha(j),z}static clearSpriteTint(z){return z.clearTint(),z}static flashSprite(z,W=16777215,j=200){const it=z.tint;return z.setTint(W),z.scene.time.delayedCall(j,()=>{z.setTint(it)}),z}static pulseSprite(z,W=16777215,j=500,it=200){const ht=z,C=z.tint;let R=!1;const s=z.scene.time.addEvent({delay:j,callback:()=>{R||(R=!0,z.setTint(W),z.scene.time.delayedCall(it,()=>{z.setTint(C),R=!1}))},loop:!0});return ht.pulseTimer=s,z}static stopPulseSprite(z){const W=z;return W.pulseTimer&&(W.pulseTimer.destroy(),W.pulseTimer=void 0,z.clearTint()),z}}const jp=class jp extends Kt.GameObjects.Container{constructor(z,W,j,it,ht,C,R){super(z,W,j),this.index=it,this.name=ht,this.nameId=C,this.type=R,this.pressStartTime=0,this.cardInfoDialog=null,this.unsubscribeList=[]}createCard(){let z=this.type;const W=this.constructor.DEFAULT;this.type==="weapon"&&W.category?z+="-"+W.category:this.type==="enemy"&&W.clan&&(z+="-"+W.clan),this.cardImage=this.scene.add.image(0,0,z,this.nameId),this.cardImage.setDisplaySize(160,274.3),this.border=this.scene.add.graphics(),this.border.fillStyle(16777215,1),this.border.lineStyle(2,16777215,1),this.border.fillRoundedRect(-82,-139,164,278.3,20),this.border.strokeRoundedRect(-82,-139,164,278.3,20),this.add([this.border,this.cardImage]),this.addDisplayHUD(),this.setInteractive(new Kt.Geom.Rectangle(-80,-137,160,274.3),Kt.Geom.Rectangle.Contains),this.on("pointerdown",()=>this.onCardPointerDown()),this.on("pointerup",()=>this.onCardPointerUp()),this.on("pointerover",()=>this.onCardHover()),this.on("pointerout",()=>this.onCardOut())}addDisplayHUD(){}onCardPointerDown(){var z;(z=this.scene.gameManager)!=null&&z.animationManager.isProcessing||(this.pressStartTime=Date.now(),this.isLongPressed=!1)}onCardPointerUp(){var W;if((W=this.scene.gameManager)!=null&&W.animationManager.isProcessing){this.pressStartTime=0,this.isLongPressed=!1;return}if(this.pressStartTime===0)return;const z=Date.now()-this.pressStartTime;!this.isLongPressed&&z>0&&(z<1500?this.onCardClick():(this.isLongPressed=!0,this.onLongPress())),this.pressStartTime=0}onLongPress(){this.showCardInfoDialog()}showCardInfoDialog(){this.cardInfoDialog&&this.cardInfoDialog.destroy();const{width:z,height:W}=this.scene.scale;this.cardInfoDialog=this.scene.add.container(z/2,W/2),this.cardInfoDialog.setDepth(120);const j=this.scene.add.rectangle(-z/2,-W/2,z,W,0,.7).setOrigin(0,0).setInteractive(),it=this.scene.add.graphics();it.fillStyle(8388736,.95),it.lineStyle(3,16724838),it.fillRoundedRect(-200,-150,400,300,20),it.strokeRoundedRect(-200,-150,400,300,20);let ht=this.type;const C=this.constructor.DEFAULT;this.type==="weapon"&&C.category?ht+="-"+C.category:this.type==="enemy"&&C.clan&&(ht+="-"+C.clan);const R=this.scene.add.image(0,0,ht,this.nameId);R.setDisplaySize(80,137.14);const s=this.scene.add.text(0,-120,this.name,{fontSize:"24px",color:"#ffffff",fontFamily:"Arial"});s.setOrigin(.5);const g=this.scene.add.text(0,-100,`Type: ${this.type}`,{fontSize:"16px",color:"#ffb3d9",fontFamily:"Arial"});g.setOrigin(.5);const y=this.getDescription(),u=this.scene.add.text(0,100,y,{fontSize:"14px",color:"#ecf0f1",fontFamily:"Arial",wordWrap:{width:300},align:"center"});u.setOrigin(.5);const l=this.scene.add.graphics();l.fillStyle(16724838),l.fillRoundedRect(-30,-25,60,50,8),l.setPosition(0,190);const h=this.scene.add.text(0,190,"X",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial"});h.setOrigin(.5),l.setInteractive(new Kt.Geom.Rectangle(-30,-25,60,50),Kt.Geom.Rectangle.Contains),l.on("pointerover",()=>{l.clear(),l.setScale(1.2),l.fillStyle(16739229),l.fillRoundedRect(-30,-25,60,50,8)}),l.on("pointerout",()=>{l.clear(),l.setScale(1),l.fillStyle(16724838),l.fillRoundedRect(-30,-25,60,50,8)}),l.on("pointerdown",()=>{this.hideCardInfoDialog()}),this.cardInfoDialog.add([j,it,R,s,g,u,l,h]),this.scene.add.existing(this.cardInfoDialog),this.escKey=this.scene.input.keyboard.addKey("ESC"),this.escKey.on("down",()=>{this.hideCardInfoDialog()})}hideCardInfoDialog(){this.cardInfoDialog&&(this.cardInfoDialog.destroy(),this.cardInfoDialog=null),this.escKey&&(this.escKey.off("down"),this.escKey=void 0),this.isLongPressed=!1,this.pressStartTime=0}getDescription(){return this.description??"Khng c m t cho th ny."}onCardClick(){var z;(z=this.scene.gameManager)==null||z.moveCharacter(this.index)}onCardHover(){this.setScale(1.05)}onCardOut(){this.setScale(1)}createDisplay(z={},W){const{fillColor:j=65280,text:it="0"}=z,ht=this.scene.add.graphics();ht.fillStyle(j),ht.fillCircle(0,0,18);const C=this.scene.add.text(0,0,it.toString(),{fontSize:"20px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold"});C.setOrigin(.5);const R=this.scene.add.container(0,0,[ht,C]);return W==="leftTop"?R.setPosition(-57,-113):W==="rightTop"?R.setPosition(57,-113):W==="rightBottom"?R.setPosition(57,113):W==="leftBottom"&&R.setPosition(-57,113),this.add(R),parseInt(it,10)===0&&R.setVisible(!1),{container:R,text:C,updateText:s=>{C!=null&&C.setText&&(C.setText(String(s)),R.setVisible(parseInt(String(s),10)!==0))},updateColor:s=>{ht!=null&&ht.fillStyle&&ht.fillStyle(s)},destroy:()=>{R==null||R.destroy()}}}GetRandom(z,W){return Math.floor(Math.random()*(W-z+1))+z}CardEffect(){console.log(`Card ${this.name} (${this.nameId}) ang chy hiu ng...`)}takeDamage(z,W){console.log(`Card ${this.name} (${this.nameId}) b tn cng ${z} damage`),W==="Explosive"?Za.animationBomb(this.scene,this.x,this.y):W==="BreatheFire"&&Za.animationBreatheFire(this.scene,this.x,this.y)}die(){var z,W,j;if(this.ProgressDestroy(),(z=this.scene)!=null&&z.gameManager){const it=this.scene.gameManager.cardManager.cardFactory.createCoin(this.scene,this.index,this.GetRandom(1,3));it&&((j=(W=this.scene.gameManager.cardManager.addCard(it,this.index)).processCreation)==null||j.call(W))}}ProgressDestroy(){var z;if(!((z=this.scene)!=null&&z.tweens)){this.destroy();return}this.scene.tweens.add({targets:this,alpha:0,scaleX:.5,scaleY:.5,duration:300,ease:"Power2",onComplete:()=>{this.unsubscribeList.forEach(W=>{if(typeof W=="function")try{W()}catch(j){console.warn(`Card ${this.name||this.nameId}: Li khi unsubscribe:`,j)}}),this.destroy()}})}processCreation(){this.setAlpha(0),this.setScale(.5),this.scene.tweens.add({targets:this,alpha:1,scaleX:1,scaleY:1,duration:400,ease:"Back.easeOut",onComplete:()=>{}})}};jp.DEFAULT={};let os=jp;const as=class as extends os{constructor(z,W,j,it,ht){if(!as.DEFAULT.id[ht])throw new Error(`Element '${ht}' khng tn ti trong Coin.DEFAULT.id. Cc element hp l: ${Object.keys(as.DEFAULT.id).join(", ")}`);super(z,W,j,it,as.DEFAULT.name[ht],as.DEFAULT.id[ht],as.DEFAULT.type),this.score=this.GetRandom(1,9),this.rarity=as.DEFAULT.rarity,this.description=as.DEFAULT.description[ht],this.createCard(),z.add.existing(this)}addDisplayHUD(){this.coinDisplay=this.createDisplay({fillColor:16737792,text:this.score.toString()},"rightBottom")}setScore(z){this.score=z,this.coinDisplay.updateText(this.score)}CardEffect(){var z,W;return this.nameId.endsWith("resonance")?(z=this.scene.gameManager)==null||z.addCoin(this.score,3):(W=this.scene.gameManager)==null||W.addCoin(this.score,1),!1}resonance(){this.score*=2,this.name=this.name.replace("Mnh V Nguyn T","Nguyn T Cng Hng"),this.nameId=this.nameId.replace("fragment","resonance");const z=as.DEFAULT.description.resonance;this.description=z[this.nameId.replace("-resonance","")],this.cardImage.setTexture(this.type,this.nameId),this.coinDisplay.updateText(this.score),this.processCreation()}};as.DEFAULT={type:"coin",rarity:1,name:{pyro:"Mnh V Nguyn T Ha",hydro:"Mnh V Nguyn T Thy",geo:"Mnh V Nguyn T Nham",anemo:"Mnh V Nguyn T Phong",electro:"Mnh V Nguyn T Li",cryo:"Mnh V Nguyn T Bng",dendro:"Mnh V Nguyn T Tho"},id:{pyro:"pyro-fragment",hydro:"hydro-fragment",geo:"geo-fragment",anemo:"anemo-fragment",electro:"electro-fragment",cryo:"cryo-fragment",dendro:"dendro-fragment"},description:{pyro:"Mnh V Nguyn T Ha nht c th i Xu v hi cht nng lng.",hydro:"Mnh V Nguyn T Thy nht c th i Xu v hi cht nng lng.",geo:"Mnh V Nguyn T Nham nht c th i Xu v hi cht nng lng.",anemo:"Mnh V Nguyn T Phong nht c th i Xu v hi cht nng lng.",electro:"Mnh V Nguyn T Li nht c th i Xu v hi cht nng lng.",cryo:"Mnh V Nguyn T Bng nht c th i Xu v hi cht nng lng.",dendro:"Mnh V Nguyn T Tho nht c th i Xu v hi cht nng lng.",resonance:{pyro:"Nguyn T Cng Hng Ha nht c th i Xu v hi nhiu nng lng.",hydro:"Nguyn T Cng Hng Thy nht c th i Xu v hi nhiu nng lng.",geo:"Nguyn T Cng Hng Nham nht c th i Xu v hi nhiu nng lng.",anemo:"Nguyn T Cng Hng Phong nht c th i Xu v hi nhiu nng lng.",electro:"Nguyn T Cng Hng Li nht c th i Xu v hi nhiu nng lng.",cryo:"Nguyn T Cng Hng Bng nht c th i Xu v hi nhiu nng lng.",dendro:"Nguyn T Cng Hng Tho nht c th i Xu v hi nhiu nng lng."}}};let ad=as;const Ka=JSON.parse('[{"stageId":"dungeon_abyss_chamber","name":"Abyss Chamber","typeRatios":{"enemies":10,"food":8,"weapons":18,"coins":22,"traps":12,"treasures":5,"bombs":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","HilichurlFighter","Shooter"],"food":["MystiqueSoup","Pizza","RoastChicken"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward"],"coins":["Coin"],"traps":["Quicksand","BreatheFire"],"treasures":["Chest","GoldMine"],"bombs":["Explosive"]}},{"stageId":"dungeon_crystal_cave","name":"Crystal Cave","typeRatios":{"enemies":30,"food":10,"weapons":20,"coins":25,"traps":10,"treasures":50},"availableCards":{"enemies":["AnemoSamachurl"],"food":["Macarons","Pizza","RoastChicken"],"weapons":["SwordSteampunk","SwordForest"],"coins":["Coin"],"traps":["BreatheFire"],"treasures":["Chest","GoldMine"]}},{"stageId":"dungeon_fire_temple","name":"Fire Temple","typeRatios":{"enemies":40,"food":5,"weapons":15,"coins":20,"traps":15,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","HilistrayWater","WoodenShieldwall","Lawachurl","RockShieldwall","Berserker","Blazing","IceShieldwall","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_ice_palace","name":"Ice Palace","typeRatios":{"enemies":32,"food":12,"weapons":18,"coins":23,"traps":10,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","Shooter","Crackling","CryoShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordTraveler"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_thunder_peak","name":"Thunder Peak","typeRatios":{"enemies":38,"food":7,"weapons":16,"coins":21,"traps":13,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","HilistrayWater","WoodenShieldwall","Lawachurl","RockShieldwall","Berserker","Blazing","IceShieldwall","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_wind_valley","name":"Wind Valley","typeRatios":{"enemies":28,"food":15,"weapons":22,"coins":20,"traps":10,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","Shooter","Crackling"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_earth_fortress","name":"Earth Fortress","typeRatios":{"enemies":42,"food":6,"weapons":14,"coins":18,"traps":15,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","HilistrayWater","WoodenShieldwall","Lawachurl","RockShieldwall","Berserker","Blazing","IceShieldwall","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_water_sanctuary","name":"Water Sanctuary","typeRatios":{"enemies":33,"food":11,"weapons":19,"coins":22,"traps":10,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_shadow_realm","name":"Shadow Realm","typeRatios":{"enemies":45,"food":4,"weapons":12,"coins":16,"traps":18,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","HilistrayWater","WoodenShieldwall","Lawachurl","RockShieldwall","Berserker","Blazing","IceShieldwall","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_light_tower","name":"Light Tower","typeRatios":{"enemies":25,"food":18,"weapons":25,"coins":17,"traps":10,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","Shooter","Crackling"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_dark_forest","name":"Dark Forest","typeRatios":{"enemies":36,"food":9,"weapons":17,"coins":21,"traps":12,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","HilistrayWater","WoodenShieldwall","Lawachurl","RockShieldwall","Berserker","Blazing","IceShieldwall","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_golden_mine","name":"Golden Mine","typeRatios":{"enemies":20,"food":20,"weapons":30,"coins":15,"traps":10,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","Shooter","Crackling"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_silver_castle","name":"Silver Castle","typeRatios":{"enemies":37,"food":8,"weapons":16,"coins":20,"traps":14,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","HilistrayWater","WoodenShieldwall","Lawachurl","RockShieldwall","Berserker","Blazing","IceShieldwall","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_bronze_dungeon","name":"Bronze Dungeon","typeRatios":{"enemies":30,"food":10,"weapons":20,"coins":25,"traps":10,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","HilichurlFighter"],"food":["Macarons","Pizza"],"weapons":["SwordSteampunk","SwordForest"],"coins":["Coin"],"traps":["BreatheFire"],"treasures":["Chest","GoldMine"]}},{"stageId":"dungeon_emerald_cave","name":"Emerald Cave","typeRatios":{"enemies":34,"food":9,"weapons":18,"coins":22,"traps":12,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","Shooter","Crackling","CryoShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordTraveler"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_ruby_mountain","name":"Ruby Mountain","typeRatios":{"enemies":39,"food":6,"weapons":15,"coins":19,"traps":16,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","HilistrayWater","WoodenShieldwall","Lawachurl","RockShieldwall","Berserker","Blazing","IceShieldwall","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_sapphire_lake","name":"Sapphire Lake","typeRatios":{"enemies":31,"food":13,"weapons":21,"coins":20,"traps":10,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}},{"stageId":"dungeon_diamond_peak","name":"Diamond Peak","typeRatios":{"enemies":43,"food":5,"weapons":13,"coins":17,"traps":17,"treasures":5},"availableCards":{"enemies":["AnemoSamachurl","ElectroSamachurl","DendroSamachurl","GeoSamachurl","HydroSamachurl","HilichurlFighter","HilistrayWater","WoodenShieldwall","Lawachurl","RockShieldwall","Berserker","Blazing","IceShieldwall","Shooter","Crackling","CryoShooter","ElectroShooter"],"food":["MystiqueSoup","Pizza","RoastChicken","Macarons"],"weapons":["SwordSteampunk","SwordForest","SwordSkyward","SwordSplendor","SwordTraveler","SwordSacrificial"],"coins":["Coin"],"traps":["AbyssCall","BreatheFire","Quicksand"],"treasures":["Chest","Bribery","GoldMine"]}}]');class qn extends os{constructor(z,W,j,it,ht,C){super(z,W,j,it,ht,C,"character"),this.level=this.getLevel(),this.hp=this.getMaxHP(),this.weapon=null}createCard(){this.level>2?(this.cardImage=Za.CharacterAnimation(this.scene,0,0,this.nameId+"-sprite",160,274.3),this.border=this.scene.add.graphics(),this.border.fillStyle(14467183,1),this.border.lineStyle(2,14467183,1),this.border.fillRoundedRect(-82,-139,164,278.3,20),this.border.strokeRoundedRect(-82,-139,164,278.3,20),this.add([this.border,this.cardImage]),this.addDisplayHUD(),this.setInteractive(new Kt.Geom.Rectangle(-80,-137,160,274.3),Kt.Geom.Rectangle.Contains),this.on("pointerdown",()=>this.onCardPointerDown()),this.on("pointerup",()=>this.onCardPointerUp()),this.on("pointerover",()=>this.onCardHover()),this.on("pointerout",()=>this.onCardOut())):super.createCard()}addDisplayHUD(){var z;this.hpDisplay=this.createDisplay({fillColor:16711680,text:this.hp.toString()},"rightTop"),this.weaponDisplay=this.createDisplay({fillColor:16737792,text:String(((z=this.weapon)==null?void 0:z.durability)??0)},"leftBottom"),this.weaponBadgeDisplay=this.createBadgeDisplay()}takeDamage(z,W){var j;return super.takeDamage(z,W),this.hp=Math.max(0,this.hp-z),this.hpDisplay.updateText(this.hp.toString()),this.showPopup(z,"damage"),this.hp<=0&&((j=this.scene.gameManager)==null||j.gameOver()),this.hp}heal(z){this.hp=Math.min(this.getMaxHP(),this.hp+z),this.hpDisplay.updateText(this.hp.toString()),this.showPopup(z,"heal")}showPopup(z,W="heal"){const j=W==="heal"?"#00ff00":W==="damage"?"#ff0000":"#ffffff",it=W==="heal"?"+":W==="damage"?"-":"",ht=this.scene.add.text(0,0,`${it}${z}`,{fontSize:"32px",color:j,fontFamily:"Arial",fontStyle:"bold",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setDepth(2002);this.add(ht),this.scene.tweens.add({targets:ht,y:-50,alpha:.1,duration:2e3,ease:"Power2",onComplete:()=>ht.destroy()})}getMaxHP(){const z=this.constructor.DEFAULT;return((z==null?void 0:z.hp)??10)+this.getLevel()-1}getLevel(){const z=localStorage.getItem("characterLevel");return z?JSON.parse(z)[this.nameId]??1:1}setWeapon(z){var j,it,ht,C;const W=((j=this.weapon)==null?void 0:j.durability)??0;z.durability>W?(this.weapon=z,this.weaponDisplay.updateText(this.weapon.durability),this.weaponBadgeDisplay.updateTexture(((it=this.weapon.default)==null?void 0:it.id)+"-badge"),(ht=this.scene.sellButton)==null||ht.updateButton()):(C=this.scene.gameManager)==null||C.addCoin(z.durability)}createBadgeDisplay(z=""){const W=this.scene.add.image(0,0,z).setOrigin(.5).setPosition(40,96).setDisplaySize(10,10);return this.add(W),z===""&&W.setVisible(!1),{updateTexture:j=>{var it;this.weapon&&((it=this.weapon.default)!=null&&it.category)?W.setTexture("weapon-"+this.weapon.default.category+"-badge",j):W.setTexture(j),W.setVisible(j!=="")},destroy:()=>W.destroy()}}repair(z){var W;return this.weapon?(this.weapon.durability+=z,this.weaponDisplay.updateText(this.weapon.durability),(W=this.scene.sellButton)==null||W.updateButton(),!0):!1}reduceDurability(z){var W,j;this.weapon&&(this.weapon.durability-=z,this.weaponDisplay.updateText(this.weapon.durability),this.weapon.durability<=0?(this.weapon=null,this.weaponDisplay.updateText(0),this.weaponBadgeDisplay.updateTexture(""),(W=this.scene.sellButton)==null||W.hideButton()):(j=this.scene.sellButton)==null||j.updateButton())}}const Wn=class Wn extends qn{constructor(z,W,j,it){super(z,W,j,it,Wn.DEFAULT.name,Wn.DEFAULT.id,"character"),this.element=Wn.DEFAULT.element,this.description=Wn.DEFAULT.description,this.createCard(),z.add.existing(this)}};Wn.DEFAULT={id:"eula",name:"Eula",description:"Eula  n thn ca thy quyn, i din cho s cn bng gia lc lng v tnh cm. Bn ngoi l v thn y sc mnh, nhng bn trong l ngi ph n y tnh cm v nhy cm.",hp:10,element:"cryo"};let Xn=Wn;const Yn=class Yn extends qn{constructor(z,W,j,it){super(z,W,j,it,Yn.DEFAULT.name,Yn.DEFAULT.id,"character"),this.element=Yn.DEFAULT.element,this.description=Yn.DEFAULT.description,this.createCard(),z.add.existing(this)}};Yn.DEFAULT={id:"furina",name:"Furina",description:"Furina  n thn ca thy quyn, i din cho s cn bng gia lc lng v tnh cm. Bn ngoi l v thn y sc mnh, nhng bn trong l ngi ph n y tnh cm v nhy cm.",hp:12,element:"hydro"};let kp=Yn;const Hn=class Hn extends qn{constructor(z,W,j,it){super(z,W,j,it,Hn.DEFAULT.name,Hn.DEFAULT.id,"character"),this.element=Hn.DEFAULT.element,this.description=Hn.DEFAULT.description,this.createCard(),z.add.existing(this)}};Hn.DEFAULT={id:"mavuika",name:"Mavuika",description:"Mavuika  Ha Thn Natlan, biu tng ca sc mnh v  ch bt khut. Ngn la trong nng chy rc nh tinh thn chin binh, soi sng con ng t do v kht vng vnh cu.",hp:11,element:"pyro"};let Np=Hn;const $n=class $n extends qn{constructor(z,W,j,it){super(z,W,j,it,$n.DEFAULT.name,$n.DEFAULT.id,"character"),this.element=$n.DEFAULT.element,this.description=$n.DEFAULT.description,this.createCard(),z.add.existing(this)}};$n.DEFAULT={id:"nahida",name:"Nahida",description:"Nahida  Tiu Vng Kusanali, v Tho Thn b nh ca Sumeru. Vi tri tim thun khit v tr tu hin ha, nng mang kht vng dn dt nhn loi n s khai sng v t do.",hp:9,element:"dendro"};let zp=$n;const Kn=class Kn extends qn{constructor(z,W,j,it){super(z,W,j,it,Kn.DEFAULT.name,Kn.DEFAULT.id,"character"),this.element=Kn.DEFAULT.element,this.description=Kn.DEFAULT.description,this.createCard(),z.add.existing(this)}};Kn.DEFAULT={id:"raiden",name:"Raiden",description:"Raiden Shogun  vnh hng thng tr Inazuma, kim thn uy nghim vi quyt tm bt dit. Bn ngoi lnh lng nhng n su l kht vng gi trn li ha v bo v thn dn.",hp:10,element:"electro"};let Up=Kn;const Zn=class Zn extends qn{constructor(z,W,j,it){super(z,W,j,it,Zn.DEFAULT.name,Zn.DEFAULT.id,"character"),this.element=Zn.DEFAULT.element,this.description=Zn.DEFAULT.description,this.createCard(),z.add.existing(this)}};Zn.DEFAULT={id:"venti",name:"Venti",description:"Venti  nh th du ca t do, chnh l Phong Thn Mondstadt. Dng v nghch ngm v phng khong, nhng bn trong l v thn nhn t lun dng m nhc  xoa du lng ngi.",hp:8,element:"anemo"};let Vp=Zn;const Jn=class Jn extends qn{constructor(z,W,j,it){super(z,W,j,it,Jn.DEFAULT.name,Jn.DEFAULT.id,"character"),this.element=Jn.DEFAULT.element,this.description=Jn.DEFAULT.description,this.createCard(),z.add.existing(this)}};Jn.DEFAULT={id:"zhongli",name:"Zhongli",description:"Zhongli  hin gi tao nh, thc cht l Nham Thn Liyue. Vi tr tu hng ngn nm v phong thi im tnh, ng l hin thn ca vng bn, mang gnh nng lch s nng n.",hp:10,element:"geo"};let Xp=Jn;class Ja extends os{constructor(z,W,j,it,ht,C){super(z,W,j,it,ht,C,"weapon")}addDisplayHUD(){this.durabilityDisplay=this.createDisplay({fillColor:16737792,text:String(this.durability)},"rightBottom")}CardEffect(){var z,W;return(W=(z=this.scene.gameManager)==null?void 0:z.cardManager.CardCharacter)==null||W.setWeapon({default:this.constructor.DEFAULT,durability:this.durability}),!1}refinement(z){this.durability+=z,this.durabilityDisplay.updateText(this.durability)}}const Wr=class Wr extends Ja{constructor(z,W,j,it){super(z,W,j,it,Wr.DEFAULT.name,Wr.DEFAULT.id,Wr.DEFAULT.type),this.rarity=Wr.DEFAULT.rarity,this.description=Wr.DEFAULT.description,this.durability=this.GetRandom(3,12),this.createCard(),z.add.existing(this)}};Wr.DEFAULT={id:"sword-steampunk",name:"Sword Steampunk",type:"weapon",description:"Sword Steampunk - Kim huy hong qu gi tng sc mnh v may mn.",category:"sword",rarity:4};let od=Wr;const Yr=class Yr extends Ja{constructor(z,W,j,it){super(z,W,j,it,Yr.DEFAULT.name,Yr.DEFAULT.id,Yr.DEFAULT.type),this.rarity=Yr.DEFAULT.rarity,this.description=Yr.DEFAULT.description,this.durability=this.GetRandom(6,12),this.createCard(),z.add.existing(this)}};Yr.DEFAULT={id:"sword-forest",name:"Sword Forest",type:"weapon",description:"Sword Forest - Kim rng t nhin tng sc mnh v kh nng phng th.",category:"sword",rarity:3};let hd=Yr;const Hr=class Hr extends Ja{constructor(z,W,j,it){super(z,W,j,it,Hr.DEFAULT.name,Hr.DEFAULT.id,Hr.DEFAULT.type),this.rarity=Hr.DEFAULT.rarity,this.description=Hr.DEFAULT.description,this.durability=this.GetRandom(8,15),this.createCard(),z.add.existing(this)}};Hr.DEFAULT={id:"sword-skyward",name:"Sword Skyward",type:"weapon",description:"Sword Skyward - Kim thin khng.",category:"sword",rarity:5};let ld=Hr;const $r=class $r extends Ja{constructor(z,W,j,it){super(z,W,j,it,$r.DEFAULT.name,$r.DEFAULT.id,$r.DEFAULT.type),this.rarity=$r.DEFAULT.rarity,this.description=$r.DEFAULT.description,this.durability=this.GetRandom(5,12),this.createCard(),z.add.existing(this)}};$r.DEFAULT={id:"sword-splendor",name:"Sword Splendor",type:"weapon",description:"Sword Splendor - Kim huy hong.",category:"sword",rarity:4};let ud=$r;const Kr=class Kr extends Ja{constructor(z,W,j,it){super(z,W,j,it,Kr.DEFAULT.name,Kr.DEFAULT.id,Kr.DEFAULT.type),this.rarity=Kr.DEFAULT.rarity,this.description=Kr.DEFAULT.description,this.durability=this.GetRandom(4,10),this.createCard(),z.add.existing(this)}};Kr.DEFAULT={id:"sword-traveler",name:"Sword Traveler",type:"weapon",description:"Sword Traveler - Kim l khch.",category:"sword",rarity:3};let dd=Kr;const Zr=class Zr extends Ja{constructor(z,W,j,it){super(z,W,j,it,Zr.DEFAULT.name,Zr.DEFAULT.id,Zr.DEFAULT.type),this.rarity=Zr.DEFAULT.rarity,this.description=Zr.DEFAULT.description,this.durability=this.GetRandom(5,12),this.createCard(),z.add.existing(this)}};Zr.DEFAULT={id:"sword-sacrificial",name:"Sword Sacrificial",type:"weapon",description:"Sword Sacrificial - Kim t l.",category:"sword",rarity:4};let fd=Zr;class Qe extends os{constructor(z,W,j,it,ht,C){super(z,W,j,it,ht,C,"enemy"),this.poisoning=!1}setPoisoning(){var W;this.poisoning=!0;const z=(W=this.scene.gameManager)==null?void 0:W.emitter.on("completeMove",this.PoisoningEffect.bind(this),6);z&&typeof z=="function"&&this.unsubscribeList.push(z)}PoisoningEffect(){this.health>1&&this.poisoning&&this.takeDamage(1,"poisoning")}addDisplayHUD(){this.hpDisplay=this.createDisplay({fillColor:16711680,text:String(this.health)},"rightTop")}takeDamage(z,W){return this.health<=0?0:(super.takeDamage(z,W),this.health-=z,this.hpDisplay.updateText(this.health.toString()),W==="slash"&&(Za.animationSlash(this.scene,this.x,this.y),this.scene.sound.play("sword-sound")),this.showPopup(z,"damage"),this.cardImage.setTint(14702166),setTimeout(()=>this.cardImage.clearTint(),200),this.health<=0&&this.die(),z)}showPopup(z,W="heal"){const j=W==="heal"?"#00ff00":W==="damage"?"#ff0000":"#ffffff",it=W==="heal"?"+":W==="damage"?"-":"",ht=this.scene.add.text(0,0,`${it}${z}`,{fontSize:"32px",color:j,fontFamily:"Arial",fontStyle:"bold",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setDepth(2002);this.add(ht),this.scene.tweens.add({targets:ht,y:-50,alpha:.1,duration:2e3,ease:"Power2",onComplete:()=>ht.destroy()})}CardEffect(){var j,it;const z=(j=this.scene.gameManager)==null?void 0:j.cardManager.CardCharacter,W=z==null?void 0:z.weapon;if((W==null?void 0:W.durability)>0){const ht=Math.min(W.durability,this.health);return z.reduceDurability(ht),this.takeDamage(ht,"slash"),!0}return(it=this.scene.gameManager)==null||it.addCoin(this.score),(z==null?void 0:z.takeDamage(this.health))===0}}const Js=class Js extends Qe{constructor(z,W,j,it){super(z,W,j,it,Js.DEFAULT.name,Js.DEFAULT.id,Js.DEFAULT.type),this.element=Js.DEFAULT.element,this.description=Js.DEFAULT.description,this.rarity=Js.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};Js.DEFAULT={id:"anemo-samachurl",name:"Anemo Samachurl",element:"anemo",type:"enemy",description:"Anemo Samachurl - K ch caster gi c th to gi v lm chm ngi chi.",clan:"hilichurl",rarity:3};let cd=Js;const Qs=class Qs extends Qe{constructor(z,W,j,it){super(z,W,j,it,Qs.DEFAULT.name,Qs.DEFAULT.id,Qs.DEFAULT.type),this.element=Qs.DEFAULT.element,this.description=Qs.DEFAULT.description,this.rarity=Qs.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};Qs.DEFAULT={id:"electro-samachurl",name:"Electro Samachurl",element:"electro",type:"enemy",description:"Electro Samachurl - K ch caster li.",clan:"hilichurl",rarity:3};let vd=Qs;const js=class js extends Qe{constructor(z,W,j,it){super(z,W,j,it,js.DEFAULT.name,js.DEFAULT.id,js.DEFAULT.type),this.element=js.DEFAULT.element,this.description=js.DEFAULT.description,this.rarity=js.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};js.DEFAULT={id:"dendro-samachurl",name:"Dendro Samachurl",element:"dendro",type:"enemy",description:"Dendro Samachurl - K ch caster tho.",clan:"hilichurl",rarity:3};let pd=js;const qs=class qs extends Qe{constructor(z,W,j,it){super(z,W,j,it,qs.DEFAULT.name,qs.DEFAULT.id,qs.DEFAULT.type),this.element=qs.DEFAULT.element,this.description=qs.DEFAULT.description,this.rarity=qs.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};qs.DEFAULT={id:"geo-samachurl",name:"Geo Samachurl",element:"geo",type:"enemy",description:"Geo Samachurl - K ch caster nham.",clan:"hilichurl",rarity:3};let gd=qs;const _s=class _s extends Qe{constructor(z,W,j,it){super(z,W,j,it,_s.DEFAULT.name,_s.DEFAULT.id,_s.DEFAULT.type),this.element=_s.DEFAULT.element,this.description=_s.DEFAULT.description,this.rarity=_s.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};_s.DEFAULT={id:"hydro-samachurl",name:"Hydro Samachurl",element:"hydro",type:"enemy",description:"Hydro Samachurl - K ch caster thy.",clan:"hilichurl",rarity:3};let md=_s;const tr=class tr extends Qe{constructor(z,W,j,it){super(z,W,j,it,tr.DEFAULT.name,tr.DEFAULT.id,tr.DEFAULT.type),this.element=tr.DEFAULT.element,this.description=tr.DEFAULT.description,this.rarity=tr.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};tr.DEFAULT={id:"fighter",name:"Hilichurl Fighter",element:"physical",type:"enemy",description:"Hilichurl Fighter - K ch c bn c th tn cng ngi chi.",clan:"hilichurl",rarity:4};let xd=tr;const er=class er extends Qe{constructor(z,W,j,it){super(z,W,j,it,er.DEFAULT.name,er.DEFAULT.id,er.DEFAULT.type),this.element=er.DEFAULT.element,this.description=er.DEFAULT.description,this.rarity=er.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};er.DEFAULT={id:"hilistray-water",name:"Hilistray Water",element:"hydro",type:"enemy",description:"Hilistray Water - K ch thy.",clan:"hilichurl",rarity:3};let yd=er;const ir=class ir extends Qe{constructor(z,W,j,it){super(z,W,j,it,ir.DEFAULT.name,ir.DEFAULT.id,ir.DEFAULT.type),this.element=ir.DEFAULT.element,this.description=ir.DEFAULT.description,this.rarity=ir.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};ir.DEFAULT={id:"wooden-shieldwall",name:"Wooden Shieldwall",element:"physical",type:"enemy",description:"Wooden Shieldwall - K ch c khin g.",clan:"hilichurl",rarity:3};let Cd=ir;const sr=class sr extends Qe{constructor(z,W,j,it){super(z,W,j,it,sr.DEFAULT.name,sr.DEFAULT.id,sr.DEFAULT.type),this.element=sr.DEFAULT.element,this.description=sr.DEFAULT.description,this.rarity=sr.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};sr.DEFAULT={id:"lawachurl",name:"Lawachurl",element:"physical",type:"enemy",description:"Lawachurl - K ch mnh.",clan:"hilichurl",rarity:5};let Sd=sr;const rr=class rr extends Qe{constructor(z,W,j,it){super(z,W,j,it,rr.DEFAULT.name,rr.DEFAULT.id,rr.DEFAULT.type),this.element=rr.DEFAULT.element,this.description=rr.DEFAULT.description,this.rarity=rr.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};rr.DEFAULT={id:"rock-shieldwall",name:"Rock Shieldwall",element:"geo",type:"enemy",description:"Rock Shieldwall - K ch nham c khin.",clan:"hilichurl",rarity:3};let Td=rr;const nr=class nr extends Qe{constructor(z,W,j,it){super(z,W,j,it,nr.DEFAULT.name,nr.DEFAULT.id,nr.DEFAULT.type),this.element=nr.DEFAULT.element,this.description=nr.DEFAULT.description,this.rarity=nr.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};nr.DEFAULT={id:"berserker",name:"Berserker",element:"physical",type:"enemy",description:"Berserker - K ch hung hn tn cng mnh.",clan:"hilichurl",rarity:4};let Ed=nr;const ar=class ar extends Qe{constructor(z,W,j,it){super(z,W,j,it,ar.DEFAULT.name,ar.DEFAULT.id,ar.DEFAULT.type),this.element=ar.DEFAULT.element,this.description=ar.DEFAULT.description,this.rarity=ar.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};ar.DEFAULT={id:"blazing",name:"Blazing",element:"pyro",type:"enemy",description:"Blazing - K ch la.",clan:"hilichurl",rarity:3};let Pd=ar;const or=class or extends Qe{constructor(z,W,j,it){super(z,W,j,it,or.DEFAULT.name,or.DEFAULT.id,or.DEFAULT.type),this.element=or.DEFAULT.element,this.description=or.DEFAULT.description,this.rarity=or.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};or.DEFAULT={id:"ice-shieldwall",name:"Ice Shieldwall",element:"cryo",type:"enemy",description:"Ice Shieldwall - K ch bng c khin.",clan:"hilichurl",rarity:3};let Md=or;const hr=class hr extends Qe{constructor(z,W,j,it){super(z,W,j,it,hr.DEFAULT.name,hr.DEFAULT.id,hr.DEFAULT.type),this.element=hr.DEFAULT.element,this.description=hr.DEFAULT.description,this.rarity=hr.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};hr.DEFAULT={id:"shooter",name:"Shooter",element:"physical",type:"enemy",description:"Shooter - K ch bn xa.",clan:"hilichurl",rarity:3};let wd=hr;const lr=class lr extends Qe{constructor(z,W,j,it){super(z,W,j,it,lr.DEFAULT.name,lr.DEFAULT.id,lr.DEFAULT.type),this.element=lr.DEFAULT.element,this.description=lr.DEFAULT.description,this.rarity=lr.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};lr.DEFAULT={id:"crackling",name:"Crackling",element:"electro",type:"enemy",description:"Crackling - K ch in.",clan:"hilichurl",rarity:3};let Ad=lr;const ur=class ur extends Qe{constructor(z,W,j,it){super(z,W,j,it,ur.DEFAULT.name,ur.DEFAULT.id,ur.DEFAULT.type),this.element=ur.DEFAULT.element,this.description=ur.DEFAULT.description,this.rarity=ur.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};ur.DEFAULT={id:"cryo-shooter",name:"Cryo Shooter",element:"cryo",type:"enemy",description:"Cryo Shooter - K ch bng bn xa.",clan:"hilichurl",rarity:3};let Rd=ur;const dr=class dr extends Qe{constructor(z,W,j,it){super(z,W,j,it,dr.DEFAULT.name,dr.DEFAULT.id,dr.DEFAULT.type),this.element=dr.DEFAULT.element,this.description=dr.DEFAULT.description,this.rarity=dr.DEFAULT.rarity,this.health=this.GetRandom(3,10),this.score=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}};dr.DEFAULT={id:"electro-shooter",name:"Electro Shooter",element:"electro",type:"enemy",description:"Electro Shooter - K ch li bn xa.",clan:"hilichurl",rarity:3};let Ld=dr;class Eh extends os{constructor(z,W,j,it,ht,C){super(z,W,j,it,ht,C,"food")}addDisplayHUD(){this.foodDisplay=this.createDisplay({fillColor:16737792,text:this.food.toString()},"rightBottom")}seasoning(z){this.food+=z,this.foodDisplay.updateText(this.food)}}const Jr=class Jr extends Eh{constructor(z,W,j,it){super(z,W,j,it,Jr.DEFAULT.name,Jr.DEFAULT.id,Jr.DEFAULT.type),this.rarity=Jr.DEFAULT.rarity,this.description=Jr.DEFAULT.description,this.food=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}CardEffect(){var z,W;return super.CardEffect(),(W=(z=this.scene.gameManager)==null?void 0:z.cardManager.CardCharacter)==null||W.heal(this.food),!1}};Jr.DEFAULT={id:"life-essence",name:"Life Essence",type:"food",description:"Life Essence - Tinh hoa s sng hi phc sc khe ti a v tng tt c ch s."};let bd=Jr;const Qr=class Qr extends Eh{constructor(z,W,j,it){super(z,W,j,it,Qr.DEFAULT.name,Qr.DEFAULT.id,Qr.DEFAULT.type),this.rarity=Qr.DEFAULT.rarity,this.description=Qr.DEFAULT.description,this.food=this.GetRandom(1,9),this.createCard(),z.add.existing(this)}CardEffect(){var z,W;return super.CardEffect(),(W=(z=this.scene.gameManager)==null?void 0:z.cardManager.CardCharacter)==null||W.heal(this.food),!1}};Qr.DEFAULT={id:"mystique-soup",name:"Mystique Soup",type:"food",description:"Mystique Soup - Sp b n hi phc sc khe v tng sc mnh tm thi.",rarity:3};let Od=Qr;const jr=class jr extends Eh{constructor(z,W,j,it){super(z,W,j,it,jr.DEFAULT.name,jr.DEFAULT.id,jr.DEFAULT.type),this.rarity=jr.DEFAULT.rarity,this.description=jr.DEFAULT.description,this.food=this.GetRandom(3,9),this.createCard(),z.add.existing(this)}CardEffect(){var z,W;return super.CardEffect(),(W=(z=this.scene.gameManager)==null?void 0:z.cardManager.CardCharacter)==null||W.heal(this.food),!1}};jr.DEFAULT={id:"pizza",name:"Pizza",type:"food",description:"Pizza - Bnh pizza  hi phc sc khe v tng sc mnh tn cng.",rarity:2};let Fd=jr;const qr=class qr extends Eh{constructor(z,W,j,it){super(z,W,j,it,qr.DEFAULT.name,qr.DEFAULT.id,qr.DEFAULT.type),this.rarity=qr.DEFAULT.rarity,this.description=qr.DEFAULT.description,this.food=this.GetRandom(1,6),this.createCard(),z.add.existing(this)}CardEffect(){var z,W;return super.CardEffect(),(W=(z=this.scene.gameManager)==null?void 0:z.cardManager.CardCharacter)==null||W.heal(this.food),!1}};qr.DEFAULT={id:"roast-chicken",name:"Roast Chicken",type:"food",description:"Roast Chicken - G nng thm ngon hi phc sc khe v tng kh nng phng th.",rarity:2};let Dd=qr;const _r=class _r extends Eh{constructor(z,W,j,it){super(z,W,j,it,_r.DEFAULT.name,_r.DEFAULT.id,_r.DEFAULT.type),this.rarity=_r.DEFAULT.rarity,this.description=_r.DEFAULT.description,this.food=this.GetRandom(6,9),this.createCard(),z.add.existing(this)}CardEffect(){var z,W;return super.CardEffect(),(W=(z=this.scene.gameManager)==null?void 0:z.cardManager.CardCharacter)==null||W.heal(this.food),!1}};_r.DEFAULT={id:"macarons",name:"Macarons",type:"food",description:"Macarons - Bnh ngt Php hi phc sc khe v tng tinh thn.",rarity:3};let Bd=_r;class Zp extends os{constructor(z,W,j,it,ht,C){super(z,W,j,it,ht,C,"trap")}addDisplayHUD(){this.damageDisplay=this.createDisplay({fillColor:16737792,text:this.damage.toString()},"rightBottom")}}const tn=class tn extends Zp{constructor(z,W,j,it){super(z,W,j,it,tn.DEFAULT.name,tn.DEFAULT.id,tn.DEFAULT.type),this.rarity=tn.DEFAULT.rarity,this.description=tn.DEFAULT.description,this.enemyCount=this.GetRandom(1,3),this.enemyLevel=this.GetRandom(1,3),this.createCard(),z.add.existing(this)}};tn.DEFAULT={id:"abyss-call",name:"AbyssCall",type:"trap",description:"AbyssCall - By gi thm enemy vo trn u khi kch hot."};let Id=tn;const en=class en extends Zp{constructor(z,W,j,it){super(z,W,j,it,en.DEFAULT.name,en.DEFAULT.id,en.DEFAULT.type),this.rarity=en.DEFAULT.rarity,this.description=en.DEFAULT.description,this.damage=this.GetRandom(5,12),this.createCard(),z.add.existing(this)}CardEffect(){var W,j,it,ht,C;this.ProgressDestroy();const z=(W=this.scene.gameManager)==null?void 0:W.cardManager.cardFactory.createRandomCard(this.scene,this.index);return z&&((ht=(j=this.scene.gameManager)==null?void 0:(it=j.cardManager.addCard(z,this.index)).processCreation)==null||ht.call(it)),(C=this.scene.gameManager)==null||C.animationManager.startShuffleAllCardsAnimation(()=>{}),!0}};en.DEFAULT={id:"quicksand",name:"Quicksand",type:"trap",description:"Quicksand - By ct ln gy damage v lm chm ngi chi khi kch hot.",rarity:2};let Gd=en;const sn=class sn extends Zp{constructor(z,W,j,it){var C;super(z,W,j,it,sn.DEFAULT.name,sn.DEFAULT.id,sn.DEFAULT.type),this.rarity=sn.DEFAULT.rarity,this.description=sn.DEFAULT.description,this.damage=this.GetRandom(1,7),this.trapId=`breathe-fire-${Date.now()}-${Math.random()}`;const ht=(C=this.scene.gameManager)==null?void 0:C.emitter.on("completeMove",this.transformationAgency.bind(this),4);ht&&this.unsubscribeList.push(ht),this.createCard(),this.initializeArrows(),z.add.existing(this)}CardEffect(){var z;return this.scene.sound.play("breathe-fire-sound"),(z=this.scene.gameManager)==null||z.animationManager.startBreatheFireAnimation(this.damage,this.findAdjacentTargets(),()=>{}),!1}initializeArrows(){const z=Math.random()*100,W=z<50?2:z<90?1:3,j=["top","bottom","left","right"];this.arrowDisplay=[];const it=[...j];for(let ht=0;ht<W;ht++){const C=this.GetRandom(0,it.length-1);this.arrowDisplay.push(this.createArrowDisplay("#ff0000",it[C])),it.splice(C,1)}}transformationAgency(){if(this.isTransforming)return;this.scene.gameManager.OnCompleteMoveCount++,this.isTransforming=!0,this.arrowDisplay.forEach(j=>j.pause());let z=0;const W=this.arrowDisplay.length;this.arrowDisplay.forEach(j=>{let it;switch(j.direction){case"top":it=0,j.direction="right";break;case"right":it=90,j.direction="bottom";break;case"bottom":it=180,j.direction="left";break;case"left":it=-90,j.direction="top";break;default:it=j.angle}this.scene.tweens.add({targets:j,angle:it,duration:300,ease:"Power2",onUpdate:()=>{const ht=Kt.Math.DegToRad(j.angle);j.x=(j.cardWidth+18)*Math.cos(ht),j.y=(j.cardHeight+18)*Math.sin(ht)},onComplete:()=>{j.resume(),z++,z>=W&&(this.isTransforming=!1,this.scene.gameManager.OnCompleteMoveCount--)}})})}findAdjacentTargets(){const z=[],W=this.index,j={row:Math.floor(W/3),col:W%3};return this.arrowDisplay.some(it=>it.direction==="top")&&j.row>0&&z.push((j.row-1)*3+j.col),this.arrowDisplay.some(it=>it.direction==="bottom")&&j.row<2&&z.push((j.row+1)*3+j.col),this.arrowDisplay.some(it=>it.direction==="left")&&j.col>0&&z.push(j.row*3+(j.col-1)),this.arrowDisplay.some(it=>it.direction==="right")&&j.col<2&&z.push(j.row*3+(j.col+1)),z}createArrowDisplay(z,W){const j=this.scene.add.text(0,0,"",{fontSize:"42px",color:z,fontFamily:"Arial"}).setOrigin(.5).setDepth(999);j.scaleX=.45,j.cardWidth=57,j.cardHeight=113,j.direction=W;let it=0,ht=0,C=0;switch(W){case"top":ht=-5,j.setPosition(0,-j.cardHeight-18),C=-90;break;case"bottom":ht=5,j.setPosition(0,j.cardHeight+18),C=90;break;case"left":it=-5,j.setPosition(-j.cardWidth-18,0),C=180;break;default:it=5,j.setPosition(j.cardWidth+18,0),C=0}j.setAngle(C);const R=this.scene.tweens.add({targets:j,x:j.x+it,y:j.y+ht,duration:1e3,ease:"Linear",yoyo:!0,repeat:-1});return j.pause=()=>R.pause(),j.resume=()=>{j.moveTween&&j.moveTween.stop();let s=0,g=0,y=0,u=0,l=0;switch(j.direction){case"top":s=-90,g=0,y=-j.cardHeight-18,l=-5;break;case"bottom":s=90,g=0,y=j.cardHeight+18,l=5;break;case"left":s=180,g=-j.cardWidth-18,y=0,u=-5;break;default:s=0,g=j.cardWidth+18,y=0,u=5}j.setPosition(g,y),j.setAngle(s),j.moveTween=this.scene.tweens.add({targets:j,x:g+u,y:y+l,duration:1e3,ease:"Linear",yoyo:!0,repeat:-1})},j.moveTween=R,this.add(j),j}destroy(z){this.arrowDisplay&&this.arrowDisplay.forEach(W=>{W.moveTween&&W.moveTween.stop()}),super.destroy(z)}};sn.DEFAULT={id:"breathe-fire",name:"Breathe Fire",type:"trap",description:"Breathe Fire - By th la gy damage cho ngi chi khi kch hot.",rarity:2};let kd=sn;class Jp extends os{constructor(z,W,j,it,ht,C){super(z,W,j,it,ht,C,"treasure")}addDisplayHUD(){this.durabilityDisplay=this.createDisplay({fillColor:16737792,text:this.durability.toString()},"rightBottom")}}const rn=class rn extends Jp{constructor(z,W,j,it){super(z,W,j,it,rn.DEFAULT.name,rn.DEFAULT.id,rn.DEFAULT.type),this.rarity=rn.DEFAULT.rarity,this.description=rn.DEFAULT.description,this.durability=this.GetRandom(5,10),this.createCard(),z.add.existing(this)}CardEffect(){var W,j,it,ht;this.ProgressDestroy();const z=(W=this.scene.gameManager)==null?void 0:W.cardManager.cardFactory.createRandomCard(this.scene,this.index);return z&&((ht=(j=this.scene.gameManager)==null?void 0:(it=j.cardManager.addCard(z,this.index)).processCreation)==null||ht.call(it)),!0}};rn.DEFAULT={id:"chest",name:"Chest",type:"treasure",description:"Chest - Kho bu chnh cha nhiu loi phn thng qu gi.",rarity:4};let Nd=rn;const nn=class nn extends Jp{constructor(z,W,j,it){super(z,W,j,it,nn.DEFAULT.name,nn.DEFAULT.id,nn.DEFAULT.type),this.rarity=nn.DEFAULT.rarity,this.description=nn.DEFAULT.description,this.durability=this.GetRandom(5,10),this.createCard(),z.add.existing(this)}CardEffect(){var W,j,it,ht;this.ProgressDestroy();const z=(W=this.scene.gameManager)==null?void 0:W.cardManager.cardFactory.createRandomCard(this.scene,this.index);return z&&((ht=(j=this.scene.gameManager)==null?void 0:(it=j.cardManager.addCard(z,this.index)).processCreation)==null||ht.call(it)),!0}};nn.DEFAULT={id:"bribery",name:"Bribery",type:"treasure",description:"Bribery - Hi l  nhn phn thng ln hn chi ph.",rarity:3};let zd=nn;const an=class an extends Jp{constructor(z,W,j,it){super(z,W,j,it,an.DEFAULT.name,an.DEFAULT.id,an.DEFAULT.type),this.rarity=an.DEFAULT.rarity,this.description=an.DEFAULT.description,this.durability=this.GetRandom(5,10),this.createCard(),z.add.existing(this)}CardEffect(){var W,j,it,ht;this.ProgressDestroy();const z=(W=this.scene.gameManager)==null?void 0:W.cardManager.cardFactory.createRandomCard(this.scene,this.index);return z&&((ht=(j=this.scene.gameManager)==null?void 0:(it=j.cardManager.addCard(z,this.index)).processCreation)==null||ht.call(it)),!0}};an.DEFAULT={id:"gold-mine",name:"GoldMine",type:"treasure",description:"GoldMine - M khai thc  nhn ti nguyn.",rarity:2};let Ud=an;class dH extends os{constructor(z,W,j,it,ht,C){super(z,W,j,it,ht,C,"bomb")}addDisplayHUD(){this.countdownDisplay=this.createDisplay({fillColor:12941350,text:this.countdown.toString()},"rightTop"),this.bombDisplay=this.createDisplay({fillColor:16737792,text:this.damage.toString()},"rightBottom")}CardEffect(){var z;return(z=this.scene.gameManager)==null||z.animationManager.startSwapCardsAnimation(this.index,this.scene.gameManager.cardManager.getCharacterIndex(),()=>{}),!0}}const on=class on extends dH{constructor(z,W,j,it){var C;super(z,W,j,it,on.DEFAULT.name,on.DEFAULT.id,on.DEFAULT.type),this.rarity=on.DEFAULT.rarity,this.description=on.DEFAULT.description,this.damage=this.GetRandom(1,3),this.countdown=5;const ht=(C=this.scene.gameManager)==null?void 0:C.emitter.on("completeMove",this.BombCountdownEffect.bind(this),5);ht&&this.unsubscribeList.push(ht),this.createCard(),z.add.existing(this)}BombCountdownEffect(){this.countdown--,this.countdownDisplay.updateText(this.countdown.toString()),this.countdown<=0&&this.Detonation()}Detonation(){var W;this.scene.sound.play("bomb-sound");const z=jn.getAdjacentPositions(this.index);(W=this.scene.gameManager)==null||W.animationManager.startExplosiveAnimation(this.damage,z,()=>this.die())}};on.DEFAULT={id:"explosive",name:"Explosive",type:"bomb",description:"Explosive - Bom n gy damage cho tt c trong bn knh.",rarity:3};let Wp=on;const Qn=class Qn extends os{constructor(z,W,j,it){super(z,W,j,it,Qn.DEFAULT.name,Qn.DEFAULT.id,Qn.DEFAULT.type),this.description=Qn.DEFAULT.description,this.createCard(),z.add.existing(this)}CardEffect(){return super.CardEffect(),!1}};Qn.DEFAULT={id:"empty",name:"Empty",type:"empty",description:"Empty - Th trng khng c tc dng."};let Vd=Qn;const As=class As{constructor(){if(As.instance)return As.instance;this.characterClasses={eula:Xn,furina:kp,mavuika:Np,nahida:zp,raiden:Up,venti:Vp,zhongli:Xp},this.cardClasses={};const z=(W,j)=>{this.cardClasses[W]=j};z("Coin",ad),this.weaponClasses=[od,hd,ld,ud,dd,fd],z("SwordSteampunk",od),z("SwordForest",hd),z("SwordSkyward",ld),z("SwordSplendor",ud),z("SwordTraveler",dd),z("SwordSacrificial",fd),this.enemyClasses=[cd,vd,pd,gd,md,xd,yd,Cd,Sd,Td,Ed,Pd,Md,wd,Ad,Rd,Ld],[["AnemoSamachurl",cd],["ElectroSamachurl",vd],["DendroSamachurl",pd],["GeoSamachurl",gd],["HydroSamachurl",md],["HilichurlFighter",xd],["HilistrayWater",yd],["WoodenShieldwall",Cd],["Lawachurl",Sd],["RockShieldwall",Td],["Berserker",Ed],["Blazing",Pd],["IceShieldwall",Md],["Shooter",wd],["Crackling",Ad],["CryoShooter",Rd],["ElectroShooter",Ld]].forEach(([W,j])=>z(W,j)),this.foodClasses=[bd,Od,Fd,Dd,Bd],[["LifeEssence",bd],["MystiqueSoup",Od],["Pizza",Fd],["RoastChicken",Dd],["Macarons",Bd]].forEach(([W,j])=>z(W,j)),this.trapClasses=[Id,kd,Gd],[["AbyssCall",Id],["BreatheFire",kd],["Quicksand",Gd]].forEach(([W,j])=>z(W,j)),this.treasureClasses=[Nd,zd,Ud],[["Chest",Nd],["Bribery",zd],["GoldMine",Ud]].forEach(([W,j])=>z(W,j)),z("Explosive",Wp),z("Empty",Vd),this.cardClasses.add=function(W){W.forEach(j=>{const it=j.name;it&&(this[it]=j)})},this.stageCardPools={},Ka.forEach(W=>{this.stageCardPools[W.stageId]={name:W.name,typeRatios:W.typeRatios,availableCards:W.availableCards}}),this.currentStage="dungeon_abyss_chamber",this.element="cryo",this._cachedCardWeights=null,As.instance=this}static getInstance(){return As.instance||(As.instance=new As),As.instance}_calculateCardWeights(){var C,R;if(this._cachedCardWeights)return this._cachedCardWeights;const z={},W=this.stageCardPools[this.currentStage],j=W.typeRatios,it=W.availableCards,ht={};for(const[s,g]of Object.entries(j))if(it[s]){let y=0;for(const u of it[s]){const l=this.cardClasses[u];if(l){if(!((C=l.DEFAULT)!=null&&C.rarity))continue;const h=l.DEFAULT.rarity;y+=h*10}}ht[s]=y}for(const[s,g]of Object.entries(j))if(it[s]&&ht[s])for(const y of it[s]){const u=this.cardClasses[y];if((R=u==null?void 0:u.DEFAULT)!=null&&R.rarity){const r=u.DEFAULT.rarity*10/ht[s]*g;z[y]=r}}return this._cachedCardWeights=z,z}createRandomCard(z,W){const{x:j,y:it}=z.gameManager.cardManager.getGridPositionCoordinates(W),ht=this._calculateCardWeights(),C=Object.values(ht).reduce((u,l)=>u+l,0);if(C===0)return null;const R=Math.random()*C;let s=0;for(const[u,l]of Object.entries(ht))if(s+=l,R<=s){if(u==="Coin")return this.createCoin(z,W);const h=this.cardClasses[u];if(h)return new h(z,j,it,W)}const g=Object.keys(ht).pop();if(g==="Coin")return this.createCoin(z,W);const y=g?this.cardClasses[g]:void 0;return y?new y(z,j,it,W):null}createCoin(z,W,j){const{x:it,y:ht}=z.gameManager.cardManager.getGridPositionCoordinates(W),C=new ad(z,it,ht,W,this.element);return j!=null&&C.setScore(j),C}createEmpty(z,W){const{x:j,y:it}=z.gameManager.cardManager.getGridPositionCoordinates(W);return new Vd(z,j,it,W)}_calculateDynamicCardWeights(z){var R,s;const W=this.stageCardPools[this.currentStage],j=W.typeRatios,it=W.availableCards,ht={},C={};for(const[g]of Object.entries(j))if(it[g]){let y=0;for(const u of it[g])if(z.includes(u)){const l=this.cardClasses[u];(R=l==null?void 0:l.DEFAULT)!=null&&R.rarity&&(y+=l.DEFAULT.rarity*10)}y>0&&(C[g]=y)}for(const[g,y]of Object.entries(j))if(it[g]&&C[g]){for(const u of it[g])if(z.includes(u)){const l=this.cardClasses[u];if((s=l==null?void 0:l.DEFAULT)!=null&&s.rarity){const h=l.DEFAULT.rarity*10;ht[u]=h/C[g]*y}}}return ht}createCard(z,W,j){const{x:it,y:ht}=z.gameManager.cardManager.getGridPositionCoordinates(W),C=this._calculateDynamicCardWeights(j),R=Object.values(C).reduce((l,h)=>l+h,0);if(R===0)return null;const s=Math.random()*R;let g=0;for(const[l,h]of Object.entries(C))if(g+=h,s<=g){if(l==="Coin")return this.createCoin(z,W);const r=this.cardClasses[l];if(r)return new r(z,it,ht,W)}const y=Object.keys(C).pop();if(y==="Coin")return this.createCoin(z,W);const u=this.cardClasses[y];return u?new u(z,it,ht,W):null}createCharacter(z,W,j,it){var R;const ht=localStorage.getItem("selectedCharacter");if(!ht)return this.element=Xn.DEFAULT.element,new Xn(z,W,j,it);const C=this.characterClasses[ht];return C?(this.element=((R=C.DEFAULT)==null?void 0:R.element)??"cryo",new C(z,W,j,it)):(this.element=Xn.DEFAULT.element,new Xn(z,W,j,it))}getAllCardDefault(){return Object.values(this.cardClasses).filter(z=>typeof z=="function"&&"DEFAULT"in z).map(z=>z.DEFAULT)}addCardToStage(z,W,j){if(!this.stageCardPools[z])throw new Error(`Mn chi '${z}' khng tn ti`);if(!this.stageCardPools[z].availableCards[W])throw new Error(`Type '${W}' khng tn ti trong mn chi '${z}'`);this.stageCardPools[z].availableCards[W].includes(j)||(this.stageCardPools[z].availableCards[W].push(j),this._cachedCardWeights=null)}removeCardFromStage(z,W,j){if(!this.stageCardPools[z])throw new Error(`Mn chi '${z}' khng tn ti`);if(!this.stageCardPools[z].availableCards[W])throw new Error(`Type '${W}' khng tn ti trong mn chi '${z}'`);const it=this.stageCardPools[z].availableCards[W],ht=it.indexOf(j);ht>-1&&(it.splice(ht,1),this._cachedCardWeights=null)}updateStageTypeRatio(z,W,j){if(!this.stageCardPools[z])throw new Error(`Mn chi '${z}' khng tn ti`);if(this.stageCardPools[z].typeRatios[W]===void 0)throw new Error(`Type '${W}' khng tn ti trong mn chi '${z}'`);this.stageCardPools[z].typeRatios[W]=j,this._cachedCardWeights=null}getStageInfo(){return this.stageCardPools}getCurrentStageTotalWeight(){const z=this.stageCardPools[this.currentStage];return Object.values(z.typeRatios).reduce((W,j)=>W+j,0)}getCurrentStageCardWeights(){const z=this._calculateCardWeights(),W=this.stageCardPools[this.currentStage];return{stage:W.name,typeRatios:W.typeRatios,cardWeights:z,totalWeight:this.getCurrentStageTotalWeight()}}setCurrentStage(z){this.stageCardPools[z]&&(this.currentStage=z,this._cachedCardWeights=null)}};As.instance=null;let Yp=As;const fH=Yp.getInstance();class cH{constructor(z){this.scene=z,this.gridSize=3,this.cards=new Array(9).fill(null),this.cardWidth=160,this.cardHeight=274.3,this.spacing=16,this.gridStartX=0,this.gridStartY=0,this.cardFactory=fH,this.cardFactory.setCurrentStage(z.stageId),this.CardCharacter=null}initializeGridCoordinates(){if(this.scene&&this.scene.scale){const{width:z,height:W}=this.scene.scale;this.gridStartX=(z-(3*this.cardWidth+2*this.spacing))/2,this.gridStartY=W*.23}else console.warn("CardManager: Scene or scale not available, using default coordinates")}addCard(z,W){return W>=0&&W<9?this.cards[W]=z:console.warn(`CardManager: Invalid grid index ${W}`),z}getCard(z){return z>=0&&z<9?this.cards[z]:null}getAllCards(){return this.cards.filter(z=>z!==null)}getGridPositionCoordinates(z){if(z<0||z>=9)return null;const W=Math.floor(z/this.gridSize),j=z%this.gridSize,it=this.gridStartX+j*(this.cardWidth+this.spacing)+this.cardWidth/2,ht=this.gridStartY+W*(this.cardHeight+this.spacing)+this.cardHeight/2;return{x:it,y:ht}}initializeCreateDeck(){this.initializeGridCoordinates();const z=this.getGridPositionCoordinates(4);if(!z){console.error("CardManager: Cannot get coordinates for position 4");return}this.CardCharacter=this.cardFactory.createCharacter(this.scene,z.x,z.y,4),this.addCard(this.CardCharacter,4);for(let W=0;W<9;W++)if(this.getGridPositionCoordinates(W)){if(W===4)continue;const it=this.cardFactory.createRandomCard(this.scene,W);this.addCard(it,W)}this.checkElementResonance(),this.scene.gameManager&&this.scene.gameManager.emitter.on("completeMove",this.checkElementResonance.bind(this),2)}moveCard(z,W){if(z<0||z>=9||W<0||W>=9)return console.warn(`CardManager: Invalid indices for move: ${z} -> ${W}`),!1;const j=this.cards[z];return j?(j.index=W,this.cards[z]=null,this.addCard(j,W),!0):(console.warn(`CardManager: No card at position ${z}`),!1)}swapCard(z,W){if(z<0||z>=9||W<0||W>=9)return console.warn(`CardManager: Invalid indices for swap: ${z} <-> ${W}`),!1;const j=this.cards[z],it=this.cards[W];if(!j||!it)return console.warn(`CardManager: Missing card at position ${z} or ${W}`),!1;const ht=j.index;j.index!==void 0&&it.index!==void 0&&(j.index=it.index,it.index=ht),this.cards[z]=it,this.cards[W]=j;const C=this.getGridPositionCoordinates(W),R=this.getGridPositionCoordinates(z);return C&&R&&(j.setPosition(C.x,C.y),it.setPosition(R.x,R.y)),!0}disableAllCards(){this.getAllCards().forEach(W=>{W&&W.disableInteractive&&W.disableInteractive()})}enableAllCards(){this.getAllCards().forEach(W=>{W&&W.setInteractive&&W.setInteractive()})}getCharacterIndex(){var z,W;if(this.CardCharacter&&this.CardCharacter.index!==void 0){const j=this.CardCharacter.index;return this.cards[j]&&((z=this.cards[j])==null?void 0:z.type)==="character"?j:(console.error(`CardManager: Card ti v tr ${j} khng phi l character. Type: ${((W=this.cards[j])==null?void 0:W.type)||"undefined"}`),-1)}else return console.error("CardManager: CardCharacter.index khng tn ti hoc undefined"),-1}checkElementResonance(){const z=new Set;for(let W=0;W<3;W++){const j=[];for(let it=0;it<3;it++){const ht=W*3+it,C=this.cards[ht];C&&C.type==="coin"&&C.nameId&&C.nameId.endsWith("fragment")&&j.push(C)}if(j.length===3){const it=j[0].nameId;j.every(C=>C.nameId===it)&&it&&(j.forEach(C=>{z.add(C)}),console.log(` Element Resonance: Row ${W} with nameId ${it} triggered`))}}for(let W=0;W<3;W++){const j=[];for(let it=0;it<3;it++){const ht=it*3+W,C=this.cards[ht];C&&C.type==="coin"&&C.nameId&&C.nameId.endsWith("fragment")&&j.push(C)}if(j.length===3){const it=j[0].nameId;j.every(C=>C.nameId===it)&&it&&(j.forEach(C=>{z.add(C)}),console.log(` Element Resonance: Column ${W} with nameId ${it} triggered`))}}return z.size>0&&(console.log(`Element Resonance: ${z.size} cards triggered`),z.forEach(W=>{W.resonance&&W.resonance()})),z.size}}class vH{constructor(z){this.scene=z,this.animationQueue=[],this.isProcessing=!1,this.currentAnimation=null}addToQueue(z,W){this.animationQueue.push({priority:z,function:W}),this.isProcessing||this.processQueue()}processQueue(){if(this.animationQueue.length===0||this.isProcessing)return;this.isProcessing=!0;let z=0,W=this.animationQueue[0].priority;for(let it=1;it<this.animationQueue.length;it++)this.animationQueue[it].priority>W&&(W=this.animationQueue[it].priority,z=it);const j=this.animationQueue.splice(z,1)[0];this.currentAnimation=j,this.executeAnimation(j.function)}executeAnimation(z){try{z(()=>{this.completeAnimation()})}catch(W){console.error("AnimationManager: Li khi thc hin animation:",W),this.completeAnimation()}}completeAnimation(){this.currentAnimation=null,this.isProcessing=!1,this.animationQueue.length>0&&this.processQueue()}startMoveAnimation(z,W){this.addToQueue(8,()=>{const j=Array.isArray(z)?z:[z];let it=0;const ht=j.length;j.forEach(C=>{var y,u;const R=(y=this.scene.gameManager)==null?void 0:y.cardManager.getCard(C.from),s=(u=this.scene.gameManager)==null?void 0:u.cardManager.getGridPositionCoordinates(C.to);if(!R||!s){it++,it>=ht&&(W&&typeof W=="function"&&W(),this.completeAnimation());return}const g=R.depth||0;R.setDepth(100),this.scene.tweens.add({targets:R,x:s.x,y:s.y,duration:500,ease:"Power2",onComplete:()=>{R.setDepth(g),it++,it>=ht&&(W&&typeof W=="function"?W():console.error("AnimationManager: Khng c callback c gi"),this.completeAnimation())}})})})}startGameOverAnimation(z,W){this.addToQueue(10,()=>{let j=0;const it=z.length,ht=this.scene.time.addEvent({delay:200,callback:()=>{if(j>=it){ht.destroy(),W&&typeof W=="function"?W():console.error("AnimationManager: Khng c callback c gi"),this.completeAnimation();return}const C=z[j];C&&C.ProgressDestroy&&(C.ProgressDestroy(),console.log(`GameManager: Destroying card ${C.name||C.type} at index ${j}`)),j++},loop:!0})})}startSwapCardsAnimation(z,W,j){this.addToQueue(8,()=>{var C,R;const it=(C=this.scene.gameManager)==null?void 0:C.cardManager.getCard(z),ht=(R=this.scene.gameManager)==null?void 0:R.cardManager.getCard(W);if(!it||!ht||!this.scene.gameManager){j&&typeof j=="function"&&j(),this.completeAnimation();return}this.scene.gameManager.cardManager.swapCard(z,W),this.scene.tweens.add({targets:[it,ht],scaleX:0,scaleY:1.05,duration:150,ease:"Linear",onComplete:()=>{this.scene.tweens.add({targets:[ht,it],scaleX:1,scaleY:1,duration:150,ease:"Linear",onComplete:()=>{j&&typeof j=="function"?j():console.error("AnimationManager: Khng c callback c gi"),this.completeAnimation()}})}})})}startShuffleAllCardsAnimation(z){this.addToQueue(8,()=>{if(!this.scene.gameManager){z&&typeof z=="function"&&z(),this.completeAnimation();return}const W=this.scene.gameManager.cardManager.getAllCards();this.scene.tweens.add({targets:W,scaleX:0,duration:150,ease:"Linear",onComplete:()=>{jn.shuffleArray(W).forEach((it,ht)=>{var R;const C=(R=this.scene.gameManager)==null?void 0:R.cardManager.getGridPositionCoordinates(ht);C&&(it.setPosition(C.x,C.y),it.index=ht)}),W.sort((it,ht)=>(it.index||0)-(ht.index||0)),this.scene.gameManager.cardManager.cards=W,this.scene.tweens.add({targets:W,scaleX:1,duration:150,ease:"Linear",onComplete:()=>{z&&typeof z=="function"?z():console.error("AnimationManager: Khng c callback c gi"),this.completeAnimation()}})}})})}startBreatheFireAnimation(z,W,j){this.addToQueue(12,()=>{if(!this.scene.gameManager){j&&typeof j=="function"&&j(),this.completeAnimation();return}W.forEach(it=>{const ht=this.scene.gameManager.cardManager.getCard(it);ht&&ht.takeDamage&&ht.takeDamage(z,"BreatheFire")}),setTimeout(()=>{j&&typeof j=="function"?j():console.error("AnimationManager: Khng c callback c gi"),this.completeAnimation()},510)})}startExplosiveAnimation(z,W,j){this.addToQueue(9,()=>{if(!this.scene.gameManager){j&&typeof j=="function"&&j(),this.completeAnimation();return}W.forEach(it=>{const ht=this.scene.gameManager.cardManager.getCard(it);ht&&ht.takeDamage&&ht.takeDamage(z,"Explosive")}),setTimeout(()=>{j&&typeof j=="function"?j():console.error("AnimationManager: Khng c callback c gi"),this.completeAnimation()},510)})}startItemAnimation(z,W){this.addToQueue(7,()=>{if(!this.scene.gameManager){W&&typeof W=="function"&&W(),this.completeAnimation();return}const j=this.scene.gameManager.cardManager.getGridPositionCoordinates(4);if(!j){W&&typeof W=="function"&&W(),this.completeAnimation();return}const it=j.x,ht=j.y,C=this.scene.add.image(it,ht,"item",z);C.setDepth(200),C.setScale(0),this.scene.tweens.add({targets:C,scale:4.5,alpha:.1,duration:300,ease:"Power2",onComplete:()=>{C.destroy(),W&&typeof W=="function"?W():console.error("AnimationManager: Khng c callback c gi"),this.completeAnimation()}})})}clearQueue(){this.animationQueue=[]}stopCurrentAnimation(){this.currentAnimation&&this.scene.tweens.killAll()}getStatus(){return{queueLength:this.animationQueue.length,isProcessing:this.isProcessing,currentAnimation:this.currentAnimation?`priority: ${this.currentAnimation.priority}`:null}}destroy(){console.log("AnimationManager: ang dn dp..."),this.clearQueue(),this.stopCurrentAnimation(),this.scene=null}}const Th=class Th{constructor(){this.events=new Map}on(z,W,j=Th.DEFAULT_PRIORITY){this.events.has(z)||this.events.set(z,[]);const it=this.events.get(z),ht={listener:W,priority:j,id:Date.now()+Math.random()};return it.push(ht),it.sort((C,R)=>C.priority-R.priority),()=>this.off(z,ht.id)}once(z,W,j=Th.DEFAULT_PRIORITY){const it=(...ht)=>{W(...ht),this.off(z,it)};return this.on(z,it,j)}off(z,W){if(!this.events.has(z))return;const j=this.events.get(z),it=j.findIndex(ht=>ht.listener===W||ht.id===W);it!==-1&&(j.splice(it,1),j.length===0&&this.events.delete(z))}removeAllListeners(z){z?this.events.delete(z):this.events.clear()}emit(z,...W){if(!this.events.has(z))return!1;const j=this.events.get(z);for(const{listener:it}of j)try{it(...W)}catch(ht){console.error(`Li trong hm lng nghe s kin ${z}:`,ht)}return!0}listenerCount(z){return this.events.has(z)?this.events.get(z).length:0}eventNames(){return Array.from(this.events.keys())}hasListeners(z){return this.listenerCount(z)>0}};Th.DEFAULT_PRIORITY=0;let Hp=Th;class pH{constructor(z){this.scene=z,this.coin=0,this.OnCompleteMoveCount=0,this.isGameOver=!1,this.highScore=this.getHighScore(),this.cardManager=new cH(z),this.emitter=new Hp,this.animationManager=new vH(z)}setItemEquipment(z){this.itemEquipment=z}moveCharacter(z){if(this.animationManager.isProcessing||this.OnCompleteMoveCount!==0)return;const W=this.cardManager.getCharacterIndex();if(jn.isValidMove(W,z)){const j=this.cardManager.getCard(z);if(j&&j.CardEffect&&j.CardEffect()){this.emitter.emit("completeMove");return}if(this.isGameOver)return;const it=jn.calculateMovement(W,z),ht=this.cardManager.getCard(z);ht&&ht.ProgressDestroy&&ht.ProgressDestroy(),this.animationManager.startMoveAnimation(it,()=>{it.forEach(g=>{this.cardManager.moveCard(g.from,g.to)});const C=it[it.length-1].from,R=this.cardManager.cardFactory.createRandomCard(this.scene,C),s=this.cardManager.addCard(R,C);R&&s.processCreation&&s.processCreation(),this.emitter.emit("completeMove")})}}getHighScore(){const z=this.scene.stageId;let W=localStorage.getItem("highScores");if(W===null){const ht=JSON.stringify({});localStorage.setItem("highScores",ht),W=ht}return(JSON.parse(W)||{})[z||""]||0}setHighScore(z){const W=this.scene.stageId;let j=localStorage.getItem("highScores"),it={};j===null?it={}:it=JSON.parse(j)||{},W&&(it[W]=z),localStorage.setItem("highScores",JSON.stringify(it)),console.log(`GameManager: High score set for ${W}: ${z}`)}addCoin(z,W=null){var j;this.coin+=z,W&&this.itemEquipment&&this.itemEquipment.forEach(it=>{it.cooldowninning&&it.cooldowninning(W)}),this.scene&&this.scene.coinText?(this.scene.coinText.setText(`${this.coin}`),console.log(`GameManager: UI coin updated to ${this.coin}`)):console.warn(`GameManager: Cannot update coin UI - scene: ${!!this.scene}, coinText: ${!!((j=this.scene)!=null&&j.coinText)}`),console.log(`GameManager: Added ${z} coins, total: ${this.coin}`)}gameOver(){var it,ht,C;console.log("gameOver!"),this.emitter.emit("gameOver"),this.isGameOver=!0,this.scene.sellButton&&this.scene.sellButton.hideButton();const z=(C=(ht=(it=this.cardManager.CardCharacter)==null?void 0:it.constructor)==null?void 0:ht.DEFAULT)==null?void 0:C.id;if(z){let R=JSON.parse(localStorage.getItem("characterHighScores")||"{}")||{};(!R[z]||this.coin>R[z])&&(R[z]=this.coin,localStorage.setItem("characterHighScores",JSON.stringify(R)),console.log(`GameManager: New character high score for ${z}: ${this.coin}`))}this.coin>this.highScore&&(this.setHighScore(this.coin),this.highScore=this.coin,console.log(`GameManager: New high score for ${this.scene.stageId}: ${this.coin}`));const j=(parseInt(localStorage.getItem("totalCoin")||"0")||0)+this.coin;localStorage.setItem("totalCoin",j.toString()),this.animationManager.startGameOverAnimation(jn.shuffleArray(this.cardManager.getAllCards()),()=>{this.showGameOverDialog()})}showGameOverDialog(){const z=this.scene.add.container(0,0),{width:W,height:j}=this.scene.scale,it=this.scene.add.rectangle(0,0,W,j,0,.8).setOrigin(0,0).setInteractive();z.add(it);const ht=this.scene.add.container(W/2,j/2),C=this.scene.add.graphics();C.fillStyle(2033172,.95),C.lineStyle(3,6433093,1),C.fillRoundedRect(-200,-150,400,300,20),C.strokeRoundedRect(-200,-150,400,300,20),ht.add(C);const R=this.scene.add.text(0,-100,"GAME OVER",{fontSize:"32px",color:"#e74c3c",fontFamily:"Arial, sans-serif",fontStyle:"bold"});R.setOrigin(.5),ht.add(R);const s=this.scene.add.text(0,-50,`Coin: ${this.coin}`,{fontSize:"24px",color:"#cbbd1b",fontFamily:"Arial, sans-serif"});s.setOrigin(.5),ht.add(s);const g=this.scene.add.text(0,-10,`High Score: ${this.highScore}`,{fontSize:"20px",color:"#e0e0e0",fontFamily:"Arial, sans-serif"});g.setOrigin(.5),ht.add(g);const y=this.scene.add.text(0,50,"Restart",{fontSize:"24px",color:"#2ecc71",fontFamily:"Arial, sans-serif",fontStyle:"bold"});y.setOrigin(.5),y.setInteractive(),y.on("pointerdown",()=>{this.scene.scene.restart(),z.destroy()}),y.on("pointerover",()=>{y.setTint(13750737)}),y.on("pointerout",()=>{y.clearTint()}),ht.add(y);const u=this.scene.add.text(0,100,"Menu",{fontSize:"24px",color:"#f0f0f0",fontFamily:"Arial, sans-serif",fontStyle:"bold"});u.setOrigin(.5),u.setInteractive(),u.on("pointerdown",()=>{this.scene.scene.start("MenuScene"),z.destroy()}),u.on("pointerover",()=>{u.setTint(13750737)}),u.on("pointerout",()=>{u.clearTint()}),ht.add(u),z.add(ht),this.scene.add.existing(z),z.setDepth(100)}}class Yi{constructor(z,W,j,it,ht,C,R=5){this.name=z,this.nameId=W,this.image=j,this._power=it,this._cooldown=ht,this.description=C,this.level=0,this.maxLevel=R}effect(z){return this.gameManager=z,this.gameManager.animationManager.startItemAnimation(this.image,()=>{console.log(`S dng item: ${this.nameId}`)}),!1}get power(){return this._power*(1+this.level*.2)}get cooldown(){return Math.max(0,this._cooldown-this.level*.5)}isUpgrade(){return this.level<this.maxLevel}upgrade(){return this.isUpgrade()?(this.level++,!0):!1}getPrice(){return this.level===0?1e3:this.level*100}getInfo(){return{name:this.name,nameId:this.nameId,image:this.image,power:this.power,cooldown:this.cooldown,description:this.description,level:this.level,maxLevel:this.maxLevel}}}class gH extends Yi{constructor(){super("Black Hole","black-hole","black-hole",0,2,"To h en ht tt c enemy",8)}get power(){return this._power*(1+this.level*.3)}get cooldown(){return Math.max(1,this._cooldown-this.level*.8)}effect(z){return z.animationManager.startItemAnimation(this.image,()=>{}),z.animationManager.startShuffleAllCardsAnimation(()=>{}),!0}}class mH extends Yi{constructor(){super("Catalyst","catalyst","catalyst",10,10,"Tng sc mnh php thut",6)}get power(){return this._power*(1+this.level*.25)}effect(z){var ht;const j=z.cardManager.cardFactory.weaponClasses,it=j[Math.floor(Math.random()*j.length)];return(ht=z.cardManager.CardCharacter)==null||ht.setWeapon({default:it==null?void 0:it.DEFAULT,durability:this.power}),!0}}class xH extends Yi{constructor(){super("Claw","claw","claw",5,2,"Tn cng vi 40 damage",5)}get power(){return this._power*(1+this.level*.2)}get cooldown(){return Math.max(0,this._cooldown-this.level*.2)}effect(z){let W=0;return z.cardManager.getAllCards().forEach(j=>{(j==null?void 0:j.type)==="enemy"&&W++}),W===0?!1:(z.animationManager.startItemAnimation(this.image,()=>{z.cardManager.getAllCards().forEach(j=>{(j==null?void 0:j.type)==="enemy"&&j.takeDamage&&j.takeDamage(this.power)})}),!0)}}class yH extends Yi{constructor(){super("Cooldown","cooldown","cooldown",8,3,"Gim cooldown ca skill",7)}get power(){return this._power+this.level*5}effect(z){var j;let W=0;return(j=z.itemEquipment)==null||j.forEach(it=>{var ht;it.cooldown>0&&((ht=it.item)==null?void 0:ht.nameId)!==this.nameId?typeof it.cooldowninning=="function"&&it.cooldowninning(this.power):W++}),W===3?!1:(z.animationManager.startItemAnimation(this.image,()=>{}),!0)}}class CH extends Yi{constructor(){super("Corruption","corruption","corruption",8,3,"Gy corruption 80 damage",6)}get power(){return this._power*(1+this.level*.25)}get cooldown(){return Math.max(1,this._cooldown-this.level*.5)}}class SH extends Yi{constructor(){super("Healing Potion","healing-potion","healing-potion",2,18,"Hi phc 2 HP",10)}get power(){return this._power*(1+this.level*.15)}effect(z){const W=z.cardManager.CardCharacter;return(W==null?void 0:W.hp)>=(W==null?void 0:W.getMaxHP())?!1:(z.animationManager.startItemAnimation(this.image,()=>{W==null||W.heal(this.power)}),!0)}}class TH extends Yi{constructor(){super("Refinement","refinement","refinement",10,2,"Tinh ch item  tng sc mnh",6)}get power(){return this._power+this.level*10}effect(z){let W=0;return z.cardManager.getAllCards().forEach(j=>{(j==null?void 0:j.type)==="weapon"&&W++}),W===0?!1:(z.animationManager.startItemAnimation(this.image,()=>{z.cardManager.getAllCards().forEach(j=>{(j==null?void 0:j.type)==="weapon"&&j.refinement&&j.refinement(this.power)})}),!0)}}class EH extends Yi{constructor(){super("Repair","repair","repair",10,1,"Sa cha item b hng",5)}get power(){return this._power+this.level*20}effect(z){const W=z.cardManager.CardCharacter,j=W==null?void 0:W.weapon;return j&&j.durability>0?(z.animationManager.startItemAnimation(this.image,()=>{W==null||W.repair(this.power)}),!0):!1}}class PH extends Yi{constructor(){super("Seasoning","seasoning","seasoning",10,10,"Gia v  tng hiu qu item",6)}get power(){return this._power+this.level*15}effect(z){let W=0;return z.cardManager.getAllCards().forEach(j=>{(j==null?void 0:j.type)==="food"&&W++}),W===0?!1:(z.animationManager.startItemAnimation(this.image,()=>{z.cardManager.getAllCards().forEach(j=>{(j==null?void 0:j.type)==="food"&&j.seasoning&&j.seasoning(this.power)})}),!0)}}class MH extends Yi{constructor(){super("Sword","sword","sword",10,1,"V kh mnh vi 60 damage",5)}get power(){return this._power*(1+this.level*.25)}get cooldown(){return Math.max(0,this._cooldown-this.level*.3)}effect(z){var ht;const j=z.cardManager.cardFactory.weaponClasses,it=j[Math.floor(Math.random()*j.length)];return(ht=z.cardManager.CardCharacter)==null||ht.setWeapon({default:it==null?void 0:it.DEFAULT,durability:this.power}),!0}}class wH extends Yi{constructor(){super("Tax Waiver","tax-waiver","tax-waiver",10,0,"Min thu cho item",5),this.active=!1}get power(){return this._power+this.level*25}effect(z){return this.active?!1:(this.active=!0,this.gameManager=z,z.animationManager.startItemAnimation(this.image,()=>{var W;(W=z.emitter)==null||W.on("gameOver",this.TaxWaiverEffect.bind(this),10)}),!0)}TaxWaiverEffect(){var W,j;const z=Math.ceil((((W=this.gameManager)==null?void 0:W.coin)??0)*(this.power/100));(j=this.gameManager)==null||j.addCoin(z)}}class AH extends Yi{constructor(){super("Toxic","toxic","toxic",1,2,"Gy c 30 damage mi turn trong 2 turn",5)}get power(){return this._power*(1+this.level*.2)}get cooldown(){return Math.max(1,this._cooldown-this.level*.2)}effect(z){let W=0;return z.cardManager.getAllCards().forEach(j=>{(j==null?void 0:j.type)==="enemy"&&W++}),W===0?!1:(z.animationManager.startItemAnimation(this.image,()=>{z.cardManager.getAllCards().forEach(j=>{(j==null?void 0:j.type)==="enemy"&&j.setPoisoning&&j.setPoisoning()})}),!0)}}const Rs=class Rs{constructor(){if(Rs.instance)return Rs.instance;this.items=new Map,this.initializeItems(),Rs.instance=this}static getInstance(){return Rs.instance||(Rs.instance=new Rs),Rs.instance}initializeItems(){this.items.set("healing-potion",SH),this.items.set("toxic",AH),this.items.set("claw",xH),this.items.set("cooldown",yH),this.items.set("sword",MH),this.items.set("catalyst",mH),this.items.set("refinement",TH),this.items.set("seasoning",PH),this.items.set("repair",EH),this.items.set("black-hole",gH),this.items.set("tax-waiver",wH),this.items.set("corruption",CH)}createItem(z){const W=this.items.get(z);return W?new W:null}getItemKeys(){return Array.from(this.items.keys())}};Rs.instance=null;let $p=Rs;const Kp=$p.getInstance();class RH extends Kt.Scene{constructor(){super({key:"GameScene"})}init(z){const{stageId:W}=z||{};this.stageId=W||"dungeon_abyss_chamber";const j=Ka.find(it=>it.stageId===this.stageId);this.dungeonStageName=(j==null?void 0:j.name)||"",console.log("GameScene: Dungeon data:",this.dungeonStageName),this.gameManager=new pH(this)}create(){const{width:z,height:W}=this.scale;this.add.image(z/2,W/2,"background"),this.add.rectangle(z/2,W/2,z,W,0).setAlpha(.5),this.createUI(),this.createDeck(),this.sellButton=this.createSellWeapon()}createUI(){const{width:z,height:W}=this.scale,j=this.add.text(z*.95,W*.05,"",{fontSize:"32px",color:"#ffffff",stroke:"#2d0d21",strokeThickness:2});j.setInteractive({useHandCursor:!0}),j.setOrigin(.5),j.on("pointerover",()=>{j.setScale(1.1),j.setTint(13750737)}),j.on("pointerout",()=>{j.setScale(1),j.clearTint()}),j.on("pointerdown",()=>{this.scene.start("MenuScene")}),this.stageText=this.add.text(z*.5,W*.035,this.dungeonStageName,{fontSize:"30px",color:"#FFD700",fontFamily:"Arial, sans-serif",fontStyle:"bold",stroke:"#E69500",strokeThickness:2}).setOrigin(.5),this.highScoreText=this.add.text(z*.5,W*.07,`High Score: ${this.gameManager.highScore}`,{fontSize:"20px",color:"#ffffff",fontFamily:"Arial, sans-serif"}).setOrigin(.5).setAlpha(.8),this.coinText=this.add.text(z*.75,W*.13,`${this.gameManager.coin}`,{fontSize:"32px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",strokeThickness:2}),this.itemEquipment=[];const it=this.createItemButtonsFromStorage(),ht=90,C=z*.18;it.forEach((R,s)=>{this.itemEquipment.push(this.createItemButton(C+s*ht,W*.15,R))}),this.gameManager.setItemEquipment(this.itemEquipment)}createDeck(){this.gameManager.cardManager.initializeCreateDeck()}useItem(z,W,j,it){const{width:ht,height:C}=this.scale;if(z.effect(this.gameManager))W.cooldown=z.cooldown,W.setText(W.cooldown.toString()),W.cooldown>0&&(W.setVisible(!0),j.setTint(9408399),it.disableInteractive());else{if(console.log("Item khng th s dng"),this.textItemNotUse&&this.textItemNotUse.active)return;this.textItemNotUseTimeout&&clearTimeout(this.textItemNotUseTimeout),this.textItemNotUse=this.add.text(ht*.5,C*.5,"Item cha  iu kin  s dng",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",backgroundColor:"#000000",padding:{x:25,y:12},stroke:"#000000",strokeThickness:5}).setOrigin(.5).setDepth(2e3).setAlpha(.7),this.textItemNotUseTimeout=setTimeout(()=>{this.textItemNotUse&&(this.textItemNotUse.destroy(),this.textItemNotUse=void 0),this.textItemNotUseTimeout=void 0},1e3)}}createItemButton(z,W,j){const it=this.add.container(z,W),ht=68,C=this.add.graphics();C.fillStyle(7171437,1),C.fillRoundedRect(-ht/2,-ht/2,ht,ht,20),C.setAlpha(.5);const R=this.add.image(0,0,"item",j.image);R.setDisplaySize(80,80);const s=this.add.text(ht/2,-ht/2,j.cooldown.toString(),{fontSize:"24px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",stroke:"#000000",strokeThickness:5});return s.setOrigin(.5),s.cooldown=j.cooldown,it.add([C,R,s]),it.setSize(ht,ht),it.setInteractive(),it.on("pointerover",()=>{it.setScale(1.1)}),it.on("pointerout",()=>{it.setScale(1)}),it.on("pointerdown",()=>{this.useItem(j,s,R,it)}),j.cooldown>0?(s.setVisible(!0),R.setTint(9408399),it.disableInteractive()):(s.setVisible(!1),R.clearTint(),it.setInteractive()),{item:j,itemButton:it,cooldown:()=>s.cooldown,cooldowninning:g=>{s.cooldown=Math.max(0,s.cooldown-g),s.setText(s.cooldown.toString()),s.cooldown<=0&&(s.setVisible(!1),R.clearTint(),it.setInteractive())}}}createItemButtonsFromStorage(){try{const z=localStorage.getItem("equipment");if(z&&z!=="null"){const W=JSON.parse(z);if(Array.isArray(W)&&W.length>0){const j=W.map(it=>Kp.createItem(it));return console.log("Item buttons created from equipment:",j),j}}return console.log("No equipment data found, returning empty item buttons"),[]}catch(z){return console.error("Error creating item buttons from storage:",z),[]}}createSellWeapon(){const{width:z,height:W}=this.scale,j=z*.75,it=W*.95,ht=this.add.container(j,it),C=this.add.graphics();C.fillStyle(334118,.5),C.fillRoundedRect(-90,-30,180,60,5),C.lineStyle(2,13750737,.5),C.strokeRoundedRect(-90,-30,180,60,5);const R=this.add.text(16,0,"",{fontSize:"32px",color:"#ffffff",fontStyle:"bold",fontFamily:"Arial, sans-serif",stroke:"#000000",strokeThickness:2}).setOrigin(.5),s=this.add.text(32,-15,"0",{fontSize:"24px",color:"#ffffff",fontStyle:"bold",fontFamily:"Arial, sans-serif"}).setOrigin(.5),g=this.add.image(-40,0,"").setDisplaySize(6,6);return ht.add([C,g,R,s]),ht.setInteractive(new Kt.Geom.Rectangle(-90,-30,180,60),Kt.Geom.Rectangle.Contains),ht.on("pointerdown",()=>{var l;const y=(l=this.gameManager.cardManager.CardCharacter)==null?void 0:l.weapon;(y==null?void 0:y.durability)>0&&(console.log("Bn v kh:",y.default.id),this.gameManager.addCoin(y.durability),this.gameManager.cardManager.CardCharacter.weapon=null,this.gameManager.cardManager.CardCharacter.weaponDisplay.updateText(0),this.gameManager.cardManager.CardCharacter.weaponBadgeDisplay.updateTexture(""),this.sellButton.hideButton())}),ht.on("pointerover",()=>{ht.setScale(1.1)}),ht.on("pointerout",()=>{ht.setScale(1)}),ht.setVisible(!1),{updateButton:()=>{var u;const y=(u=this.gameManager.cardManager.CardCharacter)==null?void 0:u.weapon;if((y==null?void 0:y.durability)>0){ht.setVisible(!0);const l=y.durability;s.setText(l.toString()),g.setTexture("weapon-"+y.default.category+"-badge",y.default.id+"-badge")}},hideButton:()=>{ht.setVisible(!1)}}}}class Qa{static createGradientText(z,W){const{text:j="text default",x:it=0,y:ht=0,width:C,height:R,fontSize:s,fontFamily:g="Arial",gradientColors:y=["#cbbd1bff","#c57826ff","#8c3c0eff"],strokeWidth:u}=W,l=W.strokeColor??"#1f0612ff",h=typeof l=="number"?"#"+l.toString(16).padStart(6,"0"):l,r=C||z.scale.width,o=R||z.scale.height,d=Math.max(100,Math.floor(r*.8)),a=Math.max(50,Math.floor(o*.15)),f=s||Math.max(32,Math.min(64,Math.floor(d/10))),v=u||Math.max(2,Math.floor(f/18)),c=`gradientText_${j}`;if(!z.textures.exists(c)){const m=z.textures.createCanvas(c,d,a),T=m.context;T.clearRect(0,0,d,a);const E=T.createLinearGradient(0,0,0,a);E.addColorStop(0,y[0]),E.addColorStop(.5,y[1]),E.addColorStop(1,y[2]),T.font=`bold ${f}px ${g}`,T.textAlign="center",T.textBaseline="middle",T.lineWidth=v,T.strokeStyle=h,T.strokeText(j,d/2,a/2),T.fillStyle=E,T.fillText(j,d/2,a/2),m.refresh()}return z.add.image(it,ht,c).setOrigin(.5)}static createGameTitle(z,W,j,it){return this.createGradientText(z,{text:W,x:j,y:it,gradientColors:["#cbbd1bff","#c57826ff","#8c3c0eff"],strokeColor:"#1f0612ff"})}}class Xd{static createHeaderUI(z,W,j){const it=localStorage.getItem("totalCoin")||"0",ht=z.add.text(W*.05,j*.05,` : ${it}`,{fontSize:"32px",color:"#ffffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",stroke:"#000000ff",strokeThickness:2}),C=z.add.text(W*.935,j*.065,"",{fontSize:"32px",fontFamily:"Arial, sans-serif"}).setOrigin(.5,.5);return C.setInteractive({useHandCursor:!0}),C.on("pointerover",()=>{z.tweens.add({targets:C,rotation:Math.PI*2,duration:500,ease:"Power2"})}),C.on("pointerdown",()=>{console.log("Settings button c click!"),z.scene.start("SettingsScene")}),{updateCoinDisplay:R=>{ht.setText(` : ${R}`)}}}}const X1=[{id:"eula",name:"Eula",description:"Eula  n thn ca thy quyn, i din cho s cn bng gia lc lng v tnh cm. Bn ngoi l v thn y sc mnh, nhng bn trong l ngi ph n y tnh cm v nhy cm.",hp:10,element:"cryo"},{id:"furina",name:"Furina",description:"Furina  n thn ca thy quyn, i din cho s cn bng gia lc lng v tnh cm. Bn ngoi l v thn y sc mnh, nhng bn trong l ngi ph n y tnh cm v nhy cm.",hp:12,element:"hydro"},{id:"mavuika",name:"Mavuika",description:"Mavuika  Ha Thn Natlan, biu tng ca sc mnh v  ch bt khut. Ngn la trong nng chy rc nh tinh thn chin binh, soi sng con ng t do v kht vng vnh cu.",hp:11,element:"pyro"},{id:"nahida",name:"Nahida",description:"Nahida  Tiu Vng Kusanali, v Tho Thn b nh ca Sumeru. Vi tri tim thun khit v tr tu hin ha, nng mang kht vng dn dt nhn loi n s khai sng v t do.",hp:9,element:"dendro"},{id:"raiden",name:"Raiden",description:"Raiden Shogun  vnh hng thng tr Inazuma, kim thn uy nghim vi quyt tm bt dit. Bn ngoi lnh lng nhng n su l kht vng gi trn li ha v bo v thn dn.",hp:10,element:"electro"},{id:"venti",name:"Venti",description:"Venti  nh th du ca t do, chnh l Phong Thn Mondstadt. Dng v nghch ngm v phng khong, nhng bn trong l v thn nhn t lun dng m nhc  xoa du lng ngi.",hp:8,element:"anemo"},{id:"zhongli",name:"Zhongli",description:"Zhongli  hin gi tao nh, thc cht l Nham Thn Liyue. Vi tr tu hng ngn nm v phong thi im tnh, ng l hin thn ca vng bn, mang gnh nng lch s nng n.",hp:10,element:"geo"}];class LH extends Kt.Scene{constructor(){super({key:"MenuScene"}),this.cards=X1}preload(){}create(){const{width:z,height:W}=this.scale;this.add.image(z/2,W/2,"background").setDisplaySize(z,W),Xd.createHeaderUI(this,z,W),Qa.createGameTitle(this,"DUNGEON CARD",z/2,W*.18),this.createCardSpreadContainer(z/2,W*.5),this.createButton(z/2-z*.3,W*.8,"library","Th vin","LibraryScene"),this.createButton(z/2,W*.8,"compass","Thm him","MapScenes"),this.createButton(z/2+z*.3,W*.8,"equip","Trang b","EquipScene");const it=this.add.text(z/2,W*.95,"Test dev",{fontSize:"24px",color:"#95a5a6",fontFamily:"Arial",stroke:"#2c3e50",strokeThickness:1}).setOrigin(.5);it.on("pointerdown",()=>{this.scene.stop("GameScene"),this.scene.start("LoadingScene",{targetScene:"GameScene"})}),it.setInteractive({useHandCursor:!0}),it.on("pointerover",()=>{it.setStyle({color:"#7f8c8d"})}),it.on("pointerout",()=>{it.setStyle({color:"#95a5a6"})})}createButton(z,W,j,it,ht){const C=this.add.container(z,W),R=this.add.image(0,20,"item",j);R.setDisplaySize(180,180);const s=this.add.text(0,-80,it,{fontSize:"28px",color:"#ffffffff",fontFamily:"Arial",stroke:"#000000ff",strokeThickness:2}).setOrigin(.5);s.setAlpha(0),C.add([R,s]),C.setInteractive(new Kt.Geom.Rectangle(-90,-90,180,180),Kt.Geom.Rectangle.Contains),C.on("pointerdown",()=>{this.scene.start("LoadingScene",{targetScene:ht})}),C.on("pointerover",()=>{this.tweens.add({targets:s,alpha:1,duration:200,ease:"Power2"}),C.setScale(1.1)}),C.on("pointerout",()=>{this.tweens.add({targets:s,alpha:0,duration:200,ease:"Power2"}),C.setScale(1)})}createIndividualCard(z,W,j,it,ht,C){const R=(z-1)*(j+ht),s=Math.abs(z-1)*10,g=W.endsWith("-sprite"),y=this.add.graphics();y.lineStyle(4,g?14467183:16777215,1),y.strokeRoundedRect(-(j+2)/2,-(it+2)/2,j+2,it+2,20);let u;g?u=Za.CharacterAnimation(this,0,0,W,j,it):u=this.add.image(0,0,"character",W).setDisplaySize(j,it);const l=this.add.container(R,s);return z===1&&(l.setScale(1.02),l.setPosition(R,s-10)),l.add([y,u]),l.setRotation(Kt.Math.DegToRad(C[z])),l}createCardSpreadContainer(z,W){const j=this.add.container(z,W),it=260,ht=445.7142,C=-180;let R=[this.cards[this.cards.length-1].id,this.cards[0].id,this.cards[1].id],s=localStorage.getItem("selectedCharacter");if(s!==null)try{const l=s,h=this.cards.findIndex(r=>r.id===l);if(h!==-1){R=[this.cards[(h-1+this.cards.length)%this.cards.length].id,this.cards[h].id,this.cards[(h+1)%this.cards.length].id];let r=localStorage.getItem("characterLevel");if(r!==null)try{const o=JSON.parse(r);R=R.map(d=>{const a=o[d];return a&&a>2?d+"-sprite":d})}catch(o){console.warn("Khng th parse CharacterLevel:",o)}}else console.warn("Khng tm thy card")}catch{console.warn("Khng tm thy card")}else console.warn("Khng tm thy card");const g=[-15,0,15],y=[0,2,1],u=[];y.forEach(l=>{const h=this.createIndividualCard(l,R[l],it,ht,C,g);j.add(h),u.push(h)}),j.setInteractive(new Kt.Geom.Rectangle(-200,-200,400,400),Kt.Geom.Rectangle.Contains),j.on("pointerover",()=>{const l=[-18,18,0],h=[-120,120,0],r=[0,0,-30],o=[1.02,1.02,1.02];u.forEach((d,a)=>{const f=Kt.Math.DegToRad(l[a]);this.tweens.add({targets:d,x:h[a],y:r[a],rotation:f,scale:o[a],duration:300,ease:"Power2"})})}),j.on("pointerout",()=>{const l=[-15,15,0],h=[-80,80,0],r=[0,0,-20],o=[1,1,1.02];u.forEach((d,a)=>{const f=Kt.Math.DegToRad(l[a]);this.tweens.add({targets:d,rotation:f,x:h[a],y:r[a],scale:o[a],duration:300,ease:"Power2"})})}),j.on("pointerdown",()=>{this.scene.start("LoadingScene",{targetScene:"SelectCharacterScene"})})}}class bH extends Kt.Scene{constructor(){super({key:"EquipScene"}),this.equipmentSlots=new Array(3).fill(null).map(()=>({item:null,image:null}))}preload(){}create(){const{width:z,height:W}=this.scale;this.add.image(z/2,W/2,"background"),this.headerUI=Xd.createHeaderUI(this,z,W),Qa.createGameTitle(this,"TRANG B",z/2,W*.18),this.createItemGrid(z,W),this.createEquipmentSlots(z,W),this.createBackButton(z,W),this.initializeEquipmentSlots()}wake(){console.log("EquipScene woke up - reinitializing equipment slots"),this.initializeEquipmentSlots()}createItemGrid(z,W){const R=Kp.getItemKeys();this.listItems=new Map,R.forEach(o=>{const d=Kp.createItem(o);d&&this.listItems.set(o,{item:d,container:null})});const s=W*.25,g=580,y=440,u=z/2,l=s+400/2,h=this.add.graphics();h.fillStyle(0,.5),h.fillRoundedRect(-g/2,-y/2,g,y,20),h.strokeRoundedRect(-g/2,-y/2,g,y,20);const r=this.add.container(u,l);r.add(h);for(let o=0;o<3;o++)for(let d=0;d<4;d++){const a=o*4+d,f=R[a];if(!f)continue;const v=(d-3/2)*140,c=(o-2/2)*140,p=this.add.container(v,c),m=this.add.graphics();m.fillStyle(8421504,.3),m.fillRoundedRect(-120/2,-120/2,120,120,15),m.strokeRoundedRect(-120/2,-120/2,120,120,15);const T=this.add.image(0,0,"item",f);T.setDisplaySize(120,120),T.setOrigin(.5),p.add([m,T]),r.add(p);const E=this.listItems.get(f);E&&(E.container=p),p.setInteractive(new Kt.Geom.Rectangle(-120/2,-120/2,120,120),Kt.Geom.Rectangle.Contains),p.on("pointerover",()=>{p.setScale(1.1)}),p.on("pointerout",()=>{p.setScale(1)}),p.on("pointerdown",()=>{console.log(`Item clicked: ${f} at Row ${o}, Col ${d}`);const P=this.listItems.get(f);P&&P.item&&this.showItemDialog(P.item,!1)})}}createEquipmentSlots(z,W){const C=W*.7,R=z/2,s=C,g=this.add.container(R,s);for(let y=0;y<3;y++){const u=(y-1)*150,l=this.add.container(u,0),h=this.add.graphics();h.fillStyle(8421504,.5),h.lineStyle(2,0,.5),h.fillRoundedRect(-120/2,-120/2,120,120,10),h.strokeRoundedRect(-120/2,-120/2,120,120,10);let r;this.equipmentSlots[y]&&this.equipmentSlots[y].item?(r=this.add.image(0,0,"item",this.equipmentSlots[y].item.image),r.setDisplaySize(120,120)):(r=this.add.image(0,0,"item","equipment-slot"),r.setDisplaySize(120*.8,120*.8),r.setAlpha(.3)),r.setOrigin(.5),l.add([h,r]),g.add(l),this.equipmentSlots[y]={item:null,image:r},l.setInteractive(new Kt.Geom.Rectangle(-120/2,-120/2,120,120),Kt.Geom.Rectangle.Contains),l.on("pointerover",()=>{this.equipmentSlots[y]&&this.equipmentSlots[y].item&&l.setScale(1.1)}),l.on("pointerout",()=>{this.equipmentSlots[y]&&this.equipmentSlots[y].item&&l.setScale(1)}),l.on("pointerdown",()=>{console.log(`Equipment slot clicked: Column ${y}`),this.equipmentSlots[y]&&this.equipmentSlots[y].item&&this.showItemDialog(this.equipmentSlots[y].item,!0)})}}addEquipmentSlot(z){const W=this.equipmentSlots.findIndex(j=>j.item===null);if(W!==-1){this.equipmentSlots[W].item=z;const j=this.equipmentSlots[W];return j.image&&(j.image.setTexture("item",z.image),j.image.setDisplaySize(120,120),j.image.setAlpha(1)),W}return null}getEquipmentSlot(z){return z>=0&&z<3?this.equipmentSlots[z]:(console.warn("Equipment slot index out of bounds"),null)}clearEquipmentSlot(z){const W=this.equipmentSlots.findIndex(j=>j&&j.item&&j.item.nameId===z);if(W!==-1){const j=this.equipmentSlots[W];j&&(j.item=null,j.image&&(j.image.setTexture("item","equipment-slot"),j.image.setDisplaySize(120*.8,120*.8),j.image.setAlpha(.3)))}else console.warn(`Item with nameId '${z}' not found in equipment slots`)}isFullEquipmentSlot(){return this.equipmentSlots.every(z=>z&&z.item!==null)}showItemDialog(z,W=!1){const{width:j,height:it}=this.scale,ht=this.add.graphics();ht.fillStyle(0,.8),ht.fillRect(0,0,j,it);const C=Math.floor(j*.9),R=500,s=j/2,g=it/2,y=this.add.container(s,g),u=this.add.graphics();u.fillStyle(2952481,.98),u.lineStyle(3,9852778,1),u.fillRoundedRect(-C/2,-R/2,C,R,20),u.strokeRoundedRect(-C/2,-R/2,C,R,20);const l=this.add.text(0,-R/2+30,`${z.name}`,{fontSize:"32px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold"}).setOrigin(.5),h=this.add.text(0,-R/2+60,`Level: ${z.level}`,{fontSize:"16px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold"}).setOrigin(.5),r=this.add.image(0,-120,"item",z.image);r.setDisplaySize(180,180),r.setOrigin(.5);const o=this.add.text(0,0,z.description,{fontSize:"24px",color:"#ffffff",fontFamily:"Arial, sans-serif",lineSpacing:10}).setOrigin(.5),d=this.add.graphics(),a=180,f=40,v=-120,c=80;d.fillStyle(9852778,.9),d.lineStyle(2,2033172,1),d.fillRoundedRect(v-a/2,c-f/2,a,f,10),d.strokeRoundedRect(v-a/2,c-f/2,a,f,10);const p=this.add.text(v,c,`Power : ${z.power}`,{fontSize:"18px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold"}).setOrigin(.5),m=this.add.graphics(),T=180,E=40,P=120,w=80;m.fillStyle(9852778,.9),m.lineStyle(2,2033172,1),m.fillRoundedRect(P-T/2,w-E/2,T,E,10),m.strokeRoundedRect(P-T/2,w-E/2,T,E,10);const A=this.add.text(P,w,`Cooldown : ${z.cooldown}`,{fontSize:"18px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold"}).setOrigin(.5),b=this.add.container(0,R/2-50),O=this.add.text(-200,-42,`${z.getPrice()}`,{fontSize:"20px",color:"#ffffff",fontStyle:"bold",fontFamily:"Arial, sans-serif"}).setOrigin(.5);O.setAlpha(0);const I=this.add.text(-200,0,z.level===0?"UNLOCK":z.isUpgrade()?"UPGRADE":"LEVEL MAX",{fontSize:"20px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",backgroundColor:z.isUpgrade()?"#622945":"#45162c",padding:{x:25,y:12}}).setOrigin(.5);I.setStroke("#45162c",2),z.isUpgrade()?(I.setInteractive({useHandCursor:!0}),I.on("pointerover",()=>{I.setScale(1.1),O.setAlpha(1)}),I.on("pointerout",()=>{I.setScale(1),O.setAlpha(0)}),I.on("pointerdown",()=>{z.upgrade()&&(o.setText(z.description),p.setText(`Power : ${z.power}`),A.setText(`Cooldown : ${z.cooldown}`),h.setText(`Level: ${z.level}`),O.setText(`${z.getPrice()}`),z.isUpgrade()?z.level>0&&I.setText("UPGRADE"):(I.setText("LEVEL MAX"),I.setStyle({backgroundColor:"#45162c"}),I.disableInteractive(),I.off("pointerover"),I.off("pointerout"),I.off("pointerdown"),O.setAlpha(0)))})):I.disableInteractive();const D=this.add.text(0,0,W?"DESELECT":"SELECT",{fontSize:"20px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",backgroundColor:"#622945",padding:{x:25,y:12}}).setOrigin(.5);D.setStroke("#45162c",2),!W&&this.isFullEquipmentSlot()?D.setVisible(!1):(D.setInteractive({useHandCursor:!0}),D.on("pointerover",()=>D.setScale(1.1)),D.on("pointerout",()=>D.setScale(1)),D.on("pointerdown",()=>{if(console.log(`Select item: ${z.name}`),W){this.clearEquipmentSlot(z.nameId);const N=this.listItems.get(z.nameId);N&&N.container&&N.container.setVisible(!0),ht.destroy(),y.destroy(),this.input.keyboard.off("keydown-ESC")}else{this.addEquipmentSlot(z);const N=this.listItems.get(z.nameId);N&&N.container&&N.container.setVisible(!1),ht.destroy(),y.destroy(),this.input.keyboard.off("keydown-ESC")}}));const B=this.add.text(200,0,"CLOSE",{fontSize:"20px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",backgroundColor:"#622945",padding:{x:25,y:12}}).setOrigin(.5);B.setStroke("#45162c",2),B.setInteractive({useHandCursor:!0}),B.on("pointerover",()=>B.setScale(1.1)),B.on("pointerout",()=>B.setScale(1)),B.on("pointerdown",()=>{ht.destroy(),y.destroy(),this.input.keyboard.off("keydown-ESC")}),I&&(b.add(I),b.add(O)),b.add(D),b.add(B);const k=[u,l,h,r,o,d,p,m,A,b];y.add(k),ht.setInteractive(new Kt.Geom.Rectangle(0,0,j,it),Kt.Geom.Rectangle.Contains),this.input.keyboard.on("keydown-ESC",()=>{ht.destroy(),y.destroy(),this.input.keyboard.off("keydown-ESC")})}createBackButton(z,W){const j=this.add.text(z*.5,W*.9,"SELECT",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",backgroundColor:"#622945",padding:{x:25,y:12}}).setOrigin(.5);j.setInteractive({useHandCursor:!0}),j.on("pointerover",()=>{j.setScale(1.1),j.setTint(13750737)}),j.on("pointerout",()=>{j.setScale(1),j.clearTint()}),j.on("pointerdown",()=>{const it=this.equipmentSlots.filter(C=>C&&C.item&&C.item.nameId).map(C=>C.item.nameId),ht=it.length>0?it:null;localStorage.setItem("equipment",JSON.stringify(ht)),this.scene.start("MenuScene")})}initializeEquipmentSlots(){try{const z=localStorage.getItem("equipment");if(z&&z!=="null"){const W=JSON.parse(z);Array.isArray(W)&&W.length>0?(this.resetEquipmentSlots(),W.forEach(j=>{if(j&&this.listItems.has(j)){const it=this.listItems.get(j);it&&it.item&&(this.addEquipmentSlot(it.item),it.container&&it.container.setVisible(!1))}}),console.log("Equipment slots initialized from localStorage:",W)):this.resetEquipmentSlots()}else this.resetEquipmentSlots()}catch(z){console.error("Error initializing equipment slots:",z),this.resetEquipmentSlots()}}resetEquipmentSlots(){this.listItems.forEach(z=>{z.container&&z.container.setVisible(!0)});for(let z=0;z<this.equipmentSlots.length;z++)this.equipmentSlots[z]&&this.equipmentSlots[z].image&&(this.equipmentSlots[z].item=null,this.equipmentSlots[z].image.setTexture("item","equipment-slot"),this.equipmentSlots[z].image.setDisplaySize(120*.8,120*.8),this.equipmentSlots[z].image.setAlpha(.3))}}const OH=[{id:"sword-steampunk",name:"Sword Steampunk",type:"weapon",description:"Sword Steampunk - Kim huy hong qu gi tng sc mnh v may mn.",category:"sword",rarity:4,className:"SwordSteampunk"},{id:"sword-forest",name:"Sword Forest",type:"weapon",description:"Sword Forest - Kim rng t nhin tng sc mnh v kh nng phng th.",category:"sword",rarity:3,className:"SwordForest"},{id:"sword-skyward",name:"Sword Skyward",type:"weapon",description:"Sword Skyward - Kim bu tri thing ling tng sc mnh v tc .",category:"sword",rarity:4,className:"SwordSkyward"},{id:"sword-splendor",name:"Sword Splendor",type:"weapon",description:"Sword Splendor - Kim huy hong qu gi tng sc mnh v may mn.",category:"sword",rarity:4,className:"SwordSplendor"},{id:"sword-traveler",name:"Sword Traveler",type:"weapon",description:"Sword Traveler - Kim l khch tng sc mnh v kh nng thch ng.",category:"sword",rarity:4,className:"SwordTraveler"},{id:"sword-sacrificial",name:"Sword Sacrificial",type:"weapon",description:"Sword Sacrificial - Kim hy sinh mnh m nhng  bn thp.",category:"sword",rarity:3,className:"SwordSacrificial"}],FH=[{id:"anemo-samachurl",name:"Anemo Samachurl",element:"anemo",type:"enemy",description:"Anemo Samachurl - K ch caster gi c th to gi v lm chm ngi chi.",clan:"hilichurl",rarity:3,className:"AnemoSamachurl"},{id:"electro-samachurl",name:"Electro Samachurl",element:"electro",type:"enemy",description:"Electro Samachurl - K ch caster in c th gy shock v lm chm ngi chi.",clan:"hilichurl",rarity:3,className:"ElectroSamachurl"},{id:"dendro-samachurl",name:"Dendro Samachurl",element:"dendro",type:"enemy",description:"Dendro Samachurl - K ch caster tho c th to cy v gy poison.",clan:"hilichurl",rarity:3,className:"DendroSamachurl"},{id:"geo-samachurl",name:"Geo Samachurl",element:"geo",type:"enemy",description:"Geo Samachurl - K ch caster a c th to tng v gy stun.",clan:"hilichurl",rarity:3,className:"GeoSamachurl"},{id:"hydro-samachurl",name:"Hydro Samachurl",element:"hydro",type:"enemy",description:"Hydro Samachurl - K ch caster thy c th to nc v gy wet effect.",clan:"hilichurl",rarity:3,className:"HydroSamachurl"},{id:"fighter",name:"Hilichurl Fighter",element:"physical",type:"enemy",description:"Hilichurl Fighter - K ch c bn c th tn cng ngi chi.",clan:"hilichurl",rarity:4,className:"HilichurlFighter"},{id:"hilistray-water",name:"Hilistray Water",element:"hydro",type:"enemy",description:"Hilistray Water - K ch nc, c kh nng cha lnh v to hiu ng m t.",clan:"hilichurl",rarity:2,className:"HilistrayWater"},{id:"wooden-shieldwall",name:"Wooden Shieldwall",element:"dendro",type:"enemy",description:"Wooden Shieldwall - K ch tng g, c kh nng phng th trung bnh v d b chy.",clan:"hilichurl",rarity:3,className:"WoodenShieldwall"},{id:"lawachurl",name:"Lawachurl",element:"geo",type:"enemy",description:"Lawachurl - Boss Hilichurl mnh m, c kh nng tn cng v phng th cao.",clan:"hilichurl",rarity:5,className:"Lawachurl"},{id:"rock-shieldwall",name:"Rock Shieldwall",element:"geo",type:"enemy",description:"Rock Shieldwall - K ch tng , c kh nng phng th rt cao v chng  tt.",clan:"hilichurl",rarity:4,className:"RockShieldwall"},{id:"berserker",name:"Berserker",element:"pyro",type:"enemy",description:"Berserker - K ch in cung, tn cng mnh hn khi mu thp.",clan:"hilichurl",rarity:4,className:"Berserker"},{id:"blazing",name:"Blazing",element:"pyro",type:"enemy",description:"Blazing - K ch chy lin tc, gy damage theo thi gian cho ngi chi gn .",clan:"hilichurl",rarity:3,className:"Blazing"},{id:"ice-shieldwall",name:"Ice Shieldwall",element:"cryo",type:"enemy",description:"Ice Shieldwall - K ch tng bng, c kh nng phng th cao v lm chm ngi chi.",clan:"hilichurl",rarity:4,className:"IceShieldwall"},{id:"shooter",name:"Shooter",element:"physical",type:"enemy",description:"Shooter - K ch bn cung t xa, tn cng c bn.",clan:"hilichurl",rarity:2,className:"Shooter"},{id:"crackling",name:"Crackling",element:"electro",type:"enemy",description:"Crackling - K ch n khi cht, gy damage cho ngi chi gn .",clan:"hilichurl",rarity:3,className:"Crackling"},{id:"cryo-shooter",name:"Cryo Shooter",element:"cryo",type:"enemy",description:"Cryo Shooter - K ch bn bng t xa, c th lm chm v ng bng ngi chi.",clan:"hilichurl",rarity:2,className:"CryoShooter"},{id:"electro-shooter",name:"Electro Shooter",element:"electro",type:"enemy",description:"Electro Shooter - K ch bn in t xa, c th gy shock v lm chm ngi chi.",clan:"hilichurl",rarity:2,className:"ElectroShooter"}],DH=[{id:"life-essence",name:"Life Essence",type:"food",description:"Life Essence - Tinh hoa s sng hi phc sc khe ti a v tng tt c ch s.",className:"LifeEssence"},{id:"mystique-soup",name:"Mystique Soup",type:"food",description:"Mystique Soup - Sp b n hi phc sc khe v tng sc mnh tm thi.",rarity:3,className:"MystiqueSoup"},{id:"pizza",name:"Pizza",type:"food",description:"Pizza - Bnh pizza  hi phc sc khe v tng sc mnh tn cng.",rarity:2,className:"Pizza"},{id:"roast-chicken",name:"Roast Chicken",type:"food",description:"Roast Chicken - G nng thm ngon hi phc sc khe v tng kh nng phng th.",rarity:2,className:"RoastChicken"},{id:"macarons",name:"Macarons",type:"food",description:"Macarons - Bnh ngt Php hi phc sc khe v tng tinh thn.",rarity:3,className:"Macarons"}],BH=[{id:"abyss-call",name:"AbyssCall",type:"trap",description:"AbyssCall - By gi thm enemy vo trn u khi kch hot.",className:"AbyssCall"},{id:"quicksand",name:"Quicksand",type:"trap",description:"Quicksand - By ct ln gy damage v lm chm ngi chi khi kch hot.",rarity:2,className:"Quicksand"},{id:"breathe-fire",name:"Breathe Fire",type:"trap",description:"Breathe Fire - By th la gy damage cho ngi chi khi kch hot.",rarity:2,className:"BreatheFire"}],IH=[{id:"chest",name:"Chest",type:"treasure",description:"Chest - Kho bu chnh cha nhiu loi phn thng qu gi.",rarity:4,className:"Chest"},{id:"bribery",name:"Bribery",type:"treasure",description:"Bribery - Hi l  nhn phn thng ln hn chi ph.",rarity:3,className:"Bribery"},{id:"gold-mine",name:"GoldMine",type:"treasure",description:"GoldMine - M khai thc  nhn ti nguyn.",rarity:2,className:"GoldMine"}],GH=[{id:"explosive",name:"Explosive",type:"bomb",description:"Explosive - Bom n gy damage cho tt c trong bn knh.",rarity:3,className:"Explosive"}],kH=[{type:"coin",rarity:1,name:{pyro:"Mnh V Nguyn T Ha",hydro:"Mnh V Nguyn T Thy",geo:"Mnh V Nguyn T Nham",anemo:"Mnh V Nguyn T Phong",electro:"Mnh V Nguyn T Li",cryo:"Mnh V Nguyn T Bng",dendro:"Mnh V Nguyn T Tho"},id:{pyro:"pyro-fragment",hydro:"hydro-fragment",geo:"geo-fragment",anemo:"anemo-fragment",electro:"electro-fragment",cryo:"cryo-fragment",dendro:"dendro-fragment"},description:{pyro:"Mnh V Nguyn T Ha nht c th i Xu v hi cht nng lng.",hydro:"Mnh V Nguyn T Thy nht c th i Xu v hi cht nng lng.",geo:"Mnh V Nguyn T Nham nht c th i Xu v hi cht nng lng.",anemo:"Mnh V Nguyn T Phong nht c th i Xu v hi cht nng lng.",electro:"Mnh V Nguyn T Li nht c th i Xu v hi cht nng lng.",cryo:"Mnh V Nguyn T Bng nht c th i Xu v hi cht nng lng.",dendro:"Mnh V Nguyn T Tho nht c th i Xu v hi cht nng lng."},className:"Coin"}],NH=[{id:"empty",name:"Empty",type:"empty",description:"Empty - Th trng khng c tc dng.",className:"Empty"}],zH={weapon:OH,enemy:FH,food:DH,trap:BH,treasure:IH,bomb:GH,coin:kH,empty:NH},z1=9852778,UH=2033172;class VH extends Kt.Scene{constructor(){super({key:"LibraryScene"})}preload(){this.load.image("empty","assets/images/cards/empty.webp")}create(){const{width:z,height:W}=this.scale;this.add.image(z/2,W/2,"background"),this.add.rectangle(z/2,W/2,z,W,0).setAlpha(.5),Qa.createGameTitle(this,"Library Cards",z/2,W*.12),Xd.createHeaderUI(this,z,W);const j=this.createCardPanel();this.rexUI.add.scrollablePanel({x:z/2,y:W*.52,height:W*.7,width:z*.9,scrollMode:"y",background:this.rexUI.add.roundRectangle({strokeColor:z1,radius:10}),panel:{child:j,mask:{padding:10}},slider:{track:this.rexUI.add.roundRectangle({width:20,radius:10,color:UH}),thumb:this.rexUI.add.roundRectangle({radius:13,color:z1})},mouseWheelScroller:{focus:!1,speed:.1},touchScroll:!0,touchScrollBehavior:"pan",space:{left:20,right:20,top:20,bottom:20,panel:5}}).layout().setChildrenInteractive({targets:j.children}).on("child.click",it=>{it.cardData&&this.showCardInfoDialog(it.cardData)}),this.createBackButton(z,W)}createBackButton(z,W){const j=this.add.text(z*.5,W*.9,"BACK",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",backgroundColor:"#622945",padding:{x:25,y:12}}).setOrigin(.5);j.setInteractive({useHandCursor:!0}),j.on("pointerover",()=>{j.setScale(1.1),j.setTint(13750737)}),j.on("pointerout",()=>{j.setScale(1),j.clearTint()}),j.on("pointerdown",()=>{this.scene.start("MenuScene")})}createCardPanel(){const z=this.rexUI.add.sizer({orientation:"y",space:{item:30}}),W=this.getAllCardsFromData(),j=3,it=W.filter(g=>g.cardType==="coin"),ht=W.filter(g=>g.cardType!=="coin"),R=[...it,...ht],s=Math.ceil(R.length/j);for(let g=0;g<s;g++){const y=this.rexUI.add.sizer({orientation:"x",space:{item:30}}),u=g*j;for(let l=0;l<j;l++){const h=u+l;if(h<R.length){const r=R[h],o=this.createCard(h+1,r);y.add(o)}else{const r=this.createCard(h+1,null);r.setVisible(!1),y.add(r)}}z.add(y)}return z}getAllCardsFromData(){const z=[],W=zH;return Object.keys(W).forEach(j=>{const it=W[j];if(j==="coin"&&it.length>0){const ht=it[0];ht.name&&typeof ht.name=="object"&&!Array.isArray(ht.name)?Object.keys(ht.name).forEach(R=>{const s={type:ht.type,rarity:ht.rarity,name:ht.name[R],id:ht.id[R],description:ht.description[R],element:R,className:ht.className,cardType:j};z.push(s)}):it.forEach(C=>{z.push({...C,cardType:j})})}else it.forEach(ht=>{z.push({...ht,cardType:j})})}),z}createCard(z,W,j=160,it=274.3){const ht=this.rexUI.add.roundRectangle({x:0,y:0,width:j+4,height:it+4,strokeColor:16777215,strokeThickness:2,radius:Math.min(j,it)*.08});let C;if(W)try{let y=W.type;W.type==="weapon"?y="weapon-"+W.category:W.type==="enemy"&&(y="enemy-"+W.clan),this.textures.exists(y)?this.textures.get(y).getFrameNames().includes(W.id)?C=this.add.image(0,0,y,W.id).setDisplaySize(j,it):C=this.add.image(0,0,"empty").setDisplaySize(j,it):C=this.add.image(0,0,"empty").setDisplaySize(j,it)}catch{C=this.add.image(0,0,"empty").setDisplaySize(j,it)}else C=this.add.image(0,0,"empty").setDisplaySize(j,it);const R=W?W.name:`Card ${z}`,s=this.add.text(0,it*.35,R,{fontSize:Math.max(8,j*.12),color:"#ffffff",wordWrap:{width:175},fontFamily:"Arial",stroke:"#000000",strokeThickness:Math.max(1,j*.02)}).setOrigin(.5),g=this.add.container(0,0,[C,ht,s]);return g.setSize(j,it),g.cardIndex=z,g.cardData=W,g.name=`card_${z}`,g}showCardInfoDialog(z){this.cardInfoDialog&&this.cardInfoDialog.destroy();const{width:W,height:j}=this.scale;this.cardInfoDialog=this.add.container(W/2,j/2),this.cardInfoDialog.setDepth(120);const it=this.add.rectangle(-W/2,-j/2,W,j,0,.7).setOrigin(0,0).setInteractive(),ht=this.add.graphics();ht.fillStyle(8388736,.95),ht.lineStyle(3,16724838),ht.fillRoundedRect(-200,-150,400,300,20),ht.strokeRoundedRect(-200,-150,400,300,20);let C;try{let l=z.type;z.type==="weapon"?l="weapon-"+z.category:z.type==="enemy"&&(l="enemy-"+z.clan),this.textures.exists(l)&&this.textures.get(l).getFrameNames().includes(z.id)?C=this.add.image(0,0,l,z.id):C=this.add.image(0,0,"empty")}catch{C=this.add.image(0,0,"empty")}C.setDisplaySize(80,137.14);const R=this.add.text(0,-120,z.name,{fontSize:"24px",color:"#ffffff",fontFamily:"Arial"});R.setOrigin(.5);const s=this.add.text(0,-100,`Type: ${z.type}`,{fontSize:"16px",color:"#ffb3d9",fontFamily:"Arial"});s.setOrigin(.5);const g=this.add.text(0,100,z.description,{fontSize:"14px",color:"#ecf0f1",fontFamily:"Arial",wordWrap:{width:300},align:"center"});g.setOrigin(.5);const y=this.add.graphics();y.fillStyle(16724838),y.fillRoundedRect(-30,-25,60,50,8),y.setPosition(0,190);const u=this.add.text(0,190,"X",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial"});u.setOrigin(.5),y.setInteractive(new Kt.Geom.Rectangle(-30,-25,60,50),Kt.Geom.Rectangle.Contains),y.on("pointerover",()=>{y.clear(),y.setScale(1.2),y.fillStyle(16739229),y.fillRoundedRect(-30,-25,60,50,8)}),y.on("pointerout",()=>{y.clear(),y.setScale(1),y.fillStyle(16724838),y.fillRoundedRect(-30,-25,60,50,8)}),y.on("pointerdown",()=>{this.hideCardInfoDialog()}),this.cardInfoDialog.add([it,ht,C,R,s,g,y,u]),this.add.existing(this.cardInfoDialog),this.escKey=this.input.keyboard.addKey("ESC"),this.escKey.on("down",()=>{this.hideCardInfoDialog()})}hideCardInfoDialog(){this.cardInfoDialog&&(this.cardInfoDialog.destroy(),this.cardInfoDialog=void 0),this.escKey&&(this.escKey.destroy(),this.escKey=void 0)}}class XH extends Kt.Scene{constructor(){super({key:"MapScenes"}),this.currentPage=0,this.itemsPerPage=5,this.dungeonButtons=[]}preload(){}create(){const{width:z,height:W}=this.scale;this.add.image(z/2,W/2,"background"),this.add.rectangle(z/2,W/2,z,W,0).setAlpha(.5),Qa.createGameTitle(this,"DUNGEON MAP",z/2,W*.18),this.dungeonContainer=this.add.container(z/2,W*.5),this.createInitialDungeonButtons(z,W),this.createPaginationButtons(z,W),this.showCurrentPage()}createInitialDungeonButtons(z,W){const j=z*.7,it=W*.08,ht=20;for(let C=0;C<5;C++){const R=(C-2)*(it+ht),s=this.add.rectangle(0,R,j,it,6433093);s.setAlpha(.5),s.setStrokeStyle(3,9852778),s.setInteractive();const g=this.add.text(0,R,"",{fontSize:"32px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}).setOrigin(.5);s.on("pointerover",()=>{s.setFillStyle(9774171),s.setStrokeStyle(3,16777215)}),s.on("pointerout",()=>{s.setFillStyle(6433093),s.setStrokeStyle(3,9852778)}),s.dungeonData=null,s.on("pointerdown",()=>{if(s.dungeonData){const{name:u,stageId:l}=s.dungeonData;console.log("MapScenes: Dungeon clicked!"),console.log(`stageId: ${l}`),console.log(`name: ${u}`),console.log("TODO: Implement dungeon logic"),this.scene.stop("GameScene"),this.scene.start("LoadingScene",{targetScene:"GameScene",dataTargetScene:{stageId:l}})}});const y=this.add.container(0,0);y.add([s,g]),this.dungeonButtons[C]=y,y.setVisible(!1),this.dungeonContainer.add(y)}console.log("MapScenes: Initial 5 dungeon buttons created and hidden")}updateDungeonButton(z,W,j){z.getAt(1).setText(W);const ht=z.getAt(0);ht.dungeonData={name:W,stageId:j},console.log(`MapScenes: Button updated - "${W}"`)}createPaginationButtons(z,W){const j=W*.8;this.prevButton=this.add.text(z*.3,j,"",{fontSize:"40px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}).setOrigin(.5),this.prevButton.setInteractive({useHandCursor:!0}),this.prevButton.on("pointerdown",()=>{this.prevButton.text===""?this.scene.start("MenuScene"):this.previousPage()}),this.nextButton=this.add.text(z*.7,j,"",{fontSize:"40px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}).setOrigin(.5),this.nextButton.setInteractive({useHandCursor:!0}),this.nextButton.on("pointerdown",()=>{this.nextPage()}),[this.prevButton,this.nextButton].forEach(it=>{it.on("pointerover",()=>{it.setStyle({color:"#ffd700"})}),it.on("pointerout",()=>{it.setStyle({color:"#ffffff"})})})}showCurrentPage(){const z=this.currentPage*this.itemsPerPage,W=Math.min(z+this.itemsPerPage,Ka.length),j=Ka.slice(z,W);console.log(`MapScenes: Showing page ${this.currentPage+1}, items ${z+1}-${W}`);for(let it=0;it<5;it++)if(it<j.length){const ht=j[it];this.updateDungeonButton(this.dungeonButtons[it],ht.name,ht.stageId),this.dungeonButtons[it].setVisible(!0),console.log(`MapScenes: Button ${it} updated with "${ht.name}" (baseIndex: ${z+it})`)}else this.dungeonButtons[it].setVisible(!1),console.log(`MapScenes: Button ${it} hidden (no data)`);this.updatePaginationButtons()}previousPage(){this.currentPage>0&&(this.currentPage--,this.showCurrentPage())}nextPage(){const z=Math.ceil(Ka.length/this.itemsPerPage)-1;this.currentPage<z&&(this.currentPage++,this.showCurrentPage())}updatePaginationButtons(){this.currentPage>0?(this.prevButton.setText(""),this.prevButton.setStyle({color:"#ffffff"}),this.prevButton.setInteractive()):(this.prevButton.setText(""),this.prevButton.setInteractive());const z=Math.ceil(Ka.length/this.itemsPerPage)-1;this.currentPage<z?(this.nextButton.setStyle({color:"#ffffff"}),this.nextButton.setInteractive()):(this.nextButton.setStyle({color:"#666666"}),this.nextButton.disableInteractive())}}class WH extends Kt.Scene{constructor(){super({key:"SelectCharacterScene"}),this.cards=X1,this.currentCardIndex=this.initializeCurrentCardIndex()}init(){const z=localStorage.getItem("characterHighScores");z?this.HighScores=JSON.parse(z):this.HighScores={},console.log(this.HighScores)}create(){const{width:z,height:W}=this.scale;this.add.image(z/2,W/2,"background").setDisplaySize(z,W),this.headerUI=Xd.createHeaderUI(this,z,W),Qa.createGameTitle(this,"CHARACTER",z/2,W*.12),this.createInfoPanel(z,W),this.createCurrentCardDisplay(z,W),this.createNavigationButtons(z,W),this.createBackButton(z,W),this.updateCardDisplay()}createInfoPanel(z,W){const j=this.add.graphics();j.fillStyle(9852778,.8),j.fillRoundedRect(z*.1,W*.15,z*.8,W*.25,20),j.lineStyle(3,2033172,1),j.strokeRoundedRect(z*.1,W*.15,z*.8,W*.25,20),this.cardNameText=this.add.text(z*.5,W*.18,"",{fontSize:"32px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold"}).setOrigin(.5),this.cardHighScoreText=this.add.text(z*.5,W*.202,"",{fontSize:"16px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold"}).setAlpha(.5).setOrigin(.5),this.cardLevelText=this.add.text(z*.82,W*.18,"level 1",{fontSize:"20px",color:"#FFD700",fontFamily:"Arial, sans-serif",fontStyle:"bold"}).setOrigin(.5),this.cardElementImage=this.add.image(z*.1+32,W*.15+32,"element","element-cryo"),this.cardElementImage.setDisplaySize(32,32),this.cardDescriptionText=this.add.text(z*.5,W*.26,"",{fontSize:"20px",color:"#ffffff",fontFamily:"Arial, sans-serif",wordWrap:{width:z*.75},align:"center"}).setOrigin(.5),this.cardHPText=this.add.text(z*.5,W*.32," 7",{fontSize:"32px",color:"#ffffff",fontFamily:"Arial, sans-serif",wordWrap:{width:z*.75},align:"center"}),this.cardHPText.setOrigin(.5),this.cardHPText.hp=7,this.upgradeButton=this.add.text(z*.5,W*.36,"UPGRADE",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",backgroundColor:"#95245b",padding:{x:20,y:10}}).setOrigin(.5),this.upgradeButton.setInteractive({useHandCursor:!0}),this.upgradeButton.on("pointerover",()=>{this.cards[this.currentCardIndex].level&&this.cards[this.currentCardIndex].level<9&&(this.upgradeButton.setTint(13750737),this.upgradeButton.setScale(1.1),this.upgradeButton.setStyle({color:"#ffee8dff"}),this.cardHPText.setText(`${this.upgradeCharacterPrice()}`))}),this.upgradeButton.on("pointerout",()=>{this.upgradeButton.clearTint(),this.upgradeButton.setScale(1),this.upgradeButton.setStyle({color:"#ffffff"}),this.cardHPText.setText(` ${this.cardHPText.hp}`)}),this.upgradeButton.on("pointerdown",()=>{this.cards[this.currentCardIndex].level&&this.cards[this.currentCardIndex].level<9&&(console.log("Upgrade button clicked!"),this.upgradeCharacter())})}createCurrentCardDisplay(z,W){this.currentCardContainer=this.add.container(z/2,W*.65),this.currentCardImage=this.add.image(0,0,"character","eula"),this.currentCardImage.setDisplaySize(300,514),this.cardBorder=this.add.graphics(),this.cardBorder.lineStyle(4,16777215,1),this.cardBorder.fillStyle(16777215,1),this.cardBorder.fillRoundedRect(-152,-259,304,518,28),this.cardBorder.strokeRoundedRect(-152,-259,304,518,28),this.currentCardContainer.add(this.cardBorder),this.currentCardContainer.add(this.currentCardImage)}createNavigationButtons(z,W){this.prevButton=this.add.text(z*.2,W*.65,"",{fontSize:"28px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",padding:{x:20,y:15}}).setOrigin(.5),this.prevButton.setInteractive({useHandCursor:!0}),this.prevButton.on("pointerover",()=>{}),this.prevButton.on("pointerout",()=>{}),this.prevButton.on("pointerdown",()=>{this.previousCard()}),this.nextButton=this.add.text(z*.8,W*.65,"",{fontSize:"28px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",padding:{x:20,y:15}}).setOrigin(.5),this.nextButton.setInteractive({useHandCursor:!0}),this.nextButton.on("pointerover",()=>{this.nextButton.setScale(1.1)}),this.nextButton.on("pointerout",()=>{this.nextButton.setScale(1)}),this.nextButton.on("pointerdown",()=>{this.nextCard()})}createBackButton(z,W){this.backButton=this.add.text(z*.5,W*.9,"SELECT",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",backgroundColor:"#622945",padding:{x:25,y:12}}).setOrigin(.5),this.backButton.setInteractive({useHandCursor:!0}),this.backButton.on("pointerover",()=>{this.backButton.setScale(1.1),this.backButton.setTint(13750737)}),this.backButton.on("pointerout",()=>{this.backButton.setScale(1),this.backButton.clearTint()}),this.backButton.on("pointerdown",()=>{localStorage.setItem("selectedCharacter",this.cards[this.currentCardIndex].id),this.scene.start("MenuScene")})}updateCardDisplay(){const z=this.cards[this.currentCardIndex];let W=localStorage.getItem("characterLevel");if(W)try{const j=JSON.parse(W);j[z.id]?z.level=j[z.id]:z.level=1}catch(j){console.warn("Error parsing CharacterLevel from localStorage:",j),z.level=1}else z.level=1;this.cardNameText.setText(z.name),this.cardElementImage.setTexture("element",`element-${z.element.toLowerCase()}`),this.cardDescriptionText.setText(z.description),this.cardHPText.setText(` ${z.hp+(z.level||1)-1}`),this.cardLevelText.setText(`level ${z.level||1}`),this.HighScores[z.id]?this.cardHighScoreText.setText(`High Score: ${this.HighScores[z.id]}`):this.cardHighScoreText.setText(""),(z.level||1)>=9?(this.upgradeButton.setText("MAX LEVEL"),this.upgradeButton.setStyle({color:"#FFFFFF"}),this.upgradeButton.setScale(1)):this.upgradeButton.setText("UPGRADE"),this.cardHPText.hp=z.hp+(z.level||1)-1,(z.level||1)>2?(this.currentCardContainer.remove(this.currentCardImage,!0),this.currentCardImage=Za.CharacterAnimation(this,0,0,z.id+"-sprite",300,514),this.currentCardContainer.add(this.currentCardImage),this.cardBorder.clear(),this.cardBorder.lineStyle(4,14467183,1),this.cardBorder.fillStyle(14467183,1),this.cardBorder.fillRoundedRect(-152,-259,304,518,28),this.cardBorder.strokeRoundedRect(-152,-259,304,518,28)):(this.currentCardContainer.remove(this.currentCardImage,!0),this.currentCardImage=this.add.image(0,0,"character",z.id),this.currentCardImage.setDisplaySize(300,514),this.currentCardContainer.add(this.currentCardImage),this.cardBorder.clear(),this.cardBorder.lineStyle(4,16777215,1),this.cardBorder.fillStyle(16777215,1),this.cardBorder.fillRoundedRect(-152,-259,304,518,28),this.cardBorder.strokeRoundedRect(-152,-259,304,518,28)),this.prevButton.setAlpha(this.currentCardIndex===0?.5:1),this.nextButton.setAlpha(this.currentCardIndex===this.cards.length-1?.5:1)}previousCard(){this.currentCardIndex>0&&(this.currentCardIndex--,this.updateCardDisplay())}nextCard(){this.currentCardIndex<this.cards.length-1&&(this.currentCardIndex++,this.updateCardDisplay())}upgradeCharacterPrice(){return(this.cards[this.currentCardIndex].level||1)*100}upgradeCharacter(){const z=this.cards[this.currentCardIndex];if((z.level||1)>=9){console.log(`Character ${z.name} is already at max level!`);return}let W=localStorage.getItem("characterLevel");W||(W="{}");let j;try{j=JSON.parse(W)}catch(it){console.warn("Error parsing CharacterLevel from localStorage:",it),j={}}z.level=(z.level||1)+1,j[z.id]=z.level,localStorage.setItem("characterLevel",JSON.stringify(j)),this.updateCardDisplay(),console.log(`Character ${z.name} upgraded to level ${z.level}`)}initializeCurrentCardIndex(){let z=0;const W=localStorage.getItem("selectedCharacter");if(W!==null)try{const j=W,it=this.cards.findIndex(ht=>ht.id===j);return it!==-1?(console.log(`SelectCharacterScene:  tm thy selectedCharacter "${j}" ti index ${it}`),it):(console.warn(`SelectCharacterScene: Khng tm thy selectedCharacter "${j}" trong mng cards, s dng index mc nh ${z}`),z)}catch(j){return console.warn(`SelectCharacterScene: Li parse selectedCharacter, s dng index mc nh ${z}`,j),z}else return console.log(`SelectCharacterScene: Khng c selectedCharacter, s dng index mc nh ${z}`),z}}class Gp{static createGradientButton(z,W,j,it,ht,C,R=["#ffb3d9","#45162c","#96576a"],s=null){const g=s||`gradientButton_${W}_${ht}x${C}`,y=8;if(!z.textures.exists(g)){let r=function(v,c,p,m,T,E){v.beginPath(),v.moveTo(c+E,p),v.lineTo(c+m-E,p),v.quadraticCurveTo(c+m,p,c+m,p+E),v.lineTo(c+m,p+T-E),v.quadraticCurveTo(c+m,p+T,c+m-E,p+T),v.lineTo(c+E,p+T),v.quadraticCurveTo(c,p+T,c,p+T-E),v.lineTo(c,p+E),v.quadraticCurveTo(c,p,c+E,p),v.closePath()};const o=z.textures.createCanvas(g,ht,C),d=o.getContext(),a=d.createLinearGradient(0,0,0,C),f=1/(R.length-1);R.forEach((v,c)=>{a.addColorStop(c*f,v)}),r(d,0,0,ht,C,y),d.fillStyle=a,d.fill(),d.lineWidth=4,d.strokeStyle="#1f0614",d.stroke(),o.refresh()}const u=z.add.image(j,it,g).setOrigin(.5),l=z.add.text(j,it,W,{fontSize:`${Math.max(16,Math.floor(C*.5))}px`,color:"#ffffff",fontFamily:"Arial, sans-serif",fontStyle:"bold",stroke:"#000000",strokeThickness:Math.max(2,Math.floor(C*.05))}).setOrigin(.5),h=z.add.container(j,it);return h.add([u,l]),u.buttonText=l,u.buttonContainer=h,u.setInteractive().on("pointerover",()=>{u.setTint(13750737)}).on("pointerout",()=>{u.clearTint()}),u}static createRubyButton(z,W,j,it,ht,C){return this.createGradientButton(z,W,j,it,ht,C,["#ffb3d9","#96576a"])}static createGoldButton(z,W,j,it,ht,C){return this.createGradientButton(z,W,j,it,ht,C,["#ffd700","#ffb347","#daa520"])}static createBlueButton(z,W,j,it,ht,C){return this.createGradientButton(z,W,j,it,ht,C,["#87ceeb","#4682b4","#191970"])}static createGreenButton(z,W,j,it,ht,C){return this.createGradientButton(z,W,j,it,ht,C,["#90ee90","#32cd32","#228b22"])}}class YH{constructor(){this.currentLanguage=localStorage.getItem("gameLanguage")||"vi",this.translations={},this.loadTranslations()}loadTranslations(){this.translations.vi={menu:"",settings:"",coin:"",high_score:"High Score",stage:"Stage",upgrade:"UPGRADE",sell:"SELL",buy:"BUY",start:"START",continue:"CONTINUE",back:"BACK",next:"NEXT",confirm:"CONFIRM",cancel:"CANCEL",game_over:"GAME OVER",victory:"VICTORY",paused:"PAUSED",loading:"LOADING...",raiden:"Raiden Shogun",zhongli:"Zhongli",venti:"Venti",nahida:"Nahida",furina:"Furina",eula:"Eula",mavuika:"Mavuika",electro:"Electro",pyro:"Pyro",hydro:"Hydro",cryo:"Cryo",anemo:"Anemo",geo:"Geo",dendro:"Dendro",character:"Character",weapon:"Weapon",enemy:"Enemy",trap:"Trap",treasure:"Treasure",food:"Food",bomb:"Bomb",language:"Language",theme:"Theme",sound:"Sound",music:"Music",volume:"Volume"},this.translations.en={menu:"",settings:"",coin:"",high_score:"High Score",stage:"Stage",upgrade:"UPGRADE",sell:"SELL",buy:"BUY",start:"START",continue:"CONTINUE",back:"BACK",next:"NEXT",confirm:"CONFIRM",cancel:"CANCEL",game_over:"GAME OVER",victory:"VICTORY",paused:"PAUSED",loading:"LOADING...",raiden:"Raiden Shogun",zhongli:"Zhongli",venti:"Venti",nahida:"Nahida",furina:"Furina",eula:"Eula",mavuika:"Mavuika",electro:"Electro",pyro:"Pyro",hydro:"Hydro",cryo:"Cryo",anemo:"Anemo",geo:"Geo",dendro:"Dendro",character:"Character",coin:"Coin",weapon:"Weapon",enemy:"Enemy",trap:"Trap",treasure:"Treasure",food:"Food",bomb:"Bomb",language:"Language",theme:"Theme",sound:"Sound",music:"Music",volume:"Volume"},this.translations.ja={menu:"",settings:"",coin:"",high_score:"",stage:"",upgrade:"",sell:"",buy:"",start:"",continue:"",back:"",next:"",confirm:"",cancel:"",game_over:"",victory:"",paused:"",loading:"...",raiden:"",zhongli:"",venti:"",nahida:"",furina:"",eula:"",mavuika:"",electro:"",pyro:"",hydro:"",cryo:"",anemo:"",geo:"",dendro:"",character:"",coin:"",weapon:"",enemy:"",trap:"",treasure:"",food:"",bomb:"",language:"",theme:"",sound:"",music:"",volume:""}}t(z,W={}){var it;let j=((it=this.translations[this.currentLanguage])==null?void 0:it[z])||this.translations.vi[z]||z;return Object.keys(W).forEach(ht=>{j=j.replace(`{${ht}}`,String(W[ht]))}),j}setLanguage(z){this.translations[z]&&(this.currentLanguage=z,localStorage.setItem("gameLanguage",z),typeof window<"u"&&window.gameEvents&&window.gameEvents.emit("languageChanged",z))}getAvailableLanguages(){return Object.keys(this.translations)}getLanguageName(z){return{vi:"Ting Vit",en:"English",ja:""}[z]||z}}const Ri=new YH;class HH{constructor(){this.currentTheme=localStorage.getItem("gameTheme")||"default",this.themes={},this.loadThemes()}loadThemes(){this.themes.default={name:"Default",colors:{background:"#000000",textPrimary:"#ffffff",textSecondary:"#d1d1d1",textGold:"#FFD700",textGoldStroke:"#E69500",buttonPrimary:"#95245b",buttonSecondary:"#45162c",buttonHover:"#d1d1d1",cardBackground:"#2d0d21",cardBorder:"#1f0612",gradientGold:["#cbbd1bff","#c57826ff","#8c3c0eff"],gradientButton:["#ffb3d9","#45162c","#96576a"],electro:"#9d4edd",pyro:"#ff6b35",hydro:"#4cc9f0",cryo:"#90e0ef",anemo:"#80ffdb",geo:"#f77f00",dendro:"#06ffa5",success:"#06ffa5",warning:"#ffd60a",error:"#ff006e",info:"#4cc9f0"},fonts:{primary:"Arial, sans-serif",secondary:"Arial, sans-serif"}},this.themes.dark={name:"Dark",colors:{background:"#0a0a0a",textPrimary:"#e0e0e0",textSecondary:"#a0a0a0",textGold:"#ffd700",textGoldStroke:"#b8860b",buttonPrimary:"#2c2c2c",buttonSecondary:"#1a1a1a",buttonHover:"#404040",cardBackground:"#1a1a1a",cardBorder:"#333333",gradientGold:["#ffd700","#ff8c00","#ff4500"],gradientButton:["#404040","#2c2c2c","#1a1a1a"],electro:"#8a2be2",pyro:"#ff4500",hydro:"#00bfff",cryo:"#87ceeb",anemo:"#98fb98",geo:"#daa520",dendro:"#32cd32",success:"#32cd32",warning:"#ffa500",error:"#ff0000",info:"#00bfff"},fonts:{primary:"Arial, sans-serif",secondary:"Arial, sans-serif"}},this.themes.light={name:"Light",colors:{background:"#f5f5f5",textPrimary:"#333333",textSecondary:"#666666",textGold:"#b8860b",textGoldStroke:"#8b6914",buttonPrimary:"#4a90e2",buttonSecondary:"#357abd",buttonHover:"#6ba3f0",cardBackground:"#ffffff",cardBorder:"#e0e0e0",gradientGold:["#ffd700","#ff8c00","#ff4500"],gradientButton:["#4a90e2","#357abd","#2c5aa0"],electro:"#9d4edd",pyro:"#ff6b35",hydro:"#4cc9f0",cryo:"#90e0ef",anemo:"#80ffdb",geo:"#f77f00",dendro:"#06ffa5",success:"#28a745",warning:"#ffc107",error:"#dc3545",info:"#17a2b8"},fonts:{primary:"Arial, sans-serif",secondary:"Arial, sans-serif"}},this.themes.cyberpunk={name:"Cyberpunk",colors:{background:"#0d1117",textPrimary:"#00ff41",textSecondary:"#00cc33",textGold:"#ffff00",textGoldStroke:"#cccc00",buttonPrimary:"#ff0080",buttonSecondary:"#800040",buttonHover:"#ff3399",cardBackground:"#161b22",cardBorder:"#00ff41",gradientGold:["#ffff00","#ff8000","#ff0000"],gradientButton:["#ff0080","#800040","#400020"],electro:"#00ffff",pyro:"#ff0040",hydro:"#0080ff",cryo:"#80ffff",anemo:"#80ff80",geo:"#ff8000",dendro:"#80ff00",success:"#00ff00",warning:"#ffff00",error:"#ff0000",info:"#00ffff"},fonts:{primary:"Courier New, monospace",secondary:"Courier New, monospace"}},this.themes.genshin={name:"Genshin",colors:{background:"#1a1a2e",textPrimary:"#ffffff",textSecondary:"#e0e0e0",textGold:"#ffd700",textGoldStroke:"#b8860b",buttonPrimary:"#4a148c",buttonSecondary:"#2e1065",buttonHover:"#6a1b9a",cardBackground:"#16213e",cardBorder:"#0f3460",gradientGold:["#ffd700","#ff8c00","#ff4500"],gradientButton:["#4a148c","#2e1065","#1a0d2e"],electro:"#9d4edd",pyro:"#ff6b35",hydro:"#4cc9f0",cryo:"#90e0ef",anemo:"#80ffdb",geo:"#f77f00",dendro:"#06ffa5",success:"#06ffa5",warning:"#ffd60a",error:"#ff006e",info:"#4cc9f0"},fonts:{primary:"Arial, sans-serif",secondary:"Arial, sans-serif"}}}getColor(z){var W;return((W=this.themes[this.currentTheme])==null?void 0:W.colors[z])??this.themes.default.colors[z]??"#ffffff"}getFont(z){var W;return((W=this.themes[this.currentTheme])==null?void 0:W.fonts[z])??this.themes.default.fonts[z]??"Arial, sans-serif"}getCurrentTheme(){return this.themes[this.currentTheme]??this.themes.default}setTheme(z){this.themes[z]&&(this.currentTheme=z,localStorage.setItem("gameTheme",z),typeof window<"u"&&window.gameEvents&&window.gameEvents.emit("themeChanged",z))}getAvailableThemes(){return Object.keys(this.themes).map(z=>({key:z,name:this.themes[z].name}))}getTextStyle(z){const W={title:{fontSize:"32px",color:this.getColor("textGold"),fontFamily:this.getFont("primary"),fontStyle:"bold",stroke:this.getColor("textGoldStroke"),strokeThickness:2},button:{fontSize:"24px",color:this.getColor("textPrimary"),fontFamily:this.getFont("primary"),fontStyle:"bold",backgroundColor:this.getColor("buttonPrimary"),padding:{x:20,y:10}},normal:{fontSize:"20px",color:this.getColor("textPrimary"),fontFamily:this.getFont("primary")},secondary:{fontSize:"18px",color:this.getColor("textSecondary"),fontFamily:this.getFont("secondary")},score:{fontSize:"20px",color:this.getColor("textPrimary"),fontFamily:this.getFont("primary"),alpha:.8}};return W[z]??W.normal}}const de=new HH;function Xr(Bt){return Kt.Display.Color.HexStringToColor(Bt).color}class $H extends Kt.Scene{constructor(){super({key:"SettingsScene"})}create(){const{width:z,height:W}=this.scale;this.createBackground(z,W),this.createTopBackButton(z,W),this.createTitle(z,W),this.createLanguagePanel(z,W),this.createThemePanel(z,W),this.createBackButton(z,W);const j=window;j.gameEvents&&(j.gameEvents.on("themeChanged",this.updateTheme,this),j.gameEvents.on("languageChanged",this.updateLanguage,this))}createBackground(z,W){const j=this.add.graphics();j.fillGradientStyle(Kt.Display.Color.HexStringToColor(de.getColor("background")).color,Kt.Display.Color.HexStringToColor(de.getColor("cardBackground")).color,Kt.Display.Color.HexStringToColor(de.getColor("background")).color,Kt.Display.Color.HexStringToColor(de.getColor("cardBackground")).color),j.fillRect(0,0,z,W)}createTopBackButton(z,W){const j=this.add.text(z*.1,W*.08,"",{fontSize:"32px",color:de.getColor("textPrimary"),fontFamily:de.getFont("primary"),fontStyle:"bold"}).setOrigin(.5);j.setInteractive({useHandCursor:!0}),j.on("pointerdown",()=>{this.scene.start("MenuScene")}),j.on("pointerover",()=>{j.setScale(1.2),j.setTint(Xr(de.getColor("buttonHover")))}),j.on("pointerout",()=>{j.setScale(1),j.clearTint()})}createTitle(z,W){const j=Ri.t("settings");this.titleText=Qa.createGradientText(this,{text:j,x:z/2,y:W*.1,fontSize:24,gradientColors:de.getCurrentTheme().colors.gradientGold,strokeColor:Xr(de.getColor("textGoldStroke"))})}createLanguagePanel(z,W){const j=W*.2,it=this.add.graphics();it.fillStyle(Xr(de.getColor("cardBackground"))),it.fillRoundedRect(z*.1,j-25,z*.8,50,10),it.lineStyle(2,Xr(de.getColor("cardBorder"))),it.strokeRoundedRect(z*.1,j-25,z*.8,50,10),this.add.text(z/2,j,Ri.t("language"),{fontSize:"22px",color:de.getColor("textPrimary"),fontFamily:de.getFont("primary"),fontStyle:"bold"}).setOrigin(.5);const ht=Ri.getAvailableLanguages(),C=Math.min(100,z*.25),R=45,s=Math.floor(z/(C+20)),g=z/(s+1);this.languageButtons=[],ht.forEach((y,u)=>{const l=Math.floor(u/s),h=u%s,r=g*(h+1)-C/2,o=j+80+l*60,d=y===Ri.currentLanguage,a=Gp.createGradientButton(this,Ri.getLanguageName(y),r,o,C,R,d?de.getCurrentTheme().colors.gradientButton:["#666666","#444444","#222222"]);a.setInteractive({useHandCursor:!0}),a.on("pointerdown",()=>{Ri.setLanguage(y),this.updateLanguageButtons()}),this.languageButtons.push({button:a,lang:y})})}createThemePanel(z,W){const j=Ri.getAvailableLanguages(),it=Math.min(100,z*.25),ht=Math.floor(z/(it+20)),C=Math.ceil(j.length/ht),R=W*.2+80+C*60+50,s=this.add.graphics();s.fillStyle(Xr(de.getColor("cardBackground"))),s.fillRoundedRect(z*.1,R-25,z*.8,50,10),s.lineStyle(2,Xr(de.getColor("cardBorder"))),s.strokeRoundedRect(z*.1,R-25,z*.8,50,10),this.add.text(z/2,R,Ri.t("theme"),{fontSize:"22px",color:de.getColor("textPrimary"),fontFamily:de.getFont("primary"),fontStyle:"bold"}).setOrigin(.5);const g=de.getAvailableThemes(),y=Math.min(100,z*.25),u=45,l=Math.floor(z/(y+20)),h=z/(l+1);this.themeButtons=[],g.forEach((r,o)=>{const d=Math.floor(o/l),a=o%l,f=h*(a+1)-y/2,v=R+80+d*60,c=r.key===de.currentTheme,p=Gp.createGradientButton(this,r.name,f,v,y,u,c?de.getCurrentTheme().colors.gradientButton:["#666666","#444444","#222222"]);p.setInteractive({useHandCursor:!0}),p.on("pointerdown",()=>{de.setTheme(r.key),this.updateThemeButtons()}),this.themeButtons.push({button:p,theme:r.key})})}createBackButton(z,W){const j=de.getAvailableThemes(),it=Math.min(100,z*.25),ht=Math.floor(z/(it+20)),C=Math.ceil(j.length/ht),R=Math.ceil(Ri.getAvailableLanguages().length/ht),s=W*.2+80+R*60+50+80+C*60+50,g=Gp.createGradientButton(this,Ri.t("back"),z/2,s,250,60,de.getCurrentTheme().colors.gradientButton);this.backButtonText=g.buttonText,g.setInteractive({useHandCursor:!0}),g.on("pointerdown",()=>{this.scene.start("MenuScene")}),g.on("pointerover",()=>{g.setScale(1.05)}),g.on("pointerout",()=>{g.setScale(1)})}updateTheme(){const{width:z,height:W}=this.scale;this.children.list.forEach(j=>{j.type==="Graphics"&&j.destroy()}),this.createBackground(z,W),this.titleText&&(this.titleText.destroy(),this.createTitle(z,W)),this.updateLanguageButtons(),this.updateThemeButtons()}updateLanguage(){const{width:z,height:W}=this.scale;this.titleText&&(this.titleText.destroy(),this.createTitle(z,W)),this.updateLanguageButtons(),this.updateThemeButtons(),this.backButtonText&&this.backButtonText.setText(Ri.t("back"))}updateLanguageButtons(){this.languageButtons.forEach(({button:z,lang:W})=>{const j=W===Ri.currentLanguage;z.buttonText.setText(Ri.getLanguageName(W)),j?z.setTint(Xr(de.getColor("buttonPrimary"))):z.clearTint()})}updateThemeButtons(){this.themeButtons.forEach(({button:z,theme:W})=>{W===de.currentTheme?z.setTint(Xr(de.getColor("buttonPrimary"))):z.clearTint()})}shutdown(){const z=window;z.gameEvents&&(z.gameEvents.off("themeChanged",this.updateTheme,this),z.gameEvents.off("languageChanged",this.updateLanguage,this))}}class KH extends Kt.Scene{constructor(){super({key:"TestGraphicsRenderTexture"}),this.currentAnimationIndex=0,this.animations=["Absorb","ArrowSpecial","Blow","Breath","Claw","ClawPhoton","ClawSpecial1","ClawSpecial2","Cure1","Cure2","Cure3","Cure4","Curse","Darkness1","Darkness2","Darkness3","Darkness4","Darkness5","Earth1","Earth2","Earth3","Earth4","Earth5","Explosion1","Explosion2","Fire1","Fire2","Fire3","Flash","Gun1","Gun2","Gun3","Hit1","Hit2","HitFire","HitIce","HitPhoton","HitSpecial1","HitSpecial2","HitThunder","Holy1","Holy2","Holy3","Holy4","Holy5","Howl","Ice1","Ice2","Ice3","Ice4","Ice5","Laser1","Laser2","Light1","Light2","Light3","Light4","Magic1","Magic2","Meteor","Mist","Pollen","PreSpecial1","PreSpecial2","PreSpecial3","Recovery1","Recovery2","Recovery3","Recovery4","Recovery5","Revival1","Revival2","Slash","SlashFire","SlashIce","SlashPhoton","SlashSpecial1","SlashSpecial2","SlashSpecial3","SlashThunder","Song","Sonic","Special1","Special2","Special3","StateChaos","StateDark","StateDeath","StateDown1","StateDown2","StateDown3","StateParalys","StatePoison","StateSilent","StateSleep","StateUp1","StateUp2","Stick","StickPhoton","StickSpecial1"]}preload(){this.animations.forEach(z=>{this.load.spritesheet(z,`assets/images/animations/${z}.png`,{frameWidth:192,frameHeight:192})})}create(){const{width:z,height:W}=this.scale;this.add.rectangle(z/2,W/2,z,W,0);const j=this.add.text(z/2,W*.9,"QUAY LI MENU",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}).setOrigin(.5);j.setInteractive({useHandCursor:!0}),j.on("pointerdown",()=>{this.scene.start("MenuScene")}),j.on("pointerover",()=>{j.setStyle({color:"#cccccc"})}),j.on("pointerout",()=>{j.setStyle({color:"#ffffff"})}),this.add.text(z/2,W*.1,"Kim Tra Sprite Animations",{fontSize:"32px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}).setOrigin(.5),this.createNavigationButtons(z,W),this.createAnimationSprite(z,W),this.animationNameText=this.add.text(z/2,W*.85,"",{fontSize:"20px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:1}).setOrigin(.5),this.playCurrentAnimation()}createNavigationButtons(z,W){const j=this.add.text(z*.2,W*.8," PREV",{fontSize:"20px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}).setOrigin(.5);j.setInteractive({useHandCursor:!0}),j.on("pointerdown",()=>{this.previousAnimation()}),j.on("pointerover",()=>{j.setStyle({color:"#cccccc"})}),j.on("pointerout",()=>{j.setStyle({color:"#ffffff"})});const it=this.add.text(z*.8,W*.8,"NEXT ",{fontSize:"20px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}).setOrigin(.5);it.setInteractive({useHandCursor:!0}),it.on("pointerdown",()=>{this.nextAnimation()}),it.on("pointerover",()=>{it.setStyle({color:"#cccccc"})}),it.on("pointerout",()=>{it.setStyle({color:"#ffffff"})})}createAnimationSprite(z,W){this.animationSprite=this.add.sprite(z/2,W/2,"Absorb"),this.animationSprite.setScale(2)}playCurrentAnimation(){const z=this.animations[this.currentAnimationIndex];if(!this.anims.exists(z)){const it=this.textures.get(z),ht=it.frameTotal,C=[];for(let R=0;R<ht;R++){const s=it.get(R);if(s&&s.width>0&&s.height>0)try{const y=s.source.image.getContext("2d");if(y){const l=y.getImageData(s.cutX,s.cutY,s.cutWidth,s.cutHeight).data;let h=!1;for(let r=3;r<l.length;r+=4)if(l[r]>0){h=!0;break}h&&C.push({key:z,frame:R})}}catch{C.push({key:z,frame:R})}}this.anims.create({key:z,frames:C,frameRate:10,repeat:-1})}this.animationSprite.play(z);const j=this.textures.get(z).frameTotal;this.animationNameText.setText(`${z} (${this.currentAnimationIndex+1}/${this.animations.length}) - ${j} frames`)}nextAnimation(){this.currentAnimationIndex=(this.currentAnimationIndex+1)%this.animations.length,this.playCurrentAnimation()}previousAnimation(){this.currentAnimationIndex=this.currentAnimationIndex===0?this.animations.length-1:this.currentAnimationIndex-1,this.playCurrentAnimation()}}var sd={exports:{}},U1;function ZH(){if(U1)return sd.exports;U1=1;var Bt=typeof Reflect=="object"?Reflect:null,z=Bt&&typeof Bt.apply=="function"?Bt.apply:function(p,m,T){return Function.prototype.apply.call(p,m,T)},W;Bt&&typeof Bt.ownKeys=="function"?W=Bt.ownKeys:Object.getOwnPropertySymbols?W=function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:W=function(p){return Object.getOwnPropertyNames(p)};function j(c){console&&console.warn&&console.warn(c)}var it=Number.isNaN||function(p){return p!==p};function ht(){ht.init.call(this)}sd.exports=ht,sd.exports.once=a,ht.EventEmitter=ht,ht.prototype._events=void 0,ht.prototype._eventsCount=0,ht.prototype._maxListeners=void 0;var C=10;function R(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(c){if(typeof c!="number"||c<0||it(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");C=c}}),ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ht.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||it(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this};function s(c){return c._maxListeners===void 0?ht.defaultMaxListeners:c._maxListeners}ht.prototype.getMaxListeners=function(){return s(this)},ht.prototype.emit=function(p){for(var m=[],T=1;T<arguments.length;T++)m.push(arguments[T]);var E=p==="error",P=this._events;if(P!==void 0)E=E&&P.error===void 0;else if(!E)return!1;if(E){var w;if(m.length>0&&(w=m[0]),w instanceof Error)throw w;var A=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw A.context=w,A}var b=P[p];if(b===void 0)return!1;if(typeof b=="function")z(b,this,m);else for(var O=b.length,I=r(b,O),T=0;T<O;++T)z(I[T],this,m);return!0};function g(c,p,m,T){var E,P,w;if(R(m),P=c._events,P===void 0?(P=c._events=Object.create(null),c._eventsCount=0):(P.newListener!==void 0&&(c.emit("newListener",p,m.listener?m.listener:m),P=c._events),w=P[p]),w===void 0)w=P[p]=m,++c._eventsCount;else if(typeof w=="function"?w=P[p]=T?[m,w]:[w,m]:T?w.unshift(m):w.push(m),E=s(c),E>0&&w.length>E&&!w.warned){w.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=c,A.type=p,A.count=w.length,j(A)}return c}ht.prototype.addListener=function(p,m){return g(this,p,m,!1)},ht.prototype.on=ht.prototype.addListener,ht.prototype.prependListener=function(p,m){return g(this,p,m,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(c,p,m){var T={fired:!1,wrapFn:void 0,target:c,type:p,listener:m},E=y.bind(T);return E.listener=m,T.wrapFn=E,E}ht.prototype.once=function(p,m){return R(m),this.on(p,u(this,p,m)),this},ht.prototype.prependOnceListener=function(p,m){return R(m),this.prependListener(p,u(this,p,m)),this},ht.prototype.removeListener=function(p,m){var T,E,P,w,A;if(R(m),E=this._events,E===void 0)return this;if(T=E[p],T===void 0)return this;if(T===m||T.listener===m)--this._eventsCount===0?this._events=Object.create(null):(delete E[p],E.removeListener&&this.emit("removeListener",p,T.listener||m));else if(typeof T!="function"){for(P=-1,w=T.length-1;w>=0;w--)if(T[w]===m||T[w].listener===m){A=T[w].listener,P=w;break}if(P<0)return this;P===0?T.shift():o(T,P),T.length===1&&(E[p]=T[0]),E.removeListener!==void 0&&this.emit("removeListener",p,A||m)}return this},ht.prototype.off=ht.prototype.removeListener,ht.prototype.removeAllListeners=function(p){var m,T,E;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[p]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[p]),this;if(arguments.length===0){var P=Object.keys(T),w;for(E=0;E<P.length;++E)w=P[E],w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(m=T[p],typeof m=="function")this.removeListener(p,m);else if(m!==void 0)for(E=m.length-1;E>=0;E--)this.removeListener(p,m[E]);return this};function l(c,p,m){var T=c._events;if(T===void 0)return[];var E=T[p];return E===void 0?[]:typeof E=="function"?m?[E.listener||E]:[E]:m?d(E):r(E,E.length)}ht.prototype.listeners=function(p){return l(this,p,!0)},ht.prototype.rawListeners=function(p){return l(this,p,!1)},ht.listenerCount=function(c,p){return typeof c.listenerCount=="function"?c.listenerCount(p):h.call(c,p)},ht.prototype.listenerCount=h;function h(c){var p=this._events;if(p!==void 0){var m=p[c];if(typeof m=="function")return 1;if(m!==void 0)return m.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?W(this._events):[]};function r(c,p){for(var m=new Array(p),T=0;T<p;++T)m[T]=c[T];return m}function o(c,p){for(;p+1<c.length;p++)c[p]=c[p+1];c.pop()}function d(c){for(var p=new Array(c.length),m=0;m<p.length;++m)p[m]=c[m].listener||c[m];return p}function a(c,p){return new Promise(function(m,T){function E(w){c.removeListener(p,P),T(w)}function P(){typeof c.removeListener=="function"&&c.removeListener("error",E),m([].slice.call(arguments))}v(c,p,P,{once:!0}),p!=="error"&&f(c,E,{once:!0})})}function f(c,p,m){typeof c.on=="function"&&v(c,"error",p,m)}function v(c,p,m,T){if(typeof c.on=="function")T.once?c.once(p,m):c.on(p,m);else if(typeof c.addEventListener=="function")c.addEventListener(p,function E(P){T.once&&c.removeEventListener(p,E),m(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c)}return sd.exports}var JH=ZH();class QH extends JH.EventEmitter{constructor(){super(),this.setMaxListeners(50)}emit(z,...W){return console.log(`GameEvent: ${z}`,W),super.emit(z,...W)}on(z,W){return super.on(z,W)}off(z,W){return super.off(z,W)}}const jH=new QH;window.gameEvents=jH;const qH={type:Kt.AUTO,width:720,height:1280,parent:"game-container",backgroundColor:"#000000",scale:{mode:Kt.Scale.FIT,autoCenter:Kt.Scale.CENTER_BOTH},plugins:{scene:[{key:"rexUI",plugin:qW,mapping:"rexUI"}]},scene:[uH,LH,WH,bH,VH,XH,RH,$H,KH]},_H=new Kt.Game(qH);window.game=_H;
